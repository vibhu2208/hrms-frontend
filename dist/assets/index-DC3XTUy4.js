const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/billing-BWWpGVWH.js","assets/vendor-Q3K9tvtn.js","assets/router-s1y5QMC8.js","assets/ui-B1466kFN.js"])))=>i.map(i=>d[i]);
import{r as y,a as an,b as Ve,c as ug,g as mg}from"./vendor-Q3K9tvtn.js";import{N as er,u as Mr,L as ns,a as Je,O as Go,b as Ga,c as m0,B as hg,R as fg,d as pe}from"./router-s1y5QMC8.js";import{X as Le,L as h0,B as ot,C as Oe,U as Ue,a as Be,D as gt,b as qa,c as Zs,d as Yo,e as lr,S as Lt,P as is,F as st,f as Ta,g as wi,h as Nn,M as fn,i as pg,j as gg,k as yg,l as bg,m as Da,n as _t,o as ul,H as to,p as Te,q as Zo,r as vg,s as yt,T as Ks,t as jg,u as wn,v as _r,A as Jt,w as Fr,x as Ol,y as wt,z as Tr,E as pn,G as Ht,I as _,J as so,K as xt,N as Qt,O as mt,Q as _a,R as js,V as Jo,W as xr,Y as Ra,Z as Qe,_ as mc,$ as qe,a0 as $a,a1 as kt,a2 as ao,a3 as ml,a4 as Xo,a5 as Mt,a6 as Bs,a7 as f0,a8 as Ko,a9 as Rs,aa as kn,ab as Ll,ac as p0,ad as Ng,ae as gn,af as Ml,ag as Vs,ah as Qo,ai as wg,aj as Nr,ak as kg,al as Bl,am as Sg,an as Xt,ao as g0,ap as ya,aq as y0,ar as ro,as as no,at as rx,au as hc,av as Cg,aw as Dr,ax as ed,ay as Ag,az as Eg,aA as Gn,aB as _g,aC as Fg,aD as Tg,aE as Mi,aF as hl,aG as td,aH as Dg,aI as Rg,aJ as Pg,aK as Ig,aL as b0,aM as $g,aN as io,aO as nx,aP as ix,aQ as Og,aR as Lg,aS as lx,aT as zl,aU as Mg,aV as Bg,aW as zg,aX as Ug,aY as Vg,aZ as Hg,a_ as v0,a$ as qg}from"./ui-B1466kFN.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function a(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(n){if(n.ep)return;n.ep=!0;const i=a(n);fetch(n.href,i)}})();var j0={exports:{}},Ul={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wg=y,Gg=Symbol.for("react.element"),Yg=Symbol.for("react.fragment"),Zg=Object.prototype.hasOwnProperty,Jg=Wg.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Xg={key:!0,ref:!0,__self:!0,__source:!0};function N0(t,s,a){var r,n={},i=null,l=null;a!==void 0&&(i=""+a),s.key!==void 0&&(i=""+s.key),s.ref!==void 0&&(l=s.ref);for(r in s)Zg.call(s,r)&&!Xg.hasOwnProperty(r)&&(n[r]=s[r]);if(t&&t.defaultProps)for(r in s=t.defaultProps,s)n[r]===void 0&&(n[r]=s[r]);return{$$typeof:Gg,type:t,key:i,ref:l,props:n,_owner:Jg.current}}Ul.Fragment=Yg;Ul.jsx=N0;Ul.jsxs=N0;j0.exports=Ul;var e=j0.exports,lo={},cx=an;lo.createRoot=cx.createRoot,lo.hydrateRoot=cx.hydrateRoot;function w0(t,s){return function(){return t.apply(s,arguments)}}const{toString:Kg}=Object.prototype,{getPrototypeOf:sd}=Object,{iterator:Vl,toStringTag:k0}=Symbol,Hl=(t=>s=>{const a=Kg.call(s);return t[a]||(t[a]=a.slice(8,-1).toLowerCase())})(Object.create(null)),va=t=>(t=t.toLowerCase(),s=>Hl(s)===t),ql=t=>s=>typeof s===t,{isArray:Sn}=Array,yn=ql("undefined");function ki(t){return t!==null&&!yn(t)&&t.constructor!==null&&!yn(t.constructor)&&zs(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const S0=va("ArrayBuffer");function Qg(t){let s;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?s=ArrayBuffer.isView(t):s=t&&t.buffer&&S0(t.buffer),s}const ey=ql("string"),zs=ql("function"),C0=ql("number"),Si=t=>t!==null&&typeof t=="object",ty=t=>t===!0||t===!1,ll=t=>{if(Hl(t)!=="object")return!1;const s=sd(t);return(s===null||s===Object.prototype||Object.getPrototypeOf(s)===null)&&!(k0 in t)&&!(Vl in t)},sy=t=>{if(!Si(t)||ki(t))return!1;try{return Object.keys(t).length===0&&Object.getPrototypeOf(t)===Object.prototype}catch{return!1}},ay=va("Date"),ry=va("File"),ny=va("Blob"),iy=va("FileList"),ly=t=>Si(t)&&zs(t.pipe),cy=t=>{let s;return t&&(typeof FormData=="function"&&t instanceof FormData||zs(t.append)&&((s=Hl(t))==="formdata"||s==="object"&&zs(t.toString)&&t.toString()==="[object FormData]"))},oy=va("URLSearchParams"),[dy,xy,uy,my]=["ReadableStream","Request","Response","Headers"].map(va),hy=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Ci(t,s,{allOwnKeys:a=!1}={}){if(t===null||typeof t>"u")return;let r,n;if(typeof t!="object"&&(t=[t]),Sn(t))for(r=0,n=t.length;r<n;r++)s.call(null,t[r],r,t);else{if(ki(t))return;const i=a?Object.getOwnPropertyNames(t):Object.keys(t),l=i.length;let c;for(r=0;r<l;r++)c=i[r],s.call(null,t[c],c,t)}}function A0(t,s){if(ki(t))return null;s=s.toLowerCase();const a=Object.keys(t);let r=a.length,n;for(;r-- >0;)if(n=a[r],s===n.toLowerCase())return n;return null}const wr=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,E0=t=>!yn(t)&&t!==wr;function co(){const{caseless:t,skipUndefined:s}=E0(this)&&this||{},a={},r=(n,i)=>{const l=t&&A0(a,i)||i;ll(a[l])&&ll(n)?a[l]=co(a[l],n):ll(n)?a[l]=co({},n):Sn(n)?a[l]=n.slice():(!s||!yn(n))&&(a[l]=n)};for(let n=0,i=arguments.length;n<i;n++)arguments[n]&&Ci(arguments[n],r);return a}const fy=(t,s,a,{allOwnKeys:r}={})=>(Ci(s,(n,i)=>{a&&zs(n)?t[i]=w0(n,a):t[i]=n},{allOwnKeys:r}),t),py=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),gy=(t,s,a,r)=>{t.prototype=Object.create(s.prototype,r),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:s.prototype}),a&&Object.assign(t.prototype,a)},yy=(t,s,a,r)=>{let n,i,l;const c={};if(s=s||{},t==null)return s;do{for(n=Object.getOwnPropertyNames(t),i=n.length;i-- >0;)l=n[i],(!r||r(l,t,s))&&!c[l]&&(s[l]=t[l],c[l]=!0);t=a!==!1&&sd(t)}while(t&&(!a||a(t,s))&&t!==Object.prototype);return s},by=(t,s,a)=>{t=String(t),(a===void 0||a>t.length)&&(a=t.length),a-=s.length;const r=t.indexOf(s,a);return r!==-1&&r===a},vy=t=>{if(!t)return null;if(Sn(t))return t;let s=t.length;if(!C0(s))return null;const a=new Array(s);for(;s-- >0;)a[s]=t[s];return a},jy=(t=>s=>t&&s instanceof t)(typeof Uint8Array<"u"&&sd(Uint8Array)),Ny=(t,s)=>{const r=(t&&t[Vl]).call(t);let n;for(;(n=r.next())&&!n.done;){const i=n.value;s.call(t,i[0],i[1])}},wy=(t,s)=>{let a;const r=[];for(;(a=t.exec(s))!==null;)r.push(a);return r},ky=va("HTMLFormElement"),Sy=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(a,r,n){return r.toUpperCase()+n}),ox=(({hasOwnProperty:t})=>(s,a)=>t.call(s,a))(Object.prototype),Cy=va("RegExp"),_0=(t,s)=>{const a=Object.getOwnPropertyDescriptors(t),r={};Ci(a,(n,i)=>{let l;(l=s(n,i,t))!==!1&&(r[i]=l||n)}),Object.defineProperties(t,r)},Ay=t=>{_0(t,(s,a)=>{if(zs(t)&&["arguments","caller","callee"].indexOf(a)!==-1)return!1;const r=t[a];if(zs(r)){if(s.enumerable=!1,"writable"in s){s.writable=!1;return}s.set||(s.set=()=>{throw Error("Can not rewrite read-only method '"+a+"'")})}})},Ey=(t,s)=>{const a={},r=n=>{n.forEach(i=>{a[i]=!0})};return Sn(t)?r(t):r(String(t).split(s)),a},_y=()=>{},Fy=(t,s)=>t!=null&&Number.isFinite(t=+t)?t:s;function Ty(t){return!!(t&&zs(t.append)&&t[k0]==="FormData"&&t[Vl])}const Dy=t=>{const s=new Array(10),a=(r,n)=>{if(Si(r)){if(s.indexOf(r)>=0)return;if(ki(r))return r;if(!("toJSON"in r)){s[n]=r;const i=Sn(r)?[]:{};return Ci(r,(l,c)=>{const o=a(l,n+1);!yn(o)&&(i[c]=o)}),s[n]=void 0,i}}return r};return a(t,0)},Ry=va("AsyncFunction"),Py=t=>t&&(Si(t)||zs(t))&&zs(t.then)&&zs(t.catch),F0=((t,s)=>t?setImmediate:s?((a,r)=>(wr.addEventListener("message",({source:n,data:i})=>{n===wr&&i===a&&r.length&&r.shift()()},!1),n=>{r.push(n),wr.postMessage(a,"*")}))(`axios@${Math.random()}`,[]):a=>setTimeout(a))(typeof setImmediate=="function",zs(wr.postMessage)),Iy=typeof queueMicrotask<"u"?queueMicrotask.bind(wr):typeof process<"u"&&process.nextTick||F0,$y=t=>t!=null&&zs(t[Vl]),ve={isArray:Sn,isArrayBuffer:S0,isBuffer:ki,isFormData:cy,isArrayBufferView:Qg,isString:ey,isNumber:C0,isBoolean:ty,isObject:Si,isPlainObject:ll,isEmptyObject:sy,isReadableStream:dy,isRequest:xy,isResponse:uy,isHeaders:my,isUndefined:yn,isDate:ay,isFile:ry,isBlob:ny,isRegExp:Cy,isFunction:zs,isStream:ly,isURLSearchParams:oy,isTypedArray:jy,isFileList:iy,forEach:Ci,merge:co,extend:fy,trim:hy,stripBOM:py,inherits:gy,toFlatObject:yy,kindOf:Hl,kindOfTest:va,endsWith:by,toArray:vy,forEachEntry:Ny,matchAll:wy,isHTMLForm:ky,hasOwnProperty:ox,hasOwnProp:ox,reduceDescriptors:_0,freezeMethods:Ay,toObjectSet:Ey,toCamelCase:Sy,noop:_y,toFiniteNumber:Fy,findKey:A0,global:wr,isContextDefined:E0,isSpecCompliantForm:Ty,toJSONObject:Dy,isAsyncFn:Ry,isThenable:Py,setImmediate:F0,asap:Iy,isIterable:$y};function tt(t,s,a,r,n){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",s&&(this.code=s),a&&(this.config=a),r&&(this.request=r),n&&(this.response=n,this.status=n.status?n.status:null)}ve.inherits(tt,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:ve.toJSONObject(this.config),code:this.code,status:this.status}}});const T0=tt.prototype,D0={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{D0[t]={value:t}});Object.defineProperties(tt,D0);Object.defineProperty(T0,"isAxiosError",{value:!0});tt.from=(t,s,a,r,n,i)=>{const l=Object.create(T0);ve.toFlatObject(t,l,function(x){return x!==Error.prototype},d=>d!=="isAxiosError");const c=t&&t.message?t.message:"Error",o=s==null&&t?t.code:s;return tt.call(l,c,o,a,r,n),t&&l.cause==null&&Object.defineProperty(l,"cause",{value:t,configurable:!0}),l.name=t&&t.name||"Error",i&&Object.assign(l,i),l};const Oy=null;function oo(t){return ve.isPlainObject(t)||ve.isArray(t)}function R0(t){return ve.endsWith(t,"[]")?t.slice(0,-2):t}function dx(t,s,a){return t?t.concat(s).map(function(n,i){return n=R0(n),!a&&i?"["+n+"]":n}).join(a?".":""):s}function Ly(t){return ve.isArray(t)&&!t.some(oo)}const My=ve.toFlatObject(ve,{},null,function(s){return/^is[A-Z]/.test(s)});function Wl(t,s,a){if(!ve.isObject(t))throw new TypeError("target must be an object");s=s||new FormData,a=ve.toFlatObject(a,{metaTokens:!0,dots:!1,indexes:!1},!1,function(h,p){return!ve.isUndefined(p[h])});const r=a.metaTokens,n=a.visitor||x,i=a.dots,l=a.indexes,o=(a.Blob||typeof Blob<"u"&&Blob)&&ve.isSpecCompliantForm(s);if(!ve.isFunction(n))throw new TypeError("visitor must be a function");function d(g){if(g===null)return"";if(ve.isDate(g))return g.toISOString();if(ve.isBoolean(g))return g.toString();if(!o&&ve.isBlob(g))throw new tt("Blob is not supported. Use a Buffer instead.");return ve.isArrayBuffer(g)||ve.isTypedArray(g)?o&&typeof Blob=="function"?new Blob([g]):Buffer.from(g):g}function x(g,h,p){let j=g;if(g&&!p&&typeof g=="object"){if(ve.endsWith(h,"{}"))h=r?h:h.slice(0,-2),g=JSON.stringify(g);else if(ve.isArray(g)&&Ly(g)||(ve.isFileList(g)||ve.endsWith(h,"[]"))&&(j=ve.toArray(g)))return h=R0(h),j.forEach(function(w,b){!(ve.isUndefined(w)||w===null)&&s.append(l===!0?dx([h],b,i):l===null?h:h+"[]",d(w))}),!1}return oo(g)?!0:(s.append(dx(p,h,i),d(g)),!1)}const u=[],m=Object.assign(My,{defaultVisitor:x,convertValue:d,isVisitable:oo});function f(g,h){if(!ve.isUndefined(g)){if(u.indexOf(g)!==-1)throw Error("Circular reference detected in "+h.join("."));u.push(g),ve.forEach(g,function(j,v){(!(ve.isUndefined(j)||j===null)&&n.call(s,j,ve.isString(v)?v.trim():v,h,m))===!0&&f(j,h?h.concat(v):[v])}),u.pop()}}if(!ve.isObject(t))throw new TypeError("data must be an object");return f(t),s}function xx(t){const s={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(r){return s[r]})}function ad(t,s){this._pairs=[],t&&Wl(t,this,s)}const P0=ad.prototype;P0.append=function(s,a){this._pairs.push([s,a])};P0.toString=function(s){const a=s?function(r){return s.call(this,r,xx)}:xx;return this._pairs.map(function(n){return a(n[0])+"="+a(n[1])},"").join("&")};function By(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function I0(t,s,a){if(!s)return t;const r=a&&a.encode||By;ve.isFunction(a)&&(a={serialize:a});const n=a&&a.serialize;let i;if(n?i=n(s,a):i=ve.isURLSearchParams(s)?s.toString():new ad(s,a).toString(r),i){const l=t.indexOf("#");l!==-1&&(t=t.slice(0,l)),t+=(t.indexOf("?")===-1?"?":"&")+i}return t}class ux{constructor(){this.handlers=[]}use(s,a,r){return this.handlers.push({fulfilled:s,rejected:a,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(s){this.handlers[s]&&(this.handlers[s]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(s){ve.forEach(this.handlers,function(r){r!==null&&s(r)})}}const $0={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},zy=typeof URLSearchParams<"u"?URLSearchParams:ad,Uy=typeof FormData<"u"?FormData:null,Vy=typeof Blob<"u"?Blob:null,Hy={isBrowser:!0,classes:{URLSearchParams:zy,FormData:Uy,Blob:Vy},protocols:["http","https","file","blob","url","data"]},rd=typeof window<"u"&&typeof document<"u",xo=typeof navigator=="object"&&navigator||void 0,qy=rd&&(!xo||["ReactNative","NativeScript","NS"].indexOf(xo.product)<0),Wy=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",Gy=rd&&window.location.href||"http://localhost",Yy=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:rd,hasStandardBrowserEnv:qy,hasStandardBrowserWebWorkerEnv:Wy,navigator:xo,origin:Gy},Symbol.toStringTag,{value:"Module"})),ys={...Yy,...Hy};function Zy(t,s){return Wl(t,new ys.classes.URLSearchParams,{visitor:function(a,r,n,i){return ys.isNode&&ve.isBuffer(a)?(this.append(r,a.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)},...s})}function Jy(t){return ve.matchAll(/\w+|\[(\w*)]/g,t).map(s=>s[0]==="[]"?"":s[1]||s[0])}function Xy(t){const s={},a=Object.keys(t);let r;const n=a.length;let i;for(r=0;r<n;r++)i=a[r],s[i]=t[i];return s}function O0(t){function s(a,r,n,i){let l=a[i++];if(l==="__proto__")return!0;const c=Number.isFinite(+l),o=i>=a.length;return l=!l&&ve.isArray(n)?n.length:l,o?(ve.hasOwnProp(n,l)?n[l]=[n[l],r]:n[l]=r,!c):((!n[l]||!ve.isObject(n[l]))&&(n[l]=[]),s(a,r,n[l],i)&&ve.isArray(n[l])&&(n[l]=Xy(n[l])),!c)}if(ve.isFormData(t)&&ve.isFunction(t.entries)){const a={};return ve.forEachEntry(t,(r,n)=>{s(Jy(r),n,a,0)}),a}return null}function Ky(t,s,a){if(ve.isString(t))try{return(s||JSON.parse)(t),ve.trim(t)}catch(r){if(r.name!=="SyntaxError")throw r}return(a||JSON.stringify)(t)}const Ai={transitional:$0,adapter:["xhr","http","fetch"],transformRequest:[function(s,a){const r=a.getContentType()||"",n=r.indexOf("application/json")>-1,i=ve.isObject(s);if(i&&ve.isHTMLForm(s)&&(s=new FormData(s)),ve.isFormData(s))return n?JSON.stringify(O0(s)):s;if(ve.isArrayBuffer(s)||ve.isBuffer(s)||ve.isStream(s)||ve.isFile(s)||ve.isBlob(s)||ve.isReadableStream(s))return s;if(ve.isArrayBufferView(s))return s.buffer;if(ve.isURLSearchParams(s))return a.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),s.toString();let c;if(i){if(r.indexOf("application/x-www-form-urlencoded")>-1)return Zy(s,this.formSerializer).toString();if((c=ve.isFileList(s))||r.indexOf("multipart/form-data")>-1){const o=this.env&&this.env.FormData;return Wl(c?{"files[]":s}:s,o&&new o,this.formSerializer)}}return i||n?(a.setContentType("application/json",!1),Ky(s)):s}],transformResponse:[function(s){const a=this.transitional||Ai.transitional,r=a&&a.forcedJSONParsing,n=this.responseType==="json";if(ve.isResponse(s)||ve.isReadableStream(s))return s;if(s&&ve.isString(s)&&(r&&!this.responseType||n)){const l=!(a&&a.silentJSONParsing)&&n;try{return JSON.parse(s,this.parseReviver)}catch(c){if(l)throw c.name==="SyntaxError"?tt.from(c,tt.ERR_BAD_RESPONSE,this,null,this.response):c}}return s}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:ys.classes.FormData,Blob:ys.classes.Blob},validateStatus:function(s){return s>=200&&s<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};ve.forEach(["delete","get","head","post","put","patch"],t=>{Ai.headers[t]={}});const Qy=ve.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),eb=t=>{const s={};let a,r,n;return t&&t.split(`
`).forEach(function(l){n=l.indexOf(":"),a=l.substring(0,n).trim().toLowerCase(),r=l.substring(n+1).trim(),!(!a||s[a]&&Qy[a])&&(a==="set-cookie"?s[a]?s[a].push(r):s[a]=[r]:s[a]=s[a]?s[a]+", "+r:r)}),s},mx=Symbol("internals");function On(t){return t&&String(t).trim().toLowerCase()}function cl(t){return t===!1||t==null?t:ve.isArray(t)?t.map(cl):String(t)}function tb(t){const s=Object.create(null),a=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=a.exec(t);)s[r[1]]=r[2];return s}const sb=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function fc(t,s,a,r,n){if(ve.isFunction(r))return r.call(this,s,a);if(n&&(s=a),!!ve.isString(s)){if(ve.isString(r))return s.indexOf(r)!==-1;if(ve.isRegExp(r))return r.test(s)}}function ab(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(s,a,r)=>a.toUpperCase()+r)}function rb(t,s){const a=ve.toCamelCase(" "+s);["get","set","has"].forEach(r=>{Object.defineProperty(t,r+a,{value:function(n,i,l){return this[r].call(this,s,n,i,l)},configurable:!0})})}let Us=class{constructor(s){s&&this.set(s)}set(s,a,r){const n=this;function i(c,o,d){const x=On(o);if(!x)throw new Error("header name must be a non-empty string");const u=ve.findKey(n,x);(!u||n[u]===void 0||d===!0||d===void 0&&n[u]!==!1)&&(n[u||o]=cl(c))}const l=(c,o)=>ve.forEach(c,(d,x)=>i(d,x,o));if(ve.isPlainObject(s)||s instanceof this.constructor)l(s,a);else if(ve.isString(s)&&(s=s.trim())&&!sb(s))l(eb(s),a);else if(ve.isObject(s)&&ve.isIterable(s)){let c={},o,d;for(const x of s){if(!ve.isArray(x))throw TypeError("Object iterator must return a key-value pair");c[d=x[0]]=(o=c[d])?ve.isArray(o)?[...o,x[1]]:[o,x[1]]:x[1]}l(c,a)}else s!=null&&i(a,s,r);return this}get(s,a){if(s=On(s),s){const r=ve.findKey(this,s);if(r){const n=this[r];if(!a)return n;if(a===!0)return tb(n);if(ve.isFunction(a))return a.call(this,n,r);if(ve.isRegExp(a))return a.exec(n);throw new TypeError("parser must be boolean|regexp|function")}}}has(s,a){if(s=On(s),s){const r=ve.findKey(this,s);return!!(r&&this[r]!==void 0&&(!a||fc(this,this[r],r,a)))}return!1}delete(s,a){const r=this;let n=!1;function i(l){if(l=On(l),l){const c=ve.findKey(r,l);c&&(!a||fc(r,r[c],c,a))&&(delete r[c],n=!0)}}return ve.isArray(s)?s.forEach(i):i(s),n}clear(s){const a=Object.keys(this);let r=a.length,n=!1;for(;r--;){const i=a[r];(!s||fc(this,this[i],i,s,!0))&&(delete this[i],n=!0)}return n}normalize(s){const a=this,r={};return ve.forEach(this,(n,i)=>{const l=ve.findKey(r,i);if(l){a[l]=cl(n),delete a[i];return}const c=s?ab(i):String(i).trim();c!==i&&delete a[i],a[c]=cl(n),r[c]=!0}),this}concat(...s){return this.constructor.concat(this,...s)}toJSON(s){const a=Object.create(null);return ve.forEach(this,(r,n)=>{r!=null&&r!==!1&&(a[n]=s&&ve.isArray(r)?r.join(", "):r)}),a}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([s,a])=>s+": "+a).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(s){return s instanceof this?s:new this(s)}static concat(s,...a){const r=new this(s);return a.forEach(n=>r.set(n)),r}static accessor(s){const r=(this[mx]=this[mx]={accessors:{}}).accessors,n=this.prototype;function i(l){const c=On(l);r[c]||(rb(n,l),r[c]=!0)}return ve.isArray(s)?s.forEach(i):i(s),this}};Us.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);ve.reduceDescriptors(Us.prototype,({value:t},s)=>{let a=s[0].toUpperCase()+s.slice(1);return{get:()=>t,set(r){this[a]=r}}});ve.freezeMethods(Us);function pc(t,s){const a=this||Ai,r=s||a,n=Us.from(r.headers);let i=r.data;return ve.forEach(t,function(c){i=c.call(a,i,n.normalize(),s?s.status:void 0)}),n.normalize(),i}function L0(t){return!!(t&&t.__CANCEL__)}function Cn(t,s,a){tt.call(this,t??"canceled",tt.ERR_CANCELED,s,a),this.name="CanceledError"}ve.inherits(Cn,tt,{__CANCEL__:!0});function M0(t,s,a){const r=a.config.validateStatus;!a.status||!r||r(a.status)?t(a):s(new tt("Request failed with status code "+a.status,[tt.ERR_BAD_REQUEST,tt.ERR_BAD_RESPONSE][Math.floor(a.status/100)-4],a.config,a.request,a))}function nb(t){const s=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return s&&s[1]||""}function ib(t,s){t=t||10;const a=new Array(t),r=new Array(t);let n=0,i=0,l;return s=s!==void 0?s:1e3,function(o){const d=Date.now(),x=r[i];l||(l=d),a[n]=o,r[n]=d;let u=i,m=0;for(;u!==n;)m+=a[u++],u=u%t;if(n=(n+1)%t,n===i&&(i=(i+1)%t),d-l<s)return;const f=x&&d-x;return f?Math.round(m*1e3/f):void 0}}function lb(t,s){let a=0,r=1e3/s,n,i;const l=(d,x=Date.now())=>{a=x,n=null,i&&(clearTimeout(i),i=null),t(...d)};return[(...d)=>{const x=Date.now(),u=x-a;u>=r?l(d,x):(n=d,i||(i=setTimeout(()=>{i=null,l(n)},r-u)))},()=>n&&l(n)]}const fl=(t,s,a=3)=>{let r=0;const n=ib(50,250);return lb(i=>{const l=i.loaded,c=i.lengthComputable?i.total:void 0,o=l-r,d=n(o),x=l<=c;r=l;const u={loaded:l,total:c,progress:c?l/c:void 0,bytes:o,rate:d||void 0,estimated:d&&c&&x?(c-l)/d:void 0,event:i,lengthComputable:c!=null,[s?"download":"upload"]:!0};t(u)},a)},hx=(t,s)=>{const a=t!=null;return[r=>s[0]({lengthComputable:a,total:t,loaded:r}),s[1]]},fx=t=>(...s)=>ve.asap(()=>t(...s)),cb=ys.hasStandardBrowserEnv?((t,s)=>a=>(a=new URL(a,ys.origin),t.protocol===a.protocol&&t.host===a.host&&(s||t.port===a.port)))(new URL(ys.origin),ys.navigator&&/(msie|trident)/i.test(ys.navigator.userAgent)):()=>!0,ob=ys.hasStandardBrowserEnv?{write(t,s,a,r,n,i){const l=[t+"="+encodeURIComponent(s)];ve.isNumber(a)&&l.push("expires="+new Date(a).toGMTString()),ve.isString(r)&&l.push("path="+r),ve.isString(n)&&l.push("domain="+n),i===!0&&l.push("secure"),document.cookie=l.join("; ")},read(t){const s=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return s?decodeURIComponent(s[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function db(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function xb(t,s){return s?t.replace(/\/?\/$/,"")+"/"+s.replace(/^\/+/,""):t}function B0(t,s,a){let r=!db(s);return t&&(r||a==!1)?xb(t,s):s}const px=t=>t instanceof Us?{...t}:t;function Rr(t,s){s=s||{};const a={};function r(d,x,u,m){return ve.isPlainObject(d)&&ve.isPlainObject(x)?ve.merge.call({caseless:m},d,x):ve.isPlainObject(x)?ve.merge({},x):ve.isArray(x)?x.slice():x}function n(d,x,u,m){if(ve.isUndefined(x)){if(!ve.isUndefined(d))return r(void 0,d,u,m)}else return r(d,x,u,m)}function i(d,x){if(!ve.isUndefined(x))return r(void 0,x)}function l(d,x){if(ve.isUndefined(x)){if(!ve.isUndefined(d))return r(void 0,d)}else return r(void 0,x)}function c(d,x,u){if(u in s)return r(d,x);if(u in t)return r(void 0,d)}const o={url:i,method:i,data:i,baseURL:l,transformRequest:l,transformResponse:l,paramsSerializer:l,timeout:l,timeoutMessage:l,withCredentials:l,withXSRFToken:l,adapter:l,responseType:l,xsrfCookieName:l,xsrfHeaderName:l,onUploadProgress:l,onDownloadProgress:l,decompress:l,maxContentLength:l,maxBodyLength:l,beforeRedirect:l,transport:l,httpAgent:l,httpsAgent:l,cancelToken:l,socketPath:l,responseEncoding:l,validateStatus:c,headers:(d,x,u)=>n(px(d),px(x),u,!0)};return ve.forEach(Object.keys({...t,...s}),function(x){const u=o[x]||n,m=u(t[x],s[x],x);ve.isUndefined(m)&&u!==c||(a[x]=m)}),a}const z0=t=>{const s=Rr({},t);let{data:a,withXSRFToken:r,xsrfHeaderName:n,xsrfCookieName:i,headers:l,auth:c}=s;if(s.headers=l=Us.from(l),s.url=I0(B0(s.baseURL,s.url,s.allowAbsoluteUrls),t.params,t.paramsSerializer),c&&l.set("Authorization","Basic "+btoa((c.username||"")+":"+(c.password?unescape(encodeURIComponent(c.password)):""))),ve.isFormData(a)){if(ys.hasStandardBrowserEnv||ys.hasStandardBrowserWebWorkerEnv)l.setContentType(void 0);else if(ve.isFunction(a.getHeaders)){const o=a.getHeaders(),d=["content-type","content-length"];Object.entries(o).forEach(([x,u])=>{d.includes(x.toLowerCase())&&l.set(x,u)})}}if(ys.hasStandardBrowserEnv&&(r&&ve.isFunction(r)&&(r=r(s)),r||r!==!1&&cb(s.url))){const o=n&&i&&ob.read(i);o&&l.set(n,o)}return s},ub=typeof XMLHttpRequest<"u",mb=ub&&function(t){return new Promise(function(a,r){const n=z0(t);let i=n.data;const l=Us.from(n.headers).normalize();let{responseType:c,onUploadProgress:o,onDownloadProgress:d}=n,x,u,m,f,g;function h(){f&&f(),g&&g(),n.cancelToken&&n.cancelToken.unsubscribe(x),n.signal&&n.signal.removeEventListener("abort",x)}let p=new XMLHttpRequest;p.open(n.method.toUpperCase(),n.url,!0),p.timeout=n.timeout;function j(){if(!p)return;const w=Us.from("getAllResponseHeaders"in p&&p.getAllResponseHeaders()),A={data:!c||c==="text"||c==="json"?p.responseText:p.response,status:p.status,statusText:p.statusText,headers:w,config:t,request:p};M0(function(C){a(C),h()},function(C){r(C),h()},A),p=null}"onloadend"in p?p.onloadend=j:p.onreadystatechange=function(){!p||p.readyState!==4||p.status===0&&!(p.responseURL&&p.responseURL.indexOf("file:")===0)||setTimeout(j)},p.onabort=function(){p&&(r(new tt("Request aborted",tt.ECONNABORTED,t,p)),p=null)},p.onerror=function(b){const A=b&&b.message?b.message:"Network Error",N=new tt(A,tt.ERR_NETWORK,t,p);N.event=b||null,r(N),p=null},p.ontimeout=function(){let b=n.timeout?"timeout of "+n.timeout+"ms exceeded":"timeout exceeded";const A=n.transitional||$0;n.timeoutErrorMessage&&(b=n.timeoutErrorMessage),r(new tt(b,A.clarifyTimeoutError?tt.ETIMEDOUT:tt.ECONNABORTED,t,p)),p=null},i===void 0&&l.setContentType(null),"setRequestHeader"in p&&ve.forEach(l.toJSON(),function(b,A){p.setRequestHeader(A,b)}),ve.isUndefined(n.withCredentials)||(p.withCredentials=!!n.withCredentials),c&&c!=="json"&&(p.responseType=n.responseType),d&&([m,g]=fl(d,!0),p.addEventListener("progress",m)),o&&p.upload&&([u,f]=fl(o),p.upload.addEventListener("progress",u),p.upload.addEventListener("loadend",f)),(n.cancelToken||n.signal)&&(x=w=>{p&&(r(!w||w.type?new Cn(null,t,p):w),p.abort(),p=null)},n.cancelToken&&n.cancelToken.subscribe(x),n.signal&&(n.signal.aborted?x():n.signal.addEventListener("abort",x)));const v=nb(n.url);if(v&&ys.protocols.indexOf(v)===-1){r(new tt("Unsupported protocol "+v+":",tt.ERR_BAD_REQUEST,t));return}p.send(i||null)})},hb=(t,s)=>{const{length:a}=t=t?t.filter(Boolean):[];if(s||a){let r=new AbortController,n;const i=function(d){if(!n){n=!0,c();const x=d instanceof Error?d:this.reason;r.abort(x instanceof tt?x:new Cn(x instanceof Error?x.message:x))}};let l=s&&setTimeout(()=>{l=null,i(new tt(`timeout ${s} of ms exceeded`,tt.ETIMEDOUT))},s);const c=()=>{t&&(l&&clearTimeout(l),l=null,t.forEach(d=>{d.unsubscribe?d.unsubscribe(i):d.removeEventListener("abort",i)}),t=null)};t.forEach(d=>d.addEventListener("abort",i));const{signal:o}=r;return o.unsubscribe=()=>ve.asap(c),o}},fb=function*(t,s){let a=t.byteLength;if(a<s){yield t;return}let r=0,n;for(;r<a;)n=r+s,yield t.slice(r,n),r=n},pb=async function*(t,s){for await(const a of gb(t))yield*fb(a,s)},gb=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const s=t.getReader();try{for(;;){const{done:a,value:r}=await s.read();if(a)break;yield r}}finally{await s.cancel()}},gx=(t,s,a,r)=>{const n=pb(t,s);let i=0,l,c=o=>{l||(l=!0,r&&r(o))};return new ReadableStream({async pull(o){try{const{done:d,value:x}=await n.next();if(d){c(),o.close();return}let u=x.byteLength;if(a){let m=i+=u;a(m)}o.enqueue(new Uint8Array(x))}catch(d){throw c(d),d}},cancel(o){return c(o),n.return()}},{highWaterMark:2})},yx=64*1024,{isFunction:Bi}=ve,yb=(({Request:t,Response:s})=>({Request:t,Response:s}))(ve.global),{ReadableStream:bx,TextEncoder:vx}=ve.global,jx=(t,...s)=>{try{return!!t(...s)}catch{return!1}},bb=t=>{t=ve.merge.call({skipUndefined:!0},yb,t);const{fetch:s,Request:a,Response:r}=t,n=s?Bi(s):typeof fetch=="function",i=Bi(a),l=Bi(r);if(!n)return!1;const c=n&&Bi(bx),o=n&&(typeof vx=="function"?(g=>h=>g.encode(h))(new vx):async g=>new Uint8Array(await new a(g).arrayBuffer())),d=i&&c&&jx(()=>{let g=!1;const h=new a(ys.origin,{body:new bx,method:"POST",get duplex(){return g=!0,"half"}}).headers.has("Content-Type");return g&&!h}),x=l&&c&&jx(()=>ve.isReadableStream(new r("").body)),u={stream:x&&(g=>g.body)};n&&["text","arrayBuffer","blob","formData","stream"].forEach(g=>{!u[g]&&(u[g]=(h,p)=>{let j=h&&h[g];if(j)return j.call(h);throw new tt(`Response type '${g}' is not supported`,tt.ERR_NOT_SUPPORT,p)})});const m=async g=>{if(g==null)return 0;if(ve.isBlob(g))return g.size;if(ve.isSpecCompliantForm(g))return(await new a(ys.origin,{method:"POST",body:g}).arrayBuffer()).byteLength;if(ve.isArrayBufferView(g)||ve.isArrayBuffer(g))return g.byteLength;if(ve.isURLSearchParams(g)&&(g=g+""),ve.isString(g))return(await o(g)).byteLength},f=async(g,h)=>{const p=ve.toFiniteNumber(g.getContentLength());return p??m(h)};return async g=>{let{url:h,method:p,data:j,signal:v,cancelToken:w,timeout:b,onDownloadProgress:A,onUploadProgress:N,responseType:C,headers:k,withCredentials:S="same-origin",fetchOptions:F}=z0(g),R=s||fetch;C=C?(C+"").toLowerCase():"text";let T=hb([v,w&&w.toAbortSignal()],b),M=null;const H=T&&T.unsubscribe&&(()=>{T.unsubscribe()});let U;try{if(N&&d&&p!=="get"&&p!=="head"&&(U=await f(k,j))!==0){let de=new a(h,{method:"POST",body:j,duplex:"half"}),E;if(ve.isFormData(j)&&(E=de.headers.get("content-type"))&&k.setContentType(E),de.body){const[z,O]=hx(U,fl(fx(N)));j=gx(de.body,yx,z,O)}}ve.isString(S)||(S=S?"include":"omit");const W=i&&"credentials"in a.prototype,se={...F,signal:T,method:p.toUpperCase(),headers:k.normalize().toJSON(),body:j,duplex:"half",credentials:W?S:void 0};M=i&&new a(h,se);let X=await(i?R(M,F):R(h,se));const D=x&&(C==="stream"||C==="response");if(x&&(A||D&&H)){const de={};["status","statusText","headers"].forEach(P=>{de[P]=X[P]});const E=ve.toFiniteNumber(X.headers.get("content-length")),[z,O]=A&&hx(E,fl(fx(A),!0))||[];X=new r(gx(X.body,yx,z,()=>{O&&O(),H&&H()}),de)}C=C||"text";let le=await u[ve.findKey(u,C)||"text"](X,g);return!D&&H&&H(),await new Promise((de,E)=>{M0(de,E,{data:le,headers:Us.from(X.headers),status:X.status,statusText:X.statusText,config:g,request:M})})}catch(W){throw H&&H(),W&&W.name==="TypeError"&&/Load failed|fetch/i.test(W.message)?Object.assign(new tt("Network Error",tt.ERR_NETWORK,g,M),{cause:W.cause||W}):tt.from(W,W&&W.code,g,M)}}},vb=new Map,U0=t=>{let s=t?t.env:{};const{fetch:a,Request:r,Response:n}=s,i=[r,n,a];let l=i.length,c=l,o,d,x=vb;for(;c--;)o=i[c],d=x.get(o),d===void 0&&x.set(o,d=c?new Map:bb(s)),x=d;return d};U0();const uo={http:Oy,xhr:mb,fetch:{get:U0}};ve.forEach(uo,(t,s)=>{if(t){try{Object.defineProperty(t,"name",{value:s})}catch{}Object.defineProperty(t,"adapterName",{value:s})}});const Nx=t=>`- ${t}`,jb=t=>ve.isFunction(t)||t===null||t===!1,V0={getAdapter:(t,s)=>{t=ve.isArray(t)?t:[t];const{length:a}=t;let r,n;const i={};for(let l=0;l<a;l++){r=t[l];let c;if(n=r,!jb(r)&&(n=uo[(c=String(r)).toLowerCase()],n===void 0))throw new tt(`Unknown adapter '${c}'`);if(n&&(ve.isFunction(n)||(n=n.get(s))))break;i[c||"#"+l]=n}if(!n){const l=Object.entries(i).map(([o,d])=>`adapter ${o} `+(d===!1?"is not supported by the environment":"is not available in the build"));let c=a?l.length>1?`since :
`+l.map(Nx).join(`
`):" "+Nx(l[0]):"as no adapter specified";throw new tt("There is no suitable adapter to dispatch the request "+c,"ERR_NOT_SUPPORT")}return n},adapters:uo};function gc(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Cn(null,t)}function wx(t){return gc(t),t.headers=Us.from(t.headers),t.data=pc.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),V0.getAdapter(t.adapter||Ai.adapter,t)(t).then(function(r){return gc(t),r.data=pc.call(t,t.transformResponse,r),r.headers=Us.from(r.headers),r},function(r){return L0(r)||(gc(t),r&&r.response&&(r.response.data=pc.call(t,t.transformResponse,r.response),r.response.headers=Us.from(r.response.headers))),Promise.reject(r)})}const H0="1.12.2",Gl={};["object","boolean","number","function","string","symbol"].forEach((t,s)=>{Gl[t]=function(r){return typeof r===t||"a"+(s<1?"n ":" ")+t}});const kx={};Gl.transitional=function(s,a,r){function n(i,l){return"[Axios v"+H0+"] Transitional option '"+i+"'"+l+(r?". "+r:"")}return(i,l,c)=>{if(s===!1)throw new tt(n(l," has been removed"+(a?" in "+a:"")),tt.ERR_DEPRECATED);return a&&!kx[l]&&(kx[l]=!0,console.warn(n(l," has been deprecated since v"+a+" and will be removed in the near future"))),s?s(i,l,c):!0}};Gl.spelling=function(s){return(a,r)=>(console.warn(`${r} is likely a misspelling of ${s}`),!0)};function Nb(t,s,a){if(typeof t!="object")throw new tt("options must be an object",tt.ERR_BAD_OPTION_VALUE);const r=Object.keys(t);let n=r.length;for(;n-- >0;){const i=r[n],l=s[i];if(l){const c=t[i],o=c===void 0||l(c,i,t);if(o!==!0)throw new tt("option "+i+" must be "+o,tt.ERR_BAD_OPTION_VALUE);continue}if(a!==!0)throw new tt("Unknown option "+i,tt.ERR_BAD_OPTION)}}const ol={assertOptions:Nb,validators:Gl},ka=ol.validators;let Cr=class{constructor(s){this.defaults=s||{},this.interceptors={request:new ux,response:new ux}}async request(s,a){try{return await this._request(s,a)}catch(r){if(r instanceof Error){let n={};Error.captureStackTrace?Error.captureStackTrace(n):n=new Error;const i=n.stack?n.stack.replace(/^.+\n/,""):"";try{r.stack?i&&!String(r.stack).endsWith(i.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+i):r.stack=i}catch{}}throw r}}_request(s,a){typeof s=="string"?(a=a||{},a.url=s):a=s||{},a=Rr(this.defaults,a);const{transitional:r,paramsSerializer:n,headers:i}=a;r!==void 0&&ol.assertOptions(r,{silentJSONParsing:ka.transitional(ka.boolean),forcedJSONParsing:ka.transitional(ka.boolean),clarifyTimeoutError:ka.transitional(ka.boolean)},!1),n!=null&&(ve.isFunction(n)?a.paramsSerializer={serialize:n}:ol.assertOptions(n,{encode:ka.function,serialize:ka.function},!0)),a.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?a.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:a.allowAbsoluteUrls=!0),ol.assertOptions(a,{baseUrl:ka.spelling("baseURL"),withXsrfToken:ka.spelling("withXSRFToken")},!0),a.method=(a.method||this.defaults.method||"get").toLowerCase();let l=i&&ve.merge(i.common,i[a.method]);i&&ve.forEach(["delete","get","head","post","put","patch","common"],g=>{delete i[g]}),a.headers=Us.concat(l,i);const c=[];let o=!0;this.interceptors.request.forEach(function(h){typeof h.runWhen=="function"&&h.runWhen(a)===!1||(o=o&&h.synchronous,c.unshift(h.fulfilled,h.rejected))});const d=[];this.interceptors.response.forEach(function(h){d.push(h.fulfilled,h.rejected)});let x,u=0,m;if(!o){const g=[wx.bind(this),void 0];for(g.unshift(...c),g.push(...d),m=g.length,x=Promise.resolve(a);u<m;)x=x.then(g[u++],g[u++]);return x}m=c.length;let f=a;for(;u<m;){const g=c[u++],h=c[u++];try{f=g(f)}catch(p){h.call(this,p);break}}try{x=wx.call(this,f)}catch(g){return Promise.reject(g)}for(u=0,m=d.length;u<m;)x=x.then(d[u++],d[u++]);return x}getUri(s){s=Rr(this.defaults,s);const a=B0(s.baseURL,s.url,s.allowAbsoluteUrls);return I0(a,s.params,s.paramsSerializer)}};ve.forEach(["delete","get","head","options"],function(s){Cr.prototype[s]=function(a,r){return this.request(Rr(r||{},{method:s,url:a,data:(r||{}).data}))}});ve.forEach(["post","put","patch"],function(s){function a(r){return function(i,l,c){return this.request(Rr(c||{},{method:s,headers:r?{"Content-Type":"multipart/form-data"}:{},url:i,data:l}))}}Cr.prototype[s]=a(),Cr.prototype[s+"Form"]=a(!0)});let wb=class q0{constructor(s){if(typeof s!="function")throw new TypeError("executor must be a function.");let a;this.promise=new Promise(function(i){a=i});const r=this;this.promise.then(n=>{if(!r._listeners)return;let i=r._listeners.length;for(;i-- >0;)r._listeners[i](n);r._listeners=null}),this.promise.then=n=>{let i;const l=new Promise(c=>{r.subscribe(c),i=c}).then(n);return l.cancel=function(){r.unsubscribe(i)},l},s(function(i,l,c){r.reason||(r.reason=new Cn(i,l,c),a(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(s){if(this.reason){s(this.reason);return}this._listeners?this._listeners.push(s):this._listeners=[s]}unsubscribe(s){if(!this._listeners)return;const a=this._listeners.indexOf(s);a!==-1&&this._listeners.splice(a,1)}toAbortSignal(){const s=new AbortController,a=r=>{s.abort(r)};return this.subscribe(a),s.signal.unsubscribe=()=>this.unsubscribe(a),s.signal}static source(){let s;return{token:new q0(function(n){s=n}),cancel:s}}};function kb(t){return function(a){return t.apply(null,a)}}function Sb(t){return ve.isObject(t)&&t.isAxiosError===!0}const mo={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(mo).forEach(([t,s])=>{mo[s]=t});function W0(t){const s=new Cr(t),a=w0(Cr.prototype.request,s);return ve.extend(a,Cr.prototype,s,{allOwnKeys:!0}),ve.extend(a,s,null,{allOwnKeys:!0}),a.create=function(n){return W0(Rr(t,n))},a}const ht=W0(Ai);ht.Axios=Cr;ht.CanceledError=Cn;ht.CancelToken=wb;ht.isCancel=L0;ht.VERSION=H0;ht.toFormData=Wl;ht.AxiosError=tt;ht.Cancel=ht.CanceledError;ht.all=function(s){return Promise.all(s)};ht.spread=kb;ht.isAxiosError=Sb;ht.mergeConfig=Rr;ht.AxiosHeaders=Us;ht.formToJSON=t=>O0(ve.isHTMLForm(t)?new FormData(t):t);ht.getAdapter=V0.getAdapter;ht.HttpStatusCode=mo;ht.default=ht;const{Axios:fR,AxiosError:pR,CanceledError:gR,isCancel:yR,CancelToken:bR,VERSION:vR,all:jR,Cancel:NR,isAxiosError:wR,spread:kR,toFormData:SR,AxiosHeaders:CR,HttpStatusCode:AR,formToJSON:ER,getAdapter:_R,mergeConfig:FR}=ht,Fa={DEVELOPMENT:"development",PRODUCTION:"production",STAGING:"staging"},Cb=()=>Fa.PRODUCTION,Ab=t=>{switch(t){case Fa.DEVELOPMENT:return"/api";case Fa.STAGING:return"https://hrms-backend-staging.onrender.com/api";case Fa.PRODUCTION:default:return"https://hrms-backend-xbz8.onrender.com/api"}},Eb=t=>{switch(t){case Fa.DEVELOPMENT:return"http://localhost:5173";case Fa.STAGING:return"https://hrms-staging.vercel.app";case Fa.PRODUCTION:default:return"https://hrms-frontend-blush.vercel.app"}},Zr=Cb(),it={env:Zr,isDevelopment:Zr===Fa.DEVELOPMENT,isProduction:Zr===Fa.PRODUCTION,isStaging:Zr===Fa.STAGING,apiBaseUrl:Ab(Zr),frontendUrl:Eb(Zr),apiTimeout:3e4,features:{aiAnalysis:!0,notifications:!0}};it.isDevelopment&&console.log("ðŸ”§ API Configuration:",{environment:it.env,apiBaseUrl:it.apiBaseUrl,frontendUrl:it.frontendUrl,note:"Using Vite proxy - requests to /api are forwarded to http://localhost:5001"});const _b=Object.freeze(Object.defineProperty({__proto__:null,config:it,default:it},Symbol.toStringTag,{value:"Module"}));let yc=!1,ho=[];const Sx=(t,s=null)=>{ho.forEach(a=>{t?a.reject(t):a.resolve(s)}),ho=[]},J=ht.create({baseURL:it.apiBaseUrl,timeout:it.apiTimeout,headers:{"Content-Type":"application/json"}});J.interceptors.request.use(t=>{const s=localStorage.getItem("token");return s&&(t.headers.Authorization=`Bearer ${s}`),t},t=>Promise.reject(t));J.interceptors.response.use(t=>t,async t=>{var a,r;const s=t.config;if(((a=t.response)==null?void 0:a.status)===401&&!s._retry){if(yc)return new Promise((l,c)=>{ho.push({resolve:l,reject:c})}).then(l=>(s.headers.Authorization=`Bearer ${l}`,J(s))).catch(l=>Promise.reject(l));s._retry=!0,yc=!0;const n=localStorage.getItem("refreshToken"),i=(r=JSON.parse(localStorage.getItem("user")))==null?void 0:r.companyId;if(n)try{const l=await ht.post(`${it.apiBaseUrl}/auth/refresh-token`,{refreshToken:n,...i&&{companyId:i}}),{accessToken:c,refreshToken:o,user:d}=l.data.data;return localStorage.setItem("token",c),o&&localStorage.setItem("refreshToken",o),localStorage.setItem("user",JSON.stringify(d)),J.defaults.headers.common.Authorization=`Bearer ${c}`,Sx(null,c),s.headers.Authorization=`Bearer ${c}`,J(s)}catch(l){return Sx(l,null),localStorage.removeItem("token"),localStorage.removeItem("refreshToken"),localStorage.removeItem("user"),window.location.href="/login",Promise.reject(l)}finally{yc=!1}else localStorage.removeItem("token"),localStorage.removeItem("user"),window.location.href="/login"}return Promise.reject(t)});const G0=y.createContext(null),Rt=()=>{const t=y.useContext(G0);if(!t)throw new Error("useAuth must be used within an AuthProvider");return t},Fb=({children:t})=>{const[s,a]=y.useState(null),[r,n]=y.useState(!0),[i,l]=y.useState(localStorage.getItem("token")),[c,o]=y.useState(localStorage.getItem("refreshToken"));y.useEffect(()=>{(async()=>{const v=localStorage.getItem("token"),w=localStorage.getItem("refreshToken"),b=localStorage.getItem("user");v&&b&&(l(v),o(w),a(JSON.parse(b))),n(!1)})()},[]);const d=async(j,v,w=null)=>{var b,A,N,C;try{const k=await J.post("/auth/login",{email:j,password:v,...w&&{companyId:w}}),{token:S,refreshToken:F,user:R}=k.data.data;return localStorage.setItem("token",S),localStorage.setItem("refreshToken",F),localStorage.setItem("user",JSON.stringify(R)),R.themePreference&&localStorage.setItem("theme",R.themePreference),l(S),o(F),a(R),{success:!0}}catch(k){return{success:!1,message:((A=(b=k.response)==null?void 0:b.data)==null?void 0:A.message)||"Login failed",lockoutRemaining:(C=(N=k.response)==null?void 0:N.data)==null?void 0:C.lockoutRemaining}}},x=async j=>{var v,w;try{const b=await J.post("/auth/register",j),{token:A,user:N}=b.data.data;return localStorage.setItem("token",A),localStorage.setItem("user",JSON.stringify(N)),l(A),a(N),{success:!0}}catch(b){return{success:!1,message:((w=(v=b.response)==null?void 0:v.data)==null?void 0:w.message)||"Registration failed"}}},u=async j=>{var v,w;try{const b=await J.post("/auth/google",{credential:j}),{token:A,user:N}=b.data.data;return localStorage.setItem("token",A),localStorage.setItem("user",JSON.stringify(N)),N.themePreference&&localStorage.setItem("theme",N.themePreference),l(A),a(N),{success:!0}}catch(b){return{success:!1,message:((w=(v=b.response)==null?void 0:v.data)==null?void 0:w.message)||"Google login failed"}}},m=async()=>{var j,v,w;try{const b=localStorage.getItem("refreshToken"),A=(j=JSON.parse(localStorage.getItem("user")))==null?void 0:j.companyId;if(!b)throw new Error("No refresh token available");const N=await J.post("/auth/refresh-token",{refreshToken:b,...A&&{companyId:A}}),{accessToken:C,refreshToken:k,user:S}=N.data.data;return localStorage.setItem("token",C),k&&(localStorage.setItem("refreshToken",k),o(k)),localStorage.setItem("user",JSON.stringify(S)),l(C),a(S),{success:!0,accessToken:C}}catch(b){return f(),{success:!1,message:((w=(v=b.response)==null?void 0:v.data)==null?void 0:w.message)||"Token refresh failed"}}},f=async()=>{try{const j=localStorage.getItem("refreshToken");j&&await J.post("/auth/logout",{refreshToken:j})}catch(j){console.error("Error during logout:",j)}finally{localStorage.removeItem("token"),localStorage.removeItem("refreshToken"),localStorage.removeItem("user"),l(null),o(null),a(null)}},p={user:s,token:i,refreshToken:c,loading:r,login:d,googleLogin:u,register:x,logout:f,logoutAll:async()=>{try{await J.post("/auth/logout-all")}catch(j){console.error("Error during logout all:",j)}finally{localStorage.removeItem("token"),localStorage.removeItem("refreshToken"),localStorage.removeItem("user"),l(null),o(null),a(null)}},refreshAccessToken:m,updateUser:j=>{a(j),localStorage.setItem("user",JSON.stringify(j))},isAuthenticated:!!i};return e.jsx(G0.Provider,{value:p,children:t})},dl={light:{name:"Light",description:"Clean and bright",colors:{primary:"#3b82f6",primaryHover:"#2563eb",background:"#ffffff",surface:"#f8fafc",surfaceHover:"#f1f5f9",text:"#1e293b",textSecondary:"#64748b",border:"#e2e8f0",accent:"#3b82f6"},preview:"bg-gradient-to-br from-blue-50 to-slate-100"},dark:{name:"Dark",description:"Easy on the eyes",colors:{primary:"#3b82f6",primaryHover:"#2563eb",background:"#0f172a",surface:"#1e293b",surfaceHover:"#334155",text:"#f8fafc",textSecondary:"#94a3b8",border:"#334155",accent:"#3b82f6"},preview:"bg-gradient-to-br from-slate-900 to-slate-800"},blue:{name:"Ocean Blue",description:"Professional and calm",colors:{primary:"#0ea5e9",primaryHover:"#0284c7",background:"#051923",surface:"#0a2540",surfaceHover:"#0f3554",text:"#e0f2fe",textSecondary:"#7dd3fc",border:"#1e3a5f",accent:"#38bdf8"},preview:"bg-gradient-to-br from-blue-900 to-cyan-900"},green:{name:"Forest Green",description:"Natural and refreshing",colors:{primary:"#10b981",primaryHover:"#059669",background:"#041a0f",surface:"#0d2818",surfaceHover:"#1a3d28",text:"#d1fae5",textSecondary:"#6ee7b7",border:"#1e4d2b",accent:"#34d399"},preview:"bg-gradient-to-br from-green-900 to-emerald-900"},purple:{name:"Royal Purple",description:"Creative and elegant",colors:{primary:"#a855f7",primaryHover:"#9333ea",background:"#0f0520",surface:"#1e0f3d",surfaceHover:"#2d1b5a",text:"#f3e8ff",textSecondary:"#d8b4fe",border:"#4c1d95",accent:"#c084fc"},preview:"bg-gradient-to-br from-purple-900 to-violet-900"},orange:{name:"Sunset Orange",description:"Warm and energetic",colors:{primary:"#f97316",primaryHover:"#ea580c",background:"#1a0a03",surface:"#331508",surfaceHover:"#4d2410",text:"#fed7aa",textSecondary:"#fdba74",border:"#7c2d12",accent:"#fb923c"},preview:"bg-gradient-to-br from-orange-900 to-amber-900"},red:{name:"Ruby Red",description:"Bold and powerful",colors:{primary:"#ef4444",primaryHover:"#dc2626",background:"#1a0404",surface:"#330a0a",surfaceHover:"#4d1010",text:"#fee2e2",textSecondary:"#fca5a5",border:"#7f1d1d",accent:"#f87171"},preview:"bg-gradient-to-br from-red-900 to-rose-900"},teal:{name:"Teal Wave",description:"Modern and balanced",colors:{primary:"#14b8a6",primaryHover:"#0d9488",background:"#041614",surface:"#0a2826",surfaceHover:"#103d38",text:"#ccfbf1",textSecondary:"#5eead4",border:"#134e4a",accent:"#2dd4bf"},preview:"bg-gradient-to-br from-teal-900 to-cyan-900"},grey:{name:"Monochrome",description:"Minimalist and focused",colors:{primary:"#6b7280",primaryHover:"#4b5563",background:"#111827",surface:"#1f2937",surfaceHover:"#374151",text:"#f9fafb",textSecondary:"#d1d5db",border:"#374151",accent:"#9ca3af"},preview:"bg-gradient-to-br from-gray-900 to-slate-800"},custom:{name:"Custom",description:"Your personalized theme",colors:{primary:"#8b5cf6",primaryHover:"#7c3aed",background:"#0f0a1f",surface:"#1a1333",surfaceHover:"#251c47",text:"#ede9fe",textSecondary:"#c4b5fd",border:"#2e1f5a",accent:"#a78bfa"},preview:"bg-gradient-to-br from-indigo-900 to-purple-900"}},Y0=t=>{if(t==="custom"){const s=localStorage.getItem("customThemeColors");if(s)try{const a=JSON.parse(s);return{...dl.custom,colors:a}}catch(a){console.error("Failed to parse custom theme colors",a)}}return dl[t]||dl.dark},fo=t=>{const s=Y0(t),a=document.documentElement,r=document.body;Object.entries(s.colors).forEach(([n,i])=>{a.style.setProperty(`--color-${n}`,i)}),a.setAttribute("data-theme",t),r.style.backgroundColor=s.colors.background,r.style.color=s.colors.text,t==="light"?(a.classList.remove("dark"),r.classList.remove("dark")):(a.classList.add("dark"),r.classList.add("dark"))},Tb=()=>Object.entries(dl).map(([t,s])=>({id:t,name:s.name,description:s.description,preview:s.preview})),Db=async t=>(await J.put("/user/theme",{themePreference:t})).data,Z0=y.createContext({theme:"dark",themeConfig:null,setTheme:()=>{},toggleTheme:()=>{},isChanging:!1}),Rb=({children:t})=>{const[s,a]=y.useState(()=>localStorage.getItem("theme")||"dark"),[r,n]=y.useState(!1);y.useEffect(()=>{fo(s),localStorage.setItem("theme",s)},[s]);const i=async(d,x=!1)=>{if(!(d===s&&d!=="custom")){if(n(!0),fo(d),a(d),!x)try{if(localStorage.getItem("token")){await Db(d);const m=localStorage.getItem("user");if(m){const f=JSON.parse(m);f.themePreference=d,localStorage.setItem("user",JSON.stringify(f))}}}catch(u){console.error("Failed to sync theme preference:",u)}setTimeout(()=>n(!1),300)}},l=()=>{i(s==="dark"?"light":"dark")},c=Y0(s),o={theme:s,themeConfig:c,setTheme:i,toggleTheme:l,isChanging:r};return e.jsx(Z0.Provider,{value:o,children:t})},St=()=>{const t=y.useContext(Z0);if(!t)throw new Error("useTheme must be used within a ThemeProvider");return t},Pb=()=>{const{user:t}=Rt();return t?t.role==="superadmin"?e.jsx(er,{to:"/super-admin/dashboard",replace:!0}):t.role==="employee"||t.role==="manager"||t.role==="hr"?e.jsx(er,{to:"/employee/dashboard",replace:!0}):t.role==="company_admin"||t.role==="admin"?e.jsx(er,{to:"/dashboard",replace:!0}):e.jsx(er,{to:"/dashboard",replace:!0}):e.jsx(er,{to:"/login",replace:!0})},$s=({children:t,roles:s=[]})=>{const{isAuthenticated:a,user:r,loading:n}=Rt();return n?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-dark-950",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 border-4 border-primary-600 border-t-transparent rounded-full animate-spin mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-400",children:"Loading..."})]})}):a?s.length>0&&!s.includes(r==null?void 0:r.role)?e.jsx(er,{to:"/unauthorized",replace:!0}):t:e.jsx(er,{to:"/login",replace:!0})},Ib=({isOpen:t,setIsOpen:s})=>{const a=Mr(),{user:r}=Rt(),[n,i]=y.useState({}),[l,c]=y.useState(null),o=(r==null?void 0:r.role)==="admin"||(r==null?void 0:r.role)==="company_admin",d=(r==null?void 0:r.role)==="hr",x=(r==null?void 0:r.role)==="manager";y.useEffect(()=>{let h=!0;return(async()=>{var j,v;if(o)try{const w=await J.get("/approval-workflow/workflows/stats"),b=(v=(j=w==null?void 0:w.data)==null?void 0:j.data)==null?void 0:v.totalActiveWorkflows;h&&c(Number.isFinite(b)?b:0)}catch{h&&c(null)}})(),()=>{h=!1}},[o]);const u=h=>{i(p=>{const j={};return p[h]||(j[h]=!0),j})},m=h=>a.pathname===h,f=h=>h.some(p=>a.pathname.startsWith(p)),g=[{key:"dashboard",label:"Dashboard",icon:h0,path:"/dashboard"},{key:"jobdesk",label:"Job Desk",icon:ot,path:"/job-desk"},{key:"leave",label:"Leave",icon:Oe,submenu:[...o||d?[{label:"Leave Calendar",path:"/leave/calendar"}]:[{label:"All Leaves",path:"/leave"}],...!o&&!d&&!x?[{label:"Apply Leave",path:"/leave/apply"},{label:"Leave Balance",path:"/leave/balance"}]:[],...o?[{label:"Leave Encashment Rules",path:"/leave-encashment/rules"},{label:"Automatic Encashment",path:"/leave-encashment/automatic-settings"},{label:"Leave Accrual Policies",path:"/leave-accrual/policies"},{label:"Manual Accrual",path:"/leave-accrual/manual"}]:d?[{label:"Leave Encashment Rules",path:"/leave-encashment/rules"},{label:"Automatic Encashment",path:"/leave-encashment/automatic-settings"}]:[{label:"Encashment History",path:"/leave-encashment/history"}]]},{key:"employees",label:"Employees",icon:Ue,roles:["admin","company_admin","hr"],submenu:[{label:"All Employees",path:"/employees"},{label:"Add Employee",path:"/employees/add"},{label:"Onboarding",path:"/employees/onboarding"},{label:"Offboarding",path:"/employees/offboarding"}]},{key:"attendance",label:"Attendance",icon:Be,submenu:[{label:"View Attendance",path:"/attendance"},{label:"Mark Attendance",path:"/attendance/mark"},{label:"Reports",path:"/attendance/reports"}]},{key:"work-schedule",label:"Work Schedule",icon:Oe,submenu:[{label:"Shift Templates",path:"/work-schedule/shift-templates"},{label:"Roster Management",path:"/work-schedule/rosters"},{label:"Roster Calendar",path:"/work-schedule/roster-calendar"},{label:"Change Requests",path:"/work-schedule/roster-change-requests"}]},{key:"payroll",label:"Payroll",icon:gt,submenu:[{label:"All Payroll",path:"/payroll"},{label:"Generate Payroll",path:"/payroll/generate"},{label:"Salary Slips",path:"/payroll/slips"}]},{key:"clients",label:"Clients & Projects",icon:qa,submenu:[{label:"All Clients",path:"/clients"},...o||x?[{label:"All Projects",path:"/projects"}]:[],{label:"Timesheets",path:"/timesheets"}]},{key:"recruitment",label:"Recruitment",icon:Zs,roles:["admin","company_admin"],submenu:[{label:"Candidates",path:"/candidates"},{label:"Job Postings",path:"/job-desk"}]},{key:"compliance",label:"Compliance",icon:Yo,submenu:[{label:"Documents",path:"/documents"},{label:"Compliance Tracker",path:"/compliance"}]},{key:"performance",label:"Performance",icon:lr,submenu:[{label:"Feedback",path:"/feedback"},{label:"Exit Process",path:"/exit-process"}]},{key:"administration",label:"Administration",icon:Lt,roles:["admin","company_admin","hr"],submenu:[...o?[{label:"Departments",path:"/administration/departments"},{label:"Roles & Permissions",path:"/administration/roles"},{label:"Policies",path:"/administration/policies"},{label:"User Management",path:"/administration/users"},{label:"Leave Management",path:"/administration/leave-management"},{label:"Project Approval",path:"/administration/project-approval"}]:[],...d?[{label:"Onboarding",path:"/employees/onboarding"},{label:"Offboarding",path:"/employees/offboarding"}]:[],...o?[{label:"Workflow Management",path:"/approval-workflow/workflows",badge:l},{label:"Pending Approvals",path:"/approval-workflow/pending"},{label:"Approval Matrix",path:"/approval-workflow/matrix"},{label:"SLA Monitoring",path:"/approval-workflow/sla"}]:[],{label:"Delegations",path:"/approval-workflow/delegations"},...o?[{label:"Biometric Devices",path:"/biometric/devices"},{label:"Biometric Employee Sync",path:"/biometric/employee-sync"},{label:"Biometric Attendance Pull",path:"/biometric/attendance-pull"},{label:"Biometric Sync Logs",path:"/biometric/sync-logs"},{label:"SAP Connections",path:"/sap/connections"},{label:"SAP Employee Sync",path:"/sap/employee-sync"},{label:"SAP Leave Sync",path:"/sap/leave-sync"},{label:"SAP Attendance Sync",path:"/sap/attendance-sync"},{label:"SAP Sync Logs",path:"/sap/sync-logs"}]:[]]},{key:"assets",label:"Assets",icon:is,path:"/assets"},{key:"reports",label:"Reports",icon:st,roles:["admin","company_admin","hr","manager"],submenu:[{label:"Export Data",path:"/reports/export"},{label:"Compliance Report",path:"/reports/compliance"},...o||d?[{label:"Leave Reports",path:"/reports/leave"},{label:"Attendance Reports",path:"/reports/attendance"},{label:"Compliance Reports",path:"/reports/compliance-reports"},{label:"Scheduled Reports",path:"/reports/scheduled"},{label:"Analytics Dashboard",path:"/reports/analytics"}]:[]]},{key:"settings",label:"Settings",icon:Ta,submenu:[{label:"Profile",path:"/settings/profile"},{label:"Security",path:"/settings/security"},{label:"Theme",path:"/settings/theme"},{label:"Preferences",path:"/settings/preferences"}]}];return e.jsxs(e.Fragment,{children:[t&&e.jsx("div",{className:"fixed inset-0 bg-black/50 z-40 lg:hidden",onClick:()=>s(!1)}),e.jsxs("aside",{className:`fixed top-0 left-0 h-screen theme-surface border-r theme-border z-50 transition-transform duration-300 overflow-y-auto overflow-x-hidden ${t?"translate-x-0":"-translate-x-full"} lg:translate-x-0 w-64`,style:{backgroundColor:"var(--color-surface)",borderColor:"var(--color-border)"},children:[e.jsxs("div",{className:"sticky top-0 z-10 flex items-center justify-between h-16 px-4 border-b theme-border theme-surface",style:{backgroundColor:"var(--color-surface)",borderColor:"var(--color-border)"},children:[e.jsx("div",{className:"flex items-center justify-center w-full py-2",children:e.jsx("span",{className:"text-4xl font-black font-sans bg-gradient-to-r from-blue-400 to-purple-500 bg-clip-text text-transparent tracking-wider",children:"HRMS"})}),e.jsx("button",{onClick:()=>s(!1),className:"lg:hidden text-gray-400 hover:text-white",children:e.jsx(Le,{size:20})})]}),e.jsx("nav",{className:"flex-1 py-4 px-3",children:g.filter(h=>!(h.roles&&!h.roles.includes(r==null?void 0:r.role))).map(h=>e.jsx("div",{className:"mb-1",children:h.submenu?e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:()=>u(h.key),className:`w-full flex items-center justify-between px-3 py-2.5 rounded-lg text-sm font-medium transition-colors ${f(h.submenu.map(p=>p.path))?"sidebar-menu-item active":"sidebar-menu-item"}`,onMouseEnter:p=>p.currentTarget.classList.add("hover:bg-gray-800","hover:text-white"),onMouseLeave:p=>p.currentTarget.classList.remove("hover:bg-gray-800","hover:text-white"),children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(h.icon,{size:20}),e.jsx("span",{children:h.label})]}),n[h.key]?e.jsx(wi,{size:16}):e.jsx(Nn,{size:16})]}),n[h.key]&&e.jsx("div",{className:"ml-4 mt-1 space-y-1",children:h.submenu.map(p=>e.jsx(ns,{to:p.path,className:`block px-3 py-2 rounded-lg text-sm transition-colors ${m(p.path)?"sidebar-submenu-item active":"sidebar-submenu-item"}`,onMouseEnter:j=>j.currentTarget.classList.add("hover:bg-gray-800","hover:text-white"),onMouseLeave:j=>j.currentTarget.classList.remove("hover:bg-gray-800","hover:text-white"),children:e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsx("span",{children:p.label}),typeof p.badge=="number"&&e.jsx("span",{className:"badge badge-info",children:p.badge})]})},p.path))})]}):e.jsxs(ns,{to:h.path,className:`flex items-center space-x-3 px-3 py-2.5 rounded-lg text-sm font-medium transition-colors ${m(h.path)?"sidebar-menu-item active":"sidebar-menu-item"}`,onMouseEnter:p=>p.currentTarget.classList.add("hover:bg-gray-800","hover:text-white"),onMouseLeave:p=>p.currentTarget.classList.remove("hover:bg-gray-800","hover:text-white"),children:[e.jsx(h.icon,{size:20}),e.jsx("span",{children:h.label})]})},h.key))})]})]})},$b=({toggleSidebar:t})=>{var p,j;const s=Je(),{user:a,logout:r}=Rt(),{theme:n,toggleTheme:i}=St(),[l,c]=y.useState(!1),[o,d]=y.useState(!1),x=(a==null?void 0:a.role)==="admin"||(a==null?void 0:a.role)==="company_admin",u=(a==null?void 0:a.role)==="hr",m=(a==null?void 0:a.role)==="manager",f=u||m,g=()=>{r(),s("/login")},h=()=>{document.fullscreenElement?(document.exitFullscreen(),d(!1)):(document.documentElement.requestFullscreen(),d(!0))};return e.jsxs("header",{className:"h-16 theme-surface border-b theme-border flex items-center justify-between px-6",style:{backgroundColor:"var(--color-surface)",borderColor:"var(--color-border)"},children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("button",{onClick:t,className:"lg:hidden theme-text-secondary",style:{color:"var(--color-textSecondary)"},children:e.jsx(fn,{size:24})}),e.jsxs("div",{className:"hidden lg:block",children:[e.jsx("h1",{className:"text-xl font-semibold theme-text",style:{color:"var(--color-text)"},children:"Welcome to HRMS"}),e.jsx("p",{className:"text-sm theme-text-secondary",style:{color:"var(--color-textSecondary)"},children:new Date().toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("button",{onClick:i,className:"p-2 theme-text-secondary rounded-lg transition-colors",style:{color:"var(--color-textSecondary)"},onMouseEnter:v=>v.currentTarget.style.backgroundColor="var(--color-surfaceHover)",onMouseLeave:v=>v.currentTarget.style.backgroundColor="transparent",title:n==="dark"?"Switch to Light Mode":"Switch to Dark Mode",children:n==="dark"?e.jsx(pg,{size:20}):e.jsx(gg,{size:20})}),e.jsx("button",{onClick:h,className:"p-2 theme-text-secondary rounded-lg transition-colors",style:{color:"var(--color-textSecondary)"},onMouseEnter:v=>v.currentTarget.style.backgroundColor="var(--color-surfaceHover)",onMouseLeave:v=>v.currentTarget.style.backgroundColor="transparent",title:o?"Exit Fullscreen":"Enter Fullscreen",children:o?e.jsx(yg,{size:20}):e.jsx(bg,{size:20})}),e.jsxs("button",{className:"relative p-2 theme-text-secondary rounded-lg transition-colors",style:{color:"var(--color-textSecondary)"},onMouseEnter:v=>v.currentTarget.style.backgroundColor="var(--color-surfaceHover)",onMouseLeave:v=>v.currentTarget.style.backgroundColor="transparent",children:[e.jsx(Da,{size:20}),e.jsx("span",{className:"absolute top-1 right-1 w-2 h-2 bg-red-500 rounded-full"})]}),e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>c(!l),className:"flex items-center space-x-3 p-2 rounded-lg transition-colors",onMouseEnter:v=>v.currentTarget.style.backgroundColor="var(--color-surfaceHover)",onMouseLeave:v=>v.currentTarget.style.backgroundColor="transparent",children:[e.jsx("div",{className:"w-8 h-8 rounded-full flex items-center justify-center",style:{backgroundColor:"var(--color-primary)"},children:e.jsx(_t,{size:18,className:"text-white"})}),e.jsxs("div",{className:"hidden md:block text-left",children:[e.jsxs("p",{className:"text-sm font-medium theme-text",style:{color:"var(--color-text)"},children:[(p=a==null?void 0:a.employee)==null?void 0:p.firstName," ",(j=a==null?void 0:a.employee)==null?void 0:j.lastName]}),e.jsx("p",{className:"text-xs theme-text-secondary capitalize",style:{color:"var(--color-textSecondary)"},children:a==null?void 0:a.role})]})]}),l&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>c(!1)}),e.jsx("div",{className:"absolute right-0 mt-2 w-56 theme-surface theme-border rounded-lg shadow-lg z-20",style:{backgroundColor:"var(--color-surface)",borderColor:"var(--color-border)",borderWidth:"1px",borderStyle:"solid"},children:e.jsxs("div",{className:"py-1",children:[e.jsxs("button",{onClick:()=>{s("/settings/profile"),c(!1)},className:"w-full flex items-center space-x-2 px-4 py-2 text-sm theme-text",style:{color:"var(--color-text)"},onMouseEnter:v=>v.currentTarget.style.backgroundColor="var(--color-surfaceHover)",onMouseLeave:v=>v.currentTarget.style.backgroundColor="transparent",children:[e.jsx(_t,{size:16}),e.jsx("span",{children:"Profile"})]}),e.jsxs("button",{onClick:()=>{s("/settings/security"),c(!1)},className:"w-full flex items-center space-x-2 px-4 py-2 text-sm theme-text",style:{color:"var(--color-text)"},onMouseEnter:v=>v.currentTarget.style.backgroundColor="var(--color-surfaceHover)",onMouseLeave:v=>v.currentTarget.style.backgroundColor="transparent",children:[e.jsx(Ta,{size:16}),e.jsx("span",{children:"Settings"})]}),f&&e.jsxs(e.Fragment,{children:[e.jsx("hr",{className:"my-1 theme-border",style:{borderColor:"var(--color-border)"}}),!x&&e.jsxs("button",{onClick:()=>{s("/leave/apply"),c(!1)},className:"w-full flex items-center space-x-2 px-4 py-2 text-sm theme-text",style:{color:"var(--color-text)"},onMouseEnter:v=>v.currentTarget.style.backgroundColor="var(--color-surfaceHover)",onMouseLeave:v=>v.currentTarget.style.backgroundColor="transparent",children:[e.jsx(Oe,{size:16}),e.jsx("span",{children:"Apply Leave"})]}),e.jsxs("button",{onClick:()=>{s("/leave/balance"),c(!1)},className:"w-full flex items-center space-x-2 px-4 py-2 text-sm theme-text",style:{color:"var(--color-text)"},onMouseEnter:v=>v.currentTarget.style.backgroundColor="var(--color-surfaceHover)",onMouseLeave:v=>v.currentTarget.style.backgroundColor="transparent",children:[e.jsx(Oe,{size:16}),e.jsx("span",{children:"Leave Balance"})]}),e.jsxs("button",{onClick:()=>{s("/attendance"),c(!1)},className:"w-full flex items-center space-x-2 px-4 py-2 text-sm theme-text",style:{color:"var(--color-text)"},onMouseEnter:v=>v.currentTarget.style.backgroundColor="var(--color-surfaceHover)",onMouseLeave:v=>v.currentTarget.style.backgroundColor="transparent",children:[e.jsx(Be,{size:16}),e.jsx("span",{children:"Attendance"})]}),e.jsxs("button",{onClick:()=>{s("/payroll/slips"),c(!1)},className:"w-full flex items-center space-x-2 px-4 py-2 text-sm theme-text",style:{color:"var(--color-text)"},onMouseEnter:v=>v.currentTarget.style.backgroundColor="var(--color-surfaceHover)",onMouseLeave:v=>v.currentTarget.style.backgroundColor="transparent",children:[e.jsx(gt,{size:16}),e.jsx("span",{children:"Payslips"})]}),!(x||u)&&e.jsxs("button",{onClick:()=>{s("/leave-encashment/requests"),c(!1)},className:"w-full flex items-center space-x-2 px-4 py-2 text-sm theme-text",style:{color:"var(--color-text)"},onMouseEnter:v=>v.currentTarget.style.backgroundColor="var(--color-surfaceHover)",onMouseLeave:v=>v.currentTarget.style.backgroundColor="transparent",children:[e.jsx(gt,{size:16}),e.jsx("span",{children:"Leave Encashment"})]}),(x||u)&&e.jsxs(e.Fragment,{children:[e.jsx("hr",{className:"my-1 theme-border",style:{borderColor:"var(--color-border)"}}),e.jsxs("button",{onClick:()=>{s("/employees"),c(!1)},className:"w-full flex items-center space-x-2 px-4 py-2 text-sm theme-text",style:{color:"var(--color-text)"},onMouseEnter:v=>v.currentTarget.style.backgroundColor="var(--color-surfaceHover)",onMouseLeave:v=>v.currentTarget.style.backgroundColor="transparent",children:[e.jsx(Ue,{size:16}),e.jsx("span",{children:"All Employees"})]}),e.jsxs("button",{onClick:()=>{s("/employees/add"),c(!1)},className:"w-full flex items-center space-x-2 px-4 py-2 text-sm theme-text",style:{color:"var(--color-text)"},onMouseEnter:v=>v.currentTarget.style.backgroundColor="var(--color-surfaceHover)",onMouseLeave:v=>v.currentTarget.style.backgroundColor="transparent",children:[e.jsx(Zs,{size:16}),e.jsx("span",{children:"Add Employee"})]}),e.jsxs("button",{onClick:()=>{s("/employees/onboarding"),c(!1)},className:"w-full flex items-center space-x-2 px-4 py-2 text-sm theme-text",style:{color:"var(--color-text)"},onMouseEnter:v=>v.currentTarget.style.backgroundColor="var(--color-surfaceHover)",onMouseLeave:v=>v.currentTarget.style.backgroundColor="transparent",children:[e.jsx(Zs,{size:16}),e.jsx("span",{children:"Onboarding"})]}),e.jsxs("button",{onClick:()=>{s("/employees/offboarding"),c(!1)},className:"w-full flex items-center space-x-2 px-4 py-2 text-sm theme-text",style:{color:"var(--color-text)"},onMouseEnter:v=>v.currentTarget.style.backgroundColor="var(--color-surfaceHover)",onMouseLeave:v=>v.currentTarget.style.backgroundColor="transparent",children:[e.jsx(Ue,{size:16}),e.jsx("span",{children:"Offboarding"})]})]})]}),e.jsx("hr",{className:"my-1 theme-border",style:{borderColor:"var(--color-border)"}}),e.jsxs("button",{onClick:g,className:"w-full flex items-center space-x-2 px-4 py-2 text-sm text-red-600",onMouseEnter:v=>v.currentTarget.style.backgroundColor="var(--color-surfaceHover)",onMouseLeave:v=>v.currentTarget.style.backgroundColor="transparent",children:[e.jsx(ul,{size:16}),e.jsx("span",{children:"Logout"})]})]})})]})]})]})]})},Ob=()=>{const[t,s]=y.useState(!1),a=()=>{s(!t)};return e.jsxs("div",{className:"min-h-screen theme-bg",style:{backgroundColor:"var(--color-background)"},children:[e.jsx(Ib,{isOpen:t,setIsOpen:s}),e.jsxs("div",{className:"lg:pl-64",children:[e.jsx($b,{toggleSidebar:a}),e.jsx("main",{className:"p-6",children:e.jsx(Go,{})})]})]})},Lb=()=>{var w;const{user:t,logout:s}=Rt(),{theme:a,toggleTheme:r}=St(),n=Mr(),i=Je(),[l,c]=y.useState(!1),[o,d]=y.useState(!1),x=(t==null?void 0:t.role)==="manager",u=(t==null?void 0:t.role)==="hr",m=(t==null?void 0:t.role)==="admin",f=[{name:"Dashboard",href:"/employee/dashboard",icon:to},{name:"Leave",href:"/employee/leave",icon:Oe},{name:"Leave Encashment",href:"/employee/leave-encashment/requests",icon:gt},{name:"Attendance",href:"/employee/attendance",icon:Be},{name:"Work Schedule",href:"/employee/work-schedule/roster-calendar",icon:Oe},{name:"Payslips",href:"/employee/payslips",icon:gt},{name:"Requests",href:"/employee/requests",icon:st},{name:"Profile",href:"/employee/profile",icon:_t}],g=[{name:"Manager Home",href:"/employee/manager/home",icon:Lt},{name:"Leave Approvals",href:"/employee/manager/leave-approvals",icon:Te},{name:"Team Reports",href:"/employee/manager/team-reports",icon:st},{name:"Assign Project",href:"/employee/manager/assign-project",icon:Zs},{name:"My Projects",href:"/employee/manager/projects",icon:ot},{name:"Schedule Meeting",href:"/employee/manager/schedule-meeting",icon:jg},{name:"Announcements",href:"/employee/manager/announcements",icon:wn}],h=[{name:"HR Dashboard",href:"/employee/hr/dashboard",icon:Zo},{name:"Employee Management",href:"/employee/hr/employees",icon:Ue},{name:"Leave Encashment Rules",href:"/employee/hr/leave-encashment-rules",icon:gt},{name:"Onboarding",href:"/employee/hr/onboarding",icon:vg},{name:"Offboarding",href:"/employee/hr/offboarding",icon:ul},{name:"Reports & Analytics",href:"/employee/hr/reports/analytics",icon:st},{name:"Attendance Reports",href:"/employee/hr/attendance-reports",icon:Be},{name:"Payroll Management",href:"/employee/hr/payroll",icon:gt},{name:"Recruitment",href:"/employee/hr/recruitment",icon:Zs},{name:"Candidate Pool",href:"/employee/hr/candidate-pool",icon:Ue},{name:"Resume Search",href:"/employee/hr/resume-search",icon:yt},{name:"Performance",href:"/employee/hr/performance",icon:Ks}],p=[{name:"Admin Dashboard",href:"/dashboard",icon:Lt},{name:"Employee Management",href:"/employees",icon:Ue},{name:"Leave Management",href:"/leave",icon:Oe},{name:"Leave Encashment Rules",href:"/leave-encashment/rules",icon:gt},{name:"Leave Accrual Policies",href:"/leave-accrual/policies",icon:Oe},{name:"Manual Accrual",href:"/leave-accrual/manual",icon:Oe},{name:"Approval Workflows",href:"/approval-workflow/workflows",icon:Te},{name:"Approval Matrix",href:"/approval-workflow/matrix",icon:Te},{name:"Delegations",href:"/approval-workflow/delegations",icon:Te},{name:"SLA Monitoring",href:"/approval-workflow/sla",icon:Be},{name:"Work Schedule",href:"/work-schedule/shift-templates",icon:Oe},{name:"Biometric Devices",href:"/biometric/devices",icon:Be},{name:"SAP Connections",href:"/sap/connections",icon:Lt},{name:"Reports & Analytics",href:"/reports/analytics",icon:st},{name:"Scheduled Reports",href:"/reports/scheduled",icon:st},{name:"Departments",href:"/administration/departments",icon:Ue},{name:"Roles & Permissions",href:"/administration/roles",icon:Lt},{name:"Policies",href:"/administration/policies",icon:st},{name:"User Management",href:"/administration/users",icon:Ue},{name:"Leave Management",href:"/administration/leave-management",icon:Oe}];m?[...f,...p]:u?[...f,...h]:x&&[...f,...g];const j=()=>{s(),i("/login")},v=b=>n.pathname===b||n.pathname.startsWith(b+"/");return e.jsxs("div",{className:"min-h-screen bg-[#1E1E2A]",children:[e.jsx("aside",{className:`fixed top-0 left-0 z-40 h-screen transition-transform bg-[#2A2A3A] border-r border-gray-800 ${l?"translate-x-0":"-translate-x-full"} md:translate-x-0`,style:{width:"260px"},children:e.jsxs("div",{className:"h-full px-3 py-4 overflow-y-auto",children:[e.jsx("div",{className:"flex items-center justify-between mb-6 px-3",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-[#A88BFF] to-[#8B6FE8] rounded-xl flex items-center justify-center",children:e.jsx("span",{className:"text-white font-bold text-lg",children:"H"})}),e.jsx("div",{children:e.jsx("h1",{className:"text-lg font-bold text-white",children:"HRMS Portal"})})]})}),e.jsxs("nav",{className:"space-y-1",children:[f.map(b=>{const A=b.icon,N=v(b.href);return e.jsxs(ns,{to:b.href,className:`flex items-center px-3 py-2.5 text-sm font-medium rounded-xl transition-all ${N?"bg-gradient-to-r from-[#A88BFF] to-[#8B6FE8] text-white shadow-lg":"text-gray-400 hover:bg-[#1E1E2A] hover:text-white"}`,children:[e.jsx(A,{className:"w-5 h-5 mr-3"}),b.name]},b.name)}),m&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"pt-4 pb-2",children:e.jsxs("div",{className:"flex items-center space-x-2 px-3",children:[e.jsx("div",{className:"flex-1 h-px bg-gray-700"}),e.jsx("span",{className:"text-xs text-gray-500 font-semibold",children:"ADMINISTRATION"}),e.jsx("div",{className:"flex-1 h-px bg-gray-700"})]})}),p.map(b=>{const A=b.icon,N=v(b.href);return e.jsxs(ns,{to:b.href,className:`flex items-center px-3 py-2.5 text-sm font-medium rounded-xl transition-all ${N?"bg-gradient-to-r from-[#A88BFF] to-[#8B6FE8] text-white shadow-lg":"text-gray-400 hover:bg-[#1E1E2A] hover:text-white"}`,children:[e.jsx(A,{className:"w-5 h-5 mr-3"}),b.name]},b.name)})]}),x&&!m&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"pt-4 pb-2",children:e.jsxs("div",{className:"flex items-center space-x-2 px-3",children:[e.jsx("div",{className:"flex-1 h-px bg-gray-700"}),e.jsx("span",{className:"text-xs text-gray-500 font-semibold",children:"MANAGER"}),e.jsx("div",{className:"flex-1 h-px bg-gray-700"})]})}),g.map(b=>{const A=b.icon,N=v(b.href);return e.jsxs(ns,{to:b.href,className:`flex items-center px-3 py-2.5 text-sm font-medium rounded-xl transition-all ${N?"bg-gradient-to-r from-[#A88BFF] to-[#8B6FE8] text-white shadow-lg":"text-gray-400 hover:bg-[#1E1E2A] hover:text-white"}`,children:[e.jsx(A,{className:"w-5 h-5 mr-3"}),b.name]},b.name)})]}),u&&!m&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"pt-4 pb-2",children:e.jsxs("div",{className:"flex items-center space-x-2 px-3",children:[e.jsx("div",{className:"flex-1 h-px bg-gray-700"}),e.jsx("span",{className:"text-xs text-gray-500 font-semibold",children:"HR MANAGEMENT"}),e.jsx("div",{className:"flex-1 h-px bg-gray-700"})]})}),h.map(b=>{const A=b.icon,N=v(b.href);return e.jsxs(ns,{to:b.href,className:`flex items-center px-3 py-2.5 text-sm font-medium rounded-xl transition-all ${N?"bg-gradient-to-r from-[#A88BFF] to-[#8B6FE8] text-white shadow-lg":"text-gray-400 hover:bg-[#1E1E2A] hover:text-white"}`,children:[e.jsx(A,{className:"w-5 h-5 mr-3"}),b.name]},b.name)})]})]})]})}),e.jsxs("div",{className:"md:ml-[260px] transition-all duration-300",children:[e.jsx("header",{className:"sticky top-0 z-30 bg-[#2A2A3A] border-b border-gray-800",children:e.jsx("div",{className:"px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex items-center justify-between h-16",children:[e.jsx("div",{className:"flex items-center",children:e.jsx("button",{onClick:()=>c(!l),className:"p-2 rounded-xl text-gray-400 hover:bg-[#1E1E2A] hover:text-white transition-colors",children:l?e.jsx(Le,{className:"w-5 h-5"}):e.jsx(fn,{className:"w-5 h-5"})})}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("button",{className:"p-2 rounded-xl text-gray-400 hover:bg-[#1E1E2A] hover:text-white transition-colors relative",children:[e.jsx(Da,{className:"w-5 h-5"}),e.jsx("span",{className:"absolute top-1 right-1 w-2 h-2 bg-[#A88BFF] rounded-full"})]}),e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>d(!o),className:"flex items-center space-x-3 px-3 py-2 rounded-xl text-gray-300 hover:bg-[#1E1E2A] transition-colors",children:[e.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-[#A88BFF] to-[#8B6FE8] rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-white text-sm font-medium",children:(w=t==null?void 0:t.email)==null?void 0:w.charAt(0).toUpperCase()})}),e.jsx(wi,{className:"w-4 h-4"})]}),o&&e.jsx("div",{className:"absolute right-0 mt-2 w-48 rounded-xl shadow-lg bg-[#2A2A3A] border border-gray-700",children:e.jsxs("div",{className:"py-1",children:[e.jsxs(ns,{to:"/employee/profile",className:"block px-4 py-2 text-sm text-gray-300 hover:bg-[#1E1E2A] rounded-lg transition-colors",onClick:()=>d(!1),children:[e.jsx(_t,{className:"w-4 h-4 inline mr-2"}),"My Profile"]}),e.jsx("hr",{className:"my-1 border-gray-700"}),e.jsxs("button",{onClick:j,className:"block w-full text-left px-4 py-2 text-sm text-red-400 hover:bg-[#1E1E2A] rounded-lg transition-colors",children:[e.jsx(ul,{className:"w-4 h-4 inline mr-2"}),"Logout"]})]})})]})]})]})})}),e.jsx("main",{className:"p-4 sm:p-6 lg:p-8",children:e.jsx(Go,{})})]}),l&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-30 md:hidden",onClick:()=>c(!1)})]})},Mb=()=>J.get("/super-admin/dashboard/stats"),J0=(t={})=>J.get("/super-admin/clients",{params:t}),Bb=t=>J.post("/super-admin/clients",t),zb=(t,s)=>J.put(`/super-admin/clients/${t}`,s),Ub=(t,s)=>J.patch(`/super-admin/clients/${t}/status`,{status:s}),Vb=t=>J.delete(`/super-admin/clients/${t}`),nd=(t={})=>J.get("/super-admin/packages",{params:t}),Hb=t=>J.post("/super-admin/packages",t),qb=(t,s)=>J.put(`/super-admin/packages/${t}`,s),Wb=t=>J.patch(`/super-admin/packages/${t}/toggle-status`),Gb=t=>J.delete(`/super-admin/packages/${t}`),Yb=()=>J.get("/super-admin/roles/definitions"),Zb=(t={})=>J.get("/super-admin/roles/users",{params:t}),Jb=()=>J.get("/super-admin/roles/stats"),Xb=()=>J.get("/super-admin/roles/my-permissions"),Kb=t=>J.post("/super-admin/roles/users",t),Qb=(t,s)=>J.put(`/super-admin/roles/users/${t}`,s),ev=t=>J.patch(`/super-admin/roles/users/${t}/deactivate`),X0=t=>J.post("/super-admin/packages/assign",t),K0=(t,s={})=>J.get(`/super-admin/clients/${t}/packages`,{params:s}),tv=(t,s)=>J.patch(`/super-admin/client-packages/${t}/cancel`,s),sv=()=>{var p,j;const[t,s]=y.useState(!1),[a,r]=y.useState(!1),[n,i]=y.useState(null),{user:l,logout:c}=Rt(),{theme:o}=St(),d=Je(),x=Mr();y.useEffect(()=>{u()},[]);const u=async()=>{var v;try{const w=await Xb();console.log("ðŸ” Raw API response:",w);const b=((v=w.data)==null?void 0:v.data)||w.data;if(console.log("ðŸ“Š Processed user data:",b),b&&b.modules&&b.internalRole)i(b),console.log("âœ… User permissions loaded successfully:",b.internalRole),console.log("ðŸ“‹ Available modules:",b.modules);else throw console.warn("âš ï¸ Invalid API response structure:",b),new Error("Invalid API response structure - missing modules or internalRole")}catch(w){if(console.error("âŒ Error fetching user permissions:",w),(l==null?void 0:l.role)==="superadmin"){console.warn("âš ï¸ Using emergency fallback for super admin");const b={internalRole:"super_admin",roleDefinition:{name:"Super Admin (Owner)"},permissions:{},modules:["analytics_monitoring","client_management","package_management","subscription_billing","role_management","audit_logs","system_config","data_management"]};i(b),console.log("ðŸ”„ Fallback permissions set:",b)}else console.error("âŒ Non-super admin user with permission error, denying access")}},f=[{title:"Dashboard",icon:h0,path:"/super-admin/dashboard",description:"System overview and metrics",requiredModule:"analytics_monitoring"},{title:"Client Management",icon:Ue,path:"/super-admin/clients",description:"Manage client accounts and subscriptions",requiredModule:"client_management"},{title:"Package Management",icon:is,path:"/super-admin/packages",description:"Create and manage subscription packages",requiredModule:"package_management"},{title:"Subscription & Billing",icon:gt,path:"/super-admin/subscriptions",description:"Manage subscriptions and billing",requiredModule:"subscription_billing"},{title:"Invoice Center",icon:_r,path:"/super-admin/invoices",description:"Manage invoices and payments",requiredModule:"subscription_billing"},{title:"Revenue Dashboard",icon:Ks,path:"/super-admin/revenue",description:"Revenue analytics and insights",requiredModule:"subscription_billing"},{title:"Billing Alerts",icon:Jt,path:"/super-admin/billing-alerts",description:"Renewal and payment alerts",requiredModule:"subscription_billing"},{title:"User Management",icon:Fr,path:"/super-admin/roles",description:"Manage all system users and permissions",requiredModule:"role_management"},{title:"Audit Logs",icon:st,path:"/super-admin/audit",description:"View audit trails and security logs",requiredModule:"audit_logs"},{title:"Analytics & Reports",icon:lr,path:"/super-admin/analytics",description:"System analytics and reporting",requiredModule:"analytics_monitoring"},{title:"System Configuration",icon:Ta,path:"/super-admin/config",description:"System-wide settings and configuration",requiredModule:"system_config"},{title:"Data Management",icon:Ol,path:"/super-admin/data",description:"Data backups and management",requiredModule:"data_management"}].filter(v=>{if(!n||!n.modules)return console.log("ðŸš« No user permissions or modules available for filtering"),!1;const w=n.modules.includes(v.requiredModule);return console.log(`ðŸ” Menu item "${v.title}" (${v.requiredModule}): ${w?"âœ… ALLOWED":"âŒ DENIED"}`),w});console.log("ðŸ“‹ Final menu items:",f.map(v=>v.title));const g=()=>{c(),d("/login")},h=v=>x.pathname.startsWith(v);return e.jsxs("div",{className:`min-h-screen ${o==="dark"?"bg-gray-900":"bg-gray-50"}`,children:[t&&e.jsx("div",{className:"fixed inset-0 z-40 lg:hidden",onClick:()=>s(!1),children:e.jsx("div",{className:"absolute inset-0 bg-gray-600 opacity-75"})}),e.jsxs("div",{className:`fixed inset-y-0 left-0 z-50 transform transition-all duration-300 ease-in-out lg:translate-x-0 ${t?"translate-x-0":"-translate-x-full"} ${a?"w-16":"w-64"} ${o==="dark"?"bg-gray-800 border-gray-700":"bg-white border-gray-200"} border-r flex flex-col`,children:[e.jsxs("div",{className:`flex items-center justify-between p-4 border-b ${o==="dark"?"border-gray-700":"border-gray-200"}`,children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-blue-500 to-purple-600 rounded-lg flex items-center justify-center",children:e.jsx(Lt,{className:"w-5 h-5 text-white"})}),!a&&e.jsxs("div",{children:[e.jsx("h1",{className:`text-lg font-bold ${o==="dark"?"text-white":"text-gray-900"}`,children:"Super Admin"}),e.jsx("p",{className:`text-xs ${o==="dark"?"text-gray-400":"text-gray-500"}`,children:"System Control Panel"})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>r(!a),className:"hidden lg:block p-1 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700",title:a?"Expand sidebar":"Collapse sidebar",children:e.jsx(fn,{className:"w-5 h-5"})}),e.jsx("button",{onClick:()=>s(!1),className:"lg:hidden p-1 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700",children:e.jsx(Le,{className:"w-5 h-5"})})]})]}),e.jsx("nav",{className:"flex-1 px-4 py-6 space-y-2 overflow-y-auto sidebar-scroll",children:f.map(v=>{const w=v.icon,b=h(v.path);return e.jsxs("button",{onClick:()=>{d(v.path),s(!1)},className:`w-full flex items-center ${a?"justify-center px-2 py-3":"px-3 py-3"} text-left rounded-lg transition-colors duration-200 group relative ${b?"bg-blue-50 dark:bg-blue-900/20 text-blue-600 dark:text-blue-400 border border-blue-200 dark:border-blue-800":`${o==="dark"?"text-gray-300 hover:bg-gray-700":"text-gray-700 hover:bg-gray-100"}`}`,title:a?v.title:"",children:[e.jsx(w,{className:`w-5 h-5 ${a?"":"mr-3"} ${b?"text-blue-600 dark:text-blue-400":"text-gray-400 group-hover:text-gray-600 dark:group-hover:text-gray-300"}`}),!a&&e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:`font-medium ${b?"text-blue-600 dark:text-blue-400":""}`,children:v.title}),e.jsx("div",{className:`text-xs ${b?"text-blue-500 dark:text-blue-500":"text-gray-500 dark:text-gray-400"}`,children:v.description})]}),a&&e.jsx("div",{className:"absolute left-full ml-2 px-2 py-1 bg-gray-900 text-white text-sm rounded-md opacity-0 group-hover:opacity-100 transition-opacity duration-200 pointer-events-none whitespace-nowrap z-50",children:v.title})]},v.path)})}),e.jsxs("div",{className:`p-4 border-t ${o==="dark"?"border-gray-700":"border-gray-200"}`,children:[e.jsxs("div",{className:`flex items-center ${a?"justify-center":"space-x-3"} p-3 rounded-lg ${o==="dark"?"bg-gray-700":"bg-gray-50"} relative group`,children:[e.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-purple-500 to-pink-500 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-white text-sm font-medium",children:(p=l==null?void 0:l.email)==null?void 0:p.charAt(0).toUpperCase()})}),!a&&e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:`text-sm font-medium truncate ${o==="dark"?"text-white":"text-gray-900"}`,children:l==null?void 0:l.email}),e.jsx("p",{className:`text-xs ${o==="dark"?"text-gray-400":"text-gray-500"}`,children:((j=n==null?void 0:n.roleDefinition)==null?void 0:j.name)||"Super Administrator"})]}),a&&e.jsx("div",{className:"absolute left-full ml-2 px-2 py-1 bg-gray-900 text-white text-sm rounded-md opacity-0 group-hover:opacity-100 transition-opacity duration-200 pointer-events-none whitespace-nowrap z-50",children:l==null?void 0:l.email})]}),e.jsxs("button",{onClick:g,className:`w-full mt-3 flex items-center ${a?"justify-center px-2":"px-3"} py-2 text-sm rounded-lg transition-colors duration-200 group relative ${o==="dark"?"text-gray-300 hover:bg-gray-700 hover:text-white":"text-gray-700 hover:bg-gray-100"}`,title:a?"Sign Out":"",children:[e.jsx(ul,{className:`w-4 h-4 ${a?"":"mr-2"}`}),!a&&"Sign Out",a&&e.jsx("div",{className:"absolute left-full ml-2 px-2 py-1 bg-gray-900 text-white text-sm rounded-md opacity-0 group-hover:opacity-100 transition-opacity duration-200 pointer-events-none whitespace-nowrap z-50",children:"Sign Out"})]})]})]}),e.jsxs("div",{className:`transition-all duration-300 ease-in-out ${a?"lg:pl-16":"lg:pl-64"}`,children:[e.jsx("header",{className:`${o==="dark"?"bg-gray-800 border-gray-700":"bg-white border-gray-200"} border-b px-4 py-3`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("button",{onClick:()=>s(!0),className:"lg:hidden p-2 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700",children:e.jsx(fn,{className:"w-5 h-5"})}),e.jsx("div",{className:"hidden md:flex items-center space-x-2",children:e.jsxs("div",{className:"relative",children:[e.jsx(yt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search clients, packages...",className:`pl-10 pr-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ${o==="dark"?"bg-gray-700 border-gray-600 text-white placeholder-gray-400":"bg-white border-gray-300 text-gray-900 placeholder-gray-500"}`})]})})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("button",{className:`p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 relative ${o==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx(Da,{className:"w-5 h-5"}),e.jsx("span",{className:"absolute -top-1 -right-1 w-3 h-3 bg-red-500 rounded-full"})]}),e.jsxs("div",{className:`text-right hidden sm:block ${o==="dark"?"text-gray-300":"text-gray-700"}`,children:[e.jsx("p",{className:"text-sm font-medium",children:"System Status"}),e.jsx("p",{className:"text-xs text-green-500",children:"All Systems Operational"})]})]})]})}),e.jsx("main",{className:"p-6",children:e.jsx(Go,{})})]})]})};function av(t={}){const{nonce:s,onScriptLoadSuccess:a,onScriptLoadError:r}=t,[n,i]=y.useState(!1),l=y.useRef(a);l.current=a;const c=y.useRef(r);return c.current=r,y.useEffect(()=>{const o=document.createElement("script");return o.src="https://accounts.google.com/gsi/client",o.async=!0,o.defer=!0,o.nonce=s,o.onload=()=>{var d;i(!0),(d=l.current)===null||d===void 0||d.call(l)},o.onerror=()=>{var d;i(!1),(d=c.current)===null||d===void 0||d.call(c)},document.body.appendChild(o),()=>{document.body.removeChild(o)}},[s]),n}const Q0=y.createContext(null);function eh({clientId:t,nonce:s,onScriptLoadSuccess:a,onScriptLoadError:r,children:n}){const i=av({nonce:s,onScriptLoadSuccess:a,onScriptLoadError:r}),l=y.useMemo(()=>({clientId:t,scriptLoadedSuccessfully:i}),[t,i]);return Ve.createElement(Q0.Provider,{value:l},n)}function rv(){const t=y.useContext(Q0);if(!t)throw new Error("Google OAuth components must be used within GoogleOAuthProvider");return t}function nv(t){var s;return(s=t==null?void 0:t.clientId)!==null&&s!==void 0?s:t==null?void 0:t.client_id}const iv={large:40,medium:32,small:20};function th({onSuccess:t,onError:s,useOneTap:a,promptMomentNotification:r,type:n="standard",theme:i="outline",size:l="large",text:c,shape:o,logo_alignment:d,width:x,locale:u,click_listener:m,containerProps:f,...g}){const h=y.useRef(null),{clientId:p,scriptLoadedSuccessfully:j}=rv(),v=y.useRef(t);v.current=t;const w=y.useRef(s);w.current=s;const b=y.useRef(r);return b.current=r,y.useEffect(()=>{var A,N,C,k,S,F,R,T,M;if(j)return(C=(N=(A=window==null?void 0:window.google)===null||A===void 0?void 0:A.accounts)===null||N===void 0?void 0:N.id)===null||C===void 0||C.initialize({client_id:p,callback:H=>{var U;if(!(H!=null&&H.credential))return(U=w.current)===null||U===void 0?void 0:U.call(w);const{credential:W,select_by:se}=H;v.current({credential:W,clientId:nv(H),select_by:se})},...g}),(F=(S=(k=window==null?void 0:window.google)===null||k===void 0?void 0:k.accounts)===null||S===void 0?void 0:S.id)===null||F===void 0||F.renderButton(h.current,{type:n,theme:i,size:l,text:c,shape:o,logo_alignment:d,width:x,locale:u,click_listener:m}),a&&((M=(T=(R=window==null?void 0:window.google)===null||R===void 0?void 0:R.accounts)===null||T===void 0?void 0:T.id)===null||M===void 0||M.prompt(b.current)),()=>{var H,U,W;a&&((W=(U=(H=window==null?void 0:window.google)===null||H===void 0?void 0:H.accounts)===null||U===void 0?void 0:U.id)===null||W===void 0||W.cancel())}},[p,j,a,n,i,l,c,o,d,x,u]),Ve.createElement("div",{...f,ref:h,style:{height:iv[l],...f==null?void 0:f.style}})}const lv=()=>{const t=Je(),{login:s,googleLogin:a}=Rt(),[r,n]=y.useState({email:"",password:""}),[i,l]=y.useState(!1),[c,o]=y.useState(!1),d=f=>{n({...r,[f.target.name]:f.target.value})},x=async f=>{f.preventDefault(),o(!0);const g=await s(r.email,r.password);if(g.success){_.success("Login successful!");const h=JSON.parse(localStorage.getItem("user"));(h==null?void 0:h.role)==="superadmin"?t("/super-admin/dashboard"):(h==null?void 0:h.role)==="employee"?t("/employee/dashboard"):t("/dashboard")}else g.lockoutRemaining?_.error(`Account locked. Try again in ${g.lockoutRemaining} minutes.`,{duration:5e3}):_.error(g.message);o(!1)},u=async f=>{o(!0);const g=await a(f.credential);if(g.success){_.success("Login successful!");const h=JSON.parse(localStorage.getItem("user"));(h==null?void 0:h.role)==="superadmin"?t("/super-admin/dashboard"):(h==null?void 0:h.role)==="employee"?t("/employee/dashboard"):t("/dashboard")}else _.error(g.message);o(!1)},m=()=>{_.error("Google login failed. Please try again.")};return e.jsx(eh,{clientId:"41978102639-uu9ual6benq49osi0hkotdmmoc1b51hn.apps.googleusercontent.com",children:e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-dark-950 px-4",children:e.jsxs("div",{className:"w-full max-w-md",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx("img",{src:"/logo2.png",alt:"Company Logo",className:"h-16 w-auto rounded-2xl shadow-md border-2 border-white/10"})}),e.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Welcome Back"}),e.jsx("p",{className:"text-gray-400",children:"Sign in to your HRMS account"})]}),e.jsxs("div",{className:"card",children:[e.jsxs("form",{onSubmit:x,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Email Address"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(wt,{size:20,className:"text-gray-500"})}),e.jsx("input",{type:"email",name:"email",value:r.email,onChange:d,className:"input-field pl-10",placeholder:"you@example.com",required:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(Tr,{size:20,className:"text-gray-500"})}),e.jsx("input",{type:i?"text":"password",name:"password",value:r.password,onChange:d,className:"input-field pl-10 pr-10",placeholder:"â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢",required:!0}),e.jsx("button",{type:"button",onClick:()=>l(!i),className:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-500 hover:text-gray-300",children:i?e.jsx(pn,{size:20}):e.jsx(Ht,{size:20})})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",className:"w-4 h-4 text-primary-600 bg-dark-800 border-dark-700 rounded focus:ring-primary-600"}),e.jsx("span",{className:"ml-2 text-sm text-gray-400",children:"Remember me"})]}),e.jsx(ns,{to:"/forgot-password",className:"text-sm text-primary-500 hover:text-primary-400",children:"Forgot password?"})]}),e.jsx("button",{type:"submit",disabled:c,className:"w-full btn-primary disabled:opacity-50 disabled:cursor-not-allowed",children:c?"Signing in...":"Sign In"})]}),e.jsxs("div",{className:"relative my-6",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("div",{className:"w-full border-t border-dark-700"})}),e.jsx("div",{className:"relative flex justify-center text-sm",children:e.jsx("span",{className:"px-2 bg-dark-900 text-gray-400",children:"Or continue with"})})]}),e.jsx("div",{className:"flex justify-center",children:e.jsx(th,{onSuccess:u,onError:m,theme:"filled_black",size:"large",width:"100%",text:"signin_with"})})]}),e.jsxs("p",{className:"text-center text-sm text-gray-400 mt-6",children:["Don't have an account?"," ",e.jsx(ns,{to:"/register",className:"text-primary-500 hover:text-primary-400",children:"Contact Admin"})]})]})})})},cv=()=>{const t=Je();return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-dark-950 px-4",children:e.jsxs("div",{className:"w-full max-w-5xl",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("div",{className:"flex justify-center mb-6",children:e.jsx("img",{src:"/logo2.png",alt:"Company Logo",className:"h-20 w-auto rounded-2xl shadow-md border-2 border-white/10"})}),e.jsx("h1",{className:"text-4xl font-bold text-white mb-3",children:"Welcome to HRMS"}),e.jsx("p",{className:"text-gray-400 text-lg",children:"Choose how you want to sign in"})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-8 max-w-4xl mx-auto",children:[e.jsx("div",{onClick:()=>t("/login/company-select"),className:"card hover:border-primary-500 transition-all duration-300 cursor-pointer group",children:e.jsxs("div",{className:"text-center p-8",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 rounded-full bg-primary-500/10 mb-6 group-hover:bg-primary-500/20 transition-colors",children:e.jsx(qa,{size:40,className:"text-primary-500"})}),e.jsx("h2",{className:"text-2xl font-bold text-white mb-3",children:"Company Login"}),e.jsx("p",{className:"text-gray-400 mb-6",children:"Sign in to your company's HRMS portal. Access employee management, payroll, attendance, and more."}),e.jsxs("div",{className:"flex items-center justify-center text-primary-500 group-hover:text-primary-400 font-medium",children:["Continue to Company Login",e.jsx(so,{size:20,className:"ml-2 group-hover:translate-x-1 transition-transform"})]})]})}),e.jsx("div",{onClick:()=>t("/login/super-admin"),className:"card hover:border-purple-500 transition-all duration-300 cursor-pointer group",children:e.jsxs("div",{className:"text-center p-8",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 rounded-full bg-purple-500/10 mb-6 group-hover:bg-purple-500/20 transition-colors",children:e.jsx(Lt,{size:40,className:"text-purple-500"})}),e.jsx("h2",{className:"text-2xl font-bold text-white mb-3",children:"Super Admin"}),e.jsx("p",{className:"text-gray-400 mb-6",children:"System administrators only. Manage all companies, subscriptions, packages, and system configuration."}),e.jsxs("div",{className:"flex items-center justify-center text-purple-500 group-hover:text-purple-400 font-medium",children:["Continue to Admin Login",e.jsx(so,{size:20,className:"ml-2 group-hover:translate-x-1 transition-transform"})]})]})})]}),e.jsxs("div",{className:"text-center mt-12",children:[e.jsx("p",{className:"text-gray-500 text-sm mb-2",children:"Need help? Contact your system administrator"}),e.jsx(ns,{to:"/forgot-password",className:"text-primary-500 hover:text-primary-400 text-sm",children:"Forgot your password?"})]})]})})},ov=()=>{const t=Je(),[s,a]=y.useState([]),[r,n]=y.useState([]),[i,l]=y.useState(""),[c,o]=y.useState(!0);y.useEffect(()=>{d()},[]),y.useEffect(()=>{if(i.trim()==="")n(s);else{const u=s.filter(m=>m.companyName.toLowerCase().includes(i.toLowerCase())||m.companyCode.toLowerCase().includes(i.toLowerCase()));n(u)}},[i,s]);const d=async()=>{try{console.log("Fetching companies from:",`${it.apiBaseUrl}/auth/companies`);const u=await ht.get(`${it.apiBaseUrl}/auth/companies`);console.log("Companies response:",u.data),u.data.success&&(a(u.data.data),n(u.data.data))}catch(u){_.error("Failed to load companies"),console.error("Error fetching companies:",u)}finally{o(!1)}},x=u=>{const m={id:u.companyId||u._id,name:u.companyName,code:u.companyCode,databaseName:u.tenantDatabaseName||u.databaseName};localStorage.setItem("selectedCompany",JSON.stringify(m));const f=u.companyName.toLowerCase().replace(/\s+/g,"-");t(`/login/${f}`,{state:{company:m}})};return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-dark-950 px-4 py-8",children:e.jsxs("div",{className:"w-full max-w-4xl",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx("img",{src:"/logo2.png",alt:"Company Logo",className:"h-16 w-auto rounded-2xl shadow-md border-2 border-white/10"})}),e.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Select Your Company"}),e.jsx("p",{className:"text-gray-400",children:"Choose your organization to continue"})]}),e.jsxs("button",{onClick:()=>t("/login"),className:"flex items-center text-gray-400 hover:text-white mb-6 transition-colors",children:[e.jsx(xt,{size:20,className:"mr-2"}),"Back to login options"]}),e.jsx("div",{className:"card mb-6",children:e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(yt,{size:20,className:"text-gray-500"})}),e.jsx("input",{type:"text",value:i,onChange:u=>l(u.target.value),className:"input-field pl-10",placeholder:"Search by company name or code..."})]})}),e.jsx("div",{className:"card",children:c?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(Qt,{size:40,className:"text-primary-500 animate-spin"})}):r.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(qa,{size:48,className:"text-gray-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-400",children:i?"No companies found matching your search":"No companies available"})]}):e.jsx("div",{className:"max-h-[500px] overflow-y-auto",children:e.jsx("div",{className:"grid gap-3",children:r.map(u=>{var m;return e.jsxs("button",{onClick:()=>x(u),className:"flex items-center p-4 rounded-lg bg-dark-800 hover:bg-dark-700 border border-dark-700 hover:border-primary-500 transition-all text-left group",children:[e.jsx("div",{className:"flex items-center justify-center w-12 h-12 rounded-lg bg-primary-500/10 group-hover:bg-primary-500/20 transition-colors mr-4",children:e.jsx(qa,{size:24,className:"text-primary-500"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-white font-semibold mb-1",children:u.companyName}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-400",children:[e.jsxs("span",{children:["Code: ",u.companyCode]}),((m=u.subscription)==null?void 0:m.plan)&&e.jsx("span",{className:"px-2 py-0.5 rounded-full bg-primary-500/20 text-primary-400 text-xs",children:u.subscription.plan}),e.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs ${u.status==="active"?"bg-green-500/20 text-green-400":"bg-yellow-500/20 text-yellow-400"}`,children:u.status})]})]})]},u._id)})})})}),e.jsx("p",{className:"text-center text-sm text-gray-500 mt-6",children:"Can't find your company? Contact your system administrator"})]})})},dv=()=>{const t=Je();Mr();const{companySlug:s}=Ga(),{login:a,googleLogin:r}=Rt(),[n,i]=y.useState(null),[l,c]=y.useState({email:"",password:""}),[o,d]=y.useState(!1),[x,u]=y.useState(!1),[m,f]=y.useState(!0);y.useEffect(()=>{s?(async()=>{try{const b=JSON.parse(localStorage.getItem("selectedCompany")||"null");if(b&&b.name.toLowerCase().replace(/\s+/g,"-")===s){i(b),f(!1);return}const A=await ht.get("undefined/api/auth/companies");if(A.data.success){const N=A.data.data.find(C=>C.companyName.toLowerCase().replace(/\s+/g,"-")===s);if(N){const C={id:N.companyId||N._id,name:N.companyName,code:N.companyCode,databaseName:N.tenantDatabaseName||N.databaseName};i(C),localStorage.setItem("selectedCompany",JSON.stringify(C))}else _.error("Company not found"),t("/login/company-select")}}catch(b){console.error("Error fetching company:",b),_.error("Failed to load company"),t("/login/company-select")}finally{f(!1)}})():(_.error("Please select a company first"),t("/login/company-select"))},[s,t]);const g=w=>{c({...l,[w.target.name]:w.target.value})},h=async w=>{w.preventDefault(),u(!0),console.log("ðŸ” Login attempt:",{email:l.email,companyId:n==null?void 0:n.id,companyName:n==null?void 0:n.name});const b=await a(l.email,l.password,n==null?void 0:n.id);if(console.log("ðŸ“Š Login result:",b),b.success){_.success("Login successful!");const A=JSON.parse(localStorage.getItem("user"));(A==null?void 0:A.role)==="employee"||(A==null?void 0:A.role)==="manager"||(A==null?void 0:A.role)==="hr"?t("/employee/dashboard"):((A==null?void 0:A.role)==="company_admin"||(A==null||A.role),t("/dashboard"))}else _.error(b.message||"Invalid credentials");u(!1)},p=async w=>{u(!0);const b=await r(w.credential,n==null?void 0:n.databaseName);if(b.success){_.success("Login successful!");const A=JSON.parse(localStorage.getItem("user"));(A==null?void 0:A.role)==="employee"?t("/employee/dashboard"):t("/dashboard")}else _.error(b.message||"Google login failed");u(!1)},j=()=>{_.error("Google login failed. Please try again.")},v=()=>{localStorage.removeItem("selectedCompany"),t("/login/company-select")};return m?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-dark-950",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-500 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-400",children:"Loading company..."})]})}):n?e.jsx(eh,{clientId:"41978102639-uu9ual6benq49osi0hkotdmmoc1b51hn.apps.googleusercontent.com",children:e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-dark-950 px-4",children:e.jsxs("div",{className:"w-full max-w-md",children:[e.jsxs("button",{onClick:v,className:"flex items-center text-gray-400 hover:text-white mb-6 transition-colors",children:[e.jsx(xt,{size:20,className:"mr-2"}),"Change company"]}),e.jsx("div",{className:"card mb-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex items-center justify-center w-12 h-12 rounded-lg bg-primary-500/10 mr-4",children:e.jsx(qa,{size:24,className:"text-primary-500"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-white font-semibold",children:n.name}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Code: ",n.code]})]})]})}),e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx("img",{src:"/logo2.png",alt:"Company Logo",className:"h-16 w-auto rounded-2xl shadow-md border-2 border-white/10"})}),e.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Welcome Back"}),e.jsx("p",{className:"text-gray-400",children:"Sign in to your account"})]}),e.jsxs("div",{className:"card",children:[e.jsxs("form",{onSubmit:h,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Email Address"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(wt,{size:20,className:"text-gray-500"})}),e.jsx("input",{type:"email",name:"email",value:l.email,onChange:g,className:"input-field pl-10",placeholder:"you@example.com",required:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(Tr,{size:20,className:"text-gray-500"})}),e.jsx("input",{type:o?"text":"password",name:"password",value:l.password,onChange:g,className:"input-field pl-10 pr-10",placeholder:"â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢",required:!0}),e.jsx("button",{type:"button",onClick:()=>d(!o),className:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-500 hover:text-gray-300",children:o?e.jsx(pn,{size:20}):e.jsx(Ht,{size:20})})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",className:"w-4 h-4 text-primary-600 bg-dark-800 border-dark-700 rounded focus:ring-primary-600"}),e.jsx("span",{className:"ml-2 text-sm text-gray-400",children:"Remember me"})]}),e.jsx("button",{type:"button",onClick:()=>t("/forgot-password"),className:"text-sm text-primary-500 hover:text-primary-400",children:"Forgot password?"})]}),e.jsx("button",{type:"submit",disabled:x,className:"w-full btn-primary disabled:opacity-50 disabled:cursor-not-allowed",children:x?"Signing in...":"Sign In"})]}),e.jsxs("div",{className:"relative my-6",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("div",{className:"w-full border-t border-dark-700"})}),e.jsx("div",{className:"relative flex justify-center text-sm",children:e.jsx("span",{className:"px-2 bg-dark-900 text-gray-400",children:"Or continue with"})})]}),e.jsx("div",{className:"flex justify-center",children:e.jsx(th,{onSuccess:p,onError:j,theme:"filled_black",size:"large",width:"100%",text:"signin_with"})})]}),e.jsxs("p",{className:"text-center text-sm text-gray-400 mt-6",children:["Need help?"," ",e.jsx("button",{className:"text-primary-500 hover:text-primary-400",children:"Contact your HR department"})]})]})})}):null},xv=()=>{const t=Je(),{login:s}=Rt(),[a,r]=y.useState({email:"",password:""}),[n,i]=y.useState(!1),[l,c]=y.useState(!1),o=x=>{r({...a,[x.target.name]:x.target.value})},d=async x=>{x.preventDefault(),c(!0);const u=await s(a.email,a.password);if(u.success){const m=JSON.parse(localStorage.getItem("user"));(m==null?void 0:m.role)==="superadmin"?(_.success("Welcome back, Super Admin!"),t("/super-admin/dashboard")):(_.error("Access denied. Super Admin credentials required."),localStorage.removeItem("token"),localStorage.removeItem("user"))}else _.error(u.message||"Invalid credentials");c(!1)};return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-dark-950 px-4",children:e.jsxs("div",{className:"w-full max-w-md",children:[e.jsxs("button",{onClick:()=>t("/login"),className:"flex items-center text-gray-400 hover:text-white mb-6 transition-colors",children:[e.jsx(xt,{size:20,className:"mr-2"}),"Back to login options"]}),e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-2xl bg-purple-500/10 border-2 border-purple-500/20",children:e.jsx(Lt,{size:32,className:"text-purple-500"})})}),e.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Super Admin Login"}),e.jsx("p",{className:"text-gray-400",children:"System administrators only"})]}),e.jsx("div",{className:"card",children:e.jsxs("form",{onSubmit:d,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Email Address"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(wt,{size:20,className:"text-gray-500"})}),e.jsx("input",{type:"email",name:"email",value:a.email,onChange:o,className:"input-field pl-10",placeholder:"admin@system.com",required:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(Tr,{size:20,className:"text-gray-500"})}),e.jsx("input",{type:n?"text":"password",name:"password",value:a.password,onChange:o,className:"input-field pl-10 pr-10",placeholder:"â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢",required:!0}),e.jsx("button",{type:"button",onClick:()=>i(!n),className:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-500 hover:text-gray-300",children:n?e.jsx(pn,{size:20}):e.jsx(Ht,{size:20})})]})]}),e.jsx("button",{type:"submit",disabled:l,className:"w-full bg-purple-600 hover:bg-purple-700 text-white font-medium py-3 px-4 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:l?"Signing in...":"Sign In as Super Admin"}),e.jsx("div",{className:"mt-4 text-center",children:e.jsx("button",{type:"button",onClick:()=>t("/forgot-password"),className:"text-sm text-purple-400 hover:text-purple-300",children:"Forgot password?"})})]})}),e.jsx("div",{className:"mt-6 p-4 bg-purple-500/10 border border-purple-500/20 rounded-lg",children:e.jsxs("p",{className:"text-sm text-purple-300 text-center",children:[e.jsx(Lt,{size:16,className:"inline mr-2"}),"This is a restricted area. All activities are logged and monitored."]})})]})})},uv=()=>{const t=Je(),[s,a]=y.useState({email:"",companyId:""}),[r,n]=y.useState(!1),[i,l]=y.useState(!1),[c,o]=y.useState([]),d=m=>{a({...s,[m.target.name]:m.target.value})},x=async m=>{m.preventDefault(),n(!0);try{const g=await(await fetch("/api/auth/forgot-password",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)})).json();g.success?(l(!0),_.success(g.message)):_.error(g.message)}catch(f){console.error("Forgot password error:",f),_.error("An error occurred. Please try again.")}n(!1)},u=async()=>{try{const f=await(await fetch("/api/auth/companies")).json();f.success&&o(f.data)}catch(m){console.error("Error fetching companies:",m)}};return Ve.useEffect(()=>{u()},[]),i?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-dark-950 px-4",children:e.jsx("div",{className:"w-full max-w-md",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx("img",{src:"/logo2.png",alt:"Company Logo",className:"h-16 w-auto rounded-2xl shadow-md border-2 border-white/10"})}),e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"flex justify-center mb-6",children:e.jsx("div",{className:"w-16 h-16 bg-green-500/20 rounded-full flex items-center justify-center",children:e.jsx(Te,{size:32,className:"text-green-500"})})}),e.jsx("h1",{className:"text-2xl font-bold text-white mb-3",children:"Email Sent!"}),e.jsxs("p",{className:"text-gray-400 mb-6",children:["We've sent a password reset link to",e.jsx("br",{}),e.jsx("span",{className:"text-primary-400 font-medium",children:s.email})]}),e.jsxs("div",{className:"bg-dark-800 rounded-lg p-4 mb-6 text-left",children:[e.jsx("h3",{className:"text-white font-medium mb-2",children:"What's next?"}),e.jsxs("ul",{className:"text-gray-400 text-sm space-y-1",children:[e.jsx("li",{children:"â€¢ Check your email inbox"}),e.jsx("li",{children:"â€¢ Look for the password reset email"}),e.jsx("li",{children:"â€¢ Click the reset link in the email"}),e.jsx("li",{children:"â€¢ Create your new password"})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("button",{onClick:()=>t("/login"),className:"w-full btn-primary",children:"Back to Login"}),e.jsx("button",{onClick:()=>{l(!1),a({email:"",companyId:""})},className:"w-full btn-secondary",children:"Try Another Email"})]})]}),e.jsx("p",{className:"text-gray-500 text-sm mt-4",children:"Didn't receive the email? Check your spam folder or try again."})]})})}):e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-dark-950 px-4",children:e.jsxs("div",{className:"w-full max-w-md",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx("img",{src:"/logo2.png",alt:"Company Logo",className:"h-16 w-auto rounded-2xl shadow-md border-2 border-white/10"})}),e.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Forgot Password?"}),e.jsx("p",{className:"text-gray-400",children:"No worries! Enter your email and we'll send you a reset link."})]}),e.jsxs("div",{className:"card",children:[e.jsxs("form",{onSubmit:x,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Email Address"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(wt,{size:20,className:"text-gray-500"})}),e.jsx("input",{type:"email",name:"email",value:s.email,onChange:d,className:"input-field pl-10",placeholder:"you@example.com",required:!0})]})]}),c.length>0&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Company (Optional - helps us find you faster)"}),e.jsxs("select",{name:"companyId",value:s.companyId,onChange:d,className:"input-field",children:[e.jsx("option",{value:"",children:"Select your company"}),c.map(m=>e.jsx("option",{value:m.companyId,children:m.companyName},m.companyId))]})]}),e.jsx("button",{type:"submit",disabled:r,className:"w-full btn-primary disabled:opacity-50 disabled:cursor-not-allowed",children:r?"Sending...":"Send Reset Link"})]}),e.jsx("div",{className:"mt-6 text-center",children:e.jsxs(ns,{to:"/login",className:"inline-flex items-center text-primary-500 hover:text-primary-400 text-sm",children:[e.jsx(xt,{size:16,className:"mr-1"}),"Back to Login"]})})]}),e.jsx("div",{className:"mt-6 text-center",children:e.jsx("p",{className:"text-gray-500 text-sm",children:"Need help? Contact your system administrator."})})]})})},mv=()=>{const t=Je(),[s]=m0(),a=s.get("token"),[r,n]=y.useState({newPassword:"",confirmPassword:""}),[i,l]=y.useState(!1),[c,o]=y.useState(!1),[d,x]=y.useState(!1),[u,m]=y.useState(!0),[f,g]=y.useState(!1),[h,p]=y.useState(!1),[j,v]=y.useState({});y.useEffect(()=>{if(!a){g(!1),m(!1);return}w()},[a]);const w=async()=>{try{a&&a.length>10?g(!0):g(!1)}catch(C){console.error("Token verification error:",C),g(!1)}finally{m(!1)}},b=C=>{const{name:k,value:S}=C.target;n(F=>({...F,[k]:S})),j[k]&&v(F=>({...F,[k]:""}))},A=()=>{const C={};return r.newPassword?r.newPassword.length<8&&(C.newPassword="Password must be at least 8 characters long"):C.newPassword="New password is required",r.confirmPassword?r.newPassword!==r.confirmPassword&&(C.confirmPassword="Passwords do not match"):C.confirmPassword="Please confirm your password",v(C),Object.keys(C).length===0},N=async C=>{if(C.preventDefault(),!!A()){x(!0);try{const S=await(await fetch("/api/auth/reset-password",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:a,newPassword:r.newPassword})})).json();S.success?(p(!0),_.success(S.message)):(_.error(S.message),S.message.includes("Invalid or expired")&&g(!1))}catch(k){console.error("Reset password error:",k),_.error("An error occurred. Please try again.")}x(!1)}};return u?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-dark-950 px-4",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Qt,{className:"animate-spin text-primary-500 mx-auto mb-4",size:48}),e.jsx("h2",{className:"text-xl font-semibold text-white mb-2",children:"Verifying Reset Link"}),e.jsx("p",{className:"text-gray-400",children:"Please wait while we verify your password reset link..."})]})}):f?h?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-dark-950 px-4",children:e.jsx("div",{className:"w-full max-w-md",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx("img",{src:"/logo2.png",alt:"Company Logo",className:"h-16 w-auto rounded-2xl shadow-md border-2 border-white/10"})}),e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"flex justify-center mb-6",children:e.jsx("div",{className:"w-16 h-16 bg-green-500/20 rounded-full flex items-center justify-center",children:e.jsx(Te,{size:32,className:"text-green-500"})})}),e.jsx("h1",{className:"text-2xl font-bold text-white mb-3",children:"Password Reset Successful!"}),e.jsx("p",{className:"text-gray-400 mb-6",children:"Your password has been successfully reset. You can now log in with your new password."}),e.jsx("button",{onClick:()=>t("/login"),className:"w-full btn-primary",children:"Continue to Login"})]})]})})}):e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-dark-950 px-4",children:e.jsxs("div",{className:"w-full max-w-md",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx("img",{src:"/logo2.png",alt:"Company Logo",className:"h-16 w-auto rounded-2xl shadow-md border-2 border-white/10"})}),e.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Reset Password"}),e.jsx("p",{className:"text-gray-400",children:"Create your new password below."})]}),e.jsxs("div",{className:"card",children:[e.jsxs("form",{onSubmit:N,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"New Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(Tr,{size:20,className:"text-gray-500"})}),e.jsx("input",{type:i?"text":"password",name:"newPassword",value:r.newPassword,onChange:b,className:`input-field pl-10 pr-10 ${j.newPassword?"border-red-500 focus:border-red-500":""}`,placeholder:"Enter new password",required:!0}),e.jsx("button",{type:"button",onClick:()=>l(!i),className:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-500 hover:text-gray-300",children:i?e.jsx(pn,{size:20}):e.jsx(Ht,{size:20})})]}),j.newPassword&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:j.newPassword})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Confirm New Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(Tr,{size:20,className:"text-gray-500"})}),e.jsx("input",{type:c?"text":"password",name:"confirmPassword",value:r.confirmPassword,onChange:b,className:`input-field pl-10 pr-10 ${j.confirmPassword?"border-red-500 focus:border-red-500":""}`,placeholder:"Confirm new password",required:!0}),e.jsx("button",{type:"button",onClick:()=>o(!c),className:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-500 hover:text-gray-300",children:c?e.jsx(pn,{size:20}):e.jsx(Ht,{size:20})})]}),j.confirmPassword&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:j.confirmPassword})]}),e.jsxs("div",{className:"bg-dark-800 rounded-lg p-4",children:[e.jsx("h3",{className:"text-white font-medium mb-2",children:"Password Requirements:"}),e.jsxs("ul",{className:"text-gray-400 text-sm space-y-1",children:[e.jsx("li",{className:r.newPassword.length>=8?"text-green-500":"",children:"â€¢ At least 8 characters long"}),e.jsx("li",{className:r.newPassword!==r.confirmPassword&&r.confirmPassword?"text-red-500":"",children:"â€¢ Passwords must match"})]})]}),e.jsx("button",{type:"submit",disabled:d,className:"w-full btn-primary disabled:opacity-50 disabled:cursor-not-allowed",children:d?"Resetting...":"Reset Password"})]}),e.jsx("div",{className:"mt-6 text-center",children:e.jsx("button",{onClick:()=>t("/login"),className:"text-primary-500 hover:text-primary-400 text-sm",children:"Back to Login"})})]}),e.jsx("div",{className:"mt-6 text-center",children:e.jsx("p",{className:"text-gray-500 text-sm",children:"Need help? Contact your system administrator."})})]})}):e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-dark-950 px-4",children:e.jsx("div",{className:"w-full max-w-md",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx("img",{src:"/logo2.png",alt:"Company Logo",className:"h-16 w-auto rounded-2xl shadow-md border-2 border-white/10"})}),e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"flex justify-center mb-6",children:e.jsx("div",{className:"w-16 h-16 bg-red-500/20 rounded-full flex items-center justify-center",children:e.jsx(mt,{size:32,className:"text-red-500"})})}),e.jsx("h1",{className:"text-2xl font-bold text-white mb-3",children:"Invalid Reset Link"}),e.jsx("p",{className:"text-gray-400 mb-6",children:"This password reset link is invalid or has expired."}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("button",{onClick:()=>t("/forgot-password"),className:"w-full btn-primary",children:"Request New Reset Link"}),e.jsx("button",{onClick:()=>t("/login"),className:"w-full btn-secondary",children:"Back to Login"})]})]}),e.jsx("p",{className:"text-gray-500 text-sm mt-4",children:"Need help? Contact your system administrator."})]})})})},hv=({job:t,onClose:s,onSubmit:a})=>{var k;const[r,n]=y.useState(!1),[i,l]=y.useState({firstName:"",lastName:"",email:"",phone:"",alternatePhone:"",currentLocation:"",preferredLocation:[],experience:{years:"",months:""},professionalExperience:[{company:"",designation:"",startDate:"",endDate:"",currentlyWorking:!1,responsibilities:"",achievements:"",technologies:[],ctc:"",reasonForLeaving:""}],currentCompany:"",currentDesignation:"",currentCTC:"",expectedCTC:"",noticePeriod:"",skills:[],education:[{degree:"",specialization:"",institution:"",passingYear:"",percentage:""}],resume:null}),[c,o]=y.useState(""),[d,x]=y.useState(""),u=S=>{const{name:F,value:R}=S.target;if(F.includes(".")){const[T,M]=F.split(".");l(H=>({...H,[T]:{...H[T],[M]:R}}))}else l(T=>({...T,[F]:R}))},m=(S,F,R)=>{const T=[...i.education];T[S][F]=R,l(M=>({...M,education:T}))},f=()=>{l(S=>({...S,education:[...S.education,{degree:"",specialization:"",institution:"",passingYear:"",percentage:""}]}))},g=S=>{i.education.length>1&&l(F=>({...F,education:F.education.filter((R,T)=>T!==S)}))},h=()=>{c.trim()&&!i.skills.includes(c.trim())&&(l(S=>({...S,skills:[...S.skills,c.trim()]})),o(""))},p=S=>{l(F=>({...F,skills:F.skills.filter(R=>R!==S)}))},j=()=>{d.trim()&&!i.preferredLocation.includes(d.trim())&&(l(S=>({...S,preferredLocation:[...S.preferredLocation,d.trim()]})),x(""))},v=S=>{l(F=>({...F,preferredLocation:F.preferredLocation.filter(R=>R!==S)}))},w=()=>{l(S=>({...S,professionalExperience:[...S.professionalExperience,{company:"",designation:"",startDate:"",endDate:"",currentlyWorking:!1,responsibilities:"",achievements:"",technologies:[],ctc:"",reasonForLeaving:""}]}))},b=S=>{l(F=>({...F,professionalExperience:F.professionalExperience.filter((R,T)=>T!==S)}))},A=(S,F,R)=>{l(T=>({...T,professionalExperience:T.professionalExperience.map((M,H)=>H===S?{...M,[F]:R}:M)}))},N=S=>{const F=S.target.files[0];if(F){if(F.type!=="application/pdf"){_.error("Please upload only PDF files");return}if(F.size>5*1024*1024){_.error("File size must be less than 5MB");return}l(R=>({...R,resume:F}))}},C=async S=>{if(S.preventDefault(),!i.firstName||!i.lastName||!i.email||!i.phone){_.error("Please fill in all required fields");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(i.email)){_.error("Please enter a valid email address");return}if(!/^[0-9]{10,15}$/.test(i.phone.replace(/[\s\-\(\)]/g,""))){_.error("Please enter a valid phone number (10-15 digits)");return}n(!0);try{const T=new FormData;console.log("Preparing form data:",i),T.append("firstName",i.firstName),T.append("lastName",i.lastName),T.append("email",i.email),T.append("phone",i.phone),T.append("alternatePhone",i.alternatePhone||""),T.append("currentLocation",i.currentLocation||""),T.append("preferredLocation",JSON.stringify(i.preferredLocation)),T.append("experience[years]",parseInt(i.experience.years)||0),T.append("experience[months]",parseInt(i.experience.months)||0);const M=i.professionalExperience.filter(se=>se.company&&se.designation);T.append("professionalExperience",JSON.stringify(M)),T.append("currentCompany",i.currentCompany||""),T.append("currentDesignation",i.currentDesignation||"");const H=parseFloat(i.currentCTC);!isNaN(H)&&H>0&&T.append("currentCTC",H);const U=parseFloat(i.expectedCTC);!isNaN(U)&&U>0&&T.append("expectedCTC",U);const W=parseInt(i.noticePeriod);!isNaN(W)&&W>=0&&T.append("noticePeriod",W),T.append("skills",JSON.stringify(i.skills)),T.append("education",JSON.stringify(i.education.filter(se=>se.degree&&se.institution))),i.resume&&(T.append("resume",i.resume),console.log("Resume file added:",i.resume.name)),console.log("FormData entries:");for(let[se,X]of T.entries())console.log(se,typeof X=="object"?"File":X);await a(T)}catch{}finally{n(!1)}};return e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4 overflow-y-auto",children:e.jsxs("div",{className:"bg-dark-900 rounded-lg max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-dark-900 border-b border-gray-700 p-6 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-bold text-white",children:["Apply for ",t.title]}),e.jsxs("p",{className:"text-gray-400 mt-1",children:[(k=t.department)==null?void 0:k.name," â€¢ ",t.location]})]}),e.jsx("button",{onClick:s,className:"p-2 hover:bg-dark-800 rounded-lg transition-colors",children:e.jsx(Le,{size:24,className:"text-gray-400"})})]}),e.jsxs("form",{onSubmit:C,className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-white mb-4 flex items-center space-x-2",children:[e.jsx(_t,{size:20,className:"text-primary-400"}),e.jsx("span",{children:"Personal Information"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"First Name *"}),e.jsx("input",{type:"text",name:"firstName",value:i.firstName,onChange:u,className:"w-full px-4 py-2 bg-dark-800 border border-gray-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-primary-500",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Last Name *"}),e.jsx("input",{type:"text",name:"lastName",value:i.lastName,onChange:u,className:"w-full px-4 py-2 bg-dark-800 border border-gray-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-primary-500",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Email *"}),e.jsx("input",{type:"email",name:"email",value:i.email,onChange:u,className:"w-full px-4 py-2 bg-dark-800 border border-gray-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-primary-500",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Phone *"}),e.jsx("input",{type:"tel",name:"phone",value:i.phone,onChange:u,className:"w-full px-4 py-2 bg-dark-800 border border-gray-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-primary-500",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Alternate Phone"}),e.jsx("input",{type:"tel",name:"alternatePhone",value:i.alternatePhone,onChange:u,className:"w-full px-4 py-2 bg-dark-800 border border-gray-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-primary-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Current Location"}),e.jsx("input",{type:"text",name:"currentLocation",value:i.currentLocation,onChange:u,className:"w-full px-4 py-2 bg-dark-800 border border-gray-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-primary-500"})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Preferred Locations"}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("input",{type:"text",value:d,onChange:S=>x(S.target.value),onKeyPress:S=>S.key==="Enter"&&(S.preventDefault(),j()),placeholder:"Add location and press Enter",className:"flex-1 px-4 py-2 bg-dark-800 border border-gray-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-primary-500"}),e.jsx("button",{type:"button",onClick:j,className:"px-4 py-2 bg-primary-600 hover:bg-primary-700 text-white rounded-lg",children:"Add"})]}),i.preferredLocation.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:i.preferredLocation.map((S,F)=>e.jsxs("span",{className:"inline-flex items-center space-x-1 bg-primary-900/30 text-primary-400 px-3 py-1 rounded-full text-sm",children:[e.jsx("span",{children:S}),e.jsx("button",{type:"button",onClick:()=>v(S),className:"hover:text-primary-300",children:e.jsx(Le,{size:14})})]},F))})]})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-white mb-4 flex items-center space-x-2",children:[e.jsx(ot,{size:20,className:"text-primary-400"}),e.jsx("span",{children:"Professional Experience"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Total Experience (Years)"}),e.jsx("input",{type:"number",name:"experience.years",value:i.experience.years,onChange:u,min:"0",className:"w-full px-4 py-2 bg-dark-800 border border-gray-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-primary-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Additional Months"}),e.jsx("input",{type:"number",name:"experience.months",value:i.experience.months,onChange:u,min:"0",max:"11",className:"w-full px-4 py-2 bg-dark-800 border border-gray-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-primary-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Current Company"}),e.jsx("input",{type:"text",name:"currentCompany",value:i.currentCompany,onChange:u,className:"w-full px-4 py-2 bg-dark-800 border border-gray-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-primary-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Current Designation"}),e.jsx("input",{type:"text",name:"currentDesignation",value:i.currentDesignation,onChange:u,className:"w-full px-4 py-2 bg-dark-800 border border-gray-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-primary-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Current CTC (Annual)"}),e.jsx("input",{type:"number",name:"currentCTC",value:i.currentCTC,onChange:u,className:"w-full px-4 py-2 bg-dark-800 border border-gray-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-primary-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Expected CTC (Annual)"}),e.jsx("input",{type:"number",name:"expectedCTC",value:i.expectedCTC,onChange:u,className:"w-full px-4 py-2 bg-dark-800 border border-gray-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-primary-500"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Notice Period (Days)"}),e.jsx("input",{type:"number",name:"noticePeriod",value:i.noticePeriod,onChange:u,className:"w-full px-4 py-2 bg-dark-800 border border-gray-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-primary-500"})]})]})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-white mb-4 flex items-center space-x-2",children:[e.jsx(_a,{size:20,className:"text-primary-400"}),e.jsx("span",{children:"Skills"})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("input",{type:"text",value:c,onChange:S=>o(S.target.value),onKeyPress:S=>S.key==="Enter"&&(S.preventDefault(),h()),placeholder:"Add skill and press Enter",className:"flex-1 px-4 py-2 bg-dark-800 border border-gray-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-primary-500"}),e.jsx("button",{type:"button",onClick:h,className:"px-4 py-2 bg-primary-600 hover:bg-primary-700 text-white rounded-lg",children:"Add"})]}),i.skills.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:i.skills.map((S,F)=>e.jsxs("span",{className:"inline-flex items-center space-x-1 bg-primary-900/30 text-primary-400 px-3 py-1 rounded-full text-sm",children:[e.jsx("span",{children:S}),e.jsx("button",{type:"button",onClick:()=>p(S),className:"hover:text-primary-300",children:e.jsx(Le,{size:14})})]},F))})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-white mb-4 flex items-center space-x-2",children:[e.jsx(ot,{size:20,className:"text-primary-400"}),e.jsx("span",{children:"Detailed Work Experience"})]}),i.professionalExperience.map((S,F)=>e.jsxs("div",{className:"mb-4 p-4 bg-dark-800 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("h4",{className:"text-white font-medium",children:["Experience ",F+1]}),i.professionalExperience.length>1&&e.jsx("button",{type:"button",onClick:()=>b(F),className:"text-red-400 hover:text-red-300",children:e.jsx(Le,{size:18})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Company Name *"}),e.jsx("input",{type:"text",value:S.company,onChange:R=>A(F,"company",R.target.value),className:"w-full px-4 py-2 bg-dark-700 border border-gray-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-primary-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Designation *"}),e.jsx("input",{type:"text",value:S.designation,onChange:R=>A(F,"designation",R.target.value),className:"w-full px-4 py-2 bg-dark-700 border border-gray-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-primary-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Start Date"}),e.jsx("input",{type:"date",value:S.startDate,onChange:R=>A(F,"startDate",R.target.value),className:"w-full px-4 py-2 bg-dark-700 border border-gray-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-primary-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"End Date"}),e.jsx("input",{type:"date",value:S.endDate,onChange:R=>A(F,"endDate",R.target.value),disabled:S.currentlyWorking,className:"w-full px-4 py-2 bg-dark-700 border border-gray-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-primary-500 disabled:opacity-50"})]}),e.jsx("div",{className:"md:col-span-2",children:e.jsxs("label",{className:"flex items-center space-x-2 text-sm text-gray-300",children:[e.jsx("input",{type:"checkbox",checked:S.currentlyWorking,onChange:R=>A(F,"currentlyWorking",R.target.checked),className:"rounded bg-dark-700 border-gray-600 text-primary-600 focus:ring-primary-500"}),e.jsx("span",{children:"Currently working here"})]})}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Key Responsibilities"}),e.jsx("textarea",{value:S.responsibilities,onChange:R=>A(F,"responsibilities",R.target.value),rows:3,className:"w-full px-4 py-2 bg-dark-700 border border-gray-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"Describe your key responsibilities..."})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Key Achievements"}),e.jsx("textarea",{value:S.achievements,onChange:R=>A(F,"achievements",R.target.value),rows:2,className:"w-full px-4 py-2 bg-dark-700 border border-gray-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"Highlight your key achievements..."})]})]})]},F)),e.jsx("button",{type:"button",onClick:w,className:"w-full py-2 border-2 border-dashed border-gray-600 rounded-lg text-gray-400 hover:border-primary-500 hover:text-primary-400 transition-colors",children:"+ Add Another Experience"})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-white mb-4 flex items-center space-x-2",children:[e.jsx(js,{size:20,className:"text-primary-400"}),e.jsx("span",{children:"Resume Upload"})]}),e.jsxs("div",{className:"border-2 border-dashed border-gray-600 rounded-lg p-6 text-center",children:[e.jsx("input",{type:"file",id:"resume-upload",accept:".pdf",onChange:N,className:"hidden"}),e.jsxs("label",{htmlFor:"resume-upload",className:"cursor-pointer flex flex-col items-center space-y-2",children:[e.jsx(js,{size:48,className:"text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-white font-medium",children:i.resume?i.resume.name:"Upload your resume"}),e.jsx("p",{className:"text-gray-400 text-sm",children:"PDF files only, max 5MB"})]})]}),i.resume&&e.jsxs("div",{className:"mt-4 flex items-center justify-center space-x-2",children:[e.jsxs("span",{className:"text-green-400 text-sm",children:["âœ“ ",i.resume.name," (",(i.resume.size/1024/1024).toFixed(2)," MB)"]}),e.jsx("button",{type:"button",onClick:()=>l(S=>({...S,resume:null})),className:"text-red-400 hover:text-red-300",children:e.jsx(Le,{size:16})})]})]})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-white mb-4 flex items-center space-x-2",children:[e.jsx(Jo,{size:20,className:"text-primary-400"}),e.jsx("span",{children:"Education"})]}),i.education.map((S,F)=>e.jsxs("div",{className:"mb-4 p-4 bg-dark-800 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("h4",{className:"text-white font-medium",children:["Education ",F+1]}),i.education.length>1&&e.jsx("button",{type:"button",onClick:()=>g(F),className:"text-red-400 hover:text-red-300",children:e.jsx(Le,{size:18})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Degree"}),e.jsx("input",{type:"text",value:S.degree,onChange:R=>m(F,"degree",R.target.value),className:"w-full px-4 py-2 bg-dark-700 border border-gray-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-primary-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Specialization"}),e.jsx("input",{type:"text",value:S.specialization,onChange:R=>m(F,"specialization",R.target.value),className:"w-full px-4 py-2 bg-dark-700 border border-gray-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-primary-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Institution"}),e.jsx("input",{type:"text",value:S.institution,onChange:R=>m(F,"institution",R.target.value),className:"w-full px-4 py-2 bg-dark-700 border border-gray-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-primary-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Passing Year"}),e.jsx("input",{type:"number",value:S.passingYear,onChange:R=>m(F,"passingYear",R.target.value),className:"w-full px-4 py-2 bg-dark-700 border border-gray-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-primary-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Percentage/CGPA"}),e.jsx("input",{type:"number",step:"0.01",value:S.percentage,onChange:R=>m(F,"percentage",R.target.value),className:"w-full px-4 py-2 bg-dark-700 border border-gray-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-primary-500"})]})]})]},F)),e.jsx("button",{type:"button",onClick:f,className:"text-primary-400 hover:text-primary-300 text-sm font-medium",children:"+ Add Another Education"})]}),e.jsxs("div",{className:"flex items-center justify-end space-x-4 pt-6 border-t border-gray-700",children:[e.jsx("button",{type:"button",onClick:s,className:"px-6 py-2 bg-dark-800 hover:bg-dark-700 text-white rounded-lg transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:r,className:"px-6 py-2 bg-primary-600 hover:bg-primary-700 text-white rounded-lg transition-colors flex items-center space-x-2 disabled:opacity-50 disabled:cursor-not-allowed",children:r?e.jsxs(e.Fragment,{children:[e.jsx(xr,{size:20,className:"animate-spin"}),e.jsx("span",{children:"Submitting..."})]}):e.jsx("span",{children:"Submit Application"})})]})]})]})})},fv=({isOpen:t,onClose:s})=>{const[a,r]=y.useState(!1),[n,i]=y.useState({name:"",email:"",phone:"",desiredDepartment:"",desiredPosition:"",experience:{years:"",months:""},currentCompany:"",currentDesignation:"",currentCTC:"",expectedCTC:"",noticePeriod:"",skills:[],education:[{degree:"",specialization:"",institution:"",passingYear:"",percentage:""}],currentLocation:"",preferredLocation:[],comments:""}),[l,c]=y.useState(""),[o,d]=y.useState(""),x=it.apiBaseUrl,u=j=>{const{name:v,value:w}=j.target;if(v.includes(".")){const[b,A]=v.split(".");i(N=>({...N,[b]:{...N[b],[A]:w}}))}else i(b=>({...b,[v]:w}))},m=()=>{l.trim()&&!n.skills.includes(l.trim())&&(i(j=>({...j,skills:[...j.skills,l.trim()]})),c(""))},f=j=>{i(v=>({...v,skills:v.skills.filter(w=>w!==j)}))},g=()=>{o.trim()&&!n.preferredLocation.includes(o.trim())&&(i(j=>({...j,preferredLocation:[...j.preferredLocation,o.trim()]})),d(""))},h=j=>{i(v=>({...v,preferredLocation:v.preferredLocation.filter(w=>w!==j)}))},p=async j=>{var b,A;if(j.preventDefault(),!n.name||!n.email||!n.phone||!n.desiredDepartment||!n.desiredPosition){_.error("Please fill in all required fields");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(n.email)){_.error("Please enter a valid email address");return}if(!/^[0-9]{10,15}$/.test(n.phone.replace(/[\s\-\(\)]/g,""))){_.error("Please enter a valid phone number (10-15 digits)");return}r(!0);try{const N={...n,experience:{years:parseInt(n.experience.years)||0,months:parseInt(n.experience.months)||0},currentCTC:parseFloat(n.currentCTC)||void 0,expectedCTC:parseFloat(n.expectedCTC)||void 0,noticePeriod:parseInt(n.noticePeriod)||void 0,education:n.education.filter(k=>k.degree&&k.institution)},C=await ht.post(`${x}/public/jobs/talent-pool/submit`,N);_.success(C.data.message),s(),i({name:"",email:"",phone:"",desiredDepartment:"",desiredPosition:"",experience:{years:"",months:""},currentCompany:"",currentDesignation:"",currentCTC:"",expectedCTC:"",noticePeriod:"",skills:[],education:[{degree:"",specialization:"",institution:"",passingYear:"",percentage:""}],currentLocation:"",preferredLocation:[],comments:""})}catch(N){const C=((A=(b=N.response)==null?void 0:b.data)==null?void 0:A.message)||"Failed to submit resume";_.error(C)}finally{r(!1)}};return t?e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4 overflow-y-auto",children:e.jsxs("div",{className:"bg-dark-900 rounded-lg max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-dark-900 border-b border-gray-700 p-6 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-white",children:"Submit Your Resume"}),e.jsx("p",{className:"text-gray-400 mt-1",children:"We'll contact you when a suitable opportunity arises"})]}),e.jsx("button",{onClick:s,className:"p-2 hover:bg-dark-800 rounded-lg transition-colors",children:e.jsx(Le,{size:24,className:"text-gray-400"})})]}),e.jsxs("form",{onSubmit:p,className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Basic Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Full Name *"}),e.jsx("input",{type:"text",name:"name",value:n.name,onChange:u,className:"w-full px-4 py-2 bg-dark-800 border border-gray-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-primary-500",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Email *"}),e.jsx("input",{type:"email",name:"email",value:n.email,onChange:u,className:"w-full px-4 py-2 bg-dark-800 border border-gray-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-primary-500",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Phone *"}),e.jsx("input",{type:"tel",name:"phone",value:n.phone,onChange:u,className:"w-full px-4 py-2 bg-dark-800 border border-gray-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-primary-500",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Current Location"}),e.jsx("input",{type:"text",name:"currentLocation",value:n.currentLocation,onChange:u,className:"w-full px-4 py-2 bg-dark-800 border border-gray-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-primary-500"})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Desired Position"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Department of Interest *"}),e.jsx("input",{type:"text",name:"desiredDepartment",value:n.desiredDepartment,onChange:u,placeholder:"e.g., Engineering, Sales, Marketing",className:"w-full px-4 py-2 bg-dark-800 border border-gray-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-primary-500",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Desired Position *"}),e.jsx("input",{type:"text",name:"desiredPosition",value:n.desiredPosition,onChange:u,placeholder:"e.g., Software Engineer, Sales Manager",className:"w-full px-4 py-2 bg-dark-800 border border-gray-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-primary-500",required:!0})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Preferred Locations"}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("input",{type:"text",value:o,onChange:j=>d(j.target.value),onKeyPress:j=>j.key==="Enter"&&(j.preventDefault(),g()),placeholder:"Add location and press Enter",className:"flex-1 px-4 py-2 bg-dark-800 border border-gray-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-primary-500"}),e.jsx("button",{type:"button",onClick:g,className:"px-4 py-2 bg-primary-600 hover:bg-primary-700 text-white rounded-lg",children:"Add"})]}),n.preferredLocation.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:n.preferredLocation.map((j,v)=>e.jsxs("span",{className:"inline-flex items-center space-x-1 bg-primary-900/30 text-primary-400 px-3 py-1 rounded-full text-sm",children:[e.jsx("span",{children:j}),e.jsx("button",{type:"button",onClick:()=>h(j),className:"hover:text-primary-300",children:e.jsx(Le,{size:14})})]},v))})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Professional Experience"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Years of Experience"}),e.jsx("input",{type:"number",name:"experience.years",value:n.experience.years,onChange:u,min:"0",className:"w-full px-4 py-2 bg-dark-800 border border-gray-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-primary-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Additional Months"}),e.jsx("input",{type:"number",name:"experience.months",value:n.experience.months,onChange:u,min:"0",max:"11",className:"w-full px-4 py-2 bg-dark-800 border border-gray-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-primary-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Current Company"}),e.jsx("input",{type:"text",name:"currentCompany",value:n.currentCompany,onChange:u,className:"w-full px-4 py-2 bg-dark-800 border border-gray-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-primary-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Current Designation"}),e.jsx("input",{type:"text",name:"currentDesignation",value:n.currentDesignation,onChange:u,className:"w-full px-4 py-2 bg-dark-800 border border-gray-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-primary-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Current CTC (Annual)"}),e.jsx("input",{type:"number",name:"currentCTC",value:n.currentCTC,onChange:u,className:"w-full px-4 py-2 bg-dark-800 border border-gray-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-primary-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Expected CTC (Annual)"}),e.jsx("input",{type:"number",name:"expectedCTC",value:n.expectedCTC,onChange:u,className:"w-full px-4 py-2 bg-dark-800 border border-gray-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-primary-500"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Notice Period (Days)"}),e.jsx("input",{type:"number",name:"noticePeriod",value:n.noticePeriod,onChange:u,className:"w-full px-4 py-2 bg-dark-800 border border-gray-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-primary-500"})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Skills"}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("input",{type:"text",value:l,onChange:j=>c(j.target.value),onKeyPress:j=>j.key==="Enter"&&(j.preventDefault(),m()),placeholder:"Add skill and press Enter",className:"flex-1 px-4 py-2 bg-dark-800 border border-gray-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-primary-500"}),e.jsx("button",{type:"button",onClick:m,className:"px-4 py-2 bg-primary-600 hover:bg-primary-700 text-white rounded-lg",children:"Add"})]}),n.skills.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:n.skills.map((j,v)=>e.jsxs("span",{className:"inline-flex items-center space-x-1 bg-primary-900/30 text-primary-400 px-3 py-1 rounded-full text-sm",children:[e.jsx("span",{children:j}),e.jsx("button",{type:"button",onClick:()=>f(j),className:"hover:text-primary-300",children:e.jsx(Le,{size:14})})]},v))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Additional Comments"}),e.jsx("textarea",{name:"comments",value:n.comments,onChange:u,rows:"4",placeholder:"Tell us more about yourself, your career goals, or any specific requirements...",className:"w-full px-4 py-2 bg-dark-800 border border-gray-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-primary-500"})]}),e.jsxs("div",{className:"flex items-center justify-end space-x-4 pt-6 border-t border-gray-700",children:[e.jsx("button",{type:"button",onClick:s,className:"px-6 py-2 bg-dark-800 hover:bg-dark-700 text-white rounded-lg transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:a,className:"px-6 py-2 bg-primary-600 hover:bg-primary-700 text-white rounded-lg transition-colors flex items-center space-x-2 disabled:opacity-50 disabled:cursor-not-allowed",children:a?e.jsxs(e.Fragment,{children:[e.jsx(xr,{size:20,className:"animate-spin"}),e.jsx("span",{children:"Submitting..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(js,{size:20}),e.jsx("span",{children:"Submit Resume"})]})})]})]})]})}):null},Cx=()=>{var se,X;const[t,s]=y.useState([]),[a,r]=y.useState([]),[n,i]=y.useState(!0),[l,c]=y.useState(""),[o,d]=y.useState(""),[x,u]=y.useState(""),[m,f]=y.useState(""),[g,h]=y.useState(null),[p,j]=y.useState(!1),[v,w]=y.useState(!1),[b,A]=y.useState(null),N=it.apiBaseUrl;y.useEffect(()=>{C(),k()},[]),y.useEffect(()=>{S()},[t,l,o,x,m]);const C=async()=>{try{i(!0);const D=await ht.get(`${N}/public/jobs`);s(D.data.data),r(D.data.data)}catch(D){console.error("Error fetching jobs:",D),_.error("Failed to load job postings")}finally{i(!1)}},k=async()=>{try{const D=await ht.get(`${N}/public/jobs/stats`);A(D.data.data)}catch(D){console.error("Error fetching stats:",D)}},S=()=>{let D=[...t];l&&(D=D.filter(le=>{var de;return le.title.toLowerCase().includes(l.toLowerCase())||le.description.toLowerCase().includes(l.toLowerCase())||((de=le.department)==null?void 0:de.name.toLowerCase().includes(l.toLowerCase()))})),o&&(D=D.filter(le=>{var de;return((de=le.department)==null?void 0:de._id)===o})),x&&(D=D.filter(le=>le.location===x)),m&&(D=D.filter(le=>le.employmentType===m)),r(D)},F=D=>{h(D),j(!0)},R=async D=>{var le,de;try{const E=await ht.post(`${N}/public/jobs/${g._id}/apply`,D,{headers:{"Content-Type":"multipart/form-data"}});_.success(E.data.message),j(!1),h(null)}catch(E){const z=((de=(le=E.response)==null?void 0:le.data)==null?void 0:de.message)||"Failed to submit application";throw _.error(z),E}},T=()=>{c(""),d(""),u(""),f("")},M=[...new Set(t.map(D=>D.department).filter(Boolean))],H=[...new Set(t.map(D=>D.location).filter(Boolean))],U=[...new Set(t.map(D=>D.employmentType).filter(Boolean))],W=l||o||x||m;return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-dark-900 to-gray-900",children:[e.jsx("div",{className:"bg-gradient-to-r from-primary-600 to-primary-800 text-white py-20",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-4xl md:text-5xl font-bold mb-4",children:"Join Our Team"}),e.jsx("p",{className:"text-xl md:text-2xl text-primary-100 mb-8",children:"Discover exciting career opportunities and grow with us"}),b&&e.jsxs("div",{className:"flex justify-center space-x-8 text-center",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-3xl font-bold",children:b.totalJobs}),e.jsx("div",{className:"text-primary-200",children:"Open Positions"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-3xl font-bold",children:((se=b.byDepartment)==null?void 0:se.length)||0}),e.jsx("div",{className:"text-primary-200",children:"Departments"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-3xl font-bold",children:((X=b.byLocation)==null?void 0:X.length)||0}),e.jsx("div",{className:"text-primary-200",children:"Locations"})]})]})]})})}),e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 -mt-8",children:e.jsxs("div",{className:"bg-dark-800 rounded-lg shadow-xl p-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:[e.jsxs("div",{className:"lg:col-span-2 relative",children:[e.jsx(yt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),e.jsx("input",{type:"text",placeholder:"Search jobs...",value:l,onChange:D=>c(D.target.value),className:"w-full pl-10 pr-4 py-2 bg-dark-700 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-primary-500"})]}),e.jsxs("select",{value:o,onChange:D=>d(D.target.value),className:"px-4 py-2 bg-dark-700 border border-gray-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-primary-500",children:[e.jsx("option",{value:"",children:"All Departments"}),M.map(D=>e.jsx("option",{value:D._id,children:D.name},D._id))]}),e.jsxs("select",{value:x,onChange:D=>u(D.target.value),className:"px-4 py-2 bg-dark-700 border border-gray-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-primary-500",children:[e.jsx("option",{value:"",children:"All Locations"}),H.map(D=>e.jsx("option",{value:D,children:D},D))]}),e.jsxs("select",{value:m,onChange:D=>f(D.target.value),className:"px-4 py-2 bg-dark-700 border border-gray-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-primary-500",children:[e.jsx("option",{value:"",children:"All Types"}),U.map(D=>e.jsx("option",{value:D,children:D.split("-").map(le=>le.charAt(0).toUpperCase()+le.slice(1)).join(" ")},D))]})]}),W&&e.jsxs("div",{className:"mt-4 flex items-center justify-between",children:[e.jsxs("p",{className:"text-gray-400 text-sm",children:["Showing ",a.length," of ",t.length," jobs"]}),e.jsxs("button",{onClick:T,className:"flex items-center space-x-2 text-primary-400 hover:text-primary-300 text-sm",children:[e.jsx(Le,{size:16}),e.jsx("span",{children:"Clear Filters"})]})]})]})}),e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:n?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"w-12 h-12 border-4 border-primary-600 border-t-transparent rounded-full animate-spin"})}):a.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(ot,{size:64,className:"mx-auto text-gray-600 mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:"No Jobs Found"}),e.jsx("p",{className:"text-gray-400",children:W?"Try adjusting your filters to see more results":"No job openings available at the moment. Check back soon!"})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:a.map(D=>{var le;return e.jsx("div",{className:"bg-dark-800 rounded-lg shadow-lg hover:shadow-xl transition-shadow duration-300 overflow-hidden border border-gray-700 hover:border-primary-500",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("h3",{className:"text-xl font-bold text-white mb-2 line-clamp-2",children:D.title}),e.jsxs("div",{className:"flex items-center space-x-2 text-gray-400 text-sm",children:[e.jsx(qa,{size:16}),e.jsx("span",{children:((le=D.department)==null?void 0:le.name)||"N/A"})]})]}),e.jsxs("div",{className:"space-y-2 mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-2 text-gray-300 text-sm",children:[e.jsx(Ra,{size:16,className:"text-primary-400"}),e.jsx("span",{children:D.location})]}),e.jsxs("div",{className:"flex items-center space-x-2 text-gray-300 text-sm",children:[e.jsx(Be,{size:16,className:"text-primary-400"}),e.jsx("span",{className:"capitalize",children:D.employmentType.split("-").join(" ")})]}),D.experience&&e.jsxs("div",{className:"flex items-center space-x-2 text-gray-300 text-sm",children:[e.jsx(ot,{size:16,className:"text-primary-400"}),e.jsxs("span",{children:[D.experience.min,"-",D.experience.max," years"]})]})]}),e.jsx("p",{className:"text-gray-400 text-sm mb-4 line-clamp-3",children:D.description}),D.openings>1&&e.jsx("div",{className:"mb-4",children:e.jsxs("span",{className:"inline-block bg-primary-900/30 text-primary-400 text-xs px-3 py-1 rounded-full",children:[D.openings," Openings"]})}),e.jsx("button",{onClick:()=>F(D),className:"w-full bg-primary-600 hover:bg-primary-700 text-white font-semibold py-2 px-4 rounded-lg transition-colors duration-200",children:"Apply Now"})]})},D._id)})})}),e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:e.jsxs("div",{className:"bg-gradient-to-r from-primary-600 to-primary-800 rounded-lg p-8 text-center",children:[e.jsx(js,{size:48,className:"mx-auto text-white mb-4"}),e.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Didn't Find a Suitable Job?"}),e.jsx("p",{className:"text-primary-100 mb-6",children:"Submit your resume and we'll contact you when a matching opportunity becomes available"}),e.jsx("button",{onClick:()=>w(!0),className:"bg-white text-primary-600 hover:bg-primary-50 font-semibold py-3 px-8 rounded-lg transition-colors duration-200",children:"Submit Your Resume"})]})}),p&&g&&e.jsx(hv,{job:g,onClose:()=>{j(!1),h(null)},onSubmit:R}),e.jsx(fv,{isOpen:v,onClose:()=>w(!1)})]})},pv=()=>{const[t,s]=y.useState("login"),[a,r]=y.useState(""),[n,i]=y.useState(null),[l,c]=y.useState(!1),[o,d]=y.useState(""),[x,u]=y.useState(""),[m,f]=y.useState({aadharFile:null,panFile:null,bankProofFile:null,bankName:"",accountNumber:"",ifscCode:"",accountHolderName:""}),[g,h]=y.useState({aadhar:!1,pan:!1,bankProof:!1}),p=async w=>{var b,A;w.preventDefault(),d(""),c(!0);try{const N=await ht.post("http://localhost:5000/api/candidate-documents/public/validate",{candidateCode:a.trim()});N.data.success&&(i(N.data.data),s("upload"),f(C=>({...C,accountHolderName:N.data.data.name})))}catch(N){d(((A=(b=N.response)==null?void 0:b.data)==null?void 0:A.message)||"Invalid Candidate ID. Please check and try again.")}finally{c(!1)}},j=(w,b)=>{const A=w.target.files[0];if(A){if(A.size>5*1024*1024){d(`${b} file size should not exceed 5MB`);return}if(!["image/jpeg","image/jpg","image/png","application/pdf"].includes(A.type)){d(`${b} must be a PDF or image file (JPEG, JPG, PNG)`);return}f(C=>({...C,[b]:A})),d("")}},v=async w=>{var b,A;if(w.preventDefault(),d(""),u(""),c(!0),!m.aadharFile||!m.panFile||!m.bankProofFile){d("Please upload all required documents"),c(!1);return}if(!m.bankName||!m.accountNumber||!m.ifscCode||!m.accountHolderName){d("Please fill all bank details"),c(!1);return}try{const N=new FormData;N.append("candidateCode",a),N.append("aadhar",m.aadharFile),N.append("pan",m.panFile),N.append("bankProof",m.bankProofFile),N.append("bankDetails",JSON.stringify({bankName:m.bankName,accountNumber:m.accountNumber,ifscCode:m.ifscCode,accountHolderName:m.accountHolderName})),(await ht.post("http://localhost:5000/api/candidate-documents/public/submit",N,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:k=>{const S=Math.round(k.loaded*100/k.total);console.log("Upload progress:",S)}})).data.success&&(u("Documents submitted successfully! You will receive a confirmation email shortly."),f({aadharFile:null,panFile:null,bankProofFile:null,bankName:"",accountNumber:"",ifscCode:"",accountHolderName:""}))}catch(N){d(((A=(b=N.response)==null?void 0:b.data)==null?void 0:A.message)||"Failed to submit documents. Please try again.")}finally{c(!1)}};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-indigo-50 via-white to-purple-50 py-12 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-3xl mx-auto",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-2",children:"Onboarding Document Submission"}),e.jsx("p",{className:"text-gray-600",children:"Submit your documents to complete the onboarding process"})]}),t==="login"&&e.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-indigo-100 rounded-full mb-4",children:e.jsx(st,{className:"w-8 h-8 text-indigo-600"})}),e.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-2",children:"Enter Your Candidate ID"}),e.jsx("p",{className:"text-gray-600",children:"You received this ID in your onboarding email"})]}),e.jsxs("form",{onSubmit:p,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Candidate ID"}),e.jsx("input",{type:"text",value:a,onChange:w=>r(w.target.value.toUpperCase()),placeholder:"e.g., CAN00001",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent text-center text-lg font-mono",required:!0})]}),o&&e.jsxs("div",{className:"flex items-center gap-2 p-4 bg-red-50 border border-red-200 rounded-lg text-red-700",children:[e.jsx(mt,{className:"w-5 h-5 flex-shrink-0"}),e.jsx("span",{className:"text-sm",children:o})]}),e.jsx("button",{type:"submit",disabled:l||!a,className:"w-full bg-indigo-600 text-white py-3 rounded-lg font-medium hover:bg-indigo-700 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors flex items-center justify-center gap-2",children:l?e.jsxs(e.Fragment,{children:[e.jsx(Qt,{className:"w-5 h-5 animate-spin"}),"Validating..."]}):"Continue"})]}),e.jsx("div",{className:"mt-6 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:e.jsxs("p",{className:"text-sm text-blue-800",children:[e.jsx("strong",{children:"Note:"})," Your Candidate ID was sent to your email when you were moved to onboarding. Please check your inbox."]})})]}),t==="upload"&&n&&e.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8",children:[e.jsxs("div",{className:"mb-6 p-4 bg-indigo-50 border border-indigo-200 rounded-lg",children:[e.jsxs("h3",{className:"font-semibold text-indigo-900 mb-2",children:["Welcome, ",n.name,"!"]}),e.jsxs("p",{className:"text-sm text-indigo-700",children:[e.jsx("strong",{children:"Candidate ID:"})," ",n.candidateCode]}),e.jsxs("p",{className:"text-sm text-indigo-700",children:[e.jsx("strong",{children:"Email:"})," ",n.email]})]}),x&&e.jsxs("div",{className:"mb-6 flex items-center gap-2 p-4 bg-green-50 border border-green-200 rounded-lg text-green-700",children:[e.jsx(Te,{className:"w-5 h-5 flex-shrink-0"}),e.jsx("span",{className:"text-sm",children:x})]}),o&&e.jsxs("div",{className:"mb-6 flex items-center gap-2 p-4 bg-red-50 border border-red-200 rounded-lg text-red-700",children:[e.jsx(mt,{className:"w-5 h-5 flex-shrink-0"}),e.jsx("span",{className:"text-sm",children:o})]}),e.jsxs("form",{onSubmit:v,className:"space-y-6",children:[e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx(st,{className:"w-5 h-5 text-indigo-600"}),e.jsx("h3",{className:"font-semibold text-gray-900",children:"Aadhar Card"}),e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"file",accept:".pdf,.jpg,.jpeg,.png",onChange:w=>j(w,"aadharFile"),className:"w-full text-sm text-gray-600 file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-semibold file:bg-indigo-50 file:text-indigo-700 hover:file:bg-indigo-100",required:!0}),m.aadharFile&&e.jsxs("p",{className:"mt-2 text-sm text-green-600 flex items-center gap-1",children:[e.jsx(Te,{className:"w-4 h-4"}),m.aadharFile.name]})]}),e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx(_r,{className:"w-5 h-5 text-indigo-600"}),e.jsx("h3",{className:"font-semibold text-gray-900",children:"PAN Card"}),e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"file",accept:".pdf,.jpg,.jpeg,.png",onChange:w=>j(w,"panFile"),className:"w-full text-sm text-gray-600 file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-semibold file:bg-indigo-50 file:text-indigo-700 hover:file:bg-indigo-100",required:!0}),m.panFile&&e.jsxs("p",{className:"mt-2 text-sm text-green-600 flex items-center gap-1",children:[e.jsx(Te,{className:"w-4 h-4"}),m.panFile.name]})]}),e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(qa,{className:"w-5 h-5 text-indigo-600"}),e.jsx("h3",{className:"font-semibold text-gray-900",children:"Bank Details"}),e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Bank Name"}),e.jsx("input",{type:"text",value:m.bankName,onChange:w=>f(b=>({...b,bankName:w.target.value})),placeholder:"e.g., HDFC Bank",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Account Holder Name"}),e.jsx("input",{type:"text",value:m.accountHolderName,onChange:w=>f(b=>({...b,accountHolderName:w.target.value})),placeholder:"As per bank records",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Account Number"}),e.jsx("input",{type:"text",value:m.accountNumber,onChange:w=>f(b=>({...b,accountNumber:w.target.value})),placeholder:"Enter account number",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"IFSC Code"}),e.jsx("input",{type:"text",value:m.ifscCode,onChange:w=>f(b=>({...b,ifscCode:w.target.value.toUpperCase()})),placeholder:"e.g., HDFC0001234",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Bank Proof (Cancelled Cheque / Passbook)"}),e.jsx("input",{type:"file",accept:".pdf,.jpg,.jpeg,.png",onChange:w=>j(w,"bankProofFile"),className:"w-full text-sm text-gray-600 file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-semibold file:bg-indigo-50 file:text-indigo-700 hover:file:bg-indigo-100",required:!0}),m.bankProofFile&&e.jsxs("p",{className:"mt-2 text-sm text-green-600 flex items-center gap-1",children:[e.jsx(Te,{className:"w-4 h-4"}),m.bankProofFile.name]})]})]})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("button",{type:"button",onClick:()=>{s("login"),i(null),d(""),u("")},className:"px-6 py-3 border border-gray-300 rounded-lg font-medium text-gray-700 hover:bg-gray-50 transition-colors",children:"Back"}),e.jsx("button",{type:"submit",disabled:l,className:"flex-1 bg-indigo-600 text-white py-3 rounded-lg font-medium hover:bg-indigo-700 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors flex items-center justify-center gap-2",children:l?e.jsxs(e.Fragment,{children:[e.jsx(Qt,{className:"w-5 h-5 animate-spin"}),"Submitting..."]}):e.jsxs(e.Fragment,{children:[e.jsx(js,{className:"w-5 h-5"}),"Submit Documents"]})})]})]}),e.jsx("div",{className:"mt-6 p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:e.jsxs("p",{className:"text-sm text-yellow-800",children:[e.jsx("strong",{children:"Important:"})," Please ensure all documents are clear and readable. Maximum file size: 5MB per file. Accepted formats: PDF, JPG, PNG."]})})]})]})})};it.apiBaseUrl;const gv=async(t,s)=>(await J.get(`/public/document-upload/validate/${t}`,{params:{tenantId:s}})).data,yv=async(t,s,a,r,n)=>{const i=new FormData;return i.append("document",r),i.append("tenantId",s),i.append("documentType",a),(await J.post(`/public/document-upload/upload/${t}`,i,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:c=>{if(n){const o=Math.round(c.loaded*100/c.total);n(o)}}})).data},bv=async(t,s)=>(await J.get(`/public/document-upload/documents/${t}`,{params:{tenantId:s}})).data,vv=async t=>(await J.get("/document-verification/candidates",{params:{status:t}})).data,jv=async t=>(await J.get(`/document-verification/candidates/${t}/documents`)).data,Nv=async(t,s)=>(await J.put(`/document-verification/documents/${t}/verify`,{remarks:s})).data,wv=async(t,s)=>(await J.put(`/document-verification/documents/${t}/unverify`,{reason:s})).data,kv=async(t,s)=>(await J.post("/document-verification/documents/bulk-verify",{documentIds:t,remarks:s})).data,Sv=async t=>(await J.get(`/document-verification/documents/${t}/download`,{responseType:"blob"})).data,Cv=async()=>(await J.get("/document-verification/stats")).data,Av=()=>{const{token:t}=Ga(),[s]=m0(),a=s.get("tenantId"),[r,n]=y.useState(!0),[i,l]=y.useState(!1),[c,o]=y.useState(null),[d,x]=y.useState([]),[u,m]=y.useState([]),[f,g]=y.useState([]),[h,p]=y.useState({}),[j,v]=y.useState({});y.useEffect(()=>{t&&a?w():(_.error("Invalid upload link. Missing token or tenant ID."),n(!1))},[t,a]);const w=async()=>{var F,R;try{const T=await gv(t,a);T.success?(l(!0),o(T.data.candidate),x(T.data.documentConfigurations||[]),m(T.data.uploadedDocuments||[]),g(T.data.rejectedDocuments||[])):_.error(T.message||"Invalid upload link")}catch(T){console.error("Token validation error:",T),_.error(((R=(F=T.response)==null?void 0:F.data)==null?void 0:R.message)||"Failed to validate upload link")}finally{n(!1)}},b=async(F,R)=>{var U,W;if(!R)return;const T=d.find(se=>se.documentType===F);if(!T){_.error("Invalid document type");return}if(R.size/(1024*1024)>T.maxFileSizeMB){_.error(`File size exceeds ${T.maxFileSizeMB}MB limit`);return}const H=R.name.split(".").pop().toLowerCase();if(!T.allowedFormats.includes(H)){_.error(`Invalid file format. Allowed: ${T.allowedFormats.join(", ")}`);return}v(se=>({...se,[F]:!0})),p(se=>({...se,[F]:0}));try{if((await yv(t,a,F,R,X=>{p(D=>({...D,[F]:X}))})).success){_.success("Document uploaded successfully");const X=await bv(t,a);X.success&&m(X.data)}}catch(se){console.error("Upload error:",se),_.error(((W=(U=se.response)==null?void 0:U.data)==null?void 0:W.message)||"Failed to upload document")}finally{v(se=>({...se,[F]:!1})),p(se=>({...se,[F]:0}))}},A=F=>{const R=u.find(T=>T.documentType===F);return R?R.verificationStatus:null},N=F=>{const R=u.find(T=>T.documentType===F);return(R==null?void 0:R.fileName)||null},C=F=>{const R=f.find(T=>T.documentType===F);return(R==null?void 0:R.reason)||null},k=F=>{switch(F){case"verified":return e.jsx(Te,{className:"w-5 h-5 text-green-500"});case"unverified":return e.jsx(Qe,{className:"w-5 h-5 text-red-500"});case"resubmitted":return e.jsx(mt,{className:"w-5 h-5 text-blue-500"});case"pending":return e.jsx(mt,{className:"w-5 h-5 text-yellow-500"});default:return null}},S=F=>{switch(F){case"verified":return"Verified";case"unverified":return"Rejected";case"resubmitted":return"Re-submitted";case"pending":return"Pending Review";default:return"Not Uploaded"}};return r?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Qt,{className:"w-12 h-12 animate-spin text-indigo-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Validating upload link..."})]})}):i?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 py-8 px-4",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8 mb-6",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-2",children:"Document Upload Portal"}),e.jsx("p",{className:"text-gray-600",children:"Upload your onboarding documents securely"})]}),e.jsx("div",{className:"bg-gradient-to-r from-indigo-500 to-purple-600 rounded-xl p-6 text-white",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-indigo-100 text-sm",children:"Candidate ID"}),e.jsx("p",{className:"font-semibold text-lg",children:c==null?void 0:c.candidateId})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-indigo-100 text-sm",children:"Name"}),e.jsx("p",{className:"font-semibold text-lg",children:c==null?void 0:c.name})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-indigo-100 text-sm",children:"Email"}),e.jsx("p",{className:"font-semibold text-lg",children:c==null?void 0:c.email})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-indigo-100 text-sm",children:"Position"}),e.jsx("p",{className:"font-semibold text-lg",children:c==null?void 0:c.position})]})]})})]}),f.length>0&&e.jsx("div",{className:"bg-red-50 border-l-4 border-red-500 rounded-lg p-6 mb-6",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx(mt,{className:"w-6 h-6 text-red-500 mt-0.5 mr-3"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-semibold text-red-800 mb-2",children:"Documents Requiring Re-submission"}),e.jsx("p",{className:"text-red-700 mb-3",children:"The following documents were rejected. Please review the reasons and re-upload corrected versions."}),e.jsx("ul",{className:"space-y-2",children:f.map((F,R)=>e.jsxs("li",{className:"text-red-700",children:[e.jsxs("strong",{children:[F.documentType.replace(/_/g," ").toUpperCase(),":"]})," ",F.reason]},R))})]})]})}),e.jsxs("div",{className:"bg-blue-50 border-l-4 border-blue-500 rounded-lg p-6 mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-blue-800 mb-2",children:"Upload Guidelines"}),e.jsxs("ul",{className:"text-blue-700 space-y-1 text-sm",children:[e.jsx("li",{children:"â€¢ Ensure all documents are clear and readable"}),e.jsx("li",{children:"â€¢ Upload documents in the correct format (PDF, JPG, PNG)"}),e.jsx("li",{children:"â€¢ File size should not exceed the specified limit"}),e.jsx("li",{children:"â€¢ Make sure all required information is visible"})]})]}),e.jsx("div",{className:"space-y-4",children:d.map(F=>{const R=A(F.documentType),T=N(F.documentType),M=C(F.documentType),H=j[F.documentType],U=h[F.documentType]||0;return e.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(st,{className:"w-5 h-5 text-indigo-600"}),e.jsxs("h3",{className:"text-lg font-semibold text-gray-800",children:[F.displayName,F.isMandatory&&e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]})]}),F.description&&e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:F.description}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Formats: ",F.allowedFormats.join(", ").toUpperCase()," | Max size: ",F.maxFileSizeMB,"MB"]}),F.uploadInstructions&&e.jsx("p",{className:"text-xs text-blue-600 mt-1",children:F.uploadInstructions})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[R&&k(R),R&&e.jsx("span",{className:`text-sm font-medium ${R==="verified"?"text-green-600":R==="unverified"?"text-red-600":R==="resubmitted"?"text-blue-600":"text-yellow-600"}`,children:S(R)})]})]}),T&&e.jsx("div",{className:"bg-gray-50 rounded-lg p-3 mb-3",children:e.jsxs("p",{className:"text-sm text-gray-700",children:[e.jsx("strong",{children:"Uploaded:"})," ",T]})}),M&&e.jsx("div",{className:"bg-red-50 rounded-lg p-3 mb-3",children:e.jsxs("p",{className:"text-sm text-red-700",children:[e.jsx("strong",{children:"Rejection Reason:"})," ",M]})}),H?e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Uploading..."}),e.jsxs("span",{className:"text-indigo-600 font-medium",children:[U,"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-indigo-600 h-2 rounded-full transition-all duration-300",style:{width:`${U}%`}})})]}):e.jsxs("div",{children:[e.jsx("input",{type:"file",id:`file-${F.documentType}`,className:"hidden",accept:F.allowedFormats.map(W=>`.${W}`).join(","),onChange:W=>b(F.documentType,W.target.files[0])}),e.jsxs("label",{htmlFor:`file-${F.documentType}`,className:`flex items-center justify-center gap-2 px-4 py-2 rounded-lg cursor-pointer transition-colors ${R==="verified"?"bg-gray-100 text-gray-600 hover:bg-gray-200":"bg-indigo-600 text-white hover:bg-indigo-700"}`,children:[e.jsx(js,{className:"w-4 h-4"}),R?"Re-upload Document":"Upload Document"]})]})]},F.documentType)})}),e.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6 mt-6 text-center",children:[e.jsx("p",{className:"text-gray-600 text-sm",children:"If you have any questions or need assistance, please contact our HR team."}),e.jsx("p",{className:"text-gray-500 text-xs mt-2",children:"This is a secure upload portal. Your documents are encrypted and stored safely."})]})]})}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8 max-w-md w-full text-center",children:[e.jsx(Qe,{className:"w-16 h-16 text-red-500 mx-auto mb-4"}),e.jsx("h1",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Invalid Upload Link"}),e.jsx("p",{className:"text-gray-600",children:"This upload link is invalid, expired, or has been revoked. Please contact HR for assistance."})]})})},Ev=()=>{var l,c,o,d,x,u,m,f,g,h,p,j;const[t,s]=y.useState(null),[a,r]=y.useState(!0);y.useEffect(()=>{n()},[]);const n=async()=>{try{const v=await J.get("/dashboard/stats");s(v.data.data)}catch{_.error("Failed to load dashboard data")}finally{r(!1)}};if(a)return e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"w-12 h-12 border-4 border-primary-600 border-t-transparent rounded-full animate-spin"})});const i=[{title:"Total Employees",value:((l=t==null?void 0:t.employees)==null?void 0:l.total)||0,icon:Ue,color:"bg-blue-500"},{title:"Active Employees",value:((c=t==null?void 0:t.employees)==null?void 0:c.active)||0,icon:Ue,color:"bg-green-500"},{title:"On Leave Today",value:((o=t==null?void 0:t.employees)==null?void 0:o.onLeave)||0,icon:Oe,color:"bg-yellow-500"},{title:"Today Attendance",value:((d=t==null?void 0:t.attendance)==null?void 0:d.today)||0,icon:Be,color:"bg-purple-500"},{title:"Pending Payroll",value:((x=t==null?void 0:t.payroll)==null?void 0:x.pending)||0,icon:gt,color:"bg-red-500"},{title:"Active Jobs",value:((u=t==null?void 0:t.jobs)==null?void 0:u.active)||0,icon:ot,color:"bg-indigo-500"},{title:"Total Assets",value:((m=t==null?void 0:t.assets)==null?void 0:m.total)||0,icon:is,color:"bg-pink-500"},{title:"Assigned Assets",value:((f=t==null?void 0:t.assets)==null?void 0:f.assigned)||0,icon:is,color:"bg-orange-500"}];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-white",children:"Dashboard"}),e.jsx("p",{className:"text-gray-400 mt-1",children:"Overview of your organization"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:i.map((v,w)=>e.jsx("div",{className:"card",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-400 mb-1",children:v.title}),e.jsx("h3",{className:"text-2xl font-bold text-white",children:v.value})]}),e.jsx("div",{className:`${v.color} w-12 h-12 rounded-lg flex items-center justify-center`,children:e.jsx(v.icon,{size:24,className:"text-white"})})]})},w))}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"card",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Employees by Department"}),e.jsx("div",{className:"space-y-3",children:(g=t==null?void 0:t.employeesByDepartment)==null?void 0:g.map((v,w)=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-300",children:v.department}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-32 bg-dark-800 rounded-full h-2",children:e.jsx("div",{className:"bg-primary-600 h-2 rounded-full",style:{width:`${v.count/t.employees.active*100}%`}})}),e.jsx("span",{className:"text-white font-medium w-8 text-right",children:v.count})]})]},w))})]}),e.jsxs("div",{className:"card",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Recent Leave Requests"}),e.jsx("div",{className:"space-y-3",children:(h=t==null?void 0:t.recentLeaves)==null?void 0:h.map((v,w)=>e.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-dark-800 last:border-0",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-white font-medium",children:v.employeeName}),e.jsx("p",{className:"text-sm text-gray-400 capitalize",children:v.leaveType})]}),e.jsx("span",{className:`badge ${v.status==="approved"?"badge-success":v.status==="pending"?"badge-warning":"badge-danger"}`,children:v.status})]},w))})]})]}),e.jsxs("div",{className:"card",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Attendance Trend (Last 7 Days)"}),e.jsx("div",{className:"h-64 flex items-end justify-between space-x-2",children:(j=(p=t==null?void 0:t.attendance)==null?void 0:p.trend)==null?void 0:j.map((v,w)=>e.jsxs("div",{className:"flex-1 flex flex-col items-center",children:[e.jsxs("div",{className:"w-full space-y-1",children:[e.jsx("div",{className:"bg-green-600 rounded-t",style:{height:`${v.present/t.employees.active*200}px`},title:`Present: ${v.present}`}),e.jsx("div",{className:"bg-red-600",style:{height:`${v.absent/t.employees.active*200}px`},title:`Absent: ${v.absent}`})]}),e.jsx("span",{className:"text-xs text-gray-400 mt-2",children:new Date(v._id).toLocaleDateString("en-US",{weekday:"short"})})]},w))}),e.jsxs("div",{className:"flex items-center justify-center space-x-6 mt-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-3 h-3 bg-green-600 rounded"}),e.jsx("span",{className:"text-sm text-gray-400",children:"Present"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-3 h-3 bg-red-600 rounded"}),e.jsx("span",{className:"text-sm text-gray-400",children:"Absent"})]})]})]})]})},_v=({isOpen:t,onClose:s,onJobCreated:a,onJobUpdated:r,editingJob:n})=>{const[i,l]=y.useState({title:"",department:"",location:"",employmentType:"full-time",experience:{min:"",max:""},salary:{min:"",max:"",currency:"USD"},description:"",requirements:[""],responsibilities:[""],skills:[""],openings:1,closingDate:"",status:"draft"}),[c,o]=y.useState([]),[d,x]=y.useState(!1),[u,m]=y.useState({});y.useEffect(()=>{var b,A,N,C;t&&(f(),l(n?{title:n.title||"",department:((b=n.department)==null?void 0:b._id)||"",location:n.location||"",employmentType:n.employmentType||"full-time",experience:n.experience||{min:"",max:""},salary:n.salary||{min:"",max:"",currency:"USD"},description:n.description||"",requirements:((A=n.requirements)==null?void 0:A.length)>0?n.requirements:[""],responsibilities:((N=n.responsibilities)==null?void 0:N.length)>0?n.responsibilities:[""],skills:((C=n.skills)==null?void 0:C.length)>0?n.skills:[""],openings:n.openings||1,closingDate:n.closingDate?n.closingDate.split("T")[0]:"",status:n.status||"draft"}:{title:"",department:"",location:"",employmentType:"full-time",experience:{min:"",max:""},salary:{min:"",max:"",currency:"USD"},description:"",requirements:[""],responsibilities:[""],skills:[""],openings:1,closingDate:"",status:"draft"}))},[t,n]);const f=async()=>{var b,A;try{console.log("Fetching departments...");const N=await J.get("/departments");console.log("Departments response:",N.data),o(N.data.data||[])}catch(N){console.error("Error fetching departments:",N),_.error(`Failed to load departments: ${((A=(b=N.response)==null?void 0:b.data)==null?void 0:A.message)||N.message}`)}},g=(b,A)=>{l(N=>({...N,[b]:A})),u[b]&&m(N=>({...N,[b]:""}))},h=(b,A,N)=>{l(C=>({...C,[b]:C[b].map((k,S)=>S===A?N:k)}))},p=b=>{l(A=>({...A,[b]:[...A[b],""]}))},j=(b,A)=>{i[b].length>1&&l(N=>({...N,[b]:N[b].filter((C,k)=>k!==A)}))},v=()=>{const b={};return i.title.trim()||(b.title="Job title is required"),i.department||(b.department="Department is required"),i.location.trim()||(b.location="Location is required"),i.description.trim()||(b.description="Description is required"),m(b),Object.keys(b).length===0},w=async b=>{var A,N;if(b.preventDefault(),!v()){_.error("Please fill in all required fields");return}x(!0);try{const C={...i,requirements:i.requirements.filter(S=>S.trim()!==""),responsibilities:i.responsibilities.filter(S=>S.trim()!==""),skills:i.skills.filter(S=>S.trim()!==""),experience:{min:i.experience.min?Number(i.experience.min):void 0,max:i.experience.max?Number(i.experience.max):void 0},salary:{min:i.salary.min?Number(i.salary.min):void 0,max:i.salary.max?Number(i.salary.max):void 0,currency:i.salary.currency},openings:Number(i.openings),closingDate:i.closingDate||void 0};let k;n?(k=await J.put(`/jobs/${n._id}`,C),_.success("Job posting updated successfully"),r(k.data.data)):(k=await J.post("/jobs",C),_.success("Job posting created successfully"),a(k.data.data)),s(),l({title:"",department:"",location:"",employmentType:"full-time",experience:{min:"",max:""},salary:{min:"",max:"",currency:"USD"},description:"",requirements:[""],responsibilities:[""],skills:[""],openings:1,closingDate:""})}catch(C){_.error(((N=(A=C.response)==null?void 0:A.data)==null?void 0:N.message)||`Failed to ${n?"update":"create"} job posting`)}finally{x(!1)}};return t?e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-dark-900 rounded-lg w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-dark-800",children:[e.jsx("h2",{className:"text-2xl font-bold text-white",children:n?"Edit Job Posting":"Post New Job"}),e.jsx("button",{onClick:s,className:"text-gray-400 hover:text-white transition-colors",children:e.jsx(Le,{size:24})})]}),e.jsxs("form",{onSubmit:w,className:"p-6 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Job Title *"}),e.jsx("input",{type:"text",value:i.title,onChange:b=>g("title",b.target.value),className:`input-field ${u.title?"border-red-500":""}`,placeholder:"e.g. Senior Software Developer"}),u.title&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:u.title})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Department *"}),e.jsxs("select",{value:i.department,onChange:b=>g("department",b.target.value),className:`input-field ${u.department?"border-red-500":""}`,children:[e.jsx("option",{value:"",children:"Select Department"}),c.length>0?c.map(b=>e.jsx("option",{value:b._id,children:b.name},b._id)):e.jsx("option",{value:"",disabled:!0,children:"No departments available - please create departments first"})]}),u.department&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:u.department})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Location *"}),e.jsx("input",{type:"text",value:i.location,onChange:b=>g("location",b.target.value),className:`input-field ${u.location?"border-red-500":""}`,placeholder:"e.g. New York, NY"}),u.location&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:u.location})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Employment Type"}),e.jsxs("select",{value:i.employmentType,onChange:b=>g("employmentType",b.target.value),className:"input-field",children:[e.jsx("option",{value:"full-time",children:"Full Time"}),e.jsx("option",{value:"part-time",children:"Part Time"}),e.jsx("option",{value:"contract",children:"Contract"}),e.jsx("option",{value:"intern",children:"Intern"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Openings"}),e.jsx("input",{type:"number",min:"1",value:i.openings,onChange:b=>g("openings",b.target.value),className:"input-field"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Closing Date"}),e.jsx("input",{type:"date",value:i.closingDate,onChange:b=>g("closingDate",b.target.value),className:"input-field"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Status"}),e.jsxs("select",{value:i.status,onChange:b=>g("status",b.target.value),className:"input-field",children:[e.jsx("option",{value:"draft",children:"Draft"}),e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"on-hold",children:"On Hold"}),e.jsx("option",{value:"closed",children:"Closed"}),e.jsx("option",{value:"archived",children:"Archived"})]}),e.jsx("p",{className:"text-gray-400 text-xs mt-1",children:'Only "Active" jobs will be visible on the careers page'})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Min Experience (years)"}),e.jsx("input",{type:"number",min:"0",value:i.experience.min,onChange:b=>g("experience",{...i.experience,min:b.target.value}),className:"input-field"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Max Experience (years)"}),e.jsx("input",{type:"number",min:"0",value:i.experience.max,onChange:b=>g("experience",{...i.experience,max:b.target.value}),className:"input-field"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Min Salary"}),e.jsx("input",{type:"number",min:"0",value:i.salary.min,onChange:b=>g("salary",{...i.salary,min:b.target.value}),className:"input-field"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Max Salary"}),e.jsx("input",{type:"number",min:"0",value:i.salary.max,onChange:b=>g("salary",{...i.salary,max:b.target.value}),className:"input-field"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Currency"}),e.jsxs("select",{value:i.salary.currency,onChange:b=>g("salary",{...i.salary,currency:b.target.value}),className:"input-field",children:[e.jsx("option",{value:"USD",children:"USD"}),e.jsx("option",{value:"EUR",children:"EUR"}),e.jsx("option",{value:"GBP",children:"GBP"}),e.jsx("option",{value:"INR",children:"INR"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Job Description *"}),e.jsx("textarea",{rows:4,value:i.description,onChange:b=>g("description",b.target.value),className:`input-field ${u.description?"border-red-500":""}`,placeholder:"Describe the role, team, and what the candidate will be doing..."}),u.description&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:u.description})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Requirements"}),i.requirements.map((b,A)=>e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsx("input",{type:"text",value:b,onChange:N=>h("requirements",A,N.target.value),className:"input-field flex-1",placeholder:"e.g. Bachelor's degree in Computer Science"}),e.jsx("button",{type:"button",onClick:()=>j("requirements",A),className:"p-2 text-red-500 hover:bg-red-500/10 rounded-lg transition-colors",disabled:i.requirements.length===1,children:e.jsx(mc,{size:20})})]},A)),e.jsxs("button",{type:"button",onClick:()=>p("requirements"),className:"flex items-center space-x-2 text-primary-500 hover:text-primary-400 transition-colors",children:[e.jsx(qe,{size:16}),e.jsx("span",{children:"Add Requirement"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Responsibilities"}),i.responsibilities.map((b,A)=>e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsx("input",{type:"text",value:b,onChange:N=>h("responsibilities",A,N.target.value),className:"input-field flex-1",placeholder:"e.g. Develop and maintain web applications"}),e.jsx("button",{type:"button",onClick:()=>j("responsibilities",A),className:"p-2 text-red-500 hover:bg-red-500/10 rounded-lg transition-colors",disabled:i.responsibilities.length===1,children:e.jsx(mc,{size:20})})]},A)),e.jsxs("button",{type:"button",onClick:()=>p("responsibilities"),className:"flex items-center space-x-2 text-primary-500 hover:text-primary-400 transition-colors",children:[e.jsx(qe,{size:16}),e.jsx("span",{children:"Add Responsibility"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Skills"}),i.skills.map((b,A)=>e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsx("input",{type:"text",value:b,onChange:N=>h("skills",A,N.target.value),className:"input-field flex-1",placeholder:"e.g. React, Node.js, MongoDB"}),e.jsx("button",{type:"button",onClick:()=>j("skills",A),className:"p-2 text-red-500 hover:bg-red-500/10 rounded-lg transition-colors",disabled:i.skills.length===1,children:e.jsx(mc,{size:20})})]},A)),e.jsxs("button",{type:"button",onClick:()=>p("skills"),className:"flex items-center space-x-2 text-primary-500 hover:text-primary-400 transition-colors",children:[e.jsx(qe,{size:16}),e.jsx("span",{children:"Add Skill"})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t border-dark-800",children:[e.jsx("button",{type:"button",onClick:s,className:"btn-outline",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:d,className:"btn-primary",children:d?"Creating...":"Create Job Posting"})]})]})]})}):null},Ax=()=>{const t=Je(),s=Mr(),[a,r]=y.useState([]),[n,i]=y.useState(!0),[l,c]=y.useState(""),[o,d]=y.useState("all"),[x,u]=y.useState(!1),[m,f]=y.useState(null);y.useEffect(()=>{g()},[]);const g=async()=>{try{const N=await J.get("/jobs");r(N.data.data)}catch{_.error("Failed to load job postings")}finally{i(!1)}},h=N=>{r(C=>[N,...C]),u(!1)},p=N=>{r(C=>C.map(k=>k._id===N._id?N:k)),u(!1),f(null)},j=N=>{f(N),u(!0)},v=async N=>{var C,k;if(window.confirm("Are you sure you want to delete this job posting?"))try{await J.delete(`/jobs/${N}`),r(S=>S.filter(F=>F._id!==N)),_.success("Job posting deleted successfully")}catch(S){_.error(((k=(C=S.response)==null?void 0:C.data)==null?void 0:k.message)||"Failed to delete job posting")}},w=async(N,C)=>{var k,S;try{const F=await J.put(`/jobs/${N}/status`,{status:C});r(R=>R.map(T=>T._id===N?F.data.data:T)),_.success(`Job status updated to ${C}`)}catch(F){_.error(((S=(k=F.response)==null?void 0:k.data)==null?void 0:S.message)||"Failed to update job status")}},b=a.filter(N=>{const C=N.title.toLowerCase().includes(l.toLowerCase())||N.location.toLowerCase().includes(l.toLowerCase()),k=o==="all"||N.status===o;return C&&k}),A=N=>({active:"badge-success",draft:"badge-warning",closed:"badge-danger","on-hold":"badge-info",archived:"bg-gray-600 text-gray-300"})[N]||"badge-default";return n?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:s.pathname.includes("/hr/recruitment")?"w-12 h-12 border-4 border-[#A88BFF] border-t-transparent rounded-full animate-spin":"w-12 h-12 border-4 border-primary-600 border-t-transparent rounded-full animate-spin"})}):e.jsxs("div",{className:"space-y-6",style:{backgroundColor:s.pathname.includes("/hr/recruitment")?"#1E1E2A":void 0},children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-white",children:"Job Desk"}),e.jsx("p",{className:"text-gray-400 mt-1",children:"Manage job postings and positions"})]}),e.jsxs("button",{onClick:()=>u(!0),className:s.pathname.includes("/hr/recruitment")?"bg-gradient-to-r from-[#A88BFF] to-[#8B6FE8] text-white px-6 py-2.5 rounded-xl font-medium hover:shadow-lg transition-all flex items-center space-x-2":"btn-primary flex items-center space-x-2",children:[e.jsx(qe,{size:20}),e.jsx("span",{children:"Post New Job"})]})]}),e.jsx("div",{className:s.pathname.includes("/hr/recruitment")?"bg-[#2A2A3A] rounded-2xl p-6 border border-gray-800":"card",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(yt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-500",size:20}),e.jsx("input",{type:"text",placeholder:"Search jobs...",value:l,onChange:N=>c(N.target.value),className:s.pathname.includes("/hr/recruitment")?"w-full bg-[#1E1E2A] text-white pl-10 pr-4 py-2.5 rounded-xl border border-gray-700 focus:border-[#A88BFF] focus:outline-none transition-colors":"input-field pl-10"})]}),e.jsxs("select",{value:o,onChange:N=>d(N.target.value),className:s.pathname.includes("/hr/recruitment")?"bg-[#1E1E2A] text-white px-4 py-2.5 rounded-xl border border-gray-700 focus:border-[#A88BFF] focus:outline-none transition-colors md:w-48":"input-field md:w-48",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"draft",children:"Draft"}),e.jsx("option",{value:"closed",children:"Closed"}),e.jsx("option",{value:"on-hold",children:"On Hold"}),e.jsx("option",{value:"archived",children:"Archived"})]})]})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:b.map(N=>{var C,k,S;return e.jsxs("div",{className:s.pathname.includes("/hr/recruitment")?"bg-[#2A2A3A] rounded-2xl p-6 border border-gray-800 hover:border-[#A88BFF] transition-all cursor-pointer":"card hover:border-primary-600 transition-colors cursor-pointer",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:s.pathname.includes("/hr/recruitment")?"w-12 h-12 bg-gradient-to-br from-[#A88BFF]/20 to-[#8B6FE8]/20 rounded-xl flex items-center justify-center":"w-12 h-12 bg-primary-600/20 rounded-lg flex items-center justify-center",children:e.jsx(ot,{size:24,className:s.pathname.includes("/hr/recruitment")?"text-[#A88BFF]":"text-primary-500"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-white",children:N.title}),e.jsx("p",{className:"text-sm text-gray-400",children:(C=N.department)==null?void 0:C.name})]})]}),e.jsxs("select",{value:N.status,onChange:F=>w(N._id,F.target.value),className:`badge ${A(N.status)} cursor-pointer hover:opacity-80`,onClick:F=>F.stopPropagation(),style:{backgroundImage:"none"},children:[e.jsx("option",{value:"draft",className:"bg-gray-800 text-white",children:"Draft"}),e.jsx("option",{value:"active",className:"bg-gray-800 text-white",children:"Active"}),e.jsx("option",{value:"on-hold",className:"bg-gray-800 text-white",children:"On Hold"}),e.jsx("option",{value:"closed",className:"bg-gray-800 text-white",children:"Closed"}),e.jsx("option",{value:"archived",className:"bg-gray-800 text-white",children:"Archived"})]})]}),e.jsxs("div",{className:"space-y-2 mb-4",children:[e.jsxs("div",{className:"flex items-center text-sm text-gray-400",children:[e.jsx("span",{className:"font-medium text-gray-300 w-24",children:"Location:"}),e.jsx("span",{children:N.location})]}),e.jsxs("div",{className:"flex items-center text-sm text-gray-400",children:[e.jsx("span",{className:"font-medium text-gray-300 w-24",children:"Type:"}),e.jsx("span",{className:"capitalize",children:N.employmentType})]}),e.jsxs("div",{className:"flex items-center text-sm text-gray-400",children:[e.jsx("span",{className:"font-medium text-gray-300 w-24",children:"Experience:"}),e.jsxs("span",{children:[(k=N.experience)==null?void 0:k.min,"-",(S=N.experience)==null?void 0:S.max," years"]})]}),e.jsxs("div",{className:"flex items-center text-sm text-gray-400",children:[e.jsx("span",{className:"font-medium text-gray-300 w-24",children:"Openings:"}),e.jsx("span",{children:N.openings})]}),e.jsxs("div",{className:"flex items-center text-sm text-gray-400",children:[e.jsx("span",{className:"font-medium text-gray-300 w-24",children:"Applications:"}),e.jsx("span",{children:N.applications})]})]}),e.jsxs("div",{className:s.pathname.includes("/hr/recruitment")?"flex items-center space-x-2 pt-4 border-t border-gray-700":"flex items-center space-x-2 pt-4 border-t border-dark-800",children:[e.jsxs("button",{onClick:()=>{s.pathname.includes("/hr/recruitment")?t(`/employee/hr/recruitment/${N._id}/applicants`):t(`/job-desk/${N._id}/applicants`)},className:s.pathname.includes("/hr/recruitment")?"flex-1 bg-[#1E1E2A] text-white text-sm py-2 rounded-xl border border-gray-700 hover:border-[#A88BFF] transition-all flex items-center justify-center space-x-1":"flex-1 btn-outline text-sm py-2 flex items-center justify-center space-x-1",children:[e.jsx(Ht,{size:16}),e.jsx("span",{children:"View"})]}),e.jsxs("button",{onClick:()=>j(N),className:s.pathname.includes("/hr/recruitment")?"flex-1 bg-[#1E1E2A] text-white text-sm py-2 rounded-xl border border-gray-700 hover:border-[#A88BFF] transition-all flex items-center justify-center space-x-1":"flex-1 btn-outline text-sm py-2 flex items-center justify-center space-x-1",children:[e.jsx($a,{size:16}),e.jsx("span",{children:"Edit"})]}),e.jsx("button",{onClick:()=>v(N._id),className:s.pathname.includes("/hr/recruitment")?"bg-[#1E1E2A] text-red-400 text-sm py-2 px-3 rounded-xl border border-gray-700 hover:border-red-500 hover:bg-red-500/10 transition-all":"btn-outline text-sm py-2 px-3 text-red-500 hover:bg-red-500/10",children:e.jsx(kt,{size:16})})]})]},N._id)})}),b.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(ot,{size:48,className:"mx-auto text-gray-600 mb-4"}),e.jsx("p",{className:"text-gray-400",children:"No job postings found"})]}),e.jsx(_v,{isOpen:x,onClose:()=>{u(!1),f(null)},onJobCreated:h,onJobUpdated:p,editingJob:m})]})},Ex=({analysis:t,compact:s=!1})=>{if(!t||!t.isAnalyzed)return null;const{matchScore:a,skillsMatch:r,experienceMatch:n,keyHighlights:i,weaknesses:l,overallFit:c}=t,d=(u=>{const m={excellent:{bg:"bg-green-500/20",text:"text-green-400",label:"Excellent Fit"},good:{bg:"bg-blue-500/20",text:"text-blue-400",label:"Good Fit"},average:{bg:"bg-yellow-500/20",text:"text-yellow-400",label:"Average Fit"},poor:{bg:"bg-red-500/20",text:"text-red-400",label:"Poor Fit"}};return m[u]||m.average})(c),x=u=>u>=80?"text-green-400":u>=60?"text-blue-400":u>=40?"text-yellow-400":"text-red-400";return s?e.jsxs("div",{className:"mt-3 pt-3 border-t border-dark-800",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ao,{size:16,className:"text-primary-500"}),e.jsx("span",{className:"text-xs font-medium text-gray-400",children:"AI Match Score"})]}),e.jsxs("span",{className:`text-lg font-bold ${x(a)}`,children:[a,"%"]})]}),e.jsx("div",{className:"w-full bg-dark-800 rounded-full h-2 mb-2",children:e.jsx("div",{className:`h-2 rounded-full transition-all ${a>=80?"bg-green-500":a>=60?"bg-blue-500":a>=40?"bg-yellow-500":"bg-red-500"}`,style:{width:`${a}%`}})}),e.jsxs("div",{className:"flex items-center justify-between text-xs",children:[e.jsx("span",{className:`px-2 py-1 rounded ${d.bg} ${d.text} font-medium`,children:d.label}),e.jsxs("span",{className:"text-gray-500",children:[(r==null?void 0:r.matchPercentage)||0,"% skills match"]})]}),i&&i.length>0&&e.jsx("div",{className:"mt-2 space-y-1",children:i.slice(0,2).map((u,m)=>e.jsxs("div",{className:"flex items-start space-x-1 text-xs text-gray-400",children:[e.jsx(Te,{size:12,className:"text-green-500 mt-0.5 flex-shrink-0"}),e.jsx("span",{className:"line-clamp-1",children:u})]},m))})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 bg-primary-600/20 rounded-lg",children:e.jsx(ml,{size:24,className:"text-primary-500"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-white",children:"AI Analysis"}),e.jsx("p",{className:"text-sm text-gray-400",children:"Powered by intelligent matching"})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:`text-4xl font-bold ${x(a)}`,children:[a,"%"]}),e.jsx("div",{className:`px-3 py-1 rounded-lg ${d.bg} ${d.text} text-sm font-medium mt-1`,children:d.label})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-400",children:"Overall Match"}),e.jsxs("span",{className:`font-semibold ${x(a)}`,children:[a,"%"]})]}),e.jsx("div",{className:"w-full bg-dark-800 rounded-full h-3",children:e.jsx("div",{className:`h-3 rounded-full transition-all ${a>=80?"bg-gradient-to-r from-green-500 to-emerald-500":a>=60?"bg-gradient-to-r from-blue-500 to-cyan-500":a>=40?"bg-gradient-to-r from-yellow-500 to-orange-500":"bg-gradient-to-r from-red-500 to-pink-500"}`,style:{width:`${a}%`}})})]}),r&&e.jsxs("div",{className:"card bg-dark-800/50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Xo,{size:18,className:"text-blue-400"}),e.jsx("h4",{className:"font-semibold text-white",children:"Skills Analysis"})]}),e.jsxs("span",{className:`font-bold ${x(r.matchPercentage)}`,children:[r.matchPercentage,"%"]})]}),r.matched&&r.matched.length>0&&e.jsxs("div",{className:"mb-3",children:[e.jsxs("p",{className:"text-xs text-gray-500 mb-2 flex items-center",children:[e.jsx(Te,{size:14,className:"mr-1 text-green-500"}),"Matched Skills (",r.matched.length,")"]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:r.matched.map((u,m)=>e.jsx("span",{className:"px-2 py-1 bg-green-500/20 text-green-400 rounded text-xs font-medium",children:u},m))})]}),r.missing&&r.missing.length>0&&e.jsxs("div",{className:"mb-3",children:[e.jsxs("p",{className:"text-xs text-gray-500 mb-2 flex items-center",children:[e.jsx(Qe,{size:14,className:"mr-1 text-red-500"}),"Missing Skills (",r.missing.length,")"]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:r.missing.map((u,m)=>e.jsx("span",{className:"px-2 py-1 bg-red-500/20 text-red-400 rounded text-xs font-medium",children:u},m))})]}),r.additional&&r.additional.length>0&&e.jsxs("div",{children:[e.jsxs("p",{className:"text-xs text-gray-500 mb-2 flex items-center",children:[e.jsx(_a,{size:14,className:"mr-1 text-purple-500"}),"Additional Skills (",r.additional.length,")"]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[r.additional.slice(0,5).map((u,m)=>e.jsx("span",{className:"px-2 py-1 bg-purple-500/20 text-purple-400 rounded text-xs font-medium",children:u},m)),r.additional.length>5&&e.jsxs("span",{className:"px-2 py-1 bg-dark-700 text-gray-400 rounded text-xs",children:["+",r.additional.length-5," more"]})]})]})]}),n&&e.jsxs("div",{className:"card bg-dark-800/50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ks,{size:18,className:"text-cyan-400"}),e.jsx("h4",{className:"font-semibold text-white",children:"Experience Match"})]}),e.jsxs("span",{className:`font-bold ${x(n.score)}`,children:[n.score,"%"]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500 text-xs",children:"Candidate"}),e.jsxs("p",{className:"text-white font-medium",children:[n.candidateYears," years"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500 text-xs",children:"Required"}),e.jsxs("p",{className:"text-white font-medium",children:[n.requiredYears," years"]})]})]}),e.jsx("div",{className:"mt-2",children:n.isMatch?e.jsxs("span",{className:"text-xs text-green-400 flex items-center",children:[e.jsx(Te,{size:14,className:"mr-1"}),"Experience requirement met"]}):e.jsxs("span",{className:"text-xs text-yellow-400 flex items-center",children:[e.jsx(Jt,{size:14,className:"mr-1"}),"Experience requirement not fully met"]})})]}),i&&i.length>0&&e.jsxs("div",{className:"card bg-dark-800/50",children:[e.jsxs("h4",{className:"font-semibold text-white mb-3 flex items-center",children:[e.jsx(Te,{size:18,className:"mr-2 text-green-500"}),"Key Strengths"]}),e.jsx("ul",{className:"space-y-2",children:i.map((u,m)=>e.jsxs("li",{className:"flex items-start space-x-2 text-sm text-gray-300",children:[e.jsx("span",{className:"text-green-500 mt-1",children:"âœ“"}),e.jsx("span",{children:u})]},m))})]}),l&&l.length>0&&e.jsxs("div",{className:"card bg-dark-800/50",children:[e.jsxs("h4",{className:"font-semibold text-white mb-3 flex items-center",children:[e.jsx(Jt,{size:18,className:"mr-2 text-yellow-500"}),"Areas of Concern"]}),e.jsx("ul",{className:"space-y-2",children:l.map((u,m)=>e.jsxs("li",{className:"flex items-start space-x-2 text-sm text-gray-300",children:[e.jsx("span",{className:"text-yellow-500 mt-1",children:"âš "}),e.jsx("span",{children:u})]},m))})]})]})},_x=()=>{const{jobId:t}=Ga(),s=Je(),a=Mr(),[r,n]=y.useState([]),[i,l]=y.useState(null),[c,o]=y.useState(!0),[d,x]=y.useState(""),[u,m]=y.useState("all"),[f,g]=y.useState("all"),[h,p]=y.useState("date"),[j,v]=y.useState(!1),[w,b]=y.useState(null),[A,N]=y.useState({});y.useEffect(()=>{C(),k()},[t,u,f]);const C=async()=>{try{o(!0);const E=new URLSearchParams;u!=="all"&&E.append("stage",u),f!=="all"&&E.append("status",f),d&&E.append("search",d);const z=await J.get(`/jobs/${t}/applicants?${E.toString()}`);let O=z.data.data;O=S(O,h),n(O),l(z.data.job)}catch(E){_.error("Failed to load applicants"),console.error(E)}finally{o(!1)}},k=async()=>{try{const E=await J.get(`/ai-analysis/jobs/${t}/stats`);b(E.data.data)}catch(E){console.error("Failed to fetch analysis stats:",E)}},S=(E,z)=>{const O=[...E];switch(z){case"ai-score":return O.sort((P,Z)=>{var oe,ue;const re=((oe=P.aiAnalysis)==null?void 0:oe.matchScore)||0;return(((ue=Z.aiAnalysis)==null?void 0:ue.matchScore)||0)-re});case"date":return O.sort((P,Z)=>new Date(Z.createdAt)-new Date(P.createdAt));case"name":return O.sort((P,Z)=>`${P.firstName} ${P.lastName}`.localeCompare(`${Z.firstName} ${Z.lastName}`));default:return O}},F=async()=>{var E,z;if(window.confirm("Analyze all candidates for this job? This may take a few moments."))try{v(!0);const O=await J.post(`/ai-analysis/jobs/${t}/analyze`);_.success(O.data.message),await C(),await k()}catch(O){_.error(((z=(E=O.response)==null?void 0:E.data)==null?void 0:z.message)||"Failed to analyze candidates"),console.error(O)}finally{v(!1)}},R=E=>{N(z=>({...z,[E]:!z[E]}))},T=()=>{C()},M=E=>{p(E),n(z=>S(z,E))},H=E=>({applied:"bg-blue-500/20 text-blue-400",screening:"bg-yellow-500/20 text-yellow-400",shortlisted:"bg-purple-500/20 text-purple-400","interview-scheduled":"bg-indigo-500/20 text-indigo-400","interview-completed":"bg-cyan-500/20 text-cyan-400","offer-extended":"bg-green-500/20 text-green-400","offer-accepted":"bg-emerald-500/20 text-emerald-400","offer-rejected":"bg-red-500/20 text-red-400","sent-to-onboarding":"bg-orange-500/20 text-orange-400",joined:"bg-teal-500/20 text-teal-400",rejected:"bg-gray-500/20 text-gray-400"})[E]||"bg-gray-500/20 text-gray-400",U=E=>({active:"badge-success",hired:"badge-info",rejected:"badge-danger",withdrawn:"badge-warning"})[E]||"badge-default",W=E=>{if(!E)return"N/A";const{years:z=0,months:O=0}=E;return z===0&&O===0?"Fresher":z===0?`${O} months`:O===0?`${z} years`:`${z}y ${O}m`},se=E=>E?new Date(E).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"N/A",X=E=>{a.pathname.includes("/hr/recruitment")?s(`/employee/hr/recruitment/candidates/${E}/timeline`):s(`/candidates/${E}/timeline`)},D=async(E,z)=>{var O,P,Z;if(z.stopPropagation(),!!window.confirm(`Send ${E.firstName} ${E.lastName} to comprehensive onboarding process?`))try{const re=await J.post(`/candidates/${E._id}/send-to-onboarding`,{notes:"Candidate sent to onboarding from job application review"});_.success("Candidate successfully sent to onboarding!");const ie=re.data.data.onboarding;_.success(`Onboarding record created: ${ie.onboardingId}`,{duration:4e3}),C()}catch(re){const ie=((P=(O=re.response)==null?void 0:O.data)==null?void 0:P.message)||"Failed to send candidate to onboarding";_.error(ie),console.error("Onboarding error:",(Z=re.response)==null?void 0:Z.data)}},le=E=>{const z=["interview-completed","offer-extended","offer-accepted"],O=E.stage!=="sent-to-onboarding",P=E.status==="active";return z.includes(E.stage)&&O&&P},de=()=>{try{const z=[["Candidate Code","Name","Email","Phone","Current Location","Experience","Current Company","Current Designation","Expected CTC","Notice Period","Stage","Status","Applied On","Skills"].join(",")];r.forEach(ie=>{const oe=[ie.candidateCode||"",`"${ie.firstName} ${ie.lastName}"`,ie.email||"",ie.phone||"",`"${ie.currentLocation||""}"`,W(ie.experience),`"${ie.currentCompany||""}"`,`"${ie.currentDesignation||""}"`,ie.expectedCTC||"",ie.noticePeriod!==void 0?ie.noticePeriod:"",ie.stage||"",ie.status||"",se(ie.createdAt),`"${ie.skills?ie.skills.join(", "):""}"`];z.push(oe.join(","))});const O=z.join(`
`),P=new Blob([O],{type:"text/csv;charset=utf-8;"}),Z=document.createElement("a"),re=URL.createObjectURL(P);Z.setAttribute("href",re),Z.setAttribute("download",`applicants_${(i==null?void 0:i.title)||"job"}_${new Date().toISOString().split("T")[0]}.csv`),Z.style.visibility="hidden",document.body.appendChild(Z),Z.click(),document.body.removeChild(Z),_.success("Applicants exported successfully!")}catch(E){_.error("Failed to export applicants"),console.error("Export error:",E)}};return c?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:a.pathname.includes("/hr/recruitment")?"w-12 h-12 border-4 border-[#A88BFF] border-t-transparent rounded-full animate-spin":"w-12 h-12 border-4 border-primary-600 border-t-transparent rounded-full animate-spin"})}):e.jsxs("div",{className:"space-y-6",style:{backgroundColor:a.pathname.includes("/hr/recruitment")?"#1E1E2A":void 0},children:[e.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("button",{onClick:()=>{a.pathname.includes("/hr/recruitment")?s("/employee/hr/recruitment"):s("/job-desk")},className:a.pathname.includes("/hr/recruitment")?"bg-[#2A2A3A] text-white p-2 rounded-xl border border-gray-700 hover:border-[#A88BFF] transition-all":"btn-outline p-2",children:e.jsx(xt,{size:20})}),e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold text-white",children:[(i==null?void 0:i.title)||"Job"," - Applicants"]}),e.jsxs("p",{className:"text-gray-400 mt-1",children:[r.length," ",r.length===1?"applicant":"applicants"," found",w&&w.analyzed>0&&e.jsxs("span",{className:a.pathname.includes("/hr/recruitment")?"ml-2 text-[#A88BFF]":"ml-2 text-primary-500",children:["â€¢ ",w.analyzed," analyzed"]})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:F,disabled:j,className:a.pathname.includes("/hr/recruitment")?"bg-gradient-to-r from-[#A88BFF] to-[#8B6FE8] text-white px-6 py-2.5 rounded-xl font-medium hover:shadow-lg transition-all flex items-center space-x-2 disabled:opacity-50":"btn-primary flex items-center space-x-2",children:j?e.jsxs(e.Fragment,{children:[e.jsx(xr,{size:18,className:"animate-spin"}),e.jsx("span",{children:"Analyzing..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(ml,{size:18}),e.jsx("span",{children:"Analyze Candidates"})]})}),e.jsxs("button",{onClick:de,className:a.pathname.includes("/hr/recruitment")?"bg-[#2A2A3A] text-white px-6 py-2.5 rounded-xl border border-gray-700 hover:border-[#A88BFF] transition-all flex items-center space-x-2 disabled:opacity-50":"btn-outline flex items-center space-x-2",disabled:r.length===0,children:[e.jsx(Mt,{size:18}),e.jsx("span",{children:"Export"})]})]})]}),w&&w.analyzed>0&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx("div",{className:"card bg-gradient-to-br from-primary-600/20 to-primary-800/20 border-primary-600/30",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-400 text-sm",children:"Average Score"}),e.jsxs("p",{className:"text-2xl font-bold text-white mt-1",children:[w.averageScore,"%"]})]}),e.jsx(lr,{size:32,className:"text-primary-500"})]})}),e.jsx("div",{className:"card bg-gradient-to-br from-green-600/20 to-green-800/20 border-green-600/30",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-400 text-sm",children:"Excellent Fit"}),e.jsx("p",{className:"text-2xl font-bold text-white mt-1",children:w.fitDistribution.excellent})]}),e.jsx(Ks,{size:32,className:"text-green-500"})]})}),e.jsx("div",{className:"card bg-gradient-to-br from-blue-600/20 to-blue-800/20 border-blue-600/30",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-400 text-sm",children:"Good Fit"}),e.jsx("p",{className:"text-2xl font-bold text-white mt-1",children:w.fitDistribution.good})]}),e.jsx(ao,{size:32,className:"text-blue-500"})]})}),e.jsx("div",{className:"card bg-gradient-to-br from-purple-600/20 to-purple-800/20 border-purple-600/30",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-400 text-sm",children:"Top Score"}),e.jsxs("p",{className:"text-2xl font-bold text-white mt-1",children:[w.topScore,"%"]})]}),e.jsx(ml,{size:32,className:"text-purple-500"})]})})]}),e.jsx("div",{className:a.pathname.includes("/hr/recruitment")?"bg-[#2A2A3A] rounded-2xl p-6 border border-gray-800":"card",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(yt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-500",size:20}),e.jsx("input",{type:"text",placeholder:"Search by name, email, or candidate code...",value:d,onChange:E=>x(E.target.value),onKeyPress:E=>E.key==="Enter"&&T(),className:a.pathname.includes("/hr/recruitment")?"w-full bg-[#1E1E2A] text-white pl-10 pr-4 py-2.5 rounded-xl border border-gray-700 focus:border-[#A88BFF] focus:outline-none transition-colors":"input-field pl-10"})]}),e.jsx("button",{onClick:T,className:a.pathname.includes("/hr/recruitment")?"bg-gradient-to-r from-[#A88BFF] to-[#8B6FE8] text-white px-6 py-2.5 rounded-xl font-medium hover:shadow-lg transition-all md:w-auto":"btn-primary md:w-auto",children:"Search"}),e.jsxs("select",{value:h,onChange:E=>M(E.target.value),className:a.pathname.includes("/hr/recruitment")?"bg-[#1E1E2A] text-white px-4 py-2.5 rounded-xl border border-gray-700 focus:border-[#A88BFF] focus:outline-none transition-colors md:w-48":"input-field md:w-48",children:[e.jsx("option",{value:"date",children:"Sort by Date"}),e.jsx("option",{value:"ai-score",children:"Sort by AI Score"}),e.jsx("option",{value:"name",children:"Sort by Name"})]}),e.jsxs("select",{value:u,onChange:E=>m(E.target.value),className:a.pathname.includes("/hr/recruitment")?"bg-[#1E1E2A] text-white px-4 py-2.5 rounded-xl border border-gray-700 focus:border-[#A88BFF] focus:outline-none transition-colors md:w-48":"input-field md:w-48",children:[e.jsx("option",{value:"all",children:"All Stages"}),e.jsx("option",{value:"applied",children:"Applied"}),e.jsx("option",{value:"screening",children:"Screening"}),e.jsx("option",{value:"shortlisted",children:"Shortlisted"}),e.jsx("option",{value:"interview-scheduled",children:"Interview Scheduled"}),e.jsx("option",{value:"interview-completed",children:"Interview Completed"}),e.jsx("option",{value:"offer-extended",children:"Offer Extended"}),e.jsx("option",{value:"offer-accepted",children:"Offer Accepted"}),e.jsx("option",{value:"offer-rejected",children:"Offer Rejected"}),e.jsx("option",{value:"joined",children:"Joined"}),e.jsx("option",{value:"rejected",children:"Rejected"})]}),e.jsxs("select",{value:f,onChange:E=>g(E.target.value),className:a.pathname.includes("/hr/recruitment")?"bg-[#1E1E2A] text-white px-4 py-2.5 rounded-xl border border-gray-700 focus:border-[#A88BFF] focus:outline-none transition-colors md:w-48":"input-field md:w-48",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"hired",children:"Hired"}),e.jsx("option",{value:"rejected",children:"Rejected"}),e.jsx("option",{value:"withdrawn",children:"Withdrawn"})]})]})}),r.length===0?e.jsxs("div",{className:a.pathname.includes("/hr/recruitment")?"bg-[#2A2A3A] rounded-2xl p-12 border border-gray-800 text-center":"card text-center py-12",children:[e.jsx(_t,{size:48,className:"mx-auto text-gray-600 mb-4"}),e.jsx("p",{className:"text-gray-400",children:"No applicants found for this job posting"})]}):e.jsx("div",{className:"space-y-4",children:r.map(E=>{var z,O;return e.jsxs("div",{className:a.pathname.includes("/hr/recruitment")?"bg-[#2A2A3A] rounded-2xl p-6 border border-gray-800 hover:border-[#A88BFF] transition-all cursor-pointer":"card hover:border-primary-600 transition-all cursor-pointer",onClick:()=>X(E._id),children:[e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-start space-x-4 flex-1",children:[e.jsx("div",{className:a.pathname.includes("/hr/recruitment")?"w-12 h-12 bg-gradient-to-br from-[#A88BFF]/20 to-[#8B6FE8]/20 rounded-full flex items-center justify-center flex-shrink-0":"w-12 h-12 bg-primary-600/20 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx(_t,{size:24,className:a.pathname.includes("/hr/recruitment")?"text-[#A88BFF]":"text-primary-500"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[e.jsxs("h3",{className:"text-lg font-semibold text-white truncate",children:[E.firstName," ",E.lastName]}),e.jsx("span",{className:`badge ${U(E.status)}`,children:E.status}),e.jsx("span",{className:`px-2 py-1 rounded-md text-xs font-medium ${H(E.stage)}`,children:E.stage.replace(/-/g," ")})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2 text-sm",children:[e.jsxs("div",{className:"flex items-center text-gray-400",children:[e.jsx(wt,{size:14,className:"mr-2 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:E.email})]}),e.jsxs("div",{className:"flex items-center text-gray-400",children:[e.jsx(Bs,{size:14,className:"mr-2 flex-shrink-0"}),e.jsx("span",{children:E.phone})]}),E.currentLocation&&e.jsxs("div",{className:"flex items-center text-gray-400",children:[e.jsx(Ra,{size:14,className:"mr-2 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:E.currentLocation})]}),e.jsxs("div",{className:"flex items-center text-gray-400",children:[e.jsx(ot,{size:14,className:"mr-2 flex-shrink-0"}),e.jsx("span",{children:W(E.experience)})]})]})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-4 lg:gap-6 text-sm",children:[E.currentCompany&&e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500 text-xs mb-1",children:"Current Company"}),e.jsx("p",{className:"text-white font-medium",children:E.currentCompany})]}),E.currentDesignation&&e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500 text-xs mb-1",children:"Current Role"}),e.jsx("p",{className:"text-white font-medium",children:E.currentDesignation})]}),E.expectedCTC&&e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500 text-xs mb-1",children:"Expected CTC"}),e.jsxs("p",{className:"text-white font-medium flex items-center",children:[e.jsx(gt,{size:14,className:"mr-1"}),E.expectedCTC.toLocaleString()]})]}),E.noticePeriod!==void 0&&e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500 text-xs mb-1",children:"Notice Period"}),e.jsxs("p",{className:"text-white font-medium flex items-center",children:[e.jsx(Be,{size:14,className:"mr-1"}),E.noticePeriod," days"]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2 lg:flex-col lg:space-x-0 lg:space-y-2",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-gray-500 text-xs mb-1",children:"Applied On"}),e.jsxs("p",{className:"text-white text-sm font-medium flex items-center",children:[e.jsx(Oe,{size:14,className:"mr-1"}),se(E.createdAt)]})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[((z=E.resume)==null?void 0:z.url)&&e.jsxs("a",{href:E.resume.url,target:"_blank",rel:"noopener noreferrer",onClick:P=>P.stopPropagation(),className:a.pathname.includes("/hr/recruitment")?"bg-[#1E1E2A] text-white text-sm py-2 px-4 rounded-xl border border-gray-700 hover:border-[#A88BFF] transition-all flex items-center space-x-2":"btn-outline text-sm py-2 px-4 flex items-center space-x-2",children:[e.jsx(st,{size:16}),e.jsx("span",{children:"Resume"})]}),le(E)&&e.jsxs("button",{onClick:P=>D(E,P),className:a.pathname.includes("/hr/recruitment")?"bg-gradient-to-r from-[#A88BFF] to-[#8B6FE8] text-white text-sm py-2 px-4 rounded-xl font-medium hover:shadow-lg transition-all flex items-center space-x-2 whitespace-nowrap":"btn-primary text-sm py-2 px-4 flex items-center space-x-2 whitespace-nowrap",title:`Send ${E.firstName} ${E.lastName} to comprehensive onboarding process`,children:[e.jsx(Zs,{size:16}),e.jsx("span",{children:"Send to Onboarding"})]})]})]})]}),E.skills&&E.skills.length>0&&e.jsxs("div",{className:a.pathname.includes("/hr/recruitment")?"mt-4 pt-4 border-t border-gray-700":"mt-4 pt-4 border-t border-dark-800",children:[e.jsx("p",{className:"text-gray-500 text-xs mb-2",children:"Skills"}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[E.skills.slice(0,8).map((P,Z)=>e.jsx("span",{className:a.pathname.includes("/hr/recruitment")?"px-2 py-1 bg-[#1E1E2A] text-gray-300 rounded-lg text-xs":"px-2 py-1 bg-dark-800 text-gray-300 rounded text-xs",children:P},Z)),E.skills.length>8&&e.jsxs("span",{className:a.pathname.includes("/hr/recruitment")?"px-2 py-1 bg-[#1E1E2A] text-gray-400 rounded-lg text-xs":"px-2 py-1 bg-dark-800 text-gray-400 rounded text-xs",children:["+",E.skills.length-8," more"]})]})]}),((O=E.aiAnalysis)==null?void 0:O.isAnalyzed)&&e.jsxs("div",{children:[e.jsx(Ex,{analysis:E.aiAnalysis,compact:!0}),e.jsxs("button",{onClick:P=>{P.stopPropagation(),R(E._id)},className:a.pathname.includes("/hr/recruitment")?"mt-3 text-sm text-[#A88BFF] hover:text-[#8B6FE8] flex items-center space-x-1":"mt-3 text-sm text-primary-500 hover:text-primary-400 flex items-center space-x-1",children:[e.jsx(ao,{size:14}),e.jsxs("span",{children:[A[E._id]?"Hide":"View"," Detailed AI Insights"]})]}),A[E._id]&&e.jsx("div",{className:a.pathname.includes("/hr/recruitment")?"mt-4 pt-4 border-t border-gray-700":"mt-4 pt-4 border-t border-dark-800",children:e.jsx(Ex,{analysis:E.aiAnalysis,compact:!1})})]})]},E._id)})})]})},Fv=({candidateId:t,onClose:s,onSuccess:a})=>{const[r,n]=y.useState({interviewType:"Technical",round:"",scheduledDate:"",scheduledTime:"",meetingPlatform:"Google Meet",meetingLink:"",interviewer:[]}),[i,l]=y.useState([]),[c,o]=y.useState(!1);y.useEffect(()=>{d()},[]);const d=async()=>{try{const f=await J.get("/employees");l(f.data.data||[])}catch(f){console.error("Failed to fetch employees:",f)}},x=async f=>{var g,h;if(f.preventDefault(),!r.scheduledDate||!r.scheduledTime){_.error("Please fill in all required fields");return}try{o(!0),await J.post(`/candidates/${t}/interview`,r),_.success("Interview scheduled successfully"),a()}catch(p){_.error(((h=(g=p.response)==null?void 0:g.data)==null?void 0:h.message)||"Failed to schedule interview")}finally{o(!1)}},u=f=>{const{name:g,value:h}=f.target;n(p=>({...p,[g]:h}))},m=f=>{const g=Array.from(f.target.selectedOptions,h=>h.value);n(h=>({...h,interviewer:g}))};return e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-dark-900 rounded-lg border border-dark-800 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-dark-900 border-b border-dark-800 p-6 flex items-center justify-between",children:[e.jsx("h2",{className:"text-xl font-bold text-white",children:"Schedule Interview"}),e.jsx("button",{onClick:s,className:"text-gray-400 hover:text-white",children:e.jsx(Le,{size:24})})]}),e.jsxs("form",{onSubmit:x,className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Interview Type *"}),e.jsxs("select",{name:"interviewType",value:r.interviewType,onChange:u,className:"input-field",required:!0,children:[e.jsx("option",{value:"Technical",children:"Technical"}),e.jsx("option",{value:"HR",children:"HR"}),e.jsx("option",{value:"Managerial",children:"Managerial"}),e.jsx("option",{value:"Cultural Fit",children:"Cultural Fit"}),e.jsx("option",{value:"Final Round",children:"Final Round"}),e.jsx("option",{value:"Other",children:"Other"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Round Name"}),e.jsx("input",{type:"text",name:"round",value:r.round,onChange:u,placeholder:"e.g., Round 1, First Technical Interview",className:"input-field"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:[e.jsx(Oe,{size:16,className:"inline mr-2"}),"Date *"]}),e.jsx("input",{type:"date",name:"scheduledDate",value:r.scheduledDate,onChange:u,className:"input-field",required:!0})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:[e.jsx(Be,{size:16,className:"inline mr-2"}),"Time *"]}),e.jsx("input",{type:"time",name:"scheduledTime",value:r.scheduledTime,onChange:u,className:"input-field",required:!0})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:[e.jsx(f0,{size:16,className:"inline mr-2"}),"Meeting Platform"]}),e.jsxs("select",{name:"meetingPlatform",value:r.meetingPlatform,onChange:u,className:"input-field",children:[e.jsx("option",{value:"Google Meet",children:"Google Meet"}),e.jsx("option",{value:"Microsoft Teams",children:"Microsoft Teams"}),e.jsx("option",{value:"Zoom",children:"Zoom"}),e.jsx("option",{value:"Phone",children:"Phone"}),e.jsx("option",{value:"In-Person",children:"In-Person"}),e.jsx("option",{value:"Other",children:"Other"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Meeting Link"}),e.jsx("input",{type:"url",name:"meetingLink",value:r.meetingLink,onChange:u,placeholder:"https://meet.google.com/...",className:"input-field"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:[e.jsx(Ue,{size:16,className:"inline mr-2"}),"Assign Interviewer(s)"]}),e.jsx("select",{multiple:!0,value:r.interviewer,onChange:m,className:"input-field h-32",children:i.map(f=>e.jsxs("option",{value:f._id,children:[f.firstName," ",f.lastName," - ",f.designation||"N/A"]},f._id))}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Hold Ctrl/Cmd to select multiple"})]}),e.jsxs("div",{className:"flex items-center justify-end space-x-3 pt-4 border-t border-dark-800",children:[e.jsx("button",{type:"button",onClick:s,className:"btn-outline",disabled:c,children:"Cancel"}),e.jsx("button",{type:"submit",className:"btn-primary flex items-center space-x-2",disabled:c,children:c?e.jsxs(e.Fragment,{children:[e.jsx(xr,{size:18,className:"animate-spin"}),e.jsx("span",{children:"Scheduling..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(Oe,{size:18}),e.jsx("span",{children:"Schedule Interview"})]})})]})]})]})})},Tv=({candidateId:t,interview:s,onClose:a,onSuccess:r})=>{const[n,i]=y.useState({feedback:s.feedback||"",rating:s.rating||0,decision:s.decision||"pending",notes:s.notes||"",status:"completed"}),[l,c]=y.useState(!1),[o,d]=y.useState(0),x=async f=>{var g,h;if(f.preventDefault(),!n.feedback||n.rating===0){_.error("Please provide feedback and rating");return}try{c(!0),await J.put(`/candidates/${t}/interview/${s._id}/feedback`,n),_.success("Feedback submitted successfully"),r()}catch(p){_.error(((h=(g=p.response)==null?void 0:g.data)==null?void 0:h.message)||"Failed to submit feedback")}finally{c(!1)}},u=f=>{const{name:g,value:h}=f.target;i(p=>({...p,[g]:h}))},m=f=>{i(g=>({...g,rating:f}))};return e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-dark-900 rounded-lg border border-dark-800 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-dark-900 border-b border-dark-800 p-6 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-white",children:"Interview Feedback"}),e.jsxs("p",{className:"text-sm text-gray-400 mt-1",children:[s.interviewType," - ",new Date(s.scheduledDate).toLocaleDateString()]})]}),e.jsx("button",{onClick:a,className:"text-gray-400 hover:text-white",children:e.jsx(Le,{size:24})})]}),e.jsxs("form",{onSubmit:x,className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-3",children:"Rating *"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[[1,2,3,4,5].map(f=>e.jsx("button",{type:"button",onClick:()=>m(f),onMouseEnter:()=>d(f),onMouseLeave:()=>d(0),className:"focus:outline-none transition-transform hover:scale-110",children:e.jsx(Ko,{size:32,className:`${f<=(o||n.rating)?"text-yellow-500 fill-yellow-500":"text-gray-600"}`})},f)),e.jsx("span",{className:"ml-4 text-white font-semibold",children:n.rating>0?`${n.rating}/5`:"Not rated"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:[e.jsx(wn,{size:16,className:"inline mr-2"}),"Feedback Summary *"]}),e.jsx("textarea",{name:"feedback",value:n.feedback,onChange:u,rows:4,placeholder:"Provide detailed feedback about the candidate's performance...",className:"input-field resize-none",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Decision *"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[e.jsxs("button",{type:"button",onClick:()=>i(f=>({...f,decision:"selected"})),className:`p-4 rounded-lg border-2 transition-all ${n.decision==="selected"?"border-green-500 bg-green-500/20":"border-dark-800 hover:border-green-500/50"}`,children:[e.jsx(Te,{size:24,className:`mx-auto mb-2 ${n.decision==="selected"?"text-green-500":"text-gray-400"}`}),e.jsx("p",{className:`text-sm font-medium ${n.decision==="selected"?"text-green-400":"text-gray-400"}`,children:"Selected"})]}),e.jsxs("button",{type:"button",onClick:()=>i(f=>({...f,decision:"rejected"})),className:`p-4 rounded-lg border-2 transition-all ${n.decision==="rejected"?"border-red-500 bg-red-500/20":"border-dark-800 hover:border-red-500/50"}`,children:[e.jsx(Qe,{size:24,className:`mx-auto mb-2 ${n.decision==="rejected"?"text-red-500":"text-gray-400"}`}),e.jsx("p",{className:`text-sm font-medium ${n.decision==="rejected"?"text-red-400":"text-gray-400"}`,children:"Rejected"})]}),e.jsxs("button",{type:"button",onClick:()=>i(f=>({...f,decision:"on-hold"})),className:`p-4 rounded-lg border-2 transition-all ${n.decision==="on-hold"?"border-yellow-500 bg-yellow-500/20":"border-dark-800 hover:border-yellow-500/50"}`,children:[e.jsx(Be,{size:24,className:`mx-auto mb-2 ${n.decision==="on-hold"?"text-yellow-500":"text-gray-400"}`}),e.jsx("p",{className:`text-sm font-medium ${n.decision==="on-hold"?"text-yellow-400":"text-gray-400"}`,children:"On Hold"})]}),e.jsxs("button",{type:"button",onClick:()=>i(f=>({...f,decision:"pending"})),className:`p-4 rounded-lg border-2 transition-all ${n.decision==="pending"?"border-blue-500 bg-blue-500/20":"border-dark-800 hover:border-blue-500/50"}`,children:[e.jsx(Be,{size:24,className:`mx-auto mb-2 ${n.decision==="pending"?"text-blue-500":"text-gray-400"}`}),e.jsx("p",{className:`text-sm font-medium ${n.decision==="pending"?"text-blue-400":"text-gray-400"}`,children:"Pending"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Additional Notes"}),e.jsx("textarea",{name:"notes",value:n.notes,onChange:u,rows:3,placeholder:"Any additional observations or comments...",className:"input-field resize-none"})]}),e.jsxs("div",{className:"flex items-center justify-end space-x-3 pt-4 border-t border-dark-800",children:[e.jsx("button",{type:"button",onClick:a,className:"btn-outline",disabled:l,children:"Cancel"}),e.jsx("button",{type:"submit",className:"btn-primary flex items-center space-x-2",disabled:l,children:l?e.jsxs(e.Fragment,{children:[e.jsx(xr,{size:18,className:"animate-spin"}),e.jsx("span",{children:"Submitting..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(Te,{size:18}),e.jsx("span",{children:"Submit Feedback"})]})})]})]})]})})},Dv=({candidateId:t,hrCall:s,onClose:a,onSuccess:r})=>{const[n,i]=y.useState({status:(s==null?void 0:s.status)||"pending",scheduledDate:s!=null&&s.scheduledDate?new Date(s.scheduledDate).toISOString().split("T")[0]:"",completedDate:s!=null&&s.completedDate?new Date(s.completedDate).toISOString().split("T")[0]:"",summary:(s==null?void 0:s.summary)||"",decision:(s==null?void 0:s.decision)||"pending"}),[l,c]=y.useState(!1),o=async x=>{var u,m;if(x.preventDefault(),n.status==="completed"&&!n.summary){_.error("Please provide a summary for completed calls");return}try{c(!0);const f={...n};n.status==="completed"&&!n.completedDate&&(f.completedDate=new Date().toISOString().split("T")[0]),await J.put(`/candidates/${t}/hr-call`,f),_.success("HR call updated successfully"),r()}catch(f){_.error(((m=(u=f.response)==null?void 0:u.data)==null?void 0:m.message)||"Failed to update HR call")}finally{c(!1)}},d=x=>{const{name:u,value:m}=x.target;i(f=>({...f,[u]:m}))};return e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-dark-900 rounded-lg border border-dark-800 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-dark-900 border-b border-dark-800 p-6 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-white",children:"HR Call / Final Discussion"}),e.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Manage final HR discussion with candidate"})]}),e.jsx("button",{onClick:a,className:"text-gray-400 hover:text-white",children:e.jsx(Le,{size:24})})]}),e.jsxs("form",{onSubmit:o,className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-3",children:"Call Status *"}),e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[e.jsxs("button",{type:"button",onClick:()=>i(x=>({...x,status:"pending"})),className:`p-4 rounded-lg border-2 transition-all ${n.status==="pending"?"border-gray-500 bg-gray-500/20":"border-dark-800 hover:border-gray-500/50"}`,children:[e.jsx(Be,{size:24,className:`mx-auto mb-2 ${n.status==="pending"?"text-gray-400":"text-gray-600"}`}),e.jsx("p",{className:`text-sm font-medium ${n.status==="pending"?"text-gray-300":"text-gray-500"}`,children:"Pending"})]}),e.jsxs("button",{type:"button",onClick:()=>i(x=>({...x,status:"scheduled"})),className:`p-4 rounded-lg border-2 transition-all ${n.status==="scheduled"?"border-blue-500 bg-blue-500/20":"border-dark-800 hover:border-blue-500/50"}`,children:[e.jsx(Oe,{size:24,className:`mx-auto mb-2 ${n.status==="scheduled"?"text-blue-500":"text-gray-400"}`}),e.jsx("p",{className:`text-sm font-medium ${n.status==="scheduled"?"text-blue-400":"text-gray-400"}`,children:"Scheduled"})]}),e.jsxs("button",{type:"button",onClick:()=>i(x=>({...x,status:"completed"})),className:`p-4 rounded-lg border-2 transition-all ${n.status==="completed"?"border-green-500 bg-green-500/20":"border-dark-800 hover:border-green-500/50"}`,children:[e.jsx(Te,{size:24,className:`mx-auto mb-2 ${n.status==="completed"?"text-green-500":"text-gray-400"}`}),e.jsx("p",{className:`text-sm font-medium ${n.status==="completed"?"text-green-400":"text-gray-400"}`,children:"Completed"})]})]})]}),n.status==="scheduled"&&e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:[e.jsx(Oe,{size:16,className:"inline mr-2"}),"Scheduled Date"]}),e.jsx("input",{type:"date",name:"scheduledDate",value:n.scheduledDate,onChange:d,className:"input-field"})]}),n.status==="completed"&&e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:[e.jsx(Oe,{size:16,className:"inline mr-2"}),"Completed Date"]}),e.jsx("input",{type:"date",name:"completedDate",value:n.completedDate,onChange:d,className:"input-field"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:[e.jsx(Bs,{size:16,className:"inline mr-2"}),"Call Summary ",n.status==="completed"&&"*"]}),e.jsx("textarea",{name:"summary",value:n.summary,onChange:d,rows:4,placeholder:"Provide a summary of the HR discussion...",className:"input-field resize-none",required:n.status==="completed"})]}),n.status==="completed"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-3",children:"Final Decision *"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[e.jsxs("button",{type:"button",onClick:()=>i(x=>({...x,decision:"move-to-onboarding"})),className:`p-4 rounded-lg border-2 transition-all ${n.decision==="move-to-onboarding"?"border-green-500 bg-green-500/20":"border-dark-800 hover:border-green-500/50"}`,children:[e.jsx(Zs,{size:24,className:`mx-auto mb-2 ${n.decision==="move-to-onboarding"?"text-green-500":"text-gray-400"}`}),e.jsx("p",{className:`text-sm font-medium ${n.decision==="move-to-onboarding"?"text-green-400":"text-gray-400"}`,children:"Onboarding"})]}),e.jsxs("button",{type:"button",onClick:()=>i(x=>({...x,decision:"reject"})),className:`p-4 rounded-lg border-2 transition-all ${n.decision==="reject"?"border-red-500 bg-red-500/20":"border-dark-800 hover:border-red-500/50"}`,children:[e.jsx(Qe,{size:24,className:`mx-auto mb-2 ${n.decision==="reject"?"text-red-500":"text-gray-400"}`}),e.jsx("p",{className:`text-sm font-medium ${n.decision==="reject"?"text-red-400":"text-gray-400"}`,children:"Reject"})]}),e.jsxs("button",{type:"button",onClick:()=>i(x=>({...x,decision:"on-hold"})),className:`p-4 rounded-lg border-2 transition-all ${n.decision==="on-hold"?"border-yellow-500 bg-yellow-500/20":"border-dark-800 hover:border-yellow-500/50"}`,children:[e.jsx(Be,{size:24,className:`mx-auto mb-2 ${n.decision==="on-hold"?"text-yellow-500":"text-gray-400"}`}),e.jsx("p",{className:`text-sm font-medium ${n.decision==="on-hold"?"text-yellow-400":"text-gray-400"}`,children:"On Hold"})]}),e.jsxs("button",{type:"button",onClick:()=>i(x=>({...x,decision:"pending"})),className:`p-4 rounded-lg border-2 transition-all ${n.decision==="pending"?"border-blue-500 bg-blue-500/20":"border-dark-800 hover:border-blue-500/50"}`,children:[e.jsx(Be,{size:24,className:`mx-auto mb-2 ${n.decision==="pending"?"text-blue-500":"text-gray-400"}`}),e.jsx("p",{className:`text-sm font-medium ${n.decision==="pending"?"text-blue-400":"text-gray-400"}`,children:"Pending"})]})]})]}),n.decision==="move-to-onboarding"&&e.jsx("div",{className:"bg-green-500/10 border border-green-500/30 rounded-lg p-4",children:e.jsx("p",{className:"text-sm text-green-400",children:"âœ“ Candidate will be moved to offer-accepted stage and can be moved to onboarding"})}),n.decision==="reject"&&e.jsx("div",{className:"bg-red-500/10 border border-red-500/30 rounded-lg p-4",children:e.jsx("p",{className:"text-sm text-red-400",children:"âš  Candidate will be marked as rejected"})}),e.jsxs("div",{className:"flex items-center justify-end space-x-3 pt-4 border-t border-dark-800",children:[e.jsx("button",{type:"button",onClick:a,className:"btn-outline",disabled:l,children:"Cancel"}),e.jsx("button",{type:"submit",className:"btn-primary flex items-center space-x-2",disabled:l,children:l?e.jsxs(e.Fragment,{children:[e.jsx(xr,{size:18,className:"animate-spin"}),e.jsx("span",{children:"Saving..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(Te,{size:18}),e.jsx("span",{children:"Save HR Call"})]})})]})]})]})})},Fx=()=>{var b,A,N,C,k,S,F,R,T,M,H,U,W,se,X,D,le,de,E,z,O,P,Z,re,ie,oe,ue,Ne,I,ce,L,V,te,ne,xe,he,Se,G;const{candidateId:t}=Ga(),s=Je(),[a,r]=y.useState(null),[n,i]=y.useState([]),[l,c]=y.useState(!0),[o,d]=y.useState(!1),[x,u]=y.useState(!1),[m,f]=y.useState(!1),[g,h]=y.useState(null),[p,j]=y.useState(!1);y.useEffect(()=>{v()},[t]);const v=async()=>{try{c(!0);const[Q,me]=await Promise.all([J.get(`/candidates/${t}`),J.get(`/candidates/${t}/timeline`)]);r(Q.data.data);const je=me.data.data;i({timeline:je.timeline||[],interviews:je.interviews||[],notifications:je.notifications||{},hrCall:je.hrCall||{},stage:je.stage,status:je.status})}catch(Q){_.error("Failed to load candidate data"),console.error(Q)}finally{c(!1)}},w=async(Q,me="")=>{var je,Ae;try{j(!0),await J.post(`/candidates/${t}/notification`,{type:Q,notes:me}),_.success("Notification sent successfully"),v()}catch(we){_.error(((Ae=(je=we.response)==null?void 0:je.data)==null?void 0:Ae.message)||"Failed to send notification")}finally{j(!1)}};return l?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(xr,{className:"w-12 h-12 text-primary-600 animate-spin"})}):a?e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("button",{onClick:()=>s(-1),className:"btn-outline p-2",children:e.jsx(xt,{size:20})}),e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold text-white",children:[a.firstName," ",a.lastName]}),e.jsx("p",{className:"text-gray-400 mt-1",children:"Hiring Journey Timeline"})]})]})}),e.jsx("div",{className:"card",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500 text-sm",children:"Email"}),e.jsx("p",{className:"text-white font-medium",children:a.email})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500 text-sm",children:"Phone"}),e.jsx("p",{className:"text-white font-medium",children:a.phone})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500 text-sm",children:"Applied For"}),e.jsx("p",{className:"text-white font-medium",children:((b=a.appliedFor)==null?void 0:b.title)||"N/A"})]})]})}),e.jsxs("div",{className:"card",children:[e.jsx("h2",{className:"text-xl font-bold text-white mb-6",children:"Hiring Process"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute left-6 top-0 bottom-0 w-0.5 bg-dark-800"}),e.jsxs("div",{className:"space-y-8",children:[e.jsx(zi,{icon:wt,title:"Interview Notification",color:"bg-blue-500",completed:((N=(A=n.notifications)==null?void 0:A.interviewEmail)==null?void 0:N.sent)||((k=(C=n.notifications)==null?void 0:C.interviewCall)==null?void 0:k.completed),children:e.jsxs("div",{className:"space-y-3",children:[!((F=(S=n.notifications)==null?void 0:S.interviewEmail)!=null&&F.sent)&&!((T=(R=n.notifications)==null?void 0:R.interviewCall)!=null&&T.completed)&&e.jsx("div",{className:"bg-blue-500/10 border border-blue-500/30 rounded-lg p-3 mb-3",children:e.jsxs("p",{className:"text-sm text-blue-400 flex items-center",children:[e.jsx(mt,{size:16,className:"mr-2"}),"Start by sending an email or marking the call as done to proceed with interview scheduling"]})}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("button",{onClick:()=>w("interviewEmail"),disabled:p||((H=(M=n.notifications)==null?void 0:M.interviewEmail)==null?void 0:H.sent),className:`btn-sm ${(W=(U=n.notifications)==null?void 0:U.interviewEmail)!=null&&W.sent?"btn-success":"btn-primary"}`,children:[e.jsx(wt,{size:16,className:"mr-2"}),(X=(se=n.notifications)==null?void 0:se.interviewEmail)!=null&&X.sent?"Email Sent":"Send Email"]}),e.jsxs("button",{onClick:()=>{const Q=prompt("Add call notes:");Q!==null&&w("interviewCall",Q)},disabled:p||((le=(D=n.notifications)==null?void 0:D.interviewCall)==null?void 0:le.completed),className:`btn-sm ${(E=(de=n.notifications)==null?void 0:de.interviewCall)!=null&&E.completed?"btn-success":"btn-outline"}`,children:[e.jsx(Bs,{size:16,className:"mr-2"}),(O=(z=n.notifications)==null?void 0:z.interviewCall)!=null&&O.completed?"Call Done":"Mark Call Done"]})]}),((Z=(P=n.notifications)==null?void 0:P.interviewEmail)==null?void 0:Z.sent)&&n.notifications.interviewEmail.sentAt&&e.jsxs("p",{className:"text-sm text-gray-400",children:["Email sent on ",new Date(n.notifications.interviewEmail.sentAt).toLocaleString()]}),((ie=(re=n.notifications)==null?void 0:re.interviewCall)==null?void 0:ie.completed)&&n.notifications.interviewCall.completedAt&&e.jsxs("p",{className:"text-sm text-gray-400",children:["Call completed on ",new Date(n.notifications.interviewCall.completedAt).toLocaleString(),n.notifications.interviewCall.notes&&` - ${n.notifications.interviewCall.notes}`]})]})}),e.jsx(zi,{icon:Oe,title:"Interview Scheduling",color:"bg-indigo-500",completed:((oe=n.interviews)==null?void 0:oe.length)>0,children:e.jsxs("div",{className:"space-y-3",children:[!((Ne=(ue=n.notifications)==null?void 0:ue.interviewEmail)!=null&&Ne.sent)&&e.jsx("div",{className:"bg-yellow-500/10 border border-yellow-500/30 rounded-lg p-3 mb-3",children:e.jsxs("p",{className:"text-sm text-yellow-400 flex items-center",children:[e.jsx(mt,{size:16,className:"mr-2"}),"Please send interview notification email before scheduling interviews"]})}),e.jsxs("button",{onClick:()=>d(!0),disabled:!((ce=(I=n.notifications)==null?void 0:I.interviewEmail)!=null&&ce.sent),className:`btn-sm ${(V=(L=n.notifications)==null?void 0:L.interviewEmail)!=null&&V.sent?"btn-primary":"btn-outline opacity-50 cursor-not-allowed"}`,children:[e.jsx(Oe,{size:16,className:"mr-2"}),"Schedule Interview"]}),(te=n.interviews)==null?void 0:te.map((Q,me)=>e.jsx("div",{className:"card bg-dark-800/50 p-4",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx("span",{className:"font-semibold text-white",children:Q.interviewType}),e.jsx("span",{className:`badge ${Q.status==="completed"?"badge-success":Q.status==="scheduled"?"badge-info":"badge-warning"}`,children:Q.status})]}),e.jsxs("div",{className:"text-sm text-gray-400 space-y-1",children:[e.jsxs("p",{children:[e.jsx(Oe,{size:14,className:"inline mr-2"}),new Date(Q.scheduledDate).toLocaleDateString()," at ",Q.scheduledTime]}),e.jsxs("p",{children:[e.jsx(f0,{size:14,className:"inline mr-2"}),Q.meetingPlatform]}),Q.meetingLink&&e.jsx("a",{href:Q.meetingLink,target:"_blank",rel:"noopener noreferrer",className:"text-primary-500 hover:underline",children:"Join Meeting"})]}),Q.feedback&&e.jsxs("div",{className:"mt-2 p-2 bg-dark-700 rounded",children:[e.jsx("p",{className:"text-sm text-gray-300",children:Q.feedback}),Q.rating&&e.jsx("div",{className:"flex items-center mt-1",children:[...Array(5)].map((je,Ae)=>e.jsx(Ko,{size:14,className:Ae<Q.rating?"text-yellow-500 fill-yellow-500":"text-gray-600"},Ae))})]})]}),(Q.status==="scheduled"||Q.status==="completed"&&!Q.feedback)&&e.jsx("button",{onClick:()=>{h(Q),u(!0)},className:`btn-sm ${Q.status==="completed"&&!Q.feedback?"btn-primary animate-pulse":"btn-outline"}`,children:Q.status==="completed"&&!Q.feedback?e.jsxs(e.Fragment,{children:[e.jsx(mt,{size:14,className:"mr-1"}),"Add Feedback (Required)"]}):"Add Feedback"})]})},Q._id))]})}),e.jsx(zi,{icon:Bs,title:"HR Call / Final Discussion",color:"bg-purple-500",completed:((ne=n.hrCall)==null?void 0:ne.status)==="completed",children:e.jsxs("div",{className:"space-y-3",children:[(()=>{var me;return!((me=n.interviews)==null?void 0:me.some(je=>je.status==="completed"&&je.feedback&&je.rating))&&e.jsx("div",{className:"bg-yellow-500/10 border border-yellow-500/30 rounded-lg p-3 mb-3",children:e.jsxs("p",{className:"text-sm text-yellow-400 flex items-center",children:[e.jsx(mt,{size:16,className:"mr-2"}),"Please complete at least one interview and submit feedback before conducting HR call"]})})})(),e.jsxs("button",{onClick:()=>f(!0),disabled:!((xe=n.interviews)!=null&&xe.some(Q=>Q.status==="completed"&&Q.feedback&&Q.rating)),className:`btn-sm ${(he=n.interviews)!=null&&he.some(Q=>Q.status==="completed"&&Q.feedback&&Q.rating)?"btn-primary":"btn-outline opacity-50 cursor-not-allowed"}`,children:[e.jsx(Bs,{size:16,className:"mr-2"}),((Se=n.hrCall)==null?void 0:Se.status)==="completed"?"Update HR Call":"Conduct HR Call"]}),n.hrCall&&n.hrCall.status!=="pending"&&e.jsxs("div",{className:"card bg-dark-800/50 p-4",children:[e.jsxs("p",{className:"text-sm text-gray-400",children:["Status: ",e.jsx("span",{className:"text-white capitalize",children:n.hrCall.status})]}),n.hrCall.summary&&e.jsx("p",{className:"text-sm text-gray-300 mt-2",children:n.hrCall.summary}),n.hrCall.decision&&n.hrCall.decision!=="pending"&&e.jsxs("p",{className:"text-sm mt-2",children:["Decision: ",e.jsx("span",{className:`font-semibold ${n.hrCall.decision==="move-to-onboarding"?"text-green-400":n.hrCall.decision==="reject"?"text-red-400":"text-yellow-400"}`,children:n.hrCall.decision.replace(/-/g," ").toUpperCase()})]})]})]})}),e.jsxs(zi,{icon:a.status==="rejected"?Qe:Te,title:a.status==="rejected"?"Rejected":"Onboarding",color:a.status==="rejected"?"bg-red-500":"bg-green-500",completed:a.stage==="joined"||a.status==="rejected",children:[a.stage==="joined"&&e.jsx("p",{className:"text-green-400",children:"Candidate has been moved to onboarding"}),a.status==="rejected"&&e.jsx("p",{className:"text-red-400",children:"Candidate was rejected"})]})]})]})]}),e.jsxs("div",{className:"card",children:[e.jsx("h2",{className:"text-xl font-bold text-white mb-6",children:"Activity Log"}),e.jsxs("div",{className:"space-y-4",children:[(G=n.timeline)==null?void 0:G.map((Q,me)=>e.jsxs("div",{className:"flex items-start space-x-4 pb-4 border-b border-dark-800 last:border-0",children:[e.jsx("div",{className:"w-2 h-2 bg-primary-500 rounded-full mt-2"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-semibold text-white",children:Q.action}),e.jsx("p",{className:"text-sm text-gray-400",children:Q.description}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[new Date(Q.timestamp).toLocaleString(),Q.performedBy&&` â€¢ by ${Q.performedBy.firstName} ${Q.performedBy.lastName}`]})]})]},me)),(!n.timeline||n.timeline.length===0)&&e.jsx("p",{className:"text-gray-400 text-center py-4",children:"No activity recorded yet"})]})]}),o&&e.jsx(Fv,{candidateId:t,onClose:()=>d(!1),onSuccess:()=>{d(!1),v()}}),x&&g&&e.jsx(Tv,{candidateId:t,interview:g,onClose:()=>{u(!1),h(null)},onSuccess:()=>{u(!1),h(null),v()}}),m&&e.jsx(Dv,{candidateId:t,hrCall:n.hrCall,onClose:()=>f(!1),onSuccess:()=>{f(!1),v()}})]}):e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-gray-400",children:"Candidate not found"})})},zi=({icon:t,title:s,color:a,completed:r,children:n})=>e.jsxs("div",{className:"relative flex items-start space-x-4",children:[e.jsx("div",{className:`relative z-10 flex items-center justify-center w-12 h-12 rounded-full ${a} ${!r&&"opacity-50"}`,children:e.jsx(t,{size:24,className:"text-white"})}),e.jsxs("div",{className:"flex-1 pb-8",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-3",children:s}),n]})]}),sh=()=>{const[t,s]=y.useState([]),[a,r]=y.useState(!0),[n,i]=y.useState(""),[l,c]=y.useState("all");y.useEffect(()=>{o()},[]);const o=async()=>{try{const m=await J.get("/employees");s(m.data.data)}catch{_.error("Failed to load employees")}finally{r(!1)}},d=async m=>{if(window.confirm("Are you sure you want to delete this employee?"))try{await J.delete(`/employees/${m}`),_.success("Employee deleted successfully"),o()}catch{_.error("Failed to delete employee")}},x=t.filter(m=>{const f=m.firstName.toLowerCase().includes(n.toLowerCase())||m.lastName.toLowerCase().includes(n.toLowerCase())||m.email.toLowerCase().includes(n.toLowerCase())||m.employeeCode.toLowerCase().includes(n.toLowerCase()),g=l==="all"||m.status===l;return f&&g}),u=m=>({active:"badge-success",inactive:"badge-default","on-leave":"badge-warning",terminated:"badge-danger"})[m]||"badge-default";return a?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"w-12 h-12 border-4 border-primary-600 border-t-transparent rounded-full animate-spin"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-white",children:"Employees"}),e.jsx("p",{className:"text-gray-400 mt-1",children:"Manage your workforce"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs(ns,{to:"/employees/bulk-upload",className:"btn-outline flex items-center space-x-2",children:[e.jsx(js,{size:20}),e.jsx("span",{children:"Bulk Upload"})]}),e.jsxs(ns,{to:"/employees/add",className:"btn-primary flex items-center space-x-2",children:[e.jsx(qe,{size:20}),e.jsx("span",{children:"Add Employee"})]})]})]}),e.jsx("div",{className:"card",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(yt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-500",size:20}),e.jsx("input",{type:"text",placeholder:"Search employees...",value:n,onChange:m=>i(m.target.value),className:"input-field pl-10"})]}),e.jsxs("select",{value:l,onChange:m=>c(m.target.value),className:"input-field md:w-48",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"inactive",children:"Inactive"}),e.jsx("option",{value:"on-leave",children:"On Leave"}),e.jsx("option",{value:"terminated",children:"Terminated"})]})]})}),e.jsx("div",{className:"card p-0",children:e.jsx("div",{className:"table-container",children:e.jsxs("table",{className:"table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"min-w-[200px]",children:"Employee"}),e.jsx("th",{className:"min-w-[120px]",children:"Employee Code"}),e.jsx("th",{className:"min-w-[120px]",children:"Department"}),e.jsx("th",{className:"min-w-[120px]",children:"Designation"}),e.jsx("th",{className:"min-w-[200px]",children:"Email"}),e.jsx("th",{className:"min-w-[120px]",children:"Phone"}),e.jsx("th",{className:"min-w-[100px]",children:"Status"}),e.jsx("th",{className:"min-w-[120px]",children:"Actions"})]})}),e.jsx("tbody",{children:x.map(m=>{var f;return e.jsxs("tr",{children:[e.jsx("td",{children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-primary-600 rounded-full flex items-center justify-center",children:e.jsxs("span",{className:"text-white font-medium",children:[m.firstName[0],m.lastName[0]]})}),e.jsx("div",{children:e.jsxs("p",{className:"font-medium text-white",children:[m.firstName," ",m.lastName]})})]})}),e.jsx("td",{children:m.employeeCode}),e.jsx("td",{children:((f=m.department)==null?void 0:f.name)||"N/A"}),e.jsx("td",{children:m.designation}),e.jsx("td",{children:m.email}),e.jsx("td",{children:m.phone}),e.jsx("td",{children:e.jsx("span",{className:`badge ${u(m.status)}`,children:m.status})}),e.jsx("td",{children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ns,{to:`/employees/${m._id}`,className:"p-2 text-blue-400 hover:bg-dark-800 rounded",children:e.jsx(Ht,{size:16})}),e.jsx(ns,{to:`/employees/${m._id}/edit`,className:"p-2 text-yellow-400 hover:bg-dark-800 rounded",children:e.jsx($a,{size:16})}),e.jsx("button",{onClick:()=>d(m._id),className:"p-2 text-red-400 hover:bg-dark-800 rounded",children:e.jsx(kt,{size:16})})]})})]},m._id)})})]})})}),x.length===0&&e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-gray-400",children:"No employees found"})})]})},Rv=()=>{const t=Je(),[s,a]=y.useState([]),[r,n]=y.useState(!1),[i,l]=y.useState({employeeCode:"",firstName:"",lastName:"",email:"",phone:"",dateOfBirth:"",gender:"male",bloodGroup:"",maritalStatus:"single",alternatePhone:"",address:{street:"",city:"",state:"",zipCode:"",country:""},department:"",designation:"",joiningDate:"",employmentType:"full-time",status:"active",salary:{basic:"",hra:"",allowances:"",deductions:"",total:""},bankDetails:{accountNumber:"",bankName:"",ifscCode:"",accountHolderName:"",branch:""},emergencyContact:{name:"",relationship:"",phone:""}});y.useEffect(()=>{c()},[]);const c=async()=>{try{const u=await J.get("/departments");a(u.data.data)}catch{_.error("Failed to load departments")}},o=(u,m,f,g)=>{const h=parseFloat(u)||0,p=parseFloat(m)||0,j=parseFloat(f)||0,v=parseFloat(g)||0;return h+p+j-v},d=u=>{const{name:m,value:f}=u.target;if(m.includes(".")){const[g,h]=m.split(".");l(g==="salary"?p=>{const j={...p.salary,[h]:f},v=o(j.basic,j.hra,j.allowances,j.deductions);return{...p,salary:{...j,total:v.toString()}}}:p=>({...p,[g]:{...p[g],[h]:f}}))}else l(g=>({...g,[m]:f}))},x=async u=>{var f,g,h,p,j,v;if(u.preventDefault(),n(!0),!i.firstName||!i.lastName||!i.email||!i.phone||!i.department||!i.designation||!i.joiningDate){_.error("Please fill in all required fields"),n(!1);return}const m={...i,...i.employeeCode&&i.employeeCode.trim()?{employeeCode:i.employeeCode}:{},salary:{basic:parseFloat(i.salary.basic)||0,hra:parseFloat(i.salary.hra)||0,allowances:parseFloat(i.salary.allowances)||0,deductions:parseFloat(i.salary.deductions)||0,total:parseFloat(i.salary.total)||0}};try{const w=await J.post("/employees",m);_.success("Employee added successfully"),console.log("Employee created:",w.data),t("/employees")}catch(w){console.error("Employee creation error details:",w),(g=(f=w.response)==null?void 0:f.data)!=null&&g.message?_.error(w.response.data.message):((h=w.response)==null?void 0:h.status)===400?_.error("Please check all required fields and try again"):((p=w.response)==null?void 0:p.status)===401?_.error("You are not authorized to add employees"):((j=w.response)==null?void 0:j.status)===403?_.error("Access denied. Admin or HR permissions required"):((v=w.response)==null?void 0:v.status)===500?_.error("Server error. Please check if MongoDB is running and properly connected."):_.error("Failed to add employee. Please try again."),console.error("Employee creation error:",w)}finally{n(!1)}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("button",{onClick:()=>t("/employees"),className:"p-2 hover:bg-dark-800 rounded-lg",children:e.jsx(xt,{size:20,className:"text-gray-400"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-white",children:"Add New Employee"}),e.jsx("p",{className:"text-gray-400 mt-1",children:"Fill in the employee details"})]})]}),e.jsx("div",{className:"flex items-center space-x-3",children:e.jsxs("button",{onClick:()=>t("/employees/bulk-upload"),className:"btn-outline flex items-center space-x-2",title:"Bulk Upload Employees",children:[e.jsx(js,{size:20}),e.jsx("span",{children:"Bulk Upload"})]})})]}),e.jsxs("form",{onSubmit:x,className:"space-y-6",children:[e.jsxs("div",{className:"card",children:[e.jsx("h2",{className:"text-lg font-semibold text-white mb-4",children:"Personal Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Employee Code *"}),e.jsx("input",{type:"text",name:"employeeCode",value:i.employeeCode,onChange:d,className:"input-field",placeholder:"Leave blank for auto-generation"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"First Name *"}),e.jsx("input",{type:"text",name:"firstName",value:i.firstName,onChange:d,className:"input-field",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Last Name *"}),e.jsx("input",{type:"text",name:"lastName",value:i.lastName,onChange:d,className:"input-field",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Email *"}),e.jsx("input",{type:"email",name:"email",value:i.email,onChange:d,className:"input-field",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Phone *"}),e.jsx("input",{type:"tel",name:"phone",value:i.phone,onChange:d,className:"input-field",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Date of Birth (Optional)"}),e.jsx("input",{type:"date",name:"dateOfBirth",value:i.dateOfBirth,onChange:d,className:"input-field"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Gender (Optional)"}),e.jsxs("select",{name:"gender",value:i.gender,onChange:d,className:"input-field",children:[e.jsx("option",{value:"male",children:"Male"}),e.jsx("option",{value:"female",children:"Female"}),e.jsx("option",{value:"other",children:"Other"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Blood Group (Optional)"}),e.jsxs("select",{name:"bloodGroup",value:i.bloodGroup,onChange:d,className:"input-field",children:[e.jsx("option",{value:"",children:"Select Blood Group"}),e.jsx("option",{value:"A+",children:"A+"}),e.jsx("option",{value:"A-",children:"A-"}),e.jsx("option",{value:"B+",children:"B+"}),e.jsx("option",{value:"B-",children:"B-"}),e.jsx("option",{value:"AB+",children:"AB+"}),e.jsx("option",{value:"AB-",children:"AB-"}),e.jsx("option",{value:"O+",children:"O+"}),e.jsx("option",{value:"O-",children:"O-"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Marital Status (Optional)"}),e.jsxs("select",{name:"maritalStatus",value:i.maritalStatus,onChange:d,className:"input-field",children:[e.jsx("option",{value:"single",children:"Single"}),e.jsx("option",{value:"married",children:"Married"}),e.jsx("option",{value:"divorced",children:"Divorced"}),e.jsx("option",{value:"widowed",children:"Widowed"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Alternate Phone (Optional)"}),e.jsx("input",{type:"tel",name:"alternatePhone",value:i.alternatePhone,onChange:d,className:"input-field"})]})]})]}),e.jsxs("div",{className:"card",children:[e.jsx("h2",{className:"text-lg font-semibold text-white mb-4",children:"Employment Details"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Department *"}),e.jsxs("select",{name:"department",value:i.department,onChange:d,className:"input-field",required:!0,children:[e.jsx("option",{value:"",children:"Select Department"}),s.map(u=>e.jsx("option",{value:u._id,children:u.name},u._id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Designation *"}),e.jsx("input",{type:"text",name:"designation",value:i.designation,onChange:d,className:"input-field",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Joining Date *"}),e.jsx("input",{type:"date",name:"joiningDate",value:i.joiningDate,onChange:d,className:"input-field",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Employment Type (Optional)"}),e.jsxs("select",{name:"employmentType",value:i.employmentType,onChange:d,className:"input-field",children:[e.jsx("option",{value:"full-time",children:"Full Time"}),e.jsx("option",{value:"part-time",children:"Part Time"}),e.jsx("option",{value:"contract",children:"Contract"}),e.jsx("option",{value:"intern",children:"Intern"})]})]})]})]}),e.jsxs("div",{className:"card",children:[e.jsx("h2",{className:"text-lg font-semibold text-white mb-4",children:"Salary Details"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Basic Salary"}),e.jsx("input",{type:"number",name:"salary.basic",value:i.salary.basic,onChange:d,className:"input-field"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"HRA"}),e.jsx("input",{type:"number",name:"salary.hra",value:i.salary.hra,onChange:d,className:"input-field"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Allowances"}),e.jsx("input",{type:"number",name:"salary.allowances",value:i.salary.allowances,onChange:d,className:"input-field"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Deductions"}),e.jsx("input",{type:"number",name:"salary.deductions",value:i.salary.deductions,onChange:d,className:"input-field"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Total Salary (Auto-calculated)"}),e.jsx("input",{type:"number",name:"salary.total",value:i.salary.total,className:"input-field bg-gray-700 cursor-not-allowed",readOnly:!0})]})]})]}),e.jsxs("div",{className:"card",children:[e.jsx("h2",{className:"text-lg font-semibold text-white mb-4",children:"Bank Details"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Account Number"}),e.jsx("input",{type:"text",name:"bankDetails.accountNumber",value:i.bankDetails.accountNumber,onChange:d,className:"input-field"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Bank Name"}),e.jsx("input",{type:"text",name:"bankDetails.bankName",value:i.bankDetails.bankName,onChange:d,className:"input-field"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"IFSC Code"}),e.jsx("input",{type:"text",name:"bankDetails.ifscCode",value:i.bankDetails.ifscCode,onChange:d,className:"input-field"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Account Holder Name"}),e.jsx("input",{type:"text",name:"bankDetails.accountHolderName",value:i.bankDetails.accountHolderName,onChange:d,className:"input-field"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Branch"}),e.jsx("input",{type:"text",name:"bankDetails.branch",value:i.bankDetails.branch,onChange:d,className:"input-field"})]})]})]}),e.jsxs("div",{className:"card",children:[e.jsx("h2",{className:"text-lg font-semibold text-white mb-4",children:"Emergency Contact"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Name"}),e.jsx("input",{type:"text",name:"emergencyContact.name",value:i.emergencyContact.name,onChange:d,className:"input-field"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Relationship"}),e.jsx("input",{type:"text",name:"emergencyContact.relationship",value:i.emergencyContact.relationship,onChange:d,className:"input-field"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Phone"}),e.jsx("input",{type:"tel",name:"emergencyContact.phone",value:i.emergencyContact.phone,onChange:d,className:"input-field"})]})]})]}),e.jsxs("div",{className:"flex items-center justify-end space-x-4",children:[e.jsx("button",{type:"button",onClick:()=>t("/employees"),className:"btn-outline",children:"Cancel"}),e.jsxs("button",{type:"submit",disabled:r,className:"btn-primary flex items-center space-x-2",children:[e.jsx(Rs,{size:20}),e.jsx("span",{children:r?"Saving...":"Save Employee"})]})]})]})]})},Pv=()=>{const{id:t}=Ga(),s=Je(),[a,r]=y.useState(!0),[n,i]=y.useState(!1),[l,c]=y.useState([]),[o,d]=y.useState({firstName:"",lastName:"",email:"",phone:"",employeeCode:"",designation:"",department:"",dateOfJoining:"",dateOfBirth:"",address:"",emergencyContact:"",status:"active",salary:"",bankAccount:"",panNumber:"",aadharNumber:""});y.useEffect(()=>{x(),u()},[t]);const x=async()=>{var g;try{const p=(await J.get(`/employees/${t}`)).data.data;d({firstName:p.firstName||"",lastName:p.lastName||"",email:p.email||"",phone:p.phone||"",employeeCode:p.employeeCode||"",designation:p.designation||"",department:((g=p.department)==null?void 0:g._id)||"",dateOfJoining:p.dateOfJoining?new Date(p.dateOfJoining).toISOString().split("T")[0]:"",dateOfBirth:p.dateOfBirth?new Date(p.dateOfBirth).toISOString().split("T")[0]:"",address:p.address||"",emergencyContact:p.emergencyContact||"",status:p.status||"active",salary:p.salary||"",bankAccount:p.bankAccount||"",panNumber:p.panNumber||"",aadharNumber:p.aadharNumber||""})}catch{_.error("Failed to load employee details"),s("/employees")}finally{r(!1)}},u=async()=>{try{const g=await J.get("/departments");c(g.data.data||[])}catch{console.error("Failed to load departments")}},m=async g=>{var h,p;g.preventDefault(),i(!0);try{await J.put(`/employees/${t}`,o),_.success("Employee updated successfully"),s("/employees")}catch(j){_.error(((p=(h=j.response)==null?void 0:h.data)==null?void 0:p.message)||"Failed to update employee")}finally{i(!1)}},f=g=>{const{name:h,value:p}=g.target;d(j=>({...j,[h]:p}))};return a?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"w-12 h-12 border-4 border-primary-600 border-t-transparent rounded-full animate-spin"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("button",{onClick:()=>s("/employees"),className:"p-2 text-gray-400 hover:text-white hover:bg-gray-800 rounded-lg transition-colors",children:e.jsx(xt,{size:20})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-white",children:"Edit Employee"}),e.jsx("p",{className:"text-gray-400 mt-1",children:"Update employee information"})]})]})}),e.jsxs("form",{onSubmit:m,className:"space-y-6",children:[e.jsxs("div",{className:"card",children:[e.jsxs("h2",{className:"text-lg font-semibold text-white mb-4 flex items-center space-x-2",children:[e.jsx(_t,{size:20}),e.jsx("span",{children:"Personal Information"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"First Name *"}),e.jsx("input",{type:"text",name:"firstName",value:o.firstName,onChange:f,className:"input-field",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Last Name *"}),e.jsx("input",{type:"text",name:"lastName",value:o.lastName,onChange:f,className:"input-field",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Email *"}),e.jsx("input",{type:"email",name:"email",value:o.email,onChange:f,className:"input-field",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Phone"}),e.jsx("input",{type:"tel",name:"phone",value:o.phone,onChange:f,className:"input-field"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Date of Birth"}),e.jsx("input",{type:"date",name:"dateOfBirth",value:o.dateOfBirth,onChange:f,className:"input-field"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Emergency Contact"}),e.jsx("input",{type:"tel",name:"emergencyContact",value:o.emergencyContact,onChange:f,className:"input-field"})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Address"}),e.jsx("textarea",{name:"address",value:o.address,onChange:f,rows:"3",className:"input-field"})]})]}),e.jsxs("div",{className:"card",children:[e.jsxs("h2",{className:"text-lg font-semibold text-white mb-4 flex items-center space-x-2",children:[e.jsx(ot,{size:20}),e.jsx("span",{children:"Employment Information"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Employee Code *"}),e.jsx("input",{type:"text",name:"employeeCode",value:o.employeeCode,onChange:f,className:"input-field",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Designation *"}),e.jsx("input",{type:"text",name:"designation",value:o.designation,onChange:f,className:"input-field",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Department *"}),e.jsxs("select",{name:"department",value:o.department,onChange:f,className:"input-field",required:!0,children:[e.jsx("option",{value:"",children:"Select Department"}),l.map(g=>e.jsx("option",{value:g._id,children:g.name},g._id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Date of Joining *"}),e.jsx("input",{type:"date",name:"dateOfJoining",value:o.dateOfJoining,onChange:f,className:"input-field",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Status"}),e.jsxs("select",{name:"status",value:o.status,onChange:f,className:"input-field",children:[e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"inactive",children:"Inactive"}),e.jsx("option",{value:"on-leave",children:"On Leave"}),e.jsx("option",{value:"terminated",children:"Terminated"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Salary"}),e.jsx("input",{type:"number",name:"salary",value:o.salary,onChange:f,className:"input-field",min:"0"})]})]})]}),e.jsxs("div",{className:"card",children:[e.jsxs("h2",{className:"text-lg font-semibold text-white mb-4 flex items-center space-x-2",children:[e.jsx(kn,{size:20}),e.jsx("span",{children:"Financial Information"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Bank Account Number"}),e.jsx("input",{type:"text",name:"bankAccount",value:o.bankAccount,onChange:f,className:"input-field"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"PAN Number"}),e.jsx("input",{type:"text",name:"panNumber",value:o.panNumber,onChange:f,className:"input-field"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Aadhar Number"}),e.jsx("input",{type:"text",name:"aadharNumber",value:o.aadharNumber,onChange:f,className:"input-field"})]})]})]}),e.jsxs("div",{className:"flex items-center justify-end space-x-4",children:[e.jsx("button",{type:"button",onClick:()=>s("/employees"),className:"btn-outline",children:"Cancel"}),e.jsxs("button",{type:"submit",disabled:n,className:"btn-primary flex items-center space-x-2",children:[e.jsx(Rs,{size:20}),e.jsx("span",{children:n?"Saving...":"Save Changes"})]})]})]})]})},Iv=()=>{var c,o,d,x,u,m,f,g,h,p,j,v;const{id:t}=Ga(),s=Je(),[a,r]=y.useState(null),[n,i]=y.useState(!0);y.useEffect(()=>{l()},[t]);const l=async()=>{try{const w=await J.get(`/employees/${t}`);r(w.data.data)}catch{_.error("Failed to load employee details"),s("/employees")}finally{i(!1)}};return n?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"w-12 h-12 border-4 border-primary-600 border-t-transparent rounded-full animate-spin"})}):a?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("button",{onClick:()=>s("/employees"),className:"p-2 hover:bg-dark-800 rounded-lg",children:e.jsx(xt,{size:20,className:"text-gray-400"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-white",children:"Employee Details"}),e.jsx("p",{className:"text-gray-400 mt-1",children:a.employeeCode})]})]}),e.jsx("div",{className:"card",children:e.jsxs("div",{className:"flex items-start space-x-6",children:[e.jsx("div",{className:"w-24 h-24 bg-primary-600 rounded-full flex items-center justify-center",children:e.jsxs("span",{className:"text-white font-bold text-3xl",children:[a.firstName[0],a.lastName[0]]})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("h2",{className:"text-2xl font-bold text-white",children:[a.firstName," ",a.lastName]}),e.jsx("p",{className:"text-gray-400 mt-1",children:a.designation}),e.jsxs("div",{className:"flex items-center space-x-4 mt-4",children:[e.jsxs("div",{className:"flex items-center space-x-2 text-gray-400",children:[e.jsx(wt,{size:16}),e.jsx("span",{children:a.email})]}),e.jsxs("div",{className:"flex items-center space-x-2 text-gray-400",children:[e.jsx(Bs,{size:16}),e.jsx("span",{children:a.phone})]})]}),e.jsx("div",{className:"mt-4",children:e.jsx("span",{className:`badge ${a.status==="active"?"badge-success":a.status==="on-leave"?"badge-warning":"badge-danger"}`,children:a.status})})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"card",children:[e.jsxs("h3",{className:"text-lg font-semibold text-white mb-4 flex items-center space-x-2",children:[e.jsx(ot,{size:20}),e.jsx("span",{children:"Employment Information"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-400",children:"Department"}),e.jsx("p",{className:"text-white",children:((c=a.department)==null?void 0:c.name)||"N/A"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-400",children:"Employment Type"}),e.jsx("p",{className:"text-white capitalize",children:a.employmentType})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-400",children:"Joining Date"}),e.jsx("p",{className:"text-white",children:new Date(a.joiningDate).toLocaleDateString()})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-400",children:"Reporting Manager"}),e.jsx("p",{className:"text-white",children:a.reportingManager?`${a.reportingManager.firstName} ${a.reportingManager.lastName}`:"N/A"})]})]})]}),e.jsxs("div",{className:"card",children:[e.jsxs("h3",{className:"text-lg font-semibold text-white mb-4 flex items-center space-x-2",children:[e.jsx(gt,{size:20}),e.jsx("span",{children:"Salary Information"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-400",children:"Basic Salary"}),e.jsxs("p",{className:"text-white",children:["$",((o=a.salary)==null?void 0:o.basic)||0]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-400",children:"HRA"}),e.jsxs("p",{className:"text-white",children:["$",((d=a.salary)==null?void 0:d.hra)||0]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-400",children:"Allowances"}),e.jsxs("p",{className:"text-white",children:["$",((x=a.salary)==null?void 0:x.allowances)||0]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-400",children:"Total Salary"}),e.jsxs("p",{className:"text-white font-bold text-lg",children:["$",((u=a.salary)==null?void 0:u.total)||0]})]})]})]}),e.jsxs("div",{className:"card",children:[e.jsxs("h3",{className:"text-lg font-semibold text-white mb-4 flex items-center space-x-2",children:[e.jsx(Oe,{size:20}),e.jsx("span",{children:"Personal Information"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-400",children:"Date of Birth"}),e.jsx("p",{className:"text-white",children:a.dateOfBirth?new Date(a.dateOfBirth).toLocaleDateString():"N/A"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-400",children:"Gender"}),e.jsx("p",{className:"text-white capitalize",children:a.gender||"N/A"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-400",children:"Address"}),e.jsxs("p",{className:"text-white",children:[((m=a.address)==null?void 0:m.street)&&`${a.address.street}, `,((f=a.address)==null?void 0:f.city)&&`${a.address.city}, `,((g=a.address)==null?void 0:g.state)&&`${a.address.state} `,(h=a.address)==null?void 0:h.zipCode]})]})]})]}),e.jsxs("div",{className:"card",children:[e.jsxs("h3",{className:"text-lg font-semibold text-white mb-4 flex items-center space-x-2",children:[e.jsx(Bs,{size:20}),e.jsx("span",{children:"Emergency Contact"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-400",children:"Name"}),e.jsx("p",{className:"text-white",children:((p=a.emergencyContact)==null?void 0:p.name)||"N/A"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-400",children:"Relationship"}),e.jsx("p",{className:"text-white",children:((j=a.emergencyContact)==null?void 0:j.relationship)||"N/A"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-400",children:"Phone"}),e.jsx("p",{className:"text-white",children:((v=a.emergencyContact)==null?void 0:v.phone)||"N/A"})]})]})]})]})]}):null},li={preboarding:{label:"Pre-boarding",color:"bg-blue-500",icon:p0},offer_sent:{label:"Offer Sent",color:"bg-yellow-500",icon:wt},offer_accepted:{label:"Offer Accepted",color:"bg-green-500",icon:Te},docs_pending:{label:"Documents Pending",color:"bg-orange-500",icon:st},docs_verified:{label:"Documents Verified",color:"bg-emerald-500",icon:Yo},ready_for_joining:{label:"Ready for Joining",color:"bg-purple-500",icon:Oe},completed:{label:"Completed",color:"bg-green-600",icon:Te},rejected:{label:"Rejected",color:"bg-red-500",icon:mt}},ah=({status:t})=>{const s=["preboarding","offer_sent","offer_accepted","docs_pending","docs_verified","ready_for_joining","completed"],a=s.indexOf(t),r=t==="rejected";return e.jsx("div",{className:"flex items-center space-x-2 mb-4",children:s.map((n,i)=>{const l=i<a||t==="completed",c=i===a&&!r,o=i===s.length-1,d=li[n];return e.jsxs("div",{className:"flex items-center",children:[e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:`flex items-center justify-center w-8 h-8 rounded-full transition-all duration-300 ${r?"bg-red-500 text-white":l?"bg-green-500 text-white":c?`${d.color} text-white animate-pulse`:"bg-gray-700 text-gray-400"}`,children:Ve.createElement(d.icon,{size:16})}),e.jsx("div",{className:`mt-1 text-xs font-medium text-center max-w-20 ${r?"text-red-400":l?"text-green-400":c?"text-blue-400":"text-gray-500"}`,children:d.label})]}),!o&&e.jsx("div",{className:`mx-2 h-0.5 w-12 transition-all duration-300 ${r?"bg-red-500":l?"bg-green-500":"bg-gray-700"}`})]},n)})})},Tx=()=>{const[t,s]=y.useState("onboarding"),[a,r]=y.useState([]),[n,i]=y.useState(!1),[l,c]=y.useState(""),[o,d]=y.useState(""),[x,u]=y.useState(""),[m,f]=y.useState({}),[g,h]=y.useState(null),[p,j]=y.useState(!1),[v,w]=y.useState(!1),[b,A]=y.useState(null),[N,C]=y.useState(""),[k,S]=y.useState(null),[F,R]=y.useState([]),[T,M]=y.useState(!1),[H,U]=y.useState(!1),[W,se]=y.useState(null),[X,D]=y.useState({status:"",category:"",search:""}),[le,de]=y.useState(!1),[E,z]=y.useState(null);y.useEffect(()=>{t==="onboarding"?O():t==="templates"&&ce()},[t,l,o,x,X]);const O=async()=>{var he,Se,G,Q,me,je,Ae,we,_e;i(!0);try{const Re=new URLSearchParams;l&&Re.append("status",l),o&&Re.append("department",o),x&&Re.append("search",x),Re.append("_t",Date.now()),console.log("ðŸ” Fetching onboarding list with params:",Re.toString());const Pe=await J.get(`/onboarding?${Re.toString()}`,{headers:{"Cache-Control":"no-cache",Pragma:"no-cache"}});console.log("ðŸ“¦ Onboarding API Response:",Pe==null?void 0:Pe.data),console.log("ðŸ“‹ Onboarding List Data:",(he=Pe==null?void 0:Pe.data)==null?void 0:he.data),console.log("ðŸ“Š List Length:",(G=(Se=Pe==null?void 0:Pe.data)==null?void 0:Se.data)==null?void 0:G.length),r(((Q=Pe==null?void 0:Pe.data)==null?void 0:Q.data)||[]),f(((me=Pe==null?void 0:Pe.data)==null?void 0:me.summary)||{}),((Ae=(je=Pe==null?void 0:Pe.data)==null?void 0:je.data)==null?void 0:Ae.length)===0&&console.warn("âš ï¸ No onboarding records returned from API")}catch(Re){console.error("âŒ Error fetching onboarding list:",Re),_.error(((_e=(we=Re==null?void 0:Re.response)==null?void 0:we.data)==null?void 0:_e.message)||"Failed to load onboarding list")}finally{i(!1)}},P=async(he,Se,G="")=>{var Q,me;try{await J.put(`/onboarding/${he}/status`,{status:Se,notes:G}),_.success("Status updated successfully"),O()}catch(je){_.error(((me=(Q=je==null?void 0:je.response)==null?void 0:Q.data)==null?void 0:me.message)||"Failed to update status")}},Z=async(he,Se)=>{var G,Q;try{await J.post(`/onboarding/${he}/send-offer`,Se),_.success("Offer sent successfully"),O()}catch(me){_.error(((Q=(G=me==null?void 0:me.response)==null?void 0:G.data)==null?void 0:Q.message)||"Failed to send offer")}},re=async(he,Se,G=!0)=>{var Q,me;try{await J.post(`/onboarding/${he}/set-joining-date`,{joiningDate:Se,notifyTeams:G}),_.success("Joining date set and teams notified"),O()}catch(je){_.error(((me=(Q=je==null?void 0:je.response)==null?void 0:Q.data)==null?void 0:me.message)||"Failed to set joining date")}},ie=async he=>{var Se,G;if(confirm("Are you sure you want to complete this onboarding? This will create an employee record."))try{await J.post(`/onboarding/${he}/complete`),_.success("Onboarding completed successfully"),O()}catch(Q){_.error(((G=(Se=Q==null?void 0:Q.response)==null?void 0:Se.data)==null?void 0:G.message)||"Failed to complete onboarding")}},oe=async he=>{var Se,G;try{const Q=await J.post(`/onboarding/${he}/request-documents`);_.success(`Document request email sent to ${Q.data.data.sentTo}`)}catch(Q){_.error(((G=(Se=Q==null?void 0:Q.response)==null?void 0:Se.data)==null?void 0:G.message)||"Failed to send document request")}},ue=async he=>{S(he);try{const Se=await J.put(`/onboarding/${g._id}/documents/${he}/verify`,{action:"approve",notes:"Document verified and accepted"});if(Se.data.success){if(_.success("Document accepted successfully!"),O(),g){const G=a.find(Q=>Q._id===g._id);h(G)}}else _.error(Se.data.message||"Failed to accept document")}catch(Se){console.error("Error accepting document:",Se),_.error("Failed to accept document")}finally{S(null)}},Ne=he=>{A(he),C(""),w(!0)},I=async()=>{if(!N.trim()){_.error("Please provide a reason for rejection");return}S(b._id);try{const he=await J.put(`/onboarding/${g._id}/documents/${b._id}/verify`,{action:"reject",notes:N});if(he.data.success){if(_.success("Document rejected and email sent to candidate"),w(!1),A(null),C(""),O(),g){const Se=a.find(G=>G._id===g._id);h(Se)}}else _.error(he.data.message||"Failed to reject document")}catch(he){console.error("Error rejecting document:",he),_.error("Failed to reject document")}finally{S(null)}},ce=async()=>{M(!0);try{const he=new URLSearchParams;X.status&&he.append("status",X.status),X.category&&he.append("category",X.category),X.search&&he.append("search",X.search);const Se=await J.get(`/offer-templates?${he.toString()}`);R(Se.data.data||[])}catch(he){_.error("Failed to load offer templates"),console.error(he)}finally{M(!1)}},L=async he=>{var Se,G;try{W?(await J.put(`/offer-templates/${W._id}`,he),_.success("Template updated successfully")):(await J.post("/offer-templates",he),_.success("Template created successfully")),U(!1),se(null),ce()}catch(Q){_.error(((G=(Se=Q==null?void 0:Q.response)==null?void 0:Se.data)==null?void 0:G.message)||"Failed to save template")}},V=async he=>{if(confirm("Are you sure you want to delete this template?"))try{await J.delete(`/offer-templates/${he}`),_.success("Template deleted successfully"),ce()}catch{_.error("Failed to delete template")}},te=async he=>{try{const Se={...he,name:`${he.name} (Copy)`,isDefault:!1};delete Se._id,delete Se.createdAt,delete Se.updatedAt,await J.post("/offer-templates",Se),_.success("Template duplicated successfully"),ce()}catch{_.error("Failed to duplicate template")}},ne=async(he,Se)=>{try{await J.put(`/offer-templates/${he}/status`,{status:Se}),_.success(`Template ${Se==="active"?"activated":"deactivated"} successfully`),ce()}catch{_.error("Failed to update template status")}},xe=a;return n?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"w-12 h-12 border-4 border-primary-600 border-t-transparent rounded-full animate-spin"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-white",children:"Employee Onboarding"}),e.jsx("p",{className:"text-gray-400 mt-1",children:"Manage comprehensive candidate onboarding process"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[t==="onboarding"&&m.overdue>0&&e.jsxs("div",{className:"flex items-center space-x-2 px-3 py-2 bg-red-900/20 border border-red-800 rounded-lg",children:[e.jsx(mt,{size:16,className:"text-red-400"}),e.jsxs("span",{className:"text-sm text-red-400",children:[m.overdue," Overdue"]})]}),t==="onboarding"&&e.jsxs("span",{className:"text-sm text-gray-400",children:["Total: ",m.total||0]}),t==="templates"&&e.jsxs("button",{onClick:()=>{se(null),U(!0)},className:"btn-primary flex items-center space-x-2",children:[e.jsx(qe,{size:18}),e.jsx("span",{children:"Create Template"})]})]})]}),e.jsx("div",{className:"card p-1",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>s("onboarding"),className:`flex-1 px-4 py-2 rounded-lg font-medium transition-colors ${t==="onboarding"?"bg-primary-600 text-white":"text-gray-400 hover:text-white hover:bg-dark-700"}`,children:e.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[e.jsx(Ue,{size:18}),e.jsx("span",{children:"Onboarding List"})]})}),e.jsx("button",{onClick:()=>s("templates"),className:`flex-1 px-4 py-2 rounded-lg font-medium transition-colors ${t==="templates"?"bg-primary-600 text-white":"text-gray-400 hover:text-white hover:bg-dark-700"}`,children:e.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[e.jsx(Ll,{size:18}),e.jsx("span",{children:"Offer Templates"})]})})]})}),t==="onboarding"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:Object.entries(m.byStatus||{}).map(([he,Se])=>{const G=li[he];return G?e.jsx("div",{className:"card p-4",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:`p-2 rounded-lg ${G.color}`,children:Ve.createElement(G.icon,{size:20,className:"text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-400",children:G.label}),e.jsx("p",{className:"text-xl font-bold text-white",children:Se})]})]})},he):null})}),e.jsx("div",{className:"card p-4",children:e.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(yt,{size:16,className:"text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search candidates...",value:x,onChange:he=>u(he.target.value),className:"input-field w-64"})]}),e.jsxs("select",{value:l,onChange:he=>c(he.target.value),className:"input-field w-48",children:[e.jsx("option",{value:"",children:"All Status"}),Object.entries(li).map(([he,Se])=>e.jsx("option",{value:he,children:Se.label},he))]}),e.jsx("button",{onClick:()=>{c(""),d(""),u("")},className:"btn-outline text-sm",children:"Clear Filters"})]})}),e.jsx("div",{className:"space-y-4",children:xe.map(he=>e.jsx($v,{item:he,onUpdateStatus:P,onSendOffer:Z,onSetJoiningDate:re,onComplete:ie,onOpenSendOfferModal:Se=>{z(Se),de(!0)},onViewDetails:Se=>{h(Se),j(!0)},onRequestDocuments:oe},he._id))}),xe.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Ue,{size:48,className:"mx-auto text-gray-600 mb-4"}),e.jsx("p",{className:"text-gray-400 text-lg",children:"No onboarding records found"}),e.jsx("p",{className:"text-gray-500 text-sm mt-2",children:x||l?"Try adjusting your filters":"Candidates will appear here when sent to onboarding"})]}),p&&g&&e.jsx(Ov,{onboarding:g,onClose:()=>{j(!1),h(null)},verifyingDoc:k,onAcceptDocument:ue,onRejectDocument:Ne}),e.jsx(zv,{isOpen:v,onClose:()=>{w(!1),A(null),C("")},document:b,rejectionNotes:N,setRejectionNotes:C,onSubmit:I,isSubmitting:k!==null})]}),t==="templates"&&e.jsx(Lv,{templates:F,loading:T,filter:X,setFilter:D,onEdit:he=>{se(he),U(!0)},onDelete:V,onDuplicate:te,onUpdateStatus:ne}),H&&e.jsx(Mv,{template:W,onClose:()=>{U(!1),se(null)},onSave:L}),le&&E&&e.jsx(Bv,{candidate:E,onClose:()=>{de(!1),z(null)},onSend:Z})]})},$v=({item:t,onUpdateStatus:s,onSendOffer:a,onSetJoiningDate:r,onComplete:n,onViewDetails:i,onOpenSendOfferModal:l,onRequestDocuments:c})=>{var w;const[o,d]=y.useState(!1),[x,u]=y.useState(!1),[m,f]=y.useState(""),g=li[t.status],h=()=>{switch(t.status){case"preboarding":return[{label:"Send Offer",action:()=>l(t),color:"btn-primary"}];case"offer_sent":return[{label:"Mark Accepted",action:()=>s(t._id,"offer_accepted"),color:"btn-success"},{label:"Mark Rejected",action:()=>s(t._id,"rejected"),color:"btn-danger"}];case"offer_accepted":return[{label:"Request Documents",action:()=>s(t._id,"docs_pending"),color:"btn-primary"}];case"docs_pending":return[{label:"Verify Documents",action:()=>s(t._id,"docs_verified"),color:"btn-success"}];case"docs_verified":return[{label:"Set Joining Date",action:()=>p(),color:"btn-primary"}];case"ready_for_joining":return[{label:"Complete Onboarding",action:()=>n(t._id),color:"btn-success"}];default:return[]}},p=()=>{u(!0);const b=new Date().toISOString().split("T")[0];f(b)},j=()=>{m&&(r(t._id,m),u(!1),f(""))},v=h();return e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[e.jsx("h3",{className:"text-lg font-semibold text-white",children:t.candidateName}),e.jsxs("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${g.color} text-white`,children:[Ve.createElement(g.icon,{size:12,className:"mr-1"}),g.label]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm text-gray-400",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(wt,{size:14}),e.jsx("span",{children:t.candidateEmail})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Bs,{size:14}),e.jsx("span",{children:t.candidatePhone})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ue,{size:14}),e.jsx("span",{children:t.position})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>i(t),className:"btn-outline text-sm",children:e.jsx(Ht,{size:16})}),e.jsxs("div",{className:"relative",children:[e.jsx("button",{onClick:()=>d(!o),className:"btn-outline text-sm",children:e.jsx(Ng,{size:16})}),o&&e.jsx("div",{className:"absolute right-0 top-full mt-2 w-48 bg-gray-800 border border-gray-700 rounded-lg shadow-lg z-10",children:v.map((b,A)=>e.jsx("button",{onClick:()=>{b.action(),d(!1)},className:"w-full text-left px-4 py-2 text-sm text-white hover:bg-gray-700 first:rounded-t-lg last:rounded-b-lg",children:b.label},A))})]})]})]}),e.jsx(ah,{status:t.status}),t.joiningDate&&e.jsx("div",{className:"mb-4 p-3 bg-green-900/20 border border-green-800 rounded-lg",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Oe,{size:16,className:"text-green-400"}),e.jsxs("span",{className:"text-sm text-green-400",children:["Joining Date: ",new Date(t.joiningDate).toLocaleDateString()]})]})}),((w=t.offer)==null?void 0:w.expiryDate)&&t.status==="offer_sent"&&e.jsx("div",{className:"mb-4 p-3 bg-yellow-900/20 border border-yellow-800 rounded-lg",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{size:16,className:"text-yellow-400"}),e.jsxs("span",{className:"text-sm text-yellow-400",children:["Offer expires: ",new Date(t.offer.expiryDate).toLocaleDateString()]})]})}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-xs text-gray-500",children:["ID: ",t.onboardingId," â€¢ Created: ",new Date(t.createdAt).toLocaleDateString()]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("button",{onClick:()=>c(t._id),className:"btn-outline text-sm flex items-center space-x-1",title:"Send document upload link to candidate",children:[e.jsx(st,{size:14}),e.jsx("span",{children:"Request Documents"})]}),v.slice(0,2).map((b,A)=>e.jsx("button",{onClick:b.action,className:`${b.color} text-sm`,children:b.label},A))]})]}),x&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-dark-900 border border-dark-700 rounded-xl max-w-md w-full p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-xl font-bold text-white",children:"Set Joining Date"}),e.jsx("button",{onClick:()=>{u(!1),f("")},className:"text-gray-400 hover:text-white",children:e.jsx(Le,{size:20})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Joining Date"}),e.jsx("input",{type:"date",value:m,onChange:b=>f(b.target.value),min:new Date().toISOString().split("T")[0],className:"w-full px-4 py-2 bg-dark-800 border border-dark-700 rounded-lg text-white focus:border-primary-600 focus:outline-none"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("button",{onClick:j,className:"flex-1 btn-primary",disabled:!m,children:[e.jsx(Oe,{size:16,className:"mr-2"}),"Set Date"]}),e.jsx("button",{onClick:()=>{u(!1),f("")},className:"flex-1 btn-outline",children:"Cancel"})]})]})]})})]})},Ov=({onboarding:t,onClose:s,verifyingDoc:a,onAcceptDocument:r,onRejectDocument:n})=>{var d;const i=li[t.status],l=x=>x?new Date(x).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"N/A",c=x=>x?new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0}).format(x):"N/A",o=x=>{if(!x)return"";if(x.startsWith("http://")||x.startsWith("https://"))return x;const u="";return x.startsWith("/uploads/")?`${u}${x}`:x.startsWith("/")?x:`${u}/uploads/${x}`};return e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-dark-900 border border-dark-700 rounded-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-dark-900 border-b border-dark-700 p-6 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-white",children:t.candidateName}),e.jsxs("p",{className:"text-gray-400 mt-1",children:["Onboarding ID: ",t.onboardingId]})]}),e.jsx("button",{onClick:s,className:"btn-outline p-2",children:e.jsx(Le,{size:20})})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"card",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Current Status"}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:`p-3 rounded-lg ${i.color}`,children:Ve.createElement(i.icon,{size:24,className:"text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-white font-medium",children:i.label}),e.jsxs("p",{className:"text-gray-400 text-sm",children:["Updated: ",l(t.updatedAt)]})]})]}),e.jsx("div",{className:"mt-4",children:e.jsx(ah,{status:t.status})})]}),e.jsxs("div",{className:"card",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Basic Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(wt,{size:18,className:"text-primary-500 mt-1"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-400 text-sm",children:"Email"}),e.jsx("p",{className:"text-white",children:t.candidateEmail})]})]}),e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(Bs,{size:18,className:"text-primary-500 mt-1"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-400 text-sm",children:"Phone"}),e.jsx("p",{className:"text-white",children:t.candidatePhone})]})]}),e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(ot,{size:18,className:"text-primary-500 mt-1"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-400 text-sm",children:"Position"}),e.jsx("p",{className:"text-white",children:t.position})]})]}),e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(kn,{size:18,className:"text-primary-500 mt-1"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-400 text-sm",children:"Department"}),e.jsx("p",{className:"text-white",children:((d=t.department)==null?void 0:d.name)||"N/A"})]})]})]})]}),t.offer&&e.jsxs("div",{className:"card",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Offer Details"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(ot,{size:18,className:"text-primary-500 mt-1"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-400 text-sm",children:"Offered Designation"}),e.jsx("p",{className:"text-white",children:t.offer.offeredDesignation||"N/A"})]})]}),e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(gt,{size:18,className:"text-primary-500 mt-1"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-400 text-sm",children:"Offered CTC"}),e.jsx("p",{className:"text-white",children:c(t.offer.offeredCTC)})]})]}),e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(Oe,{size:18,className:"text-primary-500 mt-1"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-400 text-sm",children:"Start Date"}),e.jsx("p",{className:"text-white",children:l(t.offer.startDate)})]})]}),e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(Be,{size:18,className:"text-primary-500 mt-1"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-400 text-sm",children:"Offer Sent"}),e.jsx("p",{className:"text-white",children:l(t.offer.sentAt)})]})]}),t.offer.expiryDate&&e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(mt,{size:18,className:"text-yellow-500 mt-1"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-400 text-sm",children:"Offer Expires"}),e.jsx("p",{className:"text-white",children:l(t.offer.expiryDate)})]})]})]}),t.offer.salary&&e.jsxs("div",{className:"mt-4 p-4 bg-dark-800 rounded-lg",children:[e.jsx("p",{className:"text-sm font-medium text-gray-400 mb-3",children:"Salary Breakdown"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Basic"}),e.jsx("p",{className:"text-white font-medium",children:c(t.offer.salary.basic)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"HRA"}),e.jsx("p",{className:"text-white font-medium",children:c(t.offer.salary.hra)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Allowances"}),e.jsx("p",{className:"text-white font-medium",children:c(t.offer.salary.allowances)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Total"}),e.jsx("p",{className:"text-white font-medium",children:c(t.offer.salary.total)})]})]})]})]}),t.joiningDate&&e.jsxs("div",{className:"card",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Joining Information"}),e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(Oe,{size:18,className:"text-primary-500 mt-1"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-400 text-sm",children:"Joining Date"}),e.jsx("p",{className:"text-white font-medium text-lg",children:l(t.joiningDate)})]})]})]}),t.auditTrail&&t.auditTrail.length>0&&e.jsxs("div",{className:"card",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Activity Timeline"}),e.jsx("div",{className:"space-y-3",children:t.auditTrail.slice().reverse().map((x,u)=>e.jsxs("div",{className:"flex items-start space-x-3 p-3 bg-dark-800 rounded-lg",children:[e.jsx("div",{className:"w-2 h-2 bg-primary-500 rounded-full mt-2"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-white font-medium",children:x.action.replace(/_/g," ").toUpperCase()}),e.jsx("p",{className:"text-gray-400 text-sm",children:x.description}),e.jsx("p",{className:"text-gray-500 text-xs mt-1",children:l(x.timestamp)})]})]},u))})]}),t.documents&&t.documents.length>0&&e.jsxs("div",{className:"card",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Documents"}),e.jsx("div",{className:"space-y-3",children:t.documents.map((x,u)=>e.jsxs("div",{className:"p-4 bg-dark-800 rounded-lg",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(st,{size:18,className:"text-primary-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-white font-medium",children:x.name}),e.jsx("p",{className:"text-gray-400 text-sm",children:x.type})]})]}),e.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${x.status==="verified"?"bg-green-500/20 text-green-400":x.status==="rejected"?"bg-red-500/20 text-red-400":x.status==="pending"?"bg-yellow-500/20 text-yellow-400":"bg-gray-500/20 text-gray-400"}`,children:x.status||"uploaded"})]}),x.rejectionReason&&e.jsxs("div",{className:"mb-3 p-2 bg-red-500/10 border border-red-500/20 rounded text-sm text-red-400",children:[e.jsx("strong",{children:"Rejection Reason:"})," ",x.rejectionReason]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center space-x-2",children:x.url&&e.jsxs("a",{href:o(x.url),target:"_blank",rel:"noreferrer",className:"text-sm text-primary-400 hover:text-primary-300 flex items-center space-x-1",children:[e.jsx(Ht,{size:14}),e.jsx("span",{children:"View"})]})}),x.status!=="verified"&&x.url&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("button",{onClick:()=>r(x._id),disabled:a===x._id,className:"flex items-center space-x-1 px-3 py-1.5 bg-green-500/20 hover:bg-green-500/30 text-green-400 rounded text-sm font-medium transition-colors disabled:opacity-50",children:[e.jsx(gn,{size:14}),e.jsx("span",{children:a===x._id?"Processing...":"Accept"})]}),e.jsxs("button",{onClick:()=>n(x),disabled:a===x._id,className:"flex items-center space-x-1 px-3 py-1.5 bg-red-500/20 hover:bg-red-500/30 text-red-400 rounded text-sm font-medium transition-colors disabled:opacity-50",children:[e.jsx(Le,{size:14}),e.jsx("span",{children:"Reject"})]})]})]})]},u))})]})]}),e.jsx("div",{className:"sticky bottom-0 bg-dark-900 border-t border-dark-700 p-6 flex justify-end",children:e.jsx("button",{onClick:s,className:"btn-primary",children:"Close"})})]})})},Lv=({templates:t,loading:s,filter:a,setFilter:r,onEdit:n,onDelete:i,onDuplicate:l,onUpdateStatus:c})=>s?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"w-12 h-12 border-4 border-primary-600 border-t-transparent rounded-full animate-spin"})}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"card p-4",children:e.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(yt,{size:16,className:"text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search templates...",value:a.search,onChange:o=>r({...a,search:o.target.value}),className:"input-field w-64"})]}),e.jsxs("select",{value:a.status,onChange:o=>r({...a,status:o.target.value}),className:"input-field w-40",children:[e.jsx("option",{value:"",children:"All Status"}),e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"inactive",children:"Inactive"}),e.jsx("option",{value:"draft",children:"Draft"})]}),e.jsxs("select",{value:a.category,onChange:o=>r({...a,category:o.target.value}),className:"input-field w-40",children:[e.jsx("option",{value:"",children:"All Categories"}),e.jsx("option",{value:"full-time",children:"Full Time"}),e.jsx("option",{value:"part-time",children:"Part Time"}),e.jsx("option",{value:"contract",children:"Contract"}),e.jsx("option",{value:"intern",children:"Intern"}),e.jsx("option",{value:"executive",children:"Executive"})]})]})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:t.map(o=>e.jsxs("div",{className:"card p-4 hover:border-primary-500 transition-colors",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-1",children:o.name}),e.jsx("p",{className:"text-sm text-gray-400 line-clamp-2",children:o.description})]}),o.isDefault&&e.jsx("span",{className:"px-2 py-1 bg-primary-500/20 text-primary-400 text-xs font-medium rounded",children:"Default"})]}),e.jsxs("div",{className:"space-y-2 mb-4",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-400",children:"Category:"}),e.jsx("span",{className:"text-white capitalize",children:o.category})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-400",children:"Status:"}),e.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-medium ${o.status==="active"?"bg-green-500/20 text-green-400":o.status==="inactive"?"bg-gray-500/20 text-gray-400":"bg-yellow-500/20 text-yellow-400"}`,children:o.status})]}),o.usageCount>0&&e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-400",children:"Used:"}),e.jsxs("span",{className:"text-white",children:[o.usageCount," times"]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("button",{onClick:()=>n(o),className:"flex-1 btn-outline text-sm py-2",children:[e.jsx($a,{size:14,className:"inline mr-1"}),"Edit"]}),e.jsx("button",{onClick:()=>l(o),className:"btn-outline p-2",title:"Duplicate",children:e.jsx(Ml,{size:16})}),e.jsx("button",{onClick:()=>c(o._id,o.status==="active"?"inactive":"active"),className:`btn-outline p-2 ${o.status==="active"?"text-yellow-400":"text-green-400"}`,title:o.status==="active"?"Deactivate":"Activate",children:o.status==="active"?e.jsx(Be,{size:16}):e.jsx(Te,{size:16})}),e.jsx("button",{onClick:()=>i(o._id),className:"btn-outline p-2 text-red-400 hover:bg-red-500/10",title:"Delete",children:e.jsx(kt,{size:16})})]})]},o._id))}),t.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Ll,{size:48,className:"mx-auto text-gray-600 mb-4"}),e.jsx("p",{className:"text-gray-400 text-lg",children:"No templates found"}),e.jsx("p",{className:"text-gray-500 text-sm mt-2",children:a.search||a.status||a.category?"Try adjusting your filters":"Create your first offer template to get started"})]})]}),Mv=({template:t,onClose:s,onSave:a})=>{const[r,n]=y.useState({name:(t==null?void 0:t.name)||"",description:(t==null?void 0:t.description)||"",category:(t==null?void 0:t.category)||"full-time",subject:(t==null?void 0:t.subject)||"",content:(t==null?void 0:t.content)||"",status:(t==null?void 0:t.status)||"draft",isDefault:(t==null?void 0:t.isDefault)||!1,variables:(t==null?void 0:t.variables)||[],expiryDays:(t==null?void 0:t.expiryDays)||1,reminderDays:(t==null?void 0:t.reminderDays)||[]}),[i,l]=y.useState({}),c=()=>{const u={};return r.name.trim()||(u.name="Template name is required"),r.subject.trim()||(u.subject="Email subject is required"),r.content.trim()||(u.content="Template content is required"),r.expiryDays<1&&(u.expiryDays="Expiry days must be at least 1"),l(u),Object.keys(u).length===0},o=u=>{u.preventDefault(),c()&&a(r)},d=u=>{n({...r,content:r.content+`{{${u}}}`})},x=["candidateName","candidateEmail","position","department","offeredCTC","startDate","joiningDate","companyName","hrName","hrEmail","hrPhone"];return e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-dark-900 border border-dark-700 rounded-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-dark-900 border-b border-dark-700 p-6 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-white",children:t?"Edit Template":"Create New Template"}),e.jsx("p",{className:"text-gray-400 mt-1",children:"Design your offer letter template"})]}),e.jsx("button",{onClick:s,className:"btn-outline p-2",children:e.jsx(Le,{size:20})})]}),e.jsxs("form",{onSubmit:o,className:"p-6 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Template Name *"}),e.jsx("input",{type:"text",value:r.name,onChange:u=>n({...r,name:u.target.value}),className:`input-field w-full ${i.name?"border-red-500":""}`,placeholder:"e.g., Full-Time Offer Letter"}),i.name&&e.jsx("p",{className:"text-red-400 text-sm mt-1",children:i.name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Category *"}),e.jsxs("select",{value:r.category,onChange:u=>n({...r,category:u.target.value}),className:"input-field w-full",children:[e.jsx("option",{value:"full-time",children:"Full Time"}),e.jsx("option",{value:"part-time",children:"Part Time"}),e.jsx("option",{value:"contract",children:"Contract"}),e.jsx("option",{value:"intern",children:"Intern"}),e.jsx("option",{value:"executive",children:"Executive"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Description"}),e.jsx("textarea",{value:r.description,onChange:u=>n({...r,description:u.target.value}),className:"input-field w-full",rows:"2",placeholder:"Brief description of this template"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Email Subject *"}),e.jsx("input",{type:"text",value:r.subject,onChange:u=>n({...r,subject:u.target.value}),className:`input-field w-full ${i.subject?"border-red-500":""}`,placeholder:"e.g., Offer Letter - {{position}} at {{companyName}}"}),i.subject&&e.jsx("p",{className:"text-red-400 text-sm mt-1",children:i.subject})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300",children:"Template Content *"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-xs text-gray-400",children:"Insert Variable:"}),e.jsxs("select",{onChange:u=>{u.target.value&&(d(u.target.value),u.target.value="")},className:"input-field text-xs py-1",children:[e.jsx("option",{value:"",children:"Select..."}),x.map(u=>e.jsx("option",{value:u,children:u},u))]})]})]}),e.jsx("textarea",{value:r.content,onChange:u=>n({...r,content:u.target.value}),className:`input-field w-full font-mono text-sm ${i.content?"border-red-500":""}`,rows:"12",placeholder:`Dear {{candidateName}},

We are pleased to offer you the position of {{position}} at {{companyName}}...

Use {{variableName}} to insert dynamic content.`}),i.content&&e.jsx("p",{className:"text-red-400 text-sm mt-1",children:i.content}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Use double curly braces for variables, e.g., ","{{candidateName}}"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Status"}),e.jsxs("select",{value:r.status,onChange:u=>n({...r,status:u.target.value}),className:"input-field w-full",children:[e.jsx("option",{value:"draft",children:"Draft"}),e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"inactive",children:"Inactive"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Offer Expiry (Days) *"}),e.jsx("input",{type:"number",min:"1",value:r.expiryDays,onChange:u=>n({...r,expiryDays:parseInt(u.target.value)}),className:`input-field w-full ${i.expiryDays?"border-red-500":""}`}),i.expiryDays&&e.jsx("p",{className:"text-red-400 text-sm mt-1",children:i.expiryDays})]}),e.jsx("div",{className:"flex items-center pt-8",children:e.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:r.isDefault,onChange:u=>n({...r,isDefault:u.target.checked}),className:"w-4 h-4 rounded border-gray-600 text-primary-600 focus:ring-primary-500"}),e.jsx("span",{className:"text-sm text-gray-300",children:"Set as Default"})]})})]}),e.jsxs("div",{className:"flex items-center justify-end space-x-3 pt-4 border-t border-dark-700",children:[e.jsx("button",{type:"button",onClick:s,className:"btn-outline",children:"Cancel"}),e.jsxs("button",{type:"submit",className:"btn-primary flex items-center space-x-2",children:[e.jsx(Rs,{size:18}),e.jsx("span",{children:t?"Update Template":"Create Template"})]})]})]})]})})},Bv=({candidate:t,onClose:s,onSend:a})=>{const[r,n]=y.useState({candidateName:t.candidateName||"",salary:"",templateId:"default"}),[i,l]=y.useState({}),[c,o]=y.useState(!1),d=()=>{const u={};return r.candidateName.trim()||(u.candidateName="Candidate name is required"),(!r.salary||r.salary<=0)&&(u.salary="Valid salary is required"),l(u),Object.keys(u).length===0},x=async u=>{if(u.preventDefault(),!!d()){o(!0);try{await a(t._id,{templateId:r.templateId,offerDetails:{designation:t.position,ctc:parseFloat(r.salary),salary:parseFloat(r.salary)}}),s()}catch{_.error("Failed to send offer")}finally{o(!1)}}};return e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-dark-900 border border-dark-700 rounded-xl max-w-md w-full",children:[e.jsxs("div",{className:"border-b border-dark-700 p-6 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-white",children:"Send Offer Letter"}),e.jsx("p",{className:"text-gray-400 text-sm mt-1",children:"Fill in the offer details"})]}),e.jsx("button",{onClick:s,className:"btn-outline p-2",children:e.jsx(Le,{size:20})})]}),e.jsxs("form",{onSubmit:x,className:"p-6 space-y-4",children:[e.jsxs("div",{className:"bg-dark-800 p-4 rounded-lg space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-400",children:"Position:"}),e.jsx("span",{className:"text-white font-medium",children:t.position})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-400",children:"Email:"}),e.jsx("span",{className:"text-white",children:t.candidateEmail})]}),t.department&&e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-400",children:"Department:"}),e.jsx("span",{className:"text-white",children:t.department.name||t.department})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Candidate Name *"}),e.jsx("input",{type:"text",value:r.candidateName,onChange:u=>n({...r,candidateName:u.target.value}),className:`input-field w-full ${i.candidateName?"border-red-500":""}`,placeholder:"Enter candidate's full name"}),i.candidateName&&e.jsx("p",{className:"text-red-400 text-sm mt-1",children:i.candidateName})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Annual CTC (â‚¹) *"}),e.jsx("input",{type:"number",min:"0",step:"1000",value:r.salary,onChange:u=>n({...r,salary:u.target.value}),className:`input-field w-full ${i.salary?"border-red-500":""}`,placeholder:"e.g., 500000"}),i.salary&&e.jsx("p",{className:"text-red-400 text-sm mt-1",children:i.salary}),r.salary&&e.jsxs("p",{className:"text-gray-400 text-xs mt-1",children:["â‚¹",parseFloat(r.salary).toLocaleString("en-IN")," per annum"]})]}),e.jsx("div",{className:"bg-blue-500/10 border border-blue-500/20 rounded-lg p-3",children:e.jsxs("p",{className:"text-blue-400 text-sm",children:[e.jsx("strong",{children:"Note:"})," A default offer letter template will be used. The offer will be sent to ",t.candidateEmail]})}),e.jsxs("div",{className:"flex items-center justify-end space-x-3 pt-4",children:[e.jsx("button",{type:"button",onClick:s,className:"btn-outline",disabled:c,children:"Cancel"}),e.jsx("button",{type:"submit",className:"btn-primary flex items-center space-x-2",disabled:c,children:c?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),e.jsx("span",{children:"Sending..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(wt,{size:18}),e.jsx("span",{children:"Send Offer"})]})})]})]})]})})},zv=({isOpen:t,onClose:s,document:a,rejectionNotes:r,setRejectionNotes:n,onSubmit:i,isSubmitting:l})=>t?e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-dark-800 rounded-lg shadow-xl max-w-md w-full",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-xl font-semibold text-white",children:"Reject Document"}),e.jsx("button",{onClick:s,className:"text-gray-400 hover:text-white",children:e.jsx(Le,{size:20})})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("p",{className:"text-gray-300 mb-2",children:["Document: ",e.jsx("strong",{children:(a==null?void 0:a.name)||(a==null?void 0:a.type)})]}),e.jsx("p",{className:"text-gray-400 text-sm",children:"Please provide a reason for rejecting this document. The candidate will receive an email with your notes."})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:["Rejection Reason ",e.jsx("span",{className:"text-red-400",children:"*"})]}),e.jsx("textarea",{value:r,onChange:c=>n(c.target.value),placeholder:"e.g., Document is not clear, please upload a better quality scan...",className:"w-full px-3 py-2 bg-dark-700 border border-dark-600 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-primary-500",rows:4})]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{onClick:s,disabled:l,className:"px-4 py-2 bg-dark-700 hover:bg-dark-600 text-white rounded-lg transition-colors",children:"Cancel"}),e.jsx("button",{onClick:i,disabled:!r.trim()||l,className:"px-4 py-2 bg-red-500 hover:bg-red-600 text-white rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:l?"Sending...":"Reject & Send Email"})]})]})})}):null,po=[{key:"exitDiscussion",label:"Exit Discussion"},{key:"assetReturn",label:"Asset Return"},{key:"documentation",label:"Documentation"},{key:"finalSettlement",label:"Final Settlement"},{key:"success",label:"Completed"}],Dx={"in-progress":{label:"In Progress",color:"bg-blue-500",badge:"badge-info"},completed:{label:"Completed",color:"bg-green-500",badge:"badge-success"},cancelled:{label:"Cancelled",color:"bg-red-500",badge:"badge-danger"}},rh={voluntary:"Voluntary",involuntary:"Involuntary",retirement:"Retirement","contract-end":"Contract End"},Uv={voluntary_resignation:"voluntary",involuntary_termination:"involuntary",retirement:"retirement",contract_end:"contract-end"},nh=({stages:t,currentStage:s,status:a})=>{const r=t||po.map(i=>i.key),n=r.indexOf(s);return e.jsx("div",{className:"flex items-center space-x-1 overflow-x-auto pb-2",children:r.map((i,l)=>{var x;const c=a==="completed"||l<n,o=l===n&&a!=="completed",d=l===r.length-1;return e.jsxs("div",{className:"flex items-center flex-shrink-0",children:[e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:`flex items-center justify-center w-8 h-8 rounded-full transition-all duration-300 ${c?"bg-green-500 text-white":o?"bg-blue-500 text-white animate-pulse":"bg-gray-700 text-gray-400"}`,children:c?e.jsx(Te,{size:18}):o?e.jsx(Be,{size:18}):e.jsx(p0,{size:18})}),e.jsx("div",{className:`mt-1 text-xs font-medium text-center max-w-[80px] ${c?"text-green-400":o?"text-blue-400":"text-gray-500"}`,children:((x=po.find(u=>u.key===i))==null?void 0:x.label)||i})]}),!d&&e.jsx("div",{className:`mx-2 h-0.5 w-12 transition-all duration-300 ${c?"bg-green-500":"bg-gray-700"}`})]},i)})})},Rx=()=>{const[t,s]=y.useState([]),[a,r]=y.useState(!1),[n,i]=y.useState({total:0,inProgress:0,completed:0,cancelled:0}),[l,c]=y.useState("all"),[o,d]=y.useState(""),[x,u]=y.useState(""),[m,f]=y.useState(1),[g,h]=y.useState(1),[p,j]=y.useState(!1),[v,w]=y.useState(!1),[b,A]=y.useState(!1),[N,C]=y.useState(!1),[k,S]=y.useState(!1),[F,R]=y.useState(!1),[T,M]=y.useState(!1),[H,U]=y.useState(null),[W,se]=y.useState([]),[X,D]=y.useState(1);y.useEffect(()=>{le()},[l,o,x,X]);const le=async()=>{var V,te,ne,xe,he,Se;r(!0);try{const G=new URLSearchParams;l!=="all"&&G.append("status",l),o&&G.append("stage",o),x&&G.append("search",x),G.append("page",X),G.append("limit","10");const Q=await J.get(`/offboarding?${G.toString()}`);s(((V=Q==null?void 0:Q.data)==null?void 0:V.data)||[]),i(((te=Q==null?void 0:Q.data)==null?void 0:te.summary)||{}),h(((xe=(ne=Q==null?void 0:Q.data)==null?void 0:ne.pagination)==null?void 0:xe.pages)||1)}catch(G){_.error(((Se=(he=G==null?void 0:G.response)==null?void 0:he.data)==null?void 0:Se.message)||"Failed to load offboarding list")}finally{r(!1)}},de=async()=>{var V;try{const te=await J.get("/employees");se(((V=te==null?void 0:te.data)==null?void 0:V.data)||[])}catch{_.error("Failed to load employees")}},E=async V=>{var te,ne;try{const xe=await J.get(`/offboarding/${V}`);return U((te=xe==null?void 0:xe.data)==null?void 0:te.data),(ne=xe==null?void 0:xe.data)==null?void 0:ne.data}catch{return _.error("Failed to load offboarding details"),null}},z=async V=>{var te,ne;try{const xe=V.reason,he=Uv[xe]||V.resignationType||"voluntary",Se={employeeId:V.employeeId,lastWorkingDate:V.lastWorkingDay||V.lastWorkingDate,resignationType:he,reason:xe||V.resignationType||he};await J.post("/offboarding",Se),_.success("Offboarding initiated successfully"),j(!1),le()}catch(xe){_.error(((ne=(te=xe==null?void 0:xe.response)==null?void 0:te.data)==null?void 0:ne.message)||"Failed to initiate offboarding")}},O=async(V,te)=>{var ne,xe;try{await J.put(`/offboarding/${V}`,te),_.success("Offboarding updated successfully"),A(!1),le(),(H==null?void 0:H._id)===V&&E(V)}catch(he){_.error(((xe=(ne=he==null?void 0:he.response)==null?void 0:ne.data)==null?void 0:xe.message)||"Failed to update offboarding")}},P=async V=>{var te,ne;try{await J.post(`/offboarding/${V}/advance`),_.success("Stage advanced successfully"),le(),(H==null?void 0:H._id)===V&&E(V)}catch(xe){_.error(((ne=(te=xe==null?void 0:xe.response)==null?void 0:te.data)==null?void 0:ne.message)||"Failed to advance stage")}},Z=async(V,te)=>{var ne,xe;try{await J.put(`/offboarding/${V}/cancel`,{reason:te}),_.success("Offboarding cancelled successfully"),le(),(H==null?void 0:H._id)===V&&(w(!1),U(null))}catch(he){_.error(((xe=(ne=he==null?void 0:he.response)==null?void 0:ne.data)==null?void 0:xe.message)||"Failed to cancel offboarding")}},re=async V=>{var te,ne;if(window.confirm("Are you sure you want to delete this offboarding record?"))try{await J.delete(`/offboarding/${V}`),_.success("Offboarding deleted successfully"),le(),(H==null?void 0:H._id)===V&&(w(!1),U(null))}catch(xe){_.error(((ne=(te=xe==null?void 0:xe.response)==null?void 0:te.data)==null?void 0:ne.message)||"Failed to delete offboarding")}},ie=async(V,te)=>{var ne,xe;try{await J.post(`/offboarding/${V}/exit-interview/schedule`,te),_.success("Exit interview scheduled successfully"),le(),(H==null?void 0:H._id)===V&&E(V),C(!1)}catch(he){_.error(((xe=(ne=he==null?void 0:he.response)==null?void 0:ne.data)==null?void 0:xe.message)||"Failed to schedule exit interview")}},oe=async(V,te)=>{var ne,xe;try{await J.post(`/offboarding/${V}/exit-interview/complete`,{feedback:te}),_.success("Exit interview completed successfully"),le(),(H==null?void 0:H._id)===V&&E(V),C(!1)}catch(he){_.error(((xe=(ne=he==null?void 0:he.response)==null?void 0:ne.data)==null?void 0:xe.message)||"Failed to complete exit interview")}},ue=async(V,te,ne,xe)=>{var he,Se;try{await J.post(`/offboarding/${V}/clearance`,{department:te,cleared:ne,notes:xe}),_.success(`${te.toUpperCase()} clearance updated successfully`),le(),(H==null?void 0:H._id)===V&&E(V),S(!1)}catch(G){_.error(((Se=(he=G==null?void 0:G.response)==null?void 0:he.data)==null?void 0:Se.message)||"Failed to update clearance")}},Ne=async(V,te,ne)=>{var xe,he;try{await J.post(`/offboarding/${V}/assets/return`,{asset:te,condition:ne}),_.success("Asset return recorded successfully"),le(),(H==null?void 0:H._id)===V&&E(V),R(!1)}catch(Se){_.error(((he=(xe=Se==null?void 0:Se.response)==null?void 0:xe.data)==null?void 0:he.message)||"Failed to record asset return")}},I=async(V,te,ne)=>{var xe,he;try{await J.post(`/offboarding/${V}/settlement`,{amount:te,paymentStatus:ne}),_.success("Settlement processed successfully"),le(),(H==null?void 0:H._id)===V&&E(V),M(!1)}catch(Se){_.error(((he=(xe=Se==null?void 0:Se.response)==null?void 0:xe.data)==null?void 0:he.message)||"Failed to process settlement")}},ce=async V=>{await E(V._id)&&w(!0)},L=async V=>{await E(V._id)&&A(!0)};return a&&t.length===0?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"w-12 h-12 border-4 border-primary-600 border-t-transparent rounded-full animate-spin"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-white",children:"Offboarding"}),e.jsx("p",{className:"text-gray-400 mt-1",children:"Manage employee exit process"})]}),e.jsxs("button",{onClick:()=>{j(!0),de()},className:"btn-primary flex items-center space-x-2 w-full sm:w-auto",children:[e.jsx(qe,{size:20}),e.jsx("span",{children:"Initiate Offboarding"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx("div",{className:"card p-4",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 rounded-lg bg-blue-500",children:e.jsx(Ue,{size:20,className:"text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-400",children:"Total"}),e.jsx("p",{className:"text-xl font-bold text-white",children:n.total||0})]})]})}),e.jsx("div",{className:"card p-4",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 rounded-lg bg-yellow-500",children:e.jsx(Be,{size:20,className:"text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-400",children:"In Progress"}),e.jsx("p",{className:"text-xl font-bold text-white",children:n.inProgress||0})]})]})}),e.jsx("div",{className:"card p-4",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 rounded-lg bg-green-500",children:e.jsx(Te,{size:20,className:"text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-400",children:"Completed"}),e.jsx("p",{className:"text-xl font-bold text-white",children:n.completed||0})]})]})}),e.jsx("div",{className:"card p-4",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 rounded-lg bg-red-500",children:e.jsx(Le,{size:20,className:"text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-400",children:"Cancelled"}),e.jsx("p",{className:"text-xl font-bold text-white",children:n.cancelled||0})]})]})})]}),e.jsx("div",{className:"card p-4",children:e.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[e.jsxs("div",{className:"flex items-center space-x-2 flex-1 min-w-[250px]",children:[e.jsx(yt,{size:16,className:"text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search by employee name, email, or code...",value:x,onChange:V=>{u(V.target.value),D(1)},className:"input-field w-full"})]}),e.jsxs("select",{value:l,onChange:V=>{c(V.target.value),D(1)},className:"input-field w-48",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"in-progress",children:"In Progress"}),e.jsx("option",{value:"completed",children:"Completed"}),e.jsx("option",{value:"cancelled",children:"Cancelled"})]}),e.jsxs("select",{value:o,onChange:V=>{d(V.target.value),D(1)},className:"input-field w-48",children:[e.jsx("option",{value:"",children:"All Stages"}),po.map(V=>e.jsx("option",{value:V.key,children:V.label},V.key))]}),e.jsxs("button",{onClick:()=>{c("all"),d(""),u(""),D(1)},className:"btn-outline text-sm",children:[e.jsx(Vs,{size:16,className:"mr-2"}),"Clear Filters"]})]})}),e.jsx("div",{className:"space-y-4",children:t.map(V=>e.jsx(Vv,{item:V,onViewDetails:ce,onEdit:L,onAdvanceStage:P,onCancel:Z,onDelete:re,onScheduleExitInterview:te=>{U(V),C(!0)},onUpdateClearance:te=>{U(V),S(!0)},onRecordAsset:te=>{U(V),R(!0)},onProcessSettlement:te=>{U(V),M(!0)}},V._id))}),t.length===0&&!a&&e.jsxs("div",{className:"text-center py-12 card",children:[e.jsx(Ue,{size:48,className:"mx-auto text-gray-600 mb-4"}),e.jsx("p",{className:"text-gray-400 text-lg",children:"No offboarding records found"}),e.jsx("p",{className:"text-gray-500 text-sm mt-2",children:x||l!=="all"||o?"Try adjusting your filters":"Initiate an offboarding process to get started"})]}),g>1&&e.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[e.jsx("button",{onClick:()=>D(Math.max(1,X-1)),disabled:X===1,className:"btn-outline disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),e.jsxs("span",{className:"text-gray-400 px-4",children:["Page ",X," of ",g]}),e.jsx("button",{onClick:()=>D(Math.min(g,X+1)),disabled:X===g,className:"btn-outline disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]}),p&&e.jsx(Hv,{employees:W,onClose:()=>j(!1),onSubmit:z}),v&&H&&e.jsx(qv,{offboarding:H,onClose:()=>{w(!1),U(null)},onRefresh:()=>E(H._id),onEdit:()=>{w(!1),A(!0)},onAdvanceStage:P,onScheduleExitInterview:()=>C(!0),onUpdateClearance:()=>S(!0),onRecordAsset:()=>R(!0),onProcessSettlement:()=>M(!0),onCancel:Z,onDelete:re}),b&&H&&e.jsx(Wv,{offboarding:H,onClose:()=>{A(!1),U(null)},onSave:V=>O(H._id,V)}),N&&H&&e.jsx(Gv,{offboarding:H,employees:W,onClose:()=>{C(!1)},onSchedule:V=>ie(H._id,V),onComplete:V=>oe(H._id,V)}),k&&H&&e.jsx(Yv,{offboarding:H,onClose:()=>{S(!1)},onUpdate:(V,te,ne)=>ue(H._id,V,te,ne)}),F&&H&&e.jsx(Zv,{offboarding:H,onClose:()=>{R(!1)},onRecord:(V,te)=>Ne(H._id,V,te)}),T&&H&&e.jsx(Jv,{offboarding:H,onClose:()=>{M(!1)},onProcess:(V,te)=>I(H._id,V,te)})]})},Vv=({item:t,onViewDetails:s,onEdit:a,onAdvanceStage:r,onCancel:n,onDelete:i,onScheduleExitInterview:l,onUpdateClearance:c,onRecordAsset:o,onProcessSettlement:d})=>{var g;const[x,u]=y.useState(!1),m=t.employee||{},f=Dx[t.status]||Dx["in-progress"];return e.jsxs("div",{className:"card hover:border-primary-600 transition-colors",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[e.jsx("div",{className:"w-12 h-12 bg-primary-600/20 rounded-lg flex items-center justify-center",children:e.jsx(_t,{size:24,className:"text-primary-500"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-white",children:m.firstName&&m.lastName?`${m.firstName} ${m.lastName}`:"Employee Name Not Available"}),e.jsx("p",{className:"text-sm text-gray-400",children:m.email||"Email not available"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mt-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Employee Code"}),e.jsx("p",{className:"text-sm text-gray-300",children:m.employeeCode||"N/A"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Department"}),e.jsx("p",{className:"text-sm text-gray-300",children:((g=m.department)==null?void 0:g.name)||"N/A"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Resignation Type"}),e.jsx("p",{className:"text-sm text-gray-300 capitalize",children:rh[t.resignationType]||t.resignationType||"N/A"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Last Working Date"}),e.jsx("p",{className:"text-sm text-gray-300",children:t.lastWorkingDate?new Date(t.lastWorkingDate).toLocaleDateString():"N/A"})]})]})]}),e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx("span",{className:`badge ${f.badge}`,children:f.label}),e.jsxs("div",{className:"relative",children:[e.jsx("button",{onClick:()=>u(!x),className:"p-2 rounded-lg hover:bg-gray-700 text-gray-400",children:e.jsx(Qo,{size:18})}),x&&e.jsxs("div",{className:"absolute right-0 top-10 w-48 bg-gray-800 border border-gray-700 rounded-lg shadow-lg z-10",children:[e.jsxs("button",{onClick:()=>{s(t),u(!1)},className:"w-full text-left px-4 py-2 text-sm text-white hover:bg-gray-700 flex items-center space-x-2",children:[e.jsx(Ht,{size:16}),e.jsx("span",{children:"View Details"})]}),e.jsxs("button",{onClick:()=>{a(t),u(!1)},className:"w-full text-left px-4 py-2 text-sm text-white hover:bg-gray-700 flex items-center space-x-2",children:[e.jsx($a,{size:16}),e.jsx("span",{children:"Edit"})]}),t.status==="in-progress"&&e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:()=>{r(t._id),u(!1)},className:"w-full text-left px-4 py-2 text-sm text-white hover:bg-gray-700 flex items-center space-x-2",children:[e.jsx(so,{size:16}),e.jsx("span",{children:"Advance Stage"})]}),e.jsxs("button",{onClick:()=>{if(window.confirm("Are you sure you want to cancel this offboarding?")){const h=prompt("Please provide a reason for cancellation:");h&&n(t._id,h)}u(!1)},className:"w-full text-left px-4 py-2 text-sm text-red-400 hover:bg-gray-700 flex items-center space-x-2",children:[e.jsx(Le,{size:16}),e.jsx("span",{children:"Cancel"})]})]}),e.jsxs("button",{onClick:()=>{window.confirm("Are you sure you want to delete this offboarding record?")&&i(t._id),u(!1)},className:"w-full text-left px-4 py-2 text-sm text-red-400 hover:bg-gray-700 flex items-center space-x-2 rounded-b-lg",children:[e.jsx(kt,{size:16}),e.jsx("span",{children:"Delete"})]})]})]})]})]}),e.jsx("div",{className:"mb-4",children:e.jsx(nh,{stages:t.stages,currentStage:t.currentStage,status:t.status})}),e.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-gray-700",children:[e.jsxs("div",{className:"text-sm text-gray-400",children:["Created: ",new Date(t.createdAt).toLocaleDateString()]}),t.status==="in-progress"&&e.jsx("button",{onClick:()=>r(t._id),className:"btn-primary text-sm",children:"Advance Stage"})]})]})},Hv=({employees:t,onClose:s,onSubmit:a})=>{const[r,n]=y.useState({employeeId:"",reason:"",lastWorkingDay:""}),[i,l]=y.useState(!1),c=async o=>{if(o.preventDefault(),!r.employeeId||!r.reason||!r.lastWorkingDay){_.error("Please fill all required fields");return}l(!0),await a(r),l(!1)};return e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 w-full max-w-md mx-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-white",children:"Initiate Offboarding"}),e.jsx("button",{onClick:s,className:"text-gray-400 hover:text-white",children:e.jsx(Le,{size:20})})]}),e.jsxs("form",{onSubmit:c,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Employee *"}),e.jsxs("select",{value:r.employeeId,onChange:o=>n({...r,employeeId:o.target.value}),className:"input-field w-full",required:!0,children:[e.jsx("option",{value:"",children:"Select Employee"}),t.map(o=>e.jsxs("option",{value:o._id,children:[o.firstName," ",o.lastName," - ",o.email]},o._id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Reason *"}),e.jsxs("select",{value:r.reason,onChange:o=>n({...r,reason:o.target.value}),className:"input-field w-full",required:!0,children:[e.jsx("option",{value:"",children:"Select Reason"}),e.jsx("option",{value:"voluntary_resignation",children:"Voluntary Resignation"}),e.jsx("option",{value:"involuntary_termination",children:"Involuntary Termination"}),e.jsx("option",{value:"retirement",children:"Retirement"}),e.jsx("option",{value:"contract_end",children:"Contract End"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Last Working Day *"}),e.jsx("input",{type:"date",value:r.lastWorkingDay,onChange:o=>n({...r,lastWorkingDay:o.target.value}),className:"input-field w-full",required:!0})]}),e.jsxs("div",{className:"flex space-x-3 pt-4",children:[e.jsx("button",{type:"button",onClick:s,className:"flex-1 px-4 py-2 border border-gray-600 text-gray-300 rounded-lg hover:bg-gray-700",disabled:i,children:"Cancel"}),e.jsx("button",{type:"submit",className:"flex-1 btn-primary",disabled:i,children:i?"Creating...":"Initiate Offboarding"})]})]})]})})},qv=({offboarding:t,onClose:s,onRefresh:a,onEdit:r,onAdvanceStage:n,onScheduleExitInterview:i,onUpdateClearance:l,onRecordAsset:c,onProcessSettlement:o,onCancel:d,onDelete:x})=>{var f;const u=t.employee||{},m=t.clearanceSummary||t.clearance||{};return e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-gray-800 rounded-lg w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-gray-800 border-b border-gray-700 p-6 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-bold text-white",children:[u.firstName," ",u.lastName]}),e.jsx("p",{className:"text-gray-400 mt-1",children:"Offboarding Details"})]}),e.jsx("button",{onClick:s,className:"text-gray-400 hover:text-white",children:e.jsx(Le,{size:24})})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Employee Information"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Email"}),e.jsx("p",{className:"text-sm text-gray-300",children:u.email||"N/A"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Employee Code"}),e.jsx("p",{className:"text-sm text-gray-300",children:u.employeeCode||"N/A"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Department"}),e.jsx("p",{className:"text-sm text-gray-300",children:((f=u.department)==null?void 0:f.name)||"N/A"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Designation"}),e.jsx("p",{className:"text-sm text-gray-300",children:u.designation||"N/A"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Last Working Date"}),e.jsx("p",{className:"text-sm text-gray-300",children:t.lastWorkingDate?new Date(t.lastWorkingDate).toLocaleDateString():"N/A"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Resignation Type"}),e.jsx("p",{className:"text-sm text-gray-300 capitalize",children:rh[t.resignationType]||t.resignationType||"N/A"})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Stage Progress"}),e.jsx(nh,{stages:t.stages,currentStage:t.currentStage,status:t.status})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Clearance Status"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:["hr","finance","it","admin"].map(g=>{var h,p,j;return e.jsxs("div",{className:"card p-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-300 mb-2 capitalize",children:g}),e.jsx("div",{className:`badge ${(h=m[g])!=null&&h.cleared?"badge-success":"badge-warning"}`,children:(p=m[g])!=null&&p.cleared?"Cleared":"Pending"}),((j=m[g])==null?void 0:j.clearedAt)&&e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:new Date(m[g].clearedAt).toLocaleDateString()})]},g)})})]}),t.exitInterview&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Exit Interview"}),e.jsx("div",{className:"card p-4",children:t.exitInterview.completed?e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-green-400 mb-2",children:"Completed"}),t.exitInterview.feedback&&e.jsx("p",{className:"text-sm text-gray-300",children:t.exitInterview.feedback})]}):t.exitInterview.scheduledDate?e.jsxs("p",{className:"text-sm text-gray-300",children:["Scheduled for ",new Date(t.exitInterview.scheduledDate).toLocaleDateString()]}):e.jsx("p",{className:"text-sm text-gray-400",children:"Not scheduled"})})]}),t.finalSettlement&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Final Settlement"}),e.jsx("div",{className:"card p-4",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Amount"}),e.jsx("p",{className:"text-sm text-gray-300",children:t.finalSettlement.amount?`â‚¹${t.finalSettlement.amount.toLocaleString()}`:"N/A"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Payment Status"}),e.jsx("p",{className:"text-sm text-gray-300 capitalize",children:t.finalSettlement.paymentStatus||"Pending"})]})]})})]}),t.status==="in-progress"&&e.jsxs("div",{className:"flex flex-wrap gap-2 pt-4 border-t border-gray-700",children:[e.jsx("button",{onClick:()=>n(t._id),className:"btn-primary",children:"Advance Stage"}),e.jsx("button",{onClick:i,className:"btn-outline",children:"Schedule Exit Interview"}),e.jsx("button",{onClick:l,className:"btn-outline",children:"Update Clearance"}),e.jsx("button",{onClick:c,className:"btn-outline",children:"Record Asset Return"}),e.jsx("button",{onClick:o,className:"btn-outline",children:"Process Settlement"})]})]})]})})},Wv=({offboarding:t,onClose:s,onSave:a})=>{const[r,n]=y.useState({lastWorkingDate:t.lastWorkingDate?new Date(t.lastWorkingDate).toISOString().split("T")[0]:"",reason:t.reason||"",notes:t.notes||""}),[i,l]=y.useState(!1),c=async o=>{o.preventDefault(),l(!0),await a(r),l(!1)};return e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 w-full max-w-md mx-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-white",children:"Edit Offboarding"}),e.jsx("button",{onClick:s,className:"text-gray-400 hover:text-white",children:e.jsx(Le,{size:20})})]}),e.jsxs("form",{onSubmit:c,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Last Working Date"}),e.jsx("input",{type:"date",value:r.lastWorkingDate,onChange:o=>n({...r,lastWorkingDate:o.target.value}),className:"input-field w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Notes"}),e.jsx("textarea",{value:r.notes,onChange:o=>n({...r,notes:o.target.value}),className:"input-field w-full",rows:"4"})]}),e.jsxs("div",{className:"flex space-x-3 pt-4",children:[e.jsx("button",{type:"button",onClick:s,className:"flex-1 px-4 py-2 border border-gray-600 text-gray-300 rounded-lg hover:bg-gray-700",disabled:i,children:"Cancel"}),e.jsx("button",{type:"submit",className:"flex-1 btn-primary",disabled:i,children:i?"Saving...":"Save Changes"})]})]})]})})},Gv=({offboarding:t,employees:s,onClose:a,onSchedule:r,onComplete:n})=>{var u,m;const[i,l]=y.useState(""),[c,o]=y.useState(""),[d,x]=y.useState("");return(u=t.exitInterview)!=null&&u.completed?e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 w-full max-w-md mx-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-white",children:"Exit Interview"}),e.jsx("button",{onClick:a,className:"text-gray-400 hover:text-white",children:e.jsx(Le,{size:20})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-green-400",children:"Exit interview completed"}),t.exitInterview.feedback&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-400 mb-2",children:"Feedback:"}),e.jsx("p",{className:"text-sm text-gray-300",children:t.exitInterview.feedback})]}),e.jsx("button",{onClick:a,className:"btn-primary w-full",children:"Close"})]})]})}):e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 w-full max-w-md mx-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-white",children:"Exit Interview"}),e.jsx("button",{onClick:a,className:"text-gray-400 hover:text-white",children:e.jsx(Le,{size:20})})]}),(m=t.exitInterview)!=null&&m.scheduledDate?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("p",{className:"text-gray-300",children:["Scheduled for ",new Date(t.exitInterview.scheduledDate).toLocaleDateString()]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Feedback"}),e.jsx("textarea",{value:d,onChange:f=>x(f.target.value),className:"input-field w-full",rows:"4",placeholder:"Enter exit interview feedback..."})]}),e.jsx("button",{onClick:()=>n(d),className:"btn-primary w-full",children:"Complete Interview"})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Scheduled Date"}),e.jsx("input",{type:"date",value:i,onChange:f=>l(f.target.value),className:"input-field w-full"})]}),e.jsx("button",{onClick:()=>r({scheduledDate:i,conductedBy:c}),className:"btn-primary w-full",children:"Schedule Interview"})]})]})})},Yv=({offboarding:t,onClose:s,onUpdate:a})=>{const[r,n]=y.useState("hr"),[i,l]=y.useState(!1),[c,o]=y.useState(""),d=x=>{x.preventDefault(),a(r,i,c)};return e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 w-full max-w-md mx-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-white",children:"Update Clearance"}),e.jsx("button",{onClick:s,className:"text-gray-400 hover:text-white",children:e.jsx(Le,{size:20})})]}),e.jsxs("form",{onSubmit:d,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Department"}),e.jsxs("select",{value:r,onChange:x=>n(x.target.value),className:"input-field w-full",children:[e.jsx("option",{value:"hr",children:"HR"}),e.jsx("option",{value:"finance",children:"Finance"}),e.jsx("option",{value:"it",children:"IT"}),e.jsx("option",{value:"admin",children:"Admin"})]})]}),e.jsx("div",{children:e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",checked:i,onChange:x=>l(x.target.checked),className:"rounded"}),e.jsx("span",{className:"text-sm text-gray-300",children:"Mark as Cleared"})]})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Notes"}),e.jsx("textarea",{value:c,onChange:x=>o(x.target.value),className:"input-field w-full",rows:"3"})]}),e.jsxs("div",{className:"flex space-x-3 pt-4",children:[e.jsx("button",{type:"button",onClick:s,className:"flex-1 px-4 py-2 border border-gray-600 text-gray-300 rounded-lg hover:bg-gray-700",children:"Cancel"}),e.jsx("button",{type:"submit",className:"flex-1 btn-primary",children:"Update Clearance"})]})]})]})})},Zv=({offboarding:t,onClose:s,onRecord:a})=>{const[r,n]=y.useState(""),[i,l]=y.useState(""),c=o=>{if(o.preventDefault(),!r||!i){_.error("Please fill all required fields");return}a(r,i)};return e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 w-full max-w-md mx-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-white",children:"Record Asset Return"}),e.jsx("button",{onClick:s,className:"text-gray-400 hover:text-white",children:e.jsx(Le,{size:20})})]}),e.jsxs("form",{onSubmit:c,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Asset ID"}),e.jsx("input",{type:"text",value:r,onChange:o=>n(o.target.value),className:"input-field w-full",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Condition"}),e.jsx("textarea",{value:i,onChange:o=>l(o.target.value),className:"input-field w-full",rows:"3",required:!0})]}),e.jsxs("div",{className:"flex space-x-3 pt-4",children:[e.jsx("button",{type:"button",onClick:s,className:"flex-1 px-4 py-2 border border-gray-600 text-gray-300 rounded-lg hover:bg-gray-700",children:"Cancel"}),e.jsx("button",{type:"submit",className:"flex-1 btn-primary",children:"Record Return"})]})]})]})})},Jv=({offboarding:t,onClose:s,onProcess:a})=>{var o,d;const[r,n]=y.useState(((o=t.finalSettlement)==null?void 0:o.amount)||""),[i,l]=y.useState(((d=t.finalSettlement)==null?void 0:d.paymentStatus)||"pending"),c=x=>{x.preventDefault(),a(parseFloat(r),i)};return e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 w-full max-w-md mx-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-white",children:"Process Settlement"}),e.jsx("button",{onClick:s,className:"text-gray-400 hover:text-white",children:e.jsx(Le,{size:20})})]}),e.jsxs("form",{onSubmit:c,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Settlement Amount"}),e.jsx("input",{type:"number",value:r,onChange:x=>n(x.target.value),className:"input-field w-full",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Payment Status"}),e.jsxs("select",{value:i,onChange:x=>l(x.target.value),className:"input-field w-full",children:[e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"processed",children:"Processed"}),e.jsx("option",{value:"completed",children:"Completed"})]})]}),e.jsxs("div",{className:"flex space-x-3 pt-4",children:[e.jsx("button",{type:"button",onClick:s,className:"flex-1 px-4 py-2 border border-gray-600 text-gray-300 rounded-lg hover:bg-gray-700",children:"Cancel"}),e.jsx("button",{type:"submit",className:"flex-1 btn-primary",children:"Process Settlement"})]})]})]})})};var ih={exports:{}};/* @license
Papa Parse
v5.5.3
https://github.com/mholt/PapaParse
License: MIT
*/(function(t,s){((a,r)=>{t.exports=r()})(ug,function a(){var r=typeof self<"u"?self:typeof window<"u"?window:r!==void 0?r:{},n,i=!r.document&&!!r.postMessage,l=r.IS_PAPA_WORKER||!1,c={},o=0,d={};function x(k){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(S){var F=A(S);F.chunkSize=parseInt(F.chunkSize),S.step||S.chunk||(F.chunkSize=null),this._handle=new h(F),(this._handle.streamer=this)._config=F}).call(this,k),this.parseChunk=function(S,F){var R=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<R){let M=this._config.newline;M||(T=this._config.quoteChar||'"',M=this._handle.guessLineEndings(S,T)),S=[...S.split(M).slice(R)].join(M)}this.isFirstChunk&&C(this._config.beforeFirstChunk)&&(T=this._config.beforeFirstChunk(S))!==void 0&&(S=T),this.isFirstChunk=!1,this._halted=!1;var R=this._partialLine+S,T=(this._partialLine="",this._handle.parse(R,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(S=T.meta.cursor,R=(this._finished||(this._partialLine=R.substring(S-this._baseIndex),this._baseIndex=S),T&&T.data&&(this._rowCount+=T.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),l)r.postMessage({results:T,workerId:d.WORKER_ID,finished:R});else if(C(this._config.chunk)&&!F){if(this._config.chunk(T,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=T=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(T.data),this._completeResults.errors=this._completeResults.errors.concat(T.errors),this._completeResults.meta=T.meta),this._completed||!R||!C(this._config.complete)||T&&T.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),R||T&&T.meta.paused||this._nextChunk(),T}this._halted=!0},this._sendError=function(S){C(this._config.error)?this._config.error(S):l&&this._config.error&&r.postMessage({workerId:d.WORKER_ID,error:S,finished:!1})}}function u(k){var S;(k=k||{}).chunkSize||(k.chunkSize=d.RemoteChunkSize),x.call(this,k),this._nextChunk=i?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(F){this._input=F,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(S=new XMLHttpRequest,this._config.withCredentials&&(S.withCredentials=this._config.withCredentials),i||(S.onload=N(this._chunkLoaded,this),S.onerror=N(this._chunkError,this)),S.open(this._config.downloadRequestBody?"POST":"GET",this._input,!i),this._config.downloadRequestHeaders){var F,R=this._config.downloadRequestHeaders;for(F in R)S.setRequestHeader(F,R[F])}var T;this._config.chunkSize&&(T=this._start+this._config.chunkSize-1,S.setRequestHeader("Range","bytes="+this._start+"-"+T));try{S.send(this._config.downloadRequestBody)}catch(M){this._chunkError(M.message)}i&&S.status===0&&this._chunkError()}},this._chunkLoaded=function(){S.readyState===4&&(S.status<200||400<=S.status?this._chunkError():(this._start+=this._config.chunkSize||S.responseText.length,this._finished=!this._config.chunkSize||this._start>=(F=>(F=F.getResponseHeader("Content-Range"))!==null?parseInt(F.substring(F.lastIndexOf("/")+1)):-1)(S),this.parseChunk(S.responseText)))},this._chunkError=function(F){F=S.statusText||F,this._sendError(new Error(F))}}function m(k){(k=k||{}).chunkSize||(k.chunkSize=d.LocalChunkSize),x.call(this,k);var S,F,R=typeof FileReader<"u";this.stream=function(T){this._input=T,F=T.slice||T.webkitSlice||T.mozSlice,R?((S=new FileReader).onload=N(this._chunkLoaded,this),S.onerror=N(this._chunkError,this)):S=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var T=this._input,M=(this._config.chunkSize&&(M=Math.min(this._start+this._config.chunkSize,this._input.size),T=F.call(T,this._start,M)),S.readAsText(T,this._config.encoding));R||this._chunkLoaded({target:{result:M}})},this._chunkLoaded=function(T){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(T.target.result)},this._chunkError=function(){this._sendError(S.error)}}function f(k){var S;x.call(this,k=k||{}),this.stream=function(F){return S=F,this._nextChunk()},this._nextChunk=function(){var F,R;if(!this._finished)return F=this._config.chunkSize,S=F?(R=S.substring(0,F),S.substring(F)):(R=S,""),this._finished=!S,this.parseChunk(R)}}function g(k){x.call(this,k=k||{});var S=[],F=!0,R=!1;this.pause=function(){x.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){x.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(T){this._input=T,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){R&&S.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),S.length?this.parseChunk(S.shift()):F=!0},this._streamData=N(function(T){try{S.push(typeof T=="string"?T:T.toString(this._config.encoding)),F&&(F=!1,this._checkIsFinished(),this.parseChunk(S.shift()))}catch(M){this._streamError(M)}},this),this._streamError=N(function(T){this._streamCleanUp(),this._sendError(T)},this),this._streamEnd=N(function(){this._streamCleanUp(),R=!0,this._streamData("")},this),this._streamCleanUp=N(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function h(k){var S,F,R,T,M=Math.pow(2,53),H=-M,U=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,W=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,se=this,X=0,D=0,le=!1,de=!1,E=[],z={data:[],errors:[],meta:{}};function O(ie){return k.skipEmptyLines==="greedy"?ie.join("").trim()==="":ie.length===1&&ie[0].length===0}function P(){if(z&&R&&(re("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+d.DefaultDelimiter+"'"),R=!1),k.skipEmptyLines&&(z.data=z.data.filter(function(Ne){return!O(Ne)})),Z()){let Ne=function(I,ce){C(k.transformHeader)&&(I=k.transformHeader(I,ce)),E.push(I)};if(z)if(Array.isArray(z.data[0])){for(var ie=0;Z()&&ie<z.data.length;ie++)z.data[ie].forEach(Ne);z.data.splice(0,1)}else z.data.forEach(Ne)}function oe(Ne,I){for(var ce=k.header?{}:[],L=0;L<Ne.length;L++){var V=L,te=Ne[L],te=((ne,xe)=>(he=>(k.dynamicTypingFunction&&k.dynamicTyping[he]===void 0&&(k.dynamicTyping[he]=k.dynamicTypingFunction(he)),(k.dynamicTyping[he]||k.dynamicTyping)===!0))(ne)?xe==="true"||xe==="TRUE"||xe!=="false"&&xe!=="FALSE"&&((he=>{if(U.test(he)&&(he=parseFloat(he),H<he&&he<M))return 1})(xe)?parseFloat(xe):W.test(xe)?new Date(xe):xe===""?null:xe):xe)(V=k.header?L>=E.length?"__parsed_extra":E[L]:V,te=k.transform?k.transform(te,V):te);V==="__parsed_extra"?(ce[V]=ce[V]||[],ce[V].push(te)):ce[V]=te}return k.header&&(L>E.length?re("FieldMismatch","TooManyFields","Too many fields: expected "+E.length+" fields but parsed "+L,D+I):L<E.length&&re("FieldMismatch","TooFewFields","Too few fields: expected "+E.length+" fields but parsed "+L,D+I)),ce}var ue;z&&(k.header||k.dynamicTyping||k.transform)&&(ue=1,!z.data.length||Array.isArray(z.data[0])?(z.data=z.data.map(oe),ue=z.data.length):z.data=oe(z.data,0),k.header&&z.meta&&(z.meta.fields=E),D+=ue)}function Z(){return k.header&&E.length===0}function re(ie,oe,ue,Ne){ie={type:ie,code:oe,message:ue},Ne!==void 0&&(ie.row=Ne),z.errors.push(ie)}C(k.step)&&(T=k.step,k.step=function(ie){z=ie,Z()?P():(P(),z.data.length!==0&&(X+=ie.data.length,k.preview&&X>k.preview?F.abort():(z.data=z.data[0],T(z,se))))}),this.parse=function(ie,oe,ue){var Ne=k.quoteChar||'"',Ne=(k.newline||(k.newline=this.guessLineEndings(ie,Ne)),R=!1,k.delimiter?C(k.delimiter)&&(k.delimiter=k.delimiter(ie),z.meta.delimiter=k.delimiter):((Ne=((I,ce,L,V,te)=>{var ne,xe,he,Se;te=te||[",","	","|",";",d.RECORD_SEP,d.UNIT_SEP];for(var G=0;G<te.length;G++){for(var Q,me=te[G],je=0,Ae=0,we=0,_e=(he=void 0,new j({comments:V,delimiter:me,newline:ce,preview:10}).parse(I)),Re=0;Re<_e.data.length;Re++)L&&O(_e.data[Re])?we++:(Q=_e.data[Re].length,Ae+=Q,he===void 0?he=Q:0<Q&&(je+=Math.abs(Q-he),he=Q));0<_e.data.length&&(Ae/=_e.data.length-we),(xe===void 0||je<=xe)&&(Se===void 0||Se<Ae)&&1.99<Ae&&(xe=je,ne=me,Se=Ae)}return{successful:!!(k.delimiter=ne),bestDelimiter:ne}})(ie,k.newline,k.skipEmptyLines,k.comments,k.delimitersToGuess)).successful?k.delimiter=Ne.bestDelimiter:(R=!0,k.delimiter=d.DefaultDelimiter),z.meta.delimiter=k.delimiter),A(k));return k.preview&&k.header&&Ne.preview++,S=ie,F=new j(Ne),z=F.parse(S,oe,ue),P(),le?{meta:{paused:!0}}:z||{meta:{paused:!1}}},this.paused=function(){return le},this.pause=function(){le=!0,F.abort(),S=C(k.chunk)?"":S.substring(F.getCharIndex())},this.resume=function(){se.streamer._halted?(le=!1,se.streamer.parseChunk(S,!0)):setTimeout(se.resume,3)},this.aborted=function(){return de},this.abort=function(){de=!0,F.abort(),z.meta.aborted=!0,C(k.complete)&&k.complete(z),S=""},this.guessLineEndings=function(I,Ne){I=I.substring(0,1048576);var Ne=new RegExp(p(Ne)+"([^]*?)"+p(Ne),"gm"),ue=(I=I.replace(Ne,"")).split("\r"),Ne=I.split(`
`),I=1<Ne.length&&Ne[0].length<ue[0].length;if(ue.length===1||I)return`
`;for(var ce=0,L=0;L<ue.length;L++)ue[L][0]===`
`&&ce++;return ce>=ue.length/2?`\r
`:"\r"}}function p(k){return k.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function j(k){var S=(k=k||{}).delimiter,F=k.newline,R=k.comments,T=k.step,M=k.preview,H=k.fastMode,U=null,W=!1,se=k.quoteChar==null?'"':k.quoteChar,X=se;if(k.escapeChar!==void 0&&(X=k.escapeChar),(typeof S!="string"||-1<d.BAD_DELIMITERS.indexOf(S))&&(S=","),R===S)throw new Error("Comment character same as delimiter");R===!0?R="#":(typeof R!="string"||-1<d.BAD_DELIMITERS.indexOf(R))&&(R=!1),F!==`
`&&F!=="\r"&&F!==`\r
`&&(F=`
`);var D=0,le=!1;this.parse=function(de,E,z){if(typeof de!="string")throw new Error("Input must be a string");var O=de.length,P=S.length,Z=F.length,re=R.length,ie=C(T),oe=[],ue=[],Ne=[],I=D=0;if(!de)return je();if(H||H!==!1&&de.indexOf(se)===-1){for(var ce=de.split(F),L=0;L<ce.length;L++){if(Ne=ce[L],D+=Ne.length,L!==ce.length-1)D+=F.length;else if(z)return je();if(!R||Ne.substring(0,re)!==R){if(ie){if(oe=[],Se(Ne.split(S)),Ae(),le)return je()}else Se(Ne.split(S));if(M&&M<=L)return oe=oe.slice(0,M),je(!0)}}return je()}for(var V=de.indexOf(S,D),te=de.indexOf(F,D),ne=new RegExp(p(X)+p(se),"g"),xe=de.indexOf(se,D);;)if(de[D]===se)for(xe=D,D++;;){if((xe=de.indexOf(se,xe+1))===-1)return z||ue.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:oe.length,index:D}),Q();if(xe===O-1)return Q(de.substring(D,xe).replace(ne,se));if(se===X&&de[xe+1]===X)xe++;else if(se===X||xe===0||de[xe-1]!==X){V!==-1&&V<xe+1&&(V=de.indexOf(S,xe+1));var he=G((te=te!==-1&&te<xe+1?de.indexOf(F,xe+1):te)===-1?V:Math.min(V,te));if(de.substr(xe+1+he,P)===S){Ne.push(de.substring(D,xe).replace(ne,se)),de[D=xe+1+he+P]!==se&&(xe=de.indexOf(se,D)),V=de.indexOf(S,D),te=de.indexOf(F,D);break}if(he=G(te),de.substring(xe+1+he,xe+1+he+Z)===F){if(Ne.push(de.substring(D,xe).replace(ne,se)),me(xe+1+he+Z),V=de.indexOf(S,D),xe=de.indexOf(se,D),ie&&(Ae(),le))return je();if(M&&oe.length>=M)return je(!0);break}ue.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:oe.length,index:D}),xe++}}else if(R&&Ne.length===0&&de.substring(D,D+re)===R){if(te===-1)return je();D=te+Z,te=de.indexOf(F,D),V=de.indexOf(S,D)}else if(V!==-1&&(V<te||te===-1))Ne.push(de.substring(D,V)),D=V+P,V=de.indexOf(S,D);else{if(te===-1)break;if(Ne.push(de.substring(D,te)),me(te+Z),ie&&(Ae(),le))return je();if(M&&oe.length>=M)return je(!0)}return Q();function Se(we){oe.push(we),I=D}function G(we){var _e=0;return _e=we!==-1&&(we=de.substring(xe+1,we))&&we.trim()===""?we.length:_e}function Q(we){return z||(we===void 0&&(we=de.substring(D)),Ne.push(we),D=O,Se(Ne),ie&&Ae()),je()}function me(we){D=we,Se(Ne),Ne=[],te=de.indexOf(F,D)}function je(we){if(k.header&&!E&&oe.length&&!W){var _e=oe[0],Re=Object.create(null),Pe=new Set(_e);let ze=!1;for(let Ye=0;Ye<_e.length;Ye++){let at=_e[Ye];if(Re[at=C(k.transformHeader)?k.transformHeader(at,Ye):at]){let ut,us=Re[at];for(;ut=at+"_"+us,us++,Pe.has(ut););Pe.add(ut),_e[Ye]=ut,Re[at]++,ze=!0,(U=U===null?{}:U)[ut]=at}else Re[at]=1,_e[Ye]=at;Pe.add(at)}ze&&console.warn("Duplicate headers found and renamed."),W=!0}return{data:oe,errors:ue,meta:{delimiter:S,linebreak:F,aborted:le,truncated:!!we,cursor:I+(E||0),renamedHeaders:U}}}function Ae(){T(je()),oe=[],ue=[]}},this.abort=function(){le=!0},this.getCharIndex=function(){return D}}function v(k){var S=k.data,F=c[S.workerId],R=!1;if(S.error)F.userError(S.error,S.file);else if(S.results&&S.results.data){var T={abort:function(){R=!0,w(S.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:b,resume:b};if(C(F.userStep)){for(var M=0;M<S.results.data.length&&(F.userStep({data:S.results.data[M],errors:S.results.errors,meta:S.results.meta},T),!R);M++);delete S.results}else C(F.userChunk)&&(F.userChunk(S.results,T,S.file),delete S.results)}S.finished&&!R&&w(S.workerId,S.results)}function w(k,S){var F=c[k];C(F.userComplete)&&F.userComplete(S),F.terminate(),delete c[k]}function b(){throw new Error("Not implemented.")}function A(k){if(typeof k!="object"||k===null)return k;var S,F=Array.isArray(k)?[]:{};for(S in k)F[S]=A(k[S]);return F}function N(k,S){return function(){k.apply(S,arguments)}}function C(k){return typeof k=="function"}return d.parse=function(k,S){var F=(S=S||{}).dynamicTyping||!1;if(C(F)&&(S.dynamicTypingFunction=F,F={}),S.dynamicTyping=F,S.transform=!!C(S.transform)&&S.transform,!S.worker||!d.WORKERS_SUPPORTED)return F=null,d.NODE_STREAM_INPUT,typeof k=="string"?(k=(R=>R.charCodeAt(0)!==65279?R:R.slice(1))(k),F=new(S.download?u:f)(S)):k.readable===!0&&C(k.read)&&C(k.on)?F=new g(S):(r.File&&k instanceof File||k instanceof Object)&&(F=new m(S)),F.stream(k);(F=(()=>{var R;return!!d.WORKERS_SUPPORTED&&(R=(()=>{var T=r.URL||r.webkitURL||null,M=a.toString();return d.BLOB_URL||(d.BLOB_URL=T.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",M,")();"],{type:"text/javascript"})))})(),(R=new r.Worker(R)).onmessage=v,R.id=o++,c[R.id]=R)})()).userStep=S.step,F.userChunk=S.chunk,F.userComplete=S.complete,F.userError=S.error,S.step=C(S.step),S.chunk=C(S.chunk),S.complete=C(S.complete),S.error=C(S.error),delete S.worker,F.postMessage({input:k,config:S,workerId:F.id})},d.unparse=function(k,S){var F=!1,R=!0,T=",",M=`\r
`,H='"',U=H+H,W=!1,se=null,X=!1,D=((()=>{if(typeof S=="object"){if(typeof S.delimiter!="string"||d.BAD_DELIMITERS.filter(function(E){return S.delimiter.indexOf(E)!==-1}).length||(T=S.delimiter),typeof S.quotes!="boolean"&&typeof S.quotes!="function"&&!Array.isArray(S.quotes)||(F=S.quotes),typeof S.skipEmptyLines!="boolean"&&typeof S.skipEmptyLines!="string"||(W=S.skipEmptyLines),typeof S.newline=="string"&&(M=S.newline),typeof S.quoteChar=="string"&&(H=S.quoteChar),typeof S.header=="boolean"&&(R=S.header),Array.isArray(S.columns)){if(S.columns.length===0)throw new Error("Option columns is empty");se=S.columns}S.escapeChar!==void 0&&(U=S.escapeChar+H),S.escapeFormulae instanceof RegExp?X=S.escapeFormulae:typeof S.escapeFormulae=="boolean"&&S.escapeFormulae&&(X=/^[=+\-@\t\r].*$/)}})(),new RegExp(p(H),"g"));if(typeof k=="string"&&(k=JSON.parse(k)),Array.isArray(k)){if(!k.length||Array.isArray(k[0]))return le(null,k,W);if(typeof k[0]=="object")return le(se||Object.keys(k[0]),k,W)}else if(typeof k=="object")return typeof k.data=="string"&&(k.data=JSON.parse(k.data)),Array.isArray(k.data)&&(k.fields||(k.fields=k.meta&&k.meta.fields||se),k.fields||(k.fields=Array.isArray(k.data[0])?k.fields:typeof k.data[0]=="object"?Object.keys(k.data[0]):[]),Array.isArray(k.data[0])||typeof k.data[0]=="object"||(k.data=[k.data])),le(k.fields||[],k.data||[],W);throw new Error("Unable to serialize unrecognized input");function le(E,z,O){var P="",Z=(typeof E=="string"&&(E=JSON.parse(E)),typeof z=="string"&&(z=JSON.parse(z)),Array.isArray(E)&&0<E.length),re=!Array.isArray(z[0]);if(Z&&R){for(var ie=0;ie<E.length;ie++)0<ie&&(P+=T),P+=de(E[ie],ie);0<z.length&&(P+=M)}for(var oe=0;oe<z.length;oe++){var ue=(Z?E:z[oe]).length,Ne=!1,I=Z?Object.keys(z[oe]).length===0:z[oe].length===0;if(O&&!Z&&(Ne=O==="greedy"?z[oe].join("").trim()==="":z[oe].length===1&&z[oe][0].length===0),O==="greedy"&&Z){for(var ce=[],L=0;L<ue;L++){var V=re?E[L]:L;ce.push(z[oe][V])}Ne=ce.join("").trim()===""}if(!Ne){for(var te=0;te<ue;te++){0<te&&!I&&(P+=T);var ne=Z&&re?E[te]:te;P+=de(z[oe][ne],te)}oe<z.length-1&&(!O||0<ue&&!I)&&(P+=M)}}return P}function de(E,z){var O,P;return E==null?"":E.constructor===Date?JSON.stringify(E).slice(1,25):(P=!1,X&&typeof E=="string"&&X.test(E)&&(E="'"+E,P=!0),O=E.toString().replace(D,U),(P=P||F===!0||typeof F=="function"&&F(E,z)||Array.isArray(F)&&F[z]||((Z,re)=>{for(var ie=0;ie<re.length;ie++)if(-1<Z.indexOf(re[ie]))return!0;return!1})(O,d.BAD_DELIMITERS)||-1<O.indexOf(T)||O.charAt(0)===" "||O.charAt(O.length-1)===" ")?H+O+H:O)}},d.RECORD_SEP="",d.UNIT_SEP="",d.BYTE_ORDER_MARK="\uFEFF",d.BAD_DELIMITERS=["\r",`
`,'"',d.BYTE_ORDER_MARK],d.WORKERS_SUPPORTED=!i&&!!r.Worker,d.NODE_STREAM_INPUT=1,d.LocalChunkSize=10485760,d.RemoteChunkSize=5242880,d.DefaultDelimiter=",",d.Parser=j,d.ParserHandle=h,d.NetworkStreamer=u,d.FileStreamer=m,d.StringStreamer=f,d.ReadableStreamStreamer=g,r.jQuery&&((n=r.jQuery).fn.parse=function(k){var S=k.config||{},F=[];return this.each(function(M){if(!(n(this).prop("tagName").toUpperCase()==="INPUT"&&n(this).attr("type").toLowerCase()==="file"&&r.FileReader)||!this.files||this.files.length===0)return!0;for(var H=0;H<this.files.length;H++)F.push({file:this.files[H],inputElem:this,instanceConfig:n.extend({},S)})}),R(),this;function R(){if(F.length===0)C(k.complete)&&k.complete();else{var M,H,U,W,se=F[0];if(C(k.before)){var X=k.before(se.file,se.inputElem);if(typeof X=="object"){if(X.action==="abort")return M="AbortError",H=se.file,U=se.inputElem,W=X.reason,void(C(k.error)&&k.error({name:M},H,U,W));if(X.action==="skip")return void T();typeof X.config=="object"&&(se.instanceConfig=n.extend(se.instanceConfig,X.config))}else if(X==="skip")return void T()}var D=se.instanceConfig.complete;se.instanceConfig.complete=function(le){C(D)&&D(le,se.file,se.inputElem),T()},d.parse(se.file,se.instanceConfig)}}function T(){F.splice(0,1),R()}}),l&&(r.onmessage=function(k){k=k.data,d.WORKER_ID===void 0&&k&&(d.WORKER_ID=k.workerId),typeof k.input=="string"?r.postMessage({workerId:d.WORKER_ID,results:d.parse(k.input,k.config),finished:!0}):(r.File&&k.input instanceof File||k.input instanceof Object)&&(k=d.parse(k.input,k.config))&&r.postMessage({workerId:d.WORKER_ID,results:k,finished:!0})}),(u.prototype=Object.create(x.prototype)).constructor=u,(m.prototype=Object.create(x.prototype)).constructor=m,(f.prototype=Object.create(f.prototype)).constructor=f,(g.prototype=Object.create(x.prototype)).constructor=g,d})})(ih);var Xv=ih.exports;const Px=mg(Xv);/*! xlsx.js (C) 2013-present SheetJS -- http://sheetjs.com */var lh=1252,Kv=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],id={0:1252,1:65001,2:65001,77:1e4,128:932,129:949,130:1361,134:936,136:950,161:1253,162:1254,163:1258,177:1255,178:1256,186:1257,204:1251,222:874,238:1250,255:1252,69:6969},ld=function(t){Kv.indexOf(t)!=-1&&(lh=id[0]=t)};function Qv(){ld(1252)}var ha=function(t){ld(t)};function ch(){ha(1200),Qv()}function Ix(t){for(var s=[],a=0,r=t.length;a<r;++a)s[a]=t.charCodeAt(a);return s}function ej(t){for(var s=[],a=0;a<t.length>>1;++a)s[a]=String.fromCharCode(t.charCodeAt(2*a)+(t.charCodeAt(2*a+1)<<8));return s.join("")}function oh(t){for(var s=[],a=0;a<t.length>>1;++a)s[a]=String.fromCharCode(t.charCodeAt(2*a+1)+(t.charCodeAt(2*a)<<8));return s.join("")}var zn=function(t){var s=t.charCodeAt(0),a=t.charCodeAt(1);return s==255&&a==254?ej(t.slice(2)):s==254&&a==255?oh(t.slice(2)):s==65279?t.slice(1):t},Ui=function(s){return String.fromCharCode(s)},$x=function(s){return String.fromCharCode(s)},ci,ar="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function Ox(t){for(var s="",a=0,r=0,n=0,i=0,l=0,c=0,o=0,d=0;d<t.length;)a=t.charCodeAt(d++),i=a>>2,r=t.charCodeAt(d++),l=(a&3)<<4|r>>4,n=t.charCodeAt(d++),c=(r&15)<<2|n>>6,o=n&63,isNaN(r)?c=o=64:isNaN(n)&&(o=64),s+=ar.charAt(i)+ar.charAt(l)+ar.charAt(c)+ar.charAt(o);return s}function Js(t){var s="",a=0,r=0,n=0,i=0,l=0,c=0,o=0;t=t.replace(/[^\w\+\/\=]/g,"");for(var d=0;d<t.length;)i=ar.indexOf(t.charAt(d++)),l=ar.indexOf(t.charAt(d++)),a=i<<2|l>>4,s+=String.fromCharCode(a),c=ar.indexOf(t.charAt(d++)),r=(l&15)<<4|c>>2,c!==64&&(s+=String.fromCharCode(r)),o=ar.indexOf(t.charAt(d++)),n=(c&3)<<6|o,o!==64&&(s+=String.fromCharCode(n));return s}var nt=function(){return typeof Buffer<"u"&&typeof process<"u"&&typeof process.versions<"u"&&!!process.versions.node}(),Br=function(){if(typeof Buffer<"u"){var t=!Buffer.from;if(!t)try{Buffer.from("foo","utf8")}catch{t=!0}return t?function(s,a){return a?new Buffer(s,a):new Buffer(s)}:Buffer.from.bind(Buffer)}return function(){}}();function cr(t){return nt?Buffer.alloc?Buffer.alloc(t):new Buffer(t):typeof Uint8Array<"u"?new Uint8Array(t):new Array(t)}function Lx(t){return nt?Buffer.allocUnsafe?Buffer.allocUnsafe(t):new Buffer(t):typeof Uint8Array<"u"?new Uint8Array(t):new Array(t)}var ua=function(s){return nt?Br(s,"binary"):s.split("").map(function(a){return a.charCodeAt(0)&255})};function zr(t){if(Array.isArray(t))return t.map(function(r){return String.fromCharCode(r)}).join("");for(var s=[],a=0;a<t.length;++a)s[a]=String.fromCharCode(t[a]);return s.join("")}function cd(t){if(typeof ArrayBuffer>"u")throw new Error("Unsupported");if(t instanceof ArrayBuffer)return cd(new Uint8Array(t));for(var s=new Array(t.length),a=0;a<t.length;++a)s[a]=t[a];return s}var tr=nt?function(t){return Buffer.concat(t.map(function(s){return Buffer.isBuffer(s)?s:Br(s)}))}:function(t){if(typeof Uint8Array<"u"){var s=0,a=0;for(s=0;s<t.length;++s)a+=t[s].length;var r=new Uint8Array(a),n=0;for(s=0,a=0;s<t.length;a+=n,++s)if(n=t[s].length,t[s]instanceof Uint8Array)r.set(t[s],a);else{if(typeof t[s]=="string")throw"wtf";r.set(new Uint8Array(t[s]),a)}return r}return[].concat.apply([],t.map(function(i){return Array.isArray(i)?i:[].slice.call(i)}))};function tj(t){for(var s=[],a=0,r=t.length+250,n=cr(t.length+255),i=0;i<t.length;++i){var l=t.charCodeAt(i);if(l<128)n[a++]=l;else if(l<2048)n[a++]=192|l>>6&31,n[a++]=128|l&63;else if(l>=55296&&l<57344){l=(l&1023)+64;var c=t.charCodeAt(++i)&1023;n[a++]=240|l>>8&7,n[a++]=128|l>>2&63,n[a++]=128|c>>6&15|(l&3)<<4,n[a++]=128|c&63}else n[a++]=224|l>>12&15,n[a++]=128|l>>6&63,n[a++]=128|l&63;a>r&&(s.push(n.slice(0,a)),a=0,n=cr(65535),r=65530)}return s.push(n.slice(0,a)),tr(s)}var Ts=/\u0000/g,Un=/[\u0001-\u0006]/g;function cn(t){for(var s="",a=t.length-1;a>=0;)s+=t.charAt(a--);return s}function fa(t,s){var a=""+t;return a.length>=s?a:Tt("0",s-a.length)+a}function od(t,s){var a=""+t;return a.length>=s?a:Tt(" ",s-a.length)+a}function pl(t,s){var a=""+t;return a.length>=s?a:a+Tt(" ",s-a.length)}function sj(t,s){var a=""+Math.round(t);return a.length>=s?a:Tt("0",s-a.length)+a}function aj(t,s){var a=""+t;return a.length>=s?a:Tt("0",s-a.length)+a}var Mx=Math.pow(2,32);function Jr(t,s){if(t>Mx||t<-Mx)return sj(t,s);var a=Math.round(t);return aj(a,s)}function gl(t,s){return s=s||0,t.length>=7+s&&(t.charCodeAt(s)|32)===103&&(t.charCodeAt(s+1)|32)===101&&(t.charCodeAt(s+2)|32)===110&&(t.charCodeAt(s+3)|32)===101&&(t.charCodeAt(s+4)|32)===114&&(t.charCodeAt(s+5)|32)===97&&(t.charCodeAt(s+6)|32)===108}var Bx=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],bc=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];function rj(t){return t||(t={}),t[0]="General",t[1]="0",t[2]="0.00",t[3]="#,##0",t[4]="#,##0.00",t[9]="0%",t[10]="0.00%",t[11]="0.00E+00",t[12]="# ?/?",t[13]="# ??/??",t[14]="m/d/yy",t[15]="d-mmm-yy",t[16]="d-mmm",t[17]="mmm-yy",t[18]="h:mm AM/PM",t[19]="h:mm:ss AM/PM",t[20]="h:mm",t[21]="h:mm:ss",t[22]="m/d/yy h:mm",t[37]="#,##0 ;(#,##0)",t[38]="#,##0 ;[Red](#,##0)",t[39]="#,##0.00;(#,##0.00)",t[40]="#,##0.00;[Red](#,##0.00)",t[45]="mm:ss",t[46]="[h]:mm:ss",t[47]="mmss.0",t[48]="##0.0E+0",t[49]="@",t[56]='"ä¸Šåˆ/ä¸‹åˆ "hh"æ™‚"mm"åˆ†"ss"ç§’ "',t}var et={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"ä¸Šåˆ/ä¸‹åˆ "hh"æ™‚"mm"åˆ†"ss"ç§’ "'},zx={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},nj={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function yl(t,s,a){for(var r=t<0?-1:1,n=t*r,i=0,l=1,c=0,o=1,d=0,x=0,u=Math.floor(n);d<s&&(u=Math.floor(n),c=u*l+i,x=u*d+o,!(n-u<5e-8));)n=1/(n-u),i=l,l=c,o=d,d=x;if(x>s&&(d>s?(x=o,c=i):(x=d,c=l)),!a)return[0,r*c,x];var m=Math.floor(r*c/x);return[m,r*c-m*x,x]}function kr(t,s,a){if(t>2958465||t<0)return null;var r=t|0,n=Math.floor(86400*(t-r)),i=0,l=[],c={D:r,T:n,u:86400*(t-r)-n,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(c.u)<1e-6&&(c.u=0),s&&s.date1904&&(r+=1462),c.u>.9999&&(c.u=0,++n==86400&&(c.T=n=0,++r,++c.D)),r===60)l=a?[1317,10,29]:[1900,2,29],i=3;else if(r===0)l=a?[1317,8,29]:[1900,1,0],i=6;else{r>60&&--r;var o=new Date(1900,0,1);o.setDate(o.getDate()+r-1),l=[o.getFullYear(),o.getMonth()+1,o.getDate()],i=o.getDay(),r<60&&(i=(i+6)%7),a&&(i=xj(o,l))}return c.y=l[0],c.m=l[1],c.d=l[2],c.S=n%60,n=Math.floor(n/60),c.M=n%60,n=Math.floor(n/60),c.H=n,c.q=i,c}var dh=new Date(1899,11,31,0,0,0),ij=dh.getTime(),lj=new Date(1900,2,1,0,0,0);function xh(t,s){var a=t.getTime();return s?a-=1461*24*60*60*1e3:t>=lj&&(a+=24*60*60*1e3),(a-(ij+(t.getTimezoneOffset()-dh.getTimezoneOffset())*6e4))/(24*60*60*1e3)}function dd(t){return t.indexOf(".")==-1?t:t.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function cj(t){return t.indexOf("E")==-1?t:t.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}function oj(t){var s=t<0?12:11,a=dd(t.toFixed(12));return a.length<=s||(a=t.toPrecision(10),a.length<=s)?a:t.toExponential(5)}function dj(t){var s=dd(t.toFixed(11));return s.length>(t<0?12:11)||s==="0"||s==="-0"?t.toPrecision(6):s}function oi(t){var s=Math.floor(Math.log(Math.abs(t))*Math.LOG10E),a;return s>=-4&&s<=-1?a=t.toPrecision(10+s):Math.abs(s)<=9?a=oj(t):s===10?a=t.toFixed(10).substr(0,12):a=dj(t),dd(cj(a.toUpperCase()))}function Pr(t,s){switch(typeof t){case"string":return t;case"boolean":return t?"TRUE":"FALSE";case"number":return(t|0)===t?t.toString(10):oi(t);case"undefined":return"";case"object":if(t==null)return"";if(t instanceof Date)return na(14,xh(t,s&&s.date1904),s)}throw new Error("unsupported value in General format: "+t)}function xj(t,s){s[0]-=581;var a=t.getDay();return t<60&&(a=(a+6)%7),a}function uj(t,s,a,r){var n="",i=0,l=0,c=a.y,o,d=0;switch(t){case 98:c=a.y+543;case 121:switch(s.length){case 1:case 2:o=c%100,d=2;break;default:o=c%1e4,d=4;break}break;case 109:switch(s.length){case 1:case 2:o=a.m,d=s.length;break;case 3:return bc[a.m-1][1];case 5:return bc[a.m-1][0];default:return bc[a.m-1][2]}break;case 100:switch(s.length){case 1:case 2:o=a.d,d=s.length;break;case 3:return Bx[a.q][0];default:return Bx[a.q][1]}break;case 104:switch(s.length){case 1:case 2:o=1+(a.H+11)%12,d=s.length;break;default:throw"bad hour format: "+s}break;case 72:switch(s.length){case 1:case 2:o=a.H,d=s.length;break;default:throw"bad hour format: "+s}break;case 77:switch(s.length){case 1:case 2:o=a.M,d=s.length;break;default:throw"bad minute format: "+s}break;case 115:if(s!="s"&&s!="ss"&&s!=".0"&&s!=".00"&&s!=".000")throw"bad second format: "+s;return a.u===0&&(s=="s"||s=="ss")?fa(a.S,s.length):(r>=2?l=r===3?1e3:100:l=r===1?10:1,i=Math.round(l*(a.S+a.u)),i>=60*l&&(i=0),s==="s"?i===0?"0":""+i/l:(n=fa(i,2+r),s==="ss"?n.substr(0,2):"."+n.substr(2,s.length-1)));case 90:switch(s){case"[h]":case"[hh]":o=a.D*24+a.H;break;case"[m]":case"[mm]":o=(a.D*24+a.H)*60+a.M;break;case"[s]":case"[ss]":o=((a.D*24+a.H)*60+a.M)*60+Math.round(a.S+a.u);break;default:throw"bad abstime format: "+s}d=s.length===3?1:2;break;case 101:o=c,d=1;break}var x=d>0?fa(o,d):"";return x}function rr(t){var s=3;if(t.length<=s)return t;for(var a=t.length%s,r=t.substr(0,a);a!=t.length;a+=s)r+=(r.length>0?",":"")+t.substr(a,s);return r}var uh=/%/g;function mj(t,s,a){var r=s.replace(uh,""),n=s.length-r.length;return Va(t,r,a*Math.pow(10,2*n))+Tt("%",n)}function hj(t,s,a){for(var r=s.length-1;s.charCodeAt(r-1)===44;)--r;return Va(t,s.substr(0,r),a/Math.pow(10,3*(s.length-r)))}function mh(t,s){var a,r=t.indexOf("E")-t.indexOf(".")-1;if(t.match(/^#+0.0E\+0$/)){if(s==0)return"0.0E+0";if(s<0)return"-"+mh(t,-s);var n=t.indexOf(".");n===-1&&(n=t.indexOf("E"));var i=Math.floor(Math.log(s)*Math.LOG10E)%n;if(i<0&&(i+=n),a=(s/Math.pow(10,i)).toPrecision(r+1+(n+i)%n),a.indexOf("e")===-1){var l=Math.floor(Math.log(s)*Math.LOG10E);for(a.indexOf(".")===-1?a=a.charAt(0)+"."+a.substr(1)+"E+"+(l-a.length+i):a+="E+"+(l-i);a.substr(0,2)==="0.";)a=a.charAt(0)+a.substr(2,n)+"."+a.substr(2+n),a=a.replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");a=a.replace(/\+-/,"-")}a=a.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(c,o,d,x){return o+d+x.substr(0,(n+i)%n)+"."+x.substr(i)+"E"})}else a=s.toExponential(r);return t.match(/E\+00$/)&&a.match(/e[+-]\d$/)&&(a=a.substr(0,a.length-1)+"0"+a.charAt(a.length-1)),t.match(/E\-/)&&a.match(/e\+/)&&(a=a.replace(/e\+/,"e")),a.replace("e","E")}var hh=/# (\?+)( ?)\/( ?)(\d+)/;function fj(t,s,a){var r=parseInt(t[4],10),n=Math.round(s*r),i=Math.floor(n/r),l=n-i*r,c=r;return a+(i===0?"":""+i)+" "+(l===0?Tt(" ",t[1].length+1+t[4].length):od(l,t[1].length)+t[2]+"/"+t[3]+fa(c,t[4].length))}function pj(t,s,a){return a+(s===0?"":""+s)+Tt(" ",t[1].length+2+t[4].length)}var fh=/^#*0*\.([0#]+)/,ph=/\).*[0#]/,gh=/\(###\) ###\\?-####/;function Es(t){for(var s="",a,r=0;r!=t.length;++r)switch(a=t.charCodeAt(r)){case 35:break;case 63:s+=" ";break;case 48:s+="0";break;default:s+=String.fromCharCode(a)}return s}function Ux(t,s){var a=Math.pow(10,s);return""+Math.round(t*a)/a}function Vx(t,s){var a=t-Math.floor(t),r=Math.pow(10,s);return s<(""+Math.round(a*r)).length?0:Math.round(a*r)}function gj(t,s){return s<(""+Math.round((t-Math.floor(t))*Math.pow(10,s))).length?1:0}function yj(t){return t<2147483647&&t>-2147483648?""+(t>=0?t|0:t-1|0):""+Math.floor(t)}function ta(t,s,a){if(t.charCodeAt(0)===40&&!s.match(ph)){var r=s.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return a>=0?ta("n",r,a):"("+ta("n",r,-a)+")"}if(s.charCodeAt(s.length-1)===44)return hj(t,s,a);if(s.indexOf("%")!==-1)return mj(t,s,a);if(s.indexOf("E")!==-1)return mh(s,a);if(s.charCodeAt(0)===36)return"$"+ta(t,s.substr(s.charAt(1)==" "?2:1),a);var n,i,l,c,o=Math.abs(a),d=a<0?"-":"";if(s.match(/^00+$/))return d+Jr(o,s.length);if(s.match(/^[#?]+$/))return n=Jr(a,0),n==="0"&&(n=""),n.length>s.length?n:Es(s.substr(0,s.length-n.length))+n;if(i=s.match(hh))return fj(i,o,d);if(s.match(/^#+0+$/))return d+Jr(o,s.length-s.indexOf("0"));if(i=s.match(fh))return n=Ux(a,i[1].length).replace(/^([^\.]+)$/,"$1."+Es(i[1])).replace(/\.$/,"."+Es(i[1])).replace(/\.(\d*)$/,function(g,h){return"."+h+Tt("0",Es(i[1]).length-h.length)}),s.indexOf("0.")!==-1?n:n.replace(/^0\./,".");if(s=s.replace(/^#+([0.])/,"$1"),i=s.match(/^(0*)\.(#*)$/))return d+Ux(o,i[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,i[1].length?"0.":".");if(i=s.match(/^#{1,3},##0(\.?)$/))return d+rr(Jr(o,0));if(i=s.match(/^#,##0\.([#0]*0)$/))return a<0?"-"+ta(t,s,-a):rr(""+(Math.floor(a)+gj(a,i[1].length)))+"."+fa(Vx(a,i[1].length),i[1].length);if(i=s.match(/^#,#*,#0/))return ta(t,s.replace(/^#,#*,/,""),a);if(i=s.match(/^([0#]+)(\\?-([0#]+))+$/))return n=cn(ta(t,s.replace(/[\\-]/g,""),a)),l=0,cn(cn(s.replace(/\\/g,"")).replace(/[0#]/g,function(g){return l<n.length?n.charAt(l++):g==="0"?"0":""}));if(s.match(gh))return n=ta(t,"##########",a),"("+n.substr(0,3)+") "+n.substr(3,3)+"-"+n.substr(6);var x="";if(i=s.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return l=Math.min(i[4].length,7),c=yl(o,Math.pow(10,l)-1,!1),n=""+d,x=Va("n",i[1],c[1]),x.charAt(x.length-1)==" "&&(x=x.substr(0,x.length-1)+"0"),n+=x+i[2]+"/"+i[3],x=pl(c[2],l),x.length<i[4].length&&(x=Es(i[4].substr(i[4].length-x.length))+x),n+=x,n;if(i=s.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return l=Math.min(Math.max(i[1].length,i[4].length),7),c=yl(o,Math.pow(10,l)-1,!0),d+(c[0]||(c[1]?"":"0"))+" "+(c[1]?od(c[1],l)+i[2]+"/"+i[3]+pl(c[2],l):Tt(" ",2*l+1+i[2].length+i[3].length));if(i=s.match(/^[#0?]+$/))return n=Jr(a,0),s.length<=n.length?n:Es(s.substr(0,s.length-n.length))+n;if(i=s.match(/^([#0?]+)\.([#0]+)$/)){n=""+a.toFixed(Math.min(i[2].length,10)).replace(/([^0])0+$/,"$1"),l=n.indexOf(".");var u=s.indexOf(".")-l,m=s.length-n.length-u;return Es(s.substr(0,u)+n+s.substr(s.length-m))}if(i=s.match(/^00,000\.([#0]*0)$/))return l=Vx(a,i[1].length),a<0?"-"+ta(t,s,-a):rr(yj(a)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(g){return"00,"+(g.length<3?fa(0,3-g.length):"")+g})+"."+fa(l,i[1].length);switch(s){case"###,##0.00":return ta(t,"#,##0.00",a);case"###,###":case"##,###":case"#,###":var f=rr(Jr(o,0));return f!=="0"?d+f:"";case"###,###.00":return ta(t,"###,##0.00",a).replace(/^0\./,".");case"#,###.00":return ta(t,"#,##0.00",a).replace(/^0\./,".")}throw new Error("unsupported format |"+s+"|")}function bj(t,s,a){for(var r=s.length-1;s.charCodeAt(r-1)===44;)--r;return Va(t,s.substr(0,r),a/Math.pow(10,3*(s.length-r)))}function vj(t,s,a){var r=s.replace(uh,""),n=s.length-r.length;return Va(t,r,a*Math.pow(10,2*n))+Tt("%",n)}function yh(t,s){var a,r=t.indexOf("E")-t.indexOf(".")-1;if(t.match(/^#+0.0E\+0$/)){if(s==0)return"0.0E+0";if(s<0)return"-"+yh(t,-s);var n=t.indexOf(".");n===-1&&(n=t.indexOf("E"));var i=Math.floor(Math.log(s)*Math.LOG10E)%n;if(i<0&&(i+=n),a=(s/Math.pow(10,i)).toPrecision(r+1+(n+i)%n),!a.match(/[Ee]/)){var l=Math.floor(Math.log(s)*Math.LOG10E);a.indexOf(".")===-1?a=a.charAt(0)+"."+a.substr(1)+"E+"+(l-a.length+i):a+="E+"+(l-i),a=a.replace(/\+-/,"-")}a=a.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(c,o,d,x){return o+d+x.substr(0,(n+i)%n)+"."+x.substr(i)+"E"})}else a=s.toExponential(r);return t.match(/E\+00$/)&&a.match(/e[+-]\d$/)&&(a=a.substr(0,a.length-1)+"0"+a.charAt(a.length-1)),t.match(/E\-/)&&a.match(/e\+/)&&(a=a.replace(/e\+/,"e")),a.replace("e","E")}function Ca(t,s,a){if(t.charCodeAt(0)===40&&!s.match(ph)){var r=s.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return a>=0?Ca("n",r,a):"("+Ca("n",r,-a)+")"}if(s.charCodeAt(s.length-1)===44)return bj(t,s,a);if(s.indexOf("%")!==-1)return vj(t,s,a);if(s.indexOf("E")!==-1)return yh(s,a);if(s.charCodeAt(0)===36)return"$"+Ca(t,s.substr(s.charAt(1)==" "?2:1),a);var n,i,l,c,o=Math.abs(a),d=a<0?"-":"";if(s.match(/^00+$/))return d+fa(o,s.length);if(s.match(/^[#?]+$/))return n=""+a,a===0&&(n=""),n.length>s.length?n:Es(s.substr(0,s.length-n.length))+n;if(i=s.match(hh))return pj(i,o,d);if(s.match(/^#+0+$/))return d+fa(o,s.length-s.indexOf("0"));if(i=s.match(fh))return n=(""+a).replace(/^([^\.]+)$/,"$1."+Es(i[1])).replace(/\.$/,"."+Es(i[1])),n=n.replace(/\.(\d*)$/,function(g,h){return"."+h+Tt("0",Es(i[1]).length-h.length)}),s.indexOf("0.")!==-1?n:n.replace(/^0\./,".");if(s=s.replace(/^#+([0.])/,"$1"),i=s.match(/^(0*)\.(#*)$/))return d+(""+o).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,i[1].length?"0.":".");if(i=s.match(/^#{1,3},##0(\.?)$/))return d+rr(""+o);if(i=s.match(/^#,##0\.([#0]*0)$/))return a<0?"-"+Ca(t,s,-a):rr(""+a)+"."+Tt("0",i[1].length);if(i=s.match(/^#,#*,#0/))return Ca(t,s.replace(/^#,#*,/,""),a);if(i=s.match(/^([0#]+)(\\?-([0#]+))+$/))return n=cn(Ca(t,s.replace(/[\\-]/g,""),a)),l=0,cn(cn(s.replace(/\\/g,"")).replace(/[0#]/g,function(g){return l<n.length?n.charAt(l++):g==="0"?"0":""}));if(s.match(gh))return n=Ca(t,"##########",a),"("+n.substr(0,3)+") "+n.substr(3,3)+"-"+n.substr(6);var x="";if(i=s.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return l=Math.min(i[4].length,7),c=yl(o,Math.pow(10,l)-1,!1),n=""+d,x=Va("n",i[1],c[1]),x.charAt(x.length-1)==" "&&(x=x.substr(0,x.length-1)+"0"),n+=x+i[2]+"/"+i[3],x=pl(c[2],l),x.length<i[4].length&&(x=Es(i[4].substr(i[4].length-x.length))+x),n+=x,n;if(i=s.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return l=Math.min(Math.max(i[1].length,i[4].length),7),c=yl(o,Math.pow(10,l)-1,!0),d+(c[0]||(c[1]?"":"0"))+" "+(c[1]?od(c[1],l)+i[2]+"/"+i[3]+pl(c[2],l):Tt(" ",2*l+1+i[2].length+i[3].length));if(i=s.match(/^[#0?]+$/))return n=""+a,s.length<=n.length?n:Es(s.substr(0,s.length-n.length))+n;if(i=s.match(/^([#0]+)\.([#0]+)$/)){n=""+a.toFixed(Math.min(i[2].length,10)).replace(/([^0])0+$/,"$1"),l=n.indexOf(".");var u=s.indexOf(".")-l,m=s.length-n.length-u;return Es(s.substr(0,u)+n+s.substr(s.length-m))}if(i=s.match(/^00,000\.([#0]*0)$/))return a<0?"-"+Ca(t,s,-a):rr(""+a).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(g){return"00,"+(g.length<3?fa(0,3-g.length):"")+g})+"."+fa(0,i[1].length);switch(s){case"###,###":case"##,###":case"#,###":var f=rr(""+o);return f!=="0"?d+f:"";default:if(s.match(/\.[0#?]*$/))return Ca(t,s.slice(0,s.lastIndexOf(".")),a)+Es(s.slice(s.lastIndexOf(".")))}throw new Error("unsupported format |"+s+"|")}function Va(t,s,a){return(a|0)===a?Ca(t,s,a):ta(t,s,a)}function jj(t){for(var s=[],a=!1,r=0,n=0;r<t.length;++r)switch(t.charCodeAt(r)){case 34:a=!a;break;case 95:case 42:case 92:++r;break;case 59:s[s.length]=t.substr(n,r-n),n=r+1}if(s[s.length]=t.substr(n),a===!0)throw new Error("Format |"+t+"| unterminated string ");return s}var bh=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function An(t){for(var s=0,a="",r="";s<t.length;)switch(a=t.charAt(s)){case"G":gl(t,s)&&(s+=6),s++;break;case'"':for(;t.charCodeAt(++s)!==34&&s<t.length;);++s;break;case"\\":s+=2;break;case"_":s+=2;break;case"@":++s;break;case"B":case"b":if(t.charAt(s+1)==="1"||t.charAt(s+1)==="2")return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"ä¸Š":if(t.substr(s,3).toUpperCase()==="A/P"||t.substr(s,5).toUpperCase()==="AM/PM"||t.substr(s,5).toUpperCase()==="ä¸Šåˆ/ä¸‹åˆ")return!0;++s;break;case"[":for(r=a;t.charAt(s++)!=="]"&&s<t.length;)r+=t.charAt(s);if(r.match(bh))return!0;break;case".":case"0":case"#":for(;s<t.length&&("0#?.,E+-%".indexOf(a=t.charAt(++s))>-1||a=="\\"&&t.charAt(s+1)=="-"&&"0#".indexOf(t.charAt(s+2))>-1););break;case"?":for(;t.charAt(++s)===a;);break;case"*":++s,(t.charAt(s)==" "||t.charAt(s)=="*")&&++s;break;case"(":case")":++s;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;s<t.length&&"0123456789".indexOf(t.charAt(++s))>-1;);break;case" ":++s;break;default:++s;break}return!1}function Nj(t,s,a,r){for(var n=[],i="",l=0,c="",o="t",d,x,u,m="H";l<t.length;)switch(c=t.charAt(l)){case"G":if(!gl(t,l))throw new Error("unrecognized character "+c+" in "+t);n[n.length]={t:"G",v:"General"},l+=7;break;case'"':for(i="";(u=t.charCodeAt(++l))!==34&&l<t.length;)i+=String.fromCharCode(u);n[n.length]={t:"t",v:i},++l;break;case"\\":var f=t.charAt(++l),g=f==="("||f===")"?f:"t";n[n.length]={t:g,v:f},++l;break;case"_":n[n.length]={t:"t",v:" "},l+=2;break;case"@":n[n.length]={t:"T",v:s},++l;break;case"B":case"b":if(t.charAt(l+1)==="1"||t.charAt(l+1)==="2"){if(d==null&&(d=kr(s,a,t.charAt(l+1)==="2"),d==null))return"";n[n.length]={t:"X",v:t.substr(l,2)},o=c,l+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":c=c.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(s<0||d==null&&(d=kr(s,a),d==null))return"";for(i=c;++l<t.length&&t.charAt(l).toLowerCase()===c;)i+=c;c==="m"&&o.toLowerCase()==="h"&&(c="M"),c==="h"&&(c=m),n[n.length]={t:c,v:i},o=c;break;case"A":case"a":case"ä¸Š":var h={t:c,v:c};if(d==null&&(d=kr(s,a)),t.substr(l,3).toUpperCase()==="A/P"?(d!=null&&(h.v=d.H>=12?"P":"A"),h.t="T",m="h",l+=3):t.substr(l,5).toUpperCase()==="AM/PM"?(d!=null&&(h.v=d.H>=12?"PM":"AM"),h.t="T",l+=5,m="h"):t.substr(l,5).toUpperCase()==="ä¸Šåˆ/ä¸‹åˆ"?(d!=null&&(h.v=d.H>=12?"ä¸‹åˆ":"ä¸Šåˆ"),h.t="T",l+=5,m="h"):(h.t="t",++l),d==null&&h.t==="T")return"";n[n.length]=h,o=c;break;case"[":for(i=c;t.charAt(l++)!=="]"&&l<t.length;)i+=t.charAt(l);if(i.slice(-1)!=="]")throw'unterminated "[" block: |'+i+"|";if(i.match(bh)){if(d==null&&(d=kr(s,a),d==null))return"";n[n.length]={t:"Z",v:i.toLowerCase()},o=i.charAt(1)}else i.indexOf("$")>-1&&(i=(i.match(/\$([^-\[\]]*)/)||[])[1]||"$",An(t)||(n[n.length]={t:"t",v:i}));break;case".":if(d!=null){for(i=c;++l<t.length&&(c=t.charAt(l))==="0";)i+=c;n[n.length]={t:"s",v:i};break}case"0":case"#":for(i=c;++l<t.length&&"0#?.,E+-%".indexOf(c=t.charAt(l))>-1;)i+=c;n[n.length]={t:"n",v:i};break;case"?":for(i=c;t.charAt(++l)===c;)i+=c;n[n.length]={t:c,v:i},o=c;break;case"*":++l,(t.charAt(l)==" "||t.charAt(l)=="*")&&++l;break;case"(":case")":n[n.length]={t:r===1?"t":c,v:c},++l;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(i=c;l<t.length&&"0123456789".indexOf(t.charAt(++l))>-1;)i+=t.charAt(l);n[n.length]={t:"D",v:i};break;case" ":n[n.length]={t:c,v:c},++l;break;case"$":n[n.length]={t:"t",v:"$"},++l;break;default:if(",$-+/():!^&'~{}<>=â‚¬acfijklopqrtuvwxzP".indexOf(c)===-1)throw new Error("unrecognized character "+c+" in "+t);n[n.length]={t:"t",v:c},++l;break}var p=0,j=0,v;for(l=n.length-1,o="t";l>=0;--l)switch(n[l].t){case"h":case"H":n[l].t=m,o="h",p<1&&(p=1);break;case"s":(v=n[l].v.match(/\.0+$/))&&(j=Math.max(j,v[0].length-1)),p<3&&(p=3);case"d":case"y":case"M":case"e":o=n[l].t;break;case"m":o==="s"&&(n[l].t="M",p<2&&(p=2));break;case"X":break;case"Z":p<1&&n[l].v.match(/[Hh]/)&&(p=1),p<2&&n[l].v.match(/[Mm]/)&&(p=2),p<3&&n[l].v.match(/[Ss]/)&&(p=3)}switch(p){case 0:break;case 1:d.u>=.5&&(d.u=0,++d.S),d.S>=60&&(d.S=0,++d.M),d.M>=60&&(d.M=0,++d.H);break;case 2:d.u>=.5&&(d.u=0,++d.S),d.S>=60&&(d.S=0,++d.M);break}var w="",b;for(l=0;l<n.length;++l)switch(n[l].t){case"t":case"T":case" ":case"D":break;case"X":n[l].v="",n[l].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":n[l].v=uj(n[l].t.charCodeAt(0),n[l].v,d,j),n[l].t="t";break;case"n":case"?":for(b=l+1;n[b]!=null&&((c=n[b].t)==="?"||c==="D"||(c===" "||c==="t")&&n[b+1]!=null&&(n[b+1].t==="?"||n[b+1].t==="t"&&n[b+1].v==="/")||n[l].t==="("&&(c===" "||c==="n"||c===")")||c==="t"&&(n[b].v==="/"||n[b].v===" "&&n[b+1]!=null&&n[b+1].t=="?"));)n[l].v+=n[b].v,n[b]={v:"",t:";"},++b;w+=n[l].v,l=b-1;break;case"G":n[l].t="t",n[l].v=Pr(s,a);break}var A="",N,C;if(w.length>0){w.charCodeAt(0)==40?(N=s<0&&w.charCodeAt(0)===45?-s:s,C=Va("n",w,N)):(N=s<0&&r>1?-s:s,C=Va("n",w,N),N<0&&n[0]&&n[0].t=="t"&&(C=C.substr(1),n[0].v="-"+n[0].v)),b=C.length-1;var k=n.length;for(l=0;l<n.length;++l)if(n[l]!=null&&n[l].t!="t"&&n[l].v.indexOf(".")>-1){k=l;break}var S=n.length;if(k===n.length&&C.indexOf("E")===-1){for(l=n.length-1;l>=0;--l)n[l]==null||"n?".indexOf(n[l].t)===-1||(b>=n[l].v.length-1?(b-=n[l].v.length,n[l].v=C.substr(b+1,n[l].v.length)):b<0?n[l].v="":(n[l].v=C.substr(0,b+1),b=-1),n[l].t="t",S=l);b>=0&&S<n.length&&(n[S].v=C.substr(0,b+1)+n[S].v)}else if(k!==n.length&&C.indexOf("E")===-1){for(b=C.indexOf(".")-1,l=k;l>=0;--l)if(!(n[l]==null||"n?".indexOf(n[l].t)===-1)){for(x=n[l].v.indexOf(".")>-1&&l===k?n[l].v.indexOf(".")-1:n[l].v.length-1,A=n[l].v.substr(x+1);x>=0;--x)b>=0&&(n[l].v.charAt(x)==="0"||n[l].v.charAt(x)==="#")&&(A=C.charAt(b--)+A);n[l].v=A,n[l].t="t",S=l}for(b>=0&&S<n.length&&(n[S].v=C.substr(0,b+1)+n[S].v),b=C.indexOf(".")+1,l=k;l<n.length;++l)if(!(n[l]==null||"n?(".indexOf(n[l].t)===-1&&l!==k)){for(x=n[l].v.indexOf(".")>-1&&l===k?n[l].v.indexOf(".")+1:0,A=n[l].v.substr(0,x);x<n[l].v.length;++x)b<C.length&&(A+=C.charAt(b++));n[l].v=A,n[l].t="t",S=l}}}for(l=0;l<n.length;++l)n[l]!=null&&"n?".indexOf(n[l].t)>-1&&(N=r>1&&s<0&&l>0&&n[l-1].v==="-"?-s:s,n[l].v=Va(n[l].t,n[l].v,N),n[l].t="t");var F="";for(l=0;l!==n.length;++l)n[l]!=null&&(F+=n[l].v);return F}var Hx=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function qx(t,s){if(s==null)return!1;var a=parseFloat(s[2]);switch(s[1]){case"=":if(t==a)return!0;break;case">":if(t>a)return!0;break;case"<":if(t<a)return!0;break;case"<>":if(t!=a)return!0;break;case">=":if(t>=a)return!0;break;case"<=":if(t<=a)return!0;break}return!1}function wj(t,s){var a=jj(t),r=a.length,n=a[r-1].indexOf("@");if(r<4&&n>-1&&--r,a.length>4)throw new Error("cannot find right format for |"+a.join("|")+"|");if(typeof s!="number")return[4,a.length===4||n>-1?a[a.length-1]:"@"];switch(a.length){case 1:a=n>-1?["General","General","General",a[0]]:[a[0],a[0],a[0],"@"];break;case 2:a=n>-1?[a[0],a[0],a[0],a[1]]:[a[0],a[1],a[0],"@"];break;case 3:a=n>-1?[a[0],a[1],a[0],a[2]]:[a[0],a[1],a[2],"@"];break}var i=s>0?a[0]:s<0?a[1]:a[2];if(a[0].indexOf("[")===-1&&a[1].indexOf("[")===-1)return[r,i];if(a[0].match(/\[[=<>]/)!=null||a[1].match(/\[[=<>]/)!=null){var l=a[0].match(Hx),c=a[1].match(Hx);return qx(s,l)?[r,a[0]]:qx(s,c)?[r,a[1]]:[r,a[l!=null&&c!=null?2:1]]}return[r,i]}function na(t,s,a){a==null&&(a={});var r="";switch(typeof t){case"string":t=="m/d/yy"&&a.dateNF?r=a.dateNF:r=t;break;case"number":t==14&&a.dateNF?r=a.dateNF:r=(a.table!=null?a.table:et)[t],r==null&&(r=a.table&&a.table[zx[t]]||et[zx[t]]),r==null&&(r=nj[t]||"General");break}if(gl(r,0))return Pr(s,a);s instanceof Date&&(s=xh(s,a.date1904));var n=wj(r,s);if(gl(n[1]))return Pr(s,a);if(s===!0)s="TRUE";else if(s===!1)s="FALSE";else if(s===""||s==null)return"";return Nj(n[1],s,a,n[0])}function Ar(t,s){if(typeof s!="number"){s=+s||-1;for(var a=0;a<392;++a){if(et[a]==null){s<0&&(s=a);continue}if(et[a]==t){s=a;break}}s<0&&(s=391)}return et[s]=t,s}function vh(){et=rj()}var kj={5:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',23:"General",24:"General",25:"General",26:"General",27:"m/d/yy",28:"m/d/yy",29:"m/d/yy",30:"m/d/yy",31:"m/d/yy",32:"h:mm:ss",33:"h:mm:ss",34:"h:mm:ss",35:"h:mm:ss",36:"m/d/yy",41:'_(* #,##0_);_(* (#,##0);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* (#,##0);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* (#,##0.00);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* (#,##0.00);_("$"* "-"??_);_(@_)',50:"m/d/yy",51:"m/d/yy",52:"m/d/yy",53:"m/d/yy",54:"m/d/yy",55:"m/d/yy",56:"m/d/yy",57:"m/d/yy",58:"m/d/yy",59:"0",60:"0.00",61:"#,##0",62:"#,##0.00",63:'"$"#,##0_);\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',67:"0%",68:"0.00%",69:"# ?/?",70:"# ??/??",71:"m/d/yy",72:"m/d/yy",73:"d-mmm-yy",74:"d-mmm",75:"mmm-yy",76:"h:mm",77:"h:mm:ss",78:"m/d/yy h:mm",79:"mm:ss",80:"[h]:mm:ss",81:"mmss.0"},jh=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;function Sj(t){var s=typeof t=="number"?et[t]:t;return s=s.replace(jh,"(\\d+)"),new RegExp("^"+s+"$")}function Cj(t,s,a){var r=-1,n=-1,i=-1,l=-1,c=-1,o=-1;(s.match(jh)||[]).forEach(function(u,m){var f=parseInt(a[m+1],10);switch(u.toLowerCase().charAt(0)){case"y":r=f;break;case"d":i=f;break;case"h":l=f;break;case"s":o=f;break;case"m":l>=0?c=f:n=f;break}}),o>=0&&c==-1&&n>=0&&(c=n,n=-1);var d=(""+(r>=0?r:new Date().getFullYear())).slice(-4)+"-"+("00"+(n>=1?n:1)).slice(-2)+"-"+("00"+(i>=1?i:1)).slice(-2);d.length==7&&(d="0"+d),d.length==8&&(d="20"+d);var x=("00"+(l>=0?l:0)).slice(-2)+":"+("00"+(c>=0?c:0)).slice(-2)+":"+("00"+(o>=0?o:0)).slice(-2);return l==-1&&c==-1&&o==-1?d:r==-1&&n==-1&&i==-1?x:d+"T"+x}var Aj=function(){var t={};t.version="1.2.0";function s(){for(var C=0,k=new Array(256),S=0;S!=256;++S)C=S,C=C&1?-306674912^C>>>1:C>>>1,C=C&1?-306674912^C>>>1:C>>>1,C=C&1?-306674912^C>>>1:C>>>1,C=C&1?-306674912^C>>>1:C>>>1,C=C&1?-306674912^C>>>1:C>>>1,C=C&1?-306674912^C>>>1:C>>>1,C=C&1?-306674912^C>>>1:C>>>1,C=C&1?-306674912^C>>>1:C>>>1,k[S]=C;return typeof Int32Array<"u"?new Int32Array(k):k}var a=s();function r(C){var k=0,S=0,F=0,R=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(F=0;F!=256;++F)R[F]=C[F];for(F=0;F!=256;++F)for(S=C[F],k=256+F;k<4096;k+=256)S=R[k]=S>>>8^C[S&255];var T=[];for(F=1;F!=16;++F)T[F-1]=typeof Int32Array<"u"?R.subarray(F*256,F*256+256):R.slice(F*256,F*256+256);return T}var n=r(a),i=n[0],l=n[1],c=n[2],o=n[3],d=n[4],x=n[5],u=n[6],m=n[7],f=n[8],g=n[9],h=n[10],p=n[11],j=n[12],v=n[13],w=n[14];function b(C,k){for(var S=k^-1,F=0,R=C.length;F<R;)S=S>>>8^a[(S^C.charCodeAt(F++))&255];return~S}function A(C,k){for(var S=k^-1,F=C.length-15,R=0;R<F;)S=w[C[R++]^S&255]^v[C[R++]^S>>8&255]^j[C[R++]^S>>16&255]^p[C[R++]^S>>>24]^h[C[R++]]^g[C[R++]]^f[C[R++]]^m[C[R++]]^u[C[R++]]^x[C[R++]]^d[C[R++]]^o[C[R++]]^c[C[R++]]^l[C[R++]]^i[C[R++]]^a[C[R++]];for(F+=15;R<F;)S=S>>>8^a[(S^C[R++])&255];return~S}function N(C,k){for(var S=k^-1,F=0,R=C.length,T=0,M=0;F<R;)T=C.charCodeAt(F++),T<128?S=S>>>8^a[(S^T)&255]:T<2048?(S=S>>>8^a[(S^(192|T>>6&31))&255],S=S>>>8^a[(S^(128|T&63))&255]):T>=55296&&T<57344?(T=(T&1023)+64,M=C.charCodeAt(F++)&1023,S=S>>>8^a[(S^(240|T>>8&7))&255],S=S>>>8^a[(S^(128|T>>2&63))&255],S=S>>>8^a[(S^(128|M>>6&15|(T&3)<<4))&255],S=S>>>8^a[(S^(128|M&63))&255]):(S=S>>>8^a[(S^(224|T>>12&15))&255],S=S>>>8^a[(S^(128|T>>6&63))&255],S=S>>>8^a[(S^(128|T&63))&255]);return~S}return t.table=a,t.bstr=b,t.buf=A,t.str=N,t}(),lt=function(){var s={};s.version="1.2.1";function a(B,K){for(var q=B.split("/"),Y=K.split("/"),ee=0,ae=0,ge=Math.min(q.length,Y.length);ee<ge;++ee){if(ae=q[ee].length-Y[ee].length)return ae;if(q[ee]!=Y[ee])return q[ee]<Y[ee]?-1:1}return q.length-Y.length}function r(B){if(B.charAt(B.length-1)=="/")return B.slice(0,-1).indexOf("/")===-1?B:r(B.slice(0,-1));var K=B.lastIndexOf("/");return K===-1?B:B.slice(0,K+1)}function n(B){if(B.charAt(B.length-1)=="/")return n(B.slice(0,-1));var K=B.lastIndexOf("/");return K===-1?B:B.slice(K+1)}function i(B,K){typeof K=="string"&&(K=new Date(K));var q=K.getHours();q=q<<6|K.getMinutes(),q=q<<5|K.getSeconds()>>>1,B.write_shift(2,q);var Y=K.getFullYear()-1980;Y=Y<<4|K.getMonth()+1,Y=Y<<5|K.getDate(),B.write_shift(2,Y)}function l(B){var K=B.read_shift(2)&65535,q=B.read_shift(2)&65535,Y=new Date,ee=q&31;q>>>=5;var ae=q&15;q>>>=4,Y.setMilliseconds(0),Y.setFullYear(q+1980),Y.setMonth(ae-1),Y.setDate(ee);var ge=K&31;K>>>=5;var ke=K&63;return K>>>=6,Y.setHours(K),Y.setMinutes(ke),Y.setSeconds(ge<<1),Y}function c(B){cs(B,0);for(var K={},q=0;B.l<=B.length-4;){var Y=B.read_shift(2),ee=B.read_shift(2),ae=B.l+ee,ge={};switch(Y){case 21589:q=B.read_shift(1),q&1&&(ge.mtime=B.read_shift(4)),ee>5&&(q&2&&(ge.atime=B.read_shift(4)),q&4&&(ge.ctime=B.read_shift(4))),ge.mtime&&(ge.mt=new Date(ge.mtime*1e3));break}B.l=ae,K[Y]=ge}return K}var o;function d(){return o||(o={})}function x(B,K){if(B[0]==80&&B[1]==75)return Li(B,K);if((B[0]|32)==109&&(B[1]|32)==105)return Za(B,K);if(B.length<512)throw new Error("CFB file size "+B.length+" < 512");var q=3,Y=512,ee=0,ae=0,ge=0,ke=0,fe=0,ye=[],be=B.slice(0,512);cs(be,0);var Ee=u(be);switch(q=Ee[0],q){case 3:Y=512;break;case 4:Y=4096;break;case 0:if(Ee[1]==0)return Li(B,K);default:throw new Error("Major Version: Expected 3 or 4 saw "+q)}Y!==512&&(be=B.slice(0,Y),cs(be,28));var De=B.slice(0,Y);m(be,q);var Me=be.read_shift(4,"i");if(q===3&&Me!==0)throw new Error("# Directory Sectors: Expected 0 saw "+Me);be.l+=4,ge=be.read_shift(4,"i"),be.l+=4,be.chk("00100000","Mini Stream Cutoff Size: "),ke=be.read_shift(4,"i"),ee=be.read_shift(4,"i"),fe=be.read_shift(4,"i"),ae=be.read_shift(4,"i");for(var Fe=-1,Ie=0;Ie<109&&(Fe=be.read_shift(4,"i"),!(Fe<0));++Ie)ye[Ie]=Fe;var Ke=f(B,Y);p(fe,ae,Ke,Y,ye);var At=v(Ke,ge,ye,Y);At[ge].name="!Directory",ee>0&&ke!==M&&(At[ke].name="!MiniFAT"),At[ye[0]].name="!FAT",At.fat_addrs=ye,At.ssz=Y;var Et={},ms=[],Pn=[],In=[];w(ge,At,Ke,ms,ee,Et,Pn,ke),g(Pn,In,ms),ms.shift();var $n={FileIndex:Pn,FullPaths:In};return K&&K.raw&&($n.raw={header:De,sectors:Ke}),$n}function u(B){if(B[B.l]==80&&B[B.l+1]==75)return[0,0];B.chk(H,"Header Signature: "),B.l+=16;var K=B.read_shift(2,"u");return[B.read_shift(2,"u"),K]}function m(B,K){var q=9;switch(B.l+=2,q=B.read_shift(2)){case 9:if(K!=3)throw new Error("Sector Shift: Expected 9 saw "+q);break;case 12:if(K!=4)throw new Error("Sector Shift: Expected 12 saw "+q);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+q)}B.chk("0600","Mini Sector Shift: "),B.chk("000000000000","Reserved: ")}function f(B,K){for(var q=Math.ceil(B.length/K)-1,Y=[],ee=1;ee<q;++ee)Y[ee-1]=B.slice(ee*K,(ee+1)*K);return Y[q-1]=B.slice(q*K),Y}function g(B,K,q){for(var Y=0,ee=0,ae=0,ge=0,ke=0,fe=q.length,ye=[],be=[];Y<fe;++Y)ye[Y]=be[Y]=Y,K[Y]=q[Y];for(;ke<be.length;++ke)Y=be[ke],ee=B[Y].L,ae=B[Y].R,ge=B[Y].C,ye[Y]===Y&&(ee!==-1&&ye[ee]!==ee&&(ye[Y]=ye[ee]),ae!==-1&&ye[ae]!==ae&&(ye[Y]=ye[ae])),ge!==-1&&(ye[ge]=Y),ee!==-1&&Y!=ye[Y]&&(ye[ee]=ye[Y],be.lastIndexOf(ee)<ke&&be.push(ee)),ae!==-1&&Y!=ye[Y]&&(ye[ae]=ye[Y],be.lastIndexOf(ae)<ke&&be.push(ae));for(Y=1;Y<fe;++Y)ye[Y]===Y&&(ae!==-1&&ye[ae]!==ae?ye[Y]=ye[ae]:ee!==-1&&ye[ee]!==ee&&(ye[Y]=ye[ee]));for(Y=1;Y<fe;++Y)if(B[Y].type!==0){if(ke=Y,ke!=ye[ke])do ke=ye[ke],K[Y]=K[ke]+"/"+K[Y];while(ke!==0&&ye[ke]!==-1&&ke!=ye[ke]);ye[Y]=-1}for(K[0]+="/",Y=1;Y<fe;++Y)B[Y].type!==2&&(K[Y]+="/")}function h(B,K,q){for(var Y=B.start,ee=B.size,ae=[],ge=Y;q&&ee>0&&ge>=0;)ae.push(K.slice(ge*T,ge*T+T)),ee-=T,ge=jr(q,ge*4);return ae.length===0?Yt(0):tr(ae).slice(0,B.size)}function p(B,K,q,Y,ee){var ae=M;if(B===M){if(K!==0)throw new Error("DIFAT chain shorter than expected")}else if(B!==-1){var ge=q[B],ke=(Y>>>2)-1;if(!ge)return;for(var fe=0;fe<ke&&(ae=jr(ge,fe*4))!==M;++fe)ee.push(ae);p(jr(ge,Y-4),K-1,q,Y,ee)}}function j(B,K,q,Y,ee){var ae=[],ge=[];ee||(ee=[]);var ke=Y-1,fe=0,ye=0;for(fe=K;fe>=0;){ee[fe]=!0,ae[ae.length]=fe,ge.push(B[fe]);var be=q[Math.floor(fe*4/Y)];if(ye=fe*4&ke,Y<4+ye)throw new Error("FAT boundary crossed: "+fe+" 4 "+Y);if(!B[be])break;fe=jr(B[be],ye)}return{nodes:ae,data:tu([ge])}}function v(B,K,q,Y){var ee=B.length,ae=[],ge=[],ke=[],fe=[],ye=Y-1,be=0,Ee=0,De=0,Me=0;for(be=0;be<ee;++be)if(ke=[],De=be+K,De>=ee&&(De-=ee),!ge[De]){fe=[];var Fe=[];for(Ee=De;Ee>=0;){Fe[Ee]=!0,ge[Ee]=!0,ke[ke.length]=Ee,fe.push(B[Ee]);var Ie=q[Math.floor(Ee*4/Y)];if(Me=Ee*4&ye,Y<4+Me)throw new Error("FAT boundary crossed: "+Ee+" 4 "+Y);if(!B[Ie]||(Ee=jr(B[Ie],Me),Fe[Ee]))break}ae[De]={nodes:ke,data:tu([fe])}}return ae}function w(B,K,q,Y,ee,ae,ge,ke){for(var fe=0,ye=Y.length?2:0,be=K[B].data,Ee=0,De=0,Me;Ee<be.length;Ee+=128){var Fe=be.slice(Ee,Ee+128);cs(Fe,64),De=Fe.read_shift(2),Me=fd(Fe,0,De-ye),Y.push(Me);var Ie={name:Me,type:Fe.read_shift(1),color:Fe.read_shift(1),L:Fe.read_shift(4,"i"),R:Fe.read_shift(4,"i"),C:Fe.read_shift(4,"i"),clsid:Fe.read_shift(16),state:Fe.read_shift(4,"i"),start:0,size:0},Ke=Fe.read_shift(2)+Fe.read_shift(2)+Fe.read_shift(2)+Fe.read_shift(2);Ke!==0&&(Ie.ct=b(Fe,Fe.l-8));var At=Fe.read_shift(2)+Fe.read_shift(2)+Fe.read_shift(2)+Fe.read_shift(2);At!==0&&(Ie.mt=b(Fe,Fe.l-8)),Ie.start=Fe.read_shift(4,"i"),Ie.size=Fe.read_shift(4,"i"),Ie.size<0&&Ie.start<0&&(Ie.size=Ie.type=0,Ie.start=M,Ie.name=""),Ie.type===5?(fe=Ie.start,ee>0&&fe!==M&&(K[fe].name="!StreamData")):Ie.size>=4096?(Ie.storage="fat",K[Ie.start]===void 0&&(K[Ie.start]=j(q,Ie.start,K.fat_addrs,K.ssz)),K[Ie.start].name=Ie.name,Ie.content=K[Ie.start].data.slice(0,Ie.size)):(Ie.storage="minifat",Ie.size<0?Ie.size=0:fe!==M&&Ie.start!==M&&K[fe]&&(Ie.content=h(Ie,K[fe].data,(K[ke]||{}).data))),Ie.content&&cs(Ie.content,0),ae[Me]=Ie,ge.push(Ie)}}function b(B,K){return new Date((Ws(B,K+4)/1e7*Math.pow(2,32)+Ws(B,K)/1e7-11644473600)*1e3)}function A(B,K){return d(),x(o.readFileSync(B),K)}function N(B,K){var q=K&&K.type;switch(q||nt&&Buffer.isBuffer(B)&&(q="buffer"),q||"base64"){case"file":return A(B,K);case"base64":return x(ua(Js(B)),K);case"binary":return x(ua(B),K)}return x(B,K)}function C(B,K){var q=K||{},Y=q.root||"Root Entry";if(B.FullPaths||(B.FullPaths=[]),B.FileIndex||(B.FileIndex=[]),B.FullPaths.length!==B.FileIndex.length)throw new Error("inconsistent CFB structure");B.FullPaths.length===0&&(B.FullPaths[0]=Y+"/",B.FileIndex[0]={name:Y,type:5}),q.CLSID&&(B.FileIndex[0].clsid=q.CLSID),k(B)}function k(B){var K="Sh33tJ5";if(!lt.find(B,"/"+K)){var q=Yt(4);q[0]=55,q[1]=q[3]=50,q[2]=54,B.FileIndex.push({name:K,type:2,content:q,size:4,L:69,R:69,C:69}),B.FullPaths.push(B.FullPaths[0]+K),S(B)}}function S(B,K){C(B);for(var q=!1,Y=!1,ee=B.FullPaths.length-1;ee>=0;--ee){var ae=B.FileIndex[ee];switch(ae.type){case 0:Y?q=!0:(B.FileIndex.pop(),B.FullPaths.pop());break;case 1:case 2:case 5:Y=!0,isNaN(ae.R*ae.L*ae.C)&&(q=!0),ae.R>-1&&ae.L>-1&&ae.R==ae.L&&(q=!0);break;default:q=!0;break}}if(!(!q&&!K)){var ge=new Date(1987,1,19),ke=0,fe=Object.create?Object.create(null):{},ye=[];for(ee=0;ee<B.FullPaths.length;++ee)fe[B.FullPaths[ee]]=!0,B.FileIndex[ee].type!==0&&ye.push([B.FullPaths[ee],B.FileIndex[ee]]);for(ee=0;ee<ye.length;++ee){var be=r(ye[ee][0]);Y=fe[be],Y||(ye.push([be,{name:n(be).replace("/",""),type:1,clsid:W,ct:ge,mt:ge,content:null}]),fe[be]=!0)}for(ye.sort(function(Me,Fe){return a(Me[0],Fe[0])}),B.FullPaths=[],B.FileIndex=[],ee=0;ee<ye.length;++ee)B.FullPaths[ee]=ye[ee][0],B.FileIndex[ee]=ye[ee][1];for(ee=0;ee<ye.length;++ee){var Ee=B.FileIndex[ee],De=B.FullPaths[ee];if(Ee.name=n(De).replace("/",""),Ee.L=Ee.R=Ee.C=-(Ee.color=1),Ee.size=Ee.content?Ee.content.length:0,Ee.start=0,Ee.clsid=Ee.clsid||W,ee===0)Ee.C=ye.length>1?1:-1,Ee.size=0,Ee.type=5;else if(De.slice(-1)=="/"){for(ke=ee+1;ke<ye.length&&r(B.FullPaths[ke])!=De;++ke);for(Ee.C=ke>=ye.length?-1:ke,ke=ee+1;ke<ye.length&&r(B.FullPaths[ke])!=r(De);++ke);Ee.R=ke>=ye.length?-1:ke,Ee.type=1}else r(B.FullPaths[ee+1]||"")==r(De)&&(Ee.R=ee+1),Ee.type=2}}}function F(B,K){var q=K||{};if(q.fileType=="mad")return Wt(B,q);switch(S(B),q.fileType){case"zip":return ts(B,q)}var Y=function(Me){for(var Fe=0,Ie=0,Ke=0;Ke<Me.FileIndex.length;++Ke){var At=Me.FileIndex[Ke];if(At.content){var Et=At.content.length;Et>0&&(Et<4096?Fe+=Et+63>>6:Ie+=Et+511>>9)}}for(var ms=Me.FullPaths.length+3>>2,Pn=Fe+7>>3,In=Fe+127>>7,$n=Pn+Ie+ms+In,br=$n+127>>7,uc=br<=109?0:Math.ceil((br-109)/127);$n+br+uc+127>>7>br;)uc=++br<=109?0:Math.ceil((br-109)/127);var Ma=[1,uc,br,In,ms,Ie,Fe,0];return Me.FileIndex[0].size=Fe<<6,Ma[7]=(Me.FileIndex[0].start=Ma[0]+Ma[1]+Ma[2]+Ma[3]+Ma[4]+Ma[5])+(Ma[6]+7>>3),Ma}(B),ee=Yt(Y[7]<<9),ae=0,ge=0;{for(ae=0;ae<8;++ae)ee.write_shift(1,U[ae]);for(ae=0;ae<8;++ae)ee.write_shift(2,0);for(ee.write_shift(2,62),ee.write_shift(2,3),ee.write_shift(2,65534),ee.write_shift(2,9),ee.write_shift(2,6),ae=0;ae<3;++ae)ee.write_shift(2,0);for(ee.write_shift(4,0),ee.write_shift(4,Y[2]),ee.write_shift(4,Y[0]+Y[1]+Y[2]+Y[3]-1),ee.write_shift(4,0),ee.write_shift(4,4096),ee.write_shift(4,Y[3]?Y[0]+Y[1]+Y[2]-1:M),ee.write_shift(4,Y[3]),ee.write_shift(-4,Y[1]?Y[0]-1:M),ee.write_shift(4,Y[1]),ae=0;ae<109;++ae)ee.write_shift(-4,ae<Y[2]?Y[1]+ae:-1)}if(Y[1])for(ge=0;ge<Y[1];++ge){for(;ae<236+ge*127;++ae)ee.write_shift(-4,ae<Y[2]?Y[1]+ae:-1);ee.write_shift(-4,ge===Y[1]-1?M:ge+1)}var ke=function(Me){for(ge+=Me;ae<ge-1;++ae)ee.write_shift(-4,ae+1);Me&&(++ae,ee.write_shift(-4,M))};for(ge=ae=0,ge+=Y[1];ae<ge;++ae)ee.write_shift(-4,se.DIFSECT);for(ge+=Y[2];ae<ge;++ae)ee.write_shift(-4,se.FATSECT);ke(Y[3]),ke(Y[4]);for(var fe=0,ye=0,be=B.FileIndex[0];fe<B.FileIndex.length;++fe)be=B.FileIndex[fe],be.content&&(ye=be.content.length,!(ye<4096)&&(be.start=ge,ke(ye+511>>9)));for(ke(Y[6]+7>>3);ee.l&511;)ee.write_shift(-4,se.ENDOFCHAIN);for(ge=ae=0,fe=0;fe<B.FileIndex.length;++fe)be=B.FileIndex[fe],be.content&&(ye=be.content.length,!(!ye||ye>=4096)&&(be.start=ge,ke(ye+63>>6)));for(;ee.l&511;)ee.write_shift(-4,se.ENDOFCHAIN);for(ae=0;ae<Y[4]<<2;++ae){var Ee=B.FullPaths[ae];if(!Ee||Ee.length===0){for(fe=0;fe<17;++fe)ee.write_shift(4,0);for(fe=0;fe<3;++fe)ee.write_shift(4,-1);for(fe=0;fe<12;++fe)ee.write_shift(4,0);continue}be=B.FileIndex[ae],ae===0&&(be.start=be.size?be.start-1:M);var De=ae===0&&q.root||be.name;if(ye=2*(De.length+1),ee.write_shift(64,De,"utf16le"),ee.write_shift(2,ye),ee.write_shift(1,be.type),ee.write_shift(1,be.color),ee.write_shift(-4,be.L),ee.write_shift(-4,be.R),ee.write_shift(-4,be.C),be.clsid)ee.write_shift(16,be.clsid,"hex");else for(fe=0;fe<4;++fe)ee.write_shift(4,0);ee.write_shift(4,be.state||0),ee.write_shift(4,0),ee.write_shift(4,0),ee.write_shift(4,0),ee.write_shift(4,0),ee.write_shift(4,be.start),ee.write_shift(4,be.size),ee.write_shift(4,0)}for(ae=1;ae<B.FileIndex.length;++ae)if(be=B.FileIndex[ae],be.size>=4096)if(ee.l=be.start+1<<9,nt&&Buffer.isBuffer(be.content))be.content.copy(ee,ee.l,0,be.size),ee.l+=be.size+511&-512;else{for(fe=0;fe<be.size;++fe)ee.write_shift(1,be.content[fe]);for(;fe&511;++fe)ee.write_shift(1,0)}for(ae=1;ae<B.FileIndex.length;++ae)if(be=B.FileIndex[ae],be.size>0&&be.size<4096)if(nt&&Buffer.isBuffer(be.content))be.content.copy(ee,ee.l,0,be.size),ee.l+=be.size+63&-64;else{for(fe=0;fe<be.size;++fe)ee.write_shift(1,be.content[fe]);for(;fe&63;++fe)ee.write_shift(1,0)}if(nt)ee.l=ee.length;else for(;ee.l<ee.length;)ee.write_shift(1,0);return ee}function R(B,K){var q=B.FullPaths.map(function(fe){return fe.toUpperCase()}),Y=q.map(function(fe){var ye=fe.split("/");return ye[ye.length-(fe.slice(-1)=="/"?2:1)]}),ee=!1;K.charCodeAt(0)===47?(ee=!0,K=q[0].slice(0,-1)+K):ee=K.indexOf("/")!==-1;var ae=K.toUpperCase(),ge=ee===!0?q.indexOf(ae):Y.indexOf(ae);if(ge!==-1)return B.FileIndex[ge];var ke=!ae.match(Un);for(ae=ae.replace(Ts,""),ke&&(ae=ae.replace(Un,"!")),ge=0;ge<q.length;++ge)if((ke?q[ge].replace(Un,"!"):q[ge]).replace(Ts,"")==ae||(ke?Y[ge].replace(Un,"!"):Y[ge]).replace(Ts,"")==ae)return B.FileIndex[ge];return null}var T=64,M=-2,H="d0cf11e0a1b11ae1",U=[208,207,17,224,161,177,26,225],W="00000000000000000000000000000000",se={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:M,FREESECT:-1,HEADER_SIGNATURE:H,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:W,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function X(B,K,q){d();var Y=F(B,q);o.writeFileSync(K,Y)}function D(B){for(var K=new Array(B.length),q=0;q<B.length;++q)K[q]=String.fromCharCode(B[q]);return K.join("")}function le(B,K){var q=F(B,K);switch(K&&K.type||"buffer"){case"file":return d(),o.writeFileSync(K.filename,q),q;case"binary":return typeof q=="string"?q:D(q);case"base64":return Ox(typeof q=="string"?q:D(q));case"buffer":if(nt)return Buffer.isBuffer(q)?q:Br(q);case"array":return typeof q=="string"?ua(q):q}return q}var de;function E(B){try{var K=B.InflateRaw,q=new K;if(q._processChunk(new Uint8Array([3,0]),q._finishFlushFlag),q.bytesRead)de=B;else throw new Error("zlib does not expose bytesRead")}catch(Y){console.error("cannot use native zlib: "+(Y.message||Y))}}function z(B,K){if(!de)return fr(B,K);var q=de.InflateRaw,Y=new q,ee=Y._processChunk(B.slice(B.l),Y._finishFlushFlag);return B.l+=Y.bytesRead,ee}function O(B){return de?de.deflateRawSync(B):ze(B)}var P=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],Z=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],re=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function ie(B){var K=(B<<1|B<<11)&139536|(B<<5|B<<15)&558144;return(K>>16|K>>8|K)&255}for(var oe=typeof Uint8Array<"u",ue=oe?new Uint8Array(256):[],Ne=0;Ne<256;++Ne)ue[Ne]=ie(Ne);function I(B,K){var q=ue[B&255];return K<=8?q>>>8-K:(q=q<<8|ue[B>>8&255],K<=16?q>>>16-K:(q=q<<8|ue[B>>16&255],q>>>24-K))}function ce(B,K){var q=K&7,Y=K>>>3;return(B[Y]|(q<=6?0:B[Y+1]<<8))>>>q&3}function L(B,K){var q=K&7,Y=K>>>3;return(B[Y]|(q<=5?0:B[Y+1]<<8))>>>q&7}function V(B,K){var q=K&7,Y=K>>>3;return(B[Y]|(q<=4?0:B[Y+1]<<8))>>>q&15}function te(B,K){var q=K&7,Y=K>>>3;return(B[Y]|(q<=3?0:B[Y+1]<<8))>>>q&31}function ne(B,K){var q=K&7,Y=K>>>3;return(B[Y]|(q<=1?0:B[Y+1]<<8))>>>q&127}function xe(B,K,q){var Y=K&7,ee=K>>>3,ae=(1<<q)-1,ge=B[ee]>>>Y;return q<8-Y||(ge|=B[ee+1]<<8-Y,q<16-Y)||(ge|=B[ee+2]<<16-Y,q<24-Y)||(ge|=B[ee+3]<<24-Y),ge&ae}function he(B,K,q){var Y=K&7,ee=K>>>3;return Y<=5?B[ee]|=(q&7)<<Y:(B[ee]|=q<<Y&255,B[ee+1]=(q&7)>>8-Y),K+3}function Se(B,K,q){var Y=K&7,ee=K>>>3;return q=(q&1)<<Y,B[ee]|=q,K+1}function G(B,K,q){var Y=K&7,ee=K>>>3;return q<<=Y,B[ee]|=q&255,q>>>=8,B[ee+1]=q,K+8}function Q(B,K,q){var Y=K&7,ee=K>>>3;return q<<=Y,B[ee]|=q&255,q>>>=8,B[ee+1]=q&255,B[ee+2]=q>>>8,K+16}function me(B,K){var q=B.length,Y=2*q>K?2*q:K+5,ee=0;if(q>=K)return B;if(nt){var ae=Lx(Y);if(B.copy)B.copy(ae);else for(;ee<B.length;++ee)ae[ee]=B[ee];return ae}else if(oe){var ge=new Uint8Array(Y);if(ge.set)ge.set(B);else for(;ee<q;++ee)ge[ee]=B[ee];return ge}return B.length=Y,B}function je(B){for(var K=new Array(B),q=0;q<B;++q)K[q]=0;return K}function Ae(B,K,q){var Y=1,ee=0,ae=0,ge=0,ke=0,fe=B.length,ye=oe?new Uint16Array(32):je(32);for(ae=0;ae<32;++ae)ye[ae]=0;for(ae=fe;ae<q;++ae)B[ae]=0;fe=B.length;var be=oe?new Uint16Array(fe):je(fe);for(ae=0;ae<fe;++ae)ye[ee=B[ae]]++,Y<ee&&(Y=ee),be[ae]=0;for(ye[0]=0,ae=1;ae<=Y;++ae)ye[ae+16]=ke=ke+ye[ae-1]<<1;for(ae=0;ae<fe;++ae)ke=B[ae],ke!=0&&(be[ae]=ye[ke+16]++);var Ee=0;for(ae=0;ae<fe;++ae)if(Ee=B[ae],Ee!=0)for(ke=I(be[ae],Y)>>Y-Ee,ge=(1<<Y+4-Ee)-1;ge>=0;--ge)K[ke|ge<<Ee]=Ee&15|ae<<4;return Y}var we=oe?new Uint16Array(512):je(512),_e=oe?new Uint16Array(32):je(32);if(!oe){for(var Re=0;Re<512;++Re)we[Re]=0;for(Re=0;Re<32;++Re)_e[Re]=0}(function(){for(var B=[],K=0;K<32;K++)B.push(5);Ae(B,_e,32);var q=[];for(K=0;K<=143;K++)q.push(8);for(;K<=255;K++)q.push(9);for(;K<=279;K++)q.push(7);for(;K<=287;K++)q.push(8);Ae(q,we,288)})();var Pe=function(){for(var K=oe?new Uint8Array(32768):[],q=0,Y=0;q<re.length-1;++q)for(;Y<re[q+1];++Y)K[Y]=q;for(;Y<32768;++Y)K[Y]=29;var ee=oe?new Uint8Array(259):[];for(q=0,Y=0;q<Z.length-1;++q)for(;Y<Z[q+1];++Y)ee[Y]=q;function ae(ke,fe){for(var ye=0;ye<ke.length;){var be=Math.min(65535,ke.length-ye),Ee=ye+be==ke.length;for(fe.write_shift(1,+Ee),fe.write_shift(2,be),fe.write_shift(2,~be&65535);be-- >0;)fe[fe.l++]=ke[ye++]}return fe.l}function ge(ke,fe){for(var ye=0,be=0,Ee=oe?new Uint16Array(32768):[];be<ke.length;){var De=Math.min(65535,ke.length-be);if(De<10){for(ye=he(fe,ye,+(be+De==ke.length)),ye&7&&(ye+=8-(ye&7)),fe.l=ye/8|0,fe.write_shift(2,De),fe.write_shift(2,~De&65535);De-- >0;)fe[fe.l++]=ke[be++];ye=fe.l*8;continue}ye=he(fe,ye,+(be+De==ke.length)+2);for(var Me=0;De-- >0;){var Fe=ke[be];Me=(Me<<5^Fe)&32767;var Ie=-1,Ke=0;if((Ie=Ee[Me])&&(Ie|=be&-32768,Ie>be&&(Ie-=32768),Ie<be))for(;ke[Ie+Ke]==ke[be+Ke]&&Ke<250;)++Ke;if(Ke>2){Fe=ee[Ke],Fe<=22?ye=G(fe,ye,ue[Fe+1]>>1)-1:(G(fe,ye,3),ye+=5,G(fe,ye,ue[Fe-23]>>5),ye+=3);var At=Fe<8?0:Fe-4>>2;At>0&&(Q(fe,ye,Ke-Z[Fe]),ye+=At),Fe=K[be-Ie],ye=G(fe,ye,ue[Fe]>>3),ye-=3;var Et=Fe<4?0:Fe-2>>1;Et>0&&(Q(fe,ye,be-Ie-re[Fe]),ye+=Et);for(var ms=0;ms<Ke;++ms)Ee[Me]=be&32767,Me=(Me<<5^ke[be])&32767,++be;De-=Ke-1}else Fe<=143?Fe=Fe+48:ye=Se(fe,ye,1),ye=G(fe,ye,ue[Fe]),Ee[Me]=be&32767,++be}ye=G(fe,ye,0)-1}return fe.l=(ye+7)/8|0,fe.l}return function(fe,ye){return fe.length<8?ae(fe,ye):ge(fe,ye)}}();function ze(B){var K=Yt(50+Math.floor(B.length*1.1)),q=Pe(B,K);return K.slice(0,q)}var Ye=oe?new Uint16Array(32768):je(32768),at=oe?new Uint16Array(32768):je(32768),ut=oe?new Uint16Array(128):je(128),us=1,ja=1;function Gr(B,K){var q=te(B,K)+257;K+=5;var Y=te(B,K)+1;K+=5;var ee=V(B,K)+4;K+=4;for(var ae=0,ge=oe?new Uint8Array(19):je(19),ke=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],fe=1,ye=oe?new Uint8Array(8):je(8),be=oe?new Uint8Array(8):je(8),Ee=ge.length,De=0;De<ee;++De)ge[P[De]]=ae=L(B,K),fe<ae&&(fe=ae),ye[ae]++,K+=3;var Me=0;for(ye[0]=0,De=1;De<=fe;++De)be[De]=Me=Me+ye[De-1]<<1;for(De=0;De<Ee;++De)(Me=ge[De])!=0&&(ke[De]=be[Me]++);var Fe=0;for(De=0;De<Ee;++De)if(Fe=ge[De],Fe!=0){Me=ue[ke[De]]>>8-Fe;for(var Ie=(1<<7-Fe)-1;Ie>=0;--Ie)ut[Me|Ie<<Fe]=Fe&7|De<<3}var Ke=[];for(fe=1;Ke.length<q+Y;)switch(Me=ut[ne(B,K)],K+=Me&7,Me>>>=3){case 16:for(ae=3+ce(B,K),K+=2,Me=Ke[Ke.length-1];ae-- >0;)Ke.push(Me);break;case 17:for(ae=3+L(B,K),K+=3;ae-- >0;)Ke.push(0);break;case 18:for(ae=11+ne(B,K),K+=7;ae-- >0;)Ke.push(0);break;default:Ke.push(Me),fe<Me&&(fe=Me);break}var At=Ke.slice(0,q),Et=Ke.slice(q);for(De=q;De<286;++De)At[De]=0;for(De=Y;De<30;++De)Et[De]=0;return us=Ae(At,Ye,286),ja=Ae(Et,at,30),K}function Yr(B,K){if(B[0]==3&&!(B[1]&3))return[cr(K),2];for(var q=0,Y=0,ee=Lx(K||1<<18),ae=0,ge=ee.length>>>0,ke=0,fe=0;!(Y&1);){if(Y=L(B,q),q+=3,Y>>>1)Y>>1==1?(ke=9,fe=5):(q=Gr(B,q),ke=us,fe=ja);else{q&7&&(q+=8-(q&7));var ye=B[q>>>3]|B[(q>>>3)+1]<<8;if(q+=32,ye>0)for(!K&&ge<ae+ye&&(ee=me(ee,ae+ye),ge=ee.length);ye-- >0;)ee[ae++]=B[q>>>3],q+=8;continue}for(;;){!K&&ge<ae+32767&&(ee=me(ee,ae+32767),ge=ee.length);var be=xe(B,q,ke),Ee=Y>>>1==1?we[be]:Ye[be];if(q+=Ee&15,Ee>>>=4,!(Ee>>>8&255))ee[ae++]=Ee;else{if(Ee==256)break;Ee-=257;var De=Ee<8?0:Ee-4>>2;De>5&&(De=0);var Me=ae+Z[Ee];De>0&&(Me+=xe(B,q,De),q+=De),be=xe(B,q,fe),Ee=Y>>>1==1?_e[be]:at[be],q+=Ee&15,Ee>>>=4;var Fe=Ee<4?0:Ee-2>>1,Ie=re[Ee];for(Fe>0&&(Ie+=xe(B,q,Fe),q+=Fe),!K&&ge<Me&&(ee=me(ee,Me+100),ge=ee.length);ae<Me;)ee[ae]=ee[ae-Ie],++ae}}}return K?[ee,q+7>>>3]:[ee.slice(0,ae),q+7>>>3]}function fr(B,K){var q=B.slice(B.l||0),Y=Yr(q,K);return B.l+=Y[1],Y[0]}function pr(B,K){if(B)typeof console<"u"&&console.error(K);else throw new Error(K)}function Li(B,K){var q=B;cs(q,0);var Y=[],ee=[],ae={FileIndex:Y,FullPaths:ee};C(ae,{root:K.root});for(var ge=q.length-4;(q[ge]!=80||q[ge+1]!=75||q[ge+2]!=5||q[ge+3]!=6)&&ge>=0;)--ge;q.l=ge+4,q.l+=4;var ke=q.read_shift(2);q.l+=6;var fe=q.read_shift(4);for(q.l=fe,ge=0;ge<ke;++ge){q.l+=20;var ye=q.read_shift(4),be=q.read_shift(4),Ee=q.read_shift(2),De=q.read_shift(2),Me=q.read_shift(2);q.l+=8;var Fe=q.read_shift(4),Ie=c(q.slice(q.l+Ee,q.l+Ee+De));q.l+=Ee+De+Me;var Ke=q.l;q.l=Fe+4,xc(q,ye,be,ae,Ie),q.l=Ke}return ae}function xc(B,K,q,Y,ee){B.l+=2;var ae=B.read_shift(2),ge=B.read_shift(2),ke=l(B);if(ae&8257)throw new Error("Unsupported ZIP encryption");for(var fe=B.read_shift(4),ye=B.read_shift(4),be=B.read_shift(4),Ee=B.read_shift(2),De=B.read_shift(2),Me="",Fe=0;Fe<Ee;++Fe)Me+=String.fromCharCode(B[B.l++]);if(De){var Ie=c(B.slice(B.l,B.l+De));(Ie[21589]||{}).mt&&(ke=Ie[21589].mt),((ee||{})[21589]||{}).mt&&(ke=ee[21589].mt)}B.l+=De;var Ke=B.slice(B.l,B.l+ye);switch(ge){case 8:Ke=z(B,be);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+ge)}var At=!1;ae&8&&(fe=B.read_shift(4),fe==134695760&&(fe=B.read_shift(4),At=!0),ye=B.read_shift(4),be=B.read_shift(4)),ye!=K&&pr(At,"Bad compressed size: "+K+" != "+ye),be!=q&&pr(At,"Bad uncompressed size: "+q+" != "+be),Is(Y,Me,Ke,{unsafe:!0,mt:ke})}function ts(B,K){var q=K||{},Y=[],ee=[],ae=Yt(1),ge=q.compression?8:0,ke=0,fe=0,ye=0,be=0,Ee=0,De=B.FullPaths[0],Me=De,Fe=B.FileIndex[0],Ie=[],Ke=0;for(fe=1;fe<B.FullPaths.length;++fe)if(Me=B.FullPaths[fe].slice(De.length),Fe=B.FileIndex[fe],!(!Fe.size||!Fe.content||Me=="Sh33tJ5")){var At=be,Et=Yt(Me.length);for(ye=0;ye<Me.length;++ye)Et.write_shift(1,Me.charCodeAt(ye)&127);Et=Et.slice(0,Et.l),Ie[Ee]=Aj.buf(Fe.content,0);var ms=Fe.content;ge==8&&(ms=O(ms)),ae=Yt(30),ae.write_shift(4,67324752),ae.write_shift(2,20),ae.write_shift(2,ke),ae.write_shift(2,ge),Fe.mt?i(ae,Fe.mt):ae.write_shift(4,0),ae.write_shift(-4,Ie[Ee]),ae.write_shift(4,ms.length),ae.write_shift(4,Fe.content.length),ae.write_shift(2,Et.length),ae.write_shift(2,0),be+=ae.length,Y.push(ae),be+=Et.length,Y.push(Et),be+=ms.length,Y.push(ms),ae=Yt(46),ae.write_shift(4,33639248),ae.write_shift(2,0),ae.write_shift(2,20),ae.write_shift(2,ke),ae.write_shift(2,ge),ae.write_shift(4,0),ae.write_shift(-4,Ie[Ee]),ae.write_shift(4,ms.length),ae.write_shift(4,Fe.content.length),ae.write_shift(2,Et.length),ae.write_shift(2,0),ae.write_shift(2,0),ae.write_shift(2,0),ae.write_shift(2,0),ae.write_shift(4,0),ae.write_shift(4,At),Ke+=ae.l,ee.push(ae),Ke+=Et.length,ee.push(Et),++Ee}return ae=Yt(22),ae.write_shift(4,101010256),ae.write_shift(2,0),ae.write_shift(2,0),ae.write_shift(2,Ee),ae.write_shift(2,Ee),ae.write_shift(4,Ke),ae.write_shift(4,be),ae.write_shift(2,0),tr([tr(Y),tr(ee),ae])}var ss={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function Ss(B,K){if(B.ctype)return B.ctype;var q=B.name||"",Y=q.match(/\.([^\.]+)$/);return Y&&ss[Y[1]]||K&&(Y=(q=K).match(/[\.\\]([^\.\\])+$/),Y&&ss[Y[1]])?ss[Y[1]]:"application/octet-stream"}function Na(B){for(var K=Ox(B),q=[],Y=0;Y<K.length;Y+=76)q.push(K.slice(Y,Y+76));return q.join(`\r
`)+`\r
`}function Ps(B){var K=B.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function(ye){var be=ye.charCodeAt(0).toString(16).toUpperCase();return"="+(be.length==1?"0"+be:be)});K=K.replace(/ $/mg,"=20").replace(/\t$/mg,"=09"),K.charAt(0)==`
`&&(K="=0D"+K.slice(1)),K=K.replace(/\r(?!\n)/mg,"=0D").replace(/\n\n/mg,`
=0A`).replace(/([^\r\n])\n/mg,"$1=0A");for(var q=[],Y=K.split(`\r
`),ee=0;ee<Y.length;++ee){var ae=Y[ee];if(ae.length==0){q.push("");continue}for(var ge=0;ge<ae.length;){var ke=76,fe=ae.slice(ge,ge+ke);fe.charAt(ke-1)=="="?ke--:fe.charAt(ke-2)=="="?ke-=2:fe.charAt(ke-3)=="="&&(ke-=3),fe=ae.slice(ge,ge+ke),ge+=ke,ge<ae.length&&(fe+="="),q.push(fe)}}return q.join(`\r
`)}function Cs(B){for(var K=[],q=0;q<B.length;++q){for(var Y=B[q];q<=B.length&&Y.charAt(Y.length-1)=="=";)Y=Y.slice(0,Y.length-1)+B[++q];K.push(Y)}for(var ee=0;ee<K.length;++ee)K[ee]=K[ee].replace(/[=][0-9A-Fa-f]{2}/g,function(ae){return String.fromCharCode(parseInt(ae.slice(1),16))});return ua(K.join(`\r
`))}function Qs(B,K,q){for(var Y="",ee="",ae="",ge,ke=0;ke<10;++ke){var fe=K[ke];if(!fe||fe.match(/^\s*$/))break;var ye=fe.match(/^(.*?):\s*([^\s].*)$/);if(ye)switch(ye[1].toLowerCase()){case"content-location":Y=ye[2].trim();break;case"content-type":ae=ye[2].trim();break;case"content-transfer-encoding":ee=ye[2].trim();break}}switch(++ke,ee.toLowerCase()){case"base64":ge=ua(Js(K.slice(ke).join("")));break;case"quoted-printable":ge=Cs(K.slice(ke));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+ee)}var be=Is(B,Y.slice(q.length),ge,{unsafe:!0});ae&&(be.ctype=ae)}function Za(B,K){if(D(B.slice(0,13)).toLowerCase()!="mime-version:")throw new Error("Unsupported MAD header");var q=K&&K.root||"",Y=(nt&&Buffer.isBuffer(B)?B.toString("binary"):D(B)).split(`\r
`),ee=0,ae="";for(ee=0;ee<Y.length;++ee)if(ae=Y[ee],!!/^Content-Location:/i.test(ae)&&(ae=ae.slice(ae.indexOf("file")),q||(q=ae.slice(0,ae.lastIndexOf("/")+1)),ae.slice(0,q.length)!=q))for(;q.length>0&&(q=q.slice(0,q.length-1),q=q.slice(0,q.lastIndexOf("/")+1),ae.slice(0,q.length)!=q););var ge=(Y[1]||"").match(/boundary="(.*?)"/);if(!ge)throw new Error("MAD cannot find boundary");var ke="--"+(ge[1]||""),fe=[],ye=[],be={FileIndex:fe,FullPaths:ye};C(be);var Ee,De=0;for(ee=0;ee<Y.length;++ee){var Me=Y[ee];Me!==ke&&Me!==ke+"--"||(De++&&Qs(be,Y.slice(Ee,ee),q),Ee=ee)}return be}function Wt(B,K){var q=K||{},Y=q.boundary||"SheetJS";Y="------="+Y;for(var ee=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+Y.slice(2)+'"',"","",""],ae=B.FullPaths[0],ge=ae,ke=B.FileIndex[0],fe=1;fe<B.FullPaths.length;++fe)if(ge=B.FullPaths[fe].slice(ae.length),ke=B.FileIndex[fe],!(!ke.size||!ke.content||ge=="Sh33tJ5")){ge=ge.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(Ke){return"_x"+Ke.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(Ke){return"_u"+Ke.charCodeAt(0).toString(16)+"_"});for(var ye=ke.content,be=nt&&Buffer.isBuffer(ye)?ye.toString("binary"):D(ye),Ee=0,De=Math.min(1024,be.length),Me=0,Fe=0;Fe<=De;++Fe)(Me=be.charCodeAt(Fe))>=32&&Me<128&&++Ee;var Ie=Ee>=De*4/5;ee.push(Y),ee.push("Content-Location: "+(q.root||"file:///C:/SheetJS/")+ge),ee.push("Content-Transfer-Encoding: "+(Ie?"quoted-printable":"base64")),ee.push("Content-Type: "+Ss(ke,ge)),ee.push(""),ee.push(Ie?Ps(be):Na(be))}return ee.push(Y+`--\r
`),ee.join(`\r
`)}function wa(B){var K={};return C(K,B),K}function Is(B,K,q,Y){var ee=Y&&Y.unsafe;ee||C(B);var ae=!ee&&lt.find(B,K);if(!ae){var ge=B.FullPaths[0];K.slice(0,ge.length)==ge?ge=K:(ge.slice(-1)!="/"&&(ge+="/"),ge=(ge+K).replace("//","/")),ae={name:n(K),type:2},B.FileIndex.push(ae),B.FullPaths.push(ge),ee||lt.utils.cfb_gc(B)}return ae.content=q,ae.size=q?q.length:0,Y&&(Y.CLSID&&(ae.clsid=Y.CLSID),Y.mt&&(ae.mt=Y.mt),Y.ct&&(ae.ct=Y.ct)),ae}function ca(B,K){C(B);var q=lt.find(B,K);if(q){for(var Y=0;Y<B.FileIndex.length;++Y)if(B.FileIndex[Y]==q)return B.FileIndex.splice(Y,1),B.FullPaths.splice(Y,1),!0}return!1}function gr(B,K,q){C(B);var Y=lt.find(B,K);if(Y){for(var ee=0;ee<B.FileIndex.length;++ee)if(B.FileIndex[ee]==Y)return B.FileIndex[ee].name=n(q),B.FullPaths[ee]=q,!0}return!1}function yr(B){S(B,!0)}return s.find=R,s.read=N,s.parse=x,s.write=le,s.writeFile=X,s.utils={cfb_new:wa,cfb_add:Is,cfb_del:ca,cfb_mov:gr,cfb_gc:yr,ReadShift:Yn,CheckField:Vh,prep_blob:cs,bconcat:tr,use_zlib:E,_deflateRaw:ze,_inflateRaw:fr,consts:se},s}();function Ej(t){if(typeof Deno<"u")return Deno.readFileSync(t);if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var s=File(t);s.open("r"),s.encoding="binary";var a=s.read();return s.close(),a}catch(r){if(!r.message||!r.message.match(/onstruct/))throw r}throw new Error("Cannot access file "+t)}function Pa(t){for(var s=Object.keys(t),a=[],r=0;r<s.length;++r)Object.prototype.hasOwnProperty.call(t,s[r])&&a.push(s[r]);return a}function xd(t){for(var s=[],a=Pa(t),r=0;r!==a.length;++r)s[t[a[r]]]=a[r];return s}var bl=new Date(1899,11,30,0,0,0);function Ds(t,s){var a=t.getTime(),r=bl.getTime()+(t.getTimezoneOffset()-bl.getTimezoneOffset())*6e4;return(a-r)/(24*60*60*1e3)}var Nh=new Date,_j=bl.getTime()+(Nh.getTimezoneOffset()-bl.getTimezoneOffset())*6e4,Wx=Nh.getTimezoneOffset();function Yl(t){var s=new Date;return s.setTime(t*24*60*60*1e3+_j),s.getTimezoneOffset()!==Wx&&s.setTime(s.getTime()+(s.getTimezoneOffset()-Wx)*6e4),s}function Fj(t){var s=0,a=0,r=!1,n=t.match(/P([0-9\.]+Y)?([0-9\.]+M)?([0-9\.]+D)?T([0-9\.]+H)?([0-9\.]+M)?([0-9\.]+S)?/);if(!n)throw new Error("|"+t+"| is not an ISO8601 Duration");for(var i=1;i!=n.length;++i)if(n[i]){switch(a=1,i>3&&(r=!0),n[i].slice(n[i].length-1)){case"Y":throw new Error("Unsupported ISO Duration Field: "+n[i].slice(n[i].length-1));case"D":a*=24;case"H":a*=60;case"M":if(r)a*=60;else throw new Error("Unsupported ISO Duration Field: M")}s+=a*parseInt(n[i],10)}return s}var Gx=new Date("2017-02-19T19:06:09.000Z"),wh=isNaN(Gx.getFullYear())?new Date("2/19/17"):Gx,Tj=wh.getFullYear()==2017;function ls(t,s){var a=new Date(t);if(Tj)return s>0?a.setTime(a.getTime()+a.getTimezoneOffset()*60*1e3):s<0&&a.setTime(a.getTime()-a.getTimezoneOffset()*60*1e3),a;if(t instanceof Date)return t;if(wh.getFullYear()==1917&&!isNaN(a.getFullYear())){var r=a.getFullYear();return t.indexOf(""+r)>-1||a.setFullYear(a.getFullYear()+100),a}var n=t.match(/\d+/g)||["2017","2","19","0","0","0"],i=new Date(+n[0],+n[1]-1,+n[2],+n[3]||0,+n[4]||0,+n[5]||0);return t.indexOf("Z")>-1&&(i=new Date(i.getTime()-i.getTimezoneOffset()*60*1e3)),i}function Ir(t,s){if(nt&&Buffer.isBuffer(t)){if(s){if(t[0]==255&&t[1]==254)return Hn(t.slice(2).toString("utf16le"));if(t[1]==254&&t[2]==255)return Hn(oh(t.slice(2).toString("binary")))}return t.toString("binary")}if(typeof TextDecoder<"u")try{if(s){if(t[0]==255&&t[1]==254)return Hn(new TextDecoder("utf-16le").decode(t.slice(2)));if(t[0]==254&&t[1]==255)return Hn(new TextDecoder("utf-16be").decode(t.slice(2)))}var a={"â‚¬":"Â€","â€š":"Â‚",Æ’:"Âƒ","â€ž":"Â„","â€¦":"Â…","â€ ":"Â†","â€¡":"Â‡","Ë†":"Âˆ","â€°":"Â‰",Å :"ÂŠ","â€¹":"Â‹",Å’:"ÂŒ",Å½:"ÂŽ","â€˜":"Â‘","â€™":"Â’","â€œ":"Â“","â€":"Â”","â€¢":"Â•","â€“":"Â–","â€”":"Â—","Ëœ":"Â˜","â„¢":"Â™",Å¡:"Âš","â€º":"Â›",Å“:"Âœ",Å¾:"Âž",Å¸:"ÂŸ"};return Array.isArray(t)&&(t=new Uint8Array(t)),new TextDecoder("latin1").decode(t).replace(/[â‚¬â€šÆ’â€žâ€¦â€ â€¡Ë†â€°Å â€¹Å’Å½â€˜â€™â€œâ€â€¢â€“â€”Ëœâ„¢Å¡â€ºÅ“Å¾Å¸]/g,function(i){return a[i]||i})}catch{}for(var r=[],n=0;n!=t.length;++n)r.push(String.fromCharCode(t[n]));return r.join("")}function os(t){if(typeof JSON<"u"&&!Array.isArray(t))return JSON.parse(JSON.stringify(t));if(typeof t!="object"||t==null)return t;if(t instanceof Date)return new Date(t.getTime());var s={};for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(s[a]=os(t[a]));return s}function Tt(t,s){for(var a="";a.length<s;)a+=t;return a}function pa(t){var s=Number(t);if(!isNaN(s))return isFinite(s)?s:NaN;if(!/\d/.test(t))return s;var a=1,r=t.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return a*=100,""});return!isNaN(s=Number(r))||(r=r.replace(/[(](.*)[)]/,function(n,i){return a=-a,i}),!isNaN(s=Number(r)))?s/a:s}var Dj=["january","february","march","april","may","june","july","august","september","october","november","december"];function bn(t){var s=new Date(t),a=new Date(NaN),r=s.getYear(),n=s.getMonth(),i=s.getDate();if(isNaN(i))return a;var l=t.toLowerCase();if(l.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if(l=l.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,""),l.length>3&&Dj.indexOf(l)==-1)return a}else if(l.match(/[a-z]/))return a;return r<0||r>8099?a:(n>0||i>1)&&r!=101?s:t.match(/[^-0-9:,\/\\]/)?a:s}var Rj=function(){var t="abacaba".split(/(:?b)/i).length==5;return function(a,r,n){if(t||typeof r=="string")return a.split(r);for(var i=a.split(r),l=[i[0]],c=1;c<i.length;++c)l.push(n),l.push(i[c]);return l}}();function kh(t){return t?t.content&&t.type?Ir(t.content,!0):t.data?zn(t.data):t.asNodeBuffer&&nt?zn(t.asNodeBuffer().toString("binary")):t.asBinary?zn(t.asBinary()):t._data&&t._data.getContent?zn(Ir(Array.prototype.slice.call(t._data.getContent(),0))):null:null}function Sh(t){if(!t)return null;if(t.data)return Ix(t.data);if(t.asNodeBuffer&&nt)return t.asNodeBuffer();if(t._data&&t._data.getContent){var s=t._data.getContent();return typeof s=="string"?Ix(s):Array.prototype.slice.call(s)}return t.content&&t.type?t.content:null}function Pj(t){return t&&t.name.slice(-4)===".bin"?Sh(t):kh(t)}function sa(t,s){for(var a=t.FullPaths||Pa(t.files),r=s.toLowerCase().replace(/[\/]/g,"\\"),n=r.replace(/\\/g,"/"),i=0;i<a.length;++i){var l=a[i].replace(/^Root Entry[\/]/,"").toLowerCase();if(r==l||n==l)return t.files?t.files[a[i]]:t.FileIndex[i]}return null}function ud(t,s){var a=sa(t,s);if(a==null)throw new Error("Cannot find file "+s+" in zip");return a}function zt(t,s,a){if(!a)return Pj(ud(t,s));if(!s)return null;try{return zt(t,s)}catch{return null}}function Gs(t,s,a){if(!a)return kh(ud(t,s));if(!s)return null;try{return Gs(t,s)}catch{return null}}function Ij(t,s,a){return Sh(ud(t,s))}function Yx(t){for(var s=t.FullPaths||Pa(t.files),a=[],r=0;r<s.length;++r)s[r].slice(-1)!="/"&&a.push(s[r].replace(/^Root Entry[\/]/,""));return a.sort()}function $j(t,s,a){if(t.FullPaths){if(typeof a=="string"){var r;return nt?r=Br(a):r=tj(a),lt.utils.cfb_add(t,s,r)}lt.utils.cfb_add(t,s,a)}else t.file(s,a)}function Ch(t,s){switch(s.type){case"base64":return lt.read(t,{type:"base64"});case"binary":return lt.read(t,{type:"binary"});case"buffer":case"array":return lt.read(t,{type:"buffer"})}throw new Error("Unrecognized type "+s.type)}function Vn(t,s){if(t.charAt(0)=="/")return t.slice(1);var a=s.split("/");s.slice(-1)!="/"&&a.pop();for(var r=t.split("/");r.length!==0;){var n=r.shift();n===".."?a.pop():n!=="."&&a.push(n)}return a.join("/")}var Ah=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r
`,Oj=/([^"\s?>\/]+)\s*=\s*((?:")([^"]*)(?:")|(?:')([^']*)(?:')|([^'">\s]+))/g,Zx=/<[\/\?]?[a-zA-Z0-9:_-]+(?:\s+[^"\s?>\/]+\s*=\s*(?:"[^"]*"|'[^']*'|[^'">\s=]+))*\s*[\/\?]?>/mg,Lj=/<[^>]*>/g,ks=Ah.match(Zx)?Zx:Lj,Mj=/<\w*:/,Bj=/<(\/?)\w+:/;function Ze(t,s,a){for(var r={},n=0,i=0;n!==t.length&&!((i=t.charCodeAt(n))===32||i===10||i===13);++n);if(s||(r[0]=t.slice(0,n)),n===t.length)return r;var l=t.match(Oj),c=0,o="",d=0,x="",u="",m=1;if(l)for(d=0;d!=l.length;++d){for(u=l[d],i=0;i!=u.length&&u.charCodeAt(i)!==61;++i);for(x=u.slice(0,i).trim();u.charCodeAt(i+1)==32;)++i;for(m=(n=u.charCodeAt(i+1))==34||n==39?1:0,o=u.slice(i+1+m,u.length-m),c=0;c!=x.length&&x.charCodeAt(c)!==58;++c);if(c===x.length)x.indexOf("_")>0&&(x=x.slice(0,x.indexOf("_"))),r[x]=o,r[x.toLowerCase()]=o;else{var f=(c===5&&x.slice(0,5)==="xmlns"?"xmlns":"")+x.slice(c+1);if(r[f]&&x.slice(c-3,c)=="ext")continue;r[f]=o,r[f.toLowerCase()]=o}}return r}function Oa(t){return t.replace(Bj,"<$1")}var Eh={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},zj=xd(Eh),dt=function(){var t=/&(?:quot|apos|gt|lt|amp|#x?([\da-fA-F]+));/ig,s=/_x([\da-fA-F]{4})_/ig;return function a(r){var n=r+"",i=n.indexOf("<![CDATA[");if(i==-1)return n.replace(t,function(c,o){return Eh[c]||String.fromCharCode(parseInt(o,c.indexOf("x")>-1?16:10))||c}).replace(s,function(c,o){return String.fromCharCode(parseInt(o,16))});var l=n.indexOf("]]>");return a(n.slice(0,i))+n.slice(i+9,l)+a(n.slice(l+3))}}(),Uj=/[&<>'"]/g,Vj=/[\u0000-\u001f]/g;function md(t){var s=t+"";return s.replace(Uj,function(a){return zj[a]}).replace(/\n/g,"<br/>").replace(Vj,function(a){return"&#x"+("000"+a.charCodeAt(0).toString(16)).slice(-4)+";"})}var Jx=function(){var t=/&#(\d+);/g;function s(a,r){return String.fromCharCode(parseInt(r,10))}return function(r){return r.replace(t,s)}}();function Nt(t){switch(t){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}function vc(t){for(var s="",a=0,r=0,n=0,i=0,l=0,c=0;a<t.length;){if(r=t.charCodeAt(a++),r<128){s+=String.fromCharCode(r);continue}if(n=t.charCodeAt(a++),r>191&&r<224){l=(r&31)<<6,l|=n&63,s+=String.fromCharCode(l);continue}if(i=t.charCodeAt(a++),r<240){s+=String.fromCharCode((r&15)<<12|(n&63)<<6|i&63);continue}l=t.charCodeAt(a++),c=((r&7)<<18|(n&63)<<12|(i&63)<<6|l&63)-65536,s+=String.fromCharCode(55296+(c>>>10&1023)),s+=String.fromCharCode(56320+(c&1023))}return s}function Xx(t){var s=cr(2*t.length),a,r,n=1,i=0,l=0,c;for(r=0;r<t.length;r+=n)n=1,(c=t.charCodeAt(r))<128?a=c:c<224?(a=(c&31)*64+(t.charCodeAt(r+1)&63),n=2):c<240?(a=(c&15)*4096+(t.charCodeAt(r+1)&63)*64+(t.charCodeAt(r+2)&63),n=3):(n=4,a=(c&7)*262144+(t.charCodeAt(r+1)&63)*4096+(t.charCodeAt(r+2)&63)*64+(t.charCodeAt(r+3)&63),a-=65536,l=55296+(a>>>10&1023),a=56320+(a&1023)),l!==0&&(s[i++]=l&255,s[i++]=l>>>8,l=0),s[i++]=a%256,s[i++]=a>>>8;return s.slice(0,i).toString("ucs2")}function Kx(t){return Br(t,"binary").toString("utf8")}var Vi="foo bar bazÃ¢Â˜ÂƒÃ°ÂŸÂÂ£",vt=nt&&(Kx(Vi)==vc(Vi)&&Kx||Xx(Vi)==vc(Vi)&&Xx)||vc,Hn=nt?function(t){return Br(t,"utf8").toString("binary")}:function(t){for(var s=[],a=0,r=0,n=0;a<t.length;)switch(r=t.charCodeAt(a++),!0){case r<128:s.push(String.fromCharCode(r));break;case r<2048:s.push(String.fromCharCode(192+(r>>6))),s.push(String.fromCharCode(128+(r&63)));break;case(r>=55296&&r<57344):r-=55296,n=t.charCodeAt(a++)-56320+(r<<10),s.push(String.fromCharCode(240+(n>>18&7))),s.push(String.fromCharCode(144+(n>>12&63))),s.push(String.fromCharCode(128+(n>>6&63))),s.push(String.fromCharCode(128+(n&63)));break;default:s.push(String.fromCharCode(224+(r>>12))),s.push(String.fromCharCode(128+(r>>6&63))),s.push(String.fromCharCode(128+(r&63)))}return s.join("")},di=function(){var t={};return function(a,r){var n=a+"|"+(r||"");return t[n]?t[n]:t[n]=new RegExp("<(?:\\w+:)?"+a+'(?: xml:space="preserve")?(?:[^>]*)>([\\s\\S]*?)</(?:\\w+:)?'+a+">",r||"")}}(),_h=function(){var t=[["nbsp"," "],["middot","Â·"],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(s){return[new RegExp("&"+s[0]+";","ig"),s[1]]});return function(a){for(var r=a.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,`
`).replace(/<[^>]*>/g,""),n=0;n<t.length;++n)r=r.replace(t[n][0],t[n][1]);return r}}(),Hj=function(){var t={};return function(a){return t[a]!==void 0?t[a]:t[a]=new RegExp("<(?:vt:)?"+a+">([\\s\\S]*?)</(?:vt:)?"+a+">","g")}}(),qj=/<\/?(?:vt:)?variant>/g,Wj=/<(?:vt:)([^>]*)>([\s\S]*)</;function Qx(t,s){var a=Ze(t),r=t.match(Hj(a.baseType))||[],n=[];if(r.length!=a.size){if(s.WTF)throw new Error("unexpected vector length "+r.length+" != "+a.size);return n}return r.forEach(function(i){var l=i.replace(qj,"").match(Wj);l&&n.push({v:vt(l[2]),t:l[1]})}),n}var Gj=/(^\s|\s$|\n)/;function Yj(t){return Pa(t).map(function(s){return" "+s+'="'+t[s]+'"'}).join("")}function Zj(t,s,a){return"<"+t+(a!=null?Yj(a):"")+(s!=null?(s.match(Gj)?' xml:space="preserve"':"")+">"+s+"</"+t:"/")+">"}function hd(t){if(nt&&Buffer.isBuffer(t))return t.toString("utf8");if(typeof t=="string")return t;if(typeof Uint8Array<"u"&&t instanceof Uint8Array)return vt(zr(cd(t)));throw new Error("Bad input format: expected Buffer or string")}var xi=/<(\/?)([^\s?><!\/:]*:|)([^\s?<>:\/]+)(?:[\s?:\/][^>]*)?>/mg,Jj={CT:"http://schemas.openxmlformats.org/package/2006/content-types"},Xj=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"];function Kj(t,s){for(var a=1-2*(t[s+7]>>>7),r=((t[s+7]&127)<<4)+(t[s+6]>>>4&15),n=t[s+6]&15,i=5;i>=0;--i)n=n*256+t[s+i];return r==2047?n==0?a*(1/0):NaN:(r==0?r=-1022:(r-=1023,n+=Math.pow(2,52)),a*Math.pow(2,r-52)*n)}function Qj(t,s,a){var r=(s<0||1/s==-1/0?1:0)<<7,n=0,i=0,l=r?-s:s;isFinite(l)?l==0?n=i=0:(n=Math.floor(Math.log(l)/Math.LN2),i=l*Math.pow(2,52-n),n<=-1023&&(!isFinite(i)||i<Math.pow(2,52))?n=-1022:(i-=Math.pow(2,52),n+=1023)):(n=2047,i=isNaN(s)?26985:0);for(var c=0;c<=5;++c,i/=256)t[a+c]=i&255;t[a+6]=(n&15)<<4|i&15,t[a+7]=n>>4|r}var eu=function(t){for(var s=[],a=10240,r=0;r<t[0].length;++r)if(t[0][r])for(var n=0,i=t[0][r].length;n<i;n+=a)s.push.apply(s,t[0][r].slice(n,n+a));return s},tu=nt?function(t){return t[0].length>0&&Buffer.isBuffer(t[0][0])?Buffer.concat(t[0].map(function(s){return Buffer.isBuffer(s)?s:Br(s)})):eu(t)}:eu,su=function(t,s,a){for(var r=[],n=s;n<a;n+=2)r.push(String.fromCharCode(Ua(t,n)));return r.join("").replace(Ts,"")},fd=nt?function(t,s,a){return Buffer.isBuffer(t)?t.toString("utf16le",s,a).replace(Ts,""):su(t,s,a)}:su,au=function(t,s,a){for(var r=[],n=s;n<s+a;++n)r.push(("0"+t[n].toString(16)).slice(-2));return r.join("")},Fh=nt?function(t,s,a){return Buffer.isBuffer(t)?t.toString("hex",s,s+a):au(t,s,a)}:au,ru=function(t,s,a){for(var r=[],n=s;n<a;n++)r.push(String.fromCharCode(en(t,n)));return r.join("")},Ei=nt?function(s,a,r){return Buffer.isBuffer(s)?s.toString("utf8",a,r):ru(s,a,r)}:ru,Th=function(t,s){var a=Ws(t,s);return a>0?Ei(t,s+4,s+4+a-1):""},Dh=Th,Rh=function(t,s){var a=Ws(t,s);return a>0?Ei(t,s+4,s+4+a-1):""},Ph=Rh,Ih=function(t,s){var a=2*Ws(t,s);return a>0?Ei(t,s+4,s+4+a-1):""},$h=Ih,Oh=function(s,a){var r=Ws(s,a);return r>0?fd(s,a+4,a+4+r):""},Lh=Oh,Mh=function(t,s){var a=Ws(t,s);return a>0?Ei(t,s+4,s+4+a):""},Bh=Mh,zh=function(t,s){return Kj(t,s)},vl=zh,Uh=function(s){return Array.isArray(s)||typeof Uint8Array<"u"&&s instanceof Uint8Array};nt&&(Dh=function(s,a){if(!Buffer.isBuffer(s))return Th(s,a);var r=s.readUInt32LE(a);return r>0?s.toString("utf8",a+4,a+4+r-1):""},Ph=function(s,a){if(!Buffer.isBuffer(s))return Rh(s,a);var r=s.readUInt32LE(a);return r>0?s.toString("utf8",a+4,a+4+r-1):""},$h=function(s,a){if(!Buffer.isBuffer(s))return Ih(s,a);var r=2*s.readUInt32LE(a);return s.toString("utf16le",a+4,a+4+r-1)},Lh=function(s,a){if(!Buffer.isBuffer(s))return Oh(s,a);var r=s.readUInt32LE(a);return s.toString("utf16le",a+4,a+4+r)},Bh=function(s,a){if(!Buffer.isBuffer(s))return Mh(s,a);var r=s.readUInt32LE(a);return s.toString("utf8",a+4,a+4+r)},vl=function(s,a){return Buffer.isBuffer(s)?s.readDoubleLE(a):zh(s,a)},Uh=function(s){return Buffer.isBuffer(s)||Array.isArray(s)||typeof Uint8Array<"u"&&s instanceof Uint8Array});var en=function(t,s){return t[s]},Ua=function(t,s){return t[s+1]*256+t[s]},eN=function(t,s){var a=t[s+1]*256+t[s];return a<32768?a:(65535-a+1)*-1},Ws=function(t,s){return t[s+3]*(1<<24)+(t[s+2]<<16)+(t[s+1]<<8)+t[s]},jr=function(t,s){return t[s+3]<<24|t[s+2]<<16|t[s+1]<<8|t[s]},tN=function(t,s){return t[s]<<24|t[s+1]<<16|t[s+2]<<8|t[s+3]};function Yn(t,s){var a="",r,n,i=[],l,c,o,d;switch(s){case"dbcs":if(d=this.l,nt&&Buffer.isBuffer(this))a=this.slice(this.l,this.l+2*t).toString("utf16le");else for(o=0;o<t;++o)a+=String.fromCharCode(Ua(this,d)),d+=2;t*=2;break;case"utf8":a=Ei(this,this.l,this.l+t);break;case"utf16le":t*=2,a=fd(this,this.l,this.l+t);break;case"wstr":return Yn.call(this,t,"dbcs");case"lpstr-ansi":a=Dh(this,this.l),t=4+Ws(this,this.l);break;case"lpstr-cp":a=Ph(this,this.l),t=4+Ws(this,this.l);break;case"lpwstr":a=$h(this,this.l),t=4+2*Ws(this,this.l);break;case"lpp4":t=4+Ws(this,this.l),a=Lh(this,this.l),t&2&&(t+=2);break;case"8lpp4":t=4+Ws(this,this.l),a=Bh(this,this.l),t&3&&(t+=4-(t&3));break;case"cstr":for(t=0,a="";(l=en(this,this.l+t++))!==0;)i.push(Ui(l));a=i.join("");break;case"_wstr":for(t=0,a="";(l=Ua(this,this.l+t))!==0;)i.push(Ui(l)),t+=2;t+=2,a=i.join("");break;case"dbcs-cont":for(a="",d=this.l,o=0;o<t;++o){if(this.lens&&this.lens.indexOf(d)!==-1)return l=en(this,d),this.l=d+1,c=Yn.call(this,t-o,l?"dbcs-cont":"sbcs-cont"),i.join("")+c;i.push(Ui(Ua(this,d))),d+=2}a=i.join(""),t*=2;break;case"cpstr":case"sbcs-cont":for(a="",d=this.l,o=0;o!=t;++o){if(this.lens&&this.lens.indexOf(d)!==-1)return l=en(this,d),this.l=d+1,c=Yn.call(this,t-o,l?"dbcs-cont":"sbcs-cont"),i.join("")+c;i.push(Ui(en(this,d))),d+=1}a=i.join("");break;default:switch(t){case 1:return r=en(this,this.l),this.l++,r;case 2:return r=(s==="i"?eN:Ua)(this,this.l),this.l+=2,r;case 4:case-4:return s==="i"||!(this[this.l+3]&128)?(r=(t>0?jr:tN)(this,this.l),this.l+=4,r):(n=Ws(this,this.l),this.l+=4,n);case 8:case-8:if(s==="f")return t==8?n=vl(this,this.l):n=vl([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,n;t=8;case 16:a=Fh(this,this.l,t);break}}return this.l+=t,a}var sN=function(t,s,a){t[a]=s&255,t[a+1]=s>>>8&255,t[a+2]=s>>>16&255,t[a+3]=s>>>24&255},aN=function(t,s,a){t[a]=s&255,t[a+1]=s>>8&255,t[a+2]=s>>16&255,t[a+3]=s>>24&255},rN=function(t,s,a){t[a]=s&255,t[a+1]=s>>>8&255};function nN(t,s,a){var r=0,n=0;if(a==="dbcs"){for(n=0;n!=s.length;++n)rN(this,s.charCodeAt(n),this.l+2*n);r=2*s.length}else if(a==="sbcs"){for(s=s.replace(/[^\x00-\x7F]/g,"_"),n=0;n!=s.length;++n)this[this.l+n]=s.charCodeAt(n)&255;r=s.length}else if(a==="hex"){for(;n<t;++n)this[this.l++]=parseInt(s.slice(2*n,2*n+2),16)||0;return this}else if(a==="utf16le"){var i=Math.min(this.l+t,this.length);for(n=0;n<Math.min(s.length,t);++n){var l=s.charCodeAt(n);this[this.l++]=l&255,this[this.l++]=l>>8}for(;this.l<i;)this[this.l++]=0;return this}else switch(t){case 1:r=1,this[this.l]=s&255;break;case 2:r=2,this[this.l]=s&255,s>>>=8,this[this.l+1]=s&255;break;case 3:r=3,this[this.l]=s&255,s>>>=8,this[this.l+1]=s&255,s>>>=8,this[this.l+2]=s&255;break;case 4:r=4,sN(this,s,this.l);break;case 8:if(r=8,a==="f"){Qj(this,s,this.l);break}case 16:break;case-4:r=4,aN(this,s,this.l);break}return this.l+=r,this}function Vh(t,s){var a=Fh(this,this.l,t.length>>1);if(a!==t)throw new Error(s+"Expected "+t+" saw "+a);this.l+=t.length>>1}function cs(t,s){t.l=s,t.read_shift=Yn,t.chk=Vh,t.write_shift=nN}function ws(t,s){t.l+=s}function Yt(t){var s=cr(t);return cs(s,0),s}function Ya(t,s,a){if(t){var r,n,i;cs(t,t.l||0);for(var l=t.length,c=0,o=0;t.l<l;){c=t.read_shift(1),c&128&&(c=(c&127)+((t.read_shift(1)&127)<<7));var d=Cl[c]||Cl[65535];for(r=t.read_shift(1),i=r&127,n=1;n<4&&r&128;++n)i+=((r=t.read_shift(1))&127)<<7*n;o=t.l+i;var x=d.f&&d.f(t,i,a);if(t.l=o,s(x,d,c))return}}}function go(){var t=[],s=nt?256:2048,a=function(d){var x=Yt(d);return cs(x,0),x},r=a(s),n=function(){r&&(r.length>r.l&&(r=r.slice(0,r.l),r.l=r.length),r.length>0&&t.push(r),r=null)},i=function(d){return r&&d<r.length-r.l?r:(n(),r=a(Math.max(d+1,s)))},l=function(){return n(),tr(t)},c=function(d){n(),r=d,r.l==null&&(r.l=r.length),i(s)};return{next:i,push:c,end:l,_bufs:t}}function Zn(t,s,a){var r=os(t);if(s.s?(r.cRel&&(r.c+=s.s.c),r.rRel&&(r.r+=s.s.r)):(r.cRel&&(r.c+=s.c),r.rRel&&(r.r+=s.r)),!a||a.biff<12){for(;r.c>=256;)r.c-=256;for(;r.r>=65536;)r.r-=65536}return r}function nu(t,s,a){var r=os(t);return r.s=Zn(r.s,s.s,a),r.e=Zn(r.e,s.s,a),r}function Jn(t,s){if(t.cRel&&t.c<0)for(t=os(t);t.c<0;)t.c+=s>8?16384:256;if(t.rRel&&t.r<0)for(t=os(t);t.r<0;)t.r+=s>8?1048576:s>5?65536:16384;var a=Xe(t);return!t.cRel&&t.cRel!=null&&(a=cN(a)),!t.rRel&&t.rRel!=null&&(a=iN(a)),a}function jc(t,s){return t.s.r==0&&!t.s.rRel&&t.e.r==(s.biff>=12?1048575:s.biff>=8?65536:16384)&&!t.e.rRel?(t.s.cRel?"":"$")+Kt(t.s.c)+":"+(t.e.cRel?"":"$")+Kt(t.e.c):t.s.c==0&&!t.s.cRel&&t.e.c==(s.biff>=12?16383:255)&&!t.e.cRel?(t.s.rRel?"":"$")+ds(t.s.r)+":"+(t.e.rRel?"":"$")+ds(t.e.r):Jn(t.s,s.biff)+":"+Jn(t.e,s.biff)}function pd(t){return parseInt(lN(t),10)-1}function ds(t){return""+(t+1)}function iN(t){return t.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}function lN(t){return t.replace(/\$(\d+)$/,"$1")}function gd(t){for(var s=oN(t),a=0,r=0;r!==s.length;++r)a=26*a+s.charCodeAt(r)-64;return a-1}function Kt(t){if(t<0)throw new Error("invalid column "+t);var s="";for(++t;t;t=Math.floor((t-1)/26))s=String.fromCharCode((t-1)%26+65)+s;return s}function cN(t){return t.replace(/^([A-Z])/,"$$$1")}function oN(t){return t.replace(/^\$([A-Z])/,"$1")}function dN(t){return t.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")}function Fs(t){for(var s=0,a=0,r=0;r<t.length;++r){var n=t.charCodeAt(r);n>=48&&n<=57?s=10*s+(n-48):n>=65&&n<=90&&(a=26*a+(n-64))}return{c:a-1,r:s-1}}function Xe(t){for(var s=t.c+1,a="";s;s=(s-1)/26|0)a=String.fromCharCode((s-1)%26+65)+a;return a+(t.r+1)}function En(t){var s=t.indexOf(":");return s==-1?{s:Fs(t),e:Fs(t)}:{s:Fs(t.slice(0,s)),e:Fs(t.slice(s+1))}}function ct(t,s){return typeof s>"u"||typeof s=="number"?ct(t.s,t.e):(typeof t!="string"&&(t=Xe(t)),typeof s!="string"&&(s=Xe(s)),t==s?t:t+":"+s)}function Dt(t){var s={s:{c:0,r:0},e:{c:0,r:0}},a=0,r=0,n=0,i=t.length;for(a=0;r<i&&!((n=t.charCodeAt(r)-64)<1||n>26);++r)a=26*a+n;for(s.s.c=--a,a=0;r<i&&!((n=t.charCodeAt(r)-48)<0||n>9);++r)a=10*a+n;if(s.s.r=--a,r===i||n!=10)return s.e.c=s.s.c,s.e.r=s.s.r,s;for(++r,a=0;r!=i&&!((n=t.charCodeAt(r)-64)<1||n>26);++r)a=26*a+n;for(s.e.c=--a,a=0;r!=i&&!((n=t.charCodeAt(r)-48)<0||n>9);++r)a=10*a+n;return s.e.r=--a,s}function iu(t,s){var a=t.t=="d"&&s instanceof Date;if(t.z!=null)try{return t.w=na(t.z,a?Ds(s):s)}catch{}try{return t.w=na((t.XF||{}).numFmtId||(a?14:0),a?Ds(s):s)}catch{return""+s}}function Wa(t,s,a){return t==null||t.t==null||t.t=="z"?"":t.w!==void 0?t.w:(t.t=="d"&&!t.z&&a&&a.dateNF&&(t.z=a.dateNF),t.t=="e"?Hr[t.v]||t.v:s==null?iu(t,t.v):iu(t,s))}function ur(t,s){var a=s&&s.sheet?s.sheet:"Sheet1",r={};return r[a]=t,{SheetNames:[a],Sheets:r}}function Hh(t,s,a){var r=a||{},n=t?Array.isArray(t):r.dense,i=t||(n?[]:{}),l=0,c=0;if(i&&r.origin!=null){if(typeof r.origin=="number")l=r.origin;else{var o=typeof r.origin=="string"?Fs(r.origin):r.origin;l=o.r,c=o.c}i["!ref"]||(i["!ref"]="A1:A1")}var d={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(i["!ref"]){var x=Dt(i["!ref"]);d.s.c=x.s.c,d.s.r=x.s.r,d.e.c=Math.max(d.e.c,x.e.c),d.e.r=Math.max(d.e.r,x.e.r),l==-1&&(d.e.r=l=x.e.r+1)}for(var u=0;u!=s.length;++u)if(s[u]){if(!Array.isArray(s[u]))throw new Error("aoa_to_sheet expects an array of arrays");for(var m=0;m!=s[u].length;++m)if(!(typeof s[u][m]>"u")){var f={v:s[u][m]},g=l+u,h=c+m;if(d.s.r>g&&(d.s.r=g),d.s.c>h&&(d.s.c=h),d.e.r<g&&(d.e.r=g),d.e.c<h&&(d.e.c=h),s[u][m]&&typeof s[u][m]=="object"&&!Array.isArray(s[u][m])&&!(s[u][m]instanceof Date))f=s[u][m];else if(Array.isArray(f.v)&&(f.f=s[u][m][1],f.v=f.v[0]),f.v===null)if(f.f)f.t="n";else if(r.nullError)f.t="e",f.v=0;else if(r.sheetStubs)f.t="z";else continue;else typeof f.v=="number"?f.t="n":typeof f.v=="boolean"?f.t="b":f.v instanceof Date?(f.z=r.dateNF||et[14],r.cellDates?(f.t="d",f.w=na(f.z,Ds(f.v))):(f.t="n",f.v=Ds(f.v),f.w=na(f.z,f.v))):f.t="s";if(n)i[g]||(i[g]=[]),i[g][h]&&i[g][h].z&&(f.z=i[g][h].z),i[g][h]=f;else{var p=Xe({c:h,r:g});i[p]&&i[p].z&&(f.z=i[p].z),i[p]=f}}}return d.s.c<1e7&&(i["!ref"]=ct(d)),i}function _n(t,s){return Hh(null,t,s)}function xN(t){return t.read_shift(4,"i")}function Ns(t){var s=t.read_shift(4);return s===0?"":t.read_shift(s,"dbcs")}function uN(t){return{ich:t.read_shift(2),ifnt:t.read_shift(2)}}function yd(t,s){var a=t.l,r=t.read_shift(1),n=Ns(t),i=[],l={t:n,h:n};if(r&1){for(var c=t.read_shift(4),o=0;o!=c;++o)i.push(uN(t));l.r=i}else l.r=[{ich:0,ifnt:0}];return t.l=a+s,l}var mN=yd;function ia(t){var s=t.read_shift(4),a=t.read_shift(2);return a+=t.read_shift(1)<<16,t.l++,{c:s,iStyleRef:a}}function Ur(t){var s=t.read_shift(2);return s+=t.read_shift(1)<<16,t.l++,{c:-1,iStyleRef:s}}var hN=Ns;function bd(t){var s=t.read_shift(4);return s===0||s===4294967295?"":t.read_shift(s,"dbcs")}var fN=Ns,yo=bd;function vd(t){var s=t.slice(t.l,t.l+4),a=s[0]&1,r=s[0]&2;t.l+=4;var n=r===0?vl([0,0,0,0,s[0]&252,s[1],s[2],s[3]],0):jr(s,0)>>2;return a?n/100:n}function qh(t){var s={s:{},e:{}};return s.s.r=t.read_shift(4),s.e.r=t.read_shift(4),s.s.c=t.read_shift(4),s.e.c=t.read_shift(4),s}var Vr=qh;function bs(t){if(t.length-t.l<8)throw"XLS Xnum Buffer underflow";return t.read_shift(8,"f")}function pN(t){var s={},a=t.read_shift(1),r=a>>>1,n=t.read_shift(1),i=t.read_shift(2,"i"),l=t.read_shift(1),c=t.read_shift(1),o=t.read_shift(1);switch(t.l++,r){case 0:s.auto=1;break;case 1:s.index=n;var d=Er[n];d&&(s.rgb=mi(d));break;case 2:s.rgb=mi([l,c,o]);break;case 3:s.theme=n;break}return i!=0&&(s.tint=i>0?i/32767:i/32768),s}function gN(t){var s=t.read_shift(1);t.l++;var a={fBold:s&1,fItalic:s&2,fUnderline:s&4,fStrikeout:s&8,fOutline:s&16,fShadow:s&32,fCondense:s&64,fExtend:s&128};return a}function Wh(t,s){var a={2:"BITMAP",3:"METAFILEPICT",8:"DIB",14:"ENHMETAFILE"},r=t.read_shift(4);switch(r){case 0:return"";case 4294967295:case 4294967294:return a[t.read_shift(4)]||""}if(r>400)throw new Error("Unsupported Clipboard: "+r.toString(16));return t.l-=4,t.read_shift(0,s==1?"lpstr":"lpwstr")}function yN(t){return Wh(t,1)}function bN(t){return Wh(t,2)}var jd=2,Os=3,Hi=11,lu=12,jl=19,qi=64,vN=65,jN=71,NN=4108,wN=4126,as=80,Gh=81,kN=[as,Gh],SN={1:{n:"CodePage",t:jd},2:{n:"Category",t:as},3:{n:"PresentationFormat",t:as},4:{n:"ByteCount",t:Os},5:{n:"LineCount",t:Os},6:{n:"ParagraphCount",t:Os},7:{n:"SlideCount",t:Os},8:{n:"NoteCount",t:Os},9:{n:"HiddenCount",t:Os},10:{n:"MultimediaClipCount",t:Os},11:{n:"ScaleCrop",t:Hi},12:{n:"HeadingPairs",t:NN},13:{n:"TitlesOfParts",t:wN},14:{n:"Manager",t:as},15:{n:"Company",t:as},16:{n:"LinksUpToDate",t:Hi},17:{n:"CharacterCount",t:Os},19:{n:"SharedDoc",t:Hi},22:{n:"HyperlinksChanged",t:Hi},23:{n:"AppVersion",t:Os,p:"version"},24:{n:"DigSig",t:vN},26:{n:"ContentType",t:as},27:{n:"ContentStatus",t:as},28:{n:"Language",t:as},29:{n:"Version",t:as},255:{},2147483648:{n:"Locale",t:jl},2147483651:{n:"Behavior",t:jl},1919054434:{}},CN={1:{n:"CodePage",t:jd},2:{n:"Title",t:as},3:{n:"Subject",t:as},4:{n:"Author",t:as},5:{n:"Keywords",t:as},6:{n:"Comments",t:as},7:{n:"Template",t:as},8:{n:"LastAuthor",t:as},9:{n:"RevNumber",t:as},10:{n:"EditTime",t:qi},11:{n:"LastPrinted",t:qi},12:{n:"CreatedDate",t:qi},13:{n:"ModifiedDate",t:qi},14:{n:"PageCount",t:Os},15:{n:"WordCount",t:Os},16:{n:"CharCount",t:Os},17:{n:"Thumbnail",t:jN},18:{n:"Application",t:as},19:{n:"DocSecurity",t:Os},255:{},2147483648:{n:"Locale",t:jl},2147483651:{n:"Behavior",t:jl},1919054434:{}},cu={1:"US",2:"CA",3:"",7:"RU",20:"EG",30:"GR",31:"NL",32:"BE",33:"FR",34:"ES",36:"HU",39:"IT",41:"CH",43:"AT",44:"GB",45:"DK",46:"SE",47:"NO",48:"PL",49:"DE",52:"MX",55:"BR",61:"AU",64:"NZ",66:"TH",81:"JP",82:"KR",84:"VN",86:"CN",90:"TR",105:"JS",213:"DZ",216:"MA",218:"LY",351:"PT",354:"IS",358:"FI",420:"CZ",886:"TW",961:"LB",962:"JO",963:"SY",964:"IQ",965:"KW",966:"SA",971:"AE",972:"IL",974:"QA",981:"IR",65535:"US"},AN=[null,"solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"];function EN(t){return t.map(function(s){return[s>>16&255,s>>8&255,s&255]})}var _N=EN([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),Er=os(_N),Hr={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},Yh={"#NULL!":0,"#DIV/0!":7,"#VALUE!":15,"#REF!":23,"#NAME?":29,"#NUM!":36,"#N/A":42,"#GETTING_DATA":43,"#WTF?":255},ou={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"};function FN(){return{workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""}}function TN(t){var s=FN();if(!t||!t.match)return s;var a={};if((t.match(ks)||[]).forEach(function(r){var n=Ze(r);switch(n[0].replace(Mj,"<")){case"<?xml":break;case"<Types":s.xmlns=n["xmlns"+(n[0].match(/<(\w+):/)||["",""])[1]];break;case"<Default":a[n.Extension]=n.ContentType;break;case"<Override":s[ou[n.ContentType]]!==void 0&&s[ou[n.ContentType]].push(n.PartName);break}}),s.xmlns!==Jj.CT)throw new Error("Unknown Namespace: "+s.xmlns);return s.calcchain=s.calcchains.length>0?s.calcchains[0]:"",s.sst=s.strs.length>0?s.strs[0]:"",s.style=s.styles.length>0?s.styles[0]:"",s.defaults=a,delete s.calcchains,s}var rn={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",SHEET:"http://sheetjs.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",XLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLink",CXML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXml",CXMLP:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXmlProps",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",CHART:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chart",CHARTEX:"http://schemas.microsoft.com/office/2014/relationships/chartEx",CS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chartsheet",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/dialogsheet",MS:"http://schemas.microsoft.com/office/2006/relationships/xlMacrosheet",IMG:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function bo(t){var s=t.lastIndexOf("/");return t.slice(0,s+1)+"_rels/"+t.slice(s+1)+".rels"}function Xn(t,s){var a={"!id":{}};if(!t)return a;s.charAt(0)!=="/"&&(s="/"+s);var r={};return(t.match(ks)||[]).forEach(function(n){var i=Ze(n);if(i[0]==="<Relationship"){var l={};l.Type=i.Type,l.Target=i.Target,l.Id=i.Id,i.TargetMode&&(l.TargetMode=i.TargetMode);var c=i.TargetMode==="External"?i.Target:Vn(i.Target,s);a[c]=l,r[i.Id]=l}}),a["!id"]=r,a}var DN="application/vnd.oasis.opendocument.spreadsheet";function RN(t,s){for(var a=hd(t),r,n;r=xi.exec(a);)switch(r[3]){case"manifest":break;case"file-entry":if(n=Ze(r[0],!1),n.path=="/"&&n.type!==DN)throw new Error("This OpenDocument is not a spreadsheet");break;case"encryption-data":case"algorithm":case"start-key-generation":case"key-derivation":throw new Error("Unsupported ODS Encryption");default:if(s&&s.WTF)throw r}}var Kn=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]],PN=function(){for(var t=new Array(Kn.length),s=0;s<Kn.length;++s){var a=Kn[s],r="(?:"+a[0].slice(0,a[0].indexOf(":"))+":)"+a[0].slice(a[0].indexOf(":")+1);t[s]=new RegExp("<"+r+"[^>]*>([\\s\\S]*?)</"+r+">")}return t}();function Zh(t){var s={};t=vt(t);for(var a=0;a<Kn.length;++a){var r=Kn[a],n=t.match(PN[a]);n!=null&&n.length>0&&(s[r[1]]=dt(n[1])),r[2]==="date"&&s[r[1]]&&(s[r[1]]=ls(s[r[1]]))}return s}var IN=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]];function Jh(t,s,a,r){var n=[];if(typeof t=="string")n=Qx(t,r);else for(var i=0;i<t.length;++i)n=n.concat(t[i].map(function(x){return{v:x}}));var l=typeof s=="string"?Qx(s,r).map(function(x){return x.v}):s,c=0,o=0;if(l.length>0)for(var d=0;d!==n.length;d+=2){switch(o=+n[d+1].v,n[d].v){case"Worksheets":case"å·¥ä½œè¡¨":case"Ð›Ð¸ÑÑ‚Ñ‹":case"Ø£ÙˆØ±Ø§Ù‚ Ø§Ù„Ø¹Ù…Ù„":case"ãƒ¯ãƒ¼ã‚¯ã‚·ãƒ¼ãƒˆ":case"×’×œ×™×•× ×•×ª ×¢×‘×•×“×”":case"ArbeitsblÃ¤tter":case"Ã‡alÄ±ÅŸma SayfalarÄ±":case"Feuilles de calcul":case"Fogli di lavoro":case"Folhas de cÃ¡lculo":case"Planilhas":case"Regneark":case"Hojas de cÃ¡lculo":case"Werkbladen":a.Worksheets=o,a.SheetNames=l.slice(c,c+o);break;case"Named Ranges":case"Rangos con nombre":case"åå‰ä»˜ãä¸€è¦§":case"Benannte Bereiche":case"Navngivne omrÃ¥der":a.NamedRanges=o,a.DefinedNames=l.slice(c,c+o);break;case"Charts":case"Diagramme":a.Chartsheets=o,a.ChartNames=l.slice(c,c+o);break}c+=o}}function $N(t,s,a){var r={};return s||(s={}),t=vt(t),IN.forEach(function(n){var i=(t.match(di(n[0]))||[])[1];switch(n[2]){case"string":i&&(s[n[1]]=dt(i));break;case"bool":s[n[1]]=i==="true";break;case"raw":var l=t.match(new RegExp("<"+n[0]+"[^>]*>([\\s\\S]*?)</"+n[0]+">"));l&&l.length>0&&(r[n[1]]=l[1]);break}}),r.HeadingPairs&&r.TitlesOfParts&&Jh(r.HeadingPairs,r.TitlesOfParts,s,a),s}var ON=/<[^>]+>[^<]*/g;function LN(t,s){var a={},r="",n=t.match(ON);if(n)for(var i=0;i!=n.length;++i){var l=n[i],c=Ze(l);switch(c[0]){case"<?xml":break;case"<Properties":break;case"<property":r=dt(c.name);break;case"</property>":r=null;break;default:if(l.indexOf("<vt:")===0){var o=l.split(">"),d=o[0].slice(4),x=o[1];switch(d){case"lpstr":case"bstr":case"lpwstr":a[r]=dt(x);break;case"bool":a[r]=Nt(x);break;case"i1":case"i2":case"i4":case"i8":case"int":case"uint":a[r]=parseInt(x,10);break;case"r4":case"r8":case"decimal":a[r]=parseFloat(x);break;case"filetime":case"date":a[r]=ls(x);break;case"cy":case"error":a[r]=dt(x);break;default:if(d.slice(-1)=="/")break;s.WTF&&typeof console<"u"&&console.warn("Unexpected",l,d,o)}}else if(l.slice(0,2)!=="</"){if(s.WTF)throw new Error(l)}}}return a}var MN={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"},Nc;function BN(t,s,a){Nc||(Nc=xd(MN)),s=Nc[s]||s,t[s]=a}function Nd(t){var s=t.read_shift(4),a=t.read_shift(4);return new Date((a/1e7*Math.pow(2,32)+s/1e7-11644473600)*1e3).toISOString().replace(/\.000/,"")}function Xh(t,s,a){var r=t.l,n=t.read_shift(0,"lpstr-cp");if(a)for(;t.l-r&3;)++t.l;return n}function Kh(t,s,a){var r=t.read_shift(0,"lpwstr");return r}function Qh(t,s,a){return s===31?Kh(t):Xh(t,s,a)}function vo(t,s,a){return Qh(t,s,a===!1?0:4)}function zN(t,s){if(!s)throw new Error("VtUnalignedString must have positive length");return Qh(t,s,0)}function UN(t){for(var s=t.read_shift(4),a=[],r=0;r!=s;++r){var n=t.l;a[r]=t.read_shift(0,"lpwstr").replace(Ts,""),t.l-n&2&&(t.l+=2)}return a}function VN(t){for(var s=t.read_shift(4),a=[],r=0;r!=s;++r)a[r]=t.read_shift(0,"lpstr-cp").replace(Ts,"");return a}function HN(t){var s=t.l,a=Nl(t,Gh);t[t.l]==0&&t[t.l+1]==0&&t.l-s&2&&(t.l+=2);var r=Nl(t,Os);return[a,r]}function qN(t){for(var s=t.read_shift(4),a=[],r=0;r<s/2;++r)a.push(HN(t));return a}function du(t,s){for(var a=t.read_shift(4),r={},n=0;n!=a;++n){var i=t.read_shift(4),l=t.read_shift(4);r[i]=t.read_shift(l,s===1200?"utf16le":"utf8").replace(Ts,"").replace(Un,"!"),s===1200&&l%2&&(t.l+=2)}return t.l&3&&(t.l=t.l>>3<<2),r}function ef(t){var s=t.read_shift(4),a=t.slice(t.l,t.l+s);return t.l+=s,(s&3)>0&&(t.l+=4-(s&3)&3),a}function WN(t){var s={};return s.Size=t.read_shift(4),t.l+=s.Size+3-(s.Size-1)%4,s}function Nl(t,s,a){var r=t.read_shift(2),n,i=a||{};if(t.l+=2,s!==lu&&r!==s&&kN.indexOf(s)===-1&&!((s&65534)==4126&&(r&65534)==4126))throw new Error("Expected type "+s+" saw "+r);switch(s===lu?r:s){case 2:return n=t.read_shift(2,"i"),i.raw||(t.l+=2),n;case 3:return n=t.read_shift(4,"i"),n;case 11:return t.read_shift(4)!==0;case 19:return n=t.read_shift(4),n;case 30:return Xh(t,r,4).replace(Ts,"");case 31:return Kh(t);case 64:return Nd(t);case 65:return ef(t);case 71:return WN(t);case 80:return vo(t,r,!i.raw).replace(Ts,"");case 81:return zN(t,r).replace(Ts,"");case 4108:return qN(t);case 4126:case 4127:return r==4127?UN(t):VN(t);default:throw new Error("TypedPropertyValue unrecognized type "+s+" "+r)}}function xu(t,s){var a=t.l,r=t.read_shift(4),n=t.read_shift(4),i=[],l=0,c=0,o=-1,d={};for(l=0;l!=n;++l){var x=t.read_shift(4),u=t.read_shift(4);i[l]=[x,u+a]}i.sort(function(v,w){return v[1]-w[1]});var m={};for(l=0;l!=n;++l){if(t.l!==i[l][1]){var f=!0;if(l>0&&s)switch(s[i[l-1][0]].t){case 2:t.l+2===i[l][1]&&(t.l+=2,f=!1);break;case 80:t.l<=i[l][1]&&(t.l=i[l][1],f=!1);break;case 4108:t.l<=i[l][1]&&(t.l=i[l][1],f=!1);break}if((!s||l==0)&&t.l<=i[l][1]&&(f=!1,t.l=i[l][1]),f)throw new Error("Read Error: Expected address "+i[l][1]+" at "+t.l+" :"+l)}if(s){var g=s[i[l][0]];if(m[g.n]=Nl(t,g.t,{raw:!0}),g.p==="version"&&(m[g.n]=String(m[g.n]>>16)+"."+("0000"+String(m[g.n]&65535)).slice(-4)),g.n=="CodePage")switch(m[g.n]){case 0:m[g.n]=1252;case 874:case 932:case 936:case 949:case 950:case 1250:case 1251:case 1253:case 1254:case 1255:case 1256:case 1257:case 1258:case 1e4:case 1200:case 1201:case 1252:case 65e3:case-536:case 65001:case-535:ha(c=m[g.n]>>>0&65535);break;default:throw new Error("Unsupported CodePage: "+m[g.n])}}else if(i[l][0]===1){if(c=m.CodePage=Nl(t,jd),ha(c),o!==-1){var h=t.l;t.l=i[o][1],d=du(t,c),t.l=h}}else if(i[l][0]===0){if(c===0){o=l,t.l=i[l+1][1];continue}d=du(t,c)}else{var p=d[i[l][0]],j;switch(t[t.l]){case 65:t.l+=4,j=ef(t);break;case 30:t.l+=4,j=vo(t,t[t.l-4]).replace(/\u0000+$/,"");break;case 31:t.l+=4,j=vo(t,t[t.l-4]).replace(/\u0000+$/,"");break;case 3:t.l+=4,j=t.read_shift(4,"i");break;case 19:t.l+=4,j=t.read_shift(4);break;case 5:t.l+=4,j=t.read_shift(8,"f");break;case 11:t.l+=4,j=$t(t,4);break;case 64:t.l+=4,j=ls(Nd(t));break;default:throw new Error("unparsed value: "+t[t.l])}m[p]=j}}return t.l=a+r,m}function uu(t,s,a){var r=t.content;if(!r)return{};cs(r,0);var n,i,l,c,o=0;r.chk("feff","Byte Order: "),r.read_shift(2);var d=r.read_shift(4),x=r.read_shift(16);if(x!==lt.utils.consts.HEADER_CLSID&&x!==a)throw new Error("Bad PropertySet CLSID "+x);if(n=r.read_shift(4),n!==1&&n!==2)throw new Error("Unrecognized #Sets: "+n);if(i=r.read_shift(16),c=r.read_shift(4),n===1&&c!==r.l)throw new Error("Length mismatch: "+c+" !== "+r.l);n===2&&(l=r.read_shift(16),o=r.read_shift(4));var u=xu(r,s),m={SystemIdentifier:d};for(var f in u)m[f]=u[f];if(m.FMTID=i,n===1)return m;if(o-r.l==2&&(r.l+=2),r.l!==o)throw new Error("Length mismatch 2: "+r.l+" !== "+o);var g;try{g=xu(r,null)}catch{}for(f in g)m[f]=g[f];return m.FMTID=[i,l],m}function Ja(t,s){return t.read_shift(s),null}function GN(t,s,a){for(var r=[],n=t.l+s;t.l<n;)r.push(a(t,n-t.l));if(n!==t.l)throw new Error("Slurp error");return r}function $t(t,s){return t.read_shift(s)===1}function Ut(t){return t.read_shift(2,"u")}function tf(t,s){return GN(t,s,Ut)}function YN(t){var s=t.read_shift(1),a=t.read_shift(1);return a===1?s:s===1}function _i(t,s,a){var r=t.read_shift(a&&a.biff>=12?2:1),n="sbcs-cont";if(a&&a.biff>=8,!a||a.biff==8){var i=t.read_shift(1);i&&(n="dbcs-cont")}else a.biff==12&&(n="wstr");a.biff>=2&&a.biff<=5&&(n="cpstr");var l=r?t.read_shift(r,n):"";return l}function ZN(t){var s=t.read_shift(2),a=t.read_shift(1),r=a&4,n=a&8,i=1+(a&1),l=0,c,o={};n&&(l=t.read_shift(2)),r&&(c=t.read_shift(4));var d=i==2?"dbcs-cont":"sbcs-cont",x=s===0?"":t.read_shift(s,d);return n&&(t.l+=4*l),r&&(t.l+=c),o.t=x,n||(o.raw="<t>"+o.t+"</t>",o.r=o.t),o}function $r(t,s,a){var r;if(a){if(a.biff>=2&&a.biff<=5)return t.read_shift(s,"cpstr");if(a.biff>=12)return t.read_shift(s,"dbcs-cont")}var n=t.read_shift(1);return n===0?r=t.read_shift(s,"sbcs-cont"):r=t.read_shift(s,"dbcs-cont"),r}function Fi(t,s,a){var r=t.read_shift(a&&a.biff==2?1:2);return r===0?(t.l++,""):$r(t,r,a)}function qr(t,s,a){if(a.biff>5)return Fi(t,s,a);var r=t.read_shift(1);return r===0?(t.l++,""):t.read_shift(r,a.biff<=4||!t.lens?"cpstr":"sbcs-cont")}function JN(t){var s=t.read_shift(1);t.l++;var a=t.read_shift(2);return t.l+=2,[s,a]}function XN(t){var s=t.read_shift(4),a=t.l,r=!1;s>24&&(t.l+=s-24,t.read_shift(16)==="795881f43b1d7f48af2c825dc4852763"&&(r=!0),t.l=a);var n=t.read_shift((r?s-24:s)>>1,"utf16le").replace(Ts,"");return r&&(t.l+=24),n}function KN(t){for(var s=t.read_shift(2),a="";s-- >0;)a+="../";var r=t.read_shift(0,"lpstr-ansi");if(t.l+=2,t.read_shift(2)!=57005)throw new Error("Bad FileMoniker");var n=t.read_shift(4);if(n===0)return a+r.replace(/\\/g,"/");var i=t.read_shift(4);if(t.read_shift(2)!=3)throw new Error("Bad FileMoniker");var l=t.read_shift(i>>1,"utf16le").replace(Ts,"");return a+l}function QN(t,s){var a=t.read_shift(16);switch(a){case"e0c9ea79f9bace118c8200aa004ba90b":return XN(t);case"0303000000000000c000000000000046":return KN(t);default:throw new Error("Unsupported Moniker "+a)}}function Wi(t){var s=t.read_shift(4),a=s>0?t.read_shift(s,"utf16le").replace(Ts,""):"";return a}function ew(t,s){var a=t.l+s,r=t.read_shift(4);if(r!==2)throw new Error("Unrecognized streamVersion: "+r);var n=t.read_shift(2);t.l+=2;var i,l,c,o,d="",x,u;n&16&&(i=Wi(t,a-t.l)),n&128&&(l=Wi(t,a-t.l)),(n&257)===257&&(c=Wi(t,a-t.l)),(n&257)===1&&(o=QN(t,a-t.l)),n&8&&(d=Wi(t,a-t.l)),n&32&&(x=t.read_shift(16)),n&64&&(u=Nd(t)),t.l=a;var m=l||c||o||"";m&&d&&(m+="#"+d),m||(m="#"+d),n&2&&m.charAt(0)=="/"&&m.charAt(1)!="/"&&(m="file://"+m);var f={Target:m};return x&&(f.guid=x),u&&(f.time=u),i&&(f.Tooltip=i),f}function sf(t){var s=t.read_shift(1),a=t.read_shift(1),r=t.read_shift(1),n=t.read_shift(1);return[s,a,r,n]}function af(t,s){var a=sf(t);return a[3]=0,a}function La(t){var s=t.read_shift(2),a=t.read_shift(2),r=t.read_shift(2);return{r:s,c:a,ixfe:r}}function tw(t){var s=t.read_shift(2),a=t.read_shift(2);return t.l+=8,{type:s,flags:a}}function sw(t,s,a){return s===0?"":qr(t,s,a)}function aw(t,s,a){var r=a.biff>8?4:2,n=t.read_shift(r),i=t.read_shift(r,"i"),l=t.read_shift(r,"i");return[n,i,l]}function rf(t){var s=t.read_shift(2),a=vd(t);return[s,a]}function rw(t,s,a){t.l+=4,s-=4;var r=t.l+s,n=_i(t,s,a),i=t.read_shift(2);if(r-=t.l,i!==r)throw new Error("Malformed AddinUdf: padding = "+r+" != "+i);return t.l+=i,n}function Zl(t){var s=t.read_shift(2),a=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(2);return{s:{c:r,r:s},e:{c:n,r:a}}}function nf(t){var s=t.read_shift(2),a=t.read_shift(2),r=t.read_shift(1),n=t.read_shift(1);return{s:{c:r,r:s},e:{c:n,r:a}}}var nw=nf;function lf(t){t.l+=4;var s=t.read_shift(2),a=t.read_shift(2),r=t.read_shift(2);return t.l+=12,[a,s,r]}function iw(t){var s={};return t.l+=4,t.l+=16,s.fSharedNote=t.read_shift(2),t.l+=4,s}function lw(t){var s={};return t.l+=4,t.cf=t.read_shift(2),s}function hs(t){t.l+=2,t.l+=t.read_shift(2)}var cw={0:hs,4:hs,5:hs,6:hs,7:lw,8:hs,9:hs,10:hs,11:hs,12:hs,13:iw,14:hs,15:hs,16:hs,17:hs,18:hs,19:hs,20:hs,21:lf};function ow(t,s){for(var a=t.l+s,r=[];t.l<a;){var n=t.read_shift(2);t.l-=2;try{r.push(cw[n](t,a-t.l))}catch{return t.l=a,r}}return t.l!=a&&(t.l=a),r}function Gi(t,s){var a={BIFFVer:0,dt:0};switch(a.BIFFVer=t.read_shift(2),s-=2,s>=2&&(a.dt=t.read_shift(2),t.l-=2),a.BIFFVer){case 1536:case 1280:case 1024:case 768:case 512:case 2:case 7:break;default:if(s>6)throw new Error("Unexpected BIFF Ver "+a.BIFFVer)}return t.read_shift(s),a}function dw(t,s){return s===0||t.read_shift(2),1200}function xw(t,s,a){if(a.enc)return t.l+=s,"";var r=t.l,n=qr(t,0,a);return t.read_shift(s+r-t.l),n}function uw(t,s,a){var r=a&&a.biff==8||s==2?t.read_shift(2):(t.l+=s,0);return{fDialog:r&16,fBelow:r&64,fRight:r&128}}function mw(t,s,a){var r=t.read_shift(4),n=t.read_shift(1)&3,i=t.read_shift(1);switch(i){case 0:i="Worksheet";break;case 1:i="Macrosheet";break;case 2:i="Chartsheet";break;case 6:i="VBAModule";break}var l=_i(t,0,a);return l.length===0&&(l="Sheet1"),{pos:r,hs:n,dt:i,name:l}}function hw(t,s){for(var a=t.l+s,r=t.read_shift(4),n=t.read_shift(4),i=[],l=0;l!=n&&t.l<a;++l)i.push(ZN(t));return i.Count=r,i.Unique=n,i}function fw(t,s){var a={};return a.dsst=t.read_shift(2),t.l+=s-2,a}function pw(t){var s={};s.r=t.read_shift(2),s.c=t.read_shift(2),s.cnt=t.read_shift(2)-s.c;var a=t.read_shift(2);t.l+=4;var r=t.read_shift(1);return t.l+=3,r&7&&(s.level=r&7),r&32&&(s.hidden=!0),r&64&&(s.hpt=a/20),s}function gw(t){var s=tw(t);if(s.type!=2211)throw new Error("Invalid Future Record "+s.type);var a=t.read_shift(4);return a!==0}function yw(t){return t.read_shift(2),t.read_shift(4)}function mu(t,s,a){var r=0;a&&a.biff==2||(r=t.read_shift(2));var n=t.read_shift(2);a&&a.biff==2&&(r=1-(n>>15),n&=32767);var i={Unsynced:r&1,DyZero:(r&2)>>1,ExAsc:(r&4)>>2,ExDsc:(r&8)>>3};return[i,n]}function bw(t){var s=t.read_shift(2),a=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(2),i=t.read_shift(2),l=t.read_shift(2),c=t.read_shift(2),o=t.read_shift(2),d=t.read_shift(2);return{Pos:[s,a],Dim:[r,n],Flags:i,CurTab:l,FirstTab:c,Selected:o,TabRatio:d}}function vw(t,s,a){if(a&&a.biff>=2&&a.biff<5)return{};var r=t.read_shift(2);return{RTL:r&64}}function jw(){}function Nw(t,s,a){var r={dyHeight:t.read_shift(2),fl:t.read_shift(2)};switch(a&&a.biff||8){case 2:break;case 3:case 4:t.l+=2;break;default:t.l+=10;break}return r.name=_i(t,0,a),r}function ww(t){var s=La(t);return s.isst=t.read_shift(4),s}function kw(t,s,a){a.biffguess&&a.biff==2&&(a.biff=5);var r=t.l+s,n=La(t);a.biff==2&&t.l++;var i=Fi(t,r-t.l,a);return n.val=i,n}function Sw(t,s,a){var r=t.read_shift(2),n=qr(t,0,a);return[r,n]}var Cw=qr;function hu(t,s,a){var r=t.l+s,n=a.biff==8||!a.biff?4:2,i=t.read_shift(n),l=t.read_shift(n),c=t.read_shift(2),o=t.read_shift(2);return t.l=r,{s:{r:i,c},e:{r:l,c:o}}}function Aw(t){var s=t.read_shift(2),a=t.read_shift(2),r=rf(t);return{r:s,c:a,ixfe:r[0],rknum:r[1]}}function Ew(t,s){for(var a=t.l+s-2,r=t.read_shift(2),n=t.read_shift(2),i=[];t.l<a;)i.push(rf(t));if(t.l!==a)throw new Error("MulRK read error");var l=t.read_shift(2);if(i.length!=l-n+1)throw new Error("MulRK length mismatch");return{r,c:n,C:l,rkrec:i}}function _w(t,s){for(var a=t.l+s-2,r=t.read_shift(2),n=t.read_shift(2),i=[];t.l<a;)i.push(t.read_shift(2));if(t.l!==a)throw new Error("MulBlank read error");var l=t.read_shift(2);if(i.length!=l-n+1)throw new Error("MulBlank length mismatch");return{r,c:n,C:l,ixfe:i}}function Fw(t,s,a,r){var n={},i=t.read_shift(4),l=t.read_shift(4),c=t.read_shift(4),o=t.read_shift(2);return n.patternType=AN[c>>26],r.cellStyles&&(n.alc=i&7,n.fWrap=i>>3&1,n.alcV=i>>4&7,n.fJustLast=i>>7&1,n.trot=i>>8&255,n.cIndent=i>>16&15,n.fShrinkToFit=i>>20&1,n.iReadOrder=i>>22&2,n.fAtrNum=i>>26&1,n.fAtrFnt=i>>27&1,n.fAtrAlc=i>>28&1,n.fAtrBdr=i>>29&1,n.fAtrPat=i>>30&1,n.fAtrProt=i>>31&1,n.dgLeft=l&15,n.dgRight=l>>4&15,n.dgTop=l>>8&15,n.dgBottom=l>>12&15,n.icvLeft=l>>16&127,n.icvRight=l>>23&127,n.grbitDiag=l>>30&3,n.icvTop=c&127,n.icvBottom=c>>7&127,n.icvDiag=c>>14&127,n.dgDiag=c>>21&15,n.icvFore=o&127,n.icvBack=o>>7&127,n.fsxButton=o>>14&1),n}function Tw(t,s,a){var r={};return r.ifnt=t.read_shift(2),r.numFmtId=t.read_shift(2),r.flags=t.read_shift(2),r.fStyle=r.flags>>2&1,s-=6,r.data=Fw(t,s,r.fStyle,a),r}function Dw(t){t.l+=4;var s=[t.read_shift(2),t.read_shift(2)];if(s[0]!==0&&s[0]--,s[1]!==0&&s[1]--,s[0]>7||s[1]>7)throw new Error("Bad Gutters: "+s.join("|"));return s}function fu(t,s,a){var r=La(t);(a.biff==2||s==9)&&++t.l;var n=YN(t);return r.val=n,r.t=n===!0||n===!1?"b":"e",r}function Rw(t,s,a){a.biffguess&&a.biff==2&&(a.biff=5);var r=La(t),n=bs(t);return r.val=n,r}var pu=sw;function Pw(t,s,a){var r=t.l+s,n=t.read_shift(2),i=t.read_shift(2);if(a.sbcch=i,i==1025||i==14849)return[i,n];if(i<1||i>255)throw new Error("Unexpected SupBook type: "+i);for(var l=$r(t,i),c=[];r>t.l;)c.push(Fi(t));return[i,n,l,c]}function gu(t,s,a){var r=t.read_shift(2),n,i={fBuiltIn:r&1,fWantAdvise:r>>>1&1,fWantPict:r>>>2&1,fOle:r>>>3&1,fOleLink:r>>>4&1,cf:r>>>5&1023,fIcon:r>>>15&1};return a.sbcch===14849&&(n=rw(t,s-2,a)),i.body=n||t.read_shift(s-2),typeof n=="string"&&(i.Name=n),i}var Iw=["_xlnm.Consolidate_Area","_xlnm.Auto_Open","_xlnm.Auto_Close","_xlnm.Extract","_xlnm.Database","_xlnm.Criteria","_xlnm.Print_Area","_xlnm.Print_Titles","_xlnm.Recorder","_xlnm.Data_Form","_xlnm.Auto_Activate","_xlnm.Auto_Deactivate","_xlnm.Sheet_Title","_xlnm._FilterDatabase"];function yu(t,s,a){var r=t.l+s,n=t.read_shift(2),i=t.read_shift(1),l=t.read_shift(1),c=t.read_shift(a&&a.biff==2?1:2),o=0;(!a||a.biff>=5)&&(a.biff!=5&&(t.l+=2),o=t.read_shift(2),a.biff==5&&(t.l+=2),t.l+=4);var d=$r(t,l,a);n&32&&(d=Iw[d.charCodeAt(0)]);var x=r-t.l;a&&a.biff==2&&--x;var u=r==t.l||c===0||!(x>0)?[]:p4(t,x,a,c);return{chKey:i,Name:d,itab:o,rgce:u}}function cf(t,s,a){if(a.biff<8)return $w(t,s,a);for(var r=[],n=t.l+s,i=t.read_shift(a.biff>8?4:2);i--!==0;)r.push(aw(t,a.biff>8?12:6,a));if(t.l!=n)throw new Error("Bad ExternSheet: "+t.l+" != "+n);return r}function $w(t,s,a){t[t.l+1]==3&&t[t.l]++;var r=_i(t,s,a);return r.charCodeAt(0)==3?r.slice(1):r}function Ow(t,s,a){if(a.biff<8){t.l+=s;return}var r=t.read_shift(2),n=t.read_shift(2),i=$r(t,r,a),l=$r(t,n,a);return[i,l]}function Lw(t,s,a){var r=nf(t);t.l++;var n=t.read_shift(1);return s-=8,[g4(t,s,a),n,r]}function bu(t,s,a){var r=nw(t);switch(a.biff){case 2:t.l++,s-=7;break;case 3:case 4:t.l+=2,s-=8;break;default:t.l+=6,s-=12}return[r,h4(t,s,a)]}function Mw(t){var s=t.read_shift(4)!==0,a=t.read_shift(4)!==0,r=t.read_shift(4);return[s,a,r]}function Bw(t,s,a){if(!(a.biff<8)){var r=t.read_shift(2),n=t.read_shift(2),i=t.read_shift(2),l=t.read_shift(2),c=qr(t,0,a);return a.biff<8&&t.read_shift(1),[{r,c:n},c,l,i]}}function zw(t,s,a){return Bw(t,s,a)}function Uw(t,s){for(var a=[],r=t.read_shift(2);r--;)a.push(Zl(t));return a}function Vw(t,s,a){if(a&&a.biff<8)return qw(t,s,a);var r=lf(t),n=ow(t,s-22,r[1]);return{cmo:r,ft:n}}var Hw={8:function(t,s){var a=t.l+s;t.l+=10;var r=t.read_shift(2);t.l+=4,t.l+=2,t.l+=2,t.l+=2,t.l+=4;var n=t.read_shift(1);return t.l+=n,t.l=a,{fmt:r}}};function qw(t,s,a){t.l+=4;var r=t.read_shift(2),n=t.read_shift(2),i=t.read_shift(2);t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=6,s-=36;var l=[];return l.push((Hw[r]||ws)(t,s,a)),{cmo:[n,r,i],ft:l}}function Ww(t,s,a){var r=t.l,n="";try{t.l+=4;var i=(a.lastobj||{cmo:[0,0]}).cmo[1],l;[0,5,7,11,12,14].indexOf(i)==-1?t.l+=6:l=JN(t,6,a);var c=t.read_shift(2);t.read_shift(2),Ut(t,2);var o=t.read_shift(2);t.l+=o;for(var d=1;d<t.lens.length-1;++d){if(t.l-r!=t.lens[d])throw new Error("TxO: bad continue record");var x=t[t.l],u=$r(t,t.lens[d+1]-t.lens[d]-1);if(n+=u,n.length>=(x?c:2*c))break}if(n.length!==c&&n.length!==c*2)throw new Error("cchText: "+c+" != "+n.length);return t.l=r+s,{t:n}}catch{return t.l=r+s,{t:n}}}function Gw(t,s){var a=Zl(t);t.l+=16;var r=ew(t,s-24);return[a,r]}function Yw(t,s){t.read_shift(2);var a=Zl(t),r=t.read_shift((s-10)/2,"dbcs-cont");return r=r.replace(Ts,""),[a,r]}function Zw(t){var s=[0,0],a;return a=t.read_shift(2),s[0]=cu[a]||a,a=t.read_shift(2),s[1]=cu[a]||a,s}function Jw(t){for(var s=t.read_shift(2),a=[];s-- >0;)a.push(af(t));return a}function Xw(t){for(var s=t.read_shift(2),a=[];s-- >0;)a.push(af(t));return a}function Kw(t){t.l+=2;var s={cxfs:0,crc:0};return s.cxfs=t.read_shift(2),s.crc=t.read_shift(4),s}function of(t,s,a){if(!a.cellStyles)return ws(t,s);var r=a&&a.biff>=12?4:2,n=t.read_shift(r),i=t.read_shift(r),l=t.read_shift(r),c=t.read_shift(r),o=t.read_shift(2);r==2&&(t.l+=2);var d={s:n,e:i,w:l,ixfe:c,flags:o};return(a.biff>=5||!a.biff)&&(d.level=o>>8&7),d}function Qw(t,s){var a={};return s<32||(t.l+=16,a.header=bs(t),a.footer=bs(t),t.l+=2),a}function e1(t,s,a){var r={area:!1};if(a.biff!=5)return t.l+=s,r;var n=t.read_shift(1);return t.l+=3,n&16&&(r.area=!0),r}var t1=La,s1=tf,a1=Fi;function r1(t){var s=t.read_shift(2),a=t.read_shift(2),r=t.read_shift(4),n={fmt:s,env:a,len:r,data:t.slice(t.l,t.l+r)};return t.l+=r,n}function n1(t,s,a){a.biffguess&&a.biff==5&&(a.biff=2);var r=La(t);++t.l;var n=qr(t,s-7,a);return r.t="str",r.val=n,r}function i1(t){var s=La(t);++t.l;var a=bs(t);return s.t="n",s.val=a,s}function l1(t){var s=La(t);++t.l;var a=t.read_shift(2);return s.t="n",s.val=a,s}function c1(t){var s=t.read_shift(1);return s===0?(t.l++,""):t.read_shift(s,"sbcs-cont")}function o1(t,s){t.l+=6,t.l+=2,t.l+=1,t.l+=3,t.l+=1,t.l+=s-13}function d1(t,s,a){var r=t.l+s,n=La(t),i=t.read_shift(2),l=$r(t,i,a);return t.l=r,n.t="str",n.val=l,n}var x1=[2,3,48,49,131,139,140,245],vu=function(){var t={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},s=xd({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function a(c,o){var d=[],x=cr(1);switch(o.type){case"base64":x=ua(Js(c));break;case"binary":x=ua(c);break;case"buffer":case"array":x=c;break}cs(x,0);var u=x.read_shift(1),m=!!(u&136),f=!1,g=!1;switch(u){case 2:break;case 3:break;case 48:f=!0,m=!0;break;case 49:f=!0,m=!0;break;case 131:break;case 139:break;case 140:g=!0;break;case 245:break;default:throw new Error("DBF Unsupported Version: "+u.toString(16))}var h=0,p=521;u==2&&(h=x.read_shift(2)),x.l+=3,u!=2&&(h=x.read_shift(4)),h>1048576&&(h=1e6),u!=2&&(p=x.read_shift(2));var j=x.read_shift(2),v=o.codepage||1252;u!=2&&(x.l+=16,x.read_shift(1),x[x.l]!==0&&(v=t[x[x.l]]),x.l+=1,x.l+=2),g&&(x.l+=36);for(var w=[],b={},A=Math.min(x.length,u==2?521:p-10-(f?264:0)),N=g?32:11;x.l<A&&x[x.l]!=13;)switch(b={},b.name=ci.utils.decode(v,x.slice(x.l,x.l+N)).replace(/[\u0000\r\n].*$/g,""),x.l+=N,b.type=String.fromCharCode(x.read_shift(1)),u!=2&&!g&&(b.offset=x.read_shift(4)),b.len=x.read_shift(1),u==2&&(b.offset=x.read_shift(2)),b.dec=x.read_shift(1),b.name.length&&w.push(b),u!=2&&(x.l+=g?13:14),b.type){case"B":(!f||b.len!=8)&&o.WTF&&console.log("Skipping "+b.name+":"+b.type);break;case"G":case"P":o.WTF&&console.log("Skipping "+b.name+":"+b.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+b.type)}if(x[x.l]!==13&&(x.l=p-1),x.read_shift(1)!==13)throw new Error("DBF Terminator not found "+x.l+" "+x[x.l]);x.l=p;var C=0,k=0;for(d[0]=[],k=0;k!=w.length;++k)d[0][k]=w[k].name;for(;h-- >0;){if(x[x.l]===42){x.l+=j;continue}for(++x.l,d[++C]=[],k=0,k=0;k!=w.length;++k){var S=x.slice(x.l,x.l+w[k].len);x.l+=w[k].len,cs(S,0);var F=ci.utils.decode(v,S);switch(w[k].type){case"C":F.trim().length&&(d[C][k]=F.replace(/\s+$/,""));break;case"D":F.length===8?d[C][k]=new Date(+F.slice(0,4),+F.slice(4,6)-1,+F.slice(6,8)):d[C][k]=F;break;case"F":d[C][k]=parseFloat(F.trim());break;case"+":case"I":d[C][k]=g?S.read_shift(-4,"i")^2147483648:S.read_shift(4,"i");break;case"L":switch(F.trim().toUpperCase()){case"Y":case"T":d[C][k]=!0;break;case"N":case"F":d[C][k]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+F+"|")}break;case"M":if(!m)throw new Error("DBF Unexpected MEMO for type "+u.toString(16));d[C][k]="##MEMO##"+(g?parseInt(F.trim(),10):S.read_shift(4));break;case"N":F=F.replace(/\u0000/g,"").trim(),F&&F!="."&&(d[C][k]=+F||0);break;case"@":d[C][k]=new Date(S.read_shift(-8,"f")-621356832e5);break;case"T":d[C][k]=new Date((S.read_shift(4)-2440588)*864e5+S.read_shift(4));break;case"Y":d[C][k]=S.read_shift(4,"i")/1e4+S.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":d[C][k]=-S.read_shift(-8,"f");break;case"B":if(f&&w[k].len==8){d[C][k]=S.read_shift(8,"f");break}case"G":case"P":S.l+=w[k].len;break;case"0":if(w[k].name==="_NullFlags")break;default:throw new Error("DBF Unsupported data type "+w[k].type)}}}if(u!=2&&x.l<x.length&&x[x.l++]!=26)throw new Error("DBF EOF Marker missing "+(x.l-1)+" of "+x.length+" "+x[x.l-1].toString(16));return o&&o.sheetRows&&(d=d.slice(0,o.sheetRows)),o.DBF=w,d}function r(c,o){var d=o||{};d.dateNF||(d.dateNF="yyyymmdd");var x=_n(a(c,d),d);return x["!cols"]=d.DBF.map(function(u){return{wch:u.len,DBF:u}}),delete d.DBF,x}function n(c,o){try{return ur(r(c,o),o)}catch(d){if(o&&o.WTF)throw d}return{SheetNames:[],Sheets:{}}}var i={B:8,C:250,L:1,D:8,"?":0,"":0};function l(c,o){var d=o||{};if(+d.codepage>=0&&ha(+d.codepage),d.type=="string")throw new Error("Cannot write DBF to JS string");var x=go(),u=Ao(c,{header:1,raw:!0,cellDates:!0}),m=u[0],f=u.slice(1),g=c["!cols"]||[],h=0,p=0,j=0,v=1;for(h=0;h<m.length;++h){if(((g[h]||{}).DBF||{}).name){m[h]=g[h].DBF.name,++j;continue}if(m[h]!=null){if(++j,typeof m[h]=="number"&&(m[h]=m[h].toString(10)),typeof m[h]!="string")throw new Error("DBF Invalid column name "+m[h]+" |"+typeof m[h]+"|");if(m.indexOf(m[h])!==h){for(p=0;p<1024;++p)if(m.indexOf(m[h]+"_"+p)==-1){m[h]+="_"+p;break}}}}var w=Dt(c["!ref"]),b=[],A=[],N=[];for(h=0;h<=w.e.c-w.s.c;++h){var C="",k="",S=0,F=[];for(p=0;p<f.length;++p)f[p][h]!=null&&F.push(f[p][h]);if(F.length==0||m[h]==null){b[h]="?";continue}for(p=0;p<F.length;++p){switch(typeof F[p]){case"number":k="B";break;case"string":k="C";break;case"boolean":k="L";break;case"object":k=F[p]instanceof Date?"D":"C";break;default:k="C"}S=Math.max(S,String(F[p]).length),C=C&&C!=k?"C":k}S>250&&(S=250),k=((g[h]||{}).DBF||{}).type,k=="C"&&g[h].DBF.len>S&&(S=g[h].DBF.len),C=="B"&&k=="N"&&(C="N",N[h]=g[h].DBF.dec,S=g[h].DBF.len),A[h]=C=="C"||k=="N"?S:i[C]||0,v+=A[h],b[h]=C}var R=x.next(32);for(R.write_shift(4,318902576),R.write_shift(4,f.length),R.write_shift(2,296+32*j),R.write_shift(2,v),h=0;h<4;++h)R.write_shift(4,0);for(R.write_shift(4,0|(+s[lh]||3)<<8),h=0,p=0;h<m.length;++h)if(m[h]!=null){var T=x.next(32),M=(m[h].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);T.write_shift(1,M,"sbcs"),T.write_shift(1,b[h]=="?"?"C":b[h],"sbcs"),T.write_shift(4,p),T.write_shift(1,A[h]||i[b[h]]||0),T.write_shift(1,N[h]||0),T.write_shift(1,2),T.write_shift(4,0),T.write_shift(1,0),T.write_shift(4,0),T.write_shift(4,0),p+=A[h]||i[b[h]]||0}var H=x.next(264);for(H.write_shift(4,13),h=0;h<65;++h)H.write_shift(4,0);for(h=0;h<f.length;++h){var U=x.next(v);for(U.write_shift(1,0),p=0;p<m.length;++p)if(m[p]!=null)switch(b[p]){case"L":U.write_shift(1,f[h][p]==null?63:f[h][p]?84:70);break;case"B":U.write_shift(8,f[h][p]||0,"f");break;case"N":var W="0";for(typeof f[h][p]=="number"&&(W=f[h][p].toFixed(N[p]||0)),j=0;j<A[p]-W.length;++j)U.write_shift(1,32);U.write_shift(1,W,"sbcs");break;case"D":f[h][p]?(U.write_shift(4,("0000"+f[h][p].getFullYear()).slice(-4),"sbcs"),U.write_shift(2,("00"+(f[h][p].getMonth()+1)).slice(-2),"sbcs"),U.write_shift(2,("00"+f[h][p].getDate()).slice(-2),"sbcs")):U.write_shift(8,"00000000","sbcs");break;case"C":var se=String(f[h][p]!=null?f[h][p]:"").slice(0,A[p]);for(U.write_shift(1,se,"sbcs"),j=0;j<A[p]-se.length;++j)U.write_shift(1,32);break}}return x.next(1).write_shift(1,26),x.end()}return{to_workbook:n,to_sheet:r,from_sheet:l}}(),u1=function(){var t={AA:"Ã€",BA:"Ã",CA:"Ã‚",DA:195,HA:"Ã„",JA:197,AE:"Ãˆ",BE:"Ã‰",CE:"ÃŠ",HE:"Ã‹",AI:"ÃŒ",BI:"Ã",CI:"ÃŽ",HI:"Ã",AO:"Ã’",BO:"Ã“",CO:"Ã”",DO:213,HO:"Ã–",AU:"Ã™",BU:"Ãš",CU:"Ã›",HU:"Ãœ",Aa:"Ã ",Ba:"Ã¡",Ca:"Ã¢",Da:227,Ha:"Ã¤",Ja:229,Ae:"Ã¨",Be:"Ã©",Ce:"Ãª",He:"Ã«",Ai:"Ã¬",Bi:"Ã­",Ci:"Ã®",Hi:"Ã¯",Ao:"Ã²",Bo:"Ã³",Co:"Ã´",Do:245,Ho:"Ã¶",Au:"Ã¹",Bu:"Ãº",Cu:"Ã»",Hu:"Ã¼",KC:"Ã‡",Kc:"Ã§",q:"Ã¦",z:"Å“",a:"Ã†",j:"Å’",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},s=new RegExp("\x1BN("+Pa(t).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),a=function(m,f){var g=t[f];return typeof g=="number"?$x(g):g},r=function(m,f,g){var h=f.charCodeAt(0)-32<<4|g.charCodeAt(0)-48;return h==59?m:$x(h)};t["|"]=254;function n(m,f){switch(f.type){case"base64":return i(Js(m),f);case"binary":return i(m,f);case"buffer":return i(nt&&Buffer.isBuffer(m)?m.toString("binary"):zr(m),f);case"array":return i(Ir(m),f)}throw new Error("Unrecognized type "+f.type)}function i(m,f){var g=m.split(/[\n\r]+/),h=-1,p=-1,j=0,v=0,w=[],b=[],A=null,N={},C=[],k=[],S=[],F=0,R;for(+f.codepage>=0&&ha(+f.codepage);j!==g.length;++j){F=0;var T=g[j].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,r).replace(s,a),M=T.replace(/;;/g,"\0").split(";").map(function(P){return P.replace(/\u0000/g,";")}),H=M[0],U;if(T.length>0)switch(H){case"ID":break;case"E":break;case"B":break;case"O":break;case"W":break;case"P":M[1].charAt(0)=="P"&&b.push(T.slice(3).replace(/;;/g,";"));break;case"C":var W=!1,se=!1,X=!1,D=!1,le=-1,de=-1;for(v=1;v<M.length;++v)switch(M[v].charAt(0)){case"A":break;case"X":p=parseInt(M[v].slice(1))-1,se=!0;break;case"Y":for(h=parseInt(M[v].slice(1))-1,se||(p=0),R=w.length;R<=h;++R)w[R]=[];break;case"K":U=M[v].slice(1),U.charAt(0)==='"'?U=U.slice(1,U.length-1):U==="TRUE"?U=!0:U==="FALSE"?U=!1:isNaN(pa(U))?isNaN(bn(U).getDate())||(U=ls(U)):(U=pa(U),A!==null&&An(A)&&(U=Yl(U))),W=!0;break;case"E":D=!0;var E=on(M[v].slice(1),{r:h,c:p});w[h][p]=[w[h][p],E];break;case"S":X=!0,w[h][p]=[w[h][p],"S5S"];break;case"G":break;case"R":le=parseInt(M[v].slice(1))-1;break;case"C":de=parseInt(M[v].slice(1))-1;break;default:if(f&&f.WTF)throw new Error("SYLK bad record "+T)}if(W&&(w[h][p]&&w[h][p].length==2?w[h][p][0]=U:w[h][p]=U,A=null),X){if(D)throw new Error("SYLK shared formula cannot have own formula");var z=le>-1&&w[le][de];if(!z||!z[1])throw new Error("SYLK shared formula cannot find base");w[h][p][1]=bf(z[1],{r:h-le,c:p-de})}break;case"F":var O=0;for(v=1;v<M.length;++v)switch(M[v].charAt(0)){case"X":p=parseInt(M[v].slice(1))-1,++O;break;case"Y":for(h=parseInt(M[v].slice(1))-1,R=w.length;R<=h;++R)w[R]=[];break;case"M":F=parseInt(M[v].slice(1))/20;break;case"F":break;case"G":break;case"P":A=b[parseInt(M[v].slice(1))];break;case"S":break;case"D":break;case"N":break;case"W":for(S=M[v].slice(1).split(" "),R=parseInt(S[0],10);R<=parseInt(S[1],10);++R)F=parseInt(S[2],10),k[R-1]=F===0?{hidden:!0}:{wch:F},vn(k[R-1]);break;case"C":p=parseInt(M[v].slice(1))-1,k[p]||(k[p]={});break;case"R":h=parseInt(M[v].slice(1))-1,C[h]||(C[h]={}),F>0?(C[h].hpt=F,C[h].hpx=hi(F)):F===0&&(C[h].hidden=!0);break;default:if(f&&f.WTF)throw new Error("SYLK bad record "+T)}O<1&&(A=null);break;default:if(f&&f.WTF)throw new Error("SYLK bad record "+T)}}return C.length>0&&(N["!rows"]=C),k.length>0&&(N["!cols"]=k),f&&f.sheetRows&&(w=w.slice(0,f.sheetRows)),[w,N]}function l(m,f){var g=n(m,f),h=g[0],p=g[1],j=_n(h,f);return Pa(p).forEach(function(v){j[v]=p[v]}),j}function c(m,f){return ur(l(m,f),f)}function o(m,f,g,h){var p="C;Y"+(g+1)+";X"+(h+1)+";K";switch(m.t){case"n":p+=m.v||0,m.f&&!m.F&&(p+=";E"+K2(m.f,{r:g,c:h}));break;case"b":p+=m.v?"TRUE":"FALSE";break;case"e":p+=m.w||m.v;break;case"d":p+='"'+(m.w||m.v)+'"';break;case"s":p+='"'+m.v.replace(/"/g,"").replace(/;/g,";;")+'"';break}return p}function d(m,f){f.forEach(function(g,h){var p="F;W"+(h+1)+" "+(h+1)+" ";g.hidden?p+="0":(typeof g.width=="number"&&!g.wpx&&(g.wpx=kl(g.width)),typeof g.wpx=="number"&&!g.wch&&(g.wch=Sl(g.wpx)),typeof g.wch=="number"&&(p+=Math.round(g.wch))),p.charAt(p.length-1)!=" "&&m.push(p)})}function x(m,f){f.forEach(function(g,h){var p="F;";g.hidden?p+="M0;":g.hpt?p+="M"+20*g.hpt+";":g.hpx&&(p+="M"+20*pf(g.hpx)+";"),p.length>2&&m.push(p+"R"+(h+1))})}function u(m,f){var g=["ID;PWXL;N;E"],h=[],p=Dt(m["!ref"]),j,v=Array.isArray(m),w=`\r
`;g.push("P;PGeneral"),g.push("F;P0;DG0G8;M255"),m["!cols"]&&d(g,m["!cols"]),m["!rows"]&&x(g,m["!rows"]),g.push("B;Y"+(p.e.r-p.s.r+1)+";X"+(p.e.c-p.s.c+1)+";D"+[p.s.c,p.s.r,p.e.c,p.e.r].join(" "));for(var b=p.s.r;b<=p.e.r;++b)for(var A=p.s.c;A<=p.e.c;++A){var N=Xe({r:b,c:A});j=v?(m[b]||[])[A]:m[N],!(!j||j.v==null&&(!j.f||j.F))&&h.push(o(j,m,b,A))}return g.join(w)+w+h.join(w)+w+"E"+w}return{to_workbook:c,to_sheet:l,from_sheet:u}}(),m1=function(){function t(i,l){switch(l.type){case"base64":return s(Js(i),l);case"binary":return s(i,l);case"buffer":return s(nt&&Buffer.isBuffer(i)?i.toString("binary"):zr(i),l);case"array":return s(Ir(i),l)}throw new Error("Unrecognized type "+l.type)}function s(i,l){for(var c=i.split(`
`),o=-1,d=-1,x=0,u=[];x!==c.length;++x){if(c[x].trim()==="BOT"){u[++o]=[],d=0;continue}if(!(o<0)){var m=c[x].trim().split(","),f=m[0],g=m[1];++x;for(var h=c[x]||"";(h.match(/["]/g)||[]).length&1&&x<c.length-1;)h+=`
`+c[++x];switch(h=h.trim(),+f){case-1:if(h==="BOT"){u[++o]=[],d=0;continue}else if(h!=="EOD")throw new Error("Unrecognized DIF special command "+h);break;case 0:h==="TRUE"?u[o][d]=!0:h==="FALSE"?u[o][d]=!1:isNaN(pa(g))?isNaN(bn(g).getDate())?u[o][d]=g:u[o][d]=ls(g):u[o][d]=pa(g),++d;break;case 1:h=h.slice(1,h.length-1),h=h.replace(/""/g,'"'),h&&h.match(/^=".*"$/)&&(h=h.slice(2,-1)),u[o][d++]=h!==""?h:null;break}if(h==="EOD")break}}return l&&l.sheetRows&&(u=u.slice(0,l.sheetRows)),u}function a(i,l){return _n(t(i,l),l)}function r(i,l){return ur(a(i,l),l)}var n=function(){var i=function(o,d,x,u,m){o.push(d),o.push(x+","+u),o.push('"'+m.replace(/"/g,'""')+'"')},l=function(o,d,x,u){o.push(d+","+x),o.push(d==1?'"'+u.replace(/"/g,'""')+'"':u)};return function(o){var d=[],x=Dt(o["!ref"]),u,m=Array.isArray(o);i(d,"TABLE",0,1,"sheetjs"),i(d,"VECTORS",0,x.e.r-x.s.r+1,""),i(d,"TUPLES",0,x.e.c-x.s.c+1,""),i(d,"DATA",0,0,"");for(var f=x.s.r;f<=x.e.r;++f){l(d,-1,0,"BOT");for(var g=x.s.c;g<=x.e.c;++g){var h=Xe({r:f,c:g});if(u=m?(o[f]||[])[g]:o[h],!u){l(d,1,0,"");continue}switch(u.t){case"n":var p=u.w;!p&&u.v!=null&&(p=u.v),p==null?u.f&&!u.F?l(d,1,0,"="+u.f):l(d,1,0,""):l(d,0,p,"V");break;case"b":l(d,0,u.v?1:0,u.v?"TRUE":"FALSE");break;case"s":l(d,1,0,isNaN(u.v)?u.v:'="'+u.v+'"');break;case"d":u.w||(u.w=na(u.z||et[14],Ds(ls(u.v)))),l(d,0,u.w,"V");break;default:l(d,1,0,"")}}}l(d,-1,0,"EOD");var j=`\r
`,v=d.join(j);return v}}();return{to_workbook:r,to_sheet:a,from_sheet:n}}(),h1=function(){function t(u){return u.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,`
`)}function s(u){return u.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function a(u,m){for(var f=u.split(`
`),g=-1,h=-1,p=0,j=[];p!==f.length;++p){var v=f[p].trim().split(":");if(v[0]==="cell"){var w=Fs(v[1]);if(j.length<=w.r)for(g=j.length;g<=w.r;++g)j[g]||(j[g]=[]);switch(g=w.r,h=w.c,v[2]){case"t":j[g][h]=t(v[3]);break;case"v":j[g][h]=+v[3];break;case"vtf":var b=v[v.length-1];case"vtc":switch(v[3]){case"nl":j[g][h]=!!+v[4];break;default:j[g][h]=+v[4];break}v[2]=="vtf"&&(j[g][h]=[j[g][h],b])}}}return m&&m.sheetRows&&(j=j.slice(0,m.sheetRows)),j}function r(u,m){return _n(a(u,m),m)}function n(u,m){return ur(r(u,m),m)}var i=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join(`
`),l=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join(`
`)+`
`,c=["# SocialCalc Spreadsheet Control Save","part:sheet"].join(`
`),o="--SocialCalcSpreadsheetControlSave--";function d(u){if(!u||!u["!ref"])return"";for(var m=[],f=[],g,h="",p=En(u["!ref"]),j=Array.isArray(u),v=p.s.r;v<=p.e.r;++v)for(var w=p.s.c;w<=p.e.c;++w)if(h=Xe({r:v,c:w}),g=j?(u[v]||[])[w]:u[h],!(!g||g.v==null||g.t==="z")){switch(f=["cell",h,"t"],g.t){case"s":case"str":f.push(s(g.v));break;case"n":g.f?(f[2]="vtf",f[3]="n",f[4]=g.v,f[5]=s(g.f)):(f[2]="v",f[3]=g.v);break;case"b":f[2]="vt"+(g.f?"f":"c"),f[3]="nl",f[4]=g.v?"1":"0",f[5]=s(g.f||(g.v?"TRUE":"FALSE"));break;case"d":var b=Ds(ls(g.v));f[2]="vtc",f[3]="nd",f[4]=""+b,f[5]=g.w||na(g.z||et[14],b);break;case"e":continue}m.push(f.join(":"))}return m.push("sheet:c:"+(p.e.c-p.s.c+1)+":r:"+(p.e.r-p.s.r+1)+":tvf:1"),m.push("valueformat:1:text-wiki"),m.join(`
`)}function x(u){return[i,l,c,l,d(u),o].join(`
`)}return{to_workbook:n,to_sheet:r,from_sheet:x}}(),ui=function(){function t(x,u,m,f,g){g.raw?u[m][f]=x:x===""||(x==="TRUE"?u[m][f]=!0:x==="FALSE"?u[m][f]=!1:isNaN(pa(x))?isNaN(bn(x).getDate())?u[m][f]=x:u[m][f]=ls(x):u[m][f]=pa(x))}function s(x,u){var m=u||{},f=[];if(!x||x.length===0)return f;for(var g=x.split(/[\r\n]/),h=g.length-1;h>=0&&g[h].length===0;)--h;for(var p=10,j=0,v=0;v<=h;++v)j=g[v].indexOf(" "),j==-1?j=g[v].length:j++,p=Math.max(p,j);for(v=0;v<=h;++v){f[v]=[];var w=0;for(t(g[v].slice(0,p).trim(),f,v,w,m),w=1;w<=(g[v].length-p)/10+1;++w)t(g[v].slice(p+(w-1)*10,p+w*10).trim(),f,v,w,m)}return m.sheetRows&&(f=f.slice(0,m.sheetRows)),f}var a={44:",",9:"	",59:";",124:"|"},r={44:3,9:2,59:1,124:0};function n(x){for(var u={},m=!1,f=0,g=0;f<x.length;++f)(g=x.charCodeAt(f))==34?m=!m:!m&&g in a&&(u[g]=(u[g]||0)+1);g=[];for(f in u)Object.prototype.hasOwnProperty.call(u,f)&&g.push([u[f],f]);if(!g.length){u=r;for(f in u)Object.prototype.hasOwnProperty.call(u,f)&&g.push([u[f],f])}return g.sort(function(h,p){return h[0]-p[0]||r[h[1]]-r[p[1]]}),a[g.pop()[1]]||44}function i(x,u){var m=u||{},f="",g=m.dense?[]:{},h={s:{c:0,r:0},e:{c:0,r:0}};x.slice(0,4)=="sep="?x.charCodeAt(5)==13&&x.charCodeAt(6)==10?(f=x.charAt(4),x=x.slice(7)):x.charCodeAt(5)==13||x.charCodeAt(5)==10?(f=x.charAt(4),x=x.slice(6)):f=n(x.slice(0,1024)):m&&m.FS?f=m.FS:f=n(x.slice(0,1024));var p=0,j=0,v=0,w=0,b=0,A=f.charCodeAt(0),N=!1,C=0,k=x.charCodeAt(0);x=x.replace(/\r\n/mg,`
`);var S=m.dateNF!=null?Sj(m.dateNF):null;function F(){var R=x.slice(w,b),T={};if(R.charAt(0)=='"'&&R.charAt(R.length-1)=='"'&&(R=R.slice(1,-1).replace(/""/g,'"')),R.length===0)T.t="z";else if(m.raw)T.t="s",T.v=R;else if(R.trim().length===0)T.t="s",T.v=R;else if(R.charCodeAt(0)==61)R.charCodeAt(1)==34&&R.charCodeAt(R.length-1)==34?(T.t="s",T.v=R.slice(2,-1).replace(/""/g,'"')):ek(R)?(T.t="n",T.f=R.slice(1)):(T.t="s",T.v=R);else if(R=="TRUE")T.t="b",T.v=!0;else if(R=="FALSE")T.t="b",T.v=!1;else if(!isNaN(v=pa(R)))T.t="n",m.cellText!==!1&&(T.w=R),T.v=v;else if(!isNaN(bn(R).getDate())||S&&R.match(S)){T.z=m.dateNF||et[14];var M=0;S&&R.match(S)&&(R=Cj(R,m.dateNF,R.match(S)||[]),M=1),m.cellDates?(T.t="d",T.v=ls(R,M)):(T.t="n",T.v=Ds(ls(R,M))),m.cellText!==!1&&(T.w=na(T.z,T.v instanceof Date?Ds(T.v):T.v)),m.cellNF||delete T.z}else T.t="s",T.v=R;if(T.t=="z"||(m.dense?(g[p]||(g[p]=[]),g[p][j]=T):g[Xe({c:j,r:p})]=T),w=b+1,k=x.charCodeAt(w),h.e.c<j&&(h.e.c=j),h.e.r<p&&(h.e.r=p),C==A)++j;else if(j=0,++p,m.sheetRows&&m.sheetRows<=p)return!0}e:for(;b<x.length;++b)switch(C=x.charCodeAt(b)){case 34:k===34&&(N=!N);break;case A:case 10:case 13:if(!N&&F())break e;break}return b-w>0&&F(),g["!ref"]=ct(h),g}function l(x,u){return!(u&&u.PRN)||u.FS||x.slice(0,4)=="sep="||x.indexOf("	")>=0||x.indexOf(",")>=0||x.indexOf(";")>=0?i(x,u):_n(s(x,u),u)}function c(x,u){var m="",f=u.type=="string"?[0,0,0,0]:Fd(x,u);switch(u.type){case"base64":m=Js(x);break;case"binary":m=x;break;case"buffer":u.codepage==65001?m=x.toString("utf8"):u.codepage&&typeof ci<"u"||(m=nt&&Buffer.isBuffer(x)?x.toString("binary"):zr(x));break;case"array":m=Ir(x);break;case"string":m=x;break;default:throw new Error("Unrecognized type "+u.type)}return f[0]==239&&f[1]==187&&f[2]==191?m=vt(m.slice(3)):u.type!="string"&&u.type!="buffer"&&u.codepage==65001?m=vt(m):u.type=="binary"&&typeof ci<"u",m.slice(0,19)=="socialcalc:version:"?h1.to_sheet(u.type=="string"?m:vt(m),u):l(m,u)}function o(x,u){return ur(c(x,u),u)}function d(x){for(var u=[],m=Dt(x["!ref"]),f,g=Array.isArray(x),h=m.s.r;h<=m.e.r;++h){for(var p=[],j=m.s.c;j<=m.e.c;++j){var v=Xe({r:h,c:j});if(f=g?(x[h]||[])[j]:x[v],!f||f.v==null){p.push("          ");continue}for(var w=(f.w||(Wa(f),f.w)||"").slice(0,10);w.length<10;)w+=" ";p.push(w+(j===0?" ":""))}u.push(p.join(""))}return u.join(`
`)}return{to_workbook:o,to_sheet:c,from_sheet:d}}();function f1(t,s){var a=s||{},r=!!a.WTF;a.WTF=!0;try{var n=u1.to_workbook(t,a);return a.WTF=r,n}catch(i){if(a.WTF=r,!i.message.match(/SYLK bad record ID/)&&r)throw i;return ui.to_workbook(t,s)}}var Qn=function(){function t(E,z,O){if(E){cs(E,E.l||0);for(var P=O.Enum||le;E.l<E.length;){var Z=E.read_shift(2),re=P[Z]||P[65535],ie=E.read_shift(2),oe=E.l+ie,ue=re.f&&re.f(E,ie,O);if(E.l=oe,z(ue,re,Z))return}}}function s(E,z){switch(z.type){case"base64":return a(ua(Js(E)),z);case"binary":return a(ua(E),z);case"buffer":case"array":return a(E,z)}throw"Unsupported type "+z.type}function a(E,z){if(!E)return E;var O=z||{},P=O.dense?[]:{},Z="Sheet1",re="",ie=0,oe={},ue=[],Ne=[],I={s:{r:0,c:0},e:{r:0,c:0}},ce=O.sheetRows||0;if(E[2]==0&&(E[3]==8||E[3]==9)&&E.length>=16&&E[14]==5&&E[15]===108)throw new Error("Unsupported Works 3 for Mac file");if(E[2]==2)O.Enum=le,t(E,function(ne,xe,he){switch(he){case 0:O.vers=ne,ne>=4096&&(O.qpro=!0);break;case 6:I=ne;break;case 204:ne&&(re=ne);break;case 222:re=ne;break;case 15:case 51:O.qpro||(ne[1].v=ne[1].v.slice(1));case 13:case 14:case 16:he==14&&(ne[2]&112)==112&&(ne[2]&15)>1&&(ne[2]&15)<15&&(ne[1].z=O.dateNF||et[14],O.cellDates&&(ne[1].t="d",ne[1].v=Yl(ne[1].v))),O.qpro&&ne[3]>ie&&(P["!ref"]=ct(I),oe[Z]=P,ue.push(Z),P=O.dense?[]:{},I={s:{r:0,c:0},e:{r:0,c:0}},ie=ne[3],Z=re||"Sheet"+(ie+1),re="");var Se=O.dense?(P[ne[0].r]||[])[ne[0].c]:P[Xe(ne[0])];if(Se){Se.t=ne[1].t,Se.v=ne[1].v,ne[1].z!=null&&(Se.z=ne[1].z),ne[1].f!=null&&(Se.f=ne[1].f);break}O.dense?(P[ne[0].r]||(P[ne[0].r]=[]),P[ne[0].r][ne[0].c]=ne[1]):P[Xe(ne[0])]=ne[1];break}},O);else if(E[2]==26||E[2]==14)O.Enum=de,E[2]==14&&(O.qpro=!0,E.l=0),t(E,function(ne,xe,he){switch(he){case 204:Z=ne;break;case 22:ne[1].v=ne[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if(ne[3]>ie&&(P["!ref"]=ct(I),oe[Z]=P,ue.push(Z),P=O.dense?[]:{},I={s:{r:0,c:0},e:{r:0,c:0}},ie=ne[3],Z="Sheet"+(ie+1)),ce>0&&ne[0].r>=ce)break;O.dense?(P[ne[0].r]||(P[ne[0].r]=[]),P[ne[0].r][ne[0].c]=ne[1]):P[Xe(ne[0])]=ne[1],I.e.c<ne[0].c&&(I.e.c=ne[0].c),I.e.r<ne[0].r&&(I.e.r=ne[0].r);break;case 27:ne[14e3]&&(Ne[ne[14e3][0]]=ne[14e3][1]);break;case 1537:Ne[ne[0]]=ne[1],ne[0]==ie&&(Z=ne[1]);break}},O);else throw new Error("Unrecognized LOTUS BOF "+E[2]);if(P["!ref"]=ct(I),oe[re||Z]=P,ue.push(re||Z),!Ne.length)return{SheetNames:ue,Sheets:oe};for(var L={},V=[],te=0;te<Ne.length;++te)oe[ue[te]]?(V.push(Ne[te]||ue[te]),L[Ne[te]]=oe[Ne[te]]||oe[ue[te]]):(V.push(Ne[te]),L[Ne[te]]={"!ref":"A1"});return{SheetNames:V,Sheets:L}}function r(E,z){var O=z||{};if(+O.codepage>=0&&ha(+O.codepage),O.type=="string")throw new Error("Cannot write WK1 to JS string");var P=go(),Z=Dt(E["!ref"]),re=Array.isArray(E),ie=[];da(P,0,i(1030)),da(P,6,o(Z));for(var oe=Math.min(Z.e.r,8191),ue=Z.s.r;ue<=oe;++ue)for(var Ne=ds(ue),I=Z.s.c;I<=Z.e.c;++I){ue===Z.s.r&&(ie[I]=Kt(I));var ce=ie[I]+Ne,L=re?(E[ue]||[])[I]:E[ce];if(!(!L||L.t=="z"))if(L.t=="n")(L.v|0)==L.v&&L.v>=-32768&&L.v<=32767?da(P,13,f(ue,I,L.v)):da(P,14,h(ue,I,L.v));else{var V=Wa(L);da(P,15,u(ue,I,V.slice(0,239)))}}return da(P,1),P.end()}function n(E,z){var O=z||{};if(+O.codepage>=0&&ha(+O.codepage),O.type=="string")throw new Error("Cannot write WK3 to JS string");var P=go();da(P,0,l(E));for(var Z=0,re=0;Z<E.SheetNames.length;++Z)(E.Sheets[E.SheetNames[Z]]||{})["!ref"]&&da(P,27,D(E.SheetNames[Z],re++));var ie=0;for(Z=0;Z<E.SheetNames.length;++Z){var oe=E.Sheets[E.SheetNames[Z]];if(!(!oe||!oe["!ref"])){for(var ue=Dt(oe["!ref"]),Ne=Array.isArray(oe),I=[],ce=Math.min(ue.e.r,8191),L=ue.s.r;L<=ce;++L)for(var V=ds(L),te=ue.s.c;te<=ue.e.c;++te){L===ue.s.r&&(I[te]=Kt(te));var ne=I[te]+V,xe=Ne?(oe[L]||[])[te]:oe[ne];if(!(!xe||xe.t=="z"))if(xe.t=="n")da(P,23,F(L,te,ie,xe.v));else{var he=Wa(xe);da(P,22,C(L,te,ie,he.slice(0,239)))}}++ie}}return da(P,1),P.end()}function i(E){var z=Yt(2);return z.write_shift(2,E),z}function l(E){var z=Yt(26);z.write_shift(2,4096),z.write_shift(2,4),z.write_shift(4,0);for(var O=0,P=0,Z=0,re=0;re<E.SheetNames.length;++re){var ie=E.SheetNames[re],oe=E.Sheets[ie];if(!(!oe||!oe["!ref"])){++Z;var ue=En(oe["!ref"]);O<ue.e.r&&(O=ue.e.r),P<ue.e.c&&(P=ue.e.c)}}return O>8191&&(O=8191),z.write_shift(2,O),z.write_shift(1,Z),z.write_shift(1,P),z.write_shift(2,0),z.write_shift(2,0),z.write_shift(1,1),z.write_shift(1,2),z.write_shift(4,0),z.write_shift(4,0),z}function c(E,z,O){var P={s:{c:0,r:0},e:{c:0,r:0}};return z==8&&O.qpro?(P.s.c=E.read_shift(1),E.l++,P.s.r=E.read_shift(2),P.e.c=E.read_shift(1),E.l++,P.e.r=E.read_shift(2),P):(P.s.c=E.read_shift(2),P.s.r=E.read_shift(2),z==12&&O.qpro&&(E.l+=2),P.e.c=E.read_shift(2),P.e.r=E.read_shift(2),z==12&&O.qpro&&(E.l+=2),P.s.c==65535&&(P.s.c=P.e.c=P.s.r=P.e.r=0),P)}function o(E){var z=Yt(8);return z.write_shift(2,E.s.c),z.write_shift(2,E.s.r),z.write_shift(2,E.e.c),z.write_shift(2,E.e.r),z}function d(E,z,O){var P=[{c:0,r:0},{t:"n",v:0},0,0];return O.qpro&&O.vers!=20768?(P[0].c=E.read_shift(1),P[3]=E.read_shift(1),P[0].r=E.read_shift(2),E.l+=2):(P[2]=E.read_shift(1),P[0].c=E.read_shift(2),P[0].r=E.read_shift(2)),P}function x(E,z,O){var P=E.l+z,Z=d(E,z,O);if(Z[1].t="s",O.vers==20768){E.l++;var re=E.read_shift(1);return Z[1].v=E.read_shift(re,"utf8"),Z}return O.qpro&&E.l++,Z[1].v=E.read_shift(P-E.l,"cstr"),Z}function u(E,z,O){var P=Yt(7+O.length);P.write_shift(1,255),P.write_shift(2,z),P.write_shift(2,E),P.write_shift(1,39);for(var Z=0;Z<P.length;++Z){var re=O.charCodeAt(Z);P.write_shift(1,re>=128?95:re)}return P.write_shift(1,0),P}function m(E,z,O){var P=d(E,z,O);return P[1].v=E.read_shift(2,"i"),P}function f(E,z,O){var P=Yt(7);return P.write_shift(1,255),P.write_shift(2,z),P.write_shift(2,E),P.write_shift(2,O,"i"),P}function g(E,z,O){var P=d(E,z,O);return P[1].v=E.read_shift(8,"f"),P}function h(E,z,O){var P=Yt(13);return P.write_shift(1,255),P.write_shift(2,z),P.write_shift(2,E),P.write_shift(8,O,"f"),P}function p(E,z,O){var P=E.l+z,Z=d(E,z,O);if(Z[1].v=E.read_shift(8,"f"),O.qpro)E.l=P;else{var re=E.read_shift(2);b(E.slice(E.l,E.l+re),Z),E.l+=re}return Z}function j(E,z,O){var P=z&32768;return z&=-32769,z=(P?E:0)+(z>=8192?z-16384:z),(P?"":"$")+(O?Kt(z):ds(z))}var v={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},w=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function b(E,z){cs(E,0);for(var O=[],P=0,Z="",re="",ie="",oe="";E.l<E.length;){var ue=E[E.l++];switch(ue){case 0:O.push(E.read_shift(8,"f"));break;case 1:re=j(z[0].c,E.read_shift(2),!0),Z=j(z[0].r,E.read_shift(2),!1),O.push(re+Z);break;case 2:{var Ne=j(z[0].c,E.read_shift(2),!0),I=j(z[0].r,E.read_shift(2),!1);re=j(z[0].c,E.read_shift(2),!0),Z=j(z[0].r,E.read_shift(2),!1),O.push(Ne+I+":"+re+Z)}break;case 3:if(E.l<E.length){console.error("WK1 premature formula end");return}break;case 4:O.push("("+O.pop()+")");break;case 5:O.push(E.read_shift(2));break;case 6:{for(var ce="";ue=E[E.l++];)ce+=String.fromCharCode(ue);O.push('"'+ce.replace(/"/g,'""')+'"')}break;case 8:O.push("-"+O.pop());break;case 23:O.push("+"+O.pop());break;case 22:O.push("NOT("+O.pop()+")");break;case 20:case 21:oe=O.pop(),ie=O.pop(),O.push(["AND","OR"][ue-20]+"("+ie+","+oe+")");break;default:if(ue<32&&w[ue])oe=O.pop(),ie=O.pop(),O.push(ie+w[ue]+oe);else if(v[ue]){if(P=v[ue][1],P==69&&(P=E[E.l++]),P>O.length){console.error("WK1 bad formula parse 0x"+ue.toString(16)+":|"+O.join("|")+"|");return}var L=O.slice(-P);O.length-=P,O.push(v[ue][0]+"("+L.join(",")+")")}else return ue<=7?console.error("WK1 invalid opcode "+ue.toString(16)):ue<=24?console.error("WK1 unsupported op "+ue.toString(16)):ue<=30?console.error("WK1 invalid opcode "+ue.toString(16)):ue<=115?console.error("WK1 unsupported function opcode "+ue.toString(16)):console.error("WK1 unrecognized opcode "+ue.toString(16))}}O.length==1?z[1].f=""+O[0]:console.error("WK1 bad formula parse |"+O.join("|")+"|")}function A(E){var z=[{c:0,r:0},{t:"n",v:0},0];return z[0].r=E.read_shift(2),z[3]=E[E.l++],z[0].c=E[E.l++],z}function N(E,z){var O=A(E);return O[1].t="s",O[1].v=E.read_shift(z-4,"cstr"),O}function C(E,z,O,P){var Z=Yt(6+P.length);Z.write_shift(2,E),Z.write_shift(1,O),Z.write_shift(1,z),Z.write_shift(1,39);for(var re=0;re<P.length;++re){var ie=P.charCodeAt(re);Z.write_shift(1,ie>=128?95:ie)}return Z.write_shift(1,0),Z}function k(E,z){var O=A(E);O[1].v=E.read_shift(2);var P=O[1].v>>1;if(O[1].v&1)switch(P&7){case 0:P=(P>>3)*5e3;break;case 1:P=(P>>3)*500;break;case 2:P=(P>>3)/20;break;case 3:P=(P>>3)/200;break;case 4:P=(P>>3)/2e3;break;case 5:P=(P>>3)/2e4;break;case 6:P=(P>>3)/16;break;case 7:P=(P>>3)/64;break}return O[1].v=P,O}function S(E,z){var O=A(E),P=E.read_shift(4),Z=E.read_shift(4),re=E.read_shift(2);if(re==65535)return P===0&&Z===3221225472?(O[1].t="e",O[1].v=15):P===0&&Z===3489660928?(O[1].t="e",O[1].v=42):O[1].v=0,O;var ie=re&32768;return re=(re&32767)-16446,O[1].v=(1-ie*2)*(Z*Math.pow(2,re+32)+P*Math.pow(2,re)),O}function F(E,z,O,P){var Z=Yt(14);if(Z.write_shift(2,E),Z.write_shift(1,O),Z.write_shift(1,z),P==0)return Z.write_shift(4,0),Z.write_shift(4,0),Z.write_shift(2,65535),Z;var re=0,ie=0,oe=0,ue=0;return P<0&&(re=1,P=-P),ie=Math.log2(P)|0,P/=Math.pow(2,ie-31),ue=P>>>0,ue&2147483648||(P/=2,++ie,ue=P>>>0),P-=ue,ue|=2147483648,ue>>>=0,P*=Math.pow(2,32),oe=P>>>0,Z.write_shift(4,oe),Z.write_shift(4,ue),ie+=16383+(re?32768:0),Z.write_shift(2,ie),Z}function R(E,z){var O=S(E);return E.l+=z-14,O}function T(E,z){var O=A(E),P=E.read_shift(4);return O[1].v=P>>6,O}function M(E,z){var O=A(E),P=E.read_shift(8,"f");return O[1].v=P,O}function H(E,z){var O=M(E);return E.l+=z-10,O}function U(E,z){return E[E.l+z-1]==0?E.read_shift(z,"cstr"):""}function W(E,z){var O=E[E.l++];O>z-1&&(O=z-1);for(var P="";P.length<O;)P+=String.fromCharCode(E[E.l++]);return P}function se(E,z,O){if(!(!O.qpro||z<21)){var P=E.read_shift(1);E.l+=17,E.l+=1,E.l+=2;var Z=E.read_shift(z-21,"cstr");return[P,Z]}}function X(E,z){for(var O={},P=E.l+z;E.l<P;){var Z=E.read_shift(2);if(Z==14e3){for(O[Z]=[0,""],O[Z][0]=E.read_shift(2);E[E.l];)O[Z][1]+=String.fromCharCode(E[E.l]),E.l++;E.l++}}return O}function D(E,z){var O=Yt(5+E.length);O.write_shift(2,14e3),O.write_shift(2,z);for(var P=0;P<E.length;++P){var Z=E.charCodeAt(P);O[O.l++]=Z>127?95:Z}return O[O.l++]=0,O}var le={0:{n:"BOF",f:Ut},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:c},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f:m},14:{n:"NUMBER",f:g},15:{n:"LABEL",f:x},16:{n:"FORMULA",f:p},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f:x},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:U},222:{n:"SHEETNAMELP",f:W},65535:{n:""}},de={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:N},23:{n:"NUMBER17",f:S},24:{n:"NUMBER18",f:k},25:{n:"FORMULA19",f:R},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:X},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:T},38:{n:"??"},39:{n:"NUMBER27",f:M},40:{n:"FORMULA28",f:H},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:U},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:se},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:r,book_to_wk3:n,to_workbook:s}}();function p1(t){var s={},a=t.match(ks),r=0,n=!1;if(a)for(;r!=a.length;++r){var i=Ze(a[r]);switch(i[0].replace(/\w*:/g,"")){case"<condense":break;case"<extend":break;case"<shadow":if(!i.val)break;case"<shadow>":case"<shadow/>":s.shadow=1;break;case"</shadow>":break;case"<charset":if(i.val=="1")break;s.cp=id[parseInt(i.val,10)];break;case"<outline":if(!i.val)break;case"<outline>":case"<outline/>":s.outline=1;break;case"</outline>":break;case"<rFont":s.name=i.val;break;case"<sz":s.sz=i.val;break;case"<strike":if(!i.val)break;case"<strike>":case"<strike/>":s.strike=1;break;case"</strike>":break;case"<u":if(!i.val)break;switch(i.val){case"double":s.uval="double";break;case"singleAccounting":s.uval="single-accounting";break;case"doubleAccounting":s.uval="double-accounting";break}case"<u>":case"<u/>":s.u=1;break;case"</u>":break;case"<b":if(i.val=="0")break;case"<b>":case"<b/>":s.b=1;break;case"</b>":break;case"<i":if(i.val=="0")break;case"<i>":case"<i/>":s.i=1;break;case"</i>":break;case"<color":i.rgb&&(s.color=i.rgb.slice(2,8));break;case"<color>":case"<color/>":case"</color>":break;case"<family":s.family=i.val;break;case"<family>":case"<family/>":case"</family>":break;case"<vertAlign":s.valign=i.val;break;case"<vertAlign>":case"<vertAlign/>":case"</vertAlign>":break;case"<scheme":break;case"<scheme>":case"<scheme/>":case"</scheme>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;default:if(i[0].charCodeAt(1)!==47&&!n)throw new Error("Unrecognized rich format "+i[0])}}return s}var g1=function(){var t=di("t"),s=di("rPr");function a(i){var l=i.match(t);if(!l)return{t:"s",v:""};var c={t:"s",v:dt(l[1])},o=i.match(s);return o&&(c.s=p1(o[1])),c}var r=/<(?:\w+:)?r>/g,n=/<\/(?:\w+:)?r>/;return function(l){return l.replace(r,"").split(n).map(a).filter(function(c){return c.v})}}(),y1=function(){var s=/(\r\n|\n)/g;function a(n,i,l){var c=[];n.u&&c.push("text-decoration: underline;"),n.uval&&c.push("text-underline-style:"+n.uval+";"),n.sz&&c.push("font-size:"+n.sz+"pt;"),n.outline&&c.push("text-effect: outline;"),n.shadow&&c.push("text-shadow: auto;"),i.push('<span style="'+c.join("")+'">'),n.b&&(i.push("<b>"),l.push("</b>")),n.i&&(i.push("<i>"),l.push("</i>")),n.strike&&(i.push("<s>"),l.push("</s>"));var o=n.valign||"";return o=="superscript"||o=="super"?o="sup":o=="subscript"&&(o="sub"),o!=""&&(i.push("<"+o+">"),l.push("</"+o+">")),l.push("</span>"),n}function r(n){var i=[[],n.v,[]];return n.v?(n.s&&a(n.s,i[0],i[2]),i[0].join("")+i[1].replace(s,"<br/>")+i[2].join("")):""}return function(i){return i.map(r).join("")}}(),b1=/<(?:\w+:)?t[^>]*>([^<]*)<\/(?:\w+:)?t>/g,v1=/<(?:\w+:)?r>/,j1=/<(?:\w+:)?rPh.*?>([\s\S]*?)<\/(?:\w+:)?rPh>/g;function wd(t,s){var a=s?s.cellHTML:!0,r={};return t?(t.match(/^\s*<(?:\w+:)?t[^>]*>/)?(r.t=dt(vt(t.slice(t.indexOf(">")+1).split(/<\/(?:\w+:)?t>/)[0]||"")),r.r=vt(t),a&&(r.h=md(r.t))):t.match(v1)&&(r.r=vt(t),r.t=dt(vt((t.replace(j1,"").match(b1)||[]).join("").replace(ks,""))),a&&(r.h=y1(g1(r.r)))),r):{t:""}}var N1=/<(?:\w+:)?sst([^>]*)>([\s\S]*)<\/(?:\w+:)?sst>/,w1=/<(?:\w+:)?(?:si|sstItem)>/g,k1=/<\/(?:\w+:)?(?:si|sstItem)>/;function S1(t,s){var a=[],r="";if(!t)return a;var n=t.match(N1);if(n){r=n[2].replace(w1,"").split(k1);for(var i=0;i!=r.length;++i){var l=wd(r[i].trim(),s);l!=null&&(a[a.length]=l)}n=Ze(n[1]),a.Count=n.count,a.Unique=n.uniqueCount}return a}function C1(t){return[t.read_shift(4),t.read_shift(4)]}function A1(t,s){var a=[],r=!1;return Ya(t,function(i,l,c){switch(c){case 159:a.Count=i[0],a.Unique=i[1];break;case 19:a.push(i);break;case 160:return!0;case 35:r=!0;break;case 36:r=!1;break;default:if(l.T,!r||s.WTF)throw new Error("Unexpected record 0x"+c.toString(16))}}),a}function df(t){for(var s=[],a=t.split(""),r=0;r<a.length;++r)s[r]=a[r].charCodeAt(0);return s}function Ha(t,s){var a={};return a.Major=t.read_shift(2),a.Minor=t.read_shift(2),s>=4&&(t.l+=s-4),a}function E1(t){var s={};return s.id=t.read_shift(0,"lpp4"),s.R=Ha(t,4),s.U=Ha(t,4),s.W=Ha(t,4),s}function _1(t){for(var s=t.read_shift(4),a=t.l+s-4,r={},n=t.read_shift(4),i=[];n-- >0;)i.push({t:t.read_shift(4),v:t.read_shift(0,"lpp4")});if(r.name=t.read_shift(0,"lpp4"),r.comps=i,t.l!=a)throw new Error("Bad DataSpaceMapEntry: "+t.l+" != "+a);return r}function F1(t){var s=[];t.l+=4;for(var a=t.read_shift(4);a-- >0;)s.push(_1(t));return s}function T1(t){var s=[];t.l+=4;for(var a=t.read_shift(4);a-- >0;)s.push(t.read_shift(0,"lpp4"));return s}function D1(t){var s={};return t.read_shift(4),t.l+=4,s.id=t.read_shift(0,"lpp4"),s.name=t.read_shift(0,"lpp4"),s.R=Ha(t,4),s.U=Ha(t,4),s.W=Ha(t,4),s}function R1(t){var s=D1(t);if(s.ename=t.read_shift(0,"8lpp4"),s.blksz=t.read_shift(4),s.cmode=t.read_shift(4),t.read_shift(4)!=4)throw new Error("Bad !Primary record");return s}function xf(t,s){var a=t.l+s,r={};r.Flags=t.read_shift(4)&63,t.l+=4,r.AlgID=t.read_shift(4);var n=!1;switch(r.AlgID){case 26126:case 26127:case 26128:n=r.Flags==36;break;case 26625:n=r.Flags==4;break;case 0:n=r.Flags==16||r.Flags==4||r.Flags==36;break;default:throw"Unrecognized encryption algorithm: "+r.AlgID}if(!n)throw new Error("Encryption Flags/AlgID mismatch");return r.AlgIDHash=t.read_shift(4),r.KeySize=t.read_shift(4),r.ProviderType=t.read_shift(4),t.l+=8,r.CSPName=t.read_shift(a-t.l>>1,"utf16le"),t.l=a,r}function uf(t,s){var a={},r=t.l+s;return t.l+=4,a.Salt=t.slice(t.l,t.l+16),t.l+=16,a.Verifier=t.slice(t.l,t.l+16),t.l+=16,t.read_shift(4),a.VerifierHash=t.slice(t.l,r),t.l=r,a}function P1(t){var s=Ha(t);switch(s.Minor){case 2:return[s.Minor,I1(t)];case 3:return[s.Minor,$1()];case 4:return[s.Minor,O1(t)]}throw new Error("ECMA-376 Encrypted file unrecognized Version: "+s.Minor)}function I1(t){var s=t.read_shift(4);if((s&63)!=36)throw new Error("EncryptionInfo mismatch");var a=t.read_shift(4),r=xf(t,a),n=uf(t,t.length-t.l);return{t:"Std",h:r,v:n}}function $1(){throw new Error("File is password-protected: ECMA-376 Extensible")}function O1(t){var s=["saltSize","blockSize","keyBits","hashSize","cipherAlgorithm","cipherChaining","hashAlgorithm","saltValue"];t.l+=4;var a=t.read_shift(t.length-t.l,"utf8"),r={};return a.replace(ks,function(i){var l=Ze(i);switch(Oa(l[0])){case"<?xml":break;case"<encryption":case"</encryption>":break;case"<keyData":s.forEach(function(c){r[c]=l[c]});break;case"<dataIntegrity":r.encryptedHmacKey=l.encryptedHmacKey,r.encryptedHmacValue=l.encryptedHmacValue;break;case"<keyEncryptors>":case"<keyEncryptors":r.encs=[];break;case"</keyEncryptors>":break;case"<keyEncryptor":r.uri=l.uri;break;case"</keyEncryptor>":break;case"<encryptedKey":r.encs.push(l);break;default:throw l[0]}}),r}function L1(t,s){var a={},r=a.EncryptionVersionInfo=Ha(t,4);if(s-=4,r.Minor!=2)throw new Error("unrecognized minor version code: "+r.Minor);if(r.Major>4||r.Major<2)throw new Error("unrecognized major version code: "+r.Major);a.Flags=t.read_shift(4),s-=4;var n=t.read_shift(4);return s-=4,a.EncryptionHeader=xf(t,n),s-=n,a.EncryptionVerifier=uf(t,s),a}function M1(t){var s={},a=s.EncryptionVersionInfo=Ha(t,4);if(a.Major!=1||a.Minor!=1)throw"unrecognized version code "+a.Major+" : "+a.Minor;return s.Salt=t.read_shift(16),s.EncryptedVerifier=t.read_shift(16),s.EncryptedVerifierHash=t.read_shift(16),s}function B1(t){var s=0,a,r=df(t),n=r.length+1,i,l,c,o,d;for(a=cr(n),a[0]=r.length,i=1;i!=n;++i)a[i]=r[i-1];for(i=n-1;i>=0;--i)l=a[i],c=s&16384?1:0,o=s<<1&32767,d=c|o,s=d^l;return s^52811}var mf=function(){var t=[187,255,255,186,255,255,185,128,0,190,15,0,191,15,0],s=[57840,7439,52380,33984,4364,3600,61902,12606,6258,57657,54287,34041,10252,43370,20163],a=[44796,19929,39858,10053,20106,40212,10761,31585,63170,64933,60267,50935,40399,11199,17763,35526,1453,2906,5812,11624,23248,885,1770,3540,7080,14160,28320,56640,55369,41139,20807,41614,21821,43642,17621,28485,56970,44341,19019,38038,14605,29210,60195,50791,40175,10751,21502,43004,24537,18387,36774,3949,7898,15796,31592,63184,47201,24803,49606,37805,14203,28406,56812,17824,35648,1697,3394,6788,13576,27152,43601,17539,35078,557,1114,2228,4456,30388,60776,51953,34243,7079,14158,28316,14128,28256,56512,43425,17251,34502,7597,13105,26210,52420,35241,883,1766,3532,4129,8258,16516,33032,4657,9314,18628],r=function(l){return(l/2|l*128)&255},n=function(l,c){return r(l^c)},i=function(l){for(var c=s[l.length-1],o=104,d=l.length-1;d>=0;--d)for(var x=l[d],u=0;u!=7;++u)x&64&&(c^=a[o]),x*=2,--o;return c};return function(l){for(var c=df(l),o=i(c),d=c.length,x=cr(16),u=0;u!=16;++u)x[u]=0;var m,f,g;for((d&1)===1&&(m=o>>8,x[d]=n(t[0],m),--d,m=o&255,f=c[c.length-1],x[d]=n(f,m));d>0;)--d,m=o>>8,x[d]=n(c[d],m),--d,m=o&255,x[d]=n(c[d],m);for(d=15,g=15-c.length;g>0;)m=o>>8,x[d]=n(t[g],m),--d,--g,m=o&255,x[d]=n(c[d],m),--d,--g;return x}}(),z1=function(t,s,a,r,n){n||(n=s),r||(r=mf(t));var i,l;for(i=0;i!=s.length;++i)l=s[i],l^=r[a],l=(l>>5|l<<3)&255,n[i]=l,++a;return[n,a,r]},U1=function(t){var s=0,a=mf(t);return function(r){var n=z1("",r,s,a);return s=n[1],n[0]}};function V1(t,s,a,r){var n={key:Ut(t),verificationBytes:Ut(t)};return a.password&&(n.verifier=B1(a.password)),r.valid=n.verificationBytes===n.verifier,r.valid&&(r.insitu=U1(a.password)),n}function H1(t,s,a){var r=a||{};return r.Info=t.read_shift(2),t.l-=2,r.Info===1?r.Data=M1(t):r.Data=L1(t,s),r}function q1(t,s,a){var r={Type:a.biff>=8?t.read_shift(2):0};return r.Type?H1(t,s-2,r):V1(t,a.biff>=8?s:s-2,a,r),r}var W1=function(){function t(n,i){switch(i.type){case"base64":return s(Js(n),i);case"binary":return s(n,i);case"buffer":return s(nt&&Buffer.isBuffer(n)?n.toString("binary"):zr(n),i);case"array":return s(Ir(n),i)}throw new Error("Unrecognized type "+i.type)}function s(n,i){var l=i||{},c=l.dense?[]:{},o=n.match(/\\trowd.*?\\row\b/g);if(!o.length)throw new Error("RTF missing table");var d={s:{c:0,r:0},e:{c:0,r:o.length-1}};return o.forEach(function(x,u){Array.isArray(c)&&(c[u]=[]);for(var m=/\\\w+\b/g,f=0,g,h=-1;g=m.exec(x);){switch(g[0]){case"\\cell":var p=x.slice(f,m.lastIndex-g[0].length);if(p[0]==" "&&(p=p.slice(1)),++h,p.length){var j={v:p,t:"s"};Array.isArray(c)?c[u][h]=j:c[Xe({r:u,c:h})]=j}break}f=m.lastIndex}h>d.e.c&&(d.e.c=h)}),c["!ref"]=ct(d),c}function a(n,i){return ur(t(n,i),i)}function r(n){for(var i=["{\\rtf1\\ansi"],l=Dt(n["!ref"]),c,o=Array.isArray(n),d=l.s.r;d<=l.e.r;++d){i.push("\\trowd\\trautofit1");for(var x=l.s.c;x<=l.e.c;++x)i.push("\\cellx"+(x+1));for(i.push("\\pard\\intbl"),x=l.s.c;x<=l.e.c;++x){var u=Xe({r:d,c:x});c=o?(n[d]||[])[x]:n[u],!(!c||c.v==null&&(!c.f||c.F))&&(i.push(" "+(c.w||(Wa(c),c.w))),i.push("\\cell"))}i.push("\\pard\\intbl\\row")}return i.join("")+"}"}return{to_workbook:a,to_sheet:t,from_sheet:r}}();function G1(t){var s=t.slice(t[0]==="#"?1:0).slice(0,6);return[parseInt(s.slice(0,2),16),parseInt(s.slice(2,4),16),parseInt(s.slice(4,6),16)]}function mi(t){for(var s=0,a=1;s!=3;++s)a=a*256+(t[s]>255?255:t[s]<0?0:t[s]);return a.toString(16).toUpperCase().slice(1)}function Y1(t){var s=t[0]/255,a=t[1]/255,r=t[2]/255,n=Math.max(s,a,r),i=Math.min(s,a,r),l=n-i;if(l===0)return[0,0,s];var c=0,o=0,d=n+i;switch(o=l/(d>1?2-d:d),n){case s:c=((a-r)/l+6)%6;break;case a:c=(r-s)/l+2;break;case r:c=(s-a)/l+4;break}return[c/6,o,d/2]}function Z1(t){var s=t[0],a=t[1],r=t[2],n=a*2*(r<.5?r:1-r),i=r-n/2,l=[i,i,i],c=6*s,o;if(a!==0)switch(c|0){case 0:case 6:o=n*c,l[0]+=n,l[1]+=o;break;case 1:o=n*(2-c),l[0]+=o,l[1]+=n;break;case 2:o=n*(c-2),l[1]+=n,l[2]+=o;break;case 3:o=n*(4-c),l[1]+=o,l[2]+=n;break;case 4:o=n*(c-4),l[2]+=n,l[0]+=o;break;case 5:o=n*(6-c),l[2]+=o,l[0]+=n;break}for(var d=0;d!=3;++d)l[d]=Math.round(l[d]*255);return l}function wl(t,s){if(s===0)return t;var a=Y1(G1(t));return s<0?a[2]=a[2]*(1+s):a[2]=1-(1-a[2])*(1-s),mi(Z1(a))}var hf=6,J1=15,X1=1,_s=hf;function kl(t){return Math.floor((t+Math.round(128/_s)/256)*_s)}function Sl(t){return Math.floor((t-5)/_s*100+.5)/100}function jo(t){return Math.round((t*_s+5)/_s*256)/256}function wc(t){return jo(Sl(kl(t)))}function kd(t){var s=Math.abs(t-wc(t)),a=_s;if(s>.005)for(_s=X1;_s<J1;++_s)Math.abs(t-wc(t))<=s&&(s=Math.abs(t-wc(t)),a=_s);_s=a}function vn(t){t.width?(t.wpx=kl(t.width),t.wch=Sl(t.wpx),t.MDW=_s):t.wpx?(t.wch=Sl(t.wpx),t.width=jo(t.wch),t.MDW=_s):typeof t.wch=="number"&&(t.width=jo(t.wch),t.wpx=kl(t.width),t.MDW=_s),t.customWidth&&delete t.customWidth}var K1=96,ff=K1;function pf(t){return t*96/ff}function hi(t){return t*ff/96}var Q1={None:"none",Solid:"solid",Gray50:"mediumGray",Gray75:"darkGray",Gray25:"lightGray",HorzStripe:"darkHorizontal",VertStripe:"darkVertical",ReverseDiagStripe:"darkDown",DiagStripe:"darkUp",DiagCross:"darkGrid",ThickDiagCross:"darkTrellis",ThinHorzStripe:"lightHorizontal",ThinVertStripe:"lightVertical",ThinReverseDiagStripe:"lightDown",ThinHorzCross:"lightGrid"};function e2(t,s,a,r){s.Borders=[];var n={},i=!1;(t[0].match(ks)||[]).forEach(function(l){var c=Ze(l);switch(Oa(c[0])){case"<borders":case"<borders>":case"</borders>":break;case"<border":case"<border>":case"<border/>":n={},c.diagonalUp&&(n.diagonalUp=Nt(c.diagonalUp)),c.diagonalDown&&(n.diagonalDown=Nt(c.diagonalDown)),s.Borders.push(n);break;case"</border>":break;case"<left/>":break;case"<left":case"<left>":break;case"</left>":break;case"<right/>":break;case"<right":case"<right>":break;case"</right>":break;case"<top/>":break;case"<top":case"<top>":break;case"</top>":break;case"<bottom/>":break;case"<bottom":case"<bottom>":break;case"</bottom>":break;case"<diagonal":case"<diagonal>":case"<diagonal/>":break;case"</diagonal>":break;case"<horizontal":case"<horizontal>":case"<horizontal/>":break;case"</horizontal>":break;case"<vertical":case"<vertical>":case"<vertical/>":break;case"</vertical>":break;case"<start":case"<start>":case"<start/>":break;case"</start>":break;case"<end":case"<end>":case"<end/>":break;case"</end>":break;case"<color":case"<color>":break;case"<color/>":case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":i=!0;break;case"</ext>":i=!1;break;default:if(r&&r.WTF&&!i)throw new Error("unrecognized "+c[0]+" in borders")}})}function t2(t,s,a,r){s.Fills=[];var n={},i=!1;(t[0].match(ks)||[]).forEach(function(l){var c=Ze(l);switch(Oa(c[0])){case"<fills":case"<fills>":case"</fills>":break;case"<fill>":case"<fill":case"<fill/>":n={},s.Fills.push(n);break;case"</fill>":break;case"<gradientFill>":break;case"<gradientFill":case"</gradientFill>":s.Fills.push(n),n={};break;case"<patternFill":case"<patternFill>":c.patternType&&(n.patternType=c.patternType);break;case"<patternFill/>":case"</patternFill>":break;case"<bgColor":n.bgColor||(n.bgColor={}),c.indexed&&(n.bgColor.indexed=parseInt(c.indexed,10)),c.theme&&(n.bgColor.theme=parseInt(c.theme,10)),c.tint&&(n.bgColor.tint=parseFloat(c.tint)),c.rgb&&(n.bgColor.rgb=c.rgb.slice(-6));break;case"<bgColor/>":case"</bgColor>":break;case"<fgColor":n.fgColor||(n.fgColor={}),c.theme&&(n.fgColor.theme=parseInt(c.theme,10)),c.tint&&(n.fgColor.tint=parseFloat(c.tint)),c.rgb!=null&&(n.fgColor.rgb=c.rgb.slice(-6));break;case"<fgColor/>":case"</fgColor>":break;case"<stop":case"<stop/>":break;case"</stop>":break;case"<color":case"<color/>":break;case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":i=!0;break;case"</ext>":i=!1;break;default:if(r&&r.WTF&&!i)throw new Error("unrecognized "+c[0]+" in fills")}})}function s2(t,s,a,r){s.Fonts=[];var n={},i=!1;(t[0].match(ks)||[]).forEach(function(l){var c=Ze(l);switch(Oa(c[0])){case"<fonts":case"<fonts>":case"</fonts>":break;case"<font":case"<font>":break;case"</font>":case"<font/>":s.Fonts.push(n),n={};break;case"<name":c.val&&(n.name=vt(c.val));break;case"<name/>":case"</name>":break;case"<b":n.bold=c.val?Nt(c.val):1;break;case"<b/>":n.bold=1;break;case"<i":n.italic=c.val?Nt(c.val):1;break;case"<i/>":n.italic=1;break;case"<u":switch(c.val){case"none":n.underline=0;break;case"single":n.underline=1;break;case"double":n.underline=2;break;case"singleAccounting":n.underline=33;break;case"doubleAccounting":n.underline=34;break}break;case"<u/>":n.underline=1;break;case"<strike":n.strike=c.val?Nt(c.val):1;break;case"<strike/>":n.strike=1;break;case"<outline":n.outline=c.val?Nt(c.val):1;break;case"<outline/>":n.outline=1;break;case"<shadow":n.shadow=c.val?Nt(c.val):1;break;case"<shadow/>":n.shadow=1;break;case"<condense":n.condense=c.val?Nt(c.val):1;break;case"<condense/>":n.condense=1;break;case"<extend":n.extend=c.val?Nt(c.val):1;break;case"<extend/>":n.extend=1;break;case"<sz":c.val&&(n.sz=+c.val);break;case"<sz/>":case"</sz>":break;case"<vertAlign":c.val&&(n.vertAlign=c.val);break;case"<vertAlign/>":case"</vertAlign>":break;case"<family":c.val&&(n.family=parseInt(c.val,10));break;case"<family/>":case"</family>":break;case"<scheme":c.val&&(n.scheme=c.val);break;case"<scheme/>":case"</scheme>":break;case"<charset":if(c.val=="1")break;c.codepage=id[parseInt(c.val,10)];break;case"<color":if(n.color||(n.color={}),c.auto&&(n.color.auto=Nt(c.auto)),c.rgb)n.color.rgb=c.rgb.slice(-6);else if(c.indexed){n.color.index=parseInt(c.indexed,10);var o=Er[n.color.index];n.color.index==81&&(o=Er[1]),o||(o=Er[1]),n.color.rgb=o[0].toString(16)+o[1].toString(16)+o[2].toString(16)}else c.theme&&(n.color.theme=parseInt(c.theme,10),c.tint&&(n.color.tint=parseFloat(c.tint)),c.theme&&a.themeElements&&a.themeElements.clrScheme&&(n.color.rgb=wl(a.themeElements.clrScheme[n.color.theme].rgb,n.color.tint||0)));break;case"<color/>":case"</color>":break;case"<AlternateContent":i=!0;break;case"</AlternateContent>":i=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":i=!0;break;case"</ext>":i=!1;break;default:if(r&&r.WTF&&!i)throw new Error("unrecognized "+c[0]+" in fonts")}})}function a2(t,s,a){s.NumberFmt=[];for(var r=Pa(et),n=0;n<r.length;++n)s.NumberFmt[r[n]]=et[r[n]];var i=t[0].match(ks);if(i)for(n=0;n<i.length;++n){var l=Ze(i[n]);switch(Oa(l[0])){case"<numFmts":case"</numFmts>":case"<numFmts/>":case"<numFmts>":break;case"<numFmt":{var c=dt(vt(l.formatCode)),o=parseInt(l.numFmtId,10);if(s.NumberFmt[o]=c,o>0){if(o>392){for(o=392;o>60&&s.NumberFmt[o]!=null;--o);s.NumberFmt[o]=c}Ar(c,o)}}break;case"</numFmt>":break;default:if(a.WTF)throw new Error("unrecognized "+l[0]+" in numFmts")}}}var Yi=["numFmtId","fillId","fontId","borderId","xfId"],Zi=["applyAlignment","applyBorder","applyFill","applyFont","applyNumberFormat","applyProtection","pivotButton","quotePrefix"];function r2(t,s,a){s.CellXf=[];var r,n=!1;(t[0].match(ks)||[]).forEach(function(i){var l=Ze(i),c=0;switch(Oa(l[0])){case"<cellXfs":case"<cellXfs>":case"<cellXfs/>":case"</cellXfs>":break;case"<xf":case"<xf/>":for(r=l,delete r[0],c=0;c<Yi.length;++c)r[Yi[c]]&&(r[Yi[c]]=parseInt(r[Yi[c]],10));for(c=0;c<Zi.length;++c)r[Zi[c]]&&(r[Zi[c]]=Nt(r[Zi[c]]));if(s.NumberFmt&&r.numFmtId>392){for(c=392;c>60;--c)if(s.NumberFmt[r.numFmtId]==s.NumberFmt[c]){r.numFmtId=c;break}}s.CellXf.push(r);break;case"</xf>":break;case"<alignment":case"<alignment/>":var o={};l.vertical&&(o.vertical=l.vertical),l.horizontal&&(o.horizontal=l.horizontal),l.textRotation!=null&&(o.textRotation=l.textRotation),l.indent&&(o.indent=l.indent),l.wrapText&&(o.wrapText=Nt(l.wrapText)),r.alignment=o;break;case"</alignment>":break;case"<protection":break;case"</protection>":case"<protection/>":break;case"<AlternateContent":n=!0;break;case"</AlternateContent>":n=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;default:if(a&&a.WTF&&!n)throw new Error("unrecognized "+l[0]+" in cellXfs")}})}var n2=function(){var s=/<(?:\w+:)?numFmts([^>]*)>[\S\s]*?<\/(?:\w+:)?numFmts>/,a=/<(?:\w+:)?cellXfs([^>]*)>[\S\s]*?<\/(?:\w+:)?cellXfs>/,r=/<(?:\w+:)?fills([^>]*)>[\S\s]*?<\/(?:\w+:)?fills>/,n=/<(?:\w+:)?fonts([^>]*)>[\S\s]*?<\/(?:\w+:)?fonts>/,i=/<(?:\w+:)?borders([^>]*)>[\S\s]*?<\/(?:\w+:)?borders>/;return function(c,o,d){var x={};if(!c)return x;c=c.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");var u;return(u=c.match(s))&&a2(u,x,d),(u=c.match(n))&&s2(u,x,o,d),(u=c.match(r))&&t2(u,x,o,d),(u=c.match(i))&&e2(u,x,o,d),(u=c.match(a))&&r2(u,x,d),x}}();function i2(t,s){var a=t.read_shift(2),r=Ns(t);return[a,r]}function l2(t,s,a){var r={};r.sz=t.read_shift(2)/20;var n=gN(t);n.fItalic&&(r.italic=1),n.fCondense&&(r.condense=1),n.fExtend&&(r.extend=1),n.fShadow&&(r.shadow=1),n.fOutline&&(r.outline=1),n.fStrikeout&&(r.strike=1);var i=t.read_shift(2);switch(i===700&&(r.bold=1),t.read_shift(2)){case 1:r.vertAlign="superscript";break;case 2:r.vertAlign="subscript";break}var l=t.read_shift(1);l!=0&&(r.underline=l);var c=t.read_shift(1);c>0&&(r.family=c);var o=t.read_shift(1);switch(o>0&&(r.charset=o),t.l++,r.color=pN(t),t.read_shift(1)){case 1:r.scheme="major";break;case 2:r.scheme="minor";break}return r.name=Ns(t),r}var c2=ws;function o2(t,s){var a=t.l+s,r=t.read_shift(2),n=t.read_shift(2);return t.l=a,{ixfe:r,numFmtId:n}}var d2=ws;function x2(t,s,a){var r={};r.NumberFmt=[];for(var n in et)r.NumberFmt[n]=et[n];r.CellXf=[],r.Fonts=[];var i=[],l=!1;return Ya(t,function(o,d,x){switch(x){case 44:r.NumberFmt[o[0]]=o[1],Ar(o[1],o[0]);break;case 43:r.Fonts.push(o),o.color.theme!=null&&s&&s.themeElements&&s.themeElements.clrScheme&&(o.color.rgb=wl(s.themeElements.clrScheme[o.color.theme].rgb,o.color.tint||0));break;case 1025:break;case 45:break;case 46:break;case 47:i[i.length-1]==617&&r.CellXf.push(o);break;case 48:case 507:case 572:case 475:break;case 1171:case 2102:case 1130:case 512:case 2095:case 3072:break;case 35:l=!0;break;case 36:l=!1;break;case 37:i.push(x),l=!0;break;case 38:i.pop(),l=!1;break;default:if(d.T>0)i.push(x);else if(d.T<0)i.pop();else if(!l||a.WTF&&i[i.length-1]!=37)throw new Error("Unexpected record 0x"+x.toString(16))}}),r}var u2=["</a:lt1>","</a:dk1>","</a:lt2>","</a:dk2>","</a:accent1>","</a:accent2>","</a:accent3>","</a:accent4>","</a:accent5>","</a:accent6>","</a:hlink>","</a:folHlink>"];function m2(t,s,a){s.themeElements.clrScheme=[];var r={};(t[0].match(ks)||[]).forEach(function(n){var i=Ze(n);switch(i[0]){case"<a:clrScheme":case"</a:clrScheme>":break;case"<a:srgbClr":r.rgb=i.val;break;case"<a:sysClr":r.rgb=i.lastClr;break;case"<a:dk1>":case"</a:dk1>":case"<a:lt1>":case"</a:lt1>":case"<a:dk2>":case"</a:dk2>":case"<a:lt2>":case"</a:lt2>":case"<a:accent1>":case"</a:accent1>":case"<a:accent2>":case"</a:accent2>":case"<a:accent3>":case"</a:accent3>":case"<a:accent4>":case"</a:accent4>":case"<a:accent5>":case"</a:accent5>":case"<a:accent6>":case"</a:accent6>":case"<a:hlink>":case"</a:hlink>":case"<a:folHlink>":case"</a:folHlink>":i[0].charAt(1)==="/"?(s.themeElements.clrScheme[u2.indexOf(i[0])]=r,r={}):r.name=i[0].slice(3,i[0].length-1);break;default:if(a&&a.WTF)throw new Error("Unrecognized "+i[0]+" in clrScheme")}})}function h2(){}function f2(){}var p2=/<a:clrScheme([^>]*)>[\s\S]*<\/a:clrScheme>/,g2=/<a:fontScheme([^>]*)>[\s\S]*<\/a:fontScheme>/,y2=/<a:fmtScheme([^>]*)>[\s\S]*<\/a:fmtScheme>/;function b2(t,s,a){s.themeElements={};var r;[["clrScheme",p2,m2],["fontScheme",g2,h2],["fmtScheme",y2,f2]].forEach(function(n){if(!(r=t.match(n[1])))throw new Error(n[0]+" not found in themeElements");n[2](r,s,a)})}var v2=/<a:themeElements([^>]*)>[\s\S]*<\/a:themeElements>/;function gf(t,s){(!t||t.length===0)&&(t=j2());var a,r={};if(!(a=t.match(v2)))throw new Error("themeElements not found in theme");return b2(a[0],r,s),r.raw=t,r}function j2(t,s){var a=[Ah];return a[a.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',a[a.length]="<a:themeElements>",a[a.length]='<a:clrScheme name="Office">',a[a.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',a[a.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',a[a.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',a[a.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',a[a.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',a[a.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',a[a.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',a[a.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',a[a.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',a[a.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',a[a.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',a[a.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',a[a.length]="</a:clrScheme>",a[a.length]='<a:fontScheme name="Office">',a[a.length]="<a:majorFont>",a[a.length]='<a:latin typeface="Cambria"/>',a[a.length]='<a:ea typeface=""/>',a[a.length]='<a:cs typeface=""/>',a[a.length]='<a:font script="Jpan" typeface="ï¼­ï¼³ ï¼°ã‚´ã‚·ãƒƒã‚¯"/>',a[a.length]='<a:font script="Hang" typeface="ë§‘ì€ ê³ ë”•"/>',a[a.length]='<a:font script="Hans" typeface="å®‹ä½“"/>',a[a.length]='<a:font script="Hant" typeface="æ–°ç´°æ˜Žé«”"/>',a[a.length]='<a:font script="Arab" typeface="Times New Roman"/>',a[a.length]='<a:font script="Hebr" typeface="Times New Roman"/>',a[a.length]='<a:font script="Thai" typeface="Tahoma"/>',a[a.length]='<a:font script="Ethi" typeface="Nyala"/>',a[a.length]='<a:font script="Beng" typeface="Vrinda"/>',a[a.length]='<a:font script="Gujr" typeface="Shruti"/>',a[a.length]='<a:font script="Khmr" typeface="MoolBoran"/>',a[a.length]='<a:font script="Knda" typeface="Tunga"/>',a[a.length]='<a:font script="Guru" typeface="Raavi"/>',a[a.length]='<a:font script="Cans" typeface="Euphemia"/>',a[a.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',a[a.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',a[a.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',a[a.length]='<a:font script="Thaa" typeface="MV Boli"/>',a[a.length]='<a:font script="Deva" typeface="Mangal"/>',a[a.length]='<a:font script="Telu" typeface="Gautami"/>',a[a.length]='<a:font script="Taml" typeface="Latha"/>',a[a.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',a[a.length]='<a:font script="Orya" typeface="Kalinga"/>',a[a.length]='<a:font script="Mlym" typeface="Kartika"/>',a[a.length]='<a:font script="Laoo" typeface="DokChampa"/>',a[a.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',a[a.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',a[a.length]='<a:font script="Viet" typeface="Times New Roman"/>',a[a.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',a[a.length]='<a:font script="Geor" typeface="Sylfaen"/>',a[a.length]="</a:majorFont>",a[a.length]="<a:minorFont>",a[a.length]='<a:latin typeface="Calibri"/>',a[a.length]='<a:ea typeface=""/>',a[a.length]='<a:cs typeface=""/>',a[a.length]='<a:font script="Jpan" typeface="ï¼­ï¼³ ï¼°ã‚´ã‚·ãƒƒã‚¯"/>',a[a.length]='<a:font script="Hang" typeface="ë§‘ì€ ê³ ë”•"/>',a[a.length]='<a:font script="Hans" typeface="å®‹ä½“"/>',a[a.length]='<a:font script="Hant" typeface="æ–°ç´°æ˜Žé«”"/>',a[a.length]='<a:font script="Arab" typeface="Arial"/>',a[a.length]='<a:font script="Hebr" typeface="Arial"/>',a[a.length]='<a:font script="Thai" typeface="Tahoma"/>',a[a.length]='<a:font script="Ethi" typeface="Nyala"/>',a[a.length]='<a:font script="Beng" typeface="Vrinda"/>',a[a.length]='<a:font script="Gujr" typeface="Shruti"/>',a[a.length]='<a:font script="Khmr" typeface="DaunPenh"/>',a[a.length]='<a:font script="Knda" typeface="Tunga"/>',a[a.length]='<a:font script="Guru" typeface="Raavi"/>',a[a.length]='<a:font script="Cans" typeface="Euphemia"/>',a[a.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',a[a.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',a[a.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',a[a.length]='<a:font script="Thaa" typeface="MV Boli"/>',a[a.length]='<a:font script="Deva" typeface="Mangal"/>',a[a.length]='<a:font script="Telu" typeface="Gautami"/>',a[a.length]='<a:font script="Taml" typeface="Latha"/>',a[a.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',a[a.length]='<a:font script="Orya" typeface="Kalinga"/>',a[a.length]='<a:font script="Mlym" typeface="Kartika"/>',a[a.length]='<a:font script="Laoo" typeface="DokChampa"/>',a[a.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',a[a.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',a[a.length]='<a:font script="Viet" typeface="Arial"/>',a[a.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',a[a.length]='<a:font script="Geor" typeface="Sylfaen"/>',a[a.length]="</a:minorFont>",a[a.length]="</a:fontScheme>",a[a.length]='<a:fmtScheme name="Office">',a[a.length]="<a:fillStyleLst>",a[a.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',a[a.length]='<a:gradFill rotWithShape="1">',a[a.length]="<a:gsLst>",a[a.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',a[a.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',a[a.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',a[a.length]="</a:gsLst>",a[a.length]='<a:lin ang="16200000" scaled="1"/>',a[a.length]="</a:gradFill>",a[a.length]='<a:gradFill rotWithShape="1">',a[a.length]="<a:gsLst>",a[a.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',a[a.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',a[a.length]="</a:gsLst>",a[a.length]='<a:lin ang="16200000" scaled="0"/>',a[a.length]="</a:gradFill>",a[a.length]="</a:fillStyleLst>",a[a.length]="<a:lnStyleLst>",a[a.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',a[a.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',a[a.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',a[a.length]="</a:lnStyleLst>",a[a.length]="<a:effectStyleLst>",a[a.length]="<a:effectStyle>",a[a.length]="<a:effectLst>",a[a.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',a[a.length]="</a:effectLst>",a[a.length]="</a:effectStyle>",a[a.length]="<a:effectStyle>",a[a.length]="<a:effectLst>",a[a.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',a[a.length]="</a:effectLst>",a[a.length]="</a:effectStyle>",a[a.length]="<a:effectStyle>",a[a.length]="<a:effectLst>",a[a.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',a[a.length]="</a:effectLst>",a[a.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',a[a.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',a[a.length]="</a:effectStyle>",a[a.length]="</a:effectStyleLst>",a[a.length]="<a:bgFillStyleLst>",a[a.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',a[a.length]='<a:gradFill rotWithShape="1">',a[a.length]="<a:gsLst>",a[a.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',a[a.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',a[a.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',a[a.length]="</a:gsLst>",a[a.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',a[a.length]="</a:gradFill>",a[a.length]='<a:gradFill rotWithShape="1">',a[a.length]="<a:gsLst>",a[a.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',a[a.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',a[a.length]="</a:gsLst>",a[a.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',a[a.length]="</a:gradFill>",a[a.length]="</a:bgFillStyleLst>",a[a.length]="</a:fmtScheme>",a[a.length]="</a:themeElements>",a[a.length]="<a:objectDefaults>",a[a.length]="<a:spDef>",a[a.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',a[a.length]="</a:spDef>",a[a.length]="<a:lnDef>",a[a.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',a[a.length]="</a:lnDef>",a[a.length]="</a:objectDefaults>",a[a.length]="<a:extraClrSchemeLst/>",a[a.length]="</a:theme>",a.join("")}function N2(t,s,a){var r=t.l+s,n=t.read_shift(4);if(n!==124226){if(!a.cellStyles){t.l=r;return}var i=t.slice(t.l);t.l=r;var l;try{l=Ch(i,{type:"array"})}catch{return}var c=Gs(l,"theme/theme/theme1.xml",!0);if(c)return gf(c,a)}}function w2(t){return t.read_shift(4)}function k2(t){var s={};switch(s.xclrType=t.read_shift(2),s.nTintShade=t.read_shift(2),s.xclrType){case 0:t.l+=4;break;case 1:s.xclrValue=S2(t,4);break;case 2:s.xclrValue=sf(t);break;case 3:s.xclrValue=w2(t);break;case 4:t.l+=4;break}return t.l+=8,s}function S2(t,s){return ws(t,s)}function C2(t,s){return ws(t,s)}function A2(t){var s=t.read_shift(2),a=t.read_shift(2)-4,r=[s];switch(s){case 4:case 5:case 7:case 8:case 9:case 10:case 11:case 13:r[1]=k2(t);break;case 6:r[1]=C2(t,a);break;case 14:case 15:r[1]=t.read_shift(a===1?1:2);break;default:throw new Error("Unrecognized ExtProp type: "+s+" "+a)}return r}function E2(t,s){var a=t.l+s;t.l+=2;var r=t.read_shift(2);t.l+=2;for(var n=t.read_shift(2),i=[];n-- >0;)i.push(A2(t,a-t.l));return{ixfe:r,ext:i}}function _2(t,s){s.forEach(function(a){switch(a[0]){}})}function F2(t,s){return{flags:t.read_shift(4),version:t.read_shift(4),name:Ns(t)}}function T2(t){for(var s=[],a=t.read_shift(4);a-- >0;)s.push([t.read_shift(4),t.read_shift(4)]);return s}function D2(t){return t.l+=4,t.read_shift(4)!=0}function R2(t,s,a){var r={Types:[],Cell:[],Value:[]},n=a||{},i=[],l=!1,c=2;return Ya(t,function(o,d,x){switch(x){case 335:r.Types.push({name:o.name});break;case 51:o.forEach(function(u){c==1?r.Cell.push({type:r.Types[u[0]-1].name,index:u[1]}):c==0&&r.Value.push({type:r.Types[u[0]-1].name,index:u[1]})});break;case 337:c=o?1:0;break;case 338:c=2;break;case 35:i.push(x),l=!0;break;case 36:i.pop(),l=!1;break;default:if(!d.T){if(!l||n.WTF&&i[i.length-1]!=35)throw new Error("Unexpected record 0x"+x.toString(16))}}}),r}function P2(t,s,a){var r={Types:[],Cell:[],Value:[]};if(!t)return r;var n=!1,i=2,l;return t.replace(ks,function(c){var o=Ze(c);switch(Oa(o[0])){case"<?xml":break;case"<metadata":case"</metadata>":break;case"<metadataTypes":case"</metadataTypes>":break;case"<metadataType":r.Types.push({name:o.name});break;case"</metadataType>":break;case"<futureMetadata":for(var d=0;d<r.Types.length;++d)r.Types[d].name==o.name&&(l=r.Types[d]);break;case"</futureMetadata>":break;case"<bk>":break;case"</bk>":break;case"<rc":i==1?r.Cell.push({type:r.Types[o.t-1].name,index:+o.v}):i==0&&r.Value.push({type:r.Types[o.t-1].name,index:+o.v});break;case"</rc>":break;case"<cellMetadata":i=1;break;case"</cellMetadata>":i=2;break;case"<valueMetadata":i=0;break;case"</valueMetadata>":i=2;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;case"<rvb":if(!l)break;l.offsets||(l.offsets=[]),l.offsets.push(+o.i);break;default:if(!n&&a.WTF)throw new Error("unrecognized "+o[0]+" in metadata")}return c}),r}function I2(t){var s=[];if(!t)return s;var a=1;return(t.match(ks)||[]).forEach(function(r){var n=Ze(r);switch(n[0]){case"<?xml":break;case"<calcChain":case"<calcChain>":case"</calcChain>":break;case"<c":delete n[0],n.i?a=n.i:n.i=a,s.push(n);break}}),s}function $2(t){var s={};s.i=t.read_shift(4);var a={};a.r=t.read_shift(4),a.c=t.read_shift(4),s.r=Xe(a);var r=t.read_shift(1);return r&2&&(s.l="1"),r&8&&(s.a="1"),s}function O2(t,s,a){var r=[];return Ya(t,function(i,l,c){switch(c){case 63:r.push(i);break;default:if(!l.T)throw new Error("Unexpected record 0x"+c.toString(16))}}),r}function L2(t,s,a,r){if(!t)return t;var n=r||{},i=!1;Ya(t,function(c,o,d){switch(d){case 359:case 363:case 364:case 366:case 367:case 368:case 369:case 370:case 371:case 472:case 577:case 578:case 579:case 580:case 581:case 582:case 583:case 584:case 585:case 586:case 587:break;case 35:i=!0;break;case 36:i=!1;break;default:if(!o.T){if(!i||n.WTF)throw new Error("Unexpected record 0x"+d.toString(16))}}},n)}function M2(t,s){if(!t)return"??";var a=(t.match(/<c:chart [^>]*r:id="([^"]*)"/)||["",""])[1];return s["!id"][a].Target}function ju(t,s,a,r){var n=Array.isArray(t),i;s.forEach(function(l){var c=Fs(l.ref);if(n?(t[c.r]||(t[c.r]=[]),i=t[c.r][c.c]):i=t[l.ref],!i){i={t:"z"},n?t[c.r][c.c]=i:t[l.ref]=i;var o=Dt(t["!ref"]||"BDWGO1000001:A1");o.s.r>c.r&&(o.s.r=c.r),o.e.r<c.r&&(o.e.r=c.r),o.s.c>c.c&&(o.s.c=c.c),o.e.c<c.c&&(o.e.c=c.c);var d=ct(o);d!==t["!ref"]&&(t["!ref"]=d)}i.c||(i.c=[]);var x={a:l.author,t:l.t,r:l.r,T:a};l.h&&(x.h=l.h);for(var u=i.c.length-1;u>=0;--u){if(!a&&i.c[u].T)return;a&&!i.c[u].T&&i.c.splice(u,1)}if(a&&r){for(u=0;u<r.length;++u)if(x.a==r[u].id){x.a=r[u].name||x.a;break}}i.c.push(x)})}function B2(t,s){if(t.match(/<(?:\w+:)?comments *\/>/))return[];var a=[],r=[],n=t.match(/<(?:\w+:)?authors>([\s\S]*)<\/(?:\w+:)?authors>/);n&&n[1]&&n[1].split(/<\/\w*:?author>/).forEach(function(l){if(!(l===""||l.trim()==="")){var c=l.match(/<(?:\w+:)?author[^>]*>(.*)/);c&&a.push(c[1])}});var i=t.match(/<(?:\w+:)?commentList>([\s\S]*)<\/(?:\w+:)?commentList>/);return i&&i[1]&&i[1].split(/<\/\w*:?comment>/).forEach(function(l){if(!(l===""||l.trim()==="")){var c=l.match(/<(?:\w+:)?comment[^>]*>/);if(c){var o=Ze(c[0]),d={author:o.authorId&&a[o.authorId]||"sheetjsghost",ref:o.ref,guid:o.guid},x=Fs(o.ref);if(!(s.sheetRows&&s.sheetRows<=x.r)){var u=l.match(/<(?:\w+:)?text>([\s\S]*)<\/(?:\w+:)?text>/),m=!!u&&!!u[1]&&wd(u[1])||{r:"",t:"",h:""};d.r=m.r,m.r=="<t></t>"&&(m.t=m.h=""),d.t=(m.t||"").replace(/\r\n/g,`
`).replace(/\r/g,`
`),s.cellHTML&&(d.h=m.h),r.push(d)}}}}),r}function z2(t,s){var a=[],r=!1,n={},i=0;return t.replace(ks,function(c,o){var d=Ze(c);switch(Oa(d[0])){case"<?xml":break;case"<ThreadedComments":break;case"</ThreadedComments>":break;case"<threadedComment":n={author:d.personId,guid:d.id,ref:d.ref,T:1};break;case"</threadedComment>":n.t!=null&&a.push(n);break;case"<text>":case"<text":i=o+c.length;break;case"</text>":n.t=t.slice(i,o).replace(/\r\n/g,`
`).replace(/\r/g,`
`);break;case"<mentions":case"<mentions>":r=!0;break;case"</mentions>":r=!1;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":r=!0;break;case"</ext>":r=!1;break;default:if(!r&&s.WTF)throw new Error("unrecognized "+d[0]+" in threaded comments")}return c}),a}function U2(t,s){var a=[],r=!1;return t.replace(ks,function(i){var l=Ze(i);switch(Oa(l[0])){case"<?xml":break;case"<personList":break;case"</personList>":break;case"<person":a.push({name:l.displayname,id:l.id});break;case"</person>":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":r=!0;break;case"</ext>":r=!1;break;default:if(!r&&s.WTF)throw new Error("unrecognized "+l[0]+" in threaded comments")}return i}),a}function V2(t){var s={};s.iauthor=t.read_shift(4);var a=Vr(t);return s.rfx=a.s,s.ref=Xe(a.s),t.l+=16,s}var H2=Ns;function q2(t,s){var a=[],r=[],n={},i=!1;return Ya(t,function(c,o,d){switch(d){case 632:r.push(c);break;case 635:n=c;break;case 637:n.t=c.t,n.h=c.h,n.r=c.r;break;case 636:if(n.author=r[n.iauthor],delete n.iauthor,s.sheetRows&&n.rfx&&s.sheetRows<=n.rfx.r)break;n.t||(n.t=""),delete n.rfx,a.push(n);break;case 3072:break;case 35:i=!0;break;case 36:i=!1;break;case 37:break;case 38:break;default:if(!o.T){if(!i||s.WTF)throw new Error("Unexpected record 0x"+d.toString(16))}}}),a}var W2="application/vnd.ms-office.vbaProject";function G2(t){var s=lt.utils.cfb_new({root:"R"});return t.FullPaths.forEach(function(a,r){if(!(a.slice(-1)==="/"||!a.match(/_VBA_PROJECT_CUR/))){var n=a.replace(/^[^\/]*/,"R").replace(/\/_VBA_PROJECT_CUR\u0000*/,"");lt.utils.cfb_add(s,n,t.FileIndex[r].content)}}),lt.write(s)}function Y2(){return{"!type":"dialog"}}function Z2(){return{"!type":"dialog"}}function J2(){return{"!type":"macro"}}function X2(){return{"!type":"macro"}}var on=function(){var t=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,s={r:0,c:0};function a(r,n,i,l){var c=!1,o=!1;i.length==0?o=!0:i.charAt(0)=="["&&(o=!0,i=i.slice(1,-1)),l.length==0?c=!0:l.charAt(0)=="["&&(c=!0,l=l.slice(1,-1));var d=i.length>0?parseInt(i,10)|0:0,x=l.length>0?parseInt(l,10)|0:0;return c?x+=s.c:--x,o?d+=s.r:--d,n+(c?"":"$")+Kt(x)+(o?"":"$")+ds(d)}return function(n,i){return s=i,n.replace(t,a)}}(),yf=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,K2=function(){return function(s,a){return s.replace(yf,function(r,n,i,l,c,o){var d=gd(l)-(i?0:a.c),x=pd(o)-(c?0:a.r),u=x==0?"":c?x+1:"["+x+"]",m=d==0?"":i?d+1:"["+d+"]";return n+"R"+u+"C"+m})}}();function bf(t,s){return t.replace(yf,function(a,r,n,i,l,c){return r+(n=="$"?n+i:Kt(gd(i)+s.c))+(l=="$"?l+c:ds(pd(c)+s.r))})}function Q2(t,s,a){var r=En(s),n=r.s,i=Fs(a),l={r:i.r-n.r,c:i.c-n.c};return bf(t,l)}function ek(t){return t.length!=1}function Nu(t){return t.replace(/_xlfn\./g,"")}function Bt(t){t.l+=1}function or(t,s){var a=t.read_shift(2);return[a&16383,a>>14&1,a>>15&1]}function vf(t,s,a){var r=2;if(a){if(a.biff>=2&&a.biff<=5)return jf(t);a.biff==12&&(r=4)}var n=t.read_shift(r),i=t.read_shift(r),l=or(t),c=or(t);return{s:{r:n,c:l[0],cRel:l[1],rRel:l[2]},e:{r:i,c:c[0],cRel:c[1],rRel:c[2]}}}function jf(t){var s=or(t),a=or(t),r=t.read_shift(1),n=t.read_shift(1);return{s:{r:s[0],c:r,cRel:s[1],rRel:s[2]},e:{r:a[0],c:n,cRel:a[1],rRel:a[2]}}}function tk(t,s,a){if(a.biff<8)return jf(t);var r=t.read_shift(a.biff==12?4:2),n=t.read_shift(a.biff==12?4:2),i=or(t),l=or(t);return{s:{r,c:i[0],cRel:i[1],rRel:i[2]},e:{r:n,c:l[0],cRel:l[1],rRel:l[2]}}}function Nf(t,s,a){if(a&&a.biff>=2&&a.biff<=5)return sk(t);var r=t.read_shift(a&&a.biff==12?4:2),n=or(t);return{r,c:n[0],cRel:n[1],rRel:n[2]}}function sk(t){var s=or(t),a=t.read_shift(1);return{r:s[0],c:a,cRel:s[1],rRel:s[2]}}function ak(t){var s=t.read_shift(2),a=t.read_shift(2);return{r:s,c:a&255,fQuoted:!!(a&16384),cRel:a>>15,rRel:a>>15}}function rk(t,s,a){var r=a&&a.biff?a.biff:8;if(r>=2&&r<=5)return nk(t);var n=t.read_shift(r>=12?4:2),i=t.read_shift(2),l=(i&16384)>>14,c=(i&32768)>>15;if(i&=16383,c==1)for(;n>524287;)n-=1048576;if(l==1)for(;i>8191;)i=i-16384;return{r:n,c:i,cRel:l,rRel:c}}function nk(t){var s=t.read_shift(2),a=t.read_shift(1),r=(s&32768)>>15,n=(s&16384)>>14;return s&=16383,r==1&&s>=8192&&(s=s-16384),n==1&&a>=128&&(a=a-256),{r:s,c:a,cRel:n,rRel:r}}function ik(t,s,a){var r=(t[t.l++]&96)>>5,n=vf(t,a.biff>=2&&a.biff<=5?6:8,a);return[r,n]}function lk(t,s,a){var r=(t[t.l++]&96)>>5,n=t.read_shift(2,"i"),i=8;if(a)switch(a.biff){case 5:t.l+=12,i=6;break;case 12:i=12;break}var l=vf(t,i,a);return[r,n,l]}function ck(t,s,a){var r=(t[t.l++]&96)>>5;return t.l+=a&&a.biff>8?12:a.biff<8?6:8,[r]}function ok(t,s,a){var r=(t[t.l++]&96)>>5,n=t.read_shift(2),i=8;if(a)switch(a.biff){case 5:t.l+=12,i=6;break;case 12:i=12;break}return t.l+=i,[r,n]}function dk(t,s,a){var r=(t[t.l++]&96)>>5,n=tk(t,s-1,a);return[r,n]}function xk(t,s,a){var r=(t[t.l++]&96)>>5;return t.l+=a.biff==2?6:a.biff==12?14:7,[r]}function wu(t){var s=t[t.l+1]&1,a=1;return t.l+=4,[s,a]}function uk(t,s,a){t.l+=2;for(var r=t.read_shift(a&&a.biff==2?1:2),n=[],i=0;i<=r;++i)n.push(t.read_shift(a&&a.biff==2?1:2));return n}function mk(t,s,a){var r=t[t.l+1]&255?1:0;return t.l+=2,[r,t.read_shift(a&&a.biff==2?1:2)]}function hk(t,s,a){var r=t[t.l+1]&255?1:0;return t.l+=2,[r,t.read_shift(a&&a.biff==2?1:2)]}function fk(t){var s=t[t.l+1]&255?1:0;return t.l+=2,[s,t.read_shift(2)]}function pk(t,s,a){var r=t[t.l+1]&255?1:0;return t.l+=a&&a.biff==2?3:4,[r]}function wf(t){var s=t.read_shift(1),a=t.read_shift(1);return[s,a]}function gk(t){return t.read_shift(2),wf(t)}function yk(t){return t.read_shift(2),wf(t)}function bk(t,s,a){var r=(t[t.l]&96)>>5;t.l+=1;var n=Nf(t,0,a);return[r,n]}function vk(t,s,a){var r=(t[t.l]&96)>>5;t.l+=1;var n=rk(t,0,a);return[r,n]}function jk(t,s,a){var r=(t[t.l]&96)>>5;t.l+=1;var n=t.read_shift(2);a&&a.biff==5&&(t.l+=12);var i=Nf(t,0,a);return[r,n,i]}function Nk(t,s,a){var r=(t[t.l]&96)>>5;t.l+=1;var n=t.read_shift(a&&a.biff<=3?1:2);return[w4[n],Cf[n],r]}function wk(t,s,a){var r=t[t.l++],n=t.read_shift(1),i=a&&a.biff<=3?[r==88?-1:0,t.read_shift(1)]:kk(t);return[n,(i[0]===0?Cf:N4)[i[1]]]}function kk(t){return[t[t.l+1]>>7,t.read_shift(2)&32767]}function Sk(t,s,a){t.l+=a&&a.biff==2?3:4}function Ck(t,s,a){if(t.l++,a&&a.biff==12)return[t.read_shift(4,"i"),0];var r=t.read_shift(2),n=t.read_shift(a&&a.biff==2?1:2);return[r,n]}function Ak(t){return t.l++,Hr[t.read_shift(1)]}function Ek(t){return t.l++,t.read_shift(2)}function _k(t){return t.l++,t.read_shift(1)!==0}function Fk(t){return t.l++,bs(t)}function Tk(t,s,a){return t.l++,_i(t,s-1,a)}function Dk(t,s){var a=[t.read_shift(1)];if(s==12)switch(a[0]){case 2:a[0]=4;break;case 4:a[0]=16;break;case 0:a[0]=1;break;case 1:a[0]=2;break}switch(a[0]){case 4:a[1]=$t(t,1)?"TRUE":"FALSE",s!=12&&(t.l+=7);break;case 37:case 16:a[1]=Hr[t[t.l]],t.l+=s==12?4:8;break;case 0:t.l+=8;break;case 1:a[1]=bs(t);break;case 2:a[1]=qr(t,0,{biff:s>0&&s<8?2:s});break;default:throw new Error("Bad SerAr: "+a[0])}return a}function Rk(t,s,a){for(var r=t.read_shift(a.biff==12?4:2),n=[],i=0;i!=r;++i)n.push((a.biff==12?Vr:Zl)(t));return n}function Pk(t,s,a){var r=0,n=0;a.biff==12?(r=t.read_shift(4),n=t.read_shift(4)):(n=1+t.read_shift(1),r=1+t.read_shift(2)),a.biff>=2&&a.biff<8&&(--r,--n==0&&(n=256));for(var i=0,l=[];i!=r&&(l[i]=[]);++i)for(var c=0;c!=n;++c)l[i][c]=Dk(t,a.biff);return l}function Ik(t,s,a){var r=t.read_shift(1)>>>5&3,n=!a||a.biff>=8?4:2,i=t.read_shift(n);switch(a.biff){case 2:t.l+=5;break;case 3:case 4:t.l+=8;break;case 5:t.l+=12;break}return[r,0,i]}function $k(t,s,a){if(a.biff==5)return Ok(t);var r=t.read_shift(1)>>>5&3,n=t.read_shift(2),i=t.read_shift(4);return[r,n,i]}function Ok(t){var s=t.read_shift(1)>>>5&3,a=t.read_shift(2,"i");t.l+=8;var r=t.read_shift(2);return t.l+=12,[s,a,r]}function Lk(t,s,a){var r=t.read_shift(1)>>>5&3;t.l+=a&&a.biff==2?3:4;var n=t.read_shift(a&&a.biff==2?1:2);return[r,n]}function Mk(t,s,a){var r=t.read_shift(1)>>>5&3,n=t.read_shift(a&&a.biff==2?1:2);return[r,n]}function Bk(t,s,a){var r=t.read_shift(1)>>>5&3;return t.l+=4,a.biff<8&&t.l--,a.biff==12&&(t.l+=2),[r]}function zk(t,s,a){var r=(t[t.l++]&96)>>5,n=t.read_shift(2),i=4;if(a)switch(a.biff){case 5:i=15;break;case 12:i=6;break}return t.l+=i,[r,n]}var Uk=ws,Vk=ws,Hk=ws;function Ti(t,s,a){return t.l+=2,[ak(t)]}function Sd(t){return t.l+=6,[]}var qk=Ti,Wk=Sd,Gk=Sd,Yk=Ti;function kf(t){return t.l+=2,[Ut(t),t.read_shift(2)&1]}var Zk=Ti,Jk=kf,Xk=Sd,Kk=Ti,Qk=Ti,e4=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];function t4(t){t.l+=2;var s=t.read_shift(2),a=t.read_shift(2),r=t.read_shift(4),n=t.read_shift(2),i=t.read_shift(2),l=e4[a>>2&31];return{ixti:s,coltype:a&3,rt:l,idx:r,c:n,C:i}}function s4(t){return t.l+=2,[t.read_shift(4)]}function a4(t,s,a){return t.l+=5,t.l+=2,t.l+=a.biff==2?1:4,["PTGSHEET"]}function r4(t,s,a){return t.l+=a.biff==2?4:5,["PTGENDSHEET"]}function n4(t){var s=t.read_shift(1)>>>5&3,a=t.read_shift(2);return[s,a]}function i4(t){var s=t.read_shift(1)>>>5&3,a=t.read_shift(2);return[s,a]}function l4(t){return t.l+=4,[0,0]}var ku={1:{n:"PtgExp",f:Ck},2:{n:"PtgTbl",f:Hk},3:{n:"PtgAdd",f:Bt},4:{n:"PtgSub",f:Bt},5:{n:"PtgMul",f:Bt},6:{n:"PtgDiv",f:Bt},7:{n:"PtgPower",f:Bt},8:{n:"PtgConcat",f:Bt},9:{n:"PtgLt",f:Bt},10:{n:"PtgLe",f:Bt},11:{n:"PtgEq",f:Bt},12:{n:"PtgGe",f:Bt},13:{n:"PtgGt",f:Bt},14:{n:"PtgNe",f:Bt},15:{n:"PtgIsect",f:Bt},16:{n:"PtgUnion",f:Bt},17:{n:"PtgRange",f:Bt},18:{n:"PtgUplus",f:Bt},19:{n:"PtgUminus",f:Bt},20:{n:"PtgPercent",f:Bt},21:{n:"PtgParen",f:Bt},22:{n:"PtgMissArg",f:Bt},23:{n:"PtgStr",f:Tk},26:{n:"PtgSheet",f:a4},27:{n:"PtgEndSheet",f:r4},28:{n:"PtgErr",f:Ak},29:{n:"PtgBool",f:_k},30:{n:"PtgInt",f:Ek},31:{n:"PtgNum",f:Fk},32:{n:"PtgArray",f:xk},33:{n:"PtgFunc",f:Nk},34:{n:"PtgFuncVar",f:wk},35:{n:"PtgName",f:Ik},36:{n:"PtgRef",f:bk},37:{n:"PtgArea",f:ik},38:{n:"PtgMemArea",f:Lk},39:{n:"PtgMemErr",f:Uk},40:{n:"PtgMemNoMem",f:Vk},41:{n:"PtgMemFunc",f:Mk},42:{n:"PtgRefErr",f:Bk},43:{n:"PtgAreaErr",f:ck},44:{n:"PtgRefN",f:vk},45:{n:"PtgAreaN",f:dk},46:{n:"PtgMemAreaN",f:n4},47:{n:"PtgMemNoMemN",f:i4},57:{n:"PtgNameX",f:$k},58:{n:"PtgRef3d",f:jk},59:{n:"PtgArea3d",f:lk},60:{n:"PtgRefErr3d",f:zk},61:{n:"PtgAreaErr3d",f:ok},255:{}},c4={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},o4={1:{n:"PtgElfLel",f:kf},2:{n:"PtgElfRw",f:Kk},3:{n:"PtgElfCol",f:qk},6:{n:"PtgElfRwV",f:Qk},7:{n:"PtgElfColV",f:Yk},10:{n:"PtgElfRadical",f:Zk},11:{n:"PtgElfRadicalS",f:Xk},13:{n:"PtgElfColS",f:Wk},15:{n:"PtgElfColSV",f:Gk},16:{n:"PtgElfRadicalLel",f:Jk},25:{n:"PtgList",f:t4},29:{n:"PtgSxName",f:s4},255:{}},d4={0:{n:"PtgAttrNoop",f:l4},1:{n:"PtgAttrSemi",f:pk},2:{n:"PtgAttrIf",f:hk},4:{n:"PtgAttrChoose",f:uk},8:{n:"PtgAttrGoto",f:mk},16:{n:"PtgAttrSum",f:Sk},32:{n:"PtgAttrBaxcel",f:wu},33:{n:"PtgAttrBaxcel",f:wu},64:{n:"PtgAttrSpace",f:gk},65:{n:"PtgAttrSpaceSemi",f:yk},128:{n:"PtgAttrIfError",f:fk},255:{}};function Di(t,s,a,r){if(r.biff<8)return ws(t,s);for(var n=t.l+s,i=[],l=0;l!==a.length;++l)switch(a[l][0]){case"PtgArray":a[l][1]=Pk(t,0,r),i.push(a[l][1]);break;case"PtgMemArea":a[l][2]=Rk(t,a[l][1],r),i.push(a[l][2]);break;case"PtgExp":r&&r.biff==12&&(a[l][1][1]=t.read_shift(4),i.push(a[l][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+a[l][0]}return s=n-t.l,s!==0&&i.push(ws(t,s)),i}function Ri(t,s,a){for(var r=t.l+s,n,i,l=[];r!=t.l;)s=r-t.l,i=t[t.l],n=ku[i]||ku[c4[i]],(i===24||i===25)&&(n=(i===24?o4:d4)[t[t.l+1]]),!n||!n.f?ws(t,s):l.push([n.n,n.f(t,s,a)]);return l}function x4(t){for(var s=[],a=0;a<t.length;++a){for(var r=t[a],n=[],i=0;i<r.length;++i){var l=r[i];if(l)switch(l[0]){case 2:n.push('"'+l[1].replace(/"/g,'""')+'"');break;default:n.push(l[1])}else n.push("")}s.push(n.join(","))}return s.join(";")}var u4={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function m4(t,s){if(!t&&!(s&&s.biff<=5&&s.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(t)?"'"+t+"'":t}function Sf(t,s,a){if(!t)return"SH33TJSERR0";if(a.biff>8&&(!t.XTI||!t.XTI[s]))return t.SheetNames[s];if(!t.XTI)return"SH33TJSERR6";var r=t.XTI[s];if(a.biff<8)return s>1e4&&(s-=65536),s<0&&(s=-s),s==0?"":t.XTI[s-1];if(!r)return"SH33TJSERR1";var n="";if(a.biff>8)switch(t[r[0]][0]){case 357:return n=r[1]==-1?"#REF":t.SheetNames[r[1]],r[1]==r[2]?n:n+":"+t.SheetNames[r[2]];case 358:return a.SID!=null?t.SheetNames[a.SID]:"SH33TJSSAME"+t[r[0]][0];case 355:default:return"SH33TJSSRC"+t[r[0]][0]}switch(t[r[0]][0][0]){case 1025:return n=r[1]==-1?"#REF":t.SheetNames[r[1]]||"SH33TJSERR3",r[1]==r[2]?n:n+":"+t.SheetNames[r[2]];case 14849:return t[r[0]].slice(1).map(function(i){return i.Name}).join(";;");default:return t[r[0]][0][3]?(n=r[1]==-1?"#REF":t[r[0]][0][3][r[1]]||"SH33TJSERR4",r[1]==r[2]?n:n+":"+t[r[0]][0][3][r[2]]):"SH33TJSERR2"}}function Su(t,s,a){var r=Sf(t,s,a);return r=="#REF"?r:m4(r,a)}function gs(t,s,a,r,n){var i=n&&n.biff||8,l={s:{c:0,r:0}},c=[],o,d,x,u=0,m=0,f,g="";if(!t[0]||!t[0][0])return"";for(var h=-1,p="",j=0,v=t[0].length;j<v;++j){var w=t[0][j];switch(w[0]){case"PtgUminus":c.push("-"+c.pop());break;case"PtgUplus":c.push("+"+c.pop());break;case"PtgPercent":c.push(c.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(o=c.pop(),d=c.pop(),h>=0){switch(t[0][h][1][0]){case 0:p=Tt(" ",t[0][h][1][1]);break;case 1:p=Tt("\r",t[0][h][1][1]);break;default:if(p="",n.WTF)throw new Error("Unexpected PtgAttrSpaceType "+t[0][h][1][0])}d=d+p,h=-1}c.push(d+u4[w[0]]+o);break;case"PtgIsect":o=c.pop(),d=c.pop(),c.push(d+" "+o);break;case"PtgUnion":o=c.pop(),d=c.pop(),c.push(d+","+o);break;case"PtgRange":o=c.pop(),d=c.pop(),c.push(d+":"+o);break;case"PtgAttrChoose":break;case"PtgAttrGoto":break;case"PtgAttrIf":break;case"PtgAttrIfError":break;case"PtgRef":x=Zn(w[1][1],l,n),c.push(Jn(x,i));break;case"PtgRefN":x=a?Zn(w[1][1],a,n):w[1][1],c.push(Jn(x,i));break;case"PtgRef3d":u=w[1][1],x=Zn(w[1][2],l,n),g=Su(r,u,n),c.push(g+"!"+Jn(x,i));break;case"PtgFunc":case"PtgFuncVar":var b=w[1][0],A=w[1][1];b||(b=0),b&=127;var N=b==0?[]:c.slice(-b);c.length-=b,A==="User"&&(A=N.shift()),c.push(A+"("+N.join(",")+")");break;case"PtgBool":c.push(w[1]?"TRUE":"FALSE");break;case"PtgInt":c.push(w[1]);break;case"PtgNum":c.push(String(w[1]));break;case"PtgStr":c.push('"'+w[1].replace(/"/g,'""')+'"');break;case"PtgErr":c.push(w[1]);break;case"PtgAreaN":f=nu(w[1][1],a?{s:a}:l,n),c.push(jc(f,n));break;case"PtgArea":f=nu(w[1][1],l,n),c.push(jc(f,n));break;case"PtgArea3d":u=w[1][1],f=w[1][2],g=Su(r,u,n),c.push(g+"!"+jc(f,n));break;case"PtgAttrSum":c.push("SUM("+c.pop()+")");break;case"PtgAttrBaxcel":case"PtgAttrSemi":break;case"PtgName":m=w[1][2];var C=(r.names||[])[m-1]||(r[0]||[])[m],k=C?C.Name:"SH33TJSNAME"+String(m);k&&k.slice(0,6)=="_xlfn."&&!n.xlfn&&(k=k.slice(6)),c.push(k);break;case"PtgNameX":var S=w[1][1];m=w[1][2];var F;if(n.biff<=5)S<0&&(S=-S),r[S]&&(F=r[S][m]);else{var R="";if(((r[S]||[])[0]||[])[0]==14849||(((r[S]||[])[0]||[])[0]==1025?r[S][m]&&r[S][m].itab>0&&(R=r.SheetNames[r[S][m].itab-1]+"!"):R=r.SheetNames[m-1]+"!"),r[S]&&r[S][m])R+=r[S][m].Name;else if(r[0]&&r[0][m])R+=r[0][m].Name;else{var T=(Sf(r,S,n)||"").split(";;");T[m-1]?R=T[m-1]:R+="SH33TJSERRX"}c.push(R);break}F||(F={Name:"SH33TJSERRY"}),c.push(F.Name);break;case"PtgParen":var M="(",H=")";if(h>=0){switch(p="",t[0][h][1][0]){case 2:M=Tt(" ",t[0][h][1][1])+M;break;case 3:M=Tt("\r",t[0][h][1][1])+M;break;case 4:H=Tt(" ",t[0][h][1][1])+H;break;case 5:H=Tt("\r",t[0][h][1][1])+H;break;default:if(n.WTF)throw new Error("Unexpected PtgAttrSpaceType "+t[0][h][1][0])}h=-1}c.push(M+c.pop()+H);break;case"PtgRefErr":c.push("#REF!");break;case"PtgRefErr3d":c.push("#REF!");break;case"PtgExp":x={c:w[1][1],r:w[1][0]};var U={c:a.c,r:a.r};if(r.sharedf[Xe(x)]){var W=r.sharedf[Xe(x)];c.push(gs(W,l,U,r,n))}else{var se=!1;for(o=0;o!=r.arrayf.length;++o)if(d=r.arrayf[o],!(x.c<d[0].s.c||x.c>d[0].e.c)&&!(x.r<d[0].s.r||x.r>d[0].e.r)){c.push(gs(d[1],l,U,r,n)),se=!0;break}se||c.push(w[1])}break;case"PtgArray":c.push("{"+x4(w[1])+"}");break;case"PtgMemArea":break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":h=j;break;case"PtgTbl":break;case"PtgMemErr":break;case"PtgMissArg":c.push("");break;case"PtgAreaErr":c.push("#REF!");break;case"PtgAreaErr3d":c.push("#REF!");break;case"PtgList":c.push("Table"+w[1].idx+"[#"+w[1].rt+"]");break;case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":break;case"PtgMemFunc":break;case"PtgMemNoMem":break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");case"PtgSxName":throw new Error("Unrecognized Formula Token: "+String(w));default:throw new Error("Unrecognized Formula Token: "+String(w))}var X=["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"];if(n.biff!=3&&h>=0&&X.indexOf(t[0][j][0])==-1){w=t[0][h];var D=!0;switch(w[1][0]){case 4:D=!1;case 0:p=Tt(" ",w[1][1]);break;case 5:D=!1;case 1:p=Tt("\r",w[1][1]);break;default:if(p="",n.WTF)throw new Error("Unexpected PtgAttrSpaceType "+w[1][0])}c.push((D?p:"")+c.pop()+(D?"":p)),h=-1}}if(c.length>1&&n.WTF)throw new Error("bad formula stack");return c[0]}function h4(t,s,a){var r=t.l+s,n=a.biff==2?1:2,i,l=t.read_shift(n);if(l==65535)return[[],ws(t,s-2)];var c=Ri(t,l,a);return s!==l+n&&(i=Di(t,s-l-n,c,a)),t.l=r,[c,i]}function f4(t,s,a){var r=t.l+s,n=a.biff==2?1:2,i,l=t.read_shift(n);if(l==65535)return[[],ws(t,s-2)];var c=Ri(t,l,a);return s!==l+n&&(i=Di(t,s-l-n,c,a)),t.l=r,[c,i]}function p4(t,s,a,r){var n=t.l+s,i=Ri(t,r,a),l;return n!==t.l&&(l=Di(t,n-t.l,i,a)),[i,l]}function g4(t,s,a){var r=t.l+s,n,i=t.read_shift(2),l=Ri(t,i,a);return i==65535?[[],ws(t,s-2)]:(s!==i+2&&(n=Di(t,r-i-2,l,a)),[l,n])}function y4(t){var s;if(Ua(t,t.l+6)!==65535)return[bs(t),"n"];switch(t[t.l]){case 0:return t.l+=8,["String","s"];case 1:return s=t[t.l+2]===1,t.l+=8,[s,"b"];case 2:return s=t[t.l+2],t.l+=8,[s,"e"];case 3:return t.l+=8,["","s"]}return[]}function kc(t,s,a){var r=t.l+s,n=La(t);a.biff==2&&++t.l;var i=y4(t),l=t.read_shift(1);a.biff!=2&&(t.read_shift(1),a.biff>=5&&t.read_shift(4));var c=f4(t,r-t.l,a);return{cell:n,val:i[0],formula:c,shared:l>>3&1,tt:i[1]}}function Jl(t,s,a){var r=t.read_shift(4),n=Ri(t,r,a),i=t.read_shift(4),l=i>0?Di(t,i,n,a):null;return[n,l]}var b4=Jl,Xl=Jl,v4=Jl,j4=Jl,N4={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},Cf={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},w4={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function Cu(t){return t.slice(0,3)=="of:"&&(t=t.slice(3)),t.charCodeAt(0)==61&&(t=t.slice(1),t.charCodeAt(0)==61&&(t=t.slice(1))),t=t.replace(/COM\.MICROSOFT\./g,""),t=t.replace(/\[((?:\.[A-Z]+[0-9]+)(?::\.[A-Z]+[0-9]+)?)\]/g,function(s,a){return a.replace(/\./g,"")}),t=t.replace(/\[.(#[A-Z]*[?!])\]/g,"$1"),t.replace(/[;~]/g,",").replace(/\|/g,";")}function Sc(t){var s=t.split(":"),a=s[0].split(".")[0];return[a,s[0].split(".")[1]+(s.length>1?":"+(s[1].split(".")[1]||s[1].split(".")[0]):"")]}var ei={},dn={};function ti(t,s){if(t){var a=[.7,.7,.75,.75,.3,.3];s=="xlml"&&(a=[1,1,1,1,.5,.5]),t.left==null&&(t.left=a[0]),t.right==null&&(t.right=a[1]),t.top==null&&(t.top=a[2]),t.bottom==null&&(t.bottom=a[3]),t.header==null&&(t.header=a[4]),t.footer==null&&(t.footer=a[5])}}function Af(t,s,a,r,n,i){try{r.cellNF&&(t.z=et[s])}catch(c){if(r.WTF)throw c}if(!(t.t==="z"&&!r.cellStyles)){if(t.t==="d"&&typeof t.v=="string"&&(t.v=ls(t.v)),(!r||r.cellText!==!1)&&t.t!=="z")try{if(et[s]==null&&Ar(kj[s]||"General",s),t.t==="e")t.w=t.w||Hr[t.v];else if(s===0)if(t.t==="n")(t.v|0)===t.v?t.w=t.v.toString(10):t.w=oi(t.v);else if(t.t==="d"){var l=Ds(t.v);(l|0)===l?t.w=l.toString(10):t.w=oi(l)}else{if(t.v===void 0)return"";t.w=Pr(t.v,dn)}else t.t==="d"?t.w=na(s,Ds(t.v),dn):t.w=na(s,t.v,dn)}catch(c){if(r.WTF)throw c}if(r.cellStyles&&a!=null)try{t.s=i.Fills[a],t.s.fgColor&&t.s.fgColor.theme&&!t.s.fgColor.rgb&&(t.s.fgColor.rgb=wl(n.themeElements.clrScheme[t.s.fgColor.theme].rgb,t.s.fgColor.tint||0),r.WTF&&(t.s.fgColor.raw_rgb=n.themeElements.clrScheme[t.s.fgColor.theme].rgb)),t.s.bgColor&&t.s.bgColor.theme&&(t.s.bgColor.rgb=wl(n.themeElements.clrScheme[t.s.bgColor.theme].rgb,t.s.bgColor.tint||0),r.WTF&&(t.s.bgColor.raw_rgb=n.themeElements.clrScheme[t.s.bgColor.theme].rgb))}catch(c){if(r.WTF&&i.Fills)throw c}}}function k4(t,s){var a=Dt(s);a.s.r<=a.e.r&&a.s.c<=a.e.c&&a.s.r>=0&&a.s.c>=0&&(t["!ref"]=ct(a))}var S4=/<(?:\w:)?mergeCell ref="[A-Z0-9:]+"\s*[\/]?>/g,C4=/<(?:\w+:)?sheetData[^>]*>([\s\S]*)<\/(?:\w+:)?sheetData>/,A4=/<(?:\w:)?hyperlink [^>]*>/mg,E4=/"(\w*:\w*)"/,_4=/<(?:\w:)?col\b[^>]*[\/]?>/g,F4=/<(?:\w:)?autoFilter[^>]*([\/]|>([\s\S]*)<\/(?:\w:)?autoFilter)>/g,T4=/<(?:\w:)?pageMargins[^>]*\/>/g,Ef=/<(?:\w:)?sheetPr\b(?:[^>a-z][^>]*)?\/>/,D4=/<(?:\w:)?sheetPr[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetPr)>/,R4=/<(?:\w:)?sheetViews[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetViews)>/;function P4(t,s,a,r,n,i,l){if(!t)return t;r||(r={"!id":{}});var c=s.dense?[]:{},o={s:{r:2e6,c:2e6},e:{r:0,c:0}},d="",x="",u=t.match(C4);u?(d=t.slice(0,u.index),x=t.slice(u.index+u[0].length)):d=x=t;var m=d.match(Ef);m?Cd(m[0],c,n,a):(m=d.match(D4))&&I4(m[0],m[1]||"",c,n,a);var f=(d.match(/<(?:\w*:)?dimension/)||{index:-1}).index;if(f>0){var g=d.slice(f,f+50).match(E4);g&&k4(c,g[1])}var h=d.match(R4);h&&h[1]&&z4(h[1],n);var p=[];if(s.cellStyles){var j=d.match(_4);j&&L4(p,j)}u&&U4(u[1],c,s,o,i,l);var v=x.match(F4);v&&(c["!autofilter"]=M4(v[0]));var w=[],b=x.match(S4);if(b)for(f=0;f!=b.length;++f)w[f]=Dt(b[f].slice(b[f].indexOf('"')+1));var A=x.match(A4);A&&$4(c,A,r);var N=x.match(T4);if(N&&(c["!margins"]=O4(Ze(N[0]))),!c["!ref"]&&o.e.c>=o.s.c&&o.e.r>=o.s.r&&(c["!ref"]=ct(o)),s.sheetRows>0&&c["!ref"]){var C=Dt(c["!ref"]);s.sheetRows<=+C.e.r&&(C.e.r=s.sheetRows-1,C.e.r>o.e.r&&(C.e.r=o.e.r),C.e.r<C.s.r&&(C.s.r=C.e.r),C.e.c>o.e.c&&(C.e.c=o.e.c),C.e.c<C.s.c&&(C.s.c=C.e.c),c["!fullref"]=c["!ref"],c["!ref"]=ct(C))}return p.length>0&&(c["!cols"]=p),w.length>0&&(c["!merges"]=w),c}function Cd(t,s,a,r){var n=Ze(t);a.Sheets[r]||(a.Sheets[r]={}),n.codeName&&(a.Sheets[r].CodeName=dt(vt(n.codeName)))}function I4(t,s,a,r,n){Cd(t.slice(0,t.indexOf(">")),a,r,n)}function $4(t,s,a){for(var r=Array.isArray(t),n=0;n!=s.length;++n){var i=Ze(vt(s[n]),!0);if(!i.ref)return;var l=((a||{})["!id"]||[])[i.id];l?(i.Target=l.Target,i.location&&(i.Target+="#"+dt(i.location))):(i.Target="#"+dt(i.location),l={Target:i.Target,TargetMode:"Internal"}),i.Rel=l,i.tooltip&&(i.Tooltip=i.tooltip,delete i.tooltip);for(var c=Dt(i.ref),o=c.s.r;o<=c.e.r;++o)for(var d=c.s.c;d<=c.e.c;++d){var x=Xe({c:d,r:o});r?(t[o]||(t[o]=[]),t[o][d]||(t[o][d]={t:"z",v:void 0}),t[o][d].l=i):(t[x]||(t[x]={t:"z",v:void 0}),t[x].l=i)}}}function O4(t){var s={};return["left","right","top","bottom","header","footer"].forEach(function(a){t[a]&&(s[a]=parseFloat(t[a]))}),s}function L4(t,s){for(var a=!1,r=0;r!=s.length;++r){var n=Ze(s[r],!0);n.hidden&&(n.hidden=Nt(n.hidden));var i=parseInt(n.min,10)-1,l=parseInt(n.max,10)-1;for(n.outlineLevel&&(n.level=+n.outlineLevel||0),delete n.min,delete n.max,n.width=+n.width,!a&&n.width&&(a=!0,kd(n.width)),vn(n);i<=l;)t[i++]=os(n)}}function M4(t){var s={ref:(t.match(/ref="([^"]*)"/)||[])[1]};return s}var B4=/<(?:\w:)?sheetView(?:[^>a-z][^>]*)?\/?>/;function z4(t,s){s.Views||(s.Views=[{}]),(t.match(B4)||[]).forEach(function(a,r){var n=Ze(a);s.Views[r]||(s.Views[r]={}),+n.zoomScale&&(s.Views[r].zoom=+n.zoomScale),Nt(n.rightToLeft)&&(s.Views[r].RTL=!0)})}var U4=function(){var t=/<(?:\w+:)?c[ \/>]/,s=/<\/(?:\w+:)?row>/,a=/r=["']([^"']*)["']/,r=/<(?:\w+:)?is>([\S\s]*?)<\/(?:\w+:)?is>/,n=/ref=["']([^"']*)["']/,i=di("v"),l=di("f");return function(o,d,x,u,m,f){for(var g=0,h="",p=[],j=[],v=0,w=0,b=0,A="",N,C,k=0,S=0,F,R,T=0,M=0,H=Array.isArray(f.CellXf),U,W=[],se=[],X=Array.isArray(d),D=[],le={},de=!1,E=!!x.sheetStubs,z=o.split(s),O=0,P=z.length;O!=P;++O){h=z[O].trim();var Z=h.length;if(Z!==0){var re=0;e:for(g=0;g<Z;++g)switch(h[g]){case">":if(h[g-1]!="/"){++g;break e}if(x&&x.cellStyles){if(C=Ze(h.slice(re,g),!0),k=C.r!=null?parseInt(C.r,10):k+1,S=-1,x.sheetRows&&x.sheetRows<k)continue;le={},de=!1,C.ht&&(de=!0,le.hpt=parseFloat(C.ht),le.hpx=hi(le.hpt)),C.hidden=="1"&&(de=!0,le.hidden=!0),C.outlineLevel!=null&&(de=!0,le.level=+C.outlineLevel),de&&(D[k-1]=le)}break;case"<":re=g;break}if(re>=g)break;if(C=Ze(h.slice(re,g),!0),k=C.r!=null?parseInt(C.r,10):k+1,S=-1,!(x.sheetRows&&x.sheetRows<k)){u.s.r>k-1&&(u.s.r=k-1),u.e.r<k-1&&(u.e.r=k-1),x&&x.cellStyles&&(le={},de=!1,C.ht&&(de=!0,le.hpt=parseFloat(C.ht),le.hpx=hi(le.hpt)),C.hidden=="1"&&(de=!0,le.hidden=!0),C.outlineLevel!=null&&(de=!0,le.level=+C.outlineLevel),de&&(D[k-1]=le)),p=h.slice(g).split(t);for(var ie=0;ie!=p.length&&p[ie].trim().charAt(0)=="<";++ie);for(p=p.slice(ie),g=0;g!=p.length;++g)if(h=p[g].trim(),h.length!==0){if(j=h.match(a),v=g,w=0,b=0,h="<c "+(h.slice(0,1)=="<"?">":"")+h,j!=null&&j.length===2){for(v=0,A=j[1],w=0;w!=A.length&&!((b=A.charCodeAt(w)-64)<1||b>26);++w)v=26*v+b;--v,S=v}else++S;for(w=0;w!=h.length&&h.charCodeAt(w)!==62;++w);if(++w,C=Ze(h.slice(0,w),!0),C.r||(C.r=Xe({r:k-1,c:S})),A=h.slice(w),N={t:""},(j=A.match(i))!=null&&j[1]!==""&&(N.v=dt(j[1])),x.cellFormula){if((j=A.match(l))!=null&&j[1]!==""){if(N.f=dt(vt(j[1])).replace(/\r\n/g,`
`),x.xlfn||(N.f=Nu(N.f)),j[0].indexOf('t="array"')>-1)N.F=(A.match(n)||[])[1],N.F.indexOf(":")>-1&&W.push([Dt(N.F),N.F]);else if(j[0].indexOf('t="shared"')>-1){R=Ze(j[0]);var oe=dt(vt(j[1]));x.xlfn||(oe=Nu(oe)),se[parseInt(R.si,10)]=[R,oe,C.r]}}else(j=A.match(/<f[^>]*\/>/))&&(R=Ze(j[0]),se[R.si]&&(N.f=Q2(se[R.si][1],se[R.si][2],C.r)));var ue=Fs(C.r);for(w=0;w<W.length;++w)ue.r>=W[w][0].s.r&&ue.r<=W[w][0].e.r&&ue.c>=W[w][0].s.c&&ue.c<=W[w][0].e.c&&(N.F=W[w][1])}if(C.t==null&&N.v===void 0)if(N.f||N.F)N.v=0,N.t="n";else if(E)N.t="z";else continue;else N.t=C.t||"n";switch(u.s.c>S&&(u.s.c=S),u.e.c<S&&(u.e.c=S),N.t){case"n":if(N.v==""||N.v==null){if(!E)continue;N.t="z"}else N.v=parseFloat(N.v);break;case"s":if(typeof N.v>"u"){if(!E)continue;N.t="z"}else F=ei[parseInt(N.v,10)],N.v=F.t,N.r=F.r,x.cellHTML&&(N.h=F.h);break;case"str":N.t="s",N.v=N.v!=null?vt(N.v):"",x.cellHTML&&(N.h=md(N.v));break;case"inlineStr":j=A.match(r),N.t="s",j!=null&&(F=wd(j[1]))?(N.v=F.t,x.cellHTML&&(N.h=F.h)):N.v="";break;case"b":N.v=Nt(N.v);break;case"d":x.cellDates?N.v=ls(N.v,1):(N.v=Ds(ls(N.v,1)),N.t="n");break;case"e":(!x||x.cellText!==!1)&&(N.w=N.v),N.v=Yh[N.v];break}if(T=M=0,U=null,H&&C.s!==void 0&&(U=f.CellXf[C.s],U!=null&&(U.numFmtId!=null&&(T=U.numFmtId),x.cellStyles&&U.fillId!=null&&(M=U.fillId))),Af(N,T,M,x,m,f),x.cellDates&&H&&N.t=="n"&&An(et[T])&&(N.t="d",N.v=Yl(N.v)),C.cm&&x.xlmeta){var Ne=(x.xlmeta.Cell||[])[+C.cm-1];Ne&&Ne.type=="XLDAPR"&&(N.D=!0)}if(X){var I=Fs(C.r);d[I.r]||(d[I.r]=[]),d[I.r][I.c]=N}else d[C.r]=N}}}}D.length>0&&(d["!rows"]=D)}}();function V4(t,s){var a={},r=t.l+s;a.r=t.read_shift(4),t.l+=4;var n=t.read_shift(2);t.l+=1;var i=t.read_shift(1);return t.l=r,i&7&&(a.level=i&7),i&16&&(a.hidden=!0),i&32&&(a.hpt=n/20),a}var H4=Vr;function q4(){}function W4(t,s){var a={},r=t[t.l];return++t.l,a.above=!(r&64),a.left=!(r&128),t.l+=18,a.name=hN(t),a}function G4(t){var s=ia(t);return[s]}function Y4(t){var s=Ur(t);return[s]}function Z4(t){var s=ia(t),a=t.read_shift(1);return[s,a,"b"]}function J4(t){var s=Ur(t),a=t.read_shift(1);return[s,a,"b"]}function X4(t){var s=ia(t),a=t.read_shift(1);return[s,a,"e"]}function K4(t){var s=Ur(t),a=t.read_shift(1);return[s,a,"e"]}function Q4(t){var s=ia(t),a=t.read_shift(4);return[s,a,"s"]}function eS(t){var s=Ur(t),a=t.read_shift(4);return[s,a,"s"]}function tS(t){var s=ia(t),a=bs(t);return[s,a,"n"]}function _f(t){var s=Ur(t),a=bs(t);return[s,a,"n"]}function sS(t){var s=ia(t),a=vd(t);return[s,a,"n"]}function aS(t){var s=Ur(t),a=vd(t);return[s,a,"n"]}function rS(t){var s=ia(t),a=yd(t);return[s,a,"is"]}function nS(t){var s=ia(t),a=Ns(t);return[s,a,"str"]}function iS(t){var s=Ur(t),a=Ns(t);return[s,a,"str"]}function lS(t,s,a){var r=t.l+s,n=ia(t);n.r=a["!row"];var i=t.read_shift(1),l=[n,i,"b"];if(a.cellFormula){t.l+=2;var c=Xl(t,r-t.l,a);l[3]=gs(c,null,n,a.supbooks,a)}else t.l=r;return l}function cS(t,s,a){var r=t.l+s,n=ia(t);n.r=a["!row"];var i=t.read_shift(1),l=[n,i,"e"];if(a.cellFormula){t.l+=2;var c=Xl(t,r-t.l,a);l[3]=gs(c,null,n,a.supbooks,a)}else t.l=r;return l}function oS(t,s,a){var r=t.l+s,n=ia(t);n.r=a["!row"];var i=bs(t),l=[n,i,"n"];if(a.cellFormula){t.l+=2;var c=Xl(t,r-t.l,a);l[3]=gs(c,null,n,a.supbooks,a)}else t.l=r;return l}function dS(t,s,a){var r=t.l+s,n=ia(t);n.r=a["!row"];var i=Ns(t),l=[n,i,"str"];if(a.cellFormula){t.l+=2;var c=Xl(t,r-t.l,a);l[3]=gs(c,null,n,a.supbooks,a)}else t.l=r;return l}var xS=Vr;function uS(t,s){var a=t.l+s,r=Vr(t),n=bd(t),i=Ns(t),l=Ns(t),c=Ns(t);t.l=a;var o={rfx:r,relId:n,loc:i,display:c};return l&&(o.Tooltip=l),o}function mS(){}function hS(t,s,a){var r=t.l+s,n=qh(t),i=t.read_shift(1),l=[n];if(l[2]=i,a.cellFormula){var c=b4(t,r-t.l,a);l[1]=c}else t.l=r;return l}function fS(t,s,a){var r=t.l+s,n=Vr(t),i=[n];if(a.cellFormula){var l=j4(t,r-t.l,a);i[1]=l,t.l=r}else t.l=r;return i}var pS=["left","right","top","bottom","header","footer"];function gS(t){var s={};return pS.forEach(function(a){s[a]=bs(t)}),s}function yS(t){var s=t.read_shift(2);return t.l+=28,{RTL:s&32}}function bS(){}function vS(){}function jS(t,s,a,r,n,i,l){if(!t)return t;var c=s||{};r||(r={"!id":{}});var o=c.dense?[]:{},d,x={s:{r:2e6,c:2e6},e:{r:0,c:0}},u=!1,m=!1,f,g,h,p,j,v,w,b,A,N=[];c.biff=12,c["!row"]=0;var C=0,k=!1,S=[],F={},R=c.supbooks||n.supbooks||[[]];if(R.sharedf=F,R.arrayf=S,R.SheetNames=n.SheetNames||n.Sheets.map(function(X){return X.name}),!c.supbooks&&(c.supbooks=R,n.Names))for(var T=0;T<n.Names.length;++T)R[0][T+1]=n.Names[T];var M=[],H=[],U=!1;Cl[16]={n:"BrtShortReal",f:_f};var W;if(Ya(t,function(D,le,de){if(!m)switch(de){case 148:d=D;break;case 0:f=D,c.sheetRows&&c.sheetRows<=f.r&&(m=!0),b=ds(p=f.r),c["!row"]=f.r,(D.hidden||D.hpt||D.level!=null)&&(D.hpt&&(D.hpx=hi(D.hpt)),H[D.r]=D);break;case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 13:case 14:case 15:case 16:case 17:case 18:case 62:switch(g={t:D[2]},D[2]){case"n":g.v=D[1];break;case"s":w=ei[D[1]],g.v=w.t,g.r=w.r;break;case"b":g.v=!!D[1];break;case"e":g.v=D[1],c.cellText!==!1&&(g.w=Hr[g.v]);break;case"str":g.t="s",g.v=D[1];break;case"is":g.t="s",g.v=D[1].t;break}if((h=l.CellXf[D[0].iStyleRef])&&Af(g,h.numFmtId,null,c,i,l),j=D[0].c==-1?j+1:D[0].c,c.dense?(o[p]||(o[p]=[]),o[p][j]=g):o[Kt(j)+b]=g,c.cellFormula){for(k=!1,C=0;C<S.length;++C){var E=S[C];f.r>=E[0].s.r&&f.r<=E[0].e.r&&j>=E[0].s.c&&j<=E[0].e.c&&(g.F=ct(E[0]),k=!0)}!k&&D.length>3&&(g.f=D[3])}if(x.s.r>f.r&&(x.s.r=f.r),x.s.c>j&&(x.s.c=j),x.e.r<f.r&&(x.e.r=f.r),x.e.c<j&&(x.e.c=j),c.cellDates&&h&&g.t=="n"&&An(et[h.numFmtId])){var z=kr(g.v);z&&(g.t="d",g.v=new Date(z.y,z.m-1,z.d,z.H,z.M,z.S,z.u))}W&&(W.type=="XLDAPR"&&(g.D=!0),W=void 0);break;case 1:case 12:if(!c.sheetStubs||u)break;g={t:"z",v:void 0},j=D[0].c==-1?j+1:D[0].c,c.dense?(o[p]||(o[p]=[]),o[p][j]=g):o[Kt(j)+b]=g,x.s.r>f.r&&(x.s.r=f.r),x.s.c>j&&(x.s.c=j),x.e.r<f.r&&(x.e.r=f.r),x.e.c<j&&(x.e.c=j),W&&(W.type=="XLDAPR"&&(g.D=!0),W=void 0);break;case 176:N.push(D);break;case 49:W=((c.xlmeta||{}).Cell||[])[D-1];break;case 494:var O=r["!id"][D.relId];for(O?(D.Target=O.Target,D.loc&&(D.Target+="#"+D.loc),D.Rel=O):D.relId==""&&(D.Target="#"+D.loc),p=D.rfx.s.r;p<=D.rfx.e.r;++p)for(j=D.rfx.s.c;j<=D.rfx.e.c;++j)c.dense?(o[p]||(o[p]=[]),o[p][j]||(o[p][j]={t:"z",v:void 0}),o[p][j].l=D):(v=Xe({c:j,r:p}),o[v]||(o[v]={t:"z",v:void 0}),o[v].l=D);break;case 426:if(!c.cellFormula)break;S.push(D),A=c.dense?o[p][j]:o[Kt(j)+b],A.f=gs(D[1],x,{r:f.r,c:j},R,c),A.F=ct(D[0]);break;case 427:if(!c.cellFormula)break;F[Xe(D[0].s)]=D[1],A=c.dense?o[p][j]:o[Kt(j)+b],A.f=gs(D[1],x,{r:f.r,c:j},R,c);break;case 60:if(!c.cellStyles)break;for(;D.e>=D.s;)M[D.e--]={width:D.w/256,hidden:!!(D.flags&1),level:D.level},U||(U=!0,kd(D.w/256)),vn(M[D.e+1]);break;case 161:o["!autofilter"]={ref:ct(D)};break;case 476:o["!margins"]=D;break;case 147:n.Sheets[a]||(n.Sheets[a]={}),D.name&&(n.Sheets[a].CodeName=D.name),(D.above||D.left)&&(o["!outline"]={above:D.above,left:D.left});break;case 137:n.Views||(n.Views=[{}]),n.Views[0]||(n.Views[0]={}),D.RTL&&(n.Views[0].RTL=!0);break;case 485:break;case 64:case 1053:break;case 151:break;case 152:case 175:case 644:case 625:case 562:case 396:case 1112:case 1146:case 471:case 1050:case 649:case 1105:case 589:case 607:case 564:case 1055:case 168:case 174:case 1180:case 499:case 507:case 550:case 171:case 167:case 1177:case 169:case 1181:case 551:case 552:case 661:case 639:case 478:case 537:case 477:case 536:case 1103:case 680:case 1104:case 1024:case 663:case 535:case 678:case 504:case 1043:case 428:case 170:case 3072:case 50:case 2070:case 1045:break;case 35:u=!0;break;case 36:u=!1;break;case 37:u=!0;break;case 38:u=!1;break;default:if(!le.T){if(!u||c.WTF)throw new Error("Unexpected record 0x"+de.toString(16))}}},c),delete c.supbooks,delete c["!row"],!o["!ref"]&&(x.s.r<2e6||d&&(d.e.r>0||d.e.c>0||d.s.r>0||d.s.c>0))&&(o["!ref"]=ct(d||x)),c.sheetRows&&o["!ref"]){var se=Dt(o["!ref"]);c.sheetRows<=+se.e.r&&(se.e.r=c.sheetRows-1,se.e.r>x.e.r&&(se.e.r=x.e.r),se.e.r<se.s.r&&(se.s.r=se.e.r),se.e.c>x.e.c&&(se.e.c=x.e.c),se.e.c<se.s.c&&(se.s.c=se.e.c),o["!fullref"]=o["!ref"],o["!ref"]=ct(se))}return N.length>0&&(o["!merges"]=N),M.length>0&&(o["!cols"]=M),H.length>0&&(o["!rows"]=H),o}function NS(t){var s=[],a=t.match(/^<c:numCache>/),r;(t.match(/<c:pt idx="(\d*)">(.*?)<\/c:pt>/mg)||[]).forEach(function(i){var l=i.match(/<c:pt idx="(\d*?)"><c:v>(.*)<\/c:v><\/c:pt>/);l&&(s[+l[1]]=a?+l[2]:l[2])});var n=dt((t.match(/<c:formatCode>([\s\S]*?)<\/c:formatCode>/)||["","General"])[1]);return(t.match(/<c:f>(.*?)<\/c:f>/mg)||[]).forEach(function(i){r=i.replace(/<.*?>/g,"")}),[s,n,r]}function wS(t,s,a,r,n,i){var l=i||{"!type":"chart"};if(!t)return i;var c=0,o=0,d="A",x={s:{r:2e6,c:2e6},e:{r:0,c:0}};return(t.match(/<c:numCache>[\s\S]*?<\/c:numCache>/gm)||[]).forEach(function(u){var m=NS(u);x.s.r=x.s.c=0,x.e.c=c,d=Kt(c),m[0].forEach(function(f,g){l[d+ds(g)]={t:"n",v:f,z:m[1]},o=g}),x.e.r<o&&(x.e.r=o),++c}),c>0&&(l["!ref"]=ct(x)),l}function kS(t,s,a,r,n){if(!t)return t;r||(r={"!id":{}});var i={"!type":"chart","!drawel":null,"!rel":""},l,c=t.match(Ef);return c&&Cd(c[0],i,n,a),(l=t.match(/drawing r:id="(.*?)"/))&&(i["!rel"]=l[1]),r["!id"][i["!rel"]]&&(i["!drawel"]=r["!id"][i["!rel"]]),i}function SS(t,s){t.l+=10;var a=Ns(t);return{name:a}}function CS(t,s,a,r,n){if(!t)return t;r||(r={"!id":{}});var i={"!type":"chart","!drawel":null,"!rel":""},l=!1;return Ya(t,function(o,d,x){switch(x){case 550:i["!rel"]=o;break;case 651:n.Sheets[a]||(n.Sheets[a]={}),o.name&&(n.Sheets[a].CodeName=o.name);break;case 562:case 652:case 669:case 679:case 551:case 552:case 476:case 3072:break;case 35:l=!0;break;case 36:l=!1;break;case 37:break;case 38:break;default:if(!(d.T>0)){if(!(d.T<0)){if(!l||s.WTF)throw new Error("Unexpected record 0x"+x.toString(16))}}}},s),r["!id"][i["!rel"]]&&(i["!drawel"]=r["!id"][i["!rel"]]),i}var Ff=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]],AS=[["activeTab",0,"int"],["autoFilterDateGrouping",!0,"bool"],["firstSheet",0,"int"],["minimized",!1,"bool"],["showHorizontalScroll",!0,"bool"],["showSheetTabs",!0,"bool"],["showVerticalScroll",!0,"bool"],["tabRatio",600,"int"],["visibility","visible"]],ES=[],_S=[["calcCompleted","true"],["calcMode","auto"],["calcOnSave","true"],["concurrentCalc","true"],["fullCalcOnLoad","false"],["fullPrecision","true"],["iterate","false"],["iterateCount","100"],["iterateDelta","0.001"],["refMode","A1"]];function Au(t,s){for(var a=0;a!=t.length;++a)for(var r=t[a],n=0;n!=s.length;++n){var i=s[n];if(r[i[0]]==null)r[i[0]]=i[1];else switch(i[2]){case"bool":typeof r[i[0]]=="string"&&(r[i[0]]=Nt(r[i[0]]));break;case"int":typeof r[i[0]]=="string"&&(r[i[0]]=parseInt(r[i[0]],10));break}}}function Eu(t,s){for(var a=0;a!=s.length;++a){var r=s[a];if(t[r[0]]==null)t[r[0]]=r[1];else switch(r[2]){case"bool":typeof t[r[0]]=="string"&&(t[r[0]]=Nt(t[r[0]]));break;case"int":typeof t[r[0]]=="string"&&(t[r[0]]=parseInt(t[r[0]],10));break}}}function Tf(t){Eu(t.WBProps,Ff),Eu(t.CalcPr,_S),Au(t.WBView,AS),Au(t.Sheets,ES),dn.date1904=Nt(t.WBProps.date1904)}var FS="][*?/\\".split("");function TS(t,s){if(t.length>31)throw new Error("Sheet names cannot exceed 31 chars");var a=!0;return FS.forEach(function(r){if(t.indexOf(r)!=-1)throw new Error("Sheet name cannot contain : \\ / ? * [ ]")}),a}var DS=/<\w+:workbook/;function RS(t,s){if(!t)throw new Error("Could not find file");var a={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},Names:[],xmlns:""},r=!1,n="xmlns",i={},l=0;if(t.replace(ks,function(o,d){var x=Ze(o);switch(Oa(x[0])){case"<?xml":break;case"<workbook":o.match(DS)&&(n="xmlns"+o.match(/<(\w+):/)[1]),a.xmlns=x[n];break;case"</workbook>":break;case"<fileVersion":delete x[0],a.AppVersion=x;break;case"<fileVersion/>":case"</fileVersion>":break;case"<fileSharing":break;case"<fileSharing/>":break;case"<workbookPr":case"<workbookPr/>":Ff.forEach(function(u){if(x[u[0]]!=null)switch(u[2]){case"bool":a.WBProps[u[0]]=Nt(x[u[0]]);break;case"int":a.WBProps[u[0]]=parseInt(x[u[0]],10);break;default:a.WBProps[u[0]]=x[u[0]]}}),x.codeName&&(a.WBProps.CodeName=vt(x.codeName));break;case"</workbookPr>":break;case"<workbookProtection":break;case"<workbookProtection/>":break;case"<bookViews":case"<bookViews>":case"</bookViews>":break;case"<workbookView":case"<workbookView/>":delete x[0],a.WBView.push(x);break;case"</workbookView>":break;case"<sheets":case"<sheets>":case"</sheets>":break;case"<sheet":switch(x.state){case"hidden":x.Hidden=1;break;case"veryHidden":x.Hidden=2;break;default:x.Hidden=0}delete x.state,x.name=dt(vt(x.name)),delete x[0],a.Sheets.push(x);break;case"</sheet>":break;case"<functionGroups":case"<functionGroups/>":break;case"<functionGroup":break;case"<externalReferences":case"</externalReferences>":case"<externalReferences>":break;case"<externalReference":break;case"<definedNames/>":break;case"<definedNames>":case"<definedNames":r=!0;break;case"</definedNames>":r=!1;break;case"<definedName":i={},i.Name=vt(x.name),x.comment&&(i.Comment=x.comment),x.localSheetId&&(i.Sheet=+x.localSheetId),Nt(x.hidden||"0")&&(i.Hidden=!0),l=d+o.length;break;case"</definedName>":i.Ref=dt(vt(t.slice(l,d))),a.Names.push(i);break;case"<definedName/>":break;case"<calcPr":delete x[0],a.CalcPr=x;break;case"<calcPr/>":delete x[0],a.CalcPr=x;break;case"</calcPr>":break;case"<oleSize":break;case"<customWorkbookViews>":case"</customWorkbookViews>":case"<customWorkbookViews":break;case"<customWorkbookView":case"</customWorkbookView>":break;case"<pivotCaches>":case"</pivotCaches>":case"<pivotCaches":break;case"<pivotCache":break;case"<smartTagPr":case"<smartTagPr/>":break;case"<smartTagTypes":case"<smartTagTypes>":case"</smartTagTypes>":break;case"<smartTagType":break;case"<webPublishing":case"<webPublishing/>":break;case"<fileRecoveryPr":case"<fileRecoveryPr/>":break;case"<webPublishObjects>":case"<webPublishObjects":case"</webPublishObjects>":break;case"<webPublishObject":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":r=!0;break;case"</ext>":r=!1;break;case"<ArchID":break;case"<AlternateContent":case"<AlternateContent>":r=!0;break;case"</AlternateContent>":r=!1;break;case"<revisionPtr":break;default:if(!r&&s.WTF)throw new Error("unrecognized "+x[0]+" in workbook")}return o}),Xj.indexOf(a.xmlns)===-1)throw new Error("Unknown Namespace: "+a.xmlns);return Tf(a),a}function PS(t,s){var a={};return a.Hidden=t.read_shift(4),a.iTabID=t.read_shift(4),a.strRelID=yo(t),a.name=Ns(t),a}function IS(t,s){var a={},r=t.read_shift(4);a.defaultThemeVersion=t.read_shift(4);var n=s>8?Ns(t):"";return n.length>0&&(a.CodeName=n),a.autoCompressPictures=!!(r&65536),a.backupFile=!!(r&64),a.checkCompatibility=!!(r&4096),a.date1904=!!(r&1),a.filterPrivacy=!!(r&8),a.hidePivotFieldList=!!(r&1024),a.promptedSolutions=!!(r&16),a.publishItems=!!(r&2048),a.refreshAllConnections=!!(r&262144),a.saveExternalLinkValues=!!(r&128),a.showBorderUnselectedTables=!!(r&4),a.showInkAnnotation=!!(r&32),a.showObjects=["all","placeholders","none"][r>>13&3],a.showPivotChartFilter=!!(r&32768),a.updateLinks=["userSet","never","always"][r>>8&3],a}function $S(t,s){var a={};return t.read_shift(4),a.ArchID=t.read_shift(4),t.l+=s-8,a}function OS(t,s,a){var r=t.l+s;t.l+=4,t.l+=1;var n=t.read_shift(4),i=fN(t),l=v4(t,0,a),c=bd(t);t.l=r;var o={Name:i,Ptg:l};return n<268435455&&(o.Sheet=n),c&&(o.Comment=c),o}function LS(t,s){var a={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},xmlns:""},r=[],n=!1;s||(s={}),s.biff=12;var i=[],l=[[]];return l.SheetNames=[],l.XTI=[],Cl[16]={n:"BrtFRTArchID$",f:$S},Ya(t,function(o,d,x){switch(x){case 156:l.SheetNames.push(o.name),a.Sheets.push(o);break;case 153:a.WBProps=o;break;case 39:o.Sheet!=null&&(s.SID=o.Sheet),o.Ref=gs(o.Ptg,null,null,l,s),delete s.SID,delete o.Ptg,i.push(o);break;case 1036:break;case 357:case 358:case 355:case 667:l[0].length?l.push([x,o]):l[0]=[x,o],l[l.length-1].XTI=[];break;case 362:l.length===0&&(l[0]=[],l[0].XTI=[]),l[l.length-1].XTI=l[l.length-1].XTI.concat(o),l.XTI=l.XTI.concat(o);break;case 361:break;case 2071:case 158:case 143:case 664:case 353:break;case 3072:case 3073:case 534:case 677:case 157:case 610:case 2050:case 155:case 548:case 676:case 128:case 665:case 2128:case 2125:case 549:case 2053:case 596:case 2076:case 2075:case 2082:case 397:case 154:case 1117:case 553:case 2091:break;case 35:r.push(x),n=!0;break;case 36:r.pop(),n=!1;break;case 37:r.push(x),n=!0;break;case 38:r.pop(),n=!1;break;case 16:break;default:if(!d.T){if(!n||s.WTF&&r[r.length-1]!=37&&r[r.length-1]!=35)throw new Error("Unexpected record 0x"+x.toString(16))}}},s),Tf(a),a.Names=i,a.supbooks=l,a}function MS(t,s,a){return s.slice(-4)===".bin"?LS(t,a):RS(t,a)}function BS(t,s,a,r,n,i,l,c){return s.slice(-4)===".bin"?jS(t,r,a,n,i,l,c):P4(t,r,a,n,i,l,c)}function zS(t,s,a,r,n,i,l,c){return s.slice(-4)===".bin"?CS(t,r,a,n,i):kS(t,r,a,n,i)}function US(t,s,a,r,n,i,l,c){return s.slice(-4)===".bin"?J2():X2()}function VS(t,s,a,r,n,i,l,c){return s.slice(-4)===".bin"?Y2():Z2()}function HS(t,s,a,r){return s.slice(-4)===".bin"?x2(t,a,r):n2(t,a,r)}function qS(t,s,a){return gf(t,a)}function WS(t,s,a){return s.slice(-4)===".bin"?A1(t,a):S1(t,a)}function GS(t,s,a){return s.slice(-4)===".bin"?q2(t,a):B2(t,a)}function YS(t,s,a){return s.slice(-4)===".bin"?O2(t):I2(t)}function ZS(t,s,a,r){return a.slice(-4)===".bin"?L2(t,s,a,r):void 0}function JS(t,s,a){return s.slice(-4)===".bin"?R2(t,s,a):P2(t,s,a)}var Df=/([\w:]+)=((?:")([^"]*)(?:")|(?:')([^']*)(?:'))/g,Rf=/([\w:]+)=((?:")(?:[^"]*)(?:")|(?:')(?:[^']*)(?:'))/;function oa(t,s){var a=t.split(/\s+/),r=[];if(r[0]=a[0],a.length===1)return r;var n=t.match(Df),i,l,c,o;if(n)for(o=0;o!=n.length;++o)i=n[o].match(Rf),(l=i[1].indexOf(":"))===-1?r[i[1]]=i[2].slice(1,i[2].length-1):(i[1].slice(0,6)==="xmlns:"?c="xmlns"+i[1].slice(6):c=i[1].slice(l+1),r[c]=i[2].slice(1,i[2].length-1));return r}function XS(t){var s=t.split(/\s+/),a={};if(s.length===1)return a;var r=t.match(Df),n,i,l,c;if(r)for(c=0;c!=r.length;++c)n=r[c].match(Rf),(i=n[1].indexOf(":"))===-1?a[n[1]]=n[2].slice(1,n[2].length-1):(n[1].slice(0,6)==="xmlns:"?l="xmlns"+n[1].slice(6):l=n[1].slice(i+1),a[l]=n[2].slice(1,n[2].length-1));return a}var si;function KS(t,s){var a=si[t]||dt(t);return a==="General"?Pr(s):na(a,s)}function QS(t,s,a,r){var n=r;switch((a[0].match(/dt:dt="([\w.]+)"/)||["",""])[1]){case"boolean":n=Nt(r);break;case"i2":case"int":n=parseInt(r,10);break;case"r4":case"float":n=parseFloat(r);break;case"date":case"dateTime.tz":n=ls(r);break;case"i8":case"string":case"fixed":case"uuid":case"bin.base64":break;default:throw new Error("bad custprop:"+a[0])}t[dt(s)]=n}function eC(t,s,a){if(t.t!=="z"){if(!a||a.cellText!==!1)try{t.t==="e"?t.w=t.w||Hr[t.v]:s==="General"?t.t==="n"?(t.v|0)===t.v?t.w=t.v.toString(10):t.w=oi(t.v):t.w=Pr(t.v):t.w=KS(s||"General",t.v)}catch(i){if(a.WTF)throw i}try{var r=si[s]||s||"General";if(a.cellNF&&(t.z=r),a.cellDates&&t.t=="n"&&An(r)){var n=kr(t.v);n&&(t.t="d",t.v=new Date(n.y,n.m-1,n.d,n.H,n.M,n.S,n.u))}}catch(i){if(a.WTF)throw i}}}function tC(t,s,a){if(a.cellStyles&&s.Interior){var r=s.Interior;r.Pattern&&(r.patternType=Q1[r.Pattern]||r.Pattern)}t[s.ID]=s}function sC(t,s,a,r,n,i,l,c,o,d){var x="General",u=r.StyleID,m={};d=d||{};var f=[],g=0;for(u===void 0&&c&&(u=c.StyleID),u===void 0&&l&&(u=l.StyleID);i[u]!==void 0&&(i[u].nf&&(x=i[u].nf),i[u].Interior&&f.push(i[u].Interior),!!i[u].Parent);)u=i[u].Parent;switch(a.Type){case"Boolean":r.t="b",r.v=Nt(t);break;case"String":r.t="s",r.r=Jx(dt(t)),r.v=t.indexOf("<")>-1?dt(s||t).replace(/<.*?>/g,""):r.r;break;case"DateTime":t.slice(-1)!="Z"&&(t+="Z"),r.v=(ls(t)-new Date(Date.UTC(1899,11,30)))/(24*60*60*1e3),r.v!==r.v?r.v=dt(t):r.v<60&&(r.v=r.v-1),(!x||x=="General")&&(x="yyyy-mm-dd");case"Number":r.v===void 0&&(r.v=+t),r.t||(r.t="n");break;case"Error":r.t="e",r.v=Yh[t],d.cellText!==!1&&(r.w=t);break;default:t==""&&s==""?r.t="z":(r.t="s",r.v=Jx(s||t));break}if(eC(r,x,d),d.cellFormula!==!1)if(r.Formula){var h=dt(r.Formula);h.charCodeAt(0)==61&&(h=h.slice(1)),r.f=on(h,n),delete r.Formula,r.ArrayRange=="RC"?r.F=on("RC:RC",n):r.ArrayRange&&(r.F=on(r.ArrayRange,n),o.push([Dt(r.F),r.F]))}else for(g=0;g<o.length;++g)n.r>=o[g][0].s.r&&n.r<=o[g][0].e.r&&n.c>=o[g][0].s.c&&n.c<=o[g][0].e.c&&(r.F=o[g][1]);d.cellStyles&&(f.forEach(function(p){!m.patternType&&p.patternType&&(m.patternType=p.patternType)}),r.s=m),r.StyleID!==void 0&&(r.ixfe=r.StyleID)}function aC(t){t.t=t.v||"",t.t=t.t.replace(/\r\n/g,`
`).replace(/\r/g,`
`),t.v=t.w=t.ixfe=void 0}function Cc(t,s){var a=s||{};vh();var r=zn(hd(t));(a.type=="binary"||a.type=="array"||a.type=="base64")&&(r=vt(r));var n=r.slice(0,1024).toLowerCase(),i=!1;if(n=n.replace(/".*?"/g,""),(n.indexOf(">")&1023)>Math.min(n.indexOf(",")&1023,n.indexOf(";")&1023)){var l=os(a);return l.type="string",ui.to_workbook(r,l)}if(n.indexOf("<?xml")==-1&&["html","table","head","meta","script","style","div"].forEach(function(xe){n.indexOf("<"+xe)>=0&&(i=!0)}),i)return uC(r,a);si={"General Number":"General","General Date":et[22],"Long Date":"dddd, mmmm dd, yyyy","Medium Date":et[15],"Short Date":et[14],"Long Time":et[19],"Medium Time":et[18],"Short Time":et[20],Currency:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',Fixed:et[2],Standard:et[4],Percent:et[10],Scientific:et[11],"Yes/No":'"Yes";"Yes";"No";@',"True/False":'"True";"True";"False";@',"On/Off":'"Yes";"Yes";"No";@'};var c,o=[],d,x={},u=[],m=a.dense?[]:{},f="",g={},h={},p=oa('<Data ss:Type="String">'),j=0,v=0,w=0,b={s:{r:2e6,c:2e6},e:{r:0,c:0}},A={},N={},C="",k=0,S=[],F={},R={},T=0,M=[],H=[],U={},W=[],se,X=!1,D=[],le=[],de={},E=0,z=0,O={Sheets:[],WBProps:{date1904:!1}},P={};xi.lastIndex=0,r=r.replace(/<!--([\s\S]*?)-->/mg,"");for(var Z="";c=xi.exec(r);)switch(c[3]=(Z=c[3]).toLowerCase()){case"data":if(Z=="data"){if(c[1]==="/"){if((d=o.pop())[0]!==c[3])throw new Error("Bad state: "+d.join("|"))}else c[0].charAt(c[0].length-2)!=="/"&&o.push([c[3],!0]);break}if(o[o.length-1][1])break;c[1]==="/"?sC(r.slice(j,c.index),C,p,o[o.length-1][0]=="comment"?U:g,{c:v,r:w},A,W[v],h,D,a):(C="",p=oa(c[0]),j=c.index+c[0].length);break;case"cell":if(c[1]==="/")if(H.length>0&&(g.c=H),(!a.sheetRows||a.sheetRows>w)&&g.v!==void 0&&(a.dense?(m[w]||(m[w]=[]),m[w][v]=g):m[Kt(v)+ds(w)]=g),g.HRef&&(g.l={Target:dt(g.HRef)},g.HRefScreenTip&&(g.l.Tooltip=g.HRefScreenTip),delete g.HRef,delete g.HRefScreenTip),(g.MergeAcross||g.MergeDown)&&(E=v+(parseInt(g.MergeAcross,10)|0),z=w+(parseInt(g.MergeDown,10)|0),S.push({s:{c:v,r:w},e:{c:E,r:z}})),!a.sheetStubs)g.MergeAcross?v=E+1:++v;else if(g.MergeAcross||g.MergeDown){for(var re=v;re<=E;++re)for(var ie=w;ie<=z;++ie)(re>v||ie>w)&&(a.dense?(m[ie]||(m[ie]=[]),m[ie][re]={t:"z"}):m[Kt(re)+ds(ie)]={t:"z"});v=E+1}else++v;else g=XS(c[0]),g.Index&&(v=+g.Index-1),v<b.s.c&&(b.s.c=v),v>b.e.c&&(b.e.c=v),c[0].slice(-2)==="/>"&&++v,H=[];break;case"row":c[1]==="/"||c[0].slice(-2)==="/>"?(w<b.s.r&&(b.s.r=w),w>b.e.r&&(b.e.r=w),c[0].slice(-2)==="/>"&&(h=oa(c[0]),h.Index&&(w=+h.Index-1)),v=0,++w):(h=oa(c[0]),h.Index&&(w=+h.Index-1),de={},(h.AutoFitHeight=="0"||h.Height)&&(de.hpx=parseInt(h.Height,10),de.hpt=pf(de.hpx),le[w]=de),h.Hidden=="1"&&(de.hidden=!0,le[w]=de));break;case"worksheet":if(c[1]==="/"){if((d=o.pop())[0]!==c[3])throw new Error("Bad state: "+d.join("|"));u.push(f),b.s.r<=b.e.r&&b.s.c<=b.e.c&&(m["!ref"]=ct(b),a.sheetRows&&a.sheetRows<=b.e.r&&(m["!fullref"]=m["!ref"],b.e.r=a.sheetRows-1,m["!ref"]=ct(b))),S.length&&(m["!merges"]=S),W.length>0&&(m["!cols"]=W),le.length>0&&(m["!rows"]=le),x[f]=m}else b={s:{r:2e6,c:2e6},e:{r:0,c:0}},w=v=0,o.push([c[3],!1]),d=oa(c[0]),f=dt(d.Name),m=a.dense?[]:{},S=[],D=[],le=[],P={name:f,Hidden:0},O.Sheets.push(P);break;case"table":if(c[1]==="/"){if((d=o.pop())[0]!==c[3])throw new Error("Bad state: "+d.join("|"))}else{if(c[0].slice(-2)=="/>")break;o.push([c[3],!1]),W=[],X=!1}break;case"style":c[1]==="/"?tC(A,N,a):N=oa(c[0]);break;case"numberformat":N.nf=dt(oa(c[0]).Format||"General"),si[N.nf]&&(N.nf=si[N.nf]);for(var oe=0;oe!=392&&et[oe]!=N.nf;++oe);if(oe==392){for(oe=57;oe!=392;++oe)if(et[oe]==null){Ar(N.nf,oe);break}}break;case"column":if(o[o.length-1][0]!=="table")break;if(se=oa(c[0]),se.Hidden&&(se.hidden=!0,delete se.Hidden),se.Width&&(se.wpx=parseInt(se.Width,10)),!X&&se.wpx>10){X=!0,_s=hf;for(var ue=0;ue<W.length;++ue)W[ue]&&vn(W[ue])}X&&vn(se),W[se.Index-1||W.length]=se;for(var Ne=0;Ne<+se.Span;++Ne)W[W.length]=os(se);break;case"namedrange":if(c[1]==="/")break;O.Names||(O.Names=[]);var I=Ze(c[0]),ce={Name:I.Name,Ref:on(I.RefersTo.slice(1),{r:0,c:0})};O.Sheets.length>0&&(ce.Sheet=O.Sheets.length-1),O.Names.push(ce);break;case"namedcell":break;case"b":break;case"i":break;case"u":break;case"s":break;case"em":break;case"h2":break;case"h3":break;case"sub":break;case"sup":break;case"span":break;case"alignment":break;case"borders":break;case"border":break;case"font":if(c[0].slice(-2)==="/>")break;c[1]==="/"?C+=r.slice(k,c.index):k=c.index+c[0].length;break;case"interior":if(!a.cellStyles)break;N.Interior=oa(c[0]);break;case"protection":break;case"author":case"title":case"description":case"created":case"keywords":case"subject":case"category":case"company":case"lastauthor":case"lastsaved":case"lastprinted":case"version":case"revision":case"totaltime":case"hyperlinkbase":case"manager":case"contentstatus":case"identifier":case"language":case"appname":if(c[0].slice(-2)==="/>")break;c[1]==="/"?BN(F,Z,r.slice(T,c.index)):T=c.index+c[0].length;break;case"paragraphs":break;case"styles":case"workbook":if(c[1]==="/"){if((d=o.pop())[0]!==c[3])throw new Error("Bad state: "+d.join("|"))}else o.push([c[3],!1]);break;case"comment":if(c[1]==="/"){if((d=o.pop())[0]!==c[3])throw new Error("Bad state: "+d.join("|"));aC(U),H.push(U)}else o.push([c[3],!1]),d=oa(c[0]),U={a:d.Author};break;case"autofilter":if(c[1]==="/"){if((d=o.pop())[0]!==c[3])throw new Error("Bad state: "+d.join("|"))}else if(c[0].charAt(c[0].length-2)!=="/"){var L=oa(c[0]);m["!autofilter"]={ref:on(L.Range).replace(/\$/g,"")},o.push([c[3],!0])}break;case"name":break;case"datavalidation":if(c[1]==="/"){if((d=o.pop())[0]!==c[3])throw new Error("Bad state: "+d.join("|"))}else c[0].charAt(c[0].length-2)!=="/"&&o.push([c[3],!0]);break;case"pixelsperinch":break;case"componentoptions":case"documentproperties":case"customdocumentproperties":case"officedocumentsettings":case"pivottable":case"pivotcache":case"names":case"mapinfo":case"pagebreaks":case"querytable":case"sorting":case"schema":case"conditionalformatting":case"smarttagtype":case"smarttags":case"excelworkbook":case"workbookoptions":case"worksheetoptions":if(c[1]==="/"){if((d=o.pop())[0]!==c[3])throw new Error("Bad state: "+d.join("|"))}else c[0].charAt(c[0].length-2)!=="/"&&o.push([c[3],!0]);break;case"null":break;default:if(o.length==0&&c[3]=="document"||o.length==0&&c[3]=="uof")return Pu(r,a);var V=!0;switch(o[o.length-1][0]){case"officedocumentsettings":switch(c[3]){case"allowpng":break;case"removepersonalinformation":break;case"downloadcomponents":break;case"locationofcomponents":break;case"colors":break;case"color":break;case"index":break;case"rgb":break;case"targetscreensize":break;case"readonlyrecommended":break;default:V=!1}break;case"componentoptions":switch(c[3]){case"toolbar":break;case"hideofficelogo":break;case"spreadsheetautofit":break;case"label":break;case"caption":break;case"maxheight":break;case"maxwidth":break;case"nextsheetnumber":break;default:V=!1}break;case"excelworkbook":switch(c[3]){case"date1904":O.WBProps.date1904=!0;break;case"windowheight":break;case"windowwidth":break;case"windowtopx":break;case"windowtopy":break;case"tabratio":break;case"protectstructure":break;case"protectwindow":break;case"protectwindows":break;case"activesheet":break;case"displayinknotes":break;case"firstvisiblesheet":break;case"supbook":break;case"sheetname":break;case"sheetindex":break;case"sheetindexfirst":break;case"sheetindexlast":break;case"dll":break;case"acceptlabelsinformulas":break;case"donotsavelinkvalues":break;case"iteration":break;case"maxiterations":break;case"maxchange":break;case"path":break;case"xct":break;case"count":break;case"selectedsheets":break;case"calculation":break;case"uncalced":break;case"startupprompt":break;case"crn":break;case"externname":break;case"formula":break;case"colfirst":break;case"collast":break;case"wantadvise":break;case"boolean":break;case"error":break;case"text":break;case"ole":break;case"noautorecover":break;case"publishobjects":break;case"donotcalculatebeforesave":break;case"number":break;case"refmoder1c1":break;case"embedsavesmarttags":break;default:V=!1}break;case"workbookoptions":switch(c[3]){case"owcversion":break;case"height":break;case"width":break;default:V=!1}break;case"worksheetoptions":switch(c[3]){case"visible":if(c[0].slice(-2)!=="/>")if(c[1]==="/")switch(r.slice(T,c.index)){case"SheetHidden":P.Hidden=1;break;case"SheetVeryHidden":P.Hidden=2;break}else T=c.index+c[0].length;break;case"header":m["!margins"]||ti(m["!margins"]={},"xlml"),isNaN(+Ze(c[0]).Margin)||(m["!margins"].header=+Ze(c[0]).Margin);break;case"footer":m["!margins"]||ti(m["!margins"]={},"xlml"),isNaN(+Ze(c[0]).Margin)||(m["!margins"].footer=+Ze(c[0]).Margin);break;case"pagemargins":var te=Ze(c[0]);m["!margins"]||ti(m["!margins"]={},"xlml"),isNaN(+te.Top)||(m["!margins"].top=+te.Top),isNaN(+te.Left)||(m["!margins"].left=+te.Left),isNaN(+te.Right)||(m["!margins"].right=+te.Right),isNaN(+te.Bottom)||(m["!margins"].bottom=+te.Bottom);break;case"displayrighttoleft":O.Views||(O.Views=[]),O.Views[0]||(O.Views[0]={}),O.Views[0].RTL=!0;break;case"freezepanes":break;case"frozennosplit":break;case"splithorizontal":case"splitvertical":break;case"donotdisplaygridlines":break;case"activerow":break;case"activecol":break;case"toprowbottompane":break;case"leftcolumnrightpane":break;case"unsynced":break;case"print":break;case"printerrors":break;case"panes":break;case"scale":break;case"pane":break;case"number":break;case"layout":break;case"pagesetup":break;case"selected":break;case"protectobjects":break;case"enableselection":break;case"protectscenarios":break;case"validprinterinfo":break;case"horizontalresolution":break;case"verticalresolution":break;case"numberofcopies":break;case"activepane":break;case"toprowvisible":break;case"leftcolumnvisible":break;case"fittopage":break;case"rangeselection":break;case"papersizeindex":break;case"pagelayoutzoom":break;case"pagebreakzoom":break;case"filteron":break;case"fitwidth":break;case"fitheight":break;case"commentslayout":break;case"zoom":break;case"lefttoright":break;case"gridlines":break;case"allowsort":break;case"allowfilter":break;case"allowinsertrows":break;case"allowdeleterows":break;case"allowinsertcols":break;case"allowdeletecols":break;case"allowinserthyperlinks":break;case"allowformatcells":break;case"allowsizecols":break;case"allowsizerows":break;case"nosummaryrowsbelowdetail":m["!outline"]||(m["!outline"]={}),m["!outline"].above=!0;break;case"tabcolorindex":break;case"donotdisplayheadings":break;case"showpagelayoutzoom":break;case"nosummarycolumnsrightdetail":m["!outline"]||(m["!outline"]={}),m["!outline"].left=!0;break;case"blackandwhite":break;case"donotdisplayzeros":break;case"displaypagebreak":break;case"rowcolheadings":break;case"donotdisplayoutline":break;case"noorientation":break;case"allowusepivottables":break;case"zeroheight":break;case"viewablerange":break;case"selection":break;case"protectcontents":break;default:V=!1}break;case"pivottable":case"pivotcache":switch(c[3]){case"immediateitemsondrop":break;case"showpagemultipleitemlabel":break;case"compactrowindent":break;case"location":break;case"pivotfield":break;case"orientation":break;case"layoutform":break;case"layoutsubtotallocation":break;case"layoutcompactrow":break;case"position":break;case"pivotitem":break;case"datatype":break;case"datafield":break;case"sourcename":break;case"parentfield":break;case"ptlineitems":break;case"ptlineitem":break;case"countofsameitems":break;case"item":break;case"itemtype":break;case"ptsource":break;case"cacheindex":break;case"consolidationreference":break;case"filename":break;case"reference":break;case"nocolumngrand":break;case"norowgrand":break;case"blanklineafteritems":break;case"hidden":break;case"subtotal":break;case"basefield":break;case"mapchilditems":break;case"function":break;case"refreshonfileopen":break;case"printsettitles":break;case"mergelabels":break;case"defaultversion":break;case"refreshname":break;case"refreshdate":break;case"refreshdatecopy":break;case"versionlastrefresh":break;case"versionlastupdate":break;case"versionupdateablemin":break;case"versionrefreshablemin":break;case"calculation":break;default:V=!1}break;case"pagebreaks":switch(c[3]){case"colbreaks":break;case"colbreak":break;case"rowbreaks":break;case"rowbreak":break;case"colstart":break;case"colend":break;case"rowend":break;default:V=!1}break;case"autofilter":switch(c[3]){case"autofiltercolumn":break;case"autofiltercondition":break;case"autofilterand":break;case"autofilteror":break;default:V=!1}break;case"querytable":switch(c[3]){case"id":break;case"autoformatfont":break;case"autoformatpattern":break;case"querysource":break;case"querytype":break;case"enableredirections":break;case"refreshedinxl9":break;case"urlstring":break;case"htmltables":break;case"connection":break;case"commandtext":break;case"refreshinfo":break;case"notitles":break;case"nextid":break;case"columninfo":break;case"overwritecells":break;case"donotpromptforfile":break;case"textwizardsettings":break;case"source":break;case"number":break;case"decimal":break;case"thousandseparator":break;case"trailingminusnumbers":break;case"formatsettings":break;case"fieldtype":break;case"delimiters":break;case"tab":break;case"comma":break;case"autoformatname":break;case"versionlastedit":break;case"versionlastrefresh":break;default:V=!1}break;case"datavalidation":switch(c[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;case"cellrangelist":break;default:V=!1}break;case"sorting":case"conditionalformatting":switch(c[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"cellrangelist":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;default:V=!1}break;case"mapinfo":case"schema":case"data":switch(c[3]){case"map":break;case"entry":break;case"range":break;case"xpath":break;case"field":break;case"xsdtype":break;case"filteron":break;case"aggregate":break;case"elementtype":break;case"attributetype":break;case"schema":case"element":case"complextype":case"datatype":case"all":case"attribute":case"extends":break;case"row":break;default:V=!1}break;case"smarttags":break;default:V=!1;break}if(V||c[3].match(/!\[CDATA/))break;if(!o[o.length-1][1])throw"Unrecognized tag: "+c[3]+"|"+o.join("|");if(o[o.length-1][0]==="customdocumentproperties"){if(c[0].slice(-2)==="/>")break;c[1]==="/"?QS(R,Z,M,r.slice(T,c.index)):(M=c,T=c.index+c[0].length);break}if(a.WTF)throw"Unrecognized tag: "+c[3]+"|"+o.join("|")}var ne={};return!a.bookSheets&&!a.bookProps&&(ne.Sheets=x),ne.SheetNames=u,ne.Workbook=O,ne.SSF=os(et),ne.Props=F,ne.Custprops=R,ne}function No(t,s){switch(_d(s=s||{}),s.type||"base64"){case"base64":return Cc(Js(t),s);case"binary":case"buffer":case"file":return Cc(t,s);case"array":return Cc(zr(t),s)}}function rC(t){var s={},a=t.content;if(a.l=28,s.AnsiUserType=a.read_shift(0,"lpstr-ansi"),s.AnsiClipboardFormat=yN(a),a.length-a.l<=4)return s;var r=a.read_shift(4);if(r==0||r>40||(a.l-=4,s.Reserved1=a.read_shift(0,"lpstr-ansi"),a.length-a.l<=4)||(r=a.read_shift(4),r!==1907505652)||(s.UnicodeClipboardFormat=bN(a),r=a.read_shift(4),r==0||r>40))return s;a.l-=4,s.Reserved2=a.read_shift(0,"lpwstr")}var nC=[60,1084,2066,2165,2175];function iC(t,s,a,r,n){var i=r,l=[],c=a.slice(a.l,a.l+i);if(n&&n.enc&&n.enc.insitu&&c.length>0)switch(t){case 9:case 521:case 1033:case 2057:case 47:case 405:case 225:case 406:case 312:case 404:case 10:break;case 133:break;default:n.enc.insitu(c)}l.push(c),a.l+=i;for(var o=Ua(a,a.l),d=wo[o],x=0;d!=null&&nC.indexOf(o)>-1;)i=Ua(a,a.l+2),x=a.l+4,o==2066?x+=4:(o==2165||o==2175)&&(x+=12),c=a.slice(x,a.l+4+i),l.push(c),a.l+=4+i,d=wo[o=Ua(a,a.l)];var u=tr(l);cs(u,0);var m=0;u.lens=[];for(var f=0;f<l.length;++f)u.lens.push(m),m+=l[f].length;if(u.length<r)throw"XLS Record 0x"+t.toString(16)+" Truncated: "+u.length+" < "+r;return s.f(u,u.length,n)}function Sa(t,s,a){if(t.t!=="z"&&t.XF){var r=0;try{r=t.z||t.XF.numFmtId||0,s.cellNF&&(t.z=et[r])}catch(i){if(s.WTF)throw i}if(!s||s.cellText!==!1)try{t.t==="e"?t.w=t.w||Hr[t.v]:r===0||r=="General"?t.t==="n"?(t.v|0)===t.v?t.w=t.v.toString(10):t.w=oi(t.v):t.w=Pr(t.v):t.w=na(r,t.v,{date1904:!!a,dateNF:s&&s.dateNF})}catch(i){if(s.WTF)throw i}if(s.cellDates&&r&&t.t=="n"&&An(et[r]||String(r))){var n=kr(t.v);n&&(t.t="d",t.v=new Date(n.y,n.m-1,n.d,n.H,n.M,n.S,n.u))}}}function Ji(t,s,a){return{v:t,ixfe:s,t:a}}function lC(t,s){var a={opts:{}},r={},n=s.dense?[]:{},i={},l={},c=null,o=[],d="",x={},u,m="",f,g,h,p,j={},v=[],w,b,A=[],N=[],C={Sheets:[],WBProps:{date1904:!1},Views:[{}]},k={},S=function(ze){return ze<8?Er[ze]:ze<64&&N[ze-8]||Er[ze]},F=function(ze,Ye,at){var ut=Ye.XF.data;if(!(!ut||!ut.patternType||!at||!at.cellStyles)){Ye.s={},Ye.s.patternType=ut.patternType;var us;(us=mi(S(ut.icvFore)))&&(Ye.s.fgColor={rgb:us}),(us=mi(S(ut.icvBack)))&&(Ye.s.bgColor={rgb:us})}},R=function(ze,Ye,at){if(!(de>1)&&!(at.sheetRows&&ze.r>=at.sheetRows)){if(at.cellStyles&&Ye.XF&&Ye.XF.data&&F(ze,Ye,at),delete Ye.ixfe,delete Ye.XF,u=ze,m=Xe(ze),(!l||!l.s||!l.e)&&(l={s:{r:0,c:0},e:{r:0,c:0}}),ze.r<l.s.r&&(l.s.r=ze.r),ze.c<l.s.c&&(l.s.c=ze.c),ze.r+1>l.e.r&&(l.e.r=ze.r+1),ze.c+1>l.e.c&&(l.e.c=ze.c+1),at.cellFormula&&Ye.f){for(var ut=0;ut<v.length;++ut)if(!(v[ut][0].s.c>ze.c||v[ut][0].s.r>ze.r)&&!(v[ut][0].e.c<ze.c||v[ut][0].e.r<ze.r)){Ye.F=ct(v[ut][0]),(v[ut][0].s.c!=ze.c||v[ut][0].s.r!=ze.r)&&delete Ye.f,Ye.f&&(Ye.f=""+gs(v[ut][1],l,ze,D,T));break}}at.dense?(n[ze.r]||(n[ze.r]=[]),n[ze.r][ze.c]=Ye):n[m]=Ye}},T={enc:!1,sbcch:0,snames:[],sharedf:j,arrayf:v,rrtabid:[],lastuser:"",biff:8,codepage:0,winlocked:0,cellStyles:!!s&&!!s.cellStyles,WTF:!!s&&!!s.wtf};s.password&&(T.password=s.password);var M,H=[],U=[],W=[],se=[],X=!1,D=[];D.SheetNames=T.snames,D.sharedf=T.sharedf,D.arrayf=T.arrayf,D.names=[],D.XTI=[];var le=0,de=0,E=0,z=[],O=[],P;T.codepage=1200,ha(1200);for(var Z=!1;t.l<t.length-1;){var re=t.l,ie=t.read_shift(2);if(ie===0&&le===10)break;var oe=t.l===t.length?0:t.read_shift(2),ue=wo[ie];if(ue&&ue.f){if(s.bookSheets&&le===133&&ie!==133)break;if(le=ie,ue.r===2||ue.r==12){var Ne=t.read_shift(2);if(oe-=2,!T.enc&&Ne!==ie&&((Ne&255)<<8|Ne>>8)!==ie)throw new Error("rt mismatch: "+Ne+"!="+ie);ue.r==12&&(t.l+=10,oe-=10)}var I={};if(ie===10?I=ue.f(t,oe,T):I=iC(ie,ue,t,oe,T),de==0&&[9,521,1033,2057].indexOf(le)===-1)continue;switch(ie){case 34:a.opts.Date1904=C.WBProps.date1904=I;break;case 134:a.opts.WriteProtect=!0;break;case 47:if(T.enc||(t.l=0),T.enc=I,!s.password)throw new Error("File is password-protected");if(I.valid==null)throw new Error("Encryption scheme unsupported");if(!I.valid)throw new Error("Password is incorrect");break;case 92:T.lastuser=I;break;case 66:var ce=Number(I);switch(ce){case 21010:ce=1200;break;case 32768:ce=1e4;break;case 32769:ce=1252;break}ha(T.codepage=ce),Z=!0;break;case 317:T.rrtabid=I;break;case 25:T.winlocked=I;break;case 439:a.opts.RefreshAll=I;break;case 12:a.opts.CalcCount=I;break;case 16:a.opts.CalcDelta=I;break;case 17:a.opts.CalcIter=I;break;case 13:a.opts.CalcMode=I;break;case 14:a.opts.CalcPrecision=I;break;case 95:a.opts.CalcSaveRecalc=I;break;case 15:T.CalcRefMode=I;break;case 2211:a.opts.FullCalc=I;break;case 129:I.fDialog&&(n["!type"]="dialog"),I.fBelow||((n["!outline"]||(n["!outline"]={})).above=!0),I.fRight||((n["!outline"]||(n["!outline"]={})).left=!0);break;case 224:A.push(I);break;case 430:D.push([I]),D[D.length-1].XTI=[];break;case 35:case 547:D[D.length-1].push(I);break;case 24:case 536:P={Name:I.Name,Ref:gs(I.rgce,l,null,D,T)},I.itab>0&&(P.Sheet=I.itab-1),D.names.push(P),D[0]||(D[0]=[],D[0].XTI=[]),D[D.length-1].push(I),I.Name=="_xlnm._FilterDatabase"&&I.itab>0&&I.rgce&&I.rgce[0]&&I.rgce[0][0]&&I.rgce[0][0][0]=="PtgArea3d"&&(O[I.itab-1]={ref:ct(I.rgce[0][0][1][2])});break;case 22:T.ExternCount=I;break;case 23:D.length==0&&(D[0]=[],D[0].XTI=[]),D[D.length-1].XTI=D[D.length-1].XTI.concat(I),D.XTI=D.XTI.concat(I);break;case 2196:if(T.biff<8)break;P!=null&&(P.Comment=I[1]);break;case 18:n["!protect"]=I;break;case 19:I!==0&&T.WTF&&console.error("Password verifier: "+I);break;case 133:i[I.pos]=I,T.snames.push(I.name);break;case 10:{if(--de)break;if(l.e){if(l.e.r>0&&l.e.c>0){if(l.e.r--,l.e.c--,n["!ref"]=ct(l),s.sheetRows&&s.sheetRows<=l.e.r){var L=l.e.r;l.e.r=s.sheetRows-1,n["!fullref"]=n["!ref"],n["!ref"]=ct(l),l.e.r=L}l.e.r++,l.e.c++}H.length>0&&(n["!merges"]=H),U.length>0&&(n["!objects"]=U),W.length>0&&(n["!cols"]=W),se.length>0&&(n["!rows"]=se),C.Sheets.push(k)}d===""?x=n:r[d]=n,n=s.dense?[]:{}}break;case 9:case 521:case 1033:case 2057:{if(T.biff===8&&(T.biff={9:2,521:3,1033:4}[ie]||{512:2,768:3,1024:4,1280:5,1536:8,2:2,7:2}[I.BIFFVer]||8),T.biffguess=I.BIFFVer==0,I.BIFFVer==0&&I.dt==4096&&(T.biff=5,Z=!0,ha(T.codepage=28591)),T.biff==8&&I.BIFFVer==0&&I.dt==16&&(T.biff=2),de++)break;if(n=s.dense?[]:{},T.biff<8&&!Z&&(Z=!0,ha(T.codepage=s.codepage||1252)),T.biff<5||I.BIFFVer==0&&I.dt==4096){d===""&&(d="Sheet1"),l={s:{r:0,c:0},e:{r:0,c:0}};var V={pos:t.l-oe,name:d};i[V.pos]=V,T.snames.push(d)}else d=(i[re]||{name:""}).name;I.dt==32&&(n["!type"]="chart"),I.dt==64&&(n["!type"]="macro"),H=[],U=[],T.arrayf=v=[],W=[],se=[],X=!1,k={Hidden:(i[re]||{hs:0}).hs,name:d}}break;case 515:case 3:case 2:n["!type"]=="chart"&&(s.dense?(n[I.r]||[])[I.c]:n[Xe({c:I.c,r:I.r})])&&++I.c,w={ixfe:I.ixfe,XF:A[I.ixfe]||{},v:I.val,t:"n"},E>0&&(w.z=z[w.ixfe>>8&63]),Sa(w,s,a.opts.Date1904),R({c:I.c,r:I.r},w,s);break;case 5:case 517:w={ixfe:I.ixfe,XF:A[I.ixfe],v:I.val,t:I.t},E>0&&(w.z=z[w.ixfe>>8&63]),Sa(w,s,a.opts.Date1904),R({c:I.c,r:I.r},w,s);break;case 638:w={ixfe:I.ixfe,XF:A[I.ixfe],v:I.rknum,t:"n"},E>0&&(w.z=z[w.ixfe>>8&63]),Sa(w,s,a.opts.Date1904),R({c:I.c,r:I.r},w,s);break;case 189:for(var te=I.c;te<=I.C;++te){var ne=I.rkrec[te-I.c][0];w={ixfe:ne,XF:A[ne],v:I.rkrec[te-I.c][1],t:"n"},E>0&&(w.z=z[w.ixfe>>8&63]),Sa(w,s,a.opts.Date1904),R({c:te,r:I.r},w,s)}break;case 6:case 518:case 1030:{if(I.val=="String"){c=I;break}if(w=Ji(I.val,I.cell.ixfe,I.tt),w.XF=A[w.ixfe],s.cellFormula){var xe=I.formula;if(xe&&xe[0]&&xe[0][0]&&xe[0][0][0]=="PtgExp"){var he=xe[0][0][1][0],Se=xe[0][0][1][1],G=Xe({r:he,c:Se});j[G]?w.f=""+gs(I.formula,l,I.cell,D,T):w.F=((s.dense?(n[he]||[])[Se]:n[G])||{}).F}else w.f=""+gs(I.formula,l,I.cell,D,T)}E>0&&(w.z=z[w.ixfe>>8&63]),Sa(w,s,a.opts.Date1904),R(I.cell,w,s),c=I}break;case 7:case 519:if(c)c.val=I,w=Ji(I,c.cell.ixfe,"s"),w.XF=A[w.ixfe],s.cellFormula&&(w.f=""+gs(c.formula,l,c.cell,D,T)),E>0&&(w.z=z[w.ixfe>>8&63]),Sa(w,s,a.opts.Date1904),R(c.cell,w,s),c=null;else throw new Error("String record expects Formula");break;case 33:case 545:{v.push(I);var Q=Xe(I[0].s);if(f=s.dense?(n[I[0].s.r]||[])[I[0].s.c]:n[Q],s.cellFormula&&f){if(!c||!Q||!f)break;f.f=""+gs(I[1],l,I[0],D,T),f.F=ct(I[0])}}break;case 1212:{if(!s.cellFormula)break;if(m){if(!c)break;j[Xe(c.cell)]=I[0],f=s.dense?(n[c.cell.r]||[])[c.cell.c]:n[Xe(c.cell)],(f||{}).f=""+gs(I[0],l,u,D,T)}}break;case 253:w=Ji(o[I.isst].t,I.ixfe,"s"),o[I.isst].h&&(w.h=o[I.isst].h),w.XF=A[w.ixfe],E>0&&(w.z=z[w.ixfe>>8&63]),Sa(w,s,a.opts.Date1904),R({c:I.c,r:I.r},w,s);break;case 513:s.sheetStubs&&(w={ixfe:I.ixfe,XF:A[I.ixfe],t:"z"},E>0&&(w.z=z[w.ixfe>>8&63]),Sa(w,s,a.opts.Date1904),R({c:I.c,r:I.r},w,s));break;case 190:if(s.sheetStubs)for(var me=I.c;me<=I.C;++me){var je=I.ixfe[me-I.c];w={ixfe:je,XF:A[je],t:"z"},E>0&&(w.z=z[w.ixfe>>8&63]),Sa(w,s,a.opts.Date1904),R({c:me,r:I.r},w,s)}break;case 214:case 516:case 4:w=Ji(I.val,I.ixfe,"s"),w.XF=A[w.ixfe],E>0&&(w.z=z[w.ixfe>>8&63]),Sa(w,s,a.opts.Date1904),R({c:I.c,r:I.r},w,s);break;case 0:case 512:de===1&&(l=I);break;case 252:o=I;break;case 1054:if(T.biff==4){z[E++]=I[1];for(var Ae=0;Ae<E+163&&et[Ae]!=I[1];++Ae);Ae>=163&&Ar(I[1],E+163)}else Ar(I[1],I[0]);break;case 30:{z[E++]=I;for(var we=0;we<E+163&&et[we]!=I;++we);we>=163&&Ar(I,E+163)}break;case 229:H=H.concat(I);break;case 93:U[I.cmo[0]]=T.lastobj=I;break;case 438:T.lastobj.TxO=I;break;case 127:T.lastobj.ImData=I;break;case 440:for(p=I[0].s.r;p<=I[0].e.r;++p)for(h=I[0].s.c;h<=I[0].e.c;++h)f=s.dense?(n[p]||[])[h]:n[Xe({c:h,r:p})],f&&(f.l=I[1]);break;case 2048:for(p=I[0].s.r;p<=I[0].e.r;++p)for(h=I[0].s.c;h<=I[0].e.c;++h)f=s.dense?(n[p]||[])[h]:n[Xe({c:h,r:p})],f&&f.l&&(f.l.Tooltip=I[1]);break;case 28:{if(T.biff<=5&&T.biff>=2)break;f=s.dense?(n[I[0].r]||[])[I[0].c]:n[Xe(I[0])];var _e=U[I[2]];f||(s.dense?(n[I[0].r]||(n[I[0].r]=[]),f=n[I[0].r][I[0].c]={t:"z"}):f=n[Xe(I[0])]={t:"z"},l.e.r=Math.max(l.e.r,I[0].r),l.s.r=Math.min(l.s.r,I[0].r),l.e.c=Math.max(l.e.c,I[0].c),l.s.c=Math.min(l.s.c,I[0].c)),f.c||(f.c=[]),g={a:I[1],t:_e.TxO.t},f.c.push(g)}break;case 2173:_2(A[I.ixfe],I.ext);break;case 125:{if(!T.cellStyles)break;for(;I.e>=I.s;)W[I.e--]={width:I.w/256,level:I.level||0,hidden:!!(I.flags&1)},X||(X=!0,kd(I.w/256)),vn(W[I.e+1])}break;case 520:{var Re={};I.level!=null&&(se[I.r]=Re,Re.level=I.level),I.hidden&&(se[I.r]=Re,Re.hidden=!0),I.hpt&&(se[I.r]=Re,Re.hpt=I.hpt,Re.hpx=hi(I.hpt))}break;case 38:case 39:case 40:case 41:n["!margins"]||ti(n["!margins"]={}),n["!margins"][{38:"left",39:"right",40:"top",41:"bottom"}[ie]]=I;break;case 161:n["!margins"]||ti(n["!margins"]={}),n["!margins"].header=I.header,n["!margins"].footer=I.footer;break;case 574:I.RTL&&(C.Views[0].RTL=!0);break;case 146:N=I;break;case 2198:M=I;break;case 140:b=I;break;case 442:d?k.CodeName=I||k.name:C.WBProps.CodeName=I||"ThisWorkbook";break}}else ue||console.error("Missing Info for XLS Record 0x"+ie.toString(16)),t.l+=oe}return a.SheetNames=Pa(i).sort(function(Pe,ze){return Number(Pe)-Number(ze)}).map(function(Pe){return i[Pe].name}),s.bookSheets||(a.Sheets=r),!a.SheetNames.length&&x["!ref"]?(a.SheetNames.push("Sheet1"),a.Sheets&&(a.Sheets.Sheet1=x)):a.Preamble=x,a.Sheets&&O.forEach(function(Pe,ze){a.Sheets[a.SheetNames[ze]]["!autofilter"]=Pe}),a.Strings=o,a.SSF=os(et),T.enc&&(a.Encryption=T.enc),M&&(a.Themes=M),a.Metadata={},b!==void 0&&(a.Metadata.Country=b),D.names.length>0&&(C.Names=D.names),a.Workbook=C,a}var _u={SI:"e0859ff2f94f6810ab9108002b27b3d9",DSI:"02d5cdd59c2e1b10939708002b2cf9ae",UDI:"05d5cdd59c2e1b10939708002b2cf9ae"};function cC(t,s,a){var r=lt.find(t,"/!DocumentSummaryInformation");if(r&&r.size>0)try{var n=uu(r,SN,_u.DSI);for(var i in n)s[i]=n[i]}catch(d){if(a.WTF)throw d}var l=lt.find(t,"/!SummaryInformation");if(l&&l.size>0)try{var c=uu(l,CN,_u.SI);for(var o in c)s[o]==null&&(s[o]=c[o])}catch(d){if(a.WTF)throw d}s.HeadingPairs&&s.TitlesOfParts&&(Jh(s.HeadingPairs,s.TitlesOfParts,s,a),delete s.HeadingPairs,delete s.TitlesOfParts)}function Pf(t,s){s||(s={}),_d(s),ch(),s.codepage&&ld(s.codepage);var a,r;if(t.FullPaths){if(lt.find(t,"/encryption"))throw new Error("File is password-protected");a=lt.find(t,"!CompObj"),r=lt.find(t,"/Workbook")||lt.find(t,"/Book")}else{switch(s.type){case"base64":t=ua(Js(t));break;case"binary":t=ua(t);break;case"buffer":break;case"array":Array.isArray(t)||(t=Array.prototype.slice.call(t));break}cs(t,0),r={content:t}}var n,i;if(a&&rC(a),s.bookProps&&!s.bookSheets)n={};else{var l=nt?"buffer":"array";if(r&&r.content)n=lC(r.content,s);else if((i=lt.find(t,"PerfectOffice_MAIN"))&&i.content)n=Qn.to_workbook(i.content,(s.type=l,s));else if((i=lt.find(t,"NativeContent_MAIN"))&&i.content)n=Qn.to_workbook(i.content,(s.type=l,s));else throw(i=lt.find(t,"MN0"))&&i.content?new Error("Unsupported Works 4 for Mac file"):new Error("Cannot find Workbook stream");s.bookVBA&&t.FullPaths&&lt.find(t,"/_VBA_PROJECT_CUR/VBA/dir")&&(n.vbaraw=G2(t))}var c={};return t.FullPaths&&cC(t,c,s),n.Props=n.Custprops=c,s.bookFiles&&(n.cfb=t),n}var Cl={0:{f:V4},1:{f:G4},2:{f:sS},3:{f:X4},4:{f:Z4},5:{f:tS},6:{f:nS},7:{f:Q4},8:{f:dS},9:{f:oS},10:{f:lS},11:{f:cS},12:{f:Y4},13:{f:aS},14:{f:K4},15:{f:J4},16:{f:_f},17:{f:iS},18:{f:eS},19:{f:yd},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:OS},40:{},42:{},43:{f:l2},44:{f:i2},45:{f:c2},46:{f:d2},47:{f:o2},48:{},49:{f:xN},50:{},51:{f:T2},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:of},62:{f:rS},63:{f:$2},64:{f:bS},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:ws,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:yS},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:W4},148:{f:H4,p:16},151:{f:mS},152:{},153:{f:IS},154:{},155:{},156:{f:PS},157:{},158:{},159:{T:1,f:C1},160:{T:-1},161:{T:1,f:Vr},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:xS},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:F2},336:{T:-1},337:{f:D2,T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:yo},357:{},358:{},359:{},360:{T:1},361:{},362:{f:cf},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:hS},427:{f:fS},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:gS},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:q4},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:uS},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:yo},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:H2},633:{T:1},634:{T:-1},635:{T:1,f:V2},636:{T:-1},637:{f:mN},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:SS},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:vS},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}},wo={6:{f:kc},10:{f:Ja},12:{f:Ut},13:{f:Ut},14:{f:$t},15:{f:$t},16:{f:bs},17:{f:$t},18:{f:$t},19:{f:Ut},20:{f:pu},21:{f:pu},23:{f:cf},24:{f:yu},25:{f:$t},26:{},27:{},28:{f:zw},29:{},34:{f:$t},35:{f:gu},38:{f:bs},39:{f:bs},40:{f:bs},41:{f:bs},42:{f:$t},43:{f:$t},47:{f:q1},49:{f:Nw},51:{f:Ut},60:{},61:{f:bw},64:{f:$t},65:{f:jw},66:{f:Ut},77:{},80:{},81:{},82:{},85:{f:Ut},89:{},90:{},91:{},92:{f:xw},93:{f:Vw},94:{},95:{f:$t},96:{},97:{},99:{f:$t},125:{f:of},128:{f:Dw},129:{f:uw},130:{f:Ut},131:{f:$t},132:{f:$t},133:{f:mw},134:{},140:{f:Zw},141:{f:Ut},144:{},146:{f:Xw},151:{},152:{},153:{},154:{},155:{},156:{f:Ut},157:{},158:{},160:{f:s1},161:{f:Qw},174:{},175:{},176:{},177:{},178:{},180:{},181:{},182:{},184:{},185:{},189:{f:Ew},190:{f:_w},193:{f:Ja},197:{},198:{},199:{},200:{},201:{},202:{f:$t},203:{},204:{},205:{},206:{},207:{},208:{},209:{},210:{},211:{},213:{},215:{},216:{},217:{},218:{f:Ut},220:{},221:{f:$t},222:{},224:{f:Tw},225:{f:dw},226:{f:Ja},227:{},229:{f:Uw},233:{},235:{},236:{},237:{},239:{},240:{},241:{},242:{},244:{},245:{},246:{},247:{},248:{},249:{},251:{},252:{f:hw},253:{f:ww},255:{f:fw},256:{},259:{},290:{},311:{},312:{},315:{},317:{f:tf},318:{},319:{},320:{},330:{},331:{},333:{},334:{},335:{},336:{},337:{},338:{},339:{},340:{},351:{},352:{f:$t},353:{f:Ja},401:{},402:{},403:{},404:{},405:{},406:{},407:{},408:{},425:{},426:{},427:{},428:{},429:{},430:{f:Pw},431:{f:$t},432:{},433:{},434:{},437:{},438:{f:Ww},439:{f:$t},440:{f:Gw},441:{},442:{f:Fi},443:{},444:{f:Ut},445:{},446:{},448:{f:Ja},449:{f:yw,r:2},450:{f:Ja},512:{f:hu},513:{f:t1},515:{f:Rw},516:{f:kw},517:{f:fu},519:{f:a1},520:{f:pw},523:{},545:{f:bu},549:{f:mu},566:{},574:{f:vw},638:{f:Aw},659:{},1048:{},1054:{f:Sw},1084:{},1212:{f:Lw},2048:{f:Yw},2049:{},2050:{},2051:{},2052:{},2053:{},2054:{},2055:{},2056:{},2057:{f:Gi},2058:{},2059:{},2060:{},2061:{},2062:{},2063:{},2064:{},2066:{},2067:{},2128:{},2129:{},2130:{},2131:{},2132:{},2133:{},2134:{},2135:{},2136:{},2137:{},2138:{},2146:{},2147:{r:12},2148:{},2149:{},2150:{},2151:{f:Ja},2152:{},2154:{},2155:{},2156:{},2161:{},2162:{},2164:{},2165:{},2166:{},2167:{},2168:{},2169:{},2170:{},2171:{},2172:{f:Kw,r:12},2173:{f:E2,r:12},2174:{},2175:{},2180:{},2181:{},2182:{},2183:{},2184:{},2185:{},2186:{},2187:{},2188:{f:$t,r:12},2189:{},2190:{r:12},2191:{},2192:{},2194:{},2195:{},2196:{f:Ow,r:12},2197:{},2198:{f:N2,r:12},2199:{},2200:{},2201:{},2202:{f:Mw,r:12},2203:{f:Ja},2204:{},2205:{},2206:{},2207:{},2211:{f:gw},2212:{},2213:{},2214:{},2215:{},4097:{},4098:{},4099:{},4102:{},4103:{},4105:{},4106:{},4107:{},4108:{},4109:{},4116:{},4117:{},4118:{},4119:{},4120:{},4121:{},4122:{},4123:{},4124:{},4125:{},4126:{},4127:{},4128:{},4129:{},4130:{},4132:{},4133:{},4134:{f:Ut},4135:{},4146:{},4147:{},4148:{},4149:{},4154:{},4156:{},4157:{},4158:{},4159:{},4160:{},4161:{},4163:{},4164:{f:e1},4165:{},4166:{},4168:{},4170:{},4171:{},4174:{},4175:{},4176:{},4177:{},4187:{},4188:{f:Jw},4189:{},4191:{},4192:{},4193:{},4194:{},4195:{},4196:{},4197:{},4198:{},4199:{},4200:{},0:{f:hu},1:{},2:{f:l1},3:{f:i1},4:{f:n1},5:{f:fu},7:{f:c1},8:{},9:{f:Gi},11:{},22:{f:Ut},30:{f:Cw},31:{},32:{},33:{f:bu},36:{},37:{f:mu},50:{f:o1},62:{},52:{},67:{},68:{f:Ut},69:{},86:{},126:{},127:{f:r1},135:{},136:{},137:{},145:{},148:{},149:{},150:{},169:{},171:{},188:{},191:{},192:{},194:{},195:{},214:{f:d1},223:{},234:{},354:{},421:{},518:{f:kc},521:{f:Gi},536:{f:yu},547:{f:gu},561:{},579:{},1030:{f:kc},1033:{f:Gi},1091:{},2157:{},2163:{},2177:{},2240:{},2241:{},2242:{},2243:{},2244:{},2245:{},2246:{},2247:{},2248:{},2249:{},2250:{},2251:{},2262:{r:12},29282:{}};function da(t,s,a,r){var n=s;if(!isNaN(n)){var i=(a||[]).length||0,l=t.next(4);l.write_shift(2,n),l.write_shift(2,i),i>0&&Uh(a)&&t.push(a)}}function Fu(t,s){var a=s||{},r=a.dense?[]:{};t=t.replace(/<!--.*?-->/g,"");var n=t.match(/<table/i);if(!n)throw new Error("Invalid HTML: could not find <table>");var i=t.match(/<\/table/i),l=n.index,c=i&&i.index||t.length,o=Rj(t.slice(l,c),/(:?<tr[^>]*>)/i,"<tr>"),d=-1,x=0,u=0,m=0,f={s:{r:1e7,c:1e7},e:{r:0,c:0}},g=[];for(l=0;l<o.length;++l){var h=o[l].trim(),p=h.slice(0,3).toLowerCase();if(p=="<tr"){if(++d,a.sheetRows&&a.sheetRows<=d){--d;break}x=0;continue}if(!(p!="<td"&&p!="<th")){var j=h.split(/<\/t[dh]>/i);for(c=0;c<j.length;++c){var v=j[c].trim();if(v.match(/<t[dh]/i)){for(var w=v,b=0;w.charAt(0)=="<"&&(b=w.indexOf(">"))>-1;)w=w.slice(b+1);for(var A=0;A<g.length;++A){var N=g[A];N.s.c==x&&N.s.r<d&&d<=N.e.r&&(x=N.e.c+1,A=-1)}var C=Ze(v.slice(0,v.indexOf(">")));m=C.colspan?+C.colspan:1,((u=+C.rowspan)>1||m>1)&&g.push({s:{r:d,c:x},e:{r:d+(u||1)-1,c:x+m-1}});var k=C.t||C["data-t"]||"";if(!w.length){x+=m;continue}if(w=_h(w),f.s.r>d&&(f.s.r=d),f.e.r<d&&(f.e.r=d),f.s.c>x&&(f.s.c=x),f.e.c<x&&(f.e.c=x),!w.length){x+=m;continue}var S={t:"s",v:w};a.raw||!w.trim().length||k=="s"||(w==="TRUE"?S={t:"b",v:!0}:w==="FALSE"?S={t:"b",v:!1}:isNaN(pa(w))?isNaN(bn(w).getDate())||(S={t:"d",v:ls(w)},a.cellDates||(S={t:"n",v:Ds(S.v)}),S.z=a.dateNF||et[14]):S={t:"n",v:pa(w)}),a.dense?(r[d]||(r[d]=[]),r[d][x]=S):r[Xe({r:d,c:x})]=S,x+=m}}}}return r["!ref"]=ct(f),g.length&&(r["!merges"]=g),r}function oC(t,s,a,r){for(var n=t["!merges"]||[],i=[],l=s.s.c;l<=s.e.c;++l){for(var c=0,o=0,d=0;d<n.length;++d)if(!(n[d].s.r>a||n[d].s.c>l)&&!(n[d].e.r<a||n[d].e.c<l)){if(n[d].s.r<a||n[d].s.c<l){c=-1;break}c=n[d].e.r-n[d].s.r+1,o=n[d].e.c-n[d].s.c+1;break}if(!(c<0)){var x=Xe({r:a,c:l}),u=r.dense?(t[a]||[])[l]:t[x],m=u&&u.v!=null&&(u.h||md(u.w||(Wa(u),u.w)||""))||"",f={};c>1&&(f.rowspan=c),o>1&&(f.colspan=o),r.editable?m='<span contenteditable="true">'+m+"</span>":u&&(f["data-t"]=u&&u.t||"z",u.v!=null&&(f["data-v"]=u.v),u.z!=null&&(f["data-z"]=u.z),u.l&&(u.l.Target||"#").charAt(0)!="#"&&(m='<a href="'+u.l.Target+'">'+m+"</a>")),f.id=(r.id||"sjs")+"-"+x,i.push(Zj("td",m,f))}}var g="<tr>";return g+i.join("")+"</tr>"}var dC='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',xC="</body></html>";function uC(t,s){var a=t.match(/<table[\s\S]*?>[\s\S]*?<\/table>/gi);if(!a||a.length==0)throw new Error("Invalid HTML: could not find <table>");if(a.length==1)return ur(Fu(a[0],s),s);var r=Td();return a.forEach(function(n,i){Dd(r,Fu(n,s),"Sheet"+(i+1))}),r}function mC(t,s,a){var r=[];return r.join("")+"<table"+(a&&a.id?' id="'+a.id+'"':"")+">"}function hC(t,s){var a=s||{},r=a.header!=null?a.header:dC,n=a.footer!=null?a.footer:xC,i=[r],l=En(t["!ref"]);a.dense=Array.isArray(t),i.push(mC(t,l,a));for(var c=l.s.r;c<=l.e.r;++c)i.push(oC(t,l,c,a));return i.push("</table>"+n),i.join("")}function If(t,s,a){var r=a||{},n=0,i=0;if(r.origin!=null)if(typeof r.origin=="number")n=r.origin;else{var l=typeof r.origin=="string"?Fs(r.origin):r.origin;n=l.r,i=l.c}var c=s.getElementsByTagName("tr"),o=Math.min(r.sheetRows||1e7,c.length),d={s:{r:0,c:0},e:{r:n,c:i}};if(t["!ref"]){var x=En(t["!ref"]);d.s.r=Math.min(d.s.r,x.s.r),d.s.c=Math.min(d.s.c,x.s.c),d.e.r=Math.max(d.e.r,x.e.r),d.e.c=Math.max(d.e.c,x.e.c),n==-1&&(d.e.r=n=x.e.r+1)}var u=[],m=0,f=t["!rows"]||(t["!rows"]=[]),g=0,h=0,p=0,j=0,v=0,w=0;for(t["!cols"]||(t["!cols"]=[]);g<c.length&&h<o;++g){var b=c[g];if(Tu(b)){if(r.display)continue;f[h]={hidden:!0}}var A=b.children;for(p=j=0;p<A.length;++p){var N=A[p];if(!(r.display&&Tu(N))){var C=N.hasAttribute("data-v")?N.getAttribute("data-v"):N.hasAttribute("v")?N.getAttribute("v"):_h(N.innerHTML),k=N.getAttribute("data-z")||N.getAttribute("z");for(m=0;m<u.length;++m){var S=u[m];S.s.c==j+i&&S.s.r<h+n&&h+n<=S.e.r&&(j=S.e.c+1-i,m=-1)}w=+N.getAttribute("colspan")||1,((v=+N.getAttribute("rowspan")||1)>1||w>1)&&u.push({s:{r:h+n,c:j+i},e:{r:h+n+(v||1)-1,c:j+i+(w||1)-1}});var F={t:"s",v:C},R=N.getAttribute("data-t")||N.getAttribute("t")||"";C!=null&&(C.length==0?F.t=R||"z":r.raw||C.trim().length==0||R=="s"||(C==="TRUE"?F={t:"b",v:!0}:C==="FALSE"?F={t:"b",v:!1}:isNaN(pa(C))?isNaN(bn(C).getDate())||(F={t:"d",v:ls(C)},r.cellDates||(F={t:"n",v:Ds(F.v)}),F.z=r.dateNF||et[14]):F={t:"n",v:pa(C)})),F.z===void 0&&k!=null&&(F.z=k);var T="",M=N.getElementsByTagName("A");if(M&&M.length)for(var H=0;H<M.length&&!(M[H].hasAttribute("href")&&(T=M[H].getAttribute("href"),T.charAt(0)!="#"));++H);T&&T.charAt(0)!="#"&&(F.l={Target:T}),r.dense?(t[h+n]||(t[h+n]=[]),t[h+n][j+i]=F):t[Xe({c:j+i,r:h+n})]=F,d.e.c<j+i&&(d.e.c=j+i),j+=w}}++h}return u.length&&(t["!merges"]=(t["!merges"]||[]).concat(u)),d.e.r=Math.max(d.e.r,h-1+n),t["!ref"]=ct(d),h>=o&&(t["!fullref"]=ct((d.e.r=c.length-g+h-1+n,d))),t}function $f(t,s){var a=s||{},r=a.dense?[]:{};return If(r,t,s)}function fC(t,s){return ur($f(t,s),s)}function Tu(t){var s="",a=pC(t);return a&&(s=a(t).getPropertyValue("display")),s||(s=t.style&&t.style.display),s==="none"}function pC(t){return t.ownerDocument.defaultView&&typeof t.ownerDocument.defaultView.getComputedStyle=="function"?t.ownerDocument.defaultView.getComputedStyle:typeof getComputedStyle=="function"?getComputedStyle:null}function gC(t){var s=t.replace(/[\t\r\n]/g," ").trim().replace(/ +/g," ").replace(/<text:s\/>/g," ").replace(/<text:s text:c="(\d+)"\/>/g,function(r,n){return Array(parseInt(n,10)+1).join(" ")}).replace(/<text:tab[^>]*\/>/g,"	").replace(/<text:line-break\/>/g,`
`),a=dt(s.replace(/<[^>]*>/g,""));return[a]}var Du={day:["d","dd"],month:["m","mm"],year:["y","yy"],hours:["h","hh"],minutes:["m","mm"],seconds:["s","ss"],"am-pm":["A/P","AM/PM"],"day-of-week":["ddd","dddd"],era:["e","ee"],quarter:["\\Qm",'m\\"th quarter"']};function Of(t,s){var a=s||{},r=hd(t),n=[],i,l,c={name:""},o="",d=0,x,u,m={},f=[],g=a.dense?[]:{},h,p,j={value:""},v="",w=0,b=[],A=-1,N=-1,C={s:{r:1e6,c:1e7},e:{r:0,c:0}},k=0,S={},F=[],R={},T=0,M=0,H=[],U=1,W=1,se=[],X={Names:[]},D={},le=["",""],de=[],E={},z="",O=0,P=!1,Z=!1,re=0;for(xi.lastIndex=0,r=r.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");h=xi.exec(r);)switch(h[3]=h[3].replace(/_.*$/,"")){case"table":case"å·¥ä½œè¡¨":h[1]==="/"?(C.e.c>=C.s.c&&C.e.r>=C.s.r?g["!ref"]=ct(C):g["!ref"]="A1:A1",a.sheetRows>0&&a.sheetRows<=C.e.r&&(g["!fullref"]=g["!ref"],C.e.r=a.sheetRows-1,g["!ref"]=ct(C)),F.length&&(g["!merges"]=F),H.length&&(g["!rows"]=H),x.name=x.åç§°||x.name,typeof JSON<"u"&&JSON.stringify(x),f.push(x.name),m[x.name]=g,Z=!1):h[0].charAt(h[0].length-2)!=="/"&&(x=Ze(h[0],!1),A=N=-1,C.s.r=C.s.c=1e7,C.e.r=C.e.c=0,g=a.dense?[]:{},F=[],H=[],Z=!0);break;case"table-row-group":h[1]==="/"?--k:++k;break;case"table-row":case"è¡Œ":if(h[1]==="/"){A+=U,U=1;break}if(u=Ze(h[0],!1),u.è¡Œå·?A=u.è¡Œå·-1:A==-1&&(A=0),U=+u["number-rows-repeated"]||1,U<10)for(re=0;re<U;++re)k>0&&(H[A+re]={level:k});N=-1;break;case"covered-table-cell":h[1]!=="/"&&++N,a.sheetStubs&&(a.dense?(g[A]||(g[A]=[]),g[A][N]={t:"z"}):g[Xe({r:A,c:N})]={t:"z"}),v="",b=[];break;case"table-cell":case"æ•°æ®":if(h[0].charAt(h[0].length-2)==="/")++N,j=Ze(h[0],!1),W=parseInt(j["number-columns-repeated"]||"1",10),p={t:"z",v:null},j.formula&&a.cellFormula!=!1&&(p.f=Cu(dt(j.formula))),(j.æ•°æ®ç±»åž‹||j["value-type"])=="string"&&(p.t="s",p.v=dt(j["string-value"]||""),a.dense?(g[A]||(g[A]=[]),g[A][N]=p):g[Xe({r:A,c:N})]=p),N+=W-1;else if(h[1]!=="/"){++N,v="",w=0,b=[],W=1;var ie=U?A+U-1:A;if(N>C.e.c&&(C.e.c=N),N<C.s.c&&(C.s.c=N),A<C.s.r&&(C.s.r=A),ie>C.e.r&&(C.e.r=ie),j=Ze(h[0],!1),de=[],E={},p={t:j.æ•°æ®ç±»åž‹||j["value-type"],v:null},a.cellFormula)if(j.formula&&(j.formula=dt(j.formula)),j["number-matrix-columns-spanned"]&&j["number-matrix-rows-spanned"]&&(T=parseInt(j["number-matrix-rows-spanned"],10)||0,M=parseInt(j["number-matrix-columns-spanned"],10)||0,R={s:{r:A,c:N},e:{r:A+T-1,c:N+M-1}},p.F=ct(R),se.push([R,p.F])),j.formula)p.f=Cu(j.formula);else for(re=0;re<se.length;++re)A>=se[re][0].s.r&&A<=se[re][0].e.r&&N>=se[re][0].s.c&&N<=se[re][0].e.c&&(p.F=se[re][1]);switch((j["number-columns-spanned"]||j["number-rows-spanned"])&&(T=parseInt(j["number-rows-spanned"],10)||0,M=parseInt(j["number-columns-spanned"],10)||0,R={s:{r:A,c:N},e:{r:A+T-1,c:N+M-1}},F.push(R)),j["number-columns-repeated"]&&(W=parseInt(j["number-columns-repeated"],10)),p.t){case"boolean":p.t="b",p.v=Nt(j["boolean-value"]);break;case"float":p.t="n",p.v=parseFloat(j.value);break;case"percentage":p.t="n",p.v=parseFloat(j.value);break;case"currency":p.t="n",p.v=parseFloat(j.value);break;case"date":p.t="d",p.v=ls(j["date-value"]),a.cellDates||(p.t="n",p.v=Ds(p.v)),p.z="m/d/yy";break;case"time":p.t="n",p.v=Fj(j["time-value"])/86400,a.cellDates&&(p.t="d",p.v=Yl(p.v)),p.z="HH:MM:SS";break;case"number":p.t="n",p.v=parseFloat(j.æ•°æ®æ•°å€¼);break;default:if(p.t==="string"||p.t==="text"||!p.t)p.t="s",j["string-value"]!=null&&(v=dt(j["string-value"]),b=[]);else throw new Error("Unsupported value type "+p.t)}}else{if(P=!1,p.t==="s"&&(p.v=v||"",b.length&&(p.R=b),P=w==0),D.Target&&(p.l=D),de.length>0&&(p.c=de,de=[]),v&&a.cellText!==!1&&(p.w=v),P&&(p.t="z",delete p.v),(!P||a.sheetStubs)&&!(a.sheetRows&&a.sheetRows<=A))for(var oe=0;oe<U;++oe){if(W=parseInt(j["number-columns-repeated"]||"1",10),a.dense)for(g[A+oe]||(g[A+oe]=[]),g[A+oe][N]=oe==0?p:os(p);--W>0;)g[A+oe][N+W]=os(p);else for(g[Xe({r:A+oe,c:N})]=p;--W>0;)g[Xe({r:A+oe,c:N+W})]=os(p);C.e.c<=N&&(C.e.c=N)}W=parseInt(j["number-columns-repeated"]||"1",10),N+=W-1,W=0,p={},v="",b=[]}D={};break;case"document":case"document-content":case"ç”µå­è¡¨æ ¼æ–‡æ¡£":case"spreadsheet":case"ä¸»ä½“":case"scripts":case"styles":case"font-face-decls":case"master-styles":if(h[1]==="/"){if((i=n.pop())[0]!==h[3])throw"Bad state: "+i}else h[0].charAt(h[0].length-2)!=="/"&&n.push([h[3],!0]);break;case"annotation":if(h[1]==="/"){if((i=n.pop())[0]!==h[3])throw"Bad state: "+i;E.t=v,b.length&&(E.R=b),E.a=z,de.push(E)}else h[0].charAt(h[0].length-2)!=="/"&&n.push([h[3],!1]);z="",O=0,v="",w=0,b=[];break;case"creator":h[1]==="/"?z=r.slice(O,h.index):O=h.index+h[0].length;break;case"meta":case"å…ƒæ•°æ®":case"settings":case"config-item-set":case"config-item-map-indexed":case"config-item-map-entry":case"config-item-map-named":case"shapes":case"frame":case"text-box":case"image":case"data-pilot-tables":case"list-style":case"form":case"dde-links":case"event-listeners":case"chart":if(h[1]==="/"){if((i=n.pop())[0]!==h[3])throw"Bad state: "+i}else h[0].charAt(h[0].length-2)!=="/"&&n.push([h[3],!1]);v="",w=0,b=[];break;case"scientific-number":break;case"currency-symbol":break;case"currency-style":break;case"number-style":case"percentage-style":case"date-style":case"time-style":if(h[1]==="/"){if(S[c.name]=o,(i=n.pop())[0]!==h[3])throw"Bad state: "+i}else h[0].charAt(h[0].length-2)!=="/"&&(o="",c=Ze(h[0],!1),n.push([h[3],!0]));break;case"script":break;case"libraries":break;case"automatic-styles":break;case"default-style":case"page-layout":break;case"style":break;case"map":break;case"font-face":break;case"paragraph-properties":break;case"table-properties":break;case"table-column-properties":break;case"table-row-properties":break;case"table-cell-properties":break;case"number":switch(n[n.length-1][0]){case"time-style":case"date-style":l=Ze(h[0],!1),o+=Du[h[3]][l.style==="long"?1:0];break}break;case"fraction":break;case"day":case"month":case"year":case"era":case"day-of-week":case"week-of-year":case"quarter":case"hours":case"minutes":case"seconds":case"am-pm":switch(n[n.length-1][0]){case"time-style":case"date-style":l=Ze(h[0],!1),o+=Du[h[3]][l.style==="long"?1:0];break}break;case"boolean-style":break;case"boolean":break;case"text-style":break;case"text":if(h[0].slice(-2)==="/>")break;if(h[1]==="/")switch(n[n.length-1][0]){case"number-style":case"date-style":case"time-style":o+=r.slice(d,h.index);break}else d=h.index+h[0].length;break;case"named-range":l=Ze(h[0],!1),le=Sc(l["cell-range-address"]);var ue={Name:l.name,Ref:le[0]+"!"+le[1]};Z&&(ue.Sheet=f.length),X.Names.push(ue);break;case"text-content":break;case"text-properties":break;case"embedded-text":break;case"body":case"ç”µå­è¡¨æ ¼":break;case"forms":break;case"table-column":break;case"table-header-rows":break;case"table-rows":break;case"table-column-group":break;case"table-header-columns":break;case"table-columns":break;case"null-date":break;case"graphic-properties":break;case"calculation-settings":break;case"named-expressions":break;case"label-range":break;case"label-ranges":break;case"named-expression":break;case"sort":break;case"sort-by":break;case"sort-groups":break;case"tab":break;case"line-break":break;case"span":break;case"p":case"æ–‡æœ¬ä¸²":if(["master-styles"].indexOf(n[n.length-1][0])>-1)break;if(h[1]==="/"&&(!j||!j["string-value"])){var Ne=gC(r.slice(w,h.index));v=(v.length>0?v+`
`:"")+Ne[0]}else Ze(h[0],!1),w=h.index+h[0].length;break;case"s":break;case"database-range":if(h[1]==="/")break;try{le=Sc(Ze(h[0])["target-range-address"]),m[le[0]]["!autofilter"]={ref:le[1]}}catch{}break;case"date":break;case"object":break;case"title":case"æ ‡é¢˜":break;case"desc":break;case"binary-data":break;case"table-source":break;case"scenario":break;case"iteration":break;case"content-validations":break;case"content-validation":break;case"help-message":break;case"error-message":break;case"database-ranges":break;case"filter":break;case"filter-and":break;case"filter-or":break;case"filter-condition":break;case"list-level-style-bullet":break;case"list-level-style-number":break;case"list-level-properties":break;case"sender-firstname":case"sender-lastname":case"sender-initials":case"sender-title":case"sender-position":case"sender-email":case"sender-phone-private":case"sender-fax":case"sender-company":case"sender-phone-work":case"sender-street":case"sender-city":case"sender-postal-code":case"sender-country":case"sender-state-or-province":case"author-name":case"author-initials":case"chapter":case"file-name":case"template-name":case"sheet-name":break;case"event-listener":break;case"initial-creator":case"creation-date":case"print-date":case"generator":case"document-statistic":case"user-defined":case"editing-duration":case"editing-cycles":break;case"config-item":break;case"page-number":break;case"page-count":break;case"time":break;case"cell-range-source":break;case"detective":break;case"operation":break;case"highlighted-range":break;case"data-pilot-table":case"source-cell-range":case"source-service":case"data-pilot-field":case"data-pilot-level":case"data-pilot-subtotals":case"data-pilot-subtotal":case"data-pilot-members":case"data-pilot-member":case"data-pilot-display-info":case"data-pilot-sort-info":case"data-pilot-layout-info":case"data-pilot-field-reference":case"data-pilot-groups":case"data-pilot-group":case"data-pilot-group-member":break;case"rect":break;case"dde-connection-decls":case"dde-connection-decl":case"dde-link":case"dde-source":break;case"properties":break;case"property":break;case"a":if(h[1]!=="/"){if(D=Ze(h[0],!1),!D.href)break;D.Target=dt(D.href),delete D.href,D.Target.charAt(0)=="#"&&D.Target.indexOf(".")>-1?(le=Sc(D.Target.slice(1)),D.Target="#"+le[0]+"!"+le[1]):D.Target.match(/^\.\.[\\\/]/)&&(D.Target=D.Target.slice(3))}break;case"table-protection":break;case"data-pilot-grand-total":break;case"office-document-common-attrs":break;default:switch(h[2]){case"dc:":case"calcext:":case"loext:":case"ooo:":case"chartooo:":case"draw:":case"style:":case"chart:":case"form:":case"uof:":case"è¡¨:":case"å­—:":break;default:if(a.WTF)throw new Error(h)}}var I={Sheets:m,SheetNames:f,Workbook:X};return a.bookSheets&&delete I.Sheets,I}function Ru(t,s){s=s||{},sa(t,"META-INF/manifest.xml")&&RN(zt(t,"META-INF/manifest.xml"),s);var a=Gs(t,"content.xml");if(!a)throw new Error("Missing content.xml in ODS / UOF file");var r=Of(vt(a),s);return sa(t,"meta.xml")&&(r.Props=Zh(zt(t,"meta.xml"))),r}function Pu(t,s){return Of(t,s)}/*! sheetjs (C) 2013-present SheetJS -- http://sheetjs.com */function Ad(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function ko(t){return typeof TextDecoder<"u"?new TextDecoder().decode(t):vt(zr(t))}function So(t){var s=t.reduce(function(n,i){return n+i.length},0),a=new Uint8Array(s),r=0;return t.forEach(function(n){a.set(n,r),r+=n.length}),a}function Iu(t){return t-=t>>1&1431655765,t=(t&858993459)+(t>>2&858993459),(t+(t>>4)&252645135)*16843009>>>24}function yC(t,s){for(var a=(t[s+15]&127)<<7|t[s+14]>>1,r=t[s+14]&1,n=s+13;n>=s;--n)r=r*256+t[n];return(t[s+15]&128?-r:r)*Math.pow(10,a-6176)}function fi(t,s){var a=s?s[0]:0,r=t[a]&127;e:if(t[a++]>=128&&(r|=(t[a]&127)<<7,t[a++]<128||(r|=(t[a]&127)<<14,t[a++]<128)||(r|=(t[a]&127)<<21,t[a++]<128)||(r+=(t[a]&127)*Math.pow(2,28),++a,t[a++]<128)||(r+=(t[a]&127)*Math.pow(2,35),++a,t[a++]<128)||(r+=(t[a]&127)*Math.pow(2,42),++a,t[a++]<128)))break e;return s&&(s[0]=a),r}function es(t){var s=0,a=t[s]&127;e:if(t[s++]>=128){if(a|=(t[s]&127)<<7,t[s++]<128||(a|=(t[s]&127)<<14,t[s++]<128)||(a|=(t[s]&127)<<21,t[s++]<128))break e;a|=(t[s]&127)<<28}return a}function vs(t){for(var s=[],a=[0];a[0]<t.length;){var r=a[0],n=fi(t,a),i=n&7;n=Math.floor(n/8);var l=0,c;if(n==0)break;switch(i){case 0:{for(var o=a[0];t[a[0]++]>=128;);c=t.slice(o,a[0])}break;case 5:l=4,c=t.slice(a[0],a[0]+l),a[0]+=l;break;case 1:l=8,c=t.slice(a[0],a[0]+l),a[0]+=l;break;case 2:l=fi(t,a),c=t.slice(a[0],a[0]+l),a[0]+=l;break;case 3:case 4:default:throw new Error("PB Type ".concat(i," for Field ").concat(n," at offset ").concat(r))}var d={data:c,type:i};s[n]==null?s[n]=[d]:s[n].push(d)}return s}function Ed(t,s){return(t==null?void 0:t.map(function(a){return s(a.data)}))||[]}function bC(t){for(var s,a=[],r=[0];r[0]<t.length;){var n=fi(t,r),i=vs(t.slice(r[0],r[0]+n));r[0]+=n;var l={id:es(i[1][0].data),messages:[]};i[2].forEach(function(c){var o=vs(c.data),d=es(o[3][0].data);l.messages.push({meta:o,data:t.slice(r[0],r[0]+d)}),r[0]+=d}),(s=i[3])!=null&&s[0]&&(l.merge=es(i[3][0].data)>>>0>0),a.push(l)}return a}function vC(t,s){if(t!=0)throw new Error("Unexpected Snappy chunk type ".concat(t));for(var a=[0],r=fi(s,a),n=[];a[0]<s.length;){var i=s[a[0]]&3;if(i==0){var l=s[a[0]++]>>2;if(l<60)++l;else{var c=l-59;l=s[a[0]],c>1&&(l|=s[a[0]+1]<<8),c>2&&(l|=s[a[0]+2]<<16),c>3&&(l|=s[a[0]+3]<<24),l>>>=0,l++,a[0]+=c}n.push(s.slice(a[0],a[0]+l)),a[0]+=l;continue}else{var o=0,d=0;if(i==1?(d=(s[a[0]]>>2&7)+4,o=(s[a[0]++]&224)<<3,o|=s[a[0]++]):(d=(s[a[0]++]>>2)+1,i==2?(o=s[a[0]]|s[a[0]+1]<<8,a[0]+=2):(o=(s[a[0]]|s[a[0]+1]<<8|s[a[0]+2]<<16|s[a[0]+3]<<24)>>>0,a[0]+=4)),n=[So(n)],o==0)throw new Error("Invalid offset 0");if(o>n[0].length)throw new Error("Invalid offset beyond length");if(d>=o)for(n.push(n[0].slice(-o)),d-=o;d>=n[n.length-1].length;)n.push(n[n.length-1]),d-=n[n.length-1].length;n.push(n[0].slice(-o,-o+d))}}var x=So(n);if(x.length!=r)throw new Error("Unexpected length: ".concat(x.length," != ").concat(r));return x}function jC(t){for(var s=[],a=0;a<t.length;){var r=t[a++],n=t[a]|t[a+1]<<8|t[a+2]<<16;a+=3,s.push(vC(r,t.slice(a,a+n))),a+=n}if(a!==t.length)throw new Error("data is not a valid framed stream!");return So(s)}function NC(t,s,a,r){var n=Ad(t),i=n.getUint32(4,!0),l=(r>1?12:8)+Iu(i&(r>1?3470:398))*4,c=-1,o=-1,d=NaN,x=new Date(2001,0,1);i&512&&(c=n.getUint32(l,!0),l+=4),l+=Iu(i&(r>1?12288:4096))*4,i&16&&(o=n.getUint32(l,!0),l+=4),i&32&&(d=n.getFloat64(l,!0),l+=8),i&64&&(x.setTime(x.getTime()+n.getFloat64(l,!0)*1e3),l+=8);var u;switch(t[2]){case 0:break;case 2:u={t:"n",v:d};break;case 3:u={t:"s",v:s[o]};break;case 5:u={t:"d",v:x};break;case 6:u={t:"b",v:d>0};break;case 7:u={t:"n",v:d/86400};break;case 8:u={t:"e",v:0};break;case 9:if(c>-1)u={t:"s",v:a[c]};else if(o>-1)u={t:"s",v:s[o]};else if(!isNaN(d))u={t:"n",v:d};else throw new Error("Unsupported cell type ".concat(t.slice(0,4)));break;default:throw new Error("Unsupported cell type ".concat(t.slice(0,4)))}return u}function wC(t,s,a){var r=Ad(t),n=r.getUint32(8,!0),i=12,l=-1,c=-1,o=NaN,d=NaN,x=new Date(2001,0,1);n&1&&(o=yC(t,i),i+=16),n&2&&(d=r.getFloat64(i,!0),i+=8),n&4&&(x.setTime(x.getTime()+r.getFloat64(i,!0)*1e3),i+=8),n&8&&(c=r.getUint32(i,!0),i+=4),n&16&&(l=r.getUint32(i,!0),i+=4);var u;switch(t[1]){case 0:break;case 2:u={t:"n",v:o};break;case 3:u={t:"s",v:s[c]};break;case 5:u={t:"d",v:x};break;case 6:u={t:"b",v:d>0};break;case 7:u={t:"n",v:d/86400};break;case 8:u={t:"e",v:0};break;case 9:if(l>-1)u={t:"s",v:a[l]};else throw new Error("Unsupported cell type ".concat(t[1]," : ").concat(n&31," : ").concat(t.slice(0,4)));break;case 10:u={t:"n",v:o};break;default:throw new Error("Unsupported cell type ".concat(t[1]," : ").concat(n&31," : ").concat(t.slice(0,4)))}return u}function kC(t,s,a){switch(t[0]){case 0:case 1:case 2:case 3:return NC(t,s,a,t[0]);case 5:return wC(t,s,a);default:throw new Error("Unsupported payload version ".concat(t[0]))}}function ir(t){var s=vs(t);return fi(s[1][0].data)}function $u(t,s){var a=vs(s.data),r=es(a[1][0].data),n=a[3],i=[];return(n||[]).forEach(function(l){var c=vs(l.data),o=es(c[1][0].data)>>>0;switch(r){case 1:i[o]=ko(c[3][0].data);break;case 8:{var d=t[ir(c[9][0].data)][0],x=vs(d.data),u=t[ir(x[1][0].data)][0],m=es(u.meta[1][0].data);if(m!=2001)throw new Error("2000 unexpected reference to ".concat(m));var f=vs(u.data);i[o]=f[3].map(function(g){return ko(g.data)}).join("")}break}}),i}function SC(t,s){var a,r,n,i,l,c,o,d,x,u,m,f,g,h,p=vs(t),j=es(p[1][0].data)>>>0,v=es(p[2][0].data)>>>0,w=((r=(a=p[8])==null?void 0:a[0])==null?void 0:r.data)&&es(p[8][0].data)>0||!1,b,A;if((i=(n=p[7])==null?void 0:n[0])!=null&&i.data&&s!=0)b=(c=(l=p[7])==null?void 0:l[0])==null?void 0:c.data,A=(d=(o=p[6])==null?void 0:o[0])==null?void 0:d.data;else if((u=(x=p[4])==null?void 0:x[0])!=null&&u.data&&s!=1)b=(f=(m=p[4])==null?void 0:m[0])==null?void 0:f.data,A=(h=(g=p[3])==null?void 0:g[0])==null?void 0:h.data;else throw"NUMBERS Tile missing ".concat(s," cell storage");for(var N=w?4:1,C=Ad(b),k=[],S=0;S<b.length/2;++S){var F=C.getUint16(S*2,!0);F<65535&&k.push([S,F])}if(k.length!=v)throw"Expected ".concat(v," cells, found ").concat(k.length);var R=[];for(S=0;S<k.length-1;++S)R[k[S][0]]=A.subarray(k[S][1]*N,k[S+1][1]*N);return k.length>=1&&(R[k[k.length-1][0]]=A.subarray(k[k.length-1][1]*N)),{R:j,cells:R}}function CC(t,s){var a,r=vs(s.data),n=(a=r==null?void 0:r[7])!=null&&a[0]?es(r[7][0].data)>>>0>0?1:0:-1,i=Ed(r[5],function(l){return SC(l,n)});return{nrows:es(r[4][0].data)>>>0,data:i.reduce(function(l,c){return l[c.R]||(l[c.R]=[]),c.cells.forEach(function(o,d){if(l[c.R][d])throw new Error("Duplicate cell r=".concat(c.R," c=").concat(d));l[c.R][d]=o}),l},[])}}function AC(t,s,a){var r,n=vs(s.data),i={s:{r:0,c:0},e:{r:0,c:0}};if(i.e.r=(es(n[6][0].data)>>>0)-1,i.e.r<0)throw new Error("Invalid row varint ".concat(n[6][0].data));if(i.e.c=(es(n[7][0].data)>>>0)-1,i.e.c<0)throw new Error("Invalid col varint ".concat(n[7][0].data));a["!ref"]=ct(i);var l=vs(n[4][0].data),c=$u(t,t[ir(l[4][0].data)][0]),o=(r=l[17])!=null&&r[0]?$u(t,t[ir(l[17][0].data)][0]):[],d=vs(l[3][0].data),x=0;d[1].forEach(function(u){var m=vs(u.data),f=t[ir(m[2][0].data)][0],g=es(f.meta[1][0].data);if(g!=6002)throw new Error("6001 unexpected reference to ".concat(g));var h=CC(t,f);h.data.forEach(function(p,j){p.forEach(function(v,w){var b=Xe({r:x+j,c:w}),A=kC(v,c,o);A&&(a[b]=A)})}),x+=h.nrows})}function EC(t,s){var a=vs(s.data),r={"!ref":"A1"},n=t[ir(a[2][0].data)],i=es(n[0].meta[1][0].data);if(i!=6001)throw new Error("6000 unexpected reference to ".concat(i));return AC(t,n[0],r),r}function _C(t,s){var a,r=vs(s.data),n={name:(a=r[1])!=null&&a[0]?ko(r[1][0].data):"",sheets:[]},i=Ed(r[2],ir);return i.forEach(function(l){t[l].forEach(function(c){var o=es(c.meta[1][0].data);o==6e3&&n.sheets.push(EC(t,c))})}),n}function FC(t,s){var a=Td(),r=vs(s.data),n=Ed(r[1],ir);if(n.forEach(function(i){t[i].forEach(function(l){var c=es(l.meta[1][0].data);if(c==2){var o=_C(t,l);o.sheets.forEach(function(d,x){Dd(a,d,x==0?o.name:o.name+"_"+x,!0)})}})}),a.SheetNames.length==0)throw new Error("Empty NUMBERS file");return a}function Ac(t){var s,a,r,n,i={},l=[];if(t.FullPaths.forEach(function(o){if(o.match(/\.iwpv2/))throw new Error("Unsupported password protection")}),t.FileIndex.forEach(function(o){if(o.name.match(/\.iwa$/)){var d;try{d=jC(o.content)}catch(u){return console.log("?? "+o.content.length+" "+(u.message||u))}var x;try{x=bC(d)}catch(u){return console.log("## "+(u.message||u))}x.forEach(function(u){i[u.id]=u.messages,l.push(u.id)})}}),!l.length)throw new Error("File has no messages");var c=((n=(r=(a=(s=i==null?void 0:i[1])==null?void 0:s[0])==null?void 0:a.meta)==null?void 0:r[1])==null?void 0:n[0].data)&&es(i[1][0].meta[1][0].data)==1&&i[1][0];if(c||l.forEach(function(o){i[o].forEach(function(d){var x=es(d.meta[1][0].data)>>>0;if(x==1)if(!c)c=d;else throw new Error("Document has multiple roots")})}),!c)throw new Error("Cannot find Document root");return FC(i,c)}function TC(t){return function(a){for(var r=0;r!=t.length;++r){var n=t[r];a[n[0]]===void 0&&(a[n[0]]=n[1]),n[2]==="n"&&(a[n[0]]=Number(a[n[0]]))}}}function _d(t){TC([["cellNF",!1],["cellHTML",!0],["cellFormula",!0],["cellStyles",!1],["cellText",!0],["cellDates",!1],["sheetStubs",!1],["sheetRows",0,"n"],["bookDeps",!1],["bookSheets",!1],["bookProps",!1],["bookFiles",!1],["bookVBA",!1],["password",""],["WTF",!1]])(t)}function DC(t){return rn.WS.indexOf(t)>-1?"sheet":t==rn.CS?"chart":t==rn.DS?"dialog":t==rn.MS?"macro":t&&t.length?t:"sheet"}function RC(t,s){if(!t)return 0;try{t=s.map(function(r){return r.id||(r.id=r.strRelID),[r.name,t["!id"][r.id].Target,DC(t["!id"][r.id].Type)]})}catch{return null}return!t||t.length===0?null:t}function PC(t,s,a,r,n,i,l,c,o,d,x,u){try{i[r]=Xn(Gs(t,a,!0),s);var m=zt(t,s),f;switch(c){case"sheet":f=BS(m,s,n,o,i[r],d,x,u);break;case"chart":if(f=zS(m,s,n,o,i[r],d,x,u),!f||!f["!drawel"])break;var g=Vn(f["!drawel"].Target,s),h=bo(g),p=M2(Gs(t,g,!0),Xn(Gs(t,h,!0),g)),j=Vn(p,g),v=bo(j);f=wS(Gs(t,j,!0),j,o,Xn(Gs(t,v,!0),j),d,f);break;case"macro":f=US(m,s,n,o,i[r],d,x,u);break;case"dialog":f=VS(m,s,n,o,i[r],d,x,u);break;default:throw new Error("Unrecognized sheet type "+c)}l[r]=f;var w=[];i&&i[r]&&Pa(i[r]).forEach(function(b){var A="";if(i[r][b].Type==rn.CMNT){A=Vn(i[r][b].Target,s);var N=GS(zt(t,A,!0),A,o);if(!N||!N.length)return;ju(f,N,!1)}i[r][b].Type==rn.TCMNT&&(A=Vn(i[r][b].Target,s),w=w.concat(z2(zt(t,A,!0),o)))}),w&&w.length&&ju(f,w,!0,o.people||[])}catch(b){if(o.WTF)throw b}}function ea(t){return t.charAt(0)=="/"?t.slice(1):t}function IC(t,s){if(vh(),s=s||{},_d(s),sa(t,"META-INF/manifest.xml")||sa(t,"objectdata.xml"))return Ru(t,s);if(sa(t,"Index/Document.iwa")){if(typeof Uint8Array>"u")throw new Error("NUMBERS file parsing requires Uint8Array support");if(typeof Ac<"u"){if(t.FileIndex)return Ac(t);var a=lt.utils.cfb_new();return Yx(t).forEach(function(H){$j(a,H,Ij(t,H))}),Ac(a)}throw new Error("Unsupported NUMBERS file")}if(!sa(t,"[Content_Types].xml"))throw sa(t,"index.xml.gz")?new Error("Unsupported NUMBERS 08 file"):sa(t,"index.xml")?new Error("Unsupported NUMBERS 09 file"):new Error("Unsupported ZIP file");var r=Yx(t),n=TN(Gs(t,"[Content_Types].xml")),i=!1,l,c;if(n.workbooks.length===0&&(c="xl/workbook.xml",zt(t,c,!0)&&n.workbooks.push(c)),n.workbooks.length===0){if(c="xl/workbook.bin",!zt(t,c,!0))throw new Error("Could not find workbook");n.workbooks.push(c),i=!0}n.workbooks[0].slice(-3)=="bin"&&(i=!0);var o={},d={};if(!s.bookSheets&&!s.bookProps){if(ei=[],n.sst)try{ei=WS(zt(t,ea(n.sst)),n.sst,s)}catch(H){if(s.WTF)throw H}s.cellStyles&&n.themes.length&&(o=qS(Gs(t,n.themes[0].replace(/^\//,""),!0)||"",n.themes[0],s)),n.style&&(d=HS(zt(t,ea(n.style)),n.style,o,s))}n.links.map(function(H){try{var U=Xn(Gs(t,bo(ea(H))),H);return ZS(zt(t,ea(H)),U,H,s)}catch{}});var x=MS(zt(t,ea(n.workbooks[0])),n.workbooks[0],s),u={},m="";n.coreprops.length&&(m=zt(t,ea(n.coreprops[0]),!0),m&&(u=Zh(m)),n.extprops.length!==0&&(m=zt(t,ea(n.extprops[0]),!0),m&&$N(m,u,s)));var f={};(!s.bookSheets||s.bookProps)&&n.custprops.length!==0&&(m=Gs(t,ea(n.custprops[0]),!0),m&&(f=LN(m,s)));var g={};if((s.bookSheets||s.bookProps)&&(x.Sheets?l=x.Sheets.map(function(U){return U.name}):u.Worksheets&&u.SheetNames.length>0&&(l=u.SheetNames),s.bookProps&&(g.Props=u,g.Custprops=f),s.bookSheets&&typeof l<"u"&&(g.SheetNames=l),s.bookSheets?g.SheetNames:s.bookProps))return g;l={};var h={};s.bookDeps&&n.calcchain&&(h=YS(zt(t,ea(n.calcchain)),n.calcchain));var p=0,j={},v,w;{var b=x.Sheets;u.Worksheets=b.length,u.SheetNames=[];for(var A=0;A!=b.length;++A)u.SheetNames[A]=b[A].name}var N=i?"bin":"xml",C=n.workbooks[0].lastIndexOf("/"),k=(n.workbooks[0].slice(0,C+1)+"_rels/"+n.workbooks[0].slice(C+1)+".rels").replace(/^\//,"");sa(t,k)||(k="xl/_rels/workbook."+N+".rels");var S=Xn(Gs(t,k,!0),k.replace(/_rels.*/,"s5s"));(n.metadata||[]).length>=1&&(s.xlmeta=JS(zt(t,ea(n.metadata[0])),n.metadata[0],s)),(n.people||[]).length>=1&&(s.people=U2(zt(t,ea(n.people[0])),s)),S&&(S=RC(S,x.Sheets));var F=zt(t,"xl/worksheets/sheet.xml",!0)?1:0;e:for(p=0;p!=u.Worksheets;++p){var R="sheet";if(S&&S[p]?(v="xl/"+S[p][1].replace(/[\/]?xl\//,""),sa(t,v)||(v=S[p][1]),sa(t,v)||(v=k.replace(/_rels\/.*$/,"")+S[p][1]),R=S[p][2]):(v="xl/worksheets/sheet"+(p+1-F)+"."+N,v=v.replace(/sheet0\./,"sheet.")),w=v.replace(/^(.*)(\/)([^\/]*)$/,"$1/_rels/$3.rels"),s&&s.sheets!=null)switch(typeof s.sheets){case"number":if(p!=s.sheets)continue e;break;case"string":if(u.SheetNames[p].toLowerCase()!=s.sheets.toLowerCase())continue e;break;default:if(Array.isArray&&Array.isArray(s.sheets)){for(var T=!1,M=0;M!=s.sheets.length;++M)typeof s.sheets[M]=="number"&&s.sheets[M]==p&&(T=1),typeof s.sheets[M]=="string"&&s.sheets[M].toLowerCase()==u.SheetNames[p].toLowerCase()&&(T=1);if(!T)continue e}}PC(t,v,w,u.SheetNames[p],p,j,l,R,s,x,o,d)}return g={Directory:n,Workbook:x,Props:u,Custprops:f,Deps:h,Sheets:l,SheetNames:u.SheetNames,Strings:ei,Styles:d,Themes:o,SSF:os(et)},s&&s.bookFiles&&(t.files?(g.keys=r,g.files=t.files):(g.keys=[],g.files={},t.FullPaths.forEach(function(H,U){H=H.replace(/^Root Entry[\/]/,""),g.keys.push(H),g.files[H]=t.FileIndex[U]}))),s&&s.bookVBA&&(n.vba.length>0?g.vbaraw=zt(t,ea(n.vba[0]),!0):n.defaults&&n.defaults.bin===W2&&(g.vbaraw=zt(t,"xl/vbaProject.bin",!0))),g}function $C(t,s){var a=s||{},r="Workbook",n=lt.find(t,r);try{if(r="/!DataSpaces/Version",n=lt.find(t,r),!n||!n.content)throw new Error("ECMA-376 Encrypted file missing "+r);if(E1(n.content),r="/!DataSpaces/DataSpaceMap",n=lt.find(t,r),!n||!n.content)throw new Error("ECMA-376 Encrypted file missing "+r);var i=F1(n.content);if(i.length!==1||i[0].comps.length!==1||i[0].comps[0].t!==0||i[0].name!=="StrongEncryptionDataSpace"||i[0].comps[0].v!=="EncryptedPackage")throw new Error("ECMA-376 Encrypted file bad "+r);if(r="/!DataSpaces/DataSpaceInfo/StrongEncryptionDataSpace",n=lt.find(t,r),!n||!n.content)throw new Error("ECMA-376 Encrypted file missing "+r);var l=T1(n.content);if(l.length!=1||l[0]!="StrongEncryptionTransform")throw new Error("ECMA-376 Encrypted file bad "+r);if(r="/!DataSpaces/TransformInfo/StrongEncryptionTransform/!Primary",n=lt.find(t,r),!n||!n.content)throw new Error("ECMA-376 Encrypted file missing "+r);R1(n.content)}catch{}if(r="/EncryptionInfo",n=lt.find(t,r),!n||!n.content)throw new Error("ECMA-376 Encrypted file missing "+r);var c=P1(n.content);if(r="/EncryptedPackage",n=lt.find(t,r),!n||!n.content)throw new Error("ECMA-376 Encrypted file missing "+r);if(c[0]==4&&typeof decrypt_agile<"u")return decrypt_agile(c[1],n.content,a.password||"",a);if(c[0]==2&&typeof decrypt_std76<"u")return decrypt_std76(c[1],n.content,a.password||"",a);throw new Error("File is password-protected")}function Fd(t,s){var a="";switch((s||{}).type||"base64"){case"buffer":return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]];case"base64":a=Js(t.slice(0,12));break;case"binary":a=t;break;case"array":return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]];default:throw new Error("Unrecognized type "+(s&&s.type||"undefined"))}return[a.charCodeAt(0),a.charCodeAt(1),a.charCodeAt(2),a.charCodeAt(3),a.charCodeAt(4),a.charCodeAt(5),a.charCodeAt(6),a.charCodeAt(7)]}function OC(t,s){return lt.find(t,"EncryptedPackage")?$C(t,s):Pf(t,s)}function LC(t,s){var a,r=t,n=s||{};return n.type||(n.type=nt&&Buffer.isBuffer(t)?"buffer":"base64"),a=Ch(r,n),IC(a,n)}function Lf(t,s){var a=0;e:for(;a<t.length;)switch(t.charCodeAt(a)){case 10:case 13:case 32:++a;break;case 60:return No(t.slice(a),s);default:break e}return ui.to_workbook(t,s)}function MC(t,s){var a="",r=Fd(t,s);switch(s.type){case"base64":a=Js(t);break;case"binary":a=t;break;case"buffer":a=t.toString("binary");break;case"array":a=Ir(t);break;default:throw new Error("Unrecognized type "+s.type)}return r[0]==239&&r[1]==187&&r[2]==191&&(a=vt(a)),s.type="binary",Lf(a,s)}function BC(t,s){var a=t;return s.type=="base64"&&(a=Js(a)),a=ci.utils.decode(1200,a.slice(2),"str"),s.type="binary",Lf(a,s)}function zC(t){return t.match(/[^\x00-\x7F]/)?Hn(t):t}function Ec(t,s,a,r){return r?(a.type="string",ui.to_workbook(t,a)):ui.to_workbook(s,a)}function Co(t,s){ch();var a=s||{};if(typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer)return Co(new Uint8Array(t),(a=os(a),a.type="array",a));typeof Uint8Array<"u"&&t instanceof Uint8Array&&!a.type&&(a.type=typeof Deno<"u"?"buffer":"array");var r=t,n=[0,0,0,0],i=!1;if(a.cellStyles&&(a.cellNF=!0,a.sheetStubs=!0),dn={},a.dateNF&&(dn.dateNF=a.dateNF),a.type||(a.type=nt&&Buffer.isBuffer(t)?"buffer":"base64"),a.type=="file"&&(a.type=nt?"buffer":"binary",r=Ej(t),typeof Uint8Array<"u"&&!nt&&(a.type="array")),a.type=="string"&&(i=!0,a.type="binary",a.codepage=65001,r=zC(t)),a.type=="array"&&typeof Uint8Array<"u"&&t instanceof Uint8Array&&typeof ArrayBuffer<"u"){var l=new ArrayBuffer(3),c=new Uint8Array(l);if(c.foo="bar",!c.foo)return a=os(a),a.type="array",Co(cd(r),a)}switch((n=Fd(r,a))[0]){case 208:if(n[1]===207&&n[2]===17&&n[3]===224&&n[4]===161&&n[5]===177&&n[6]===26&&n[7]===225)return OC(lt.read(r,a),a);break;case 9:if(n[1]<=8)return Pf(r,a);break;case 60:return No(r,a);case 73:if(n[1]===73&&n[2]===42&&n[3]===0)throw new Error("TIFF Image File is not a spreadsheet");if(n[1]===68)return f1(r,a);break;case 84:if(n[1]===65&&n[2]===66&&n[3]===76)return m1.to_workbook(r,a);break;case 80:return n[1]===75&&n[2]<9&&n[3]<9?LC(r,a):Ec(t,r,a,i);case 239:return n[3]===60?No(r,a):Ec(t,r,a,i);case 255:if(n[1]===254)return BC(r,a);if(n[1]===0&&n[2]===2&&n[3]===0)return Qn.to_workbook(r,a);break;case 0:if(n[1]===0&&(n[2]>=2&&n[3]===0||n[2]===0&&(n[3]===8||n[3]===9)))return Qn.to_workbook(r,a);break;case 3:case 131:case 139:case 140:return vu.to_workbook(r,a);case 123:if(n[1]===92&&n[2]===114&&n[3]===116)return W1.to_workbook(r,a);break;case 10:case 13:case 32:return MC(r,a);case 137:if(n[1]===80&&n[2]===78&&n[3]===71)throw new Error("PNG Image File is not a spreadsheet");break}return x1.indexOf(n[0])>-1&&n[2]<=12&&n[3]<=31?vu.to_workbook(r,a):Ec(t,r,a,i)}function UC(t,s,a,r,n,i,l,c){var o=ds(a),d=c.defval,x=c.raw||!Object.prototype.hasOwnProperty.call(c,"raw"),u=!0,m=n===1?[]:{};if(n!==1)if(Object.defineProperty)try{Object.defineProperty(m,"__rowNum__",{value:a,enumerable:!1})}catch{m.__rowNum__=a}else m.__rowNum__=a;if(!l||t[a])for(var f=s.s.c;f<=s.e.c;++f){var g=l?t[a][f]:t[r[f]+o];if(g===void 0||g.t===void 0){if(d===void 0)continue;i[f]!=null&&(m[i[f]]=d);continue}var h=g.v;switch(g.t){case"z":if(h==null)break;continue;case"e":h=h==0?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+g.t)}if(i[f]!=null){if(h==null)if(g.t=="e"&&h===null)m[i[f]]=null;else if(d!==void 0)m[i[f]]=d;else if(x&&h===null)m[i[f]]=null;else continue;else m[i[f]]=x&&(g.t!=="n"||g.t==="n"&&c.rawNumbers!==!1)?h:Wa(g,h,c);h!=null&&(u=!1)}}return{row:m,isempty:u}}function Ao(t,s){if(t==null||t["!ref"]==null)return[];var a={t:"n",v:0},r=0,n=1,i=[],l=0,c="",o={s:{r:0,c:0},e:{r:0,c:0}},d=s||{},x=d.range!=null?d.range:t["!ref"];switch(d.header===1?r=1:d.header==="A"?r=2:Array.isArray(d.header)?r=3:d.header==null&&(r=0),typeof x){case"string":o=Dt(x);break;case"number":o=Dt(t["!ref"]),o.s.r=x;break;default:o=x}r>0&&(n=0);var u=ds(o.s.r),m=[],f=[],g=0,h=0,p=Array.isArray(t),j=o.s.r,v=0,w={};p&&!t[j]&&(t[j]=[]);var b=d.skipHidden&&t["!cols"]||[],A=d.skipHidden&&t["!rows"]||[];for(v=o.s.c;v<=o.e.c;++v)if(!(b[v]||{}).hidden)switch(m[v]=Kt(v),a=p?t[j][v]:t[m[v]+u],r){case 1:i[v]=v-o.s.c;break;case 2:i[v]=m[v];break;case 3:i[v]=d.header[v-o.s.c];break;default:if(a==null&&(a={w:"__EMPTY",t:"s"}),c=l=Wa(a,null,d),h=w[l]||0,!h)w[l]=1;else{do c=l+"_"+h++;while(w[c]);w[l]=h,w[c]=1}i[v]=c}for(j=o.s.r+n;j<=o.e.r;++j)if(!(A[j]||{}).hidden){var N=UC(t,o,j,m,r,i,p,d);(N.isempty===!1||(r===1?d.blankrows!==!1:d.blankrows))&&(f[g++]=N.row)}return f.length=g,f}var Ou=/"/g;function VC(t,s,a,r,n,i,l,c){for(var o=!0,d=[],x="",u=ds(a),m=s.s.c;m<=s.e.c;++m)if(r[m]){var f=c.dense?(t[a]||[])[m]:t[r[m]+u];if(f==null)x="";else if(f.v!=null){o=!1,x=""+(c.rawNumbers&&f.t=="n"?f.v:Wa(f,null,c));for(var g=0,h=0;g!==x.length;++g)if((h=x.charCodeAt(g))===n||h===i||h===34||c.forceQuotes){x='"'+x.replace(Ou,'""')+'"';break}x=="ID"&&(x='"ID"')}else f.f!=null&&!f.F?(o=!1,x="="+f.f,x.indexOf(",")>=0&&(x='"'+x.replace(Ou,'""')+'"')):x="";d.push(x)}return c.blankrows===!1&&o?null:d.join(l)}function Mf(t,s){var a=[],r=s??{};if(t==null||t["!ref"]==null)return"";var n=Dt(t["!ref"]),i=r.FS!==void 0?r.FS:",",l=i.charCodeAt(0),c=r.RS!==void 0?r.RS:`
`,o=c.charCodeAt(0),d=new RegExp((i=="|"?"\\|":i)+"+$"),x="",u=[];r.dense=Array.isArray(t);for(var m=r.skipHidden&&t["!cols"]||[],f=r.skipHidden&&t["!rows"]||[],g=n.s.c;g<=n.e.c;++g)(m[g]||{}).hidden||(u[g]=Kt(g));for(var h=0,p=n.s.r;p<=n.e.r;++p)(f[p]||{}).hidden||(x=VC(t,n,p,u,l,o,i,r),x!=null&&(r.strip&&(x=x.replace(d,"")),(x||r.blankrows!==!1)&&a.push((h++?c:"")+x)));return delete r.dense,a.join("")}function HC(t,s){s||(s={}),s.FS="	",s.RS=`
`;var a=Mf(t,s);return a}function qC(t){var s="",a,r="";if(t==null||t["!ref"]==null)return[];var n=Dt(t["!ref"]),i="",l=[],c,o=[],d=Array.isArray(t);for(c=n.s.c;c<=n.e.c;++c)l[c]=Kt(c);for(var x=n.s.r;x<=n.e.r;++x)for(i=ds(x),c=n.s.c;c<=n.e.c;++c)if(s=l[c]+i,a=d?(t[x]||[])[c]:t[s],r="",a!==void 0){if(a.F!=null){if(s=a.F,!a.f)continue;r=a.f,s.indexOf(":")==-1&&(s=s+":"+s)}if(a.f!=null)r=a.f;else{if(a.t=="z")continue;if(a.t=="n"&&a.v!=null)r=""+a.v;else if(a.t=="b")r=a.v?"TRUE":"FALSE";else if(a.w!==void 0)r="'"+a.w;else{if(a.v===void 0)continue;a.t=="s"?r="'"+a.v:r=""+a.v}}o[o.length]=s+"="+r}return o}function Bf(t,s,a){var r=a||{},n=+!r.skipHeader,i=t||{},l=0,c=0;if(i&&r.origin!=null)if(typeof r.origin=="number")l=r.origin;else{var o=typeof r.origin=="string"?Fs(r.origin):r.origin;l=o.r,c=o.c}var d,x={s:{c:0,r:0},e:{c,r:l+s.length-1+n}};if(i["!ref"]){var u=Dt(i["!ref"]);x.e.c=Math.max(x.e.c,u.e.c),x.e.r=Math.max(x.e.r,u.e.r),l==-1&&(l=u.e.r+1,x.e.r=l+s.length-1+n)}else l==-1&&(l=0,x.e.r=s.length-1+n);var m=r.header||[],f=0;s.forEach(function(h,p){Pa(h).forEach(function(j){(f=m.indexOf(j))==-1&&(m[f=m.length]=j);var v=h[j],w="z",b="",A=Xe({c:c+f,r:l+p+n});d=pi(i,A),v&&typeof v=="object"&&!(v instanceof Date)?i[A]=v:(typeof v=="number"?w="n":typeof v=="boolean"?w="b":typeof v=="string"?w="s":v instanceof Date?(w="d",r.cellDates||(w="n",v=Ds(v)),b=r.dateNF||et[14]):v===null&&r.nullError&&(w="e",v=0),d?(d.t=w,d.v=v,delete d.w,delete d.R,b&&(d.z=b)):i[A]=d={t:w,v},b&&(d.z=b))})}),x.e.c=Math.max(x.e.c,c+m.length-1);var g=ds(l);if(n)for(f=0;f<m.length;++f)i[Kt(f+c)+g]={t:"s",v:m[f]};return i["!ref"]=ct(x),i}function WC(t,s){return Bf(null,t,s)}function pi(t,s,a){if(typeof s=="string"){if(Array.isArray(t)){var r=Fs(s);return t[r.r]||(t[r.r]=[]),t[r.r][r.c]||(t[r.r][r.c]={t:"z"})}return t[s]||(t[s]={t:"z"})}return typeof s!="number"?pi(t,Xe(s)):pi(t,Xe({r:s,c:a||0}))}function GC(t,s){if(typeof s=="number"){if(s>=0&&t.SheetNames.length>s)return s;throw new Error("Cannot find sheet # "+s)}else if(typeof s=="string"){var a=t.SheetNames.indexOf(s);if(a>-1)return a;throw new Error("Cannot find sheet name |"+s+"|")}else throw new Error("Cannot find sheet |"+s+"|")}function Td(){return{SheetNames:[],Sheets:{}}}function Dd(t,s,a,r){var n=1;if(!a)for(;n<=65535&&t.SheetNames.indexOf(a="Sheet"+n)!=-1;++n,a=void 0);if(!a||t.SheetNames.length>=65535)throw new Error("Too many worksheets");if(r&&t.SheetNames.indexOf(a)>=0){var i=a.match(/(^.*?)(\d+)$/);n=i&&+i[2]||0;var l=i&&i[1]||a;for(++n;n<=65535&&t.SheetNames.indexOf(a=l+n)!=-1;++n);}if(TS(a),t.SheetNames.indexOf(a)>=0)throw new Error("Worksheet with name |"+a+"| already exists!");return t.SheetNames.push(a),t.Sheets[a]=s,a}function YC(t,s,a){t.Workbook||(t.Workbook={}),t.Workbook.Sheets||(t.Workbook.Sheets=[]);var r=GC(t,s);switch(t.Workbook.Sheets[r]||(t.Workbook.Sheets[r]={}),a){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+a)}t.Workbook.Sheets[r].Hidden=a}function ZC(t,s){return t.z=s,t}function zf(t,s,a){return s?(t.l={Target:s},a&&(t.l.Tooltip=a)):delete t.l,t}function JC(t,s,a){return zf(t,"#"+s,a)}function XC(t,s,a){t.c||(t.c=[]),t.c.push({t:s,a:a||"SheetJS"})}function KC(t,s,a,r){for(var n=typeof s!="string"?s:Dt(s),i=typeof s=="string"?s:ct(s),l=n.s.r;l<=n.e.r;++l)for(var c=n.s.c;c<=n.e.c;++c){var o=pi(t,l,c);o.t="n",o.F=i,delete o.v,l==n.s.r&&c==n.s.c&&(o.f=a,r&&(o.D=!0))}return t}var QC={encode_col:Kt,encode_row:ds,encode_cell:Xe,encode_range:ct,decode_col:gd,decode_row:pd,split_cell:dN,decode_cell:Fs,decode_range:En,format_cell:Wa,sheet_add_aoa:Hh,sheet_add_json:Bf,sheet_add_dom:If,aoa_to_sheet:_n,json_to_sheet:WC,table_to_sheet:$f,table_to_book:fC,sheet_to_csv:Mf,sheet_to_txt:HC,sheet_to_json:Ao,sheet_to_html:hC,sheet_to_formulae:qC,sheet_to_row_object_array:Ao,sheet_get_cell:pi,book_new:Td,book_append_sheet:Dd,book_set_sheet_visibility:YC,cell_set_number_format:ZC,cell_set_hyperlink:zf,cell_set_internal_link:JC,cell_add_comment:XC,sheet_set_array_formula:KC,consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}};const e3=()=>{const[t,s]=y.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>s(!0),className:"fixed bottom-6 right-6 bg-primary-600 hover:bg-primary-700 text-white p-4 rounded-full shadow-lg z-50 transition-all",title:"Help & Guide",children:e.jsx(wg,{size:24})}),t&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-dark-900 rounded-lg max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-dark-900 border-b border-gray-700 p-6 flex items-center justify-between",children:[e.jsx("h2",{className:"text-2xl font-bold text-white",children:"Bulk Upload Guide"}),e.jsx("button",{onClick:()=>s(!1),className:"p-2 hover:bg-dark-800 rounded-lg",children:e.jsx(Le,{size:24,className:"text-gray-400"})})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("section",{children:[e.jsx("h3",{className:"text-xl font-semibold text-white mb-4",children:"Quick Start"}),e.jsxs("ol",{className:"list-decimal list-inside space-y-2 text-gray-300",children:[e.jsx("li",{children:'Download the template using the "Download Template" button'}),e.jsx("li",{children:"Fill in your employee data following the format"}),e.jsx("li",{children:"Upload the file or paste Google Sheets URL"}),e.jsx("li",{children:'Click "Validate" to check for errors'}),e.jsx("li",{children:"Review validation results and fix any errors"}),e.jsx("li",{children:'Click "Upload Employees" to complete the import'})]})]}),e.jsxs("section",{children:[e.jsx("h3",{className:"text-xl font-semibold text-white mb-4",children:"Required Fields"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx("div",{className:"bg-dark-800 p-4 rounded-lg",children:e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx(Te,{size:20,className:"text-green-500 mt-1 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-white font-medium",children:"firstName"}),e.jsx("p",{className:"text-gray-400 text-sm",children:"Employee's first name"})]})]})}),e.jsx("div",{className:"bg-dark-800 p-4 rounded-lg",children:e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx(Te,{size:20,className:"text-green-500 mt-1 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-white font-medium",children:"lastName"}),e.jsx("p",{className:"text-gray-400 text-sm",children:"Employee's last name"})]})]})}),e.jsx("div",{className:"bg-dark-800 p-4 rounded-lg",children:e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx(Te,{size:20,className:"text-green-500 mt-1 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-white font-medium",children:"email"}),e.jsx("p",{className:"text-gray-400 text-sm",children:"Must be unique (e.g., john@example.com)"})]})]})}),e.jsx("div",{className:"bg-dark-800 p-4 rounded-lg",children:e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx(Te,{size:20,className:"text-green-500 mt-1 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-white font-medium",children:"phone"}),e.jsx("p",{className:"text-gray-400 text-sm",children:"10-15 digits (e.g., 1234567890)"})]})]})}),e.jsx("div",{className:"bg-dark-800 p-4 rounded-lg",children:e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx(Te,{size:20,className:"text-green-500 mt-1 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-white font-medium",children:"department"}),e.jsx("p",{className:"text-gray-400 text-sm",children:"Department name or ID"})]})]})}),e.jsx("div",{className:"bg-dark-800 p-4 rounded-lg",children:e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx(Te,{size:20,className:"text-green-500 mt-1 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-white font-medium",children:"designation"}),e.jsx("p",{className:"text-gray-400 text-sm",children:"Job title/position"})]})]})}),e.jsx("div",{className:"bg-dark-800 p-4 rounded-lg",children:e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx(Te,{size:20,className:"text-green-500 mt-1 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-white font-medium",children:"joiningDate"}),e.jsx("p",{className:"text-gray-400 text-sm",children:"Format: YYYY-MM-DD (e.g., 2024-01-01)"})]})]})})]})]}),e.jsxs("section",{children:[e.jsx("h3",{className:"text-xl font-semibold text-white mb-4",children:"Data Format Examples"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-dark-800 p-4 rounded-lg",children:[e.jsx("p",{className:"text-white font-medium mb-2",children:"Date Format"}),e.jsx("code",{className:"text-green-400",children:"YYYY-MM-DD"}),e.jsx("p",{className:"text-gray-400 text-sm mt-1",children:"Example: 2024-01-15, 1990-05-20"})]}),e.jsxs("div",{className:"bg-dark-800 p-4 rounded-lg",children:[e.jsx("p",{className:"text-white font-medium mb-2",children:"Gender"}),e.jsx("code",{className:"text-green-400",children:"male, female, other"})]}),e.jsxs("div",{className:"bg-dark-800 p-4 rounded-lg",children:[e.jsx("p",{className:"text-white font-medium mb-2",children:"Blood Group"}),e.jsx("code",{className:"text-green-400",children:"A+, A-, B+, B-, AB+, AB-, O+, O-"})]}),e.jsxs("div",{className:"bg-dark-800 p-4 rounded-lg",children:[e.jsx("p",{className:"text-white font-medium mb-2",children:"Employment Type"}),e.jsx("code",{className:"text-green-400",children:"full-time, part-time, contract, intern"})]}),e.jsxs("div",{className:"bg-dark-800 p-4 rounded-lg",children:[e.jsx("p",{className:"text-white font-medium mb-2",children:"Status"}),e.jsx("code",{className:"text-green-400",children:"active, inactive, terminated, on-leave"})]})]})]}),e.jsxs("section",{children:[e.jsx("h3",{className:"text-xl font-semibold text-white mb-4",children:"Common Errors & Solutions"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"bg-red-900/20 border border-red-500/50 p-4 rounded-lg",children:e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx(mt,{size:20,className:"text-red-400 mt-1 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-red-400 font-medium",children:"Email already exists"}),e.jsx("p",{className:"text-gray-300 text-sm",children:"Check for duplicate emails in your file and database"})]})]})}),e.jsx("div",{className:"bg-red-900/20 border border-red-500/50 p-4 rounded-lg",children:e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx(mt,{size:20,className:"text-red-400 mt-1 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-red-400 font-medium",children:"Department not found"}),e.jsx("p",{className:"text-gray-300 text-sm",children:"Create the department first or use exact department name"})]})]})}),e.jsx("div",{className:"bg-red-900/20 border border-red-500/50 p-4 rounded-lg",children:e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx(mt,{size:20,className:"text-red-400 mt-1 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-red-400 font-medium",children:"Invalid date format"}),e.jsx("p",{className:"text-gray-300 text-sm",children:"Use YYYY-MM-DD format (e.g., 2024-01-01)"})]})]})})]})]}),e.jsxs("section",{children:[e.jsx("h3",{className:"text-xl font-semibold text-white mb-4",children:"Google Sheets Integration"}),e.jsxs("div",{className:"bg-blue-900/20 border border-blue-500/50 p-4 rounded-lg",children:[e.jsx("p",{className:"text-white font-medium mb-2",children:"For Public Sheets:"}),e.jsxs("ol",{className:"list-decimal list-inside space-y-1 text-gray-300 text-sm",children:[e.jsx("li",{children:"Open your Google Sheet"}),e.jsx("li",{children:"Click Share â†’ Get link"}),e.jsx("li",{children:'Set to "Anyone with the link can view"'}),e.jsx("li",{children:"Copy and paste the URL in the bulk upload page"})]})]})]}),e.jsxs("section",{children:[e.jsx("h3",{className:"text-xl font-semibold text-white mb-4",children:"Best Practices"}),e.jsxs("ul",{className:"space-y-2 text-gray-300",children:[e.jsxs("li",{className:"flex items-start space-x-2",children:[e.jsx(Te,{size:20,className:"text-green-500 mt-1 flex-shrink-0"}),e.jsx("span",{children:"Start with a small batch (5-10 records) to test"})]}),e.jsxs("li",{className:"flex items-start space-x-2",children:[e.jsx(Te,{size:20,className:"text-green-500 mt-1 flex-shrink-0"}),e.jsx("span",{children:"Ensure all departments exist before uploading"})]}),e.jsxs("li",{className:"flex items-start space-x-2",children:[e.jsx(Te,{size:20,className:"text-green-500 mt-1 flex-shrink-0"}),e.jsx("span",{children:"Use consistent date and phone formats throughout"})]}),e.jsxs("li",{className:"flex items-start space-x-2",children:[e.jsx(Te,{size:20,className:"text-green-500 mt-1 flex-shrink-0"}),e.jsx("span",{children:"Always validate before uploading"})]}),e.jsxs("li",{className:"flex items-start space-x-2",children:[e.jsx(Te,{size:20,className:"text-green-500 mt-1 flex-shrink-0"}),e.jsx("span",{children:"Keep a backup of your original data"})]})]})]})]}),e.jsx("div",{className:"sticky bottom-0 bg-dark-900 border-t border-gray-700 p-6",children:e.jsx("button",{onClick:()=>s(!1),className:"btn-primary w-full",children:"Got it!"})})]})})]})},t3=()=>{const t=Je(),[s,a]=y.useState("file"),[r,n]=y.useState(null),[i,l]=y.useState(""),[c,o]=y.useState([]),[d,x]=y.useState(null),[u,m]=y.useState(!1),[f,g]=y.useState(!1),[h,p]=y.useState(0),j=async()=>{try{const S=(await J.get("/employees/bulk/template")).data.data,F=Px.unparse(S),R=new Blob([F],{type:"text/csv;charset=utf-8;"}),T=document.createElement("a"),M=URL.createObjectURL(R);T.setAttribute("href",M),T.setAttribute("download","employee_bulk_upload_template.csv"),T.style.visibility="hidden",document.body.appendChild(T),T.click(),document.body.removeChild(T),_.success("Template downloaded successfully")}catch(k){_.error("Failed to download template"),console.error("Template download error:",k)}},v=k=>{const S=k.target.files[0];if(S){const F=S.name.split(".").pop().toLowerCase();if(!["csv","xlsx","xls"].includes(F)){_.error("Please upload a CSV or Excel file");return}n(S),w(S)}},w=k=>{m(!0);const S=k.name.split(".").pop().toLowerCase();if(S==="csv")Px.parse(k,{header:!0,skipEmptyLines:!0,complete:F=>{o(F.data),m(!1),_.success(`Parsed ${F.data.length} records from CSV`)},error:F=>{_.error("Failed to parse CSV file"),console.error("CSV parse error:",F),m(!1)}});else if(["xlsx","xls"].includes(S)){const F=new FileReader;F.onload=R=>{try{const T=new Uint8Array(R.target.result),M=Co(T,{type:"array"}),H=M.Sheets[M.SheetNames[0]],U=QC.sheet_to_json(H);o(U),m(!1),_.success(`Parsed ${U.length} records from Excel`)}catch(T){_.error("Failed to parse Excel file"),console.error("Excel parse error:",T),m(!1)}},F.readAsArrayBuffer(k)}},b=k=>{const S=k.match(/\/spreadsheets\/d\/([a-zA-Z0-9-_]+)/);return S?S[1]:null},A=async()=>{var S,F,R;if(!i){_.error("Please enter a Google Sheets URL");return}const k=b(i);if(!k){_.error("Invalid Google Sheets URL");return}m(!0);try{const T=await J.post("/employees/google-sheets/fetch",{spreadsheetId:k,range:"Sheet1!A:AG"});o(T.data.data.employees),_.success(`Fetched ${T.data.data.total} records from Google Sheets`)}catch(T){((S=T.response)==null?void 0:S.status)===403?_.error("Sheet is private. Please make it public or use OAuth authentication."):_.error(((R=(F=T.response)==null?void 0:F.data)==null?void 0:R.message)||"Failed to fetch Google Sheets data"),console.error("Google Sheets fetch error:",T)}finally{m(!1)}},N=async()=>{if(c.length===0){_.error("No data to validate");return}m(!0);try{const k=await J.post("/employees/bulk/validate",{employees:c});x(k.data.data),k.data.data.invalid===0?_.success(`All ${k.data.data.valid} records are valid!`):_.error(`${k.data.data.invalid} records have validation errors`)}catch(k){_.error("Validation failed"),console.error("Validation error:",k)}finally{m(!1)}},C=async()=>{var k,S;if(c.length===0){_.error("No data to upload");return}g(!0),p(0);try{const F=setInterval(()=>{p(T=>T>=90?(clearInterval(F),T):T+10)},200),R=await J.post("/employees/bulk/create",{employees:c});clearInterval(F),p(100),_.success(R.data.message),setTimeout(()=>{t("/employees")},2e3)}catch(F){_.error(((S=(k=F.response)==null?void 0:k.data)==null?void 0:S.message)||"Upload failed"),console.error("Upload error:",F)}finally{g(!1)}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("button",{onClick:()=>t("/employees"),className:"p-2 hover:bg-dark-800 rounded-lg",children:e.jsx(xt,{size:20,className:"text-gray-400"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-white",children:"Bulk Employee Upload"}),e.jsx("p",{className:"text-gray-400 mt-1",children:"Import employees from CSV, Excel, or Google Sheets"})]})]}),e.jsxs("button",{onClick:j,className:"btn-outline flex items-center space-x-2",children:[e.jsx(Mt,{size:20}),e.jsx("span",{children:"Download Template"})]})]}),e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"flex space-x-4 border-b border-gray-700 pb-4",children:[e.jsxs("button",{onClick:()=>a("file"),className:`px-4 py-2 rounded-lg flex items-center space-x-2 ${s==="file"?"bg-primary-600 text-white":"bg-dark-800 text-gray-400 hover:bg-dark-700"}`,children:[e.jsx(js,{size:20}),e.jsx("span",{children:"Upload File"})]}),e.jsxs("button",{onClick:()=>a("google-sheets"),className:`px-4 py-2 rounded-lg flex items-center space-x-2 ${s==="google-sheets"?"bg-primary-600 text-white":"bg-dark-800 text-gray-400 hover:bg-dark-700"}`,children:[e.jsx(Nr,{size:20}),e.jsx("span",{children:"Google Sheets"})]})]}),s==="file"&&e.jsx("div",{className:"mt-6 space-y-4",children:e.jsxs("div",{className:"border-2 border-dashed border-gray-600 rounded-lg p-8 text-center",children:[e.jsx("input",{type:"file",accept:".csv,.xlsx,.xls",onChange:v,className:"hidden",id:"file-upload"}),e.jsxs("label",{htmlFor:"file-upload",className:"cursor-pointer",children:[e.jsx(js,{size:48,className:"mx-auto text-gray-400 mb-4"}),e.jsx("p",{className:"text-white mb-2",children:r?r.name:"Click to upload or drag and drop"}),e.jsx("p",{className:"text-gray-400 text-sm",children:"CSV, XLSX, or XLS files supported"})]})]})}),s==="google-sheets"&&e.jsx("div",{className:"mt-6 space-y-4",children:e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Google Sheets URL"}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(kg,{size:20,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",value:i,onChange:k=>l(k.target.value),placeholder:"https://docs.google.com/spreadsheets/d/...",className:"input-field pl-10"})]}),e.jsx("button",{onClick:A,disabled:u,className:"btn-primary",children:u?"Fetching...":"Fetch Data"})]}),e.jsx("p",{className:"text-gray-400 text-sm mt-2",children:"Note: The Google Sheet must be publicly accessible or you need to authenticate"})]})})]}),c.length>0&&e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h2",{className:"text-lg font-semibold text-white",children:["Data Preview (",c.length," records)"]}),e.jsx("div",{className:"flex space-x-2",children:e.jsx("button",{onClick:N,disabled:u,className:"btn-outline flex items-center space-x-2",children:u?e.jsxs(e.Fragment,{children:[e.jsx(xr,{size:20,className:"animate-spin"}),e.jsx("span",{children:"Validating..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(mt,{size:20}),e.jsx("span",{children:"Validate"})]})})})]}),d&&e.jsxs("div",{className:"mb-4 grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx("div",{className:"bg-dark-800 p-4 rounded-lg",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Te,{size:20,className:"text-green-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-400 text-sm",children:"Valid Records"}),e.jsx("p",{className:"text-2xl font-bold text-white",children:d.valid})]})]})}),e.jsx("div",{className:"bg-dark-800 p-4 rounded-lg",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Qe,{size:20,className:"text-red-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-400 text-sm",children:"Invalid Records"}),e.jsx("p",{className:"text-2xl font-bold text-white",children:d.invalid})]})]})}),e.jsx("div",{className:"bg-dark-800 p-4 rounded-lg",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Nr,{size:20,className:"text-blue-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-400 text-sm",children:"Total Records"}),e.jsx("p",{className:"text-2xl font-bold text-white",children:d.total})]})]})})]}),e.jsxs("div",{className:"overflow-x-auto",children:[e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-gray-700",children:[e.jsx("th",{className:"text-left py-3 px-4 text-gray-400 font-medium",children:"Row"}),e.jsx("th",{className:"text-left py-3 px-4 text-gray-400 font-medium",children:"Name"}),e.jsx("th",{className:"text-left py-3 px-4 text-gray-400 font-medium",children:"Email"}),e.jsx("th",{className:"text-left py-3 px-4 text-gray-400 font-medium",children:"Phone"}),e.jsx("th",{className:"text-left py-3 px-4 text-gray-400 font-medium",children:"Department"}),e.jsx("th",{className:"text-left py-3 px-4 text-gray-400 font-medium",children:"Status"})]})}),e.jsx("tbody",{children:c.slice(0,10).map((k,S)=>{var T;const F=(T=d==null?void 0:d.results)==null?void 0:T.find(M=>M.row===S+1),R=(F==null?void 0:F.isValid)!==!1;return e.jsxs("tr",{className:`border-b border-gray-800 ${R?"":"bg-red-900/20"}`,children:[e.jsx("td",{className:"py-3 px-4 text-gray-300",children:S+1}),e.jsxs("td",{className:"py-3 px-4 text-white",children:[k.firstName," ",k.lastName]}),e.jsx("td",{className:"py-3 px-4 text-gray-300",children:k.email}),e.jsx("td",{className:"py-3 px-4 text-gray-300",children:k.phone}),e.jsx("td",{className:"py-3 px-4 text-gray-300",children:k.department}),e.jsx("td",{className:"py-3 px-4",children:F?R?e.jsxs("span",{className:"flex items-center space-x-1 text-green-500",children:[e.jsx(Te,{size:16}),e.jsx("span",{children:"Valid"})]}):e.jsxs("span",{className:"flex items-center space-x-1 text-red-500",children:[e.jsx(Qe,{size:16}),e.jsx("span",{children:"Invalid"})]}):e.jsx("span",{className:"text-gray-400",children:"Not validated"})})]},S)})})]}),c.length>10&&e.jsxs("p",{className:"text-gray-400 text-sm mt-2 text-center",children:["Showing first 10 of ",c.length," records"]})]}),d&&d.invalid>0&&e.jsxs("div",{className:"mt-4 bg-red-900/20 border border-red-500/50 rounded-lg p-4",children:[e.jsxs("h3",{className:"text-red-400 font-semibold mb-2 flex items-center space-x-2",children:[e.jsx(mt,{size:20}),e.jsx("span",{children:"Validation Errors"})]}),e.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:d.results.filter(k=>!k.isValid).map((k,S)=>e.jsxs("div",{className:"text-sm",children:[e.jsxs("p",{className:"text-white font-medium",children:["Row ",k.row,":"]}),e.jsx("ul",{className:"list-disc list-inside text-red-300 ml-4",children:k.errors.map((F,R)=>e.jsx("li",{children:F},R))})]},S))})]})]}),f&&e.jsxs("div",{className:"card",children:[e.jsx("h3",{className:"text-white font-semibold mb-4",children:"Upload Progress"}),e.jsx("div",{className:"w-full bg-gray-700 rounded-full h-4",children:e.jsx("div",{className:"bg-primary-600 h-4 rounded-full transition-all duration-300",style:{width:`${h}%`}})}),e.jsxs("p",{className:"text-gray-400 text-sm mt-2 text-center",children:[h,"%"]})]}),c.length>0&&e.jsxs("div",{className:"flex items-center justify-end space-x-4",children:[e.jsx("button",{onClick:()=>{o([]),x(null),n(null),l("")},className:"btn-outline",children:"Clear Data"}),e.jsxs("button",{onClick:C,disabled:f||d&&d.invalid>0,className:"btn-primary flex items-center space-x-2",children:[e.jsx(js,{size:20}),e.jsx("span",{children:f?"Uploading...":"Upload Employees"})]})]}),e.jsx(e3,{})]})},s3=()=>{const{user:t}=Rt(),[s,a]=y.useState([]),[r,n]=y.useState(!0),[i,l]=y.useState("all");y.useEffect(()=>{c()},[]);const c=async()=>{try{const g=await J.get("/leave");a(g.data.data)}catch{_.error("Failed to load leaves")}finally{n(!1)}},o=async g=>{try{await J.put(`/leave/${g}/approve`),_.success("Leave approved successfully"),c()}catch{_.error("Failed to approve leave")}},d=async g=>{const h=prompt("Enter rejection reason:");if(h)try{await J.put(`/leave/${g}/reject`,{rejectionReason:h}),_.success("Leave rejected"),c()}catch{_.error("Failed to reject leave")}},x=s.filter(g=>i==="all"||g.status===i),u=g=>({pending:"badge-warning",approved:"badge-success",rejected:"badge-danger",cancelled:"badge-default"})[g]||"badge-default",m=g=>({sick:"badge-danger",casual:"badge-info",earned:"badge-success",maternity:"badge-warning",paternity:"badge-warning",unpaid:"badge-default"})[g]||"badge-default",f=(t==null?void 0:t.role)==="admin"||(t==null?void 0:t.role)==="hr";return r?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"w-12 h-12 border-4 border-primary-600 border-t-transparent rounded-full animate-spin"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-white",children:"Leave Management"}),e.jsx("p",{className:"text-gray-400 mt-1",children:"Manage leave requests"})]}),e.jsxs(ns,{to:"/leave/apply",className:"btn-primary flex items-center space-x-2",children:[e.jsx(qe,{size:20}),e.jsx("span",{children:"Apply Leave"})]})]}),e.jsx("div",{className:"card",children:e.jsx("div",{className:"flex items-center space-x-4",children:e.jsxs("select",{value:i,onChange:g=>l(g.target.value),className:"input-field w-48",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"approved",children:"Approved"}),e.jsx("option",{value:"rejected",children:"Rejected"}),e.jsx("option",{value:"cancelled",children:"Cancelled"})]})})}),e.jsx("div",{className:"card p-0",children:e.jsx("div",{className:"table-container",children:e.jsxs("table",{className:"table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Employee"}),e.jsx("th",{children:"Leave Type"}),e.jsx("th",{children:"Start Date"}),e.jsx("th",{children:"End Date"}),e.jsx("th",{children:"Days"}),e.jsx("th",{children:"Reason"}),e.jsx("th",{children:"Status"}),f&&e.jsx("th",{children:"Actions"})]})}),e.jsx("tbody",{children:x.map(g=>{var h,p,j;return e.jsxs("tr",{children:[e.jsx("td",{children:e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium text-white",children:[(h=g.employee)==null?void 0:h.firstName," ",(p=g.employee)==null?void 0:p.lastName]}),e.jsx("p",{className:"text-sm text-gray-400",children:(j=g.employee)==null?void 0:j.employeeCode})]})}),e.jsx("td",{children:e.jsx("span",{className:`badge ${m(g.leaveType)}`,children:g.leaveType})}),e.jsx("td",{children:new Date(g.startDate).toLocaleDateString()}),e.jsx("td",{children:new Date(g.endDate).toLocaleDateString()}),e.jsx("td",{children:g.numberOfDays}),e.jsx("td",{className:"max-w-xs truncate",children:g.reason}),e.jsx("td",{children:e.jsx("span",{className:`badge ${u(g.status)}`,children:g.status})}),f&&e.jsx("td",{children:g.status==="pending"&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>o(g._id),className:"p-2 text-green-400 hover:bg-dark-800 rounded",title:"Approve",children:e.jsx(gn,{size:16})}),e.jsx("button",{onClick:()=>d(g._id),className:"p-2 text-red-400 hover:bg-dark-800 rounded",title:"Reject",children:e.jsx(Le,{size:16})})]})})]},g._id)})})]})})}),x.length===0&&e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-gray-400",children:"No leave requests found"})})]})},a3=()=>{const t=Je(),{user:s}=Rt(),[a,r]=y.useState(!1),[n,i]=y.useState({leaveType:"Personal Leave",startDate:"",endDate:"",reason:""}),l=d=>{i({...n,[d.target.name]:d.target.value})},c=()=>{if(n.startDate&&n.endDate){const d=new Date(n.startDate),x=new Date(n.endDate),u=Math.abs(x-d);return Math.ceil(u/(1e3*60*60*24))+1}return 0},o=async d=>{var u,m;d.preventDefault(),r(!0);const x=c();if(x<=0){_.error("Invalid date range"),r(!1);return}try{await J.post("/leave",{...n,numberOfDays:x,employee:s.employeeId}),_.success("Leave application submitted successfully"),t("/leave")}catch(f){_.error(((m=(u=f.response)==null?void 0:u.data)==null?void 0:m.message)||"Failed to apply leave")}finally{r(!1)}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("button",{onClick:()=>t("/leave"),className:"p-2 hover:bg-dark-800 rounded-lg",children:e.jsx(xt,{size:20,className:"text-gray-400"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-white",children:"Apply for Leave"}),e.jsx("p",{className:"text-gray-400 mt-1",children:"Submit your leave request"})]})]}),e.jsx("form",{onSubmit:o,className:"max-w-2xl",children:e.jsxs("div",{className:"card space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Leave Type *"}),e.jsxs("select",{name:"leaveType",value:n.leaveType,onChange:l,className:"input-field",required:!0,children:[e.jsx("option",{value:"Personal Leave",children:"Personal Leave (Annual)"}),e.jsx("option",{value:"Sick Leave",children:"Sick Leave"}),e.jsx("option",{value:"Comp Offs",children:"Comp Offs"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Start Date *"}),e.jsx("input",{type:"date",name:"startDate",value:n.startDate,onChange:l,className:"input-field",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"End Date *"}),e.jsx("input",{type:"date",name:"endDate",value:n.endDate,onChange:l,className:"input-field",min:n.startDate,required:!0})]})]}),n.startDate&&n.endDate&&e.jsx("div",{className:"bg-primary-600/10 border border-primary-600/30 rounded-lg p-4",children:e.jsxs("p",{className:"text-primary-400",children:["Total Days: ",e.jsx("span",{className:"font-bold",children:c()})]})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Reason *"}),e.jsx("textarea",{name:"reason",value:n.reason,onChange:l,rows:"4",className:"input-field",placeholder:"Enter reason for leave...",required:!0})]}),e.jsxs("div",{className:"flex items-center justify-end space-x-4 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>t("/leave"),className:"btn-outline",children:"Cancel"}),e.jsxs("button",{type:"submit",disabled:a,className:"btn-primary flex items-center space-x-2",children:[e.jsx(Rs,{size:20}),e.jsx("span",{children:a?"Submitting...":"Submit Application"})]})]})]})})]})},r3=()=>{const t=[{type:"Comp Offs",total:5,used:2,remaining:3,color:"bg-blue-500"},{type:"Personal Leave",total:12,used:5,remaining:7,color:"bg-green-500"},{type:"Sick Leave",total:7,used:2,remaining:5,color:"bg-red-500"}];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-white",children:"Leave Balance"}),e.jsx("p",{className:"text-gray-400 mt-1",children:"View your leave balance and history"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsx("div",{className:"card",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-400 mb-1",children:"Total Leaves"}),e.jsx("h3",{className:"text-2xl font-bold text-white",children:"142"})]}),e.jsx("div",{className:"w-12 h-12 bg-blue-500 rounded-lg flex items-center justify-center",children:e.jsx(Oe,{size:24,className:"text-white"})})]})}),e.jsx("div",{className:"card",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-400 mb-1",children:"Used Leaves"}),e.jsx("h3",{className:"text-2xl font-bold text-white",children:"15"})]}),e.jsx("div",{className:"w-12 h-12 bg-red-500 rounded-lg flex items-center justify-center",children:e.jsx(Ks,{size:24,className:"text-white"})})]})}),e.jsx("div",{className:"card",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-400 mb-1",children:"Remaining Leaves"}),e.jsx("h3",{className:"text-2xl font-bold text-white",children:"127"})]}),e.jsx("div",{className:"w-12 h-12 bg-green-500 rounded-lg flex items-center justify-center",children:e.jsx(Oe,{size:24,className:"text-white"})})]})})]}),e.jsxs("div",{className:"card",children:[e.jsx("h2",{className:"text-lg font-semibold text-white mb-6",children:"Leave Balance by Type"}),e.jsx("div",{className:"space-y-6",children:t.map((s,a)=>e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-white font-medium",children:s.type}),e.jsxs("span",{className:"text-gray-400 text-sm",children:[s.used," / ",s.total," days used"]})]}),e.jsx("div",{className:"w-full bg-dark-800 rounded-full h-3",children:e.jsx("div",{className:`${s.color} h-3 rounded-full transition-all duration-300`,style:{width:`${s.used/s.total*100}%`}})}),e.jsxs("div",{className:"flex items-center justify-between mt-2",children:[e.jsxs("span",{className:"text-sm text-gray-500",children:["Remaining: ",s.remaining," days"]}),e.jsxs("span",{className:"text-sm text-gray-500",children:[Math.round(s.remaining/s.total*100),"% available"]})]})]},a))})]}),e.jsxs("div",{className:"card",children:[e.jsx("h2",{className:"text-lg font-semibold text-white mb-4",children:"Recent Leave History"}),e.jsx("div",{className:"space-y-4",children:[{type:"Personal Leave",dates:"Jan 15 - Jan 17, 2024",days:3,status:"Approved"},{type:"Sick Leave",dates:"Dec 20 - Dec 21, 2023",days:2,status:"Approved"},{type:"Comp Offs",dates:"Nov 10 - Nov 12, 2023",days:3,status:"Approved"}].map((s,a)=>e.jsxs("div",{className:"flex items-center justify-between py-3 border-b border-dark-800 last:border-0",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-white font-medium",children:s.type}),e.jsx("p",{className:"text-sm text-gray-400",children:s.dates})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-white",children:[s.days," days"]}),e.jsx("span",{className:"badge badge-success text-xs",children:s.status})]})]},a))})]})]})},n3=()=>{const[t,s]=y.useState(new Date),[a,r]=y.useState({}),[n,i]=y.useState(!0),[l,c]=y.useState(null),[o,d]=y.useState({department:"",leaveType:""}),[x,u]=y.useState([]),[m,f]=y.useState(!1),g=["Personal Leave","Sick Leave","Comp Offs"];y.useEffect(()=>{h(),p()},[t,o]);const h=async()=>{try{const k=await J.get("/departments");u(k.data.data||[])}catch(k){console.error("Error fetching departments:",k)}},p=async()=>{var k;try{i(!0);const S=t.getFullYear(),F=t.getMonth(),R=new Date(S,F,1).toISOString(),T=new Date(S,F+1,0).toISOString(),M={startDate:R,endDate:T,...o.department&&{department:o.department},...o.leaveType&&{leaveType:o.leaveType}},H=await J.get("/dashboard/leave-calendar",{params:M});r(((k=H.data.data)==null?void 0:k.calendar)||{})}catch(S){console.error("Error fetching leave calendar:",S),_.error("Failed to load leave calendar")}finally{i(!1)}},j=()=>{const k=t.getFullYear(),S=t.getMonth(),F=new Date(k,S,1),T=new Date(k,S+1,0).getDate(),M=F.getDay(),H=[];for(let U=0;U<M;U++)H.push(null);for(let U=1;U<=T;U++)H.push(new Date(k,S,U));return H},v=k=>{if(!k)return[];const S=k.toISOString().split("T")[0];return a[S]||[]},w=k=>{s(S=>{const F=new Date(S);return k==="prev"?F.setMonth(F.getMonth()-1):F.setMonth(F.getMonth()+1),F})},b=k=>k.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),A=k=>{if(!k)return!1;const S=new Date;return k.toDateString()===S.toDateString()},N=j(),C=l?v(l):[];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-white",children:"Leave Calendar"}),e.jsx("p",{className:"text-gray-400 mt-1",children:"View employees on leave by date"})]}),e.jsxs("button",{onClick:()=>f(!m),className:"btn-outline flex items-center space-x-2",children:[e.jsx(Vs,{size:18}),e.jsx("span",{children:"Filters"})]})]}),m&&e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-white",children:"Filters"}),e.jsx("button",{onClick:()=>f(!1),className:"text-gray-400 hover:text-white",children:e.jsx(Le,{size:20})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Department"}),e.jsxs("select",{value:o.department,onChange:k=>d({...o,department:k.target.value}),className:"input-field",children:[e.jsx("option",{value:"",children:"All Departments"}),x.map(k=>e.jsx("option",{value:k._id,children:k.name},k._id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Leave Type"}),e.jsxs("select",{value:o.leaveType,onChange:k=>d({...o,leaveType:k.target.value}),className:"input-field",children:[e.jsx("option",{value:"",children:"All Leave Types"}),g.map(k=>e.jsx("option",{value:k,children:k},k))]})]})]})]}),e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("button",{onClick:()=>w("prev"),className:"p-2 hover:bg-dark-800 rounded-lg transition-colors",children:e.jsx(Bl,{size:20,className:"text-gray-400"})}),e.jsx("h2",{className:"text-xl font-bold text-white",children:t.toLocaleDateString("en-US",{month:"long",year:"numeric"})}),e.jsx("button",{onClick:()=>w("next"),className:"p-2 hover:bg-dark-800 rounded-lg transition-colors",children:e.jsx(Nn,{size:20,className:"text-gray-400"})})]}),n?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"w-12 h-12 border-4 border-primary-600 border-t-transparent rounded-full animate-spin"})}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-7 gap-2 mb-4",children:[["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(k=>e.jsx("div",{className:"text-center text-sm font-semibold text-gray-400 py-2",children:k},k)),N.map((k,S)=>{const F=v(k),R=A(k);return e.jsx("div",{onClick:()=>k&&c(k),className:`
                      min-h-[80px] p-2 rounded-lg border transition-all cursor-pointer
                      ${k?"border-dark-800 hover:border-primary-600":"border-transparent"}
                      ${R?"bg-primary-600/20 border-primary-600":"bg-dark-800/50"}
                      ${l&&k&&k.toDateString()===l.toDateString()?"ring-2 ring-primary-600":""}
                    `,children:k&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:`text-sm font-medium mb-1 ${R?"text-primary-400":"text-gray-300"}`,children:k.getDate()}),F.length>0&&e.jsxs("div",{className:"space-y-1",children:[F.slice(0,2).map((T,M)=>e.jsx("div",{className:"text-xs px-1 py-0.5 rounded bg-yellow-500/20 text-yellow-400 truncate",title:`${T.employeeName} - ${T.leaveType}`,children:T.employeeName.split(" ")[0]},M)),F.length>2&&e.jsxs("div",{className:"text-xs text-gray-400",children:["+",F.length-2," more"]})]})]})},S)})]}),l&&C.length>0&&e.jsxs("div",{className:"mt-6 pt-6 border-t border-dark-800",children:[e.jsxs("h3",{className:"text-lg font-semibold text-white mb-4",children:["Leaves on ",b(l)]}),e.jsx("div",{className:"space-y-3",children:C.map(k=>e.jsx("div",{className:"bg-dark-800/50 rounded-lg p-4",children:e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(Ue,{size:16,className:"text-gray-400"}),e.jsx("h4",{className:"font-semibold text-white",children:k.employeeName}),k.employeeCode&&e.jsxs("span",{className:"text-xs text-gray-400",children:["(",k.employeeCode,")"]})]}),e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("p",{className:"text-gray-400",children:[e.jsx("span",{className:"text-white font-medium",children:"Leave Type:"})," ",k.leaveType]}),e.jsxs("p",{className:"text-gray-400",children:[e.jsx("span",{className:"text-white font-medium",children:"Duration:"})," ",new Date(k.startDate).toLocaleDateString()," - ",new Date(k.endDate).toLocaleDateString()," ","(",k.numberOfDays," day",k.numberOfDays!==1?"s":"",")"]}),k.reason&&e.jsxs("p",{className:"text-gray-400",children:[e.jsx("span",{className:"text-white font-medium",children:"Reason:"})," ",k.reason]})]})]})})},k.id))})]})]})]})]})},Lu=()=>{const[t,s]=y.useState([]),[a,r]=y.useState(!0),[n,i]=y.useState(""),[l,c]=y.useState("");y.useEffect(()=>{o()},[]);const o=async()=>{try{const x={};n&&(x.startDate=n),l&&(x.endDate=l);const u=await J.get("/attendance",{params:x});s(u.data.data)}catch{_.error("Failed to load attendance")}finally{r(!1)}},d=x=>({present:"badge-success",absent:"badge-danger","half-day":"badge-warning","on-leave":"badge-info",holiday:"badge-default",weekend:"badge-default"})[x]||"badge-default";return a?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"w-12 h-12 border-4 border-primary-600 border-t-transparent rounded-full animate-spin"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-white",children:"Attendance"}),e.jsx("p",{className:"text-gray-400 mt-1",children:"View attendance records"})]}),e.jsx("div",{className:"card",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Start Date"}),e.jsx("input",{type:"date",value:n,onChange:x=>i(x.target.value),className:"input-field"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"End Date"}),e.jsx("input",{type:"date",value:l,onChange:x=>c(x.target.value),className:"input-field"})]}),e.jsx("div",{className:"flex items-end",children:e.jsxs("button",{onClick:o,className:"btn-primary w-full",children:[e.jsx(yt,{size:20,className:"inline mr-2"}),"Search"]})})]})}),e.jsx("div",{className:"card p-0",children:e.jsx("div",{className:"table-container",children:e.jsxs("table",{className:"table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Employee"}),e.jsx("th",{children:"Date"}),e.jsx("th",{children:"Check In"}),e.jsx("th",{children:"Check Out"}),e.jsx("th",{children:"Work Hours"}),e.jsx("th",{children:"Status"}),e.jsx("th",{children:"Location"})]})}),e.jsx("tbody",{children:t.map(x=>{var u,m,f;return e.jsxs("tr",{children:[e.jsxs("td",{children:[(u=x.employee)==null?void 0:u.firstName," ",(m=x.employee)==null?void 0:m.lastName]}),e.jsx("td",{children:new Date(x.date).toLocaleDateString()}),e.jsx("td",{children:x.checkIn?new Date(x.checkIn).toLocaleTimeString():"-"}),e.jsx("td",{children:x.checkOut?new Date(x.checkOut).toLocaleTimeString():"-"}),e.jsxs("td",{children:[((f=x.workHours)==null?void 0:f.toFixed(2))||0," hrs"]}),e.jsx("td",{children:e.jsx("span",{className:`badge ${d(x.status)}`,children:x.status})}),e.jsx("td",{className:"capitalize",children:x.location})]},x._id)})})]})})})]})},i3=()=>{const[t,s]=y.useState([]),[a,r]=y.useState(!1),[n,i]=y.useState(new Date().toISOString().split("T")[0]),[l,c]=y.useState([]);y.useEffect(()=>{o()},[]);const o=async()=>{try{const u=await J.get("/employees?status=active");s(u.data.data),c(u.data.data.map(m=>({employee:m._id,status:"present",checkIn:"09:00",checkOut:"18:00",location:"office"})))}catch{_.error("Failed to load employees")}},d=(u,m,f)=>{const g=[...l];g[u][m]=f,c(g)},x=async u=>{u.preventDefault(),r(!0);try{const m=l.map(f=>J.post("/attendance",{...f,date:n,checkIn:`${n}T${f.checkIn}`,checkOut:`${n}T${f.checkOut}`}));await Promise.all(m),_.success("Attendance marked successfully")}catch{_.error("Failed to mark attendance")}finally{r(!1)}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-white",children:"Mark Attendance"}),e.jsx("p",{className:"text-gray-400 mt-1",children:"Mark daily attendance for employees"})]}),e.jsxs("form",{onSubmit:x,children:[e.jsxs("div",{className:"card mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Date"}),e.jsx("input",{type:"date",value:n,onChange:u=>i(u.target.value),className:"input-field max-w-xs",required:!0})]}),e.jsx("div",{className:"card p-0",children:e.jsx("div",{className:"table-container",children:e.jsxs("table",{className:"table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Employee"}),e.jsx("th",{children:"Status"}),e.jsx("th",{children:"Check In"}),e.jsx("th",{children:"Check Out"}),e.jsx("th",{children:"Location"})]})}),e.jsx("tbody",{children:t.map((u,m)=>{var f,g,h,p;return e.jsxs("tr",{children:[e.jsxs("td",{children:[u.firstName," ",u.lastName]}),e.jsx("td",{children:e.jsxs("select",{value:(f=l[m])==null?void 0:f.status,onChange:j=>d(m,"status",j.target.value),className:"input-field",children:[e.jsx("option",{value:"present",children:"Present"}),e.jsx("option",{value:"absent",children:"Absent"}),e.jsx("option",{value:"half-day",children:"Half Day"}),e.jsx("option",{value:"on-leave",children:"On Leave"})]})}),e.jsx("td",{children:e.jsx("input",{type:"time",value:(g=l[m])==null?void 0:g.checkIn,onChange:j=>d(m,"checkIn",j.target.value),className:"input-field"})}),e.jsx("td",{children:e.jsx("input",{type:"time",value:(h=l[m])==null?void 0:h.checkOut,onChange:j=>d(m,"checkOut",j.target.value),className:"input-field"})}),e.jsx("td",{children:e.jsxs("select",{value:(p=l[m])==null?void 0:p.location,onChange:j=>d(m,"location",j.target.value),className:"input-field",children:[e.jsx("option",{value:"office",children:"Office"}),e.jsx("option",{value:"remote",children:"Remote"}),e.jsx("option",{value:"field",children:"Field"})]})})]},u._id)})})]})})}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsxs("button",{type:"submit",disabled:a,className:"btn-primary flex items-center space-x-2",children:[e.jsx(Rs,{size:20}),e.jsx("span",{children:a?"Saving...":"Save Attendance"})]})})]})]})},l3=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-white",children:"Attendance Reports"}),e.jsx("p",{className:"text-gray-400 mt-1",children:"View and download attendance reports"})]}),e.jsxs("button",{className:"btn-primary flex items-center space-x-2",children:[e.jsx(Mt,{size:20}),e.jsx("span",{children:"Export Report"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"card",children:[e.jsx("p",{className:"text-sm text-gray-400 mb-1",children:"Average Attendance"}),e.jsx("h3",{className:"text-2xl font-bold text-white",children:"92.5%"})]}),e.jsxs("div",{className:"card",children:[e.jsx("p",{className:"text-sm text-gray-400 mb-1",children:"Total Present"}),e.jsx("h3",{className:"text-2xl font-bold text-white",children:"1,850"})]}),e.jsxs("div",{className:"card",children:[e.jsx("p",{className:"text-sm text-gray-400 mb-1",children:"Total Absent"}),e.jsx("h3",{className:"text-2xl font-bold text-white",children:"150"})]})]}),e.jsxs("div",{className:"card",children:[e.jsxs("h3",{className:"text-lg font-semibold text-white mb-4 flex items-center space-x-2",children:[e.jsx(Sg,{size:20}),e.jsx("span",{children:"Monthly Attendance Trend"})]}),e.jsx("div",{className:"h-64 flex items-center justify-center text-gray-400",children:"Chart visualization would go here"})]})]}),Mu=()=>{const[t,s]=y.useState([]),[a,r]=y.useState(!0);y.useEffect(()=>{n()},[]);const n=async()=>{try{const l=await J.get("/payroll");s(l.data.data)}catch{_.error("Failed to load payroll")}finally{r(!1)}},i=l=>({pending:"badge-warning",processing:"badge-info",paid:"badge-success",failed:"badge-danger"})[l]||"badge-default";return a?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"w-12 h-12 border-4 border-primary-600 border-t-transparent rounded-full animate-spin"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-white",children:"Payroll"}),e.jsx("p",{className:"text-gray-400 mt-1",children:"Manage employee payroll"})]}),e.jsxs(ns,{to:"/payroll/generate",className:"btn-primary flex items-center space-x-2",children:[e.jsx(qe,{size:20}),e.jsx("span",{children:"Generate Payroll"})]})]}),e.jsx("div",{className:"card p-0",children:e.jsx("div",{className:"table-container",children:e.jsxs("table",{className:"table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Employee"}),e.jsx("th",{children:"Month/Year"}),e.jsx("th",{children:"Basic Salary"}),e.jsx("th",{children:"Total Earnings"}),e.jsx("th",{children:"Deductions"}),e.jsx("th",{children:"Net Salary"}),e.jsx("th",{children:"Status"})]})}),e.jsx("tbody",{children:t.map(l=>{var c,o;return e.jsxs("tr",{children:[e.jsxs("td",{children:[(c=l.employee)==null?void 0:c.firstName," ",(o=l.employee)==null?void 0:o.lastName]}),e.jsxs("td",{children:[l.month,"/",l.year]}),e.jsxs("td",{children:["$",l.basicSalary]}),e.jsxs("td",{children:["$",l.totalEarnings]}),e.jsxs("td",{children:["$",l.totalDeductions]}),e.jsxs("td",{className:"font-bold",children:["$",l.netSalary]}),e.jsx("td",{children:e.jsx("span",{className:`badge ${i(l.paymentStatus)}`,children:l.paymentStatus})})]},l._id)})})]})})})]})},c3=()=>{var x,u,m;const t=Je(),[s,a]=y.useState(new Date().getMonth()+1),[r,n]=y.useState(new Date().getFullYear()),[i,l]=y.useState(!1),[c,o]=y.useState(null),d=async()=>{var f,g;if(!s||!r){_.error("Please select month and year");return}l(!0),o(null);try{const h=await J.post("/payroll/bulk-generate",{month:parseInt(s),year:parseInt(r)});h.data.success&&(_.success(h.data.message),o(h.data.data))}catch(h){_.error(((g=(f=h==null?void 0:h.response)==null?void 0:f.data)==null?void 0:g.message)||"Failed to generate payroll")}finally{l(!1)}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("button",{onClick:()=>t("/payroll"),className:"p-2 hover:bg-dark-800 rounded-lg",children:e.jsx(xt,{size:20,className:"text-gray-400"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-white",children:"Generate Payroll"}),e.jsx("p",{className:"text-gray-400 mt-1",children:"Generate payroll for selected period"})]})]}),e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Month"}),e.jsx("select",{value:s,onChange:f=>a(f.target.value),className:"input-field",disabled:i,children:Array.from({length:12},(f,g)=>e.jsx("option",{value:g+1,children:new Date(2024,g).toLocaleString("default",{month:"long"})},g+1))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Year"}),e.jsx("input",{type:"number",value:r,onChange:f=>n(f.target.value),className:"input-field",disabled:i,min:"2020",max:"2099"})]})]}),e.jsxs("button",{onClick:d,className:"btn-primary mt-6 flex items-center space-x-2",disabled:i,children:[i&&e.jsx(Qt,{className:"w-4 h-4 animate-spin"}),e.jsx("span",{children:i?"Generating...":"Generate Payroll"})]}),c&&e.jsxs("div",{className:"mt-6 p-4 bg-gray-800 rounded-lg",children:[e.jsx("h3",{className:"text-white font-semibold mb-3",children:"Generation Results"}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-400",children:"Created"}),e.jsx("p",{className:"text-green-400 font-bold text-xl",children:((x=c.created)==null?void 0:x.length)||0})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-400",children:"Skipped"}),e.jsx("p",{className:"text-yellow-400 font-bold text-xl",children:((u=c.skipped)==null?void 0:u.length)||0})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-400",children:"Errors"}),e.jsx("p",{className:"text-red-400 font-bold text-xl",children:((m=c.errors)==null?void 0:m.length)||0})]})]}),c.errors&&c.errors.length>0&&e.jsxs("div",{className:"mt-4",children:[e.jsx("p",{className:"text-red-400 text-sm font-semibold mb-2",children:"Errors:"}),e.jsx("ul",{className:"list-disc list-inside text-sm text-gray-400",children:c.errors.map((f,g)=>e.jsxs("li",{children:[f.employee,": ",f.error]},g))})]})]})]})]})},o3=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-white",children:"Salary Slips"}),e.jsx("p",{className:"text-gray-400 mt-1",children:"Download your salary slips"})]}),e.jsx("div",{className:"card",children:e.jsx("p",{className:"text-gray-400",children:"Salary slips will be available here for download"})})]}),d3=()=>{const[t,s]=y.useState([]),[a,r]=y.useState(!0);y.useEffect(()=>{n()},[]);const n=async()=>{try{const i=await J.get("/departments");s(i.data.data)}catch{_.error("Failed to load departments")}finally{r(!1)}};return a?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"w-12 h-12 border-4 border-primary-600 border-t-transparent rounded-full animate-spin"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-white",children:"Departments"}),e.jsx("p",{className:"text-gray-400 mt-1",children:"Manage organization departments"})]}),e.jsxs("button",{className:"btn-primary flex items-center space-x-2",children:[e.jsx(qe,{size:20}),e.jsx("span",{children:"Add Department"})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(i=>e.jsxs("div",{className:"card",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-2",children:i.name}),e.jsx("p",{className:"text-sm text-gray-400 mb-4",children:i.code}),e.jsx("p",{className:"text-sm text-gray-300",children:i.description||"No description"}),i.head&&e.jsxs("div",{className:"mt-4 pt-4 border-t border-dark-800",children:[e.jsx("p",{className:"text-xs text-gray-400",children:"Department Head"}),e.jsxs("p",{className:"text-sm text-white",children:[i.head.firstName," ",i.head.lastName]})]})]},i._id))})]})},Ln={getRoleConfigs:()=>J.get("/tenant/roles/configs"),createEmployeeRole:t=>J.post("/tenant/roles",t),getRolesAndUsers:t=>J.get("/tenant/roles",{params:{clientId:t}}),updateUserStatus:(t,s)=>J.put(`/tenant/roles/users/${t}/status`,{...s,clientId:"6914486fef016d63d6ac03ce"}),resetUserPassword:t=>J.put(`/tenant/roles/users/${t}/reset-password`,{clientId:"6914486fef016d63d6ac03ce"}),tenantLogin:t=>J.post("/tenant/auth/login",{...t,clientId:"6914486fef016d63d6ac03ce"}),changePassword:t=>J.put("/tenant/auth/change-password",t),getProfile:()=>J.get("/tenant/auth/profile"),updateProfile:t=>J.put("/tenant/auth/profile",t),getEmployeeDashboard:()=>J.get("/tenant/employee/dashboard"),getNavigationMenu:()=>J.get("/tenant/employee/navigation")},x3=()=>{const[t,s]=y.useState("create"),[a,r]=y.useState([]),[n,i]=y.useState({roles:[],users:[],summary:{}}),[l,c]=y.useState(!1),[o,d]=y.useState(""),[x,u]=y.useState(""),[m,f]=y.useState({roleType:"",userEmail:"",userName:"",clientId:"6914486fef016d63d6ac03ce"});y.useEffect(()=>{g(),h()},[]);const g=async()=>{var N,C;try{c(!0),console.log("Fetching role configs...");const k=await Ln.getRoleConfigs();console.log("Role configs response:",k),k.data.success?(r(k.data.data.availableRoles),console.log("Role configs loaded:",k.data.data.availableRoles)):d("Failed to fetch role configurations: "+(k.data.message||"Unknown error"))}catch(k){console.error("Error fetching role configs:",k),d("Failed to fetch role configurations: "+(((C=(N=k.response)==null?void 0:N.data)==null?void 0:C.message)||k.message))}finally{c(!1)}},h=async()=>{try{const C=await Ln.getRolesAndUsers("6914486fef016d63d6ac03ce");C.data.success&&i(C.data.data)}catch(N){console.error("Error fetching roles and users:",N),d("Failed to fetch roles and users")}},p=async N=>{var C,k;N.preventDefault(),c(!0),d(""),u("");try{console.log("ðŸš€ Creating role with data:",m);const S=await Ln.createEmployeeRole(m);console.log("âœ… Role creation response:",S),S.data.success?(u(`Role "${S.data.data.role.name}" created successfully! User credentials: ${S.data.data.user.email} / ${S.data.data.user.defaultPassword}`),f({roleType:"",userEmail:"",userName:"",clientId:"6914486fef016d63d6ac03ce"}),h()):d(S.data.message||"Failed to create role")}catch(S){console.error("âŒ Role creation error:",S);const F=((k=(C=S.response)==null?void 0:C.data)==null?void 0:k.message)||S.message||"Failed to create role";d(`Error: ${F}`),S.response&&(console.error("Error response:",S.response.data),console.error("Error status:",S.response.status))}finally{c(!1)}},j=async(N,C)=>{var k,S;try{(await Ln.updateUserStatus(N,{isActive:!C})).data.success&&(u(`User ${C?"deactivated":"activated"} successfully`),h())}catch(F){d(((S=(k=F.response)==null?void 0:k.data)==null?void 0:S.message)||"Failed to update user status")}},v=async N=>{var C,k;try{const S=await Ln.resetUserPassword(N);S.data.success&&u(`Password reset successfully. New password: ${S.data.data.defaultPassword}`)}catch(S){d(((k=(C=S.response)==null?void 0:C.data)==null?void 0:k.message)||"Failed to reset password")}},w=N=>{navigator.clipboard.writeText(N),u("Copied to clipboard!")},b=N=>({regular_employee:Ue,team_lead:Lt,consultant:Ta,intern:Zs})[N]||Ue,A=N=>({regular_employee:"bg-blue-500",team_lead:"bg-green-500",consultant:"bg-purple-500",intern:"bg-orange-500"})[N]||"bg-gray-500";return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-white",children:"Employee Role Management"}),e.jsx("p",{className:"text-gray-400 mt-1",children:"Create and manage employee-level roles within your tenant"})]}),o&&e.jsxs("div",{className:"bg-red-500/10 border border-red-500/20 rounded-lg p-4 flex items-center gap-3",children:[e.jsx(mt,{className:"h-5 w-5 text-red-400"}),e.jsx("span",{className:"text-red-400",children:o}),e.jsx("button",{onClick:()=>d(""),className:"ml-auto text-red-400 hover:text-red-300",children:e.jsx(Qe,{className:"h-4 w-4"})})]}),x&&e.jsxs("div",{className:"bg-green-500/10 border border-green-500/20 rounded-lg p-4 flex items-center gap-3",children:[e.jsx(Te,{className:"h-5 w-5 text-green-400"}),e.jsx("span",{className:"text-green-400",children:x}),e.jsx("button",{onClick:()=>u(""),className:"ml-auto text-green-400 hover:text-green-300",children:e.jsx(Qe,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"flex space-x-1 bg-gray-800/50 p-1 rounded-lg",children:[e.jsxs("button",{onClick:()=>s("create"),className:`flex-1 py-2 px-4 rounded-md text-sm font-medium transition-colors ${t==="create"?"bg-blue-600 text-white":"text-gray-400 hover:text-white hover:bg-gray-700"}`,children:[e.jsx(Zs,{className:"h-4 w-4 inline mr-2"}),"Create Role"]}),e.jsxs("button",{onClick:()=>s("manage"),className:`flex-1 py-2 px-4 rounded-md text-sm font-medium transition-colors ${t==="manage"?"bg-blue-600 text-white":"text-gray-400 hover:text-white hover:bg-gray-700"}`,children:[e.jsx(Ue,{className:"h-4 w-4 inline mr-2"}),"Manage Users"]}),e.jsxs("button",{onClick:()=>s("overview"),className:`flex-1 py-2 px-4 rounded-md text-sm font-medium transition-colors ${t==="overview"?"bg-blue-600 text-white":"text-gray-400 hover:text-white hover:bg-gray-700"}`,children:[e.jsx(Lt,{className:"h-4 w-4 inline mr-2"}),"Overview"]})]}),t==="create"&&e.jsxs("div",{className:"card",children:[e.jsx("h2",{className:"text-xl font-semibold text-white mb-6",children:"Create Employee Role"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-8",children:a.length>0?a.map(N=>{const C=b(N.type),k=m.roleType===N.type;return e.jsxs("div",{onClick:()=>f({...m,roleType:N.type}),className:`p-4 rounded-lg border-2 cursor-pointer transition-all ${k?"border-blue-500 bg-blue-500/10":"border-gray-600 hover:border-gray-500 bg-gray-800/50"}`,children:[e.jsx("div",{className:`w-12 h-12 rounded-lg ${A(N.type)} flex items-center justify-center mb-3`,children:e.jsx(C,{className:"h-6 w-6 text-white"})}),e.jsx("h3",{className:"font-semibold text-white mb-1",children:N.name}),e.jsx("p",{className:"text-sm text-gray-400 mb-2",children:N.description}),e.jsxs("div",{className:"flex items-center justify-between text-xs",children:[e.jsxs("span",{className:"text-gray-500",children:["Scope: ",N.scope]}),e.jsxs("span",{className:"text-gray-500",children:[N.permissionCount," permissions"]})]})]},N.type)}):e.jsxs("div",{className:"col-span-full",children:[e.jsxs("div",{className:"text-center py-4 mb-6",children:[e.jsx("div",{className:"text-gray-400 mb-4",children:l?"Loading role configurations...":"Unable to load role configurations from API"}),e.jsxs("button",{onClick:g,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 flex items-center gap-2 mx-auto",children:[e.jsx(Xt,{className:"h-4 w-4"}),"Retry Loading Roles"]})]}),e.jsxs("div",{className:"border-t border-gray-700 pt-6",children:[e.jsx("h3",{className:"text-lg font-medium text-white mb-4",children:"Or Select Role Manually:"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[{type:"regular_employee",name:"Regular Employee",description:"Basic employee with self-service permissions",scope:"self"},{type:"team_lead",name:"Team Lead",description:"Team leader with team management permissions",scope:"team"},{type:"consultant",name:"Consultant",description:"Consultant with timesheet and project focus",scope:"self"},{type:"intern",name:"Intern",description:"Intern with limited permissions",scope:"self"}].map(N=>{const C=b(N.type),k=m.roleType===N.type;return e.jsxs("div",{onClick:()=>f({...m,roleType:N.type}),className:`p-4 rounded-lg border-2 cursor-pointer transition-all ${k?"border-blue-500 bg-blue-500/10":"border-gray-600 hover:border-gray-500 bg-gray-800/50"}`,children:[e.jsx("div",{className:`w-12 h-12 rounded-lg ${A(N.type)} flex items-center justify-center mb-3`,children:e.jsx(C,{className:"h-6 w-6 text-white"})}),e.jsx("h3",{className:"font-semibold text-white mb-1",children:N.name}),e.jsx("p",{className:"text-sm text-gray-400 mb-2",children:N.description}),e.jsx("div",{className:"flex items-center justify-between text-xs",children:e.jsxs("span",{className:"text-gray-500",children:["Scope: ",N.scope]})})]},N.type)})})]})]})}),m.roleType&&e.jsxs("form",{onSubmit:p,className:"space-y-6",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Target Tenant ID"}),e.jsx("input",{type:"text",value:m.clientId,onChange:N=>f({...m,clientId:N.target.value}),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter tenant/client ID",required:!0}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"The MongoDB ObjectId of the tenant where this role will be created"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"User Name"}),e.jsx("input",{type:"text",value:m.userName,onChange:N=>f({...m,userName:N.target.value}),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter user full name",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Email Address"}),e.jsx("input",{type:"email",value:m.userEmail,onChange:N=>f({...m,userEmail:N.target.value}),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"user@company.com",required:!0})]})]})]}),e.jsxs("div",{className:"bg-yellow-500/10 border border-yellow-500/20 rounded-lg p-4",children:[e.jsx("h4",{className:"font-medium text-yellow-400 mb-2",children:"Default Credentials"}),e.jsxs("p",{className:"text-sm text-gray-300",children:["The user will be created with the default password: ",e.jsx("code",{className:"bg-gray-700 px-2 py-1 rounded",children:"password123"})]}),e.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"They will be required to change this password on first login."})]}),e.jsx("div",{className:"flex justify-end",children:e.jsxs("button",{type:"submit",disabled:l,className:"px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 focus:ring-offset-gray-800 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[l?e.jsx(Xt,{className:"h-4 w-4 animate-spin"}):e.jsx(Zs,{className:"h-4 w-4"}),l?"Creating...":"Create Role & User"]})})]})]}),t==="manage"&&e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-white",children:"Manage Users"}),e.jsxs("button",{onClick:h,className:"px-4 py-2 bg-gray-700 text-white rounded-md hover:bg-gray-600 flex items-center gap-2",children:[e.jsx(Xt,{className:"h-4 w-4"}),"Refresh"]})]}),e.jsxs("div",{className:"overflow-x-auto",children:[e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-gray-700",children:[e.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-300",children:"User"}),e.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-300",children:"Role"}),e.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-300",children:"Scope"}),e.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-300",children:"Status"}),e.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-300",children:"First Login"}),e.jsx("th",{className:"text-right py-3 px-4 font-medium text-gray-300",children:"Actions"})]})}),e.jsx("tbody",{children:n.users.map(N=>{const C=b(N.roleSlug);return e.jsxs("tr",{className:"border-b border-gray-800 hover:bg-gray-800/50",children:[e.jsx("td",{className:"py-4 px-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-8 h-8 rounded-full ${A(N.roleSlug)} flex items-center justify-center`,children:e.jsx(C,{className:"h-4 w-4 text-white"})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-white",children:N.name}),e.jsxs("div",{className:"text-sm text-gray-400 flex items-center gap-1",children:[e.jsx(wt,{className:"h-3 w-3"}),N.email,e.jsx("button",{onClick:()=>w(N.email),className:"ml-1 text-gray-500 hover:text-gray-300",children:e.jsx(Ml,{className:"h-3 w-3"})})]})]})]})}),e.jsx("td",{className:"py-4 px-4",children:e.jsx("span",{className:"text-white font-medium",children:N.roleName})}),e.jsx("td",{className:"py-4 px-4",children:e.jsx("span",{className:"text-gray-300 capitalize",children:N.scope})}),e.jsx("td",{className:"py-4 px-4",children:e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${N.isActive?"bg-green-500/10 text-green-400":"bg-red-500/10 text-red-400"}`,children:N.isActive?"Active":"Inactive"})}),e.jsx("td",{className:"py-4 px-4",children:e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${N.isFirstLogin?"bg-yellow-500/10 text-yellow-400":"bg-gray-500/10 text-gray-400"}`,children:N.isFirstLogin?"Pending":"Completed"})}),e.jsx("td",{className:"py-4 px-4 text-right",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx("button",{onClick:()=>j(N.id,N.isActive),className:`p-2 rounded-md ${N.isActive?"text-red-400 hover:bg-red-500/10":"text-green-400 hover:bg-green-500/10"}`,title:N.isActive?"Deactivate User":"Activate User",children:N.isActive?e.jsx(pn,{className:"h-4 w-4"}):e.jsx(Ht,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>v(N.id),className:"p-2 text-blue-400 hover:bg-blue-500/10 rounded-md",title:"Reset Password",children:e.jsx(Xt,{className:"h-4 w-4"})})]})})]},N.id)})})]}),n.users.length===0&&e.jsx("div",{className:"text-center py-8 text-gray-400",children:"No users found. Create your first employee role to get started."})]})]}),t==="overview"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsx("div",{className:"card",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-400",children:"Total Roles"}),e.jsx("p",{className:"text-2xl font-bold text-white",children:n.summary.totalRoles||0})]}),e.jsx(Lt,{className:"h-8 w-8 text-blue-400"})]})}),e.jsx("div",{className:"card",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-400",children:"Total Users"}),e.jsx("p",{className:"text-2xl font-bold text-white",children:n.summary.totalUsers||0})]}),e.jsx(Ue,{className:"h-8 w-8 text-green-400"})]})}),e.jsx("div",{className:"card",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-400",children:"Active Users"}),e.jsx("p",{className:"text-2xl font-bold text-white",children:n.summary.activeUsers||0})]}),e.jsx(Te,{className:"h-8 w-8 text-green-400"})]})}),e.jsx("div",{className:"card",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-400",children:"First Time Users"}),e.jsx("p",{className:"text-2xl font-bold text-white",children:n.summary.firstTimeUsers||0})]}),e.jsx(mt,{className:"h-8 w-8 text-yellow-400"})]})})]}),e.jsxs("div",{className:"card",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Roles Overview"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:n.roles.map(N=>{const C=b(N.slug);return e.jsxs("div",{className:"bg-gray-800/50 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:`w-10 h-10 rounded-lg ${A(N.slug)} flex items-center justify-center`,children:e.jsx(C,{className:"h-5 w-5 text-white"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-white",children:N.name}),e.jsxs("p",{className:"text-sm text-gray-400 capitalize",children:[N.scope," scope"]})]})]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Users:"}),e.jsx("span",{className:"text-white",children:N.userCount})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Permissions:"}),e.jsx("span",{className:"text-white",children:N.permissionCount})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Type:"}),e.jsx("span",{className:"text-white",children:N.isSystemRole?"System":"Custom"})]})]})]},N.id)})}),n.roles.length===0&&e.jsx("div",{className:"text-center py-8 text-gray-400",children:"No roles created yet. Start by creating your first employee role."})]})]})]})},u3=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-white",children:"Policies"}),e.jsx("p",{className:"text-gray-400 mt-1",children:"Manage company policies"})]}),e.jsx("div",{className:"card",children:e.jsx("p",{className:"text-gray-400",children:"Policy management interface coming soon"})})]}),m3=()=>{var j;const[t,s]=y.useState([]),[a,r]=y.useState(!0),[n,i]=y.useState(!1),[l,c]=y.useState(null),[o,d]=y.useState({newPassword:"",confirmPassword:"",mustChangePassword:!0}),[x,u]=y.useState(!1);y.useEffect(()=>{m()},[]);const m=async()=>{try{const v=await J.get("/user/all");s(v.data.data)}catch(v){_.error("Failed to load users"),console.error("Error loading users:",v)}finally{r(!1)}},f=async v=>{var w,b,A;if(v.preventDefault(),o.newPassword!==o.confirmPassword){_.error("Passwords do not match");return}if(o.newPassword.length<8){_.error("Password must be at least 8 characters long");return}u(!0);try{const N=l._id||((w=l.userId)==null?void 0:w._id);if(!N){_.error("User ID not found"),u(!1);return}console.log("Resetting password for user ID:",N),await J.put(`/auth/admin/reset-password/${N}`,{newPassword:o.newPassword,mustChangePassword:o.mustChangePassword}),_.success(`Password reset successfully for ${l.firstName} ${l.lastName}`),i(!1),c(null),d({newPassword:"",confirmPassword:"",mustChangePassword:!0})}catch(N){console.error("Password reset error:",N),_.error(((A=(b=N.response)==null?void 0:b.data)==null?void 0:A.message)||"Failed to reset password")}finally{u(!1)}},g=v=>{c(v),i(!0)},h=()=>{i(!1),c(null),d({newPassword:"",confirmPassword:"",mustChangePassword:!0})},p=v=>({admin:"badge-danger",hr:"badge-warning",manager:"badge-info",employee:"badge-success"})[v]||"badge-default";return a?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"w-12 h-12 border-4 border-primary-600 border-t-transparent rounded-full animate-spin"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-white",children:"User Management"}),e.jsx("p",{className:"text-gray-400 mt-1",children:"Manage user accounts and reset passwords"})]})}),e.jsx("div",{className:"card p-0",children:e.jsx("div",{className:"table-container",children:e.jsxs("table",{className:"table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Employee"}),e.jsx("th",{children:"Email"}),e.jsx("th",{children:"Role"}),e.jsx("th",{children:"Status"}),e.jsx("th",{children:"Last Login"}),e.jsx("th",{children:"Actions"})]})}),e.jsx("tbody",{children:t.map(v=>{var w;return e.jsxs("tr",{children:[e.jsx("td",{children:e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-white",children:v.employeeId?`${v.employeeId.firstName} ${v.employeeId.lastName}`:"N/A"}),e.jsx("p",{className:"text-sm text-gray-400",children:((w=v.employeeId)==null?void 0:w.employeeCode)||"N/A"})]})}),e.jsx("td",{children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(wt,{size:16,className:"text-gray-400"}),e.jsx("span",{children:v.email})]})}),e.jsx("td",{children:e.jsx("span",{className:`badge ${p(v.role)}`,children:v.role})}),e.jsx("td",{children:v.isActive?e.jsx("span",{className:"badge badge-success",children:"Active"}):e.jsx("span",{className:"badge badge-danger",children:"Inactive"})}),e.jsx("td",{children:v.lastLogin?e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Oe,{size:16,className:"text-gray-400"}),e.jsx("span",{className:"text-sm",children:new Date(v.lastLogin).toLocaleDateString()})]}):e.jsx("span",{className:"text-gray-500",children:"Never"})}),e.jsx("td",{children:e.jsxs("button",{onClick:()=>g(v),className:"btn-outline text-sm py-2 px-3 flex items-center space-x-2",children:[e.jsx(g0,{size:16}),e.jsx("span",{children:"Reset Password"})]})})]},v._id)})})]})})}),t.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Ue,{size:48,className:"mx-auto text-gray-600 mb-4"}),e.jsx("p",{className:"text-gray-400",children:"No users found"})]}),n&&l&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-dark-900 rounded-xl w-full max-w-md",children:[e.jsxs("div",{className:"border-b border-dark-800 p-6 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-white",children:"Reset Password"}),e.jsxs("p",{className:"text-sm text-gray-400 mt-1",children:[l.firstName," ",l.lastName," (",(j=l.userId)==null?void 0:j.email,")"]})]}),e.jsx("button",{onClick:h,className:"text-gray-400 hover:text-white",children:e.jsx(Le,{size:24})})]}),e.jsxs("form",{onSubmit:f,className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"New Password *"}),e.jsx("input",{type:"password",required:!0,value:o.newPassword,onChange:v=>d({...o,newPassword:v.target.value}),className:"input-field",placeholder:"Enter new password (min 8 characters)",minLength:8})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Confirm Password *"}),e.jsx("input",{type:"password",required:!0,value:o.confirmPassword,onChange:v=>d({...o,confirmPassword:v.target.value}),className:"input-field",placeholder:"Confirm new password",minLength:8})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:"mustChangePassword",checked:o.mustChangePassword,onChange:v=>d({...o,mustChangePassword:v.target.checked}),className:"w-4 h-4 text-primary-600 bg-dark-800 border-dark-700 rounded focus:ring-primary-500"}),e.jsx("label",{htmlFor:"mustChangePassword",className:"text-sm text-gray-300",children:"Require user to change password on next login"})]}),e.jsx("div",{className:"bg-yellow-500/10 border border-yellow-500/20 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(Lt,{size:20,className:"text-yellow-500 mt-0.5"}),e.jsxs("div",{className:"text-sm text-yellow-200",children:[e.jsx("p",{className:"font-medium mb-1",children:"Security Notice"}),e.jsx("p",{className:"text-yellow-300/80",children:"The user will be able to login with this new password immediately. Make sure to communicate the new password securely."})]})]})}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[e.jsx("button",{type:"button",onClick:h,className:"btn-outline",disabled:x,children:"Cancel"}),e.jsx("button",{type:"submit",className:"btn-primary",disabled:x,children:x?"Resetting...":"Reset Password"})]})]})]})})]})},Rd=["Comp Offs","Personal Leave","Sick Leave"],h3=()=>{const[t,s]=y.useState(!0),[a,r]=y.useState({defaults:[],overrides:[],summary:{}}),[n,i]=y.useState([]),[l,c]=y.useState(!1),[o,d]=y.useState(!1),[x,u]=y.useState(!1),[m,f]=y.useState(null),[g,h]=y.useState(null),[p,j]=y.useState({leaveType:"",yearlyAllocation:0,accrualFrequency:"yearly",carryForwardEnabled:!1,maxCarryForward:0,isActive:!0}),[v,w]=y.useState({leaveType:"",yearlyAllocation:0,applicableTo:"specific-departments",departments:[],designations:[],locations:[],accrualFrequency:"yearly",carryForwardEnabled:!1,maxCarryForward:0,isActive:!0}),[b,A]=y.useState(new Date().getFullYear()),[N,C]=y.useState(!1);y.useEffect(()=>{k()},[]);const k=async()=>{try{s(!0);const[W,se]=await Promise.all([J.get("/leave-management/quotas"),J.get("/departments")]);r(W.data.data),i(se.data.data||[])}catch(W){_.error("Failed to load leave management data"),console.error(W)}finally{s(!1)}},S=W=>{f(W),j({leaveType:W.leaveType,yearlyAllocation:W.default.yearlyAllocation||0,accrualFrequency:W.default.accrualFrequency||"yearly",carryForwardEnabled:W.default.carryForwardEnabled||!1,maxCarryForward:W.default.maxCarryForward||0,isActive:W.default.isActive!==!1}),c(!0)},F=async W=>{var se,X;W.preventDefault();try{await J.post("/leave-management/quota/default",p),_.success("Default quota saved successfully"),c(!1),f(null),k()}catch(D){_.error(((X=(se=D.response)==null?void 0:se.data)==null?void 0:X.message)||"Failed to save default quota")}},R=()=>{h(null),w({leaveType:"",yearlyAllocation:0,applicableTo:"specific-departments",departments:[],designations:[],locations:[],accrualFrequency:"yearly",carryForwardEnabled:!1,maxCarryForward:0,isActive:!0}),d(!0)},T=W=>{var se;h(W),w({leaveType:W.leaveType,yearlyAllocation:W.yearlyAllocation||0,applicableTo:W.applicableTo,departments:((se=W.departments)==null?void 0:se.map(X=>X._id||X))||[],designations:W.designations||[],locations:W.locations||[],accrualFrequency:W.accrualFrequency||"yearly",carryForwardEnabled:W.carryForwardEnabled||!1,maxCarryForward:W.maxCarryForward||0,isActive:W.isActive!==!1}),d(!0)},M=async W=>{var se,X;W.preventDefault();try{g?(await J.put(`/leave-management/quota/override/${g._id}`,v),_.success("Override updated successfully")):(await J.post("/leave-management/quota/override",v),_.success("Override created successfully")),d(!1),h(null),k()}catch(D){_.error(((X=(se=D.response)==null?void 0:se.data)==null?void 0:X.message)||"Failed to save override")}},H=async W=>{if(window.confirm("Are you sure you want to delete this override?"))try{await J.delete(`/leave-management/quota/override/${W}`),_.success("Override deleted successfully"),k()}catch{_.error("Failed to delete override")}},U=async()=>{var W,se;try{C(!0);const X=await J.post("/leave-management/quota/apply",{year:b});_.success(`Quotas applied successfully! Applied: ${X.data.data.applied}, Skipped: ${X.data.data.skipped}`),u(!1)}catch(X){_.error(((se=(W=X.response)==null?void 0:W.data)==null?void 0:se.message)||"Failed to apply quotas")}finally{C(!1)}};return t?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"w-12 h-12 border-4 border-primary-600 border-t-transparent rounded-full animate-spin"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-white",children:"Leave Management"}),e.jsx("p",{className:"text-gray-400 mt-1",children:"Configure leave quotas for all employees"})]}),e.jsx("div",{className:"flex items-center space-x-3",children:e.jsxs("button",{onClick:()=>u(!0),className:"btn-primary flex items-center space-x-2",children:[e.jsx(Ue,{size:18}),e.jsx("span",{children:"Apply to Employees"})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx("div",{className:"card p-4",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 rounded-lg bg-blue-500",children:e.jsx(Oe,{size:20,className:"text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-400",children:"Total Categories"}),e.jsx("p",{className:"text-xl font-bold text-white",children:a.summary.totalCategories||Rd.length})]})]})}),e.jsx("div",{className:"card p-4",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 rounded-lg bg-green-500",children:e.jsx(Te,{size:20,className:"text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-400",children:"Active Defaults"}),e.jsx("p",{className:"text-xl font-bold text-white",children:a.summary.activeDefaults||0})]})]})}),e.jsx("div",{className:"card p-4",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 rounded-lg bg-purple-500",children:e.jsx(Ta,{size:20,className:"text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-400",children:"Group Overrides"}),e.jsx("p",{className:"text-xl font-bold text-white",children:a.summary.totalOverrides||0})]})]})})]}),e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-lg font-semibold text-white",children:"Default Leave Quotas"}),e.jsx("p",{className:"text-sm text-gray-400",children:"These quotas apply to all employees by default"})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-800",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-300",children:"Leave Category"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-300",children:"Yearly Allocation"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-300",children:"Accrual Frequency"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-300",children:"Carry Forward"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-300",children:"Status"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-300",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-700",children:a.defaults.map(W=>e.jsxs("tr",{className:"hover:bg-gray-800/50",children:[e.jsx("td",{className:"px-4 py-3 text-sm text-white font-medium",children:W.leaveType}),e.jsxs("td",{className:"px-4 py-3 text-sm text-gray-300",children:[W.default.yearlyAllocation||0," days"]}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-300 capitalize",children:W.default.accrualFrequency||"yearly"}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-300",children:W.default.carryForwardEnabled?e.jsxs("span",{className:"text-green-400",children:["Yes (",W.default.maxCarryForward||0," days)"]}):e.jsx("span",{className:"text-gray-500",children:"No"})}),e.jsx("td",{className:"px-4 py-3",children:W.default.isActive!==!1?e.jsxs("span",{className:"flex items-center space-x-1 text-green-400",children:[e.jsx(Te,{size:16}),e.jsx("span",{children:"Active"})]}):e.jsxs("span",{className:"flex items-center space-x-1 text-gray-500",children:[e.jsx(Qe,{size:16}),e.jsx("span",{children:"Inactive"})]})}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("button",{onClick:()=>S(W),className:"text-blue-400 hover:text-blue-300 flex items-center space-x-1",children:[e.jsx(ya,{size:16}),e.jsx("span",{children:"Edit"})]})})]},W.leaveType))})]})})]}),e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-lg font-semibold text-white",children:"Group Overrides"}),e.jsxs("button",{onClick:R,className:"btn-primary flex items-center space-x-2",children:[e.jsx(qe,{size:18}),e.jsx("span",{children:"Add Override"})]})]}),a.overrides.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(y0,{size:48,className:"mx-auto text-gray-600 mb-4"}),e.jsx("p",{className:"text-gray-400",children:"No group overrides configured"}),e.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Create overrides to set different quotas for specific departments, designations, or locations"})]}):e.jsx("div",{className:"space-y-4",children:a.overrides.map(W=>{var se,X,D;return e.jsx("div",{className:"p-4 bg-gray-800/50 rounded-lg border border-gray-700",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[e.jsx("h3",{className:"text-white font-medium",children:W.leaveType}),e.jsxs("span",{className:"text-sm text-gray-400",children:[W.yearlyAllocation," days/year"]}),W.isActive?e.jsx("span",{className:"badge badge-success",children:"Active"}):e.jsx("span",{className:"badge badge-warning",children:"Inactive"})]}),e.jsx("div",{className:"text-sm text-gray-400",children:e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Applies to:"})," ",W.applicableTo==="specific-departments"&&e.jsxs("span",{children:["Departments: ",((se=W.departments)==null?void 0:se.map(le=>le.name||le).join(", "))||"None"]}),W.applicableTo==="specific-designations"&&e.jsxs("span",{children:["Designations: ",((X=W.designations)==null?void 0:X.join(", "))||"None"]}),W.applicableTo==="specific-locations"&&e.jsxs("span",{children:["Locations: ",((D=W.locations)==null?void 0:D.join(", "))||"None"]})]})})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>T(W),className:"text-blue-400 hover:text-blue-300 p-2",children:e.jsx(ya,{size:18})}),e.jsx("button",{onClick:()=>H(W._id),className:"text-red-400 hover:text-red-300 p-2",children:e.jsx(kt,{size:18})})]})]})},W._id)})})]}),l&&e.jsx(f3,{formData:p,setFormData:j,onClose:()=>{c(!1),f(null)},onSave:F,leaveType:m==null?void 0:m.leaveType}),o&&e.jsx(p3,{formData:v,setFormData:w,departments:n,onClose:()=>{d(!1),h(null)},onSave:M,isEditing:!!g}),x&&e.jsx(g3,{year:b,setYear:A,onClose:()=>u(!1),onApply:U,applying:N})]})},f3=({formData:t,setFormData:s,onClose:a,onSave:r,leaveType:n})=>{const i=l=>{const{name:c,value:o,type:d,checked:x}=l.target;s(u=>({...u,[c]:d==="checkbox"?x:d==="number"?parseFloat(o)||0:o}))};return e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 w-full max-w-md",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-white",children:n?`Edit ${n}`:"Set Default Quota"}),e.jsx("button",{onClick:a,className:"text-gray-400 hover:text-white",children:e.jsx(Le,{size:24})})]}),e.jsxs("form",{onSubmit:r,className:"space-y-4",children:[n&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Leave Category"}),e.jsx("input",{type:"text",value:n,disabled:!0,className:"input-field w-full bg-gray-700"})]}),!n&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Leave Category *"}),e.jsxs("select",{name:"leaveType",value:t.leaveType,onChange:i,className:"input-field w-full",required:!0,children:[e.jsx("option",{value:"",children:"Select Leave Type"}),Rd.map(l=>e.jsx("option",{value:l,children:l},l))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Yearly Allocation (days) *"}),e.jsx("input",{type:"number",name:"yearlyAllocation",value:t.yearlyAllocation,onChange:i,className:"input-field w-full",min:"0",step:"0.5",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Accrual Frequency"}),e.jsxs("select",{name:"accrualFrequency",value:t.accrualFrequency,onChange:i,className:"input-field w-full",children:[e.jsx("option",{value:"yearly",children:"Yearly (one-time allocation)"}),e.jsx("option",{value:"monthly",children:"Monthly"}),e.jsx("option",{value:"quarterly",children:"Quarterly"}),e.jsx("option",{value:"one-time",children:"One-time"})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",name:"carryForwardEnabled",checked:t.carryForwardEnabled,onChange:i,className:"rounded"}),e.jsx("label",{className:"text-sm text-gray-300",children:"Enable Carry Forward"})]}),t.carryForwardEnabled&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Max Carry Forward (days)"}),e.jsx("input",{type:"number",name:"maxCarryForward",value:t.maxCarryForward,onChange:i,className:"input-field w-full",min:"0"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",name:"isActive",checked:t.isActive,onChange:i,className:"rounded"}),e.jsx("label",{className:"text-sm text-gray-300",children:"Active"})]}),e.jsxs("div",{className:"flex space-x-3 pt-4",children:[e.jsx("button",{type:"button",onClick:a,className:"flex-1 px-4 py-2 border border-gray-600 text-gray-300 rounded-lg hover:bg-gray-700",children:"Cancel"}),e.jsxs("button",{type:"submit",className:"flex-1 btn-primary flex items-center justify-center space-x-2",children:[e.jsx(Rs,{size:18}),e.jsx("span",{children:"Save"})]})]})]})]})})},p3=({formData:t,setFormData:s,departments:a,onClose:r,onSave:n,isEditing:i})=>{const l=d=>{const{name:x,value:u,type:m,checked:f}=d.target;s(g=>({...g,[x]:m==="checkbox"?f:m==="number"?parseFloat(u)||0:u}))},c=d=>{s(x=>{const u=x.departments||[];return u.includes(d)?{...x,departments:u.filter(m=>m!==d)}:{...x,departments:[...u,d]}})},o=d=>{const x=d.target.value.split(",").map(u=>u.trim()).filter(u=>u);s(u=>({...u,designations:x}))};return e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-white",children:i?"Edit Group Override":"Create Group Override"}),e.jsx("button",{onClick:r,className:"text-gray-400 hover:text-white",children:e.jsx(Le,{size:24})})]}),e.jsxs("form",{onSubmit:n,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Leave Category *"}),e.jsxs("select",{name:"leaveType",value:t.leaveType,onChange:l,className:"input-field w-full",required:!0,children:[e.jsx("option",{value:"",children:"Select Leave Type"}),Rd.map(d=>e.jsx("option",{value:d,children:d},d))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Yearly Allocation (days) *"}),e.jsx("input",{type:"number",name:"yearlyAllocation",value:t.yearlyAllocation,onChange:l,className:"input-field w-full",min:"0",step:"0.5",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Applies To *"}),e.jsxs("select",{name:"applicableTo",value:t.applicableTo,onChange:l,className:"input-field w-full",required:!0,children:[e.jsx("option",{value:"specific-departments",children:"Specific Departments"}),e.jsx("option",{value:"specific-designations",children:"Specific Designations"}),e.jsx("option",{value:"specific-locations",children:"Specific Locations"})]})]}),t.applicableTo==="specific-departments"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Select Departments *"}),e.jsx("div",{className:"max-h-40 overflow-y-auto border border-gray-700 rounded-lg p-2",children:a.map(d=>e.jsxs("label",{className:"flex items-center space-x-2 p-2 hover:bg-gray-700 rounded cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:t.departments.includes(d._id),onChange:()=>c(d._id),className:"rounded"}),e.jsx("span",{className:"text-sm text-gray-300",children:d.name})]},d._id))})]}),t.applicableTo==="specific-designations"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Designations (comma-separated) *"}),e.jsx("input",{type:"text",value:t.designations.join(", "),onChange:o,className:"input-field w-full",placeholder:"e.g., Manager, Senior Developer, HR Executive",required:!0})]}),t.applicableTo==="specific-locations"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Locations (comma-separated) *"}),e.jsx("input",{type:"text",value:t.locations.join(", "),onChange:d=>{const x=d.target.value.split(",").map(u=>u.trim()).filter(u=>u);s(u=>({...u,locations:x}))},className:"input-field w-full",placeholder:"e.g., Mumbai, Delhi, Bangalore",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Accrual Frequency"}),e.jsxs("select",{name:"accrualFrequency",value:t.accrualFrequency,onChange:l,className:"input-field w-full",children:[e.jsx("option",{value:"yearly",children:"Yearly"}),e.jsx("option",{value:"monthly",children:"Monthly"}),e.jsx("option",{value:"quarterly",children:"Quarterly"}),e.jsx("option",{value:"one-time",children:"One-time"})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",name:"carryForwardEnabled",checked:t.carryForwardEnabled,onChange:l,className:"rounded"}),e.jsx("label",{className:"text-sm text-gray-300",children:"Enable Carry Forward"})]}),t.carryForwardEnabled&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Max Carry Forward (days)"}),e.jsx("input",{type:"number",name:"maxCarryForward",value:t.maxCarryForward,onChange:l,className:"input-field w-full",min:"0"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",name:"isActive",checked:t.isActive,onChange:l,className:"rounded"}),e.jsx("label",{className:"text-sm text-gray-300",children:"Active"})]}),e.jsxs("div",{className:"flex space-x-3 pt-4",children:[e.jsx("button",{type:"button",onClick:r,className:"flex-1 px-4 py-2 border border-gray-600 text-gray-300 rounded-lg hover:bg-gray-700",children:"Cancel"}),e.jsxs("button",{type:"submit",className:"flex-1 btn-primary flex items-center justify-center space-x-2",children:[e.jsx(Rs,{size:18}),e.jsx("span",{children:i?"Update":"Create"})]})]})]})]})})},g3=({year:t,setYear:s,onClose:a,onApply:r,applying:n})=>e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 w-full max-w-md",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-white",children:"Apply Quotas to Employees"}),e.jsx("button",{onClick:a,className:"text-gray-400 hover:text-white",children:e.jsx(Le,{size:24})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"p-4 bg-blue-900/20 border border-blue-800 rounded-lg",children:e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx(mt,{size:20,className:"text-blue-400 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-blue-300 font-medium mb-1",children:"What this does:"}),e.jsxs("ul",{className:"text-xs text-blue-200 space-y-1 list-disc list-inside",children:[e.jsx("li",{children:"Applies default quotas to all active employees"}),e.jsx("li",{children:"Applies group overrides where applicable"}),e.jsx("li",{children:"Creates/updates LeaveBalance records for the selected year"}),e.jsx("li",{children:"Calculates pro-rated allocation for mid-year employees"})]})]})]})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Year"}),e.jsx("input",{type:"number",value:t,onChange:i=>s(parseInt(i.target.value)),className:"input-field w-full",min:"2020",max:"2100"})]}),e.jsxs("div",{className:"flex space-x-3 pt-4",children:[e.jsx("button",{type:"button",onClick:a,className:"flex-1 px-4 py-2 border border-gray-600 text-gray-300 rounded-lg hover:bg-gray-700",disabled:n,children:"Cancel"}),e.jsx("button",{onClick:r,disabled:n,className:"flex-1 btn-primary flex items-center justify-center space-x-2 disabled:opacity-50",children:n?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),e.jsx("span",{children:"Applying..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(Ue,{size:18}),e.jsx("span",{children:"Apply to All Employees"})]})})]})]})]})}),qt=()=>{const t=Je(),s=Mr(),{user:a}=Rt(),n=(a==null?void 0:a.role)==="manager"?[{id:"home",label:"Home",icon:to,path:"/employee/dashboard"},{id:"manager",label:"Manager",icon:Lt,path:"/employee/manager/home"},{id:"leave",label:"Leave",icon:Oe,path:"/employee/leave/balance"},{id:"profile",label:"Me",icon:_t,path:"/employee/profile"},{id:"more",label:"More",icon:fn,path:"/employee/team"}]:[{id:"home",label:"Home",icon:to,path:"/employee/dashboard"},{id:"leave",label:"Leave",icon:Oe,path:"/employee/leave/balance"},{id:"attendance",label:"Time",icon:Be,path:"/employee/attendance"},{id:"profile",label:"Me",icon:_t,path:"/employee/profile"},{id:"more",label:"More",icon:fn,path:"/employee/team"}],i=l=>s.pathname===l||s.pathname.startsWith(l+"/");return e.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-[#2A2A3A] border-t border-gray-800 md:hidden z-50",children:e.jsx("div",{className:"flex items-center justify-around py-2 px-2",children:n.map(l=>{const c=l.icon,o=i(l.path);return e.jsxs("button",{onClick:()=>t(l.path),className:`flex flex-col items-center justify-center py-2 px-3 rounded-xl transition-all min-w-[60px] ${o?"text-[#A88BFF]":"text-gray-400"}`,children:[e.jsx(c,{className:`w-6 h-6 mb-1 ${o?"text-[#A88BFF]":""}`}),e.jsx("span",{className:"text-xs font-medium",children:l.label}),o&&e.jsx("div",{className:"w-8 h-1 bg-[#A88BFF] rounded-full mt-1"})]},l.id)})})})},y3=()=>{const t=Je(),[s,a]=y.useState([]),[r,n]=y.useState(!0),[i,l]=y.useState(null),[c,o]=y.useState({isOpen:!1,projectId:null,reason:""});y.useEffect(()=>{d()},[]);const d=async()=>{try{const h=localStorage.getItem("token"),j=await(await fetch(`${it.apiBaseUrl}/projects/pending`,{headers:{Authorization:`Bearer ${h}`}})).json();j.success?a(j.data||[]):_.error(j.message||"Failed to fetch pending projects")}catch(h){console.error("Error fetching pending projects:",h),_.error("Failed to load pending projects")}finally{n(!1)}},x=async h=>{try{l(h);const p=localStorage.getItem("token"),v=await(await fetch(`${it.apiBaseUrl}/projects/${h}/approve`,{method:"POST",headers:{Authorization:`Bearer ${p}`,"Content-Type":"application/json"}})).json();v.success?(_.success("Project approved successfully"),a(w=>w.filter(b=>b._id!==h))):_.error(v.message||"Failed to approve project")}catch(p){console.error("Error approving project:",p),_.error("Failed to approve project")}finally{l(null)}},u=async()=>{if(!c.reason.trim()){_.error("Please provide a rejection reason");return}try{l(c.projectId);const h=localStorage.getItem("token"),j=await(await fetch(`${it.apiBaseUrl}/projects/${c.projectId}/reject`,{method:"POST",headers:{Authorization:`Bearer ${h}`,"Content-Type":"application/json"},body:JSON.stringify({rejectionReason:c.reason.trim()})})).json();j.success?(_.success("Project rejected successfully"),a(v=>v.filter(w=>w._id!==c.projectId)),o({isOpen:!1,projectId:null,reason:""})):_.error(j.message||"Failed to reject project")}catch(h){console.error("Error rejecting project:",h),_.error("Failed to reject project")}finally{l(null)}},m=h=>new Date(h).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),f=h=>{switch(h){case"pending":return"bg-yellow-500/20 text-yellow-400 border-yellow-500/30";case"approved":return"bg-green-500/20 text-green-400 border-green-500/30";case"rejected":return"bg-red-500/20 text-red-400 border-red-500/30";default:return"bg-gray-500/20 text-gray-400 border-gray-500/30"}},g=h=>{switch(h){case"high":return"bg-red-500/20 text-red-400";case"medium":return"bg-yellow-500/20 text-yellow-400";case"low":return"bg-green-500/20 text-green-400";default:return"bg-gray-500/20 text-gray-400"}};return r?e.jsx("div",{className:"min-h-screen bg-[#1E1E2A] p-4 md:p-6 pb-24 md:pb-6 flex items-center justify-center",children:e.jsx("div",{className:"text-white",children:"Loading pending projects..."})}):e.jsxs("div",{className:"min-h-screen bg-[#1E1E2A] p-4 md:p-6 pb-24 md:pb-6",children:[e.jsx("div",{className:"sticky top-0 z-10 bg-[#1E1E2A] border-b border-gray-800 px-4 py-4 -mx-4 mb-6",children:e.jsxs("div",{className:"max-w-6xl mx-auto flex items-center space-x-4",children:[e.jsx("button",{onClick:()=>t("/administration"),className:"text-gray-400 hover:text-white transition-colors",children:e.jsx(xt,{className:"w-6 h-6"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold text-white",children:"Project Approvals"}),e.jsx("p",{className:"text-gray-400 text-sm",children:"Review and approve pending project requests"})]})]})}),e.jsx("div",{className:"max-w-6xl mx-auto",children:s.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(ot,{className:"w-16 h-16 text-gray-500 mx-auto mb-4"}),e.jsx("h3",{className:"text-white text-lg font-medium mb-2",children:"No Pending Projects"}),e.jsx("p",{className:"text-gray-400",children:"All project requests have been processed"})]}):e.jsx("div",{className:"space-y-6",children:s.map(h=>{var p,j,v;return e.jsxs("div",{className:"bg-[#2A2A3A] rounded-2xl border border-gray-700 overflow-hidden",children:[e.jsxs("div",{className:"p-6 border-b border-gray-700",children:[e.jsx("div",{className:"flex items-start justify-between mb-4",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[e.jsx("h3",{className:"text-white text-lg font-semibold",children:h.name}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${g(h.priority)}`,children:(p=h.priority)==null?void 0:p.toUpperCase()}),e.jsxs("span",{className:`px-2 py-1 rounded-full text-xs font-medium border ${f("pending")}`,children:[e.jsx(Be,{className:"w-3 h-3 inline mr-1"}),"PENDING"]})]}),e.jsx("p",{className:"text-gray-400 text-sm mb-3",children:h.description}),e.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-400",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(ot,{className:"w-4 h-4"}),e.jsx("span",{children:h.projectCode})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(Oe,{className:"w-4 h-4"}),e.jsxs("span",{children:["Start: ",m(h.startDate)]})]}),h.endDate&&e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(Oe,{className:"w-4 h-4"}),e.jsxs("span",{children:["End: ",m(h.endDate)]})]})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(kn,{className:"w-4 h-4 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Client"}),e.jsx("p",{className:"text-white",children:((j=h.client)==null?void 0:j.name)||"N/A"})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_t,{className:"w-4 h-4 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Project Manager"}),e.jsx("p",{className:"text-white",children:h.projectManager?`${h.projectManager.firstName} ${h.projectManager.lastName}`:"N/A"})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ue,{className:"w-4 h-4 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Team Size"}),e.jsxs("p",{className:"text-white",children:[((v=h.teamMembers)==null?void 0:v.length)||0," members"]})]})]})]})]}),h.teamMembers&&h.teamMembers.length>0&&e.jsxs("div",{className:"p-6 border-b border-gray-700",children:[e.jsx("h4",{className:"text-white font-medium mb-3",children:"Assigned Team Members"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:h.teamMembers.map((w,b)=>e.jsxs("div",{className:"bg-[#1E1E2A] px-3 py-2 rounded-lg border border-gray-600",children:[e.jsx("p",{className:"text-white text-sm",children:w.employee?`${w.employee.firstName} ${w.employee.lastName}`:"Unknown"}),e.jsx("p",{className:"text-gray-400 text-xs",children:w.role||"Team Member"})]},b))})]}),e.jsx("div",{className:"p-6 border-b border-gray-700",children:e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("div",{className:"text-gray-400",children:["Submitted by"," ",e.jsx("span",{className:"text-white",children:h.submittedBy?`${h.submittedBy.firstName} ${h.submittedBy.lastName}`:"Unknown"})," ","on ",m(h.submittedAt)]}),e.jsxs("div",{className:"text-gray-400",children:["Location: ",e.jsx("span",{className:"text-white",children:h.location})]})]})}),e.jsxs("div",{className:"p-6 bg-[#1E1E2A] flex justify-end space-x-3",children:[e.jsxs("button",{onClick:()=>o({isOpen:!0,projectId:h._id,reason:""}),disabled:i===h._id,className:"px-6 py-2 bg-red-500 hover:bg-red-600 text-white rounded-lg font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2",children:[e.jsx(Qe,{className:"w-4 h-4"}),e.jsx("span",{children:i===h._id?"Processing...":"Reject"})]}),e.jsxs("button",{onClick:()=>x(h._id),disabled:i===h._id,className:"px-6 py-2 bg-green-500 hover:bg-green-600 text-white rounded-lg font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2",children:[e.jsx(Te,{className:"w-4 h-4"}),e.jsx("span",{children:i===h._id?"Processing...":"Approve"})]})]})]},h._id)})})}),c.isOpen&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-[#2A2A3A] rounded-2xl border border-gray-700 p-6 max-w-md w-full",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[e.jsx(Qe,{className:"w-6 h-6 text-red-400"}),e.jsx("h3",{className:"text-white text-lg font-semibold",children:"Reject Project"})]}),e.jsx("p",{className:"text-gray-400 mb-4",children:"Please provide a reason for rejecting this project request."}),e.jsx("textarea",{value:c.reason,onChange:h=>o(p=>({...p,reason:h.target.value})),placeholder:"Enter rejection reason...",className:"w-full bg-[#1E1E2A] text-white p-4 rounded-xl border border-gray-700 focus:border-red-500 focus:outline-none min-h-[100px] resize-none"}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-4",children:[e.jsx("button",{onClick:()=>o({isOpen:!1,projectId:null,reason:""}),disabled:i,className:"px-4 py-2 bg-gray-600 hover:bg-gray-700 text-white rounded-lg font-medium transition-colors disabled:opacity-50",children:"Cancel"}),e.jsx("button",{onClick:u,disabled:i||!c.reason.trim(),className:"px-4 py-2 bg-red-500 hover:bg-red-600 text-white rounded-lg font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:i?"Rejecting...":"Reject Project"})]})]})}),e.jsx(qt,{})]})},b3=()=>{const[t,s]=y.useState([]),[a,r]=y.useState(!0);y.useEffect(()=>{n()},[]);const n=async()=>{try{const l=await J.get("/assets");s(l.data.data)}catch{_.error("Failed to load assets")}finally{r(!1)}},i=l=>({available:"badge-success",assigned:"badge-info",maintenance:"badge-warning",retired:"badge-danger"})[l]||"badge-default";return a?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"w-12 h-12 border-4 border-primary-600 border-t-transparent rounded-full animate-spin"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-white",children:"Assets"}),e.jsx("p",{className:"text-gray-400 mt-1",children:"Manage company assets"})]}),e.jsxs("button",{className:"btn-primary flex items-center space-x-2",children:[e.jsx(qe,{size:20}),e.jsx("span",{children:"Add Asset"})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(l=>e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-12 h-12 bg-primary-600/20 rounded-lg flex items-center justify-center",children:e.jsx(is,{size:24,className:"text-primary-500"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-white",children:l.name}),e.jsx("p",{className:"text-sm text-gray-400",children:l.assetCode})]})]}),e.jsx("span",{className:`badge ${i(l.status)}`,children:l.status})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-400",children:"Category:"}),e.jsx("span",{className:"text-white capitalize",children:l.category})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-400",children:"Brand:"}),e.jsx("span",{className:"text-white",children:l.brand||"N/A"})]}),l.assignedTo&&e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-400",children:"Assigned To:"}),e.jsx("span",{className:"text-white",children:l.assignedTo.firstName})]})]})]},l._id))})]})},v3=()=>{const{user:t}=Rt();return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-white",children:"Profile Settings"}),e.jsx("p",{className:"text-gray-400 mt-1",children:"Manage your profile information"})]}),e.jsx("div",{className:"card",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Email"}),e.jsx("input",{type:"email",value:(t==null?void 0:t.email)||"",className:"input-field",disabled:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Role"}),e.jsx("input",{type:"text",value:(t==null?void 0:t.role)||"",className:"input-field capitalize",disabled:!0})]})]})})]})},j3=()=>{const[t,s]=y.useState(!1),[a,r]=y.useState({currentPassword:"",newPassword:"",confirmPassword:""}),n=async i=>{var l,c;if(i.preventDefault(),a.newPassword!==a.confirmPassword){_.error("Passwords do not match");return}s(!0);try{await J.put("/auth/updatepassword",{currentPassword:a.currentPassword,newPassword:a.newPassword}),_.success("Password updated successfully"),r({currentPassword:"",newPassword:"",confirmPassword:""})}catch(o){_.error(((c=(l=o.response)==null?void 0:l.data)==null?void 0:c.message)||"Failed to update password")}finally{s(!1)}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-white",children:"Security Settings"}),e.jsx("p",{className:"text-gray-400 mt-1",children:"Manage your password and security"})]}),e.jsx("form",{onSubmit:n,className:"max-w-2xl",children:e.jsxs("div",{className:"card space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Current Password"}),e.jsx("input",{type:"password",value:a.currentPassword,onChange:i=>r({...a,currentPassword:i.target.value}),className:"input-field",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"New Password"}),e.jsx("input",{type:"password",value:a.newPassword,onChange:i=>r({...a,newPassword:i.target.value}),className:"input-field",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Confirm New Password"}),e.jsx("input",{type:"password",value:a.confirmPassword,onChange:i=>r({...a,confirmPassword:i.target.value}),className:"input-field",required:!0})]}),e.jsxs("button",{type:"submit",disabled:t,className:"btn-primary flex items-center space-x-2",children:[e.jsx(Rs,{size:20}),e.jsx("span",{children:t?"Updating...":"Update Password"})]})]})})]})},N3=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-white",children:"Preferences"}),e.jsx("p",{className:"text-gray-400 mt-1",children:"Customize your experience"})]}),e.jsx("div",{className:"card",children:e.jsx("p",{className:"text-gray-400",children:"Preference settings coming soon"})})]}),Bu=()=>{var f,g,h;const{theme:t,setTheme:s,isChanging:a}=St(),r=Tb(),[n,i]=y.useState(!1),[l,c]=y.useState({primary:"#8b5cf6",background:"#0f0a1f",surface:"#1a1333",text:"#ede9fe"});y.useEffect(()=>{if(n){const p=localStorage.getItem("customThemeColors");if(p)try{const j=JSON.parse(p);c({primary:j.primary||"#8b5cf6",background:j.background||"#0f0a1f",surface:j.surface||"#1a1333",text:j.text||"#ede9fe"})}catch(j){console.error("Failed to load custom colors",j)}}},[n]);const o=async p=>{var j;if(p==="custom"){i(!0);return}try{await s(p),_.success(`Theme changed to ${(j=r.find(v=>v.id===p))==null?void 0:j.name}`)}catch{_.error("Failed to change theme")}},d=(p,j)=>{c(v=>({...v,[p]:j}))},x=async()=>{try{const p={primary:l.primary,primaryHover:u(l.primary,-20),background:l.background,surface:l.surface,surfaceHover:u(l.surface,10),text:l.text,textSecondary:u(l.text,-30),border:u(l.surface,20),accent:l.primary};localStorage.setItem("customThemeColors",JSON.stringify(p)),await new Promise(j=>setTimeout(j,50)),fo("custom"),await s("custom"),i(!1),_.success("Custom theme applied!")}catch(p){console.error("Custom theme error:",p),_.error("Failed to apply custom theme")}},u=(p,j)=>{const v=parseInt(p.replace("#",""),16),w=Math.round(2.55*j),b=(v>>16)+w,A=(v>>8&255)+w,N=(v&255)+w;return"#"+(16777216+(b<255?b<1?0:b:255)*65536+(A<255?A<1?0:A:255)*256+(N<255?N<1?0:N:255)).toString(16).slice(1)},m=async()=>{try{await s("dark"),_.success("Theme reset to default")}catch{_.error("Failed to reset theme")}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(ro,{className:"w-8 h-8 text-primary-500"}),e.jsx("h1",{className:"text-2xl font-bold text-white",children:"Theme Settings"})]}),e.jsx("p",{className:"text-gray-400 mt-1",children:"Customize your workspace appearance with beautiful themes"})]}),e.jsxs("button",{onClick:m,className:"flex items-center px-4 py-2 bg-dark-800 hover:bg-dark-700 text-gray-300 rounded-lg transition-colors",children:[e.jsx(no,{className:"w-4 h-4 mr-2"}),"Reset to Default"]})]}),e.jsx("div",{className:"card",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-1",children:"Current Theme"}),e.jsxs("p",{className:"text-gray-400",children:[(f=r.find(p=>p.id===t))==null?void 0:f.name," - ",(g=r.find(p=>p.id===t))==null?void 0:g.description]})]}),e.jsx("div",{className:`w-16 h-16 rounded-lg ${(h=r.find(p=>p.id===t))==null?void 0:h.preview} shadow-lg`})]})}),e.jsxs("div",{className:"card",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Available Themes"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:r.map(p=>e.jsxs("div",{className:`relative group cursor-pointer rounded-xl border-2 transition-all duration-300 ${t===p.id?"border-primary-500 shadow-lg shadow-primary-500/20":"border-dark-700 hover:border-dark-600"} ${a?"pointer-events-none opacity-50":""}`,onClick:()=>o(p.id),children:[e.jsxs("div",{className:`h-32 rounded-t-lg ${p.preview} relative overflow-hidden`,children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-white/5 to-transparent"}),e.jsxs("div",{className:"absolute bottom-2 left-2 right-2 flex space-x-1",children:[e.jsx("div",{className:"h-2 w-8 bg-white/20 rounded-full"}),e.jsx("div",{className:"h-2 w-12 bg-white/20 rounded-full"}),e.jsx("div",{className:"h-2 w-6 bg-white/20 rounded-full"})]})]}),e.jsx("div",{className:"p-4 bg-dark-800 rounded-b-lg",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-semibold text-white mb-1",children:p.name}),e.jsx("p",{className:"text-sm text-gray-400",children:p.description})]}),t===p.id&&e.jsx("div",{className:"ml-2 flex-shrink-0",children:e.jsx("div",{className:"w-6 h-6 bg-primary-600 rounded-full flex items-center justify-center",children:e.jsx(gn,{className:"w-4 h-4 text-white"})})})]})}),t!==p.id&&e.jsx("div",{className:"absolute inset-0 bg-primary-600/0 group-hover:bg-primary-600/5 rounded-xl transition-colors duration-300"})]},p.id))})]}),e.jsx("div",{className:"card bg-gradient-to-br from-primary-600/10 to-purple-600/10 border-primary-600/20",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(ml,{className:"w-6 h-6 text-primary-400 flex-shrink-0 mt-1"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-2",children:"Theme Tips"}),e.jsxs("ul",{className:"space-y-2 text-sm text-gray-300",children:[e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"text-primary-400 mr-2",children:"â€¢"}),e.jsx("span",{children:"Click any theme to apply it instantly"})]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"text-primary-400 mr-2",children:"â€¢"}),e.jsx("span",{children:"Your theme preference is saved automatically and syncs across all your devices"})]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"text-primary-400 mr-2",children:"â€¢"}),e.jsx("span",{children:"Themes apply globally to dashboard, navbar, sidebar, and all components"})]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"text-primary-400 mr-2",children:"â€¢"}),e.jsx("span",{children:"All themes are optimized for both desktop and mobile devices"})]})]})]})]})}),n&&e.jsx("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-dark-900 rounded-xl border border-dark-700 max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-dark-700",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(ro,{className:"w-6 h-6 text-primary-500"}),e.jsx("h2",{className:"text-xl font-bold text-white",children:"Custom Theme Builder"})]}),e.jsx("button",{onClick:()=>i(!1),className:"p-2 hover:bg-dark-800 rounded-lg transition-colors",children:e.jsx(Le,{className:"w-5 h-5 text-gray-400"})})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsx("p",{className:"text-gray-400 text-sm",children:"Create your personalized theme by choosing colors for different elements. The system will automatically generate complementary shades."}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{className:"block text-sm font-medium text-white",children:"Primary Color"}),e.jsx("p",{className:"text-xs text-gray-400",children:"Used for buttons, links, and highlights"}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("input",{type:"color",value:l.primary,onChange:p=>d("primary",p.target.value),className:"w-16 h-16 rounded-lg cursor-pointer border-2 border-dark-700"}),e.jsx("input",{type:"text",value:l.primary,onChange:p=>d("primary",p.target.value),className:"flex-1 bg-dark-800 border border-dark-700 text-white rounded-lg px-4 py-2 font-mono text-sm",placeholder:"#8b5cf6"})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{className:"block text-sm font-medium text-white",children:"Background Color"}),e.jsx("p",{className:"text-xs text-gray-400",children:"Main page background (should be very dark)"}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("input",{type:"color",value:l.background,onChange:p=>d("background",p.target.value),className:"w-16 h-16 rounded-lg cursor-pointer border-2 border-dark-700"}),e.jsx("input",{type:"text",value:l.background,onChange:p=>d("background",p.target.value),className:"flex-1 bg-dark-800 border border-dark-700 text-white rounded-lg px-4 py-2 font-mono text-sm",placeholder:"#0f0a1f"})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{className:"block text-sm font-medium text-white",children:"Surface Color"}),e.jsx("p",{className:"text-xs text-gray-400",children:"Cards, sidebar, and header background"}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("input",{type:"color",value:l.surface,onChange:p=>d("surface",p.target.value),className:"w-16 h-16 rounded-lg cursor-pointer border-2 border-dark-700"}),e.jsx("input",{type:"text",value:l.surface,onChange:p=>d("surface",p.target.value),className:"flex-1 bg-dark-800 border border-dark-700 text-white rounded-lg px-4 py-2 font-mono text-sm",placeholder:"#1a1333"})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{className:"block text-sm font-medium text-white",children:"Text Color"}),e.jsx("p",{className:"text-xs text-gray-400",children:"Main text color (should be light)"}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("input",{type:"color",value:l.text,onChange:p=>d("text",p.target.value),className:"w-16 h-16 rounded-lg cursor-pointer border-2 border-dark-700"}),e.jsx("input",{type:"text",value:l.text,onChange:p=>d("text",p.target.value),className:"flex-1 bg-dark-800 border border-dark-700 text-white rounded-lg px-4 py-2 font-mono text-sm",placeholder:"#ede9fe"})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{className:"block text-sm font-medium text-white",children:"Preview"}),e.jsx("div",{className:"rounded-lg p-6 border-2",style:{backgroundColor:l.background,borderColor:l.surface},children:e.jsxs("div",{className:"rounded-lg p-4 mb-4",style:{backgroundColor:l.surface},children:[e.jsx("h3",{className:"font-semibold mb-2",style:{color:l.text},children:"Sample Card"}),e.jsx("p",{className:"text-sm mb-3",style:{color:l.text,opacity:.7},children:"This is how your custom theme will look"}),e.jsx("button",{className:"px-4 py-2 rounded-lg text-white font-medium",style:{backgroundColor:l.primary},children:"Primary Button"})]})})]})]}),e.jsxs("div",{className:"flex items-center justify-end space-x-3 p-6 border-t border-dark-700",children:[e.jsx("button",{onClick:()=>i(!1),className:"px-6 py-2 bg-dark-800 hover:bg-dark-700 text-gray-300 rounded-lg transition-colors",children:"Cancel"}),e.jsxs("button",{onClick:x,className:"px-6 py-2 bg-primary-600 hover:bg-primary-700 text-white rounded-lg transition-colors flex items-center space-x-2",children:[e.jsx(gn,{className:"w-4 h-4"}),e.jsx("span",{children:"Apply Custom Theme"})]})]})]})})]})},w3=()=>{const[t,s]=y.useState([]),[a,r]=y.useState(!0),[n,i]=y.useState(""),[l,c]=y.useState("all"),[o,d]=y.useState(!1),[x,u]=y.useState(!1),[m,f]=y.useState(null),[g,h]=y.useState(!1),[p,j]=y.useState({name:"",companyName:"",email:"",phone:"",clientCode:"",status:"active",billingType:"per-month",address:{street:"",city:"",state:"",zipCode:"",country:""},contactPerson:{name:"",designation:"",email:"",phone:""},industry:"",website:"",notes:""}),[v,w]=y.useState({});y.useEffect(()=>{b()},[]);const b=async()=>{try{const M=await J.get("/clients");s(M.data.data)}catch{_.error("Failed to load clients")}finally{r(!1)}},A=async M=>{var H,U;if(window.confirm("Are you sure you want to delete this client?"))try{await J.delete(`/clients/${M}`),_.success("Client deleted successfully"),b()}catch(W){_.error(((U=(H=W==null?void 0:W.response)==null?void 0:H.data)==null?void 0:U.message)||"Failed to delete client")}},N=()=>{j({name:"",companyName:"",email:"",phone:"",clientCode:"",status:"active",billingType:"per-month",address:{street:"",city:"",state:"",zipCode:"",country:""},contactPerson:{name:"",designation:"",email:"",phone:""},industry:"",website:"",notes:""}),w({}),f(null),d(!0)},C=M=>{var H,U,W,se,X,D,le,de,E;j({name:M.name||"",companyName:M.companyName||"",email:M.email||"",phone:M.phone||"",clientCode:M.clientCode||"",status:M.status||"active",billingType:M.billingType||"per-month",address:{street:((H=M.address)==null?void 0:H.street)||"",city:((U=M.address)==null?void 0:U.city)||"",state:((W=M.address)==null?void 0:W.state)||"",zipCode:((se=M.address)==null?void 0:se.zipCode)||"",country:((X=M.address)==null?void 0:X.country)||""},contactPerson:{name:((D=M.contactPerson)==null?void 0:D.name)||"",designation:((le=M.contactPerson)==null?void 0:le.designation)||"",email:((de=M.contactPerson)==null?void 0:de.email)||"",phone:((E=M.contactPerson)==null?void 0:E.phone)||""},industry:M.industry||"",website:M.website||"",notes:M.notes||""}),w({}),f(M),u(!0)},k=()=>{const M={};return p.name.trim()||(M.name="Client name is required"),p.companyName.trim()||(M.companyName="Company name is required"),p.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(p.email)||(M.email="Invalid email format"):M.email="Email is required",p.phone.trim()?/^[0-9+\-\s()]+$/.test(p.phone)||(M.phone="Phone must contain only numbers"):M.phone="Phone is required",w(M),Object.keys(M).length===0},S=async M=>{var H,U;if(M.preventDefault(),!!k()){h(!0);try{const W={...p};W.clientCode||delete W.clientCode,W.industry||delete W.industry,W.website||delete W.website,W.notes||delete W.notes,m?(await J.put(`/clients/${m._id}`,W),_.success("Client updated successfully"),u(!1)):(await J.post("/clients",W),_.success("Client created successfully"),d(!1)),f(null),b()}catch(W){_.error(((U=(H=W==null?void 0:W.response)==null?void 0:H.data)==null?void 0:U.message)||`Failed to ${m?"update":"create"} client`)}finally{h(!1)}}},F=M=>{const{name:H,value:U}=M.target;if(H.includes(".")){const[W,se]=H.split(".");j(X=>({...X,[W]:{...X[W],[se]:U}}))}else j(W=>({...W,[H]:U}));v[H]&&w(W=>{const se={...W};return delete se[H],se})},R=t.filter(M=>{const H=M.name.toLowerCase().includes(n.toLowerCase())||M.companyName.toLowerCase().includes(n.toLowerCase())||M.clientCode.toLowerCase().includes(n.toLowerCase()),U=l==="all"||M.status===l;return H&&U}),T=M=>({active:"badge-success",inactive:"badge-default",suspended:"badge-danger"})[M]||"badge-default";return a?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"w-12 h-12 border-4 border-primary-600 border-t-transparent rounded-full animate-spin"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-white",children:"Clients"}),e.jsx("p",{className:"text-gray-400 mt-1",children:"Manage client relationships"})]}),e.jsxs("button",{onClick:N,className:"btn-primary flex items-center space-x-2",children:[e.jsx(qe,{size:20}),e.jsx("span",{children:"Add Client"})]})]}),e.jsx("div",{className:"card",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(yt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-500",size:20}),e.jsx("input",{type:"text",placeholder:"Search clients...",value:n,onChange:M=>i(M.target.value),className:"input-field pl-10"})]}),e.jsxs("select",{value:l,onChange:M=>c(M.target.value),className:"input-field md:w-48",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"inactive",children:"Inactive"}),e.jsx("option",{value:"suspended",children:"Suspended"})]})]})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:R.map(M=>e.jsxs("div",{className:"card hover:border-primary-600 transition-colors",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-12 h-12 bg-primary-600/20 rounded-lg flex items-center justify-center",children:e.jsx(qa,{size:24,className:"text-primary-500"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-white",children:M.name}),e.jsx("p",{className:"text-sm text-gray-400",children:M.clientCode})]})]}),e.jsx("span",{className:`badge ${T(M.status)}`,children:M.status})]}),e.jsxs("div",{className:"space-y-2 mb-4",children:[e.jsxs("div",{className:"flex items-center text-sm text-gray-400",children:[e.jsx("span",{className:"font-medium text-gray-300 w-24",children:"Company:"}),e.jsx("span",{children:M.companyName})]}),e.jsxs("div",{className:"flex items-center text-sm text-gray-400",children:[e.jsx("span",{className:"font-medium text-gray-300 w-24",children:"Email:"}),e.jsx("span",{className:"truncate",children:M.email})]}),e.jsxs("div",{className:"flex items-center text-sm text-gray-400",children:[e.jsx("span",{className:"font-medium text-gray-300 w-24",children:"Phone:"}),e.jsx("span",{children:M.phone})]}),e.jsxs("div",{className:"flex items-center text-sm text-gray-400",children:[e.jsx("span",{className:"font-medium text-gray-300 w-24",children:"Billing:"}),e.jsx("span",{className:"capitalize",children:M.billingType})]})]}),e.jsxs("div",{className:"flex items-center space-x-2 pt-4 border-t border-dark-800",children:[e.jsxs(ns,{to:`/clients/${M._id}`,className:"flex-1 btn-outline text-sm py-2 flex items-center justify-center space-x-1",children:[e.jsx(Ht,{size:16}),e.jsx("span",{children:"View"})]}),e.jsxs("button",{onClick:()=>C(M),className:"flex-1 btn-outline text-sm py-2 flex items-center justify-center space-x-1",children:[e.jsx($a,{size:16}),e.jsx("span",{children:"Edit"})]}),e.jsx("button",{onClick:()=>A(M._id),className:"btn-outline text-sm py-2 px-3 text-red-500 hover:bg-red-500/10",children:e.jsx(kt,{size:16})})]})]},M._id))}),R.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(qa,{size:48,className:"mx-auto text-gray-600 mb-4"}),e.jsx("p",{className:"text-gray-400",children:"No clients found"})]}),o&&e.jsx(zu,{formData:p,errors:v,submitting:g,onChange:F,onSubmit:S,onClose:()=>{d(!1),j({name:"",companyName:"",email:"",phone:"",clientCode:"",status:"active",billingType:"per-month",address:{street:"",city:"",state:"",zipCode:"",country:""},contactPerson:{name:"",designation:"",email:"",phone:""},industry:"",website:"",notes:""}),w({})},title:"Add Client"}),x&&e.jsx(zu,{formData:p,errors:v,submitting:g,onChange:F,onSubmit:S,onClose:()=>{u(!1),f(null),j({name:"",companyName:"",email:"",phone:"",clientCode:"",status:"active",billingType:"per-month",address:{street:"",city:"",state:"",zipCode:"",country:""},contactPerson:{name:"",designation:"",email:"",phone:""},industry:"",website:"",notes:""}),w({})},title:"Edit Client"})]})},zu=({formData:t,errors:s,submitting:a,onChange:r,onSubmit:n,onClose:i,title:l})=>e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-gray-800 rounded-lg w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-gray-800 border-b border-gray-700 p-6 flex items-center justify-between",children:[e.jsx("h2",{className:"text-2xl font-bold text-white",children:l}),e.jsx("button",{onClick:i,className:"text-gray-400 hover:text-white",children:e.jsx(Le,{size:24})})]}),e.jsxs("form",{onSubmit:n,className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Basic Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:["Client Name ",e.jsx("span",{className:"text-red-400",children:"*"})]}),e.jsx("input",{type:"text",name:"name",value:t.name,onChange:r,className:`input-field w-full ${s.name?"border-red-500":""}`,required:!0}),s.name&&e.jsx("p",{className:"text-red-400 text-xs mt-1",children:s.name})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:["Company Name ",e.jsx("span",{className:"text-red-400",children:"*"})]}),e.jsx("input",{type:"text",name:"companyName",value:t.companyName,onChange:r,className:`input-field w-full ${s.companyName?"border-red-500":""}`,required:!0}),s.companyName&&e.jsx("p",{className:"text-red-400 text-xs mt-1",children:s.companyName})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:["Email ",e.jsx("span",{className:"text-red-400",children:"*"})]}),e.jsx("input",{type:"email",name:"email",value:t.email,onChange:r,className:`input-field w-full ${s.email?"border-red-500":""}`,required:!0}),s.email&&e.jsx("p",{className:"text-red-400 text-xs mt-1",children:s.email})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:["Phone ",e.jsx("span",{className:"text-red-400",children:"*"})]}),e.jsx("input",{type:"tel",name:"phone",value:t.phone,onChange:r,onKeyPress:c=>{const o=String.fromCharCode(c.which);!/[0-9+\-\s()]/.test(o)&&c.which!==8&&c.which!==46&&c.preventDefault()},className:`input-field w-full ${s.phone?"border-red-500":""}`,required:!0,placeholder:"Enter phone number (numbers only)"}),s.phone&&e.jsx("p",{className:"text-red-400 text-xs mt-1",children:s.phone})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Client Code"}),e.jsx("input",{type:"text",name:"clientCode",value:t.clientCode,onChange:r,className:"input-field w-full",placeholder:"Auto-generated if empty"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:["Status ",e.jsx("span",{className:"text-red-400",children:"*"})]}),e.jsxs("select",{name:"status",value:t.status,onChange:r,className:"input-field w-full",required:!0,children:[e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"inactive",children:"Inactive"}),e.jsx("option",{value:"suspended",children:"Suspended"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Billing Type"}),e.jsxs("select",{name:"billingType",value:t.billingType,onChange:r,className:"input-field w-full",children:[e.jsx("option",{value:"per-day",children:"Per Day"}),e.jsx("option",{value:"per-month",children:"Per Month"}),e.jsx("option",{value:"fte",children:"FTE"}),e.jsx("option",{value:"fixed",children:"Fixed"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Industry"}),e.jsx("input",{type:"text",name:"industry",value:t.industry,onChange:r,className:"input-field w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Website"}),e.jsx("input",{type:"url",name:"website",value:t.website,onChange:r,className:"input-field w-full",placeholder:"https://"})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Address"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Street"}),e.jsx("input",{type:"text",name:"address.street",value:t.address.street,onChange:r,className:"input-field w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"City"}),e.jsx("input",{type:"text",name:"address.city",value:t.address.city,onChange:r,className:"input-field w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"State"}),e.jsx("input",{type:"text",name:"address.state",value:t.address.state,onChange:r,className:"input-field w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Zip Code"}),e.jsx("input",{type:"text",name:"address.zipCode",value:t.address.zipCode,onChange:r,className:"input-field w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Country"}),e.jsx("input",{type:"text",name:"address.country",value:t.address.country,onChange:r,className:"input-field w-full"})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Contact Person"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Name"}),e.jsx("input",{type:"text",name:"contactPerson.name",value:t.contactPerson.name,onChange:r,className:"input-field w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Designation"}),e.jsx("input",{type:"text",name:"contactPerson.designation",value:t.contactPerson.designation,onChange:r,className:"input-field w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Email"}),e.jsx("input",{type:"email",name:"contactPerson.email",value:t.contactPerson.email,onChange:r,className:"input-field w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Phone"}),e.jsx("input",{type:"tel",name:"contactPerson.phone",value:t.contactPerson.phone,onChange:r,onKeyPress:c=>{const o=String.fromCharCode(c.which);!/[0-9+\-\s()]/.test(o)&&c.which!==8&&c.which!==46&&c.preventDefault()},className:"input-field w-full",placeholder:"Enter phone number (numbers only)"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Notes"}),e.jsx("textarea",{name:"notes",value:t.notes,onChange:r,className:"input-field w-full",rows:"4",placeholder:"Additional notes about the client..."})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t border-gray-700",children:[e.jsx("button",{type:"button",onClick:i,className:"px-6 py-2 border border-gray-600 text-gray-300 rounded-lg hover:bg-gray-700",disabled:a,children:"Cancel"}),e.jsxs("button",{type:"submit",className:"btn-primary px-6 py-2 flex items-center space-x-2",disabled:a,children:[a&&e.jsx(Qt,{size:16,className:"animate-spin"}),e.jsx("span",{children:a?"Saving...":"Save Client"})]})]})]})]})}),k3=()=>{const[t,s]=y.useState([]),[a,r]=y.useState(!0),[n,i]=y.useState("all"),[l,c]=y.useState([]),[o,d]=y.useState([]),[x,u]=y.useState(!1),[m,f]=y.useState(!1),[g,h]=y.useState(!1),[p,j]=y.useState(null),[v,w]=y.useState(!1),[b,A]=y.useState({name:"",client:"",description:"",location:"",startDate:"",endDate:"",status:"planning",projectManager:"",budget:{estimated:"",actual:"",currency:"USD"}}),[N,C]=y.useState({});y.useEffect(()=>{k(),S(),F()},[]);const k=async()=>{try{const D=await J.get("/projects");s(D.data.data)}catch{_.error("Failed to load projects")}finally{r(!1)}},S=async()=>{try{const D=await J.get("/clients?status=active");c(D.data.data||[])}catch(D){console.error("Failed to load clients:",D)}},F=async()=>{try{const D=await J.get("/employees"),le=["manager","hr","admin","company_admin"],de=(D.data.data||[]).filter(E=>le.includes(E.role));d(de)}catch(D){console.error("Failed to load employees:",D)}},R=()=>{A({name:"",client:"",description:"",location:"",startDate:"",endDate:"",status:"planning",projectManager:"",budget:{estimated:"",actual:"",currency:"USD"}}),C({}),j(null),u(!0)},T=D=>{var le,de,E,z,O;A({name:D.name||"",client:((le=D.client)==null?void 0:le._id)||D.client||"",description:D.description||"",location:D.location||"",startDate:D.startDate?new Date(D.startDate).toISOString().split("T")[0]:"",endDate:D.endDate?new Date(D.endDate).toISOString().split("T")[0]:"",status:D.status||"planning",projectManager:((de=D.projectManager)==null?void 0:de._id)||D.projectManager||"",budget:{estimated:((E=D.budget)==null?void 0:E.estimated)||"",actual:((z=D.budget)==null?void 0:z.actual)||"",currency:((O=D.budget)==null?void 0:O.currency)||"USD"}}),C({}),j(D),f(!0)},M=D=>{j(D),h(!0)},H=()=>{const D={};return b.name.trim()||(D.name="Project name is required"),b.client||(D.client="Client is required"),b.location.trim()||(D.location="Location is required"),b.startDate||(D.startDate="Start date is required"),b.endDate&&b.startDate&&new Date(b.endDate)<new Date(b.startDate)&&(D.endDate="End date must be after start date"),C(D),Object.keys(D).length===0},U=async D=>{var le,de;if(D.preventDefault(),!!H()){w(!0);try{const E={...b,budget:{estimated:b.budget.estimated?parseFloat(b.budget.estimated):void 0,actual:b.budget.actual?parseFloat(b.budget.actual):void 0,currency:b.budget.currency}};E.description||delete E.description,E.endDate||delete E.endDate,E.projectManager||delete E.projectManager,E.budget.estimated||delete E.budget.estimated,E.budget.actual||delete E.budget.actual,p?(await J.put(`/projects/${p._id}`,E),_.success("Project updated successfully"),f(!1)):(await J.post("/projects",E),_.success("Project created successfully"),u(!1)),j(null),k()}catch(E){_.error(((de=(le=E==null?void 0:E.response)==null?void 0:le.data)==null?void 0:de.message)||`Failed to ${p?"update":"create"} project`)}finally{w(!1)}}},W=D=>{const{name:le,value:de}=D.target;if(le.includes(".")){const[E,z]=le.split(".");A(O=>({...O,[E]:{...O[E],[z]:de}}))}else A(E=>({...E,[le]:de}));N[le]&&C(E=>{const z={...E};return delete z[le],z})},se=t.filter(D=>n==="all"||D.status===n),X=D=>({planning:"badge-info",active:"badge-success","on-hold":"badge-warning",completed:"badge-default",cancelled:"badge-danger"})[D]||"badge-default";return a?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"w-12 h-12 border-4 border-primary-600 border-t-transparent rounded-full animate-spin"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-white",children:"Projects"}),e.jsx("p",{className:"text-gray-400 mt-1",children:"Manage client projects and assignments"})]}),e.jsxs("button",{onClick:R,className:"btn-primary flex items-center space-x-2",children:[e.jsx(qe,{size:20}),e.jsx("span",{children:"Add Project"})]})]}),e.jsx("div",{className:"card",children:e.jsxs("select",{value:n,onChange:D=>i(D.target.value),className:"input-field w-48",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"planning",children:"Planning"}),e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"on-hold",children:"On Hold"}),e.jsx("option",{value:"completed",children:"Completed"}),e.jsx("option",{value:"cancelled",children:"Cancelled"})]})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:se.map(D=>{var le,de;return e.jsxs("div",{className:"card hover:border-primary-600 transition-colors",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-12 h-12 bg-primary-600/20 rounded-lg flex items-center justify-center",children:e.jsx(rx,{size:24,className:"text-primary-500"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-white",children:D.name}),e.jsx("p",{className:"text-sm text-gray-400",children:D.projectCode})]})]}),e.jsx("span",{className:`badge ${X(D.status)}`,children:D.status})]}),e.jsxs("div",{className:"space-y-2 mb-4",children:[e.jsxs("div",{className:"flex items-center text-sm text-gray-400",children:[e.jsx("span",{className:"font-medium text-gray-300 w-24",children:"Client:"}),e.jsx("span",{children:(le=D.client)==null?void 0:le.name})]}),e.jsxs("div",{className:"flex items-center text-sm text-gray-400",children:[e.jsx("span",{className:"font-medium text-gray-300 w-24",children:"Location:"}),e.jsx("span",{children:D.location})]}),e.jsxs("div",{className:"flex items-center text-sm text-gray-400",children:[e.jsx("span",{className:"font-medium text-gray-300 w-24",children:"Manager:"}),e.jsx("span",{children:D.projectManager?`${D.projectManager.firstName} ${D.projectManager.lastName}`:"Not assigned"})]}),e.jsxs("div",{className:"flex items-center text-sm text-gray-400",children:[e.jsx("span",{className:"font-medium text-gray-300 w-24",children:"Team Size:"}),e.jsx("span",{children:((de=D.teamMembers)==null?void 0:de.filter(E=>E.isActive).length)||0})]}),e.jsxs("div",{className:"flex items-center text-sm text-gray-400",children:[e.jsx("span",{className:"font-medium text-gray-300 w-24",children:"Duration:"}),e.jsxs("span",{children:[new Date(D.startDate).toLocaleDateString()," -",D.endDate?new Date(D.endDate).toLocaleDateString():"Ongoing"]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("button",{onClick:()=>M(D),className:"flex-1 btn-primary text-sm",children:[e.jsx(Ht,{size:16,className:"inline mr-1"}),"View Details"]}),e.jsx("button",{onClick:()=>T(D),className:"btn-outline text-sm px-3",title:"Edit Project",children:"Edit"})]})]},D._id)})}),se.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(rx,{size:48,className:"mx-auto text-gray-600 mb-4"}),e.jsx("p",{className:"text-gray-400",children:"No projects found"})]}),x&&e.jsx(Uu,{formData:b,errors:N,submitting:v,clients:l,employees:o,onChange:W,onSubmit:U,onClose:()=>{u(!1),A({name:"",client:"",description:"",location:"",startDate:"",endDate:"",status:"planning",projectManager:"",budget:{estimated:"",actual:"",currency:"USD"}}),C({})},title:"Add Project"}),m&&e.jsx(Uu,{formData:b,errors:N,submitting:v,clients:l,employees:o,onChange:W,onSubmit:U,onClose:()=>{f(!1),j(null),A({name:"",client:"",description:"",location:"",startDate:"",endDate:"",status:"planning",projectManager:"",budget:{estimated:"",actual:"",currency:"USD"}}),C({})},title:"Edit Project"}),g&&p&&e.jsx(S3,{project:p,onClose:()=>{h(!1),j(null)},onEdit:()=>{h(!1),T(p)}})]})},Uu=({formData:t,errors:s,submitting:a,clients:r,employees:n,onChange:i,onSubmit:l,onClose:c,title:o})=>e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-gray-800 rounded-lg w-full max-w-3xl max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-gray-800 border-b border-gray-700 p-6 flex items-center justify-between",children:[e.jsx("h2",{className:"text-2xl font-bold text-white",children:o}),e.jsx("button",{onClick:c,className:"text-gray-400 hover:text-white",children:e.jsx(Le,{size:24})})]}),e.jsxs("form",{onSubmit:l,className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Basic Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:["Project Name ",e.jsx("span",{className:"text-red-400",children:"*"})]}),e.jsx("input",{type:"text",name:"name",value:t.name,onChange:i,className:`input-field w-full ${s.name?"border-red-500":""}`,required:!0}),s.name&&e.jsx("p",{className:"text-red-400 text-xs mt-1",children:s.name})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:["Client ",e.jsx("span",{className:"text-red-400",children:"*"})]}),e.jsxs("select",{name:"client",value:t.client,onChange:i,className:`input-field w-full ${s.client?"border-red-500":""}`,required:!0,children:[e.jsx("option",{value:"",children:"Select Client"}),r.map(d=>e.jsxs("option",{value:d._id,children:[d.name," (",d.clientCode,")"]},d._id))]}),s.client&&e.jsx("p",{className:"text-red-400 text-xs mt-1",children:s.client})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:["Location ",e.jsx("span",{className:"text-red-400",children:"*"})]}),e.jsx("input",{type:"text",name:"location",value:t.location,onChange:i,className:`input-field w-full ${s.location?"border-red-500":""}`,required:!0}),s.location&&e.jsx("p",{className:"text-red-400 text-xs mt-1",children:s.location})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:["Status ",e.jsx("span",{className:"text-red-400",children:"*"})]}),e.jsxs("select",{name:"status",value:t.status,onChange:i,className:"input-field w-full",required:!0,children:[e.jsx("option",{value:"planning",children:"Planning"}),e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"on-hold",children:"On Hold"}),e.jsx("option",{value:"completed",children:"Completed"}),e.jsx("option",{value:"cancelled",children:"Cancelled"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:["Start Date ",e.jsx("span",{className:"text-red-400",children:"*"})]}),e.jsx("input",{type:"date",name:"startDate",value:t.startDate,onChange:i,className:`input-field w-full ${s.startDate?"border-red-500":""}`,required:!0}),s.startDate&&e.jsx("p",{className:"text-red-400 text-xs mt-1",children:s.startDate})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"End Date"}),e.jsx("input",{type:"date",name:"endDate",value:t.endDate,onChange:i,min:t.startDate,className:`input-field w-full ${s.endDate?"border-red-500":""}`}),s.endDate&&e.jsx("p",{className:"text-red-400 text-xs mt-1",children:s.endDate})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Project Manager"}),e.jsxs("select",{name:"projectManager",value:t.projectManager,onChange:i,className:"input-field w-full",children:[e.jsx("option",{value:"",children:"Not Assigned"}),n.map(d=>e.jsxs("option",{value:d._id,children:[d.firstName," ",d.lastName," (",d.role,")"]},d._id))]})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Description"}),e.jsx("textarea",{name:"description",value:t.description,onChange:i,className:"input-field w-full",rows:"4",placeholder:"Project description..."})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Budget"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Estimated Amount"}),e.jsx("input",{type:"number",name:"budget.estimated",value:t.budget.estimated,onChange:i,className:"input-field w-full",min:"0",step:"0.01"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Actual Amount"}),e.jsx("input",{type:"number",name:"budget.actual",value:t.budget.actual,onChange:i,className:"input-field w-full",min:"0",step:"0.01"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Currency"}),e.jsxs("select",{name:"budget.currency",value:t.budget.currency,onChange:i,className:"input-field w-full",children:[e.jsx("option",{value:"USD",children:"USD"}),e.jsx("option",{value:"EUR",children:"EUR"}),e.jsx("option",{value:"GBP",children:"GBP"}),e.jsx("option",{value:"INR",children:"INR"})]})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t border-gray-700",children:[e.jsx("button",{type:"button",onClick:c,className:"px-6 py-2 border border-gray-600 text-gray-300 rounded-lg hover:bg-gray-700",disabled:a,children:"Cancel"}),e.jsxs("button",{type:"submit",className:"btn-primary px-6 py-2 flex items-center space-x-2",disabled:a,children:[a&&e.jsx(Qt,{size:16,className:"animate-spin"}),e.jsx("span",{children:a?"Saving...":"Save Project"})]})]})]})]})}),S3=({project:t,onClose:s,onEdit:a})=>{var r;return e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-gray-800 rounded-lg w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-gray-800 border-b border-gray-700 p-6 flex items-center justify-between",children:[e.jsx("h2",{className:"text-2xl font-bold text-white",children:"Project Details"}),e.jsx("button",{onClick:s,className:"text-gray-400 hover:text-white",children:e.jsx(Le,{size:24})})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Project Information"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-400",children:"Project Name"}),e.jsx("p",{className:"text-white font-medium",children:t.name})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-400",children:"Project Code"}),e.jsx("p",{className:"text-white font-medium",children:t.projectCode})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-400",children:"Client"}),e.jsx("p",{className:"text-white font-medium",children:((r=t.client)==null?void 0:r.name)||"N/A"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-400",children:"Status"}),e.jsx("p",{className:"text-white font-medium capitalize",children:t.status})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-400",children:"Location"}),e.jsx("p",{className:"text-white font-medium",children:t.location})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-400",children:"Project Manager"}),e.jsx("p",{className:"text-white font-medium",children:t.projectManager?`${t.projectManager.firstName} ${t.projectManager.lastName}`:"Not assigned"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-400",children:"Start Date"}),e.jsx("p",{className:"text-white font-medium",children:new Date(t.startDate).toLocaleDateString()})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-400",children:"End Date"}),e.jsx("p",{className:"text-white font-medium",children:t.endDate?new Date(t.endDate).toLocaleDateString():"Ongoing"})]})]}),t.description&&e.jsxs("div",{className:"mt-4",children:[e.jsx("p",{className:"text-sm text-gray-400 mb-2",children:"Description"}),e.jsx("p",{className:"text-white",children:t.description})]})]}),t.budget&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Budget"}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-400",children:"Estimated"}),e.jsx("p",{className:"text-white font-medium",children:t.budget.estimated?`${t.budget.currency||"USD"} ${t.budget.estimated.toLocaleString()}`:"N/A"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-400",children:"Actual"}),e.jsx("p",{className:"text-white font-medium",children:t.budget.actual?`${t.budget.currency||"USD"} ${t.budget.actual.toLocaleString()}`:"N/A"})]})]})]}),t.teamMembers&&t.teamMembers.length>0&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Team Members"}),e.jsx("div",{className:"space-y-2",children:t.teamMembers.filter(n=>n.isActive).map((n,i)=>{var l,c;return e.jsx("div",{className:"p-3 bg-gray-700 rounded-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-white font-medium",children:[(l=n.employee)==null?void 0:l.firstName," ",(c=n.employee)==null?void 0:c.lastName]}),e.jsx("p",{className:"text-sm text-gray-400",children:n.role})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm text-gray-400",children:"Status"}),e.jsx("p",{className:"text-green-400",children:"Active"})]})]})},i)})})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t border-gray-700",children:[e.jsx("button",{onClick:s,className:"px-6 py-2 border border-gray-600 text-gray-300 rounded-lg hover:bg-gray-700",children:"Close"}),e.jsx("button",{onClick:a,className:"btn-primary px-6 py-2",children:"Edit Project"})]})]})]})})},C3=()=>{const{user:t}=Rt(),[s,a]=y.useState([]),[r,n]=y.useState(!0),[i,l]=y.useState("all"),[c,o]=y.useState(!1),[d,x]=y.useState([]),[u,m]=y.useState([]),[f,g]=y.useState([]),[h,p]=y.useState(!1),[j,v]=y.useState(""),[w,b]=y.useState({employee:"",project:"",client:"",entries:[{date:"",hours:"",taskDescription:"",billable:!0},{date:"",hours:"",taskDescription:"",billable:!0},{date:"",hours:"",taskDescription:"",billable:!0},{date:"",hours:"",taskDescription:"",billable:!0},{date:"",hours:"",taskDescription:"",billable:!0},{date:"",hours:"",taskDescription:"",billable:!0},{date:"",hours:"",taskDescription:"",billable:!0}],notes:""}),[A,N]=y.useState({});y.useEffect(()=>{C(),c&&(k(),S(),F())},[c]);const C=async()=>{try{const P=await J.get("/timesheets");a(P.data.data)}catch{_.error("Failed to load timesheets")}finally{n(!1)}},k=async()=>{try{const P=await J.get("/projects?status=active");x(P.data.data||[])}catch(P){console.error("Failed to load projects:",P)}},S=async()=>{try{const P=await J.get("/clients?status=active");m(P.data.data||[])}catch(P){console.error("Failed to load clients:",P)}},F=async()=>{try{const P=await J.get("/employees");g(P.data.data||[])}catch(P){console.error("Failed to load employees:",P)}},R=P=>{if(!P)return[];const Z=new Date(P),re=[];for(let ie=0;ie<7;ie++){const oe=new Date(Z);oe.setDate(oe.getDate()+ie),re.push(oe.toISOString().split("T")[0])}return re},T=()=>{const P=new Date,Z=P.getDay();P.getDate()-Z+(Z===0?-6:1);const re=new Date(P);re.setDate(re.getDate()-Z+(Z===0?-6:1)),re.setHours(0,0,0,0);const ie=re.toISOString().split("T")[0],oe=R(ie);v(ie),b({employee:((t==null?void 0:t.role)==="employee",""),project:"",client:"",entries:oe.map(ue=>({date:ue,hours:"",taskDescription:"",billable:!0})),notes:""}),N({}),o(!0)},M=P=>{v(P);const Z=R(P);b(re=>({...re,entries:Z.map((ie,oe)=>{var ue,Ne,I;return{date:ie,hours:((ue=re.entries[oe])==null?void 0:ue.hours)||"",taskDescription:((Ne=re.entries[oe])==null?void 0:Ne.taskDescription)||"",billable:((I=re.entries[oe])==null?void 0:I.billable)!==!1}})}))},H=P=>{const Z=d.find(re=>re._id===P);b(re=>{var ie;return{...re,project:P,client:((ie=Z==null?void 0:Z.client)==null?void 0:ie._id)||(Z==null?void 0:Z.client)||""}})},U=(P,Z,re)=>{b(ie=>({...ie,entries:ie.entries.map((oe,ue)=>ue===P?{...oe,[Z]:re}:oe)}))},W=()=>w.entries.reduce((P,Z)=>{const re=parseFloat(Z.hours)||0;return P+re},0),se=()=>w.entries.reduce((P,Z)=>{if(Z.billable){const re=parseFloat(Z.hours)||0;return P+re}return P},0),X=()=>{const P={};return!w.employee&&(t==null?void 0:t.role)!=="employee"&&(t==null?void 0:t.role)!=="hr"&&(P.employee="Employee is required"),w.project||(P.project="Project is required"),w.client||(P.client="Client is required"),j||(P.weekStartDate="Week start date is required"),w.entries.some(re=>re.hours&&parseFloat(re.hours)>0)||(P.entries="At least one entry with hours is required"),w.entries.forEach((re,ie)=>{if(re.hours&&re.hours!==""){const oe=parseFloat(re.hours);(isNaN(oe)||oe<0||oe>24)&&(P[`entry_${ie}_hours`]="Hours must be between 0 and 24")}}),N(P),Object.keys(P).length===0},D=async P=>{var Z,re;if(P.preventDefault(),!!X()){p(!0);try{const ie=new Date(j),oe=new Date(ie);oe.setDate(oe.getDate()+6);const ue=w.entries.filter(I=>I.hours&&parseFloat(I.hours)>0).map(I=>({date:I.date,hours:parseFloat(I.hours),taskDescription:I.taskDescription||"",billable:I.billable!==!1})),Ne={...(t==null?void 0:t.role)!=="employee"&&w.employee?{employee:w.employee}:{},project:w.project,client:w.client,weekStartDate:j,weekEndDate:oe.toISOString().split("T")[0],entries:ue,...w.notes?{notes:w.notes}:{}};await J.post("/timesheets",Ne),_.success("Timesheet created successfully"),o(!1),C(),b({employee:"",project:"",client:"",entries:Array(7).fill({date:"",hours:"",taskDescription:"",billable:!0}),notes:""}),v("")}catch(ie){_.error(((re=(Z=ie==null?void 0:ie.response)==null?void 0:Z.data)==null?void 0:re.message)||"Failed to create timesheet")}finally{p(!1)}}},le=async P=>{try{await J.put(`/timesheets/${P}/approve`),_.success("Timesheet approved successfully"),C()}catch{_.error("Failed to approve timesheet")}},de=async P=>{var re,ie;const Z=window.prompt("Enter rejection reason:");if(Z)try{await J.put(`/timesheets/${P}/reject`,{rejectionReason:Z}),_.success("Timesheet rejected"),C()}catch(oe){_.error(((ie=(re=oe==null?void 0:oe.response)==null?void 0:re.data)==null?void 0:ie.message)||"Failed to reject timesheet")}},E=s.filter(P=>i==="all"||P.status===i),z=P=>({draft:"badge-default",submitted:"badge-warning",approved:"badge-success",rejected:"badge-danger",invoiced:"badge-info"})[P]||"badge-default",O=(t==null?void 0:t.role)==="admin"||(t==null?void 0:t.role)==="hr"||(t==null?void 0:t.role)==="client";return r?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"w-12 h-12 border-4 border-primary-600 border-t-transparent rounded-full animate-spin"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-white",children:"Timesheets"}),e.jsx("p",{className:"text-gray-400 mt-1",children:"Track project hours and billing"})]}),e.jsxs("button",{onClick:T,className:"btn-primary flex items-center space-x-2",children:[e.jsx(qe,{size:20}),e.jsx("span",{children:"New Timesheet"})]})]}),e.jsx("div",{className:"card",children:e.jsxs("select",{value:i,onChange:P=>l(P.target.value),className:"input-field w-48",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"draft",children:"Draft"}),e.jsx("option",{value:"submitted",children:"Submitted"}),e.jsx("option",{value:"approved",children:"Approved"}),e.jsx("option",{value:"rejected",children:"Rejected"}),e.jsx("option",{value:"invoiced",children:"Invoiced"})]})}),e.jsx("div",{className:"card p-0",children:e.jsx("div",{className:"table-container",children:e.jsxs("table",{className:"table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Employee"}),e.jsx("th",{children:"Project"}),e.jsx("th",{children:"Client"}),e.jsx("th",{children:"Week"}),e.jsx("th",{children:"Total Hours"}),e.jsx("th",{children:"Billable Hours"}),e.jsx("th",{children:"Status"}),O&&e.jsx("th",{children:"Actions"})]})}),e.jsx("tbody",{children:E.map(P=>{var Z,re,ie,oe;return e.jsxs("tr",{children:[e.jsxs("td",{children:[(Z=P.employee)==null?void 0:Z.firstName," ",(re=P.employee)==null?void 0:re.lastName]}),e.jsx("td",{children:(ie=P.project)==null?void 0:ie.name}),e.jsx("td",{children:(oe=P.client)==null?void 0:oe.name}),e.jsxs("td",{children:[new Date(P.weekStartDate).toLocaleDateString()," -",new Date(P.weekEndDate).toLocaleDateString()]}),e.jsxs("td",{children:[P.totalHours," hrs"]}),e.jsxs("td",{children:[P.totalBillableHours," hrs"]}),e.jsx("td",{children:e.jsx("span",{className:`badge ${z(P.status)}`,children:P.status})}),O&&e.jsx("td",{children:P.status==="submitted"&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>le(P._id),className:"p-2 text-green-400 hover:bg-dark-800 rounded",title:"Approve",children:e.jsx(gn,{size:16})}),e.jsx("button",{onClick:()=>de(P._id),className:"p-2 text-red-400 hover:bg-dark-800 rounded",title:"Reject",children:e.jsx(Le,{size:16})})]})})]},P._id)})})]})})}),E.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Be,{size:48,className:"mx-auto text-gray-600 mb-4"}),e.jsx("p",{className:"text-gray-400",children:"No timesheets found"})]}),c&&e.jsx(A3,{formData:w,errors:A,submitting:h,weekStartDate:j,projects:d,clients:u,employees:f,user:t,onChange:(P,Z)=>b(re=>({...re,[P]:Z})),onWeekStartChange:M,onProjectChange:H,onEntryChange:U,onSubmit:D,onClose:()=>{o(!1),b({employee:"",project:"",client:"",entries:Array(7).fill({date:"",hours:"",taskDescription:"",billable:!0}),notes:""}),v(""),N({})},calculateTotalHours:W,calculateBillableHours:se})]})},A3=({formData:t,errors:s,submitting:a,weekStartDate:r,projects:n,clients:i,employees:l,user:c,onChange:o,onWeekStartChange:d,onProjectChange:x,onEntryChange:u,onSubmit:m,onClose:f,calculateTotalHours:g,calculateBillableHours:h})=>{(()=>{if(!r)return[];const v=new Date(r),w=[];for(let b=0;b<7;b++){const A=new Date(v);A.setDate(A.getDate()+b),w.push(A.toISOString().split("T")[0])}return w})();const j=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"];return e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-gray-800 rounded-lg w-full max-w-5xl max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-gray-800 border-b border-gray-700 p-6 flex items-center justify-between",children:[e.jsx("h2",{className:"text-2xl font-bold text-white",children:"Create New Timesheet"}),e.jsx("button",{onClick:f,className:"text-gray-400 hover:text-white",children:e.jsx(Le,{size:24})})]}),e.jsxs("form",{onSubmit:m,className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Basic Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(c==null?void 0:c.role)!=="employee"&&e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:["Employee ",e.jsx("span",{className:"text-red-400",children:"*"})]}),e.jsxs("select",{value:t.employee,onChange:v=>o("employee",v.target.value),className:`input-field w-full ${s.employee?"border-red-500":""}`,required:(c==null?void 0:c.role)!=="employee",children:[e.jsx("option",{value:"",children:"Select Employee"}),l.map(v=>e.jsxs("option",{value:v._id,children:[v.firstName," ",v.lastName," (",v.employeeCode||v.email,")"]},v._id))]}),s.employee&&e.jsx("p",{className:"text-red-400 text-xs mt-1",children:s.employee})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:["Week Start Date ",e.jsx("span",{className:"text-red-400",children:"*"})]}),e.jsx("input",{type:"date",value:r,onChange:v=>d(v.target.value),className:`input-field w-full ${s.weekStartDate?"border-red-500":""}`,required:!0}),s.weekStartDate&&e.jsx("p",{className:"text-red-400 text-xs mt-1",children:s.weekStartDate})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:["Project ",e.jsx("span",{className:"text-red-400",children:"*"})]}),e.jsxs("select",{value:t.project,onChange:v=>x(v.target.value),className:`input-field w-full ${s.project?"border-red-500":""}`,required:!0,children:[e.jsx("option",{value:"",children:"Select Project"}),n.map(v=>e.jsxs("option",{value:v._id,children:[v.name," (",v.projectCode,")"]},v._id))]}),s.project&&e.jsx("p",{className:"text-red-400 text-xs mt-1",children:s.project})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:["Client ",e.jsx("span",{className:"text-red-400",children:"*"})]}),e.jsxs("select",{value:t.client,onChange:v=>o("client",v.target.value),className:`input-field w-full ${s.client?"border-red-500":""}`,required:!0,children:[e.jsx("option",{value:"",children:"Select Client"}),i.map(v=>e.jsxs("option",{value:v._id,children:[v.name," (",v.clientCode,")"]},v._id))]}),s.client&&e.jsx("p",{className:"text-red-400 text-xs mt-1",children:s.client})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Time Entries"}),e.jsxs("div",{className:"space-y-3",children:[t.entries.map((v,w)=>e.jsx("div",{className:"p-4 bg-gray-700 rounded-lg",children:e.jsxs("div",{className:"grid grid-cols-12 gap-3 items-center",children:[e.jsxs("div",{className:"col-span-12 md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:j[w]}),e.jsx("input",{type:"date",value:v.date,onChange:b=>u(w,"date",b.target.value),className:"input-field w-full text-sm",readOnly:!0})]}),e.jsxs("div",{className:"col-span-12 md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Hours"}),e.jsx("input",{type:"number",value:v.hours,onChange:b=>u(w,"hours",b.target.value),className:`input-field w-full text-sm ${s[`entry_${w}_hours`]?"border-red-500":""}`,min:"0",max:"24",step:"0.25",placeholder:"0.00"}),s[`entry_${w}_hours`]&&e.jsx("p",{className:"text-red-400 text-xs mt-1",children:s[`entry_${w}_hours`]})]}),e.jsxs("div",{className:"col-span-12 md:col-span-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Task Description"}),e.jsx("input",{type:"text",value:v.taskDescription,onChange:b=>u(w,"taskDescription",b.target.value),className:"input-field w-full text-sm",placeholder:"What did you work on..."})]}),e.jsx("div",{className:"col-span-12 md:col-span-2 flex items-end",children:e.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:v.billable,onChange:b=>u(w,"billable",b.target.checked),className:"rounded"}),e.jsx("span",{className:"text-sm text-gray-300",children:"Billable"})]})})]})},w)),s.entries&&e.jsx("p",{className:"text-red-400 text-xs",children:s.entries})]}),e.jsx("div",{className:"mt-4 p-4 bg-gray-700 rounded-lg",children:e.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-400",children:"Total Hours"}),e.jsx("p",{className:"text-white font-bold text-lg",children:g().toFixed(2)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-400",children:"Billable Hours"}),e.jsx("p",{className:"text-white font-bold text-lg",children:h().toFixed(2)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-400",children:"Non-Billable Hours"}),e.jsx("p",{className:"text-white font-bold text-lg",children:(g()-h()).toFixed(2)})]})]})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Notes"}),e.jsx("textarea",{value:t.notes,onChange:v=>o("notes",v.target.value),className:"input-field w-full",rows:"3",placeholder:"Additional notes..."})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t border-gray-700",children:[e.jsx("button",{type:"button",onClick:f,className:"px-6 py-2 border border-gray-600 text-gray-300 rounded-lg hover:bg-gray-700",disabled:a,children:"Cancel"}),e.jsxs("button",{type:"submit",className:"btn-primary px-6 py-2 flex items-center space-x-2",disabled:a,children:[a&&e.jsx(Qt,{size:16,className:"animate-spin"}),e.jsx("span",{children:a?"Creating...":"Create Timesheet"})]})]})]})]})})},E3=()=>{const[t,s]=y.useState([]),[a,r]=y.useState(!0),[n,i]=y.useState("all"),[l,c]=y.useState("all");y.useEffect(()=>{o()},[]);const o=async()=>{try{const m=await J.get("/documents");s(m.data.data)}catch{_.error("Failed to load documents")}finally{r(!1)}},d=t.filter(m=>{const f=n==="all"||m.documentType===n,g=l==="all"||m.status===l;return f&&g}),x=m=>({pending:"badge-warning",verified:"badge-success",rejected:"badge-danger",expired:"badge-default"})[m]||"badge-default",u=m=>{if(!m)return null;const f=Math.ceil((new Date(m)-new Date)/(1e3*60*60*24));return f<=0?"Expired":f<=30?`Expires in ${f} days`:null};return a?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"w-12 h-12 border-4 border-primary-600 border-t-transparent rounded-full animate-spin"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-white",children:"Documents"}),e.jsx("p",{className:"text-gray-400 mt-1",children:"Manage employee documents and compliance"})]}),e.jsxs("button",{className:"btn-primary flex items-center space-x-2",children:[e.jsx(qe,{size:20}),e.jsx("span",{children:"Upload Document"})]})]}),e.jsx("div",{className:"card",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsxs("select",{value:n,onChange:m=>i(m.target.value),className:"input-field md:w-48",children:[e.jsx("option",{value:"all",children:"All Types"}),e.jsx("option",{value:"aadhaar",children:"Aadhaar"}),e.jsx("option",{value:"pan",children:"PAN"}),e.jsx("option",{value:"passport",children:"Passport"}),e.jsx("option",{value:"offer-letter",children:"Offer Letter"}),e.jsx("option",{value:"contract",children:"Contract"}),e.jsx("option",{value:"education",children:"Education"})]}),e.jsxs("select",{value:l,onChange:m=>c(m.target.value),className:"input-field md:w-48",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"verified",children:"Verified"}),e.jsx("option",{value:"rejected",children:"Rejected"}),e.jsx("option",{value:"expired",children:"Expired"})]})]})}),e.jsx("div",{className:"card p-0",children:e.jsx("div",{className:"table-container",children:e.jsxs("table",{className:"table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Employee"}),e.jsx("th",{children:"Document Type"}),e.jsx("th",{children:"Document Name"}),e.jsx("th",{children:"Issue Date"}),e.jsx("th",{children:"Expiry Date"}),e.jsx("th",{children:"Status"}),e.jsx("th",{children:"Actions"})]})}),e.jsx("tbody",{children:d.map(m=>{var g,h;const f=u(m.expiryDate);return e.jsxs("tr",{children:[e.jsxs("td",{children:[(g=m.employee)==null?void 0:g.firstName," ",(h=m.employee)==null?void 0:h.lastName]}),e.jsx("td",{className:"capitalize",children:m.documentType}),e.jsx("td",{children:m.documentName}),e.jsx("td",{children:m.issueDate?new Date(m.issueDate).toLocaleDateString():"-"}),e.jsx("td",{children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{children:m.expiryDate?new Date(m.expiryDate).toLocaleDateString():"-"}),f&&e.jsxs("span",{className:"flex items-center text-xs text-yellow-500",children:[e.jsx(Jt,{size:14,className:"mr-1"}),f]})]})}),e.jsx("td",{children:e.jsx("span",{className:`badge ${x(m.status)}`,children:m.status})}),e.jsx("td",{children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{className:"p-2 text-blue-400 hover:bg-dark-800 rounded",children:"View"}),m.status==="pending"&&e.jsx("button",{className:"p-2 text-green-400 hover:bg-dark-800 rounded",children:e.jsx(Te,{size:16})})]})})]},m._id)})})]})})}),d.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(st,{size:48,className:"mx-auto text-gray-600 mb-4"}),e.jsx("p",{className:"text-gray-400",children:"No documents found"})]})]})},_3=()=>{const[t,s]=y.useState([]),[a,r]=y.useState(!0),[n,i]=y.useState("all");y.useEffect(()=>{l()},[]);const l=async()=>{try{const d=await J.get("/compliance");s(d.data.data)}catch{_.error("Failed to load compliance records")}finally{r(!1)}},c=t.filter(d=>n==="all"||d.status===n),o=d=>({pending:"badge-warning","in-progress":"badge-info",completed:"badge-success",failed:"badge-danger",expired:"badge-default"})[d]||"badge-default";return a?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"w-12 h-12 border-4 border-primary-600 border-t-transparent rounded-full animate-spin"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-white",children:"Compliance Tracker"}),e.jsx("p",{className:"text-gray-400 mt-1",children:"Track compliance requirements and deadlines"})]}),e.jsxs("button",{className:"btn-primary flex items-center space-x-2",children:[e.jsx(qe,{size:20}),e.jsx("span",{children:"Add Compliance"})]})]}),e.jsx("div",{className:"card",children:e.jsxs("select",{value:n,onChange:d=>i(d.target.value),className:"input-field w-48",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"in-progress",children:"In Progress"}),e.jsx("option",{value:"completed",children:"Completed"}),e.jsx("option",{value:"failed",children:"Failed"}),e.jsx("option",{value:"expired",children:"Expired"})]})}),e.jsx("div",{className:"card p-0",children:e.jsx("div",{className:"table-container",children:e.jsxs("table",{className:"table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Employee"}),e.jsx("th",{children:"Title"}),e.jsx("th",{children:"Type"}),e.jsx("th",{children:"Client"}),e.jsx("th",{children:"Due Date"}),e.jsx("th",{children:"Status"}),e.jsx("th",{children:"Actions"})]})}),e.jsx("tbody",{children:c.map(d=>{var u,m,f;const x=d.dueDate?Math.ceil((new Date(d.dueDate)-new Date)/864e5):null;return e.jsxs("tr",{children:[e.jsxs("td",{children:[(u=d.employee)==null?void 0:u.firstName," ",(m=d.employee)==null?void 0:m.lastName]}),e.jsx("td",{children:d.title}),e.jsx("td",{className:"capitalize",children:d.complianceType}),e.jsx("td",{children:((f=d.client)==null?void 0:f.name)||"-"}),e.jsx("td",{children:e.jsxs("div",{children:[d.dueDate?new Date(d.dueDate).toLocaleDateString():"-",x!==null&&x<=15&&x>0&&e.jsxs("span",{className:"block text-xs text-yellow-500",children:["Due in ",x," days"]}),x!==null&&x<=0&&e.jsx("span",{className:"block text-xs text-red-500",children:"Overdue"})]})}),e.jsx("td",{children:e.jsx("span",{className:`badge ${o(d.status)}`,children:d.status})}),e.jsx("td",{children:e.jsx("button",{className:"p-2 text-blue-400 hover:bg-dark-800 rounded",children:"View Details"})})]},d._id)})})]})})}),c.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Yo,{size:48,className:"mx-auto text-gray-600 mb-4"}),e.jsx("p",{className:"text-gray-400",children:"No compliance records found"})]})]})},F3=()=>{const t=Je(),[s,a]=y.useState([]),[r,n]=y.useState(!0),[i,l]=y.useState("all"),[c,o]=y.useState(!1),[d,x]=y.useState([]),[u,m]=y.useState({candidateCode:"",firstName:"",lastName:"",email:"",phone:"",appliedFor:"",experience:{years:0,months:0},currentCTC:"",expectedCTC:"",noticePeriod:"",source:"job-portal",resumeUrl:"",linkedinUrl:""}),[f,g]=y.useState(!1);y.useEffect(()=>{h(),p()},[]);const h=async()=>{try{const N=await J.get("/candidates");a(N.data.data)}catch{_.error("Failed to load candidates")}finally{n(!1)}},p=async()=>{try{const N=await J.get("/jobs");x(N.data.data.filter(C=>C.status==="active"))}catch{console.error("Failed to load jobs")}},j=async N=>{var C,k;N.preventDefault(),g(!0);try{const S=await J.post("/candidates",u);a([S.data.data,...s]),_.success("Candidate added successfully"),o(!1),v()}catch(S){_.error(((k=(C=S.response)==null?void 0:C.data)==null?void 0:k.message)||"Failed to add candidate")}finally{g(!1)}},v=()=>{m({candidateCode:"",firstName:"",lastName:"",email:"",phone:"",appliedFor:"",experience:{years:0,months:0},currentCTC:"",expectedCTC:"",noticePeriod:"",source:"job-portal",resumeUrl:"",linkedinUrl:""})},w=N=>{t(`/candidates/${N}/timeline`)},b=s.filter(N=>i==="all"||N.stage===i),A=N=>({applied:"badge-info",screening:"badge-warning",shortlisted:"badge-success","interview-scheduled":"badge-info","interview-completed":"badge-warning","offer-extended":"badge-success","offer-accepted":"badge-success","offer-rejected":"badge-danger",joined:"badge-success",rejected:"badge-danger"})[N]||"badge-default";return r?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"w-12 h-12 border-4 border-primary-600 border-t-transparent rounded-full animate-spin"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-white",children:"Candidates"}),e.jsx("p",{className:"text-gray-400 mt-1",children:"Manage recruitment pipeline"})]}),e.jsxs("button",{onClick:()=>o(!0),className:"btn-primary flex items-center space-x-2",children:[e.jsx(qe,{size:20}),e.jsx("span",{children:"Add Candidate"})]})]}),e.jsx("div",{className:"card",children:e.jsxs("select",{value:i,onChange:N=>l(N.target.value),className:"input-field w-64",children:[e.jsx("option",{value:"all",children:"All Stages"}),e.jsx("option",{value:"applied",children:"Applied"}),e.jsx("option",{value:"screening",children:"Screening"}),e.jsx("option",{value:"shortlisted",children:"Shortlisted"}),e.jsx("option",{value:"interview-scheduled",children:"Interview Scheduled"}),e.jsx("option",{value:"interview-completed",children:"Interview Completed"}),e.jsx("option",{value:"offer-extended",children:"Offer Extended"}),e.jsx("option",{value:"offer-accepted",children:"Offer Accepted"}),e.jsx("option",{value:"joined",children:"Joined"}),e.jsx("option",{value:"rejected",children:"Rejected"})]})}),e.jsx("div",{className:"card p-0",children:e.jsx("div",{className:"table-container",children:e.jsxs("table",{className:"table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Candidate"}),e.jsx("th",{children:"Applied For"}),e.jsx("th",{children:"Experience"}),e.jsx("th",{children:"Current CTC"}),e.jsx("th",{children:"Expected CTC"}),e.jsx("th",{children:"Source"}),e.jsx("th",{children:"Stage"}),e.jsx("th",{children:"Actions"})]})}),e.jsx("tbody",{children:b.map(N=>{var C,k,S,F,R;return e.jsxs("tr",{children:[e.jsx("td",{children:e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium text-white",children:[N.firstName," ",N.lastName]}),e.jsx("p",{className:"text-sm text-gray-400",children:N.email}),e.jsx("p",{className:"text-sm text-gray-400",children:N.phone})]})}),e.jsx("td",{children:((C=N.appliedFor)==null?void 0:C.title)||"N/A"}),e.jsxs("td",{children:[((k=N.experience)==null?void 0:k.years)||0,"y ",((S=N.experience)==null?void 0:S.months)||0,"m"]}),e.jsxs("td",{children:["$",((F=N.currentCTC)==null?void 0:F.toLocaleString())||0]}),e.jsxs("td",{children:["$",((R=N.expectedCTC)==null?void 0:R.toLocaleString())||0]}),e.jsx("td",{className:"capitalize",children:N.source}),e.jsx("td",{children:e.jsx("span",{className:`badge ${A(N.stage)}`,children:N.stage})}),e.jsx("td",{children:e.jsx("button",{onClick:()=>w(N._id),className:"p-2 text-blue-400 hover:bg-dark-800 rounded",children:"View Details"})})]},N._id)})})]})})}),b.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Zs,{size:48,className:"mx-auto text-gray-600 mb-4"}),e.jsx("p",{className:"text-gray-400",children:"No candidates found"})]}),c&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-dark-900 rounded-xl w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-dark-900 border-b border-dark-800 p-6 flex items-center justify-between",children:[e.jsx("h2",{className:"text-xl font-bold text-white",children:"Add New Candidate"}),e.jsx("button",{onClick:()=>{o(!1),v()},className:"text-gray-400 hover:text-white",children:e.jsx(Le,{size:24})})]}),e.jsxs("form",{onSubmit:j,className:"p-6 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Employee Code *"}),e.jsx("input",{type:"text",required:!0,value:u.candidateCode,onChange:N=>m({...u,candidateCode:N.target.value}),className:"input-field",placeholder:"e.g., EMP001"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"First Name *"}),e.jsx("input",{type:"text",required:!0,value:u.firstName,onChange:N=>m({...u,firstName:N.target.value}),className:"input-field"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Last Name *"}),e.jsx("input",{type:"text",required:!0,value:u.lastName,onChange:N=>m({...u,lastName:N.target.value}),className:"input-field"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Email *"}),e.jsx("input",{type:"email",required:!0,value:u.email,onChange:N=>m({...u,email:N.target.value}),className:"input-field"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Phone *"}),e.jsx("input",{type:"tel",required:!0,value:u.phone,onChange:N=>m({...u,phone:N.target.value}),className:"input-field"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Applied For *"}),e.jsxs("select",{required:!0,value:u.appliedFor,onChange:N=>m({...u,appliedFor:N.target.value}),className:"input-field",children:[e.jsx("option",{value:"",children:"Select Job"}),d.map(N=>e.jsx("option",{value:N._id,children:N.title},N._id))]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Experience (Years)"}),e.jsx("input",{type:"number",min:"0",value:u.experience.years,onChange:N=>m({...u,experience:{...u.experience,years:parseInt(N.target.value)||0}}),className:"input-field"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Experience (Months)"}),e.jsx("input",{type:"number",min:"0",max:"11",value:u.experience.months,onChange:N=>m({...u,experience:{...u.experience,months:parseInt(N.target.value)||0}}),className:"input-field"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Current CTC"}),e.jsx("input",{type:"number",value:u.currentCTC,onChange:N=>m({...u,currentCTC:N.target.value}),className:"input-field",placeholder:"In USD"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Expected CTC"}),e.jsx("input",{type:"number",value:u.expectedCTC,onChange:N=>m({...u,expectedCTC:N.target.value}),className:"input-field",placeholder:"In USD"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Notice Period (Days)"}),e.jsx("input",{type:"number",value:u.noticePeriod,onChange:N=>m({...u,noticePeriod:N.target.value}),className:"input-field"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Source"}),e.jsxs("select",{value:u.source,onChange:N=>m({...u,source:N.target.value}),className:"input-field",children:[e.jsx("option",{value:"job-portal",children:"Job Portal"}),e.jsx("option",{value:"referral",children:"Referral"}),e.jsx("option",{value:"linkedin",children:"LinkedIn"}),e.jsx("option",{value:"direct",children:"Direct Application"}),e.jsx("option",{value:"other",children:"Other"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Resume URL"}),e.jsx("input",{type:"url",value:u.resumeUrl,onChange:N=>m({...u,resumeUrl:N.target.value}),className:"input-field",placeholder:"https://..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"LinkedIn URL"}),e.jsx("input",{type:"url",value:u.linkedinUrl,onChange:N=>m({...u,linkedinUrl:N.target.value}),className:"input-field",placeholder:"https://linkedin.com/in/..."})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>{o(!1),v()},className:"btn-outline",disabled:f,children:"Cancel"}),e.jsx("button",{type:"submit",className:"btn-primary",disabled:f,children:f?"Adding...":"Add Candidate"})]})]})]})})]})},T3=()=>{const t=Je(),[s,a]=y.useState([]),[r,n]=y.useState(!0),[i,l]=y.useState(""),[c,o]=y.useState("all"),[d,x]=y.useState("");y.useEffect(()=>{u()},[]);const u=async()=>{try{const p=await J.get("/talent-pool");a(p.data.data)}catch{_.error("Failed to load talent pool")}finally{n(!1)}},m=async p=>{var j,v;if(window.confirm("Are you sure you want to delete this entry?"))try{await J.delete(`/talent-pool/${p}`),a(w=>w.filter(b=>b._id!==p)),_.success("Entry deleted successfully")}catch(w){_.error(((v=(j=w.response)==null?void 0:j.data)==null?void 0:v.message)||"Failed to delete entry")}},f=async(p,j)=>{var v,w;try{const b=await J.put(`/talent-pool/${p}/status`,{status:j});a(A=>A.map(N=>N._id===p?b.data.data:N)),_.success(`Status updated to ${j}`)}catch(b){_.error(((w=(v=b.response)==null?void 0:v.data)==null?void 0:w.message)||"Failed to update status")}},g=s.filter(p=>{const j=p.name.toLowerCase().includes(i.toLowerCase())||p.email.toLowerCase().includes(i.toLowerCase())||p.talentCode.toLowerCase().includes(i.toLowerCase())||p.desiredPosition.toLowerCase().includes(i.toLowerCase()),v=c==="all"||p.status===c,w=!d||p.desiredDepartment.toLowerCase().includes(d.toLowerCase());return j&&v&&w}),h=p=>({new:"bg-blue-600 text-white",reviewed:"bg-yellow-600 text-white",contacted:"bg-purple-600 text-white",shortlisted:"bg-green-600 text-white",rejected:"bg-red-600 text-white",hired:"bg-emerald-600 text-white"})[p]||"bg-gray-600 text-white";return r?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"w-12 h-12 border-4 border-primary-600 border-t-transparent rounded-full animate-spin"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-white",children:"Talent Pool"}),e.jsx("p",{className:"text-gray-400 mt-1",children:"Manage general resume submissions"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-gray-400",children:"Total Submissions:"}),e.jsx("span",{className:"text-2xl font-bold text-white",children:s.length})]})]}),e.jsx("div",{className:"card",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(yt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-500",size:20}),e.jsx("input",{type:"text",placeholder:"Search by name, email, code, or position...",value:i,onChange:p=>l(p.target.value),className:"input-field pl-10"})]}),e.jsx("input",{type:"text",placeholder:"Filter by department...",value:d,onChange:p=>x(p.target.value),className:"input-field md:w-64"}),e.jsxs("select",{value:c,onChange:p=>o(p.target.value),className:"input-field md:w-48",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"new",children:"New"}),e.jsx("option",{value:"reviewed",children:"Reviewed"}),e.jsx("option",{value:"contacted",children:"Contacted"}),e.jsx("option",{value:"shortlisted",children:"Shortlisted"}),e.jsx("option",{value:"rejected",children:"Rejected"}),e.jsx("option",{value:"hired",children:"Hired"})]})]})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:g.map(p=>{var j,v;return e.jsxs("div",{className:"card hover:border-primary-600 transition-colors",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-white",children:p.name}),e.jsx("p",{className:"text-sm text-gray-400",children:p.talentCode})]}),e.jsxs("select",{value:p.status,onChange:w=>f(p._id,w.target.value),className:`badge ${h(p.status)} cursor-pointer hover:opacity-80 text-xs`,onClick:w=>w.stopPropagation(),children:[e.jsx("option",{value:"new",children:"New"}),e.jsx("option",{value:"reviewed",children:"Reviewed"}),e.jsx("option",{value:"contacted",children:"Contacted"}),e.jsx("option",{value:"shortlisted",children:"Shortlisted"}),e.jsx("option",{value:"rejected",children:"Rejected"}),e.jsx("option",{value:"hired",children:"Hired"})]})]}),e.jsxs("div",{className:"space-y-2 mb-4",children:[e.jsxs("div",{className:"flex items-center text-sm text-gray-400",children:[e.jsx("span",{className:"font-medium text-gray-300 w-32",children:"Email:"}),e.jsx("span",{className:"truncate",children:p.email})]}),e.jsxs("div",{className:"flex items-center text-sm text-gray-400",children:[e.jsx("span",{className:"font-medium text-gray-300 w-32",children:"Phone:"}),e.jsx("span",{children:p.phone})]}),e.jsxs("div",{className:"flex items-center text-sm text-gray-400",children:[e.jsx("span",{className:"font-medium text-gray-300 w-32",children:"Department:"}),e.jsx("span",{children:p.desiredDepartment})]}),e.jsxs("div",{className:"flex items-center text-sm text-gray-400",children:[e.jsx("span",{className:"font-medium text-gray-300 w-32",children:"Position:"}),e.jsx("span",{children:p.desiredPosition})]}),e.jsxs("div",{className:"flex items-center text-sm text-gray-400",children:[e.jsx("span",{className:"font-medium text-gray-300 w-32",children:"Experience:"}),e.jsxs("span",{children:[((j=p.experience)==null?void 0:j.years)||0," years ",((v=p.experience)==null?void 0:v.months)||0," months"]})]}),p.skills&&p.skills.length>0&&e.jsxs("div",{className:"flex flex-wrap gap-1 mt-2",children:[p.skills.slice(0,3).map((w,b)=>e.jsx("span",{className:"inline-block bg-primary-900/30 text-primary-400 text-xs px-2 py-1 rounded",children:w},b)),p.skills.length>3&&e.jsxs("span",{className:"inline-block bg-gray-700 text-gray-300 text-xs px-2 py-1 rounded",children:["+",p.skills.length-3," more"]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2 pt-4 border-t border-dark-800",children:[e.jsxs("button",{onClick:()=>t(`/talent-pool/${p._id}`),className:"flex-1 btn-outline text-sm py-2 flex items-center justify-center space-x-1",children:[e.jsx(Ht,{size:16}),e.jsx("span",{children:"View"})]}),e.jsxs("button",{className:"flex-1 btn-outline text-sm py-2 flex items-center justify-center space-x-1",title:"Move to Job Posting",children:[e.jsx(ot,{size:16}),e.jsx("span",{children:"Move"})]}),e.jsx("button",{onClick:()=>m(p._id),className:"btn-outline text-sm py-2 px-3 text-red-500 hover:bg-red-500/10",children:e.jsx(kt,{size:16})})]}),e.jsxs("div",{className:"mt-2 text-xs text-gray-500",children:["Submitted: ",new Date(p.createdAt).toLocaleDateString()]})]},p._id)})}),g.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Fr,{size:48,className:"mx-auto text-gray-600 mb-4"}),e.jsx("p",{className:"text-gray-400",children:"No talent pool submissions found"})]})]})},Vu=()=>{setNewFeedback({employee:"",project:"",feedbackType:"quarterly",feedbackBy:"manager",overallRating:"",comments:""}),setCreateError(""),setShowCreateModal(!0)},Xr=t=>{const{name:s,value:a}=t.target;setNewFeedback(r=>({...r,[s]:a}))},D3=async t=>{var s,a;if(t.preventDefault(),!newFeedback.employee||!newFeedback.feedbackType||!newFeedback.feedbackBy){setCreateError("Please fill in all required fields.");return}setCreating(!0),setCreateError("");try{const r={employee:newFeedback.employee,project:newFeedback.project||void 0,feedbackType:newFeedback.feedbackType,feedbackBy:newFeedback.feedbackBy,overallRating:newFeedback.overallRating?Number(newFeedback.overallRating):void 0,comments:newFeedback.comments||void 0,ratings:newFeedback.overallRating?[{category:"overall",rating:Number(newFeedback.overallRating),comments:newFeedback.comments}]:[]};await J.post("/feedback",r),_.success("Feedback added successfully"),setShowCreateModal(!1),fetchFeedbacks()}catch(r){const n=((a=(s=r==null?void 0:r.response)==null?void 0:s.data)==null?void 0:a.message)||"Failed to create feedback";setCreateError(n),_.error(n)}finally{setCreating(!1)}},Hu=()=>{const[t,s]=y.useState([]),[a,r]=y.useState(!0),[n,i]=y.useState(!0),[l,c]=y.useState(""),[o,d]=y.useState(""),[x,u]=y.useState(null),[m,f]=y.useState([]),[g,h]=y.useState([]),[p,j]=y.useState(!1),[v,w]=y.useState(!1),[b,A]=y.useState(""),[N,C]=y.useState({employee:"",project:"",feedbackType:"quarterly",feedbackBy:"manager",overallRating:"",comments:""}),k=[{value:"mid-project",label:"Mid Project"},{value:"end-project",label:"End Project"},{value:"quarterly",label:"Quarterly"},{value:"annual",label:"Annual"},{value:"exit",label:"Exit Interview"}],S=[{value:"manager",label:"Manager"},{value:"client",label:"Client"},{value:"peer",label:"Peer"},{value:"self",label:"Self Assessment"}],F=y.useMemo(()=>{const E=new Date;return E.setDate(E.getDate()-90),E.toISOString().split("T")[0]},[]),R=y.useMemo(()=>new Date().toISOString().split("T")[0],[]),[T,M]=y.useState({startDate:F,endDate:R});y.useEffect(()=>{H(),U(),W()},[]),y.useEffect(()=>{se(T)},[T.startDate,T.endDate]);const H=async()=>{var E,z;r(!0);try{const O=await J.get("/feedback");s(O.data.data)}catch(O){d(((z=(E=O==null?void 0:O.response)==null?void 0:E.data)==null?void 0:z.message)||"Failed to load feedback"),_.error("Failed to load feedback")}finally{r(!1)}},U=async()=>{var E;try{const z=await J.get("/employees",{params:{status:"active",fields:"firstName,lastName,employeeCode"}}),O=Array.isArray((E=z.data)==null?void 0:E.data)?z.data.data.map(P=>({value:P._id,label:`${P.firstName||""} ${P.lastName||""}`.trim()||P.employeeCode||"Employee"})):[];f(O)}catch{console.warn("Failed to load employees for feedback modal")}},W=async()=>{var E;try{const z=await J.get("/projects",{params:{status:"active",fields:"name"}}),O=Array.isArray((E=z.data)==null?void 0:E.data)?z.data.data.map(P=>({value:P._id,label:P.name||"Project"})):[];h(O)}catch{console.warn("Failed to load projects for feedback modal")}},se=async E=>{var z,O,P;i(!0),c("");try{const Z=await J.get("/reports/analytics/performance",{params:{startDate:E.startDate,endDate:E.endDate}});u(((z=Z.data)==null?void 0:z.indicators)||null)}catch(Z){u(null);const re=((P=(O=Z==null?void 0:Z.response)==null?void 0:O.data)==null?void 0:P.message)||"Failed to load performance analytics";c(re),_.error(re)}finally{i(!1)}},X=E=>({draft:"badge-default",submitted:"badge-warning",acknowledged:"badge-success",disputed:"badge-danger"})[E]||"badge-default",D=E=>{const{name:z,value:O}=E.target;M(P=>({...P,[z]:O}))},le=y.useMemo(()=>{var P,Z,re;if(!x)return[];const E=((P=x.attendance)==null?void 0:P.attendanceRate)??0,z=((Z=x.leave)==null?void 0:Z.approvalRate)??0,O=(re=x.leave)!=null&&re.totalRequests?Math.round(x.leave.totalLeaveDays/x.leave.totalRequests*100)/100:0;return[{title:"Active Employees",value:x.activeEmployees??0,icon:Ue,accent:"text-purple-400 bg-purple-500/10 border-purple-500/30"},{title:"Attendance Rate",value:`${E.toFixed(1)}%`,icon:Ks,accent:"text-green-400 bg-green-500/10 border-green-500/30"},{title:"Leave Approval Rate",value:`${z.toFixed(1)}%`,icon:hc,accent:"text-blue-400 bg-blue-500/10 border-blue-500/30"},{title:"Avg Leave Days",value:`${O.toFixed(1)} days`,icon:Oe,accent:"text-yellow-400 bg-yellow-500/10 border-yellow-500/30"}]},[x]),de=y.useMemo(()=>{var E,z,O,P;return x?[{label:"Present Days",value:((E=x.attendance)==null?void 0:E.presentDays)??0,description:"Total days employees were marked present",icon:Be},{label:"Total Leave Requests",value:((z=x.leave)==null?void 0:z.totalRequests)??0,description:"Requests submitted in the selected period",icon:Cg},{label:"Approved Leave Days",value:((O=x.leave)==null?void 0:O.totalLeaveDays)??0,description:"Total days approved during the period",icon:hc},{label:"Recent Actions Logged",value:((P=x.leave)==null?void 0:P.approvedRequests)??0,description:"Approved leave requests indicating engagement",icon:Dr}]:[]},[x]);return a&&n?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"w-12 h-12 border-4 border-primary-600 border-t-transparent rounded-full animate-spin"})}):e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-white",children:"Performance Overview"}),e.jsx("p",{className:"text-gray-400 mt-1",children:"Insights across attendance, leave, and qualitative feedback"})]}),e.jsxs("button",{className:"btn-primary flex items-center space-x-2",onClick:Vu,children:[e.jsx(qe,{size:20}),e.jsx("span",{children:"Add Feedback"})]})]}),e.jsxs("div",{className:"bg-[#2A2A3A] border border-gray-800 rounded-xl p-4 flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex flex-col text-xs text-gray-400",children:[e.jsx("span",{children:"Start Date"}),e.jsx("input",{type:"date",name:"startDate",value:T.startDate,onChange:D,max:T.endDate,className:"mt-1 px-3 py-2 bg-[#1E1E2A] border border-gray-700 rounded-lg text-sm text-white focus:outline-none focus:border-[#A88BFF]"})]}),e.jsxs("div",{className:"flex flex-col text-xs text-gray-400",children:[e.jsx("span",{children:"End Date"}),e.jsx("input",{type:"date",name:"endDate",value:T.endDate,onChange:D,min:T.startDate,className:"mt-1 px-3 py-2 bg-[#1E1E2A] border border-gray-700 rounded-lg text-sm text-white focus:outline-none focus:border-[#A88BFF]"})]})]}),e.jsxs("div",{className:"flex flex-col items-start md:items-end gap-2 text-xs text-gray-500",children:[e.jsx("span",{children:"Period updates automatically when you adjust the dates."}),e.jsxs("span",{children:["Showing data from ",new Date(T.startDate).toLocaleDateString()," to ",new Date(T.endDate).toLocaleDateString(),"."]})]})]}),e.jsxs("div",{className:"space-y-4",children:[l&&e.jsx("div",{className:"bg-red-500/10 border border-red-500/40 text-red-300 text-sm rounded-xl px-4 py-3",children:l}),n?e.jsx("div",{className:"flex items-center justify-center h-40",children:e.jsx("div",{className:"w-10 h-10 border-4 border-[#A88BFF] border-t-transparent rounded-full animate-spin"})}):x?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-4",children:le.map(E=>e.jsxs("div",{className:"bg-[#1E1E2A] border border-gray-800 rounded-2xl px-5 py-6 flex flex-col gap-3 hover:border-[#A88BFF]/60 transition-colors",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:"text-sm text-gray-400",children:E.title}),e.jsx("span",{className:`inline-flex items-center justify-center w-9 h-9 rounded-full border ${E.accent}`,children:e.jsx(E.icon,{className:"w-4 h-4"})})]}),e.jsx("p",{className:"text-3xl font-semibold text-white",children:E.value})]},E.title))}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:de.map(E=>e.jsxs("div",{className:"bg-[#1E1E2A] border border-gray-800 rounded-2xl p-4 flex flex-col gap-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-400",children:[e.jsx(E.icon,{className:"w-4 h-4 text-[#A88BFF]"}),e.jsx("span",{children:E.label})]}),e.jsx("p",{className:"text-2xl font-semibold text-white",children:E.value}),e.jsx("p",{className:"text-xs text-gray-500 leading-relaxed",children:E.description})]},E.label))})]}):e.jsx("div",{className:"bg-[#1E1E2A] border border-gray-800 rounded-2xl p-6 text-center text-gray-400",children:"No performance analytics available for the selected period."})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-white",children:"Performance Feedback"}),e.jsx("p",{className:"text-gray-400 text-sm",children:"Qualitative insights from submitted feedback records"})]}),a&&e.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-400",children:[e.jsx("div",{className:"w-3 h-3 border-2 border-[#A88BFF] border-t-transparent rounded-full animate-spin"}),"Refreshing feedback..."]})]}),o&&e.jsx("div",{className:"bg-red-500/10 border border-red-500/40 text-red-300 text-sm rounded-xl px-4 py-3",children:o}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(E=>{var z,O,P;return e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-white",children:[(z=E.employee)==null?void 0:z.firstName," ",(O=E.employee)==null?void 0:O.lastName]}),e.jsx("p",{className:"text-sm text-gray-400 capitalize",children:E.feedbackType})]}),e.jsx("span",{className:`badge ${X(E.status)}`,children:E.status})]}),e.jsxs("div",{className:"space-y-2 mb-4",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-400",children:"Project:"}),e.jsx("span",{className:"text-white",children:((P=E.project)==null?void 0:P.name)||"N/A"})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-400",children:"Overall Rating:"}),e.jsxs("span",{className:"text-white font-bold",children:[E.overallRating||"N/A","/5"]})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-400",children:"Submitted By:"}),e.jsx("span",{className:"text-white capitalize",children:E.feedbackBy})]})]}),e.jsx("button",{className:"w-full btn-primary text-sm",children:"View Details"})]},E._id)})}),t.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(wn,{size:48,className:"mx-auto text-gray-600 mb-4"}),e.jsx("p",{className:"text-gray-400",children:"No feedback records found"}),e.jsx("button",{className:"btn-primary text-sm",onClick:Vu,children:"Add Feedback"})]}),p&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm px-4",children:e.jsxs("div",{className:"w-full max-w-2xl bg-[#2A2A3A] border border-gray-800 rounded-2xl shadow-2xl overflow-hidden",children:[e.jsxs("div",{className:"px-6 py-4 border-b border-gray-800 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-white flex items-center gap-2",children:[e.jsx(qe,{className:"w-4 h-4 text-[#A88BFF]"}),"Add Performance Feedback"]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Capture key performance observations for an employee."})]}),e.jsx("button",{onClick:()=>j(!1),className:"text-gray-400 hover:text-white transition-colors","aria-label":"Close",children:e.jsx(Le,{className:"w-5 h-5"})})]}),e.jsxs("form",{onSubmit:D3,className:"px-6 py-5 space-y-5 max-h-[75vh] overflow-y-auto",children:[b&&e.jsx("div",{className:"bg-red-500/10 border border-red-500/40 text-red-300 text-sm rounded-xl px-4 py-3",children:b}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("label",{className:"flex flex-col gap-2 text-xs text-gray-300",children:[e.jsxs("span",{children:["Employee ",e.jsx("span",{className:"text-red-400",children:"*"})]}),e.jsxs("select",{name:"employee",value:N.employee,onChange:Xr,className:"px-3 py-2 bg-[#1E1E2A] border border-gray-700 rounded-lg text-sm text-white focus:outline-none focus:border-[#A88BFF]",required:!0,children:[e.jsx("option",{value:"",children:"Select employee"}),m.map(E=>e.jsx("option",{value:E.value,children:E.label},E.value))]})]}),e.jsxs("label",{className:"flex flex-col gap-2 text-xs text-gray-300",children:[e.jsx("span",{children:"Project"}),e.jsxs("select",{name:"project",value:N.project,onChange:Xr,className:"px-3 py-2 bg-[#1E1E2A] border border-gray-700 rounded-lg text-sm text-white focus:outline-none focus:border-[#A88BFF]",children:[e.jsx("option",{value:"",children:"Not specified"}),g.map(E=>e.jsx("option",{value:E.value,children:E.label},E.value))]})]}),e.jsxs("label",{className:"flex flex-col gap-2 text-xs text-gray-300",children:[e.jsxs("span",{children:["Feedback Type ",e.jsx("span",{className:"text-red-400",children:"*"})]}),e.jsx("select",{name:"feedbackType",value:N.feedbackType,onChange:Xr,className:"px-3 py-2 bg-[#1E1E2A] border border-gray-700 rounded-lg text-sm text-white focus:outline-none focus:border-[#A88BFF]",required:!0,children:k.map(E=>e.jsx("option",{value:E.value,children:E.label},E.value))})]}),e.jsxs("label",{className:"flex flex-col gap-2 text-xs text-gray-300",children:[e.jsxs("span",{children:["Feedback From ",e.jsx("span",{className:"text-red-400",children:"*"})]}),e.jsx("select",{name:"feedbackBy",value:N.feedbackBy,onChange:Xr,className:"px-3 py-2 bg-[#1E1E2A] border border-gray-700 rounded-lg text-sm text-white focus:outline-none focus:border-[#A88BFF]",required:!0,children:S.map(E=>e.jsx("option",{value:E.value,children:E.label},E.value))})]}),e.jsxs("label",{className:"flex flex-col gap-2 text-xs text-gray-300",children:[e.jsx("span",{children:"Overall Rating"}),e.jsx("input",{type:"number",min:1,max:5,step:.1,name:"overallRating",value:N.overallRating,onChange:Xr,className:"px-3 py-2 bg-[#1E1E2A] border border-gray-700 rounded-lg text-sm text-white focus:outline-none focus:border-[#A88BFF]",placeholder:"1-5"})]})]}),e.jsxs("label",{className:"flex flex-col gap-2 text-xs text-gray-300",children:[e.jsx("span",{children:"Comments"}),e.jsx("textarea",{name:"comments",value:N.comments,onChange:Xr,rows:4,className:"px-3 py-2 bg-[#1E1E2A] border border-gray-700 rounded-lg text-sm text-white focus:outline-none focus:border-[#A88BFF]",placeholder:"Provide key highlights, achievements, or areas of improvement"})]}),e.jsxs("div",{className:"flex items-center justify-end gap-3 pt-2",children:[e.jsx("button",{type:"button",onClick:()=>j(!1),className:"px-4 py-2 rounded-lg border border-gray-700 text-xs text-gray-300 hover:border-gray-500 hover:text-white",disabled:v,children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 rounded-lg bg-[#A88BFF] text-xs text-white font-medium hover:bg-[#B89CFF] disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",disabled:v,children:v?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(hc,{className:"w-3 h-3"}),"Save Feedback"]})})]})]})]})})]})},R3=()=>{const[t,s]=y.useState([]),[a,r]=y.useState(!0);y.useEffect(()=>{n()},[]);const n=async()=>{try{const l=await J.get("/exit-process");s(l.data.data)}catch{_.error("Failed to load exit processes")}finally{r(!1)}},i=l=>({initiated:"badge-info","clearance-pending":"badge-warning","clearance-completed":"badge-success",completed:"badge-success",cancelled:"badge-danger"})[l]||"badge-default";return a?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"w-12 h-12 border-4 border-primary-600 border-t-transparent rounded-full animate-spin"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-white",children:"Exit Process"}),e.jsx("p",{className:"text-gray-400 mt-1",children:"Manage employee exit and clearance"})]}),e.jsxs("button",{className:"btn-primary flex items-center space-x-2",children:[e.jsx(qe,{size:20}),e.jsx("span",{children:"Initiate Exit"})]})]}),e.jsx("div",{className:"card p-0",children:e.jsx("div",{className:"table-container",children:e.jsxs("table",{className:"table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Employee"}),e.jsx("th",{children:"Exit Type"}),e.jsx("th",{children:"Last Working Date"}),e.jsx("th",{children:"Clearance Status"}),e.jsx("th",{children:"Status"}),e.jsx("th",{children:"Actions"})]})}),e.jsx("tbody",{children:t.map(l=>{var x,u,m;const c=l.clearanceChecklist||{},o=Object.keys(c).length,d=Object.values(c).filter(f=>f.cleared).length;return e.jsxs("tr",{children:[e.jsx("td",{children:e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium text-white",children:[(x=l.employee)==null?void 0:x.firstName," ",(u=l.employee)==null?void 0:u.lastName]}),e.jsx("p",{className:"text-sm text-gray-400",children:(m=l.employee)==null?void 0:m.employeeCode})]})}),e.jsx("td",{className:"capitalize",children:l.exitType}),e.jsx("td",{children:new Date(l.lastWorkingDate).toLocaleDateString()}),e.jsx("td",{children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-32 bg-dark-800 rounded-full h-2",children:e.jsx("div",{className:"bg-primary-600 h-2 rounded-full",style:{width:`${d/o*100}%`}})}),e.jsxs("span",{className:"text-sm text-gray-400",children:[d,"/",o]})]})}),e.jsx("td",{children:e.jsx("span",{className:`badge ${i(l.status)}`,children:l.status})}),e.jsx("td",{children:e.jsx("button",{className:"p-2 text-blue-400 hover:bg-dark-800 rounded",children:"View Details"})})]},l._id)})})]})})}),t.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(ed,{size:48,className:"mx-auto text-gray-600 mb-4"}),e.jsx("p",{className:"text-gray-400",children:"No exit processes found"})]})]})},P3=()=>{const[t,s]=y.useState({}),a=async(n,i={})=>{s(l=>({...l,[n]:!0}));try{const l=new URLSearchParams(i).toString(),c=await J.get(`/reports/export/${n}?${l}`,{responseType:"blob"}),o=window.URL.createObjectURL(new Blob([c.data])),d=document.createElement("a");d.href=o,d.setAttribute("download",`${n}-${new Date().toISOString().split("T")[0]}.xlsx`),document.body.appendChild(d),d.click(),d.remove(),_.success("Report downloaded successfully")}catch{_.error("Failed to download report")}finally{s(l=>({...l,[n]:!1}))}},r=[{id:"employees",title:"Employee Report",description:"Export all employee data with personal and employment details",icon:Nr},{id:"attendance",title:"Attendance Report",description:"Export attendance records with work hours and status",icon:Nr},{id:"timesheets",title:"Timesheet Report",description:"Export project-wise timesheet data for billing",icon:Nr},{id:"payroll",title:"Payroll Report",description:"Export salary details, deductions, and net pay",icon:Nr}];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-white",children:"Export Reports"}),e.jsx("p",{className:"text-gray-400 mt-1",children:"Download data in Excel format"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:r.map(n=>e.jsx("div",{className:"card",children:e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx("div",{className:"w-12 h-12 bg-primary-600/20 rounded-lg flex items-center justify-center flex-shrink-0",children:e.jsx(n.icon,{size:24,className:"text-primary-500"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-2",children:n.title}),e.jsx("p",{className:"text-sm text-gray-400 mb-4",children:n.description}),e.jsxs("button",{onClick:()=>a(n.id),disabled:t[n.id],className:"btn-primary text-sm flex items-center space-x-2",children:[e.jsx(Mt,{size:16}),e.jsx("span",{children:t[n.id]?"Downloading...":"Download Excel"})]})]})]})},n.id))})]})},I3=()=>{var i,l,c;const[t,s]=y.useState(null),[a,r]=y.useState(!0);y.useEffect(()=>{n()},[]);const n=async()=>{try{const o=await J.get("/reports/compliance");s(o.data.data)}catch{_.error("Failed to load compliance report")}finally{r(!1)}};return a?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"w-12 h-12 border-4 border-primary-600 border-t-transparent rounded-full animate-spin"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-white",children:"Compliance Report"}),e.jsx("p",{className:"text-gray-400 mt-1",children:"Overview of compliance status"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"card",children:[e.jsx("p",{className:"text-sm text-gray-400 mb-1",children:"Expiring Documents"}),e.jsx("h3",{className:"text-2xl font-bold text-white",children:((i=t==null?void 0:t.expiringDocuments)==null?void 0:i.length)||0})]}),e.jsxs("div",{className:"card",children:[e.jsx("p",{className:"text-sm text-gray-400 mb-1",children:"Due Compliances"}),e.jsx("h3",{className:"text-2xl font-bold text-white",children:((l=t==null?void 0:t.dueCompliances)==null?void 0:l.length)||0})]}),e.jsxs("div",{className:"card",children:[e.jsx("p",{className:"text-sm text-gray-400 mb-1",children:"Expiring Contracts"}),e.jsx("h3",{className:"text-2xl font-bold text-white",children:((c=t==null?void 0:t.expiringContracts)==null?void 0:c.length)||0})]})]})]})},Pd=async()=>(await J.get("/employee/dashboard")).data,$3=async t=>(await J.get("/employee/leaves/summary",{params:{year:t}})).data,_c=async t=>(await J.get("/employee/leaves/balance",{params:{year:t}})).data,Id=async(t={})=>(await J.get("/employee/leaves",{params:t})).data,Uf=async t=>(await J.post("/employee/leaves/apply",t)).data,O3=async t=>(await J.put(`/employee/leaves/${t}/cancel`)).data,L3=async()=>(await J.get("/employee/projects")).data,M3=async(t={})=>(await J.get("/employee/requests",{params:t})).data,Vf=async t=>(await J.post("/employee/requests",t)).data,B3=()=>{const{theme:t}=St(),[s,a]=y.useState(!0),[r,n]=y.useState([]),[i,l]=y.useState([]),[c,o]=y.useState(!1),[d,x]=y.useState(new Date().getFullYear()),[u,m]=y.useState({leaveType:"casual",startDate:"",endDate:"",numberOfDays:1,halfDay:!1,halfDayPeriod:"first-half",reason:"",handoverNotes:"",emergencyContact:{name:"",phone:""},isUrgent:!1});y.useEffect(()=>{f()},[d]);const f=async()=>{var b,A,N,C;try{a(!0);const[k,S]=await Promise.all([$3(d),Id({year:d})]);n(((b=k.data)==null?void 0:b.balances)||((A=k.data)==null?void 0:A.data)||[]),l(((N=k.data)==null?void 0:N.history)||((C=S.data)==null?void 0:C.data)||S.data||[])}catch(k){console.error("Error fetching leave data:",k),_.error("Failed to load leave data"),n([]),l([])}finally{a(!1)}},g=()=>{if(u.startDate&&u.endDate){const b=new Date(u.startDate),A=new Date(u.endDate),N=Math.abs(A-b),C=Math.ceil(N/(1e3*60*60*24))+1;m({...u,numberOfDays:u.halfDay?.5:C})}};y.useEffect(()=>{g()},[u.startDate,u.endDate,u.halfDay]);const h=async b=>{var A,N;b.preventDefault();try{await Uf(u),_.success("Leave application submitted successfully"),o(!1),f(),j()}catch(C){_.error(((N=(A=C.response)==null?void 0:A.data)==null?void 0:N.message)||"Failed to apply for leave")}},p=async b=>{var A,N;if(window.confirm("Are you sure you want to cancel this leave application?"))try{await O3(b),_.success("Leave application cancelled"),f()}catch(C){_.error(((N=(A=C.response)==null?void 0:A.data)==null?void 0:N.message)||"Failed to cancel leave")}},j=()=>{m({leaveType:"casual",startDate:"",endDate:"",numberOfDays:1,halfDay:!1,halfDayPeriod:"first-half",reason:"",handoverNotes:"",emergencyContact:{name:"",phone:""},isUrgent:!1})},v=b=>{switch(b){case"approved":return"bg-green-100 text-green-800";case"rejected":return"bg-red-100 text-red-800";case"pending":return"bg-yellow-100 text-yellow-800";case"cancelled":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}},w=b=>{switch(b){case"approved":return e.jsx(Te,{className:"w-4 h-4"});case"rejected":return e.jsx(Qe,{className:"w-4 h-4"});case"pending":return e.jsx(Be,{className:"w-4 h-4"});default:return e.jsx(st,{className:"w-4 h-4"})}};return s?e.jsx("div",{className:"flex items-center justify-center h-96",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 border-4 border-primary-600 border-t-transparent rounded-full animate-spin mx-auto"}),e.jsx("p",{className:`mt-4 ${t==="dark"?"text-gray-400":"text-gray-600"}`,children:"Loading leave data..."})]})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:`text-2xl font-bold ${t==="dark"?"text-white":"text-gray-900"}`,children:"Leave Management"}),e.jsx("p",{className:`mt-1 ${t==="dark"?"text-gray-400":"text-gray-600"}`,children:"Manage your leave applications and view balance"})]}),e.jsxs("button",{onClick:()=>o(!0),className:"flex items-center px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors",children:[e.jsx(qe,{className:"w-5 h-5 mr-2"}),"Apply Leave"]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:r&&r.length>0?r.map((b,A)=>e.jsxs("div",{className:`rounded-xl p-6 ${t==="dark"?"bg-dark-800":"bg-white"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:`text-sm font-medium uppercase ${t==="dark"?"text-gray-400":"text-gray-600"}`,children:b.leaveType||"N/A"}),e.jsx(Oe,{className:"w-5 h-5 text-primary-600"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:t==="dark"?"text-gray-400":"text-gray-600",children:"Total"}),e.jsx("span",{className:`font-semibold ${t==="dark"?"text-white":"text-gray-900"}`,children:b.totalAllotted||b.total||0})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:t==="dark"?"text-gray-400":"text-gray-600",children:"Used"}),e.jsx("span",{className:`font-semibold ${t==="dark"?"text-white":"text-gray-900"}`,children:b.used||b.consumed||0})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:t==="dark"?"text-gray-400":"text-gray-600",children:"Pending"}),e.jsx("span",{className:`font-semibold ${t==="dark"?"text-white":"text-gray-900"}`,children:b.pending||0})]}),e.jsx("div",{className:"pt-2 border-t border-gray-200 dark:border-dark-700",children:e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:`font-medium ${t==="dark"?"text-gray-300":"text-gray-700"}`,children:"Remaining"}),e.jsx("span",{className:"font-bold text-primary-600 text-lg",children:b.remaining||b.available||0})]})})]})]},A)):e.jsx("div",{className:`col-span-full text-center py-8 ${t==="dark"?"text-gray-400":"text-gray-600"}`,children:"No leave balance data available"})}),e.jsxs("div",{className:`rounded-xl p-6 ${t==="dark"?"bg-dark-800":"bg-white"}`,children:[e.jsx("h2",{className:`text-lg font-semibold mb-4 ${t==="dark"?"text-white":"text-gray-900"}`,children:"Leave History"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:`border-b ${t==="dark"?"border-dark-700":"border-gray-200"}`,children:[e.jsx("th",{className:`text-left py-3 px-4 ${t==="dark"?"text-gray-400":"text-gray-600"}`,children:"Type"}),e.jsx("th",{className:`text-left py-3 px-4 ${t==="dark"?"text-gray-400":"text-gray-600"}`,children:"Duration"}),e.jsx("th",{className:`text-left py-3 px-4 ${t==="dark"?"text-gray-400":"text-gray-600"}`,children:"Days"}),e.jsx("th",{className:`text-left py-3 px-4 ${t==="dark"?"text-gray-400":"text-gray-600"}`,children:"Reason"}),e.jsx("th",{className:`text-left py-3 px-4 ${t==="dark"?"text-gray-400":"text-gray-600"}`,children:"Status"}),e.jsx("th",{className:`text-left py-3 px-4 ${t==="dark"?"text-gray-400":"text-gray-600"}`,children:"Actions"})]})}),e.jsx("tbody",{children:i&&i.length>0?i.map(b=>e.jsxs("tr",{className:`border-b ${t==="dark"?"border-dark-700":"border-gray-100"}`,children:[e.jsx("td",{className:`py-3 px-4 ${t==="dark"?"text-white":"text-gray-900"}`,children:e.jsx("span",{className:"capitalize",children:b.leaveType})}),e.jsxs("td",{className:`py-3 px-4 ${t==="dark"?"text-gray-400":"text-gray-600"}`,children:[new Date(b.startDate).toLocaleDateString()," - ",new Date(b.endDate).toLocaleDateString()]}),e.jsx("td",{className:`py-3 px-4 ${t==="dark"?"text-white":"text-gray-900"}`,children:b.numberOfDays}),e.jsx("td",{className:`py-3 px-4 ${t==="dark"?"text-gray-400":"text-gray-600"}`,children:e.jsx("span",{className:"truncate max-w-xs block",children:b.reason})}),e.jsx("td",{className:"py-3 px-4",children:e.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${v(b.status)}`,children:[w(b.status),e.jsx("span",{className:"ml-1 capitalize",children:b.status})]})}),e.jsx("td",{className:"py-3 px-4",children:b.status==="pending"&&e.jsx("button",{onClick:()=>p(b.id),className:"text-red-600 hover:text-red-700 text-sm font-medium",children:"Cancel"})})]},b.id)):e.jsx("tr",{children:e.jsx("td",{colSpan:"6",className:`py-8 text-center ${t==="dark"?"text-gray-400":"text-gray-600"}`,children:"No leave applications found"})})})]})})]}),c&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:`rounded-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto ${t==="dark"?"bg-dark-800":"bg-white"}`,children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:`text-xl font-bold ${t==="dark"?"text-white":"text-gray-900"}`,children:"Apply for Leave"}),e.jsx("button",{onClick:()=>o(!1),className:`p-2 rounded-lg ${t==="dark"?"hover:bg-dark-700":"hover:bg-gray-100"}`,children:e.jsx(Le,{className:"w-5 h-5"})})]}),e.jsxs("form",{onSubmit:h,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${t==="dark"?"text-gray-300":"text-gray-700"}`,children:"Leave Type *"}),e.jsxs("select",{value:u.leaveType,onChange:b=>m({...u,leaveType:b.target.value}),className:`w-full px-4 py-2 rounded-lg border ${t==="dark"?"bg-dark-700 border-dark-600 text-white":"bg-white border-gray-300 text-gray-900"}`,required:!0,children:[e.jsx("option",{value:"Personal Leave",children:"Personal Leave"}),e.jsx("option",{value:"Sick Leave",children:"Sick Leave"}),e.jsx("option",{value:"Comp Offs",children:"Comp Offs"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${t==="dark"?"text-gray-300":"text-gray-700"}`,children:"Start Date *"}),e.jsx("input",{type:"date",value:u.startDate,onChange:b=>m({...u,startDate:b.target.value}),className:`w-full px-4 py-2 rounded-lg border ${t==="dark"?"bg-dark-700 border-dark-600 text-white":"bg-white border-gray-300 text-gray-900"}`,required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${t==="dark"?"text-gray-300":"text-gray-700"}`,children:"End Date *"}),e.jsx("input",{type:"date",value:u.endDate,onChange:b=>m({...u,endDate:b.target.value}),className:`w-full px-4 py-2 rounded-lg border ${t==="dark"?"bg-dark-700 border-dark-600 text-white":"bg-white border-gray-300 text-gray-900"}`,required:!0})]})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:u.halfDay,onChange:b=>m({...u,halfDay:b.target.checked}),className:"mr-2"}),e.jsx("span",{className:t==="dark"?"text-gray-300":"text-gray-700",children:"Half Day"})]}),u.halfDay&&e.jsxs("select",{value:u.halfDayPeriod,onChange:b=>m({...u,halfDayPeriod:b.target.value}),className:`px-4 py-2 rounded-lg border ${t==="dark"?"bg-dark-700 border-dark-600 text-white":"bg-white border-gray-300 text-gray-900"}`,children:[e.jsx("option",{value:"first-half",children:"First Half"}),e.jsx("option",{value:"second-half",children:"Second Half"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${t==="dark"?"text-gray-300":"text-gray-700"}`,children:"Reason *"}),e.jsx("textarea",{value:u.reason,onChange:b=>m({...u,reason:b.target.value}),rows:"3",className:`w-full px-4 py-2 rounded-lg border ${t==="dark"?"bg-dark-700 border-dark-600 text-white":"bg-white border-gray-300 text-gray-900"}`,required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${t==="dark"?"text-gray-300":"text-gray-700"}`,children:"Handover Notes (Optional)"}),e.jsx("textarea",{value:u.handoverNotes,onChange:b=>m({...u,handoverNotes:b.target.value}),rows:"2",className:`w-full px-4 py-2 rounded-lg border ${t==="dark"?"bg-dark-700 border-dark-600 text-white":"bg-white border-gray-300 text-gray-900"}`,placeholder:"Mention work handover details..."})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>o(!1),className:`px-4 py-2 rounded-lg ${t==="dark"?"bg-dark-700 text-gray-300 hover:bg-dark-600":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700",children:"Submit Application"})]})]})]})})})]})},z3=()=>{const{theme:t}=St(),[s,a]=y.useState(!0),[r,n]=y.useState([]),[i,l]=y.useState(!1),[c,o]=y.useState(null),[d,x]=y.useState({requestType:"hr-query",priority:"medium",subject:"",description:""});y.useEffect(()=>{u()},[]);const u=async()=>{var j;try{a(!0);const v=await M3();console.log("ðŸ“„ Frontend received response:",v);const w=((j=v==null?void 0:v.data)==null?void 0:j.data)||(v==null?void 0:v.data)||[];console.log("ðŸ“„ Frontend parsed list:",w),n(w)}catch(v){console.error("Error fetching requests:",v),_.error("Failed to load requests")}finally{a(!1)}},m=async j=>{var v,w;j.preventDefault();try{await Vf(d),_.success("Request submitted successfully"),l(!1),u(),f()}catch(b){_.error(((w=(v=b.response)==null?void 0:v.data)==null?void 0:w.message)||"Failed to create request")}},f=()=>{x({requestType:"hr-query",priority:"medium",subject:"",description:""})},g=j=>{switch(j){case"resolved":return"bg-green-100 text-green-800";case"closed":return"bg-gray-100 text-gray-800";case"in-progress":return"bg-blue-100 text-blue-800";case"pending-info":return"bg-yellow-100 text-yellow-800";case"rejected":return"bg-red-100 text-red-800";default:return"bg-orange-100 text-orange-800"}},h=j=>{switch(j){case"urgent":return"bg-red-100 text-red-800";case"high":return"bg-orange-100 text-orange-800";case"medium":return"bg-yellow-100 text-yellow-800";default:return"bg-blue-100 text-blue-800"}},p=[{value:"id-card-reissue",label:"ID Card Reissue"},{value:"hr-query",label:"HR Query"},{value:"bank-update",label:"Bank Update"},{value:"document-upload",label:"Document Upload"},{value:"address-change",label:"Address Change"},{value:"emergency-contact-update",label:"Emergency Contact Update"},{value:"salary-certificate",label:"Salary Certificate"},{value:"experience-letter",label:"Experience Letter"},{value:"noc-request",label:"NOC Request"},{value:"other",label:"Other"}];return s?e.jsx("div",{className:"flex items-center justify-center h-96",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 border-4 border-primary-600 border-t-transparent rounded-full animate-spin mx-auto"}),e.jsx("p",{className:`mt-4 ${t==="dark"?"text-gray-400":"text-gray-600"}`,children:"Loading requests..."})]})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:`text-2xl font-bold ${t==="dark"?"text-white":"text-gray-900"}`,children:"Request Center"}),e.jsx("p",{className:`mt-1 ${t==="dark"?"text-gray-400":"text-gray-600"}`,children:"Submit and track your requests"})]}),e.jsxs("button",{onClick:()=>l(!0),className:"flex items-center px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700",children:[e.jsx(qe,{className:"w-5 h-5 mr-2"}),"New Request"]})]}),e.jsx("div",{className:"grid grid-cols-1 gap-4",children:r.map((j,v)=>e.jsxs("div",{className:`rounded-xl p-6 cursor-pointer transition-all hover:shadow-lg ${t==="dark"?"bg-dark-800 hover:bg-dark-700":"bg-white hover:shadow-xl"}`,onClick:()=>o(j),children:[e.jsx("div",{className:"flex items-start justify-between mb-3",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[e.jsx("h3",{className:`text-lg font-semibold ${t==="dark"?"text-white":"text-gray-900"}`,children:j.subject}),e.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium capitalize ${g(j.status)}`,children:j.status.replace("-"," ")}),e.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium capitalize ${h(j.priority)}`,children:j.priority})]}),e.jsxs("p",{className:`text-sm ${t==="dark"?"text-gray-400":"text-gray-600"}`,children:[j.requestNumber," â€¢ ",j.requestType.replace("-"," ")]})]})}),e.jsx("p",{className:`text-sm mb-3 ${t==="dark"?"text-gray-400":"text-gray-600"}`,children:j.description}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("span",{className:"text-gray-500",children:["Created: ",new Date(j.createdAt).toLocaleDateString()]}),j.comments&&j.comments.length>0&&e.jsxs("span",{className:`flex items-center ${t==="dark"?"text-gray-400":"text-gray-600"}`,children:[e.jsx(Ag,{className:"w-4 h-4 mr-1"}),j.comments.length," comments"]})]})]},v))}),r.length===0&&e.jsxs("div",{className:`rounded-xl p-12 text-center ${t==="dark"?"bg-dark-800":"bg-white"}`,children:[e.jsx(st,{className:`w-16 h-16 mx-auto mb-4 ${t==="dark"?"text-gray-600":"text-gray-400"}`}),e.jsx("p",{className:`text-lg ${t==="dark"?"text-gray-400":"text-gray-600"}`,children:"No requests submitted yet"}),e.jsxs("p",{className:"text-sm mt-2 text-gray-500",children:["Debug: requests.length = ",r.length]})]}),i&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:`rounded-xl max-w-2xl w-full ${t==="dark"?"bg-dark-800":"bg-white"}`,children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:`text-xl font-bold ${t==="dark"?"text-white":"text-gray-900"}`,children:"Create New Request"}),e.jsx("button",{onClick:()=>l(!1),className:`p-2 rounded-lg ${t==="dark"?"hover:bg-dark-700":"hover:bg-gray-100"}`,children:e.jsx(Le,{className:"w-5 h-5"})})]}),e.jsxs("form",{onSubmit:m,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${t==="dark"?"text-gray-300":"text-gray-700"}`,children:"Request Type *"}),e.jsx("select",{value:d.requestType,onChange:j=>x({...d,requestType:j.target.value}),className:`w-full px-4 py-2 rounded-lg border ${t==="dark"?"bg-dark-700 border-dark-600 text-white":"bg-white border-gray-300 text-gray-900"}`,required:!0,children:p.map(j=>e.jsx("option",{value:j.value,children:j.label},j.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${t==="dark"?"text-gray-300":"text-gray-700"}`,children:"Priority *"}),e.jsxs("select",{value:d.priority,onChange:j=>x({...d,priority:j.target.value}),className:`w-full px-4 py-2 rounded-lg border ${t==="dark"?"bg-dark-700 border-dark-600 text-white":"bg-white border-gray-300 text-gray-900"}`,required:!0,children:[e.jsx("option",{value:"low",children:"Low"}),e.jsx("option",{value:"medium",children:"Medium"}),e.jsx("option",{value:"high",children:"High"}),e.jsx("option",{value:"urgent",children:"Urgent"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${t==="dark"?"text-gray-300":"text-gray-700"}`,children:"Subject *"}),e.jsx("input",{type:"text",value:d.subject,onChange:j=>x({...d,subject:j.target.value}),className:`w-full px-4 py-2 rounded-lg border ${t==="dark"?"bg-dark-700 border-dark-600 text-white":"bg-white border-gray-300 text-gray-900"}`,required:!0,maxLength:200})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${t==="dark"?"text-gray-300":"text-gray-700"}`,children:"Description *"}),e.jsx("textarea",{value:d.description,onChange:j=>x({...d,description:j.target.value}),rows:"5",className:`w-full px-4 py-2 rounded-lg border ${t==="dark"?"bg-dark-700 border-dark-600 text-white":"bg-white border-gray-300 text-gray-900"}`,required:!0,maxLength:2e3})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>l(!1),className:`px-4 py-2 rounded-lg ${t==="dark"?"bg-dark-700 text-gray-300 hover:bg-dark-600":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700",children:"Submit Request"})]})]})]})})})]})},qu=()=>{const t=Je(),[s,a]=y.useState(!0),[r,n]=y.useState(null),[i,l]=y.useState("");y.useEffect(()=>{c()},[]);const c=async()=>{var v,w;try{a(!0);const b=await Pd();n(b.data)}catch(b){console.error("Error fetching dashboard data:",b),_.error(((w=(v=b.response)==null?void 0:v.data)==null?void 0:w.message)||"Failed to load dashboard data")}finally{a(!1)}},o=v=>new Date(v).toLocaleDateString("en-US",{month:"short",day:"numeric"}),d=(v,w)=>`${o(v)} â€“ ${o(w)}`;if(s)return e.jsx("div",{className:"flex items-center justify-center min-h-screen bg-[#1E1E2A]",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 border-4 border-[#A88BFF] border-t-transparent rounded-full animate-spin mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-400",children:"Loading..."})]})});const{employee:x,shiftTiming:u,quickStats:m,upcomingHolidays:f,offThisWeek:g,birthdays:h,anniversaries:p,announcements:j}=r||{};return e.jsxs("div",{className:"min-h-screen bg-[#1E1E2A] pb-20 md:pb-6",children:[e.jsx("div",{className:"sticky top-0 z-10 bg-[#1E1E2A] border-b border-gray-800 px-4 py-4",children:e.jsx("div",{className:"max-w-7xl mx-auto",children:e.jsxs("div",{className:"relative",children:[e.jsx(yt,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),e.jsx("input",{type:"text",placeholder:"Search your colleagues",value:i,onChange:v=>l(v.target.value),className:"w-full bg-[#2A2A3A] text-white pl-12 pr-4 py-3 rounded-2xl border border-gray-700 focus:border-[#A88BFF] focus:outline-none transition-colors"})]})})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-6 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("button",{onClick:()=>t("/employee/leave/apply"),className:"bg-gradient-to-br from-[#A88BFF] to-[#8B6FE8] text-white p-4 rounded-2xl shadow-lg hover:shadow-xl transition-all flex items-center justify-center space-x-3",children:[e.jsx(Oe,{className:"w-6 h-6"}),e.jsx("span",{className:"font-semibold",children:"Apply Leave"})]}),e.jsxs("button",{onClick:()=>t("/employee/leave/balance"),className:"bg-[#2A2A3A] text-white p-4 rounded-2xl border border-gray-700 hover:border-[#A88BFF] transition-all flex items-center justify-center space-x-3",children:[e.jsx(Be,{className:"w-6 h-6 text-[#A88BFF]"}),e.jsx("span",{className:"font-semibold",children:"Leave Balance"})]})]}),e.jsxs("div",{className:"bg-[#2A2A3A] rounded-2xl p-6 border border-gray-700",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-400 text-sm mb-1",children:"Shift Today"}),e.jsxs("h3",{className:"text-white text-xl font-bold",children:[u==null?void 0:u.name," (",u==null?void 0:u.startTime," - ",u==null?void 0:u.endTime,")"]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-gray-400 text-sm mb-1",children:"Worked Hours"}),e.jsxs("p",{className:"text-[#A88BFF] text-xl font-bold",children:[u==null?void 0:u.workedToday," / ",u==null?void 0:u.totalHours,"h"]})]})]}),e.jsx("div",{className:"w-full bg-gray-700 rounded-full h-2",children:e.jsx("div",{className:"bg-gradient-to-r from-[#A88BFF] to-[#8B6FE8] h-2 rounded-full",style:{width:"85%"}})})]}),g&&g.length>0&&e.jsxs("div",{className:"bg-[#2A2A3A] rounded-2xl p-6 border border-gray-700",children:[e.jsx("h3",{className:"text-white text-lg font-semibold mb-4",children:"OFF THIS WEEK"}),e.jsx("div",{className:"flex overflow-x-auto space-x-4 pb-2 scrollbar-hide",children:g.map((v,w)=>e.jsxs("div",{className:"flex-shrink-0 text-center",children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-gradient-to-br from-[#A88BFF] to-[#8B6FE8] flex items-center justify-center mb-2",children:v.employee.profileImage?e.jsx("img",{src:v.employee.profileImage,alt:v.employee.name,className:"w-full h-full rounded-full object-cover"}):e.jsx("span",{className:"text-white text-xl font-bold",children:v.employee.name.charAt(0)})}),e.jsx("p",{className:"text-white text-xs font-medium w-20 truncate",children:v.employee.name.split(" ")[0]}),e.jsx("p",{className:"text-gray-400 text-xs",children:d(v.startDate,v.endDate)})]},w))})]}),((h==null?void 0:h.length)>0||(p==null?void 0:p.length)>0)&&e.jsxs("div",{className:"bg-[#2A2A3A] rounded-2xl p-6 border border-gray-700",children:[e.jsx("h3",{className:"text-white text-lg font-semibold mb-4",children:"Wish Them ðŸŽ‰"}),e.jsxs("div",{className:"space-y-3",children:[h==null?void 0:h.slice(0,3).map((v,w)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-[#1E1E2A] rounded-xl",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-pink-500 to-purple-500 flex items-center justify-center",children:v.profileImage?e.jsx("img",{src:v.profileImage,alt:v.name,className:"w-full h-full rounded-full object-cover"}):e.jsx(Eg,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-white font-medium",children:v.name}),e.jsx("p",{className:"text-gray-400 text-sm",children:o(v.date)})]})]}),e.jsx("span",{className:"px-3 py-1 bg-pink-500/20 text-pink-400 rounded-full text-xs font-medium",children:"Birthday"})]},`birthday-${w}`)),p==null?void 0:p.slice(0,2).map((v,w)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-[#1E1E2A] rounded-xl",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-blue-500 to-cyan-500 flex items-center justify-center",children:v.profileImage?e.jsx("img",{src:v.profileImage,alt:v.name,className:"w-full h-full rounded-full object-cover"}):e.jsx(_a,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-white font-medium",children:v.name}),e.jsxs("p",{className:"text-gray-400 text-sm",children:[v.years," years"]})]})]}),e.jsx("span",{className:"px-3 py-1 bg-blue-500/20 text-blue-400 rounded-full text-xs font-medium",children:"Work Anniversary"})]},`anniversary-${w}`))]})]}),e.jsxs("div",{className:"bg-[#2A2A3A] rounded-2xl p-6 border border-gray-700",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-white text-lg font-semibold",children:"Announcements"}),e.jsx(Da,{className:"w-5 h-5 text-gray-400"})]}),j&&j.length>0?e.jsx("div",{className:"space-y-3",children:j.map((v,w)=>e.jsxs("div",{className:"p-4 bg-[#1E1E2A] rounded-xl",children:[e.jsx("h4",{className:"text-white font-medium mb-1",children:v.title}),e.jsx("p",{className:"text-gray-400 text-sm",children:v.message})]},w))}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Da,{className:"w-12 h-12 text-gray-600 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-400",children:"No announcements at the moment"})]})]}),f&&f.length>0&&e.jsxs("div",{className:"bg-[#2A2A3A] rounded-2xl p-6 border border-gray-700",children:[e.jsx("h3",{className:"text-white text-lg font-semibold mb-4",children:"Upcoming Holidays"}),e.jsx("div",{className:"space-y-4",children:f.map((v,w)=>e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-[#A88BFF] to-[#8B6FE8] flex items-center justify-center",children:e.jsx("span",{className:"text-white font-bold text-sm",children:new Date(v.date).getDate()})})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"text-white font-medium",children:v.name}),e.jsx("p",{className:"text-gray-400 text-sm",children:new Date(v.date).toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric",year:"numeric"})})]}),e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${v.type==="public"?"bg-green-500/20 text-green-400":"bg-blue-500/20 text-blue-400"}`,children:v.type})]},w))})]})]}),e.jsx(qt,{})]})},U3=()=>{const t=Je(),[s,a]=y.useState("balance"),[r,n]=y.useState(!0),[i,l]=y.useState(!1),[c,o]=y.useState([]),[d,x]=y.useState([]),[u,m]=y.useState(new Date().getFullYear());y.useEffect(()=>{f()},[u,s]);const f=async()=>{var b,A;try{if(n(!0),s==="balance"){const N=await _c(u);o(N.data)}else{const N=await Id({year:u});x(N.data)}}catch(N){console.error("Error fetching leave data:",N),_.error(((A=(b=N.response)==null?void 0:b.data)==null?void 0:A.message)||"Failed to load leave data")}finally{n(!1)}},g=async()=>{try{l(!0);const b=localStorage.getItem("token"),N=await(await fetch("/api/employee/leaves/refresh",{method:"POST",headers:{Authorization:`Bearer ${b}`,"Content-Type":"application/json"}})).json();if(N.success){if(_.success(N.message),s==="balance"){const C=await _c(u);o(C.data)}}else _.error(N.message||"Failed to refresh leave balances")}catch(b){console.error("Error refreshing leave balances:",b),_.error("Failed to refresh leave balances")}finally{l(!1)}},h=async()=>{try{l(!0);const b=localStorage.getItem("token"),N=await(await fetch("/api/employee/leaves/fix-negative",{method:"POST",headers:{Authorization:`Bearer ${b}`,"Content-Type":"application/json"}})).json();if(N.success){if(_.success(N.message),s==="balance"){const C=await _c(u);o(C.data)}}else _.error(N.message||"Failed to fix negative balances")}catch(b){console.error("Error fixing negative balances:",b),_.error("Failed to fix negative balances")}finally{l(!1)}},p=b=>new Date(b).toLocaleDateString("en-US",{month:"short",day:"numeric"}),j=(b,A)=>{const N=new Date(b),C=new Date(A);return N.toDateString()===C.toDateString()?p(b):`${p(b)} â€“ ${p(A)}`},v=b=>{switch(b==null?void 0:b.toLowerCase()){case"approved":return"bg-green-500/20 text-green-400";case"rejected":return"bg-red-500/20 text-red-400";case"pending":return"bg-yellow-500/20 text-yellow-400";default:return"bg-gray-500/20 text-gray-400"}},w=b=>{switch(b==null?void 0:b.toLowerCase()){case"approved":return e.jsx(Te,{className:"w-4 h-4"});case"rejected":return e.jsx(Qe,{className:"w-4 h-4"});case"pending":return e.jsx(Be,{className:"w-4 h-4"});default:return null}};return e.jsxs("div",{className:"min-h-screen bg-[#1E1E2A] p-4 md:p-6 pb-24 md:pb-6",children:[e.jsx("div",{className:"sticky top-0 z-10 bg-[#1E1E2A] border-b border-gray-800 px-4 py-4",children:e.jsx("div",{className:"max-w-7xl mx-auto flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("button",{onClick:()=>t("/employee/home"),className:"text-gray-400 hover:text-white transition-colors",children:e.jsx(xt,{className:"w-6 h-6"})}),e.jsx("h1",{className:"text-white text-xl font-bold",children:"Leave Management"})]})})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-6",children:[e.jsxs("div",{className:"bg-[#2A2A3A] rounded-2xl p-1 mb-6 inline-flex border border-gray-700",children:[e.jsx("button",{onClick:()=>a("balance"),className:`px-6 py-3 rounded-xl font-semibold transition-all ${s==="balance"?"bg-[#A88BFF] text-white":"text-gray-400 hover:text-white"}`,children:"Leave Balances"}),e.jsx("button",{onClick:()=>a("history"),className:`px-6 py-3 rounded-xl font-semibold transition-all ${s==="history"?"bg-[#A88BFF] text-white":"text-gray-400 hover:text-white"}`,children:"Leave History"}),s==="balance"&&e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:g,disabled:i,className:"ml-4 px-4 py-3 rounded-xl font-semibold transition-all bg-gray-600 hover:bg-gray-500 text-white disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2",children:[e.jsx(Xt,{className:`w-4 h-4 ${i?"animate-spin":""}`}),e.jsx("span",{children:i?"Refreshing...":"Refresh"})]}),e.jsxs("button",{onClick:h,disabled:i,className:"ml-2 px-4 py-3 rounded-xl font-semibold transition-all bg-red-600 hover:bg-red-500 text-white disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2",children:[e.jsx(Xt,{className:`w-4 h-4 ${i?"animate-spin":""}`}),e.jsx("span",{children:i?"Fixing...":"Fix Negative"})]})]})]}),s==="history"&&e.jsx("div",{className:"mb-6",children:e.jsxs("select",{value:u,onChange:b=>m(parseInt(b.target.value)),className:"bg-[#2A2A3A] text-white px-4 py-3 rounded-xl border border-gray-700 focus:border-[#A88BFF] focus:outline-none",children:[e.jsx("option",{value:2025,children:"Jan 2025 â€“ Dec 2025"}),e.jsx("option",{value:2024,children:"Jan 2024 â€“ Dec 2024"}),e.jsx("option",{value:2023,children:"Jan 2023 â€“ Dec 2023"})]})}),r?e.jsx("div",{className:"flex items-center justify-center py-20",children:e.jsx("div",{className:"w-12 h-12 border-4 border-[#A88BFF] border-t-transparent rounded-full animate-spin"})}):e.jsxs(e.Fragment,{children:[s==="balance"&&e.jsx("div",{className:"space-y-4",children:c.map((b,A)=>e.jsxs("div",{className:"bg-[#2A2A3A] rounded-2xl p-6 border border-gray-700 hover:border-[#A88BFF] transition-all",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-white text-lg font-semibold mb-1",children:b.leaveType}),e.jsxs("p",{className:"text-gray-400 text-sm",children:[b.consumed||0," days consumed"]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-3xl font-bold text-[#A88BFF]",children:b.available||0}),e.jsx("p",{className:"text-gray-400 text-sm",children:"days available"})]})]}),b.total>0&&e.jsxs("div",{className:"mt-4",children:[e.jsx("div",{className:"w-full bg-gray-700 rounded-full h-2",children:e.jsx("div",{className:"bg-gradient-to-r from-[#A88BFF] to-[#8B6FE8] h-2 rounded-full transition-all",style:{width:`${(b.consumed||0)/b.total*100}%`}})}),e.jsxs("div",{className:"flex justify-between mt-2 text-xs text-gray-400",children:[e.jsxs("span",{children:["Used: ",b.consumed||0]}),e.jsxs("span",{children:["Total: ",b.total]})]})]})]},A))}),s==="history"&&e.jsx("div",{className:"space-y-4",children:d.length>0?d.map((b,A)=>e.jsx("div",{className:"bg-[#2A2A3A] rounded-2xl p-6 border border-gray-700 hover:border-[#A88BFF] transition-all",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(Oe,{className:"w-5 h-5 text-[#A88BFF]"}),e.jsx("h3",{className:"text-white text-lg font-semibold",children:j(b.startDate,b.endDate)})]}),e.jsxs("p",{className:"text-gray-400 text-sm mb-1",children:[b.numberOfDays," ",b.numberOfDays===1?"day":"days",", ",b.leaveType]}),b.reason&&e.jsxs("p",{className:"text-gray-500 text-sm italic mt-2",children:['"',b.reason,'"']}),b.approvedBy&&e.jsxs("p",{className:"text-gray-500 text-xs mt-2",children:["Approved by ",b.approvedBy]})]}),e.jsx("div",{className:"flex-shrink-0 ml-4",children:e.jsxs("span",{className:`inline-flex items-center space-x-1 px-3 py-2 rounded-full text-xs font-semibold uppercase ${v(b.status)}`,children:[w(b.status),e.jsx("span",{children:b.status})]})})]})},A)):e.jsxs("div",{className:"bg-[#2A2A3A] rounded-2xl p-12 border border-gray-700 text-center",children:[e.jsx(Oe,{className:"w-16 h-16 text-gray-600 mx-auto mb-4"}),e.jsx("h3",{className:"text-white text-lg font-semibold mb-2",children:"No Leave History"}),e.jsxs("p",{className:"text-gray-400",children:["You haven't applied for any leaves in ",u]})]})})]}),e.jsx("div",{className:"mt-8",children:e.jsx("button",{onClick:()=>t("/employee/leave/apply"),className:"w-full bg-gradient-to-r from-[#A88BFF] to-[#8B6FE8] text-white py-4 rounded-2xl font-semibold shadow-lg hover:shadow-xl transition-all",children:"Apply for Leave"})})]}),e.jsx(qt,{})]})},V3=()=>{const t=Je(),[s,a]=y.useState(1),[r,n]=y.useState(!1),[i,l]=y.useState([]),[c,o]=y.useState(null),[d,x]=y.useState(null),[u,m]=y.useState(new Date),[f,g]=y.useState([]),[h,p]=y.useState({leaveType:"",reason:"",notifyTeammates:[]});y.useEffect(()=>{j(),v()},[]);const j=async()=>{try{const X=localStorage.getItem("token"),le=await(await fetch("/api/employee/leaves/types",{headers:{Authorization:`Bearer ${X}`}})).json();le.success&&le.data?(l(le.data),console.log(`ðŸ“‹ Loaded ${le.data.length} leave types:`,le.data)):l(["Personal Leave","Sick Leave","Casual Leave","Comp Offs","Floater Leave","Marriage Leave","Maternity Leave","Paternity Leave","Unpaid Leave"])}catch(X){console.error("Error fetching leave types:",X),l(["Personal Leave","Sick Leave","Casual Leave","Comp Offs","Floater Leave","Marriage Leave","Maternity Leave","Paternity Leave","Unpaid Leave"])}},v=async()=>{try{const D=(await Id({status:"approved"})).data.filter(le=>new Date(le.startDate)>=new Date);g(D.slice(0,5))}catch(X){console.error("Error fetching upcoming leaves:",X)}},w=X=>{const D=X.getFullYear(),le=X.getMonth(),de=new Date(D,le,1),z=new Date(D,le+1,0).getDate(),O=de.getDay();return{daysInMonth:z,startingDayOfWeek:O,year:D,month:le}},b=X=>{if(!X)return!1;const D=new Date(u.getFullYear(),u.getMonth(),X);return c&&!d?D.toDateString()===c.toDateString():c&&d?D>=c&&D<=d:!1},A=X=>{if(!X||!c||!d)return!1;const D=new Date(u.getFullYear(),u.getMonth(),X);return D>c&&D<d},N=X=>{const D=new Date(u.getFullYear(),u.getMonth(),X);!c||c&&d?(o(D),x(null)):D>=c?x(D):(o(D),x(null))},C=()=>{if(!c||!d)return c?1:0;const X=Math.abs(d-c);return Math.ceil(X/(1e3*60*60*24))+1},k=async()=>{var X,D;if(!h.leaveType||!c||!d){_.error("Please fill all required fields");return}try{n(!0),await Uf({leaveType:h.leaveType,startDate:c.toISOString(),endDate:d.toISOString(),reason:h.reason,notifyTeammates:h.notifyTeammates}),_.success("Leave application submitted successfully!"),t("/employee/leave/balance")}catch(le){console.error("Error applying for leave:",le),_.error(((D=(X=le.response)==null?void 0:X.data)==null?void 0:D.message)||"Failed to submit leave application")}finally{n(!1)}},{daysInMonth:S,startingDayOfWeek:F,year:R,month:T}=w(u),M=Array.from({length:S},(X,D)=>D+1),U=[...Array.from({length:F},(X,D)=>null),...M],W=["January","February","March","April","May","June","July","August","September","October","November","December"],se=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];return e.jsxs("div",{className:"min-h-screen bg-[#1E1E2A] p-4 md:p-6 pb-24 md:pb-6",children:[e.jsx("div",{className:"sticky top-0 z-10 bg-[#1E1E2A] border-b border-gray-800 px-4 py-4",children:e.jsx("div",{className:"max-w-7xl mx-auto flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("button",{onClick:()=>s===1?t("/employee/home"):a(1),className:"text-gray-400 hover:text-white transition-colors",children:e.jsx(xt,{className:"w-6 h-6"})}),e.jsx("h1",{className:"text-white text-xl font-bold",children:s===1?"Select Date":"Apply Leave"})]})})}),e.jsx("div",{className:"max-w-7xl mx-auto px-4 py-6",children:s===1?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-[#2A2A3A] rounded-2xl p-6 border border-gray-700 mb-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-sm mb-2 block",children:"Start Date"}),e.jsx("div",{className:"bg-[#1E1E2A] rounded-xl p-4 border border-gray-700",children:e.jsx("p",{className:"text-white font-semibold",children:c?c.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"Select date"})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-sm mb-2 block",children:"End Date"}),e.jsx("div",{className:"bg-[#1E1E2A] rounded-xl p-4 border border-gray-700",children:e.jsx("p",{className:"text-white font-semibold",children:d?d.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"Select date"})})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("button",{onClick:()=>m(new Date(R,T-1)),className:"p-2 text-gray-400 hover:text-white transition-colors",children:e.jsx(Bl,{className:"w-6 h-6"})}),e.jsxs("h3",{className:"text-white text-lg font-semibold",children:[W[T]," ",R]}),e.jsx("button",{onClick:()=>m(new Date(R,T+1)),className:"p-2 text-gray-400 hover:text-white transition-colors",children:e.jsx(Nn,{className:"w-6 h-6"})})]}),e.jsxs("div",{className:"grid grid-cols-7 gap-2",children:[se.map(X=>e.jsx("div",{className:"text-center text-gray-400 text-sm font-medium py-2",children:X},X)),U.map((X,D)=>e.jsx("button",{onClick:()=>X&&N(X),disabled:!X,className:`aspect-square rounded-xl flex items-center justify-center text-sm font-medium transition-all ${X?b(X)&&c&&d?"bg-gradient-to-br from-[#A88BFF] to-[#8B6FE8] text-white":b(X)?"bg-[#A88BFF] text-white":A(X)?"bg-[#A88BFF]/30 text-white":"bg-[#1E1E2A] text-gray-400 hover:bg-[#A88BFF]/20 hover:text-white":"invisible"}`,children:X},D))]})]})]}),f.length>0&&e.jsxs("div",{className:"bg-[#2A2A3A] rounded-2xl p-6 border border-gray-700 mb-6",children:[e.jsx("h3",{className:"text-white text-lg font-semibold mb-4",children:"Upcoming Leaves"}),e.jsx("div",{className:"space-y-3",children:f.map((X,D)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-[#1E1E2A] rounded-xl",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-white font-medium",children:X.leaveType}),e.jsxs("p",{className:"text-gray-400 text-sm",children:[new Date(X.startDate).toLocaleDateString("en-US",{month:"short",day:"numeric"})," -",new Date(X.endDate).toLocaleDateString("en-US",{month:"short",day:"numeric"})]})]}),e.jsxs("span",{className:"text-[#A88BFF] text-sm font-medium",children:[X.numberOfDays," ",X.numberOfDays===1?"day":"days"]})]},D))})]}),e.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-[#2A2A3A] border-t border-gray-700 p-4",children:e.jsxs("div",{className:"max-w-7xl mx-auto flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-400 text-sm",children:"Leave request is for"}),e.jsxs("p",{className:"text-white text-lg font-bold",children:[C()," ",C()===1?"Day":"Days"]})]}),e.jsx("button",{onClick:()=>a(2),disabled:!c||!d,className:`px-8 py-3 rounded-2xl font-semibold transition-all ${c&&d?"bg-gradient-to-r from-[#A88BFF] to-[#8B6FE8] text-white hover:shadow-lg":"bg-gray-700 text-gray-500 cursor-not-allowed"}`,children:"NEXT"})]})})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"bg-[#2A2A3A] rounded-2xl p-6 border border-gray-700 mb-24",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-sm mb-2 block",children:"Leave Type *"}),e.jsxs("select",{value:h.leaveType,onChange:X=>p({...h,leaveType:X.target.value}),className:"w-full bg-[#1E1E2A] text-white px-4 py-3 rounded-xl border border-gray-700 focus:border-[#A88BFF] focus:outline-none",children:[e.jsx("option",{value:"",children:"Select leave type"}),i.map(X=>e.jsx("option",{value:X,children:X},X))]})]}),e.jsx("div",{className:"bg-[#1E1E2A] rounded-xl p-4 border border-gray-700",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-400 text-sm",children:"Duration"}),e.jsxs("p",{className:"text-white font-semibold",children:[c==null?void 0:c.toLocaleDateString("en-US",{month:"short",day:"numeric"})," -",d==null?void 0:d.toLocaleDateString("en-US",{month:"short",day:"numeric"})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-[#A88BFF] text-2xl font-bold",children:C()}),e.jsx("p",{className:"text-gray-400 text-sm",children:"days"})]})]})}),e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-sm mb-2 block",children:"Note to Approver"}),e.jsx("textarea",{value:h.reason,onChange:X=>p({...h,reason:X.target.value}),placeholder:"Add a reason for your leave...",rows:4,className:"w-full bg-[#1E1E2A] text-white px-4 py-3 rounded-xl border border-gray-700 focus:border-[#A88BFF] focus:outline-none resize-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-sm mb-2 block",children:"Notify your teammates"}),e.jsxs("button",{className:"w-full bg-[#1E1E2A] text-gray-400 px-4 py-3 rounded-xl border border-gray-700 hover:border-[#A88BFF] transition-colors flex items-center justify-center space-x-2",children:[e.jsx(qe,{className:"w-5 h-5"}),e.jsx("span",{children:"Add teammates to notify"})]})]})]})}),e.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-[#2A2A3A] border-t border-gray-700 p-4",children:e.jsx("div",{className:"max-w-7xl mx-auto",children:e.jsx("button",{onClick:k,disabled:r||!h.leaveType,className:`w-full py-4 rounded-2xl font-semibold transition-all ${r||!h.leaveType?"bg-gray-700 text-gray-500 cursor-not-allowed":"bg-gradient-to-r from-[#A88BFF] to-[#8B6FE8] text-white hover:shadow-lg"}`,children:r?"Submitting...":"Request Leave"})})})]})}),e.jsx(qt,{})]})},H3=()=>{const t=Je(),[s,a]=y.useState("time"),r=[{id:"time",label:"Time",icon:Be},{id:"finances",label:"Finances",icon:ot},{id:"performance",label:"Performance",icon:_a},{id:"documents",label:"Documents",icon:st}],n=[{title:"Raise Request",subtitle:"WFH, On Duty, Partial Day",icon:st,action:"/employee/attendance/request"},{title:"Logs & Shifts",subtitle:"View attendance logs",icon:Be,action:"/employee/attendance/logs"},{title:"Requests History",subtitle:"View past requests",icon:Oe,action:"/employee/attendance/history"},{title:"Leave",subtitle:"Apply and manage leaves",icon:Oe,action:"/employee/leave/balance"},{title:"Upcoming Holidays",subtitle:"View holiday calendar",icon:Oe,action:"/employee/attendance/holidays"}];return e.jsxs("div",{className:"min-h-screen bg-[#1E1E2A] p-4 md:p-6 pb-24 md:pb-6",children:[e.jsx("div",{className:"sticky top-0 z-10 bg-[#1E1E2A] border-b border-gray-800 px-4 py-4",children:e.jsx("div",{className:"max-w-7xl mx-auto flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("button",{onClick:()=>t("/employee/home"),className:"text-gray-400 hover:text-white transition-colors",children:e.jsx(xt,{className:"w-6 h-6"})}),e.jsx("h1",{className:"text-white text-xl font-bold",children:"Attendance & More"})]})})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-6",children:[e.jsx("div",{className:"flex overflow-x-auto space-x-2 mb-6 pb-2 scrollbar-hide",children:r.map(i=>{const l=i.icon;return e.jsxs("button",{onClick:()=>a(i.id),className:`flex items-center space-x-2 px-6 py-3 rounded-xl font-semibold whitespace-nowrap transition-all ${s===i.id?"bg-[#A88BFF] text-white":"bg-[#2A2A3A] text-gray-400 hover:text-white border border-gray-700"}`,children:[e.jsx(l,{className:"w-5 h-5"}),e.jsx("span",{children:i.label})]},i.id)})}),s==="time"&&e.jsx("div",{className:"space-y-4",children:n.map((i,l)=>e.jsxs("button",{onClick:()=>t(i.action),className:"w-full bg-[#2A2A3A] rounded-2xl p-6 border border-gray-700 hover:border-[#A88BFF] transition-all flex items-center justify-between group",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl bg-[#A88BFF]/20 flex items-center justify-center group-hover:bg-[#A88BFF] transition-colors",children:e.jsx(i.icon,{className:"w-6 h-6 text-[#A88BFF] group-hover:text-white transition-colors"})}),e.jsxs("div",{className:"text-left",children:[e.jsx("h3",{className:"text-white font-semibold text-lg",children:i.title}),e.jsx("p",{className:"text-gray-400 text-sm",children:i.subtitle})]})]}),e.jsx(Nn,{className:"w-6 h-6 text-gray-400 group-hover:text-[#A88BFF] transition-colors"})]},l))}),s==="finances"&&e.jsxs("div",{className:"bg-[#2A2A3A] rounded-2xl p-12 border border-gray-700 text-center",children:[e.jsx("div",{className:"w-20 h-20 rounded-full bg-[#A88BFF]/20 flex items-center justify-center mx-auto mb-6",children:e.jsx(ot,{className:"w-10 h-10 text-[#A88BFF]"})}),e.jsx("h3",{className:"text-white text-xl font-bold mb-2",children:"Finances are not configured"}),e.jsx("p",{className:"text-gray-400",children:"Your salary and expenses have not been configured yet."})]}),s==="performance"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-[#2A2A3A] rounded-2xl p-6 border border-gray-700 hover:border-[#A88BFF] transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-4 mb-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl bg-[#A88BFF]/20 flex items-center justify-center",children:e.jsx(_a,{className:"w-6 h-6 text-[#A88BFF]"})}),e.jsx("h3",{className:"text-white text-lg font-semibold",children:"Personal Feedback"})]}),e.jsx("p",{className:"text-gray-400 text-sm",children:"No feedback available at the moment"})]}),e.jsxs("div",{className:"bg-[#2A2A3A] rounded-2xl p-6 border border-gray-700 hover:border-[#A88BFF] transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-4 mb-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl bg-[#A88BFF]/20 flex items-center justify-center",children:e.jsx(_a,{className:"w-6 h-6 text-[#A88BFF]"})}),e.jsx("h3",{className:"text-white text-lg font-semibold",children:"Praise"})]}),e.jsx("p",{className:"text-gray-400 text-sm",children:"No praise received yet"})]})]}),s==="documents"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-[#2A2A3A] rounded-2xl p-6 border border-gray-700 hover:border-[#A88BFF] transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-4 mb-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl bg-[#A88BFF]/20 flex items-center justify-center",children:e.jsx(st,{className:"w-6 h-6 text-[#A88BFF]"})}),e.jsx("h3",{className:"text-white text-lg font-semibold",children:"Org Documents"})]}),e.jsx("p",{className:"text-gray-400 text-sm",children:"No organization documents available"})]}),e.jsxs("div",{className:"bg-[#2A2A3A] rounded-2xl p-6 border border-gray-700 hover:border-[#A88BFF] transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-4 mb-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl bg-[#A88BFF]/20 flex items-center justify-center",children:e.jsx(st,{className:"w-6 h-6 text-[#A88BFF]"})}),e.jsx("h3",{className:"text-white text-lg font-semibold",children:"My Documents"})]}),e.jsx("p",{className:"text-gray-400 text-sm",children:"No personal documents uploaded"})]})]})]}),e.jsx(qt,{})]})},Fc=[{id:"attendance-wfh",label:"Work From Home"},{id:"attendance-on-duty",label:"On Duty"},{id:"attendance-partial-day",label:"Partial Day"},{id:"attendance-regularization",label:"Regularize Attendance"}],q3=()=>{const t=Je(),[s,a]=y.useState({requestType:Fc[0].id,date:"",fromTime:"",toTime:"",location:"",reason:""}),[r,n]=y.useState(!1),i=c=>{const{name:o,value:d}=c.target;a(x=>({...x,[o]:d}))},l=async c=>{var o,d;if(c.preventDefault(),!s.date||!s.reason){_.error("Please fill in all required fields");return}n(!0);try{const x=Fc.find(f=>f.id===s.requestType),u=`${(x==null?void 0:x.label)||"Attendance Request"} - ${s.date}`,m=[s.reason,`Date: ${s.date}`,s.fromTime||s.toTime?`Time: ${s.fromTime||"--"} to ${s.toTime||"--"}`:null,s.location?`Location: ${s.location}`:null].filter(Boolean);await Vf({requestType:s.requestType,priority:"medium",subject:u,description:m.join(`
`),metadata:{category:"attendance",date:s.date,fromTime:s.fromTime||null,toTime:s.toTime||null,location:s.location||null}}),_.success("Attendance request submitted"),t("/employee/requests")}catch(x){console.error("Attendance request submission failed:",x),_.error(((d=(o=x.response)==null?void 0:o.data)==null?void 0:d.message)||"Failed to submit request. Please try again.")}finally{n(!1)}};return e.jsxs("div",{className:"min-h-screen bg-[#1E1E2A] pb-24 md:pb-6",children:[e.jsx("div",{className:"sticky top-0 z-10 bg-[#1E1E2A] border-b border-gray-800 px-4 py-4",children:e.jsxs("div",{className:"max-w-3xl mx-auto flex items-center gap-4",children:[e.jsx("button",{className:"text-gray-400 hover:text-white transition-colors",onClick:()=>t(-1),children:e.jsx(xt,{className:"w-6 h-6"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-white text-xl font-bold",children:"Raise Attendance Request"}),e.jsx("p",{className:"text-gray-400 text-sm",children:"WFH, On Duty, Partial Day & more"})]})]})}),e.jsxs("div",{className:"max-w-3xl mx-auto px-4 py-6 space-y-6",children:[e.jsx("div",{className:"flex gap-3 flex-wrap",children:Fc.map(c=>e.jsx("button",{onClick:()=>a(o=>({...o,requestType:c.id})),className:`px-4 py-2 rounded-xl text-sm font-medium transition-colors border ${s.requestType===c.id?"bg-[#A88BFF] text-white border-transparent":"bg-[#2A2A3A] text-gray-300 border-gray-700 hover:border-[#A88BFF]"}`,children:c.label},c.id))}),e.jsxs("form",{onSubmit:l,className:"bg-[#2A2A3A] border border-gray-700 rounded-2xl p-6 space-y-5",children:[e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("label",{className:"space-y-2 text-sm text-gray-300",children:[e.jsxs("span",{className:"flex items-center gap-2 text-gray-400",children:[e.jsx(Oe,{className:"w-4 h-4"})," Date *"]}),e.jsx("input",{type:"date",name:"date",value:s.date,onChange:i,className:"w-full rounded-lg border border-gray-700 bg-[#1E1E2A] px-3 py-2 text-white focus:outline-none focus:border-[#A88BFF]",required:!0})]}),e.jsxs("label",{className:"space-y-2 text-sm text-gray-300",children:[e.jsxs("span",{className:"flex items-center gap-2 text-gray-400",children:[e.jsx(Ra,{className:"w-4 h-4"})," Location (optional)"]}),e.jsx("input",{type:"text",name:"location",value:s.location,onChange:i,placeholder:"e.g., Home, Client site",className:"w-full rounded-lg border border-gray-700 bg-[#1E1E2A] px-3 py-2 text-white focus:outline-none focus:border-[#A88BFF]"})]})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("label",{className:"space-y-2 text-sm text-gray-300",children:[e.jsxs("span",{className:"flex items-center gap-2 text-gray-400",children:[e.jsx(Be,{className:"w-4 h-4"})," From Time"]}),e.jsx("input",{type:"time",name:"fromTime",value:s.fromTime,onChange:i,className:"w-full rounded-lg border border-gray-700 bg-[#1E1E2A] px-3 py-2 text-white focus:outline-none focus:border-[#A88BFF]"})]}),e.jsxs("label",{className:"space-y-2 text-sm text-gray-300",children:[e.jsxs("span",{className:"flex items-center gap-2 text-gray-400",children:[e.jsx(Be,{className:"w-4 h-4"})," To Time"]}),e.jsx("input",{type:"time",name:"toTime",value:s.toTime,onChange:i,className:"w-full rounded-lg border border-gray-700 bg-[#1E1E2A] px-3 py-2 text-white focus:outline-none focus:border-[#A88BFF]"})]})]}),e.jsxs("label",{className:"space-y-2 text-sm text-gray-300",children:[e.jsx("span",{className:"text-gray-400",children:"Reason *"}),e.jsx("textarea",{name:"reason",value:s.reason,onChange:i,placeholder:"Explain the request in a few sentences",rows:4,className:"w-full rounded-lg border border-gray-700 bg-[#1E1E2A] px-3 py-2 text-white focus:outline-none focus:border-[#A88BFF] resize-none",required:!0})]}),e.jsx("div",{className:"flex justify-end",children:e.jsxs("button",{type:"submit",disabled:r,className:"inline-flex items-center gap-2 px-6 py-3 rounded-xl bg-[#A88BFF] text-white font-semibold shadow-lg hover:shadow-xl transition disabled:opacity-50",children:[e.jsx(Gn,{className:"w-5 h-5"}),r?"Submitting...":"Submit Request"]})})]})]}),e.jsx(qt,{})]})},W3=()=>{const t=Je(),[s,a]=y.useState([]),[r,n]=y.useState(!0);return y.useEffect(()=>{(async()=>{var l;try{n(!0);const c=await J.get("/employee/attendance/history").catch(()=>null);(l=c==null?void 0:c.data)!=null&&l.data?a(c.data.data.slice(0,20)):a([])}catch(c){console.error("Error fetching attendance logs:",c),_.error("Unable to load attendance logs right now.")}finally{n(!1)}})()},[]),e.jsxs("div",{className:"min-h-screen bg-[#1E1E2A] pb-24 md:pb-6",children:[e.jsx("div",{className:"sticky top-0 z-10 bg-[#1E1E2A] border-b border-gray-800 px-4 py-4",children:e.jsxs("div",{className:"max-w-5xl mx-auto flex items-center gap-4",children:[e.jsx("button",{className:"text-gray-400 hover:text-white transition-colors",onClick:()=>t(-1),children:e.jsx(xt,{className:"w-6 h-6"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-white text-xl font-bold",children:"Attendance Logs"}),e.jsx("p",{className:"text-gray-400 text-sm",children:"Recent check-ins, check-outs & shift details"})]})]})}),e.jsx("div",{className:"max-w-5xl mx-auto px-4 py-6 space-y-4",children:r?e.jsxs("div",{className:"flex items-center justify-center py-20 text-gray-400",children:[e.jsx(Qt,{className:"w-6 h-6 animate-spin mr-2"})," Loading logsâ€¦"]}):s.length===0?e.jsx("div",{className:"bg-[#2A2A3A] border border-gray-700 rounded-2xl p-12 text-center text-gray-400",children:"No attendance entries found. Once your attendance is recorded, you will see it here."}):e.jsx("div",{className:"space-y-4",children:s.map(i=>e.jsxs("div",{className:"bg-[#2A2A3A] border border-gray-700 rounded-2xl p-5 flex flex-col gap-3 md:flex-row md:items-center md:justify-between",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 text-white text-lg font-semibold",children:[e.jsx(Oe,{className:"w-5 h-5 text-[#A88BFF]"}),new Date(i.date||i.startDate).toLocaleDateString("en-US",{weekday:"long",month:"short",day:"numeric",year:"numeric"})]}),e.jsxs("div",{className:"mt-2 text-sm text-gray-400",children:[e.jsxs("p",{className:"flex items-center gap-2",children:[e.jsx(Be,{className:"w-4 h-4"})," Check-in: ",i.checkInTime||i.checkIn||"--"," â€¢ Check-out: ",i.checkOutTime||i.checkOut||"--"]}),i.location&&e.jsxs("p",{className:"flex items-center gap-2",children:[e.jsx(Ra,{className:"w-4 h-4"})," ",i.location]}),i.status&&e.jsxs("p",{className:"text-xs text-gray-500 uppercase",children:["Status: ",i.status]})]})]}),i.totalHours&&e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-white text-lg font-semibold",children:i.totalHours}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Total hours"})]})]},i._id||i.id))})}),e.jsx(qt,{})]})},G3=()=>{const t=Je(),[s,a]=y.useState([]),[r,n]=y.useState(!0);return y.useEffect(()=>{(async()=>{var l;try{n(!0);const c=await J.get("/employee/leaves?status=pending").catch(()=>null);if((l=c==null?void 0:c.data)!=null&&l.data){const o=c.data.data.map(d=>({id:d._id,title:d.leaveType||"Attendance Request",submittedOn:d.appliedOn||d.createdAt,status:d.status||"submitted",days:d.numberOfDays||0,notes:d.reason||"No notes provided"}));a(o.slice(0,10))}else a([])}catch(c){console.error("Error loading request history:",c),_.error("Unable to load request history right now.")}finally{n(!1)}})()},[]),e.jsxs("div",{className:"min-h-screen bg-[#1E1E2A] pb-24 md:pb-6",children:[e.jsx("div",{className:"sticky top-0 z-10 bg-[#1E1E2A] border-b border-gray-800 px-4 py-4",children:e.jsxs("div",{className:"max-w-5xl mx-auto flex items-center gap-4",children:[e.jsx("button",{className:"text-gray-400 hover:text-white transition-colors",onClick:()=>t(-1),children:e.jsx(xt,{className:"w-6 h-6"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-white text-xl font-bold",children:"Attendance Requests History"}),e.jsx("p",{className:"text-gray-400 text-sm",children:"Track attendance-related submissions and their status"})]})]})}),e.jsx("div",{className:"max-w-5xl mx-auto px-4 py-6 space-y-4",children:r?e.jsxs("div",{className:"flex items-center justify-center py-20 text-gray-400",children:[e.jsx(Qt,{className:"w-6 h-6 animate-spin mr-2"})," Loading historyâ€¦"]}):s.length===0?e.jsx("div",{className:"bg-[#2A2A3A] border border-gray-700 rounded-2xl p-12 text-center text-gray-400",children:"You havenâ€™t submitted any attendance-related requests yet."}):e.jsx("div",{className:"space-y-4",children:s.map(i=>e.jsxs("div",{className:"bg-[#2A2A3A] border border-gray-700 rounded-2xl p-5 flex flex-col md:flex-row md:items-center md:justify-between gap-3",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl bg-[#A88BFF]/20 flex items-center justify-center",children:e.jsx(Zo,{className:"w-6 h-6 text-[#A88BFF]"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-white font-semibold text-lg",children:i.title}),e.jsxs("p",{className:"text-gray-400 text-sm",children:["Submitted on ",i.submittedOn?new Date(i.submittedOn).toLocaleString():"--"]}),e.jsx("p",{className:"text-gray-500 text-sm mt-1",children:i.notes})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-white font-semibold capitalize",children:i.status}),i.days>0&&e.jsxs("p",{className:"text-gray-500 text-sm",children:["Days: ",i.days]})]})]},i.id))})}),e.jsx(qt,{})]})},Y3=()=>{const t=Je(),[s,a]=y.useState([]),[r,n]=y.useState(!0);return y.useEffect(()=>{(async()=>{try{n(!0);const l=await Pd(),c=(l==null?void 0:l.data)||{};a(c.upcomingHolidays||[])}catch(l){console.error("Error fetching holidays:",l),_.error("Unable to load upcoming holidays right now."),a([])}finally{n(!1)}})()},[]),e.jsxs("div",{className:"min-h-screen bg-[#1E1E2A] pb-24 md:pb-6",children:[e.jsx("div",{className:"sticky top-0 z-10 bg-[#1E1E2A] border-b border-gray-800 px-4 py-4",children:e.jsxs("div",{className:"max-w-5xl mx-auto flex items-center gap-4",children:[e.jsx("button",{className:"text-gray-400 hover:text-white transition-colors",onClick:()=>t(-1),children:e.jsx(xt,{className:"w-6 h-6"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-white text-xl font-bold",children:"Upcoming Holidays"}),e.jsx("p",{className:"text-gray-400 text-sm",children:"Stay updated with the next company-wide breaks"})]})]})}),e.jsx("div",{className:"max-w-5xl mx-auto px-4 py-6 space-y-4",children:r?e.jsxs("div",{className:"flex items-center justify-center py-20 text-gray-400",children:[e.jsx(Qt,{className:"w-6 h-6 animate-spin mr-2"})," Loading holidaysâ€¦"]}):s.length===0?e.jsx("div",{className:"bg-[#2A2A3A] border border-gray-700 rounded-2xl p-12 text-center text-gray-400",children:"No upcoming holidays found. Check back later for updates."}):e.jsx("div",{className:"space-y-4",children:s.map(i=>e.jsxs("div",{className:"bg-[#2A2A3A] border border-gray-700 rounded-2xl p-5 flex items-center gap-4",children:[e.jsxs("div",{className:"w-16 h-16 rounded-xl bg-[#A88BFF]/20 flex flex-col items-center justify-center",children:[e.jsx("span",{className:"text-white text-xl font-bold",children:new Date(i.date).getDate()}),e.jsx("span",{className:"text-xs text-gray-400 uppercase",children:new Date(i.date).toLocaleDateString("en-US",{month:"short"})})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-white font-semibold text-lg",children:i.name}),e.jsx("p",{className:"text-gray-400 text-sm",children:new Date(i.date).toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric",year:"numeric"})}),i.description&&e.jsx("p",{className:"text-gray-500 text-sm mt-1",children:i.description})]}),e.jsx("div",{className:"px-3 py-1 rounded-full text-xs font-medium bg-[#A88BFF]/20 text-[#A88BFF] capitalize",children:i.type||"public"})]},i._id||i.name))})}),e.jsx(qt,{})]})},Z3=()=>{var j;const t=Je(),[s,a]=y.useState(!0),[r,n]=y.useState(""),[i,l]=y.useState("all"),[c,o]=y.useState(null);y.useEffect(()=>{d()},[]);const d=async()=>{var v,w;try{a(!0);const b=await Pd();o(b.data)}catch(b){console.error("Error fetching team data:",b),_.error(((w=(v=b.response)==null?void 0:v.data)==null?void 0:w.message)||"Failed to load team data")}finally{a(!1)}},x=v=>new Date(v).toLocaleDateString("en-US",{month:"short",day:"numeric"}),u=(v,w)=>`${x(v)} â€“ ${x(w)}`,m=((j=c==null?void 0:c.teamMembers)==null?void 0:j.filter(v=>v.name.toLowerCase().includes(r.toLowerCase())||v.designation.toLowerCase().includes(r.toLowerCase())))||[];if(s)return e.jsx("div",{className:"flex items-center justify-center min-h-screen bg-[#1E1E2A]",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 border-4 border-[#A88BFF] border-t-transparent rounded-full animate-spin mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-400",children:"Loading team..."})]})});const{employee:f,teamMembers:g,manager:h,offThisWeek:p}=c||{};return e.jsxs("div",{className:"min-h-screen bg-[#1E1E2A] p-4 md:p-6 pb-24 md:pb-6",children:[e.jsx("div",{className:"sticky top-0 z-10 bg-[#1E1E2A] border-b border-gray-800 px-4 py-4",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"flex items-center space-x-4 mb-4",children:[e.jsx("button",{onClick:()=>t("/employee/home"),className:"text-gray-400 hover:text-white transition-colors",children:e.jsx(xt,{className:"w-6 h-6"})}),e.jsx("h1",{className:"text-white text-xl font-bold",children:"My Team"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(yt,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),e.jsx("input",{type:"text",placeholder:"Search team members...",value:r,onChange:v=>n(v.target.value),className:"w-full bg-[#2A2A3A] text-white pl-12 pr-4 py-3 rounded-2xl border border-gray-700 focus:border-[#A88BFF] focus:outline-none transition-colors"})]})]})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-6 space-y-6",children:[e.jsx("div",{className:"bg-gradient-to-br from-[#A88BFF] to-[#8B6FE8] rounded-2xl p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-white/80 text-sm mb-1",children:"Department"}),e.jsx("h2",{className:"text-2xl font-bold",children:(f==null?void 0:f.department)||"Technology"})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-white/20 flex items-center justify-center backdrop-blur-sm",children:e.jsx(Ue,{className:"w-8 h-8 text-white"})}),e.jsxs("p",{className:"text-sm mt-2",children:[(g==null?void 0:g.length)||0," people"]})]})]})}),p&&p.length>0&&e.jsxs("div",{className:"bg-[#2A2A3A] rounded-2xl p-6 border border-gray-700",children:[e.jsx("h3",{className:"text-white text-lg font-semibold mb-4",children:"Off This Week"}),e.jsx("div",{className:"flex overflow-x-auto space-x-4 pb-2 scrollbar-hide",children:p.map((v,w)=>e.jsxs("div",{className:"flex-shrink-0 text-center",children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-gradient-to-br from-[#A88BFF] to-[#8B6FE8] flex items-center justify-center mb-2",children:v.employee.profileImage?e.jsx("img",{src:v.employee.profileImage,alt:v.employee.name,className:"w-full h-full rounded-full object-cover"}):e.jsx("span",{className:"text-white text-xl font-bold",children:v.employee.name.charAt(0)})}),e.jsx("p",{className:"text-white text-xs font-medium w-20 truncate",children:v.employee.name.split(" ")[0]}),e.jsx("p",{className:"text-gray-400 text-xs",children:u(v.startDate,v.endDate)})]},w))})]}),e.jsxs("div",{className:"flex items-center space-x-2 mb-6 overflow-x-auto scrollbar-hide",children:[e.jsx("button",{onClick:()=>l("all"),className:`px-6 py-3 rounded-xl font-semibold whitespace-nowrap transition-all ${i==="all"?"bg-[#A88BFF] text-white":"bg-[#2A2A3A] text-gray-400 hover:text-white border border-gray-700"}`,children:"All"}),e.jsx("button",{onClick:()=>l("late"),className:`px-6 py-3 rounded-xl font-semibold whitespace-nowrap transition-all ${i==="late"?"bg-[#A88BFF] text-white":"bg-[#2A2A3A] text-gray-400 hover:text-white border border-gray-700"}`,children:"Late arrivals"}),e.jsx("button",{onClick:()=>l("ontime"),className:`px-6 py-3 rounded-xl font-semibold whitespace-nowrap transition-all ${i==="ontime"?"bg-[#A88BFF] text-white":"bg-[#2A2A3A] text-gray-400 hover:text-white border border-gray-700"}`,children:"On Time"})]}),h&&e.jsxs("div",{className:"bg-[#2A2A3A] rounded-2xl p-6 border border-gray-700",children:[e.jsx("h3",{className:"text-white text-lg font-semibold mb-4",children:"Manager"}),e.jsxs("div",{className:"flex items-center space-x-4 p-4 bg-[#1E1E2A] rounded-xl",children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-gradient-to-br from-[#A88BFF] to-[#8B6FE8] flex items-center justify-center flex-shrink-0",children:h.profileImage?e.jsx("img",{src:h.profileImage,alt:h.name,className:"w-full h-full rounded-full object-cover"}):e.jsx("span",{className:"text-white text-2xl font-bold",children:h.name.charAt(0)})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"text-white font-semibold text-lg",children:h.name}),e.jsx("p",{className:"text-gray-400 text-sm",children:h.designation})]})]})]}),e.jsxs("div",{className:"bg-[#2A2A3A] rounded-2xl p-6 border border-gray-700",children:[e.jsxs("h3",{className:"text-white text-lg font-semibold mb-4",children:["Team Members (",m.length,")"]}),e.jsx("div",{className:"space-y-3",children:m.length>0?m.map((v,w)=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-[#1E1E2A] rounded-xl hover:border hover:border-[#A88BFF] transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-4 flex-1",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-[#A88BFF] to-[#8B6FE8] flex items-center justify-center flex-shrink-0",children:v.profileImage?e.jsx("img",{src:v.profileImage,alt:v.name,className:"w-full h-full rounded-full object-cover"}):e.jsx("span",{className:"text-white text-lg font-bold",children:v.name.charAt(0)})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h4",{className:"text-white font-semibold truncate",children:v.name}),e.jsx("p",{className:"text-gray-400 text-sm truncate",children:v.designation}),e.jsxs("div",{className:"flex items-center space-x-4 mt-1",children:[v.email&&e.jsxs("a",{href:`mailto:${v.email}`,className:"flex items-center space-x-1 text-gray-500 hover:text-[#A88BFF] text-xs transition-colors",children:[e.jsx(wt,{className:"w-3 h-3"}),e.jsx("span",{className:"truncate max-w-[150px]",children:v.email})]}),v.phone&&e.jsxs("a",{href:`tel:${v.phone}`,className:"flex items-center space-x-1 text-gray-500 hover:text-[#A88BFF] text-xs transition-colors",children:[e.jsx(Bs,{className:"w-3 h-3"}),e.jsx("span",{children:v.phone})]})]})]})]}),e.jsxs("div",{className:"flex-shrink-0 ml-4",children:[i==="ontime"&&e.jsxs("div",{className:"flex items-center space-x-1 text-green-400",children:[e.jsx(Te,{className:"w-5 h-5"}),e.jsx("span",{className:"text-xs font-medium",children:"On Time"})]}),i==="late"&&e.jsxs("div",{className:"flex items-center space-x-1 text-yellow-400",children:[e.jsx(Be,{className:"w-5 h-5"}),e.jsx("span",{className:"text-xs font-medium",children:"Late"})]})]})]},w)):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Ue,{className:"w-12 h-12 text-gray-600 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-400",children:"No team members found"})]})})]})]}),e.jsx(qt,{})]})},J3=()=>{const[t,s]=y.useState(new Date().getFullYear()),a=[{month:"November 2024",salary:"â‚¹75,000",netPay:"â‚¹68,500",date:"Nov 30, 2024",status:"paid"},{month:"October 2024",salary:"â‚¹75,000",netPay:"â‚¹68,500",date:"Oct 31, 2024",status:"paid"},{month:"September 2024",salary:"â‚¹75,000",netPay:"â‚¹68,500",date:"Sep 30, 2024",status:"paid"}],r={basic:"â‚¹45,000",hra:"â‚¹18,000",allowances:"â‚¹12,000",gross:"â‚¹75,000",deductions:"â‚¹6,500",netPay:"â‚¹68,500"};return e.jsxs("div",{className:"min-h-screen bg-[#1E1E2A] p-4 md:p-6 pb-24 md:pb-6",children:[e.jsxs("div",{className:"max-w-7xl mx-auto space-y-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-white",children:"Payslips"}),e.jsx("p",{className:"text-gray-400 mt-1",children:"View and download your salary slips"})]}),e.jsxs("select",{value:t,onChange:n=>s(parseInt(n.target.value)),className:"bg-[#2A2A3A] text-white px-4 py-2 rounded-xl border border-gray-700 focus:border-[#A88BFF] focus:outline-none",children:[e.jsx("option",{value:2024,children:"2024"}),e.jsx("option",{value:2023,children:"2023"}),e.jsx("option",{value:2022,children:"2022"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-[#2A2A3A] rounded-2xl p-6 border border-gray-700",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("p",{className:"text-gray-400 text-sm",children:"Gross Salary"}),e.jsx(gt,{className:"w-5 h-5 text-[#A88BFF]"})]}),e.jsx("h3",{className:"text-2xl font-bold text-white",children:r.gross}),e.jsx("p",{className:"text-green-400 text-sm mt-1",children:"Per month"})]}),e.jsxs("div",{className:"bg-[#2A2A3A] rounded-2xl p-6 border border-gray-700",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("p",{className:"text-gray-400 text-sm",children:"Deductions"}),e.jsx(Ks,{className:"w-5 h-5 text-red-400"})]}),e.jsx("h3",{className:"text-2xl font-bold text-white",children:r.deductions}),e.jsx("p",{className:"text-gray-400 text-sm mt-1",children:"Tax + PF"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-[#A88BFF] to-[#8B6FE8] rounded-2xl p-6 shadow-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("p",{className:"text-white/80 text-sm",children:"Net Pay"}),e.jsx(gt,{className:"w-5 h-5 text-white"})]}),e.jsx("h3",{className:"text-2xl font-bold text-white",children:r.netPay}),e.jsx("p",{className:"text-white/80 text-sm mt-1",children:"Take home"})]})]}),e.jsxs("div",{className:"bg-[#2A2A3A] rounded-2xl p-6 border border-gray-700",children:[e.jsx("h3",{className:"text-white text-lg font-semibold mb-4",children:"Salary Breakdown"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 bg-[#1E1E2A] rounded-xl",children:[e.jsx("span",{className:"text-gray-400",children:"Basic Salary"}),e.jsx("span",{className:"text-white font-medium",children:r.basic})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-[#1E1E2A] rounded-xl",children:[e.jsx("span",{className:"text-gray-400",children:"HRA"}),e.jsx("span",{className:"text-white font-medium",children:r.hra})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-[#1E1E2A] rounded-xl",children:[e.jsx("span",{className:"text-gray-400",children:"Allowances"}),e.jsx("span",{className:"text-white font-medium",children:r.allowances})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 bg-[#1E1E2A] rounded-xl",children:[e.jsx("span",{className:"text-gray-400",children:"Gross Salary"}),e.jsx("span",{className:"text-green-400 font-medium",children:r.gross})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-[#1E1E2A] rounded-xl",children:[e.jsx("span",{className:"text-gray-400",children:"Deductions"}),e.jsxs("span",{className:"text-red-400 font-medium",children:["-",r.deductions]})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gradient-to-r from-[#A88BFF]/20 to-[#8B6FE8]/20 rounded-xl border border-[#A88BFF]/30",children:[e.jsx("span",{className:"text-white font-medium",children:"Net Pay"}),e.jsx("span",{className:"text-[#A88BFF] font-bold",children:r.netPay})]})]})]})]}),e.jsxs("div",{className:"bg-[#2A2A3A] rounded-2xl p-6 border border-gray-700",children:[e.jsx("h3",{className:"text-white text-lg font-semibold mb-4",children:"Payslip History"}),e.jsx("div",{className:"space-y-3",children:a.map((n,i)=>e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between p-4 bg-[#1E1E2A] rounded-xl hover:border hover:border-[#A88BFF] transition-all cursor-pointer gap-4",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-[#A88BFF] to-[#8B6FE8] flex items-center justify-center flex-shrink-0",children:e.jsx(st,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-white font-medium",children:n.month}),e.jsx("p",{className:"text-gray-400 text-sm",children:n.date})]})]}),e.jsxs("div",{className:"flex items-center justify-between md:space-x-6",children:[e.jsxs("div",{className:"text-left md:text-right",children:[e.jsx("p",{className:"text-gray-400 text-sm",children:"Net Pay"}),e.jsx("p",{className:"text-white font-semibold",children:n.netPay})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"px-3 py-1 bg-green-500/20 text-green-400 rounded-full text-xs font-medium",children:n.status.toUpperCase()}),e.jsx("button",{className:"p-2 rounded-xl bg-[#2A2A3A] hover:bg-[#A88BFF] transition-colors",children:e.jsx(Mt,{className:"w-5 h-5 text-white"})})]})]})]},i))})]})]}),e.jsx(qt,{})]})},X3=()=>{const[t,s]=y.useState("all"),[a,r]=y.useState([]),[n,i]=y.useState(!0);y.useEffect(()=>{l()},[]);const l=async()=>{try{i(!0);const u=(await L3()).data.map(m=>{var f,g;return{id:m._id,name:m.name,projectCode:m.projectCode,client:((f=m.client)==null?void 0:f.name)||((g=m.client)==null?void 0:g.companyName)||"N/A",status:m.status,progress:c(m.status),team:m.teamSize||0,deadline:m.endDate?new Date(m.endDate).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"Ongoing",role:m.myRole,description:m.description,startDate:m.startDate,projectManager:m.projectManager}});r(u)}catch(x){console.error("Error fetching projects:",x),_.error("Failed to load projects")}finally{i(!1)}},c=x=>{switch(x){case"completed":return 100;case"active":return 60;case"on-hold":return 40;case"planning":return 20;default:return 0}},o=[{id:"all",label:"All Projects"},{id:"active",label:"Active"},{id:"completed",label:"Completed"}],d=t==="all"?a:a.filter(x=>x.status===t);return n?e.jsx("div",{className:"min-h-screen bg-[#1E1E2A] flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 border-4 border-[#A88BFF] border-t-transparent rounded-full animate-spin mx-auto"}),e.jsx("p",{className:"text-gray-400 mt-4",children:"Loading projects..."})]})}):e.jsxs("div",{className:"min-h-screen bg-[#1E1E2A] p-4 md:p-6 pb-24 md:pb-6",children:[e.jsxs("div",{className:"max-w-7xl mx-auto space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-white",children:"My Projects"}),e.jsx("p",{className:"text-gray-400 mt-1",children:"Track your project assignments and progress"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-[#2A2A3A] rounded-2xl p-6 border border-gray-700",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("p",{className:"text-gray-400 text-sm",children:"Total Projects"}),e.jsx(ot,{className:"w-5 h-5 text-[#A88BFF]"})]}),e.jsx("h3",{className:"text-3xl font-bold text-white",children:a.length})]}),e.jsxs("div",{className:"bg-[#2A2A3A] rounded-2xl p-6 border border-gray-700",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("p",{className:"text-gray-400 text-sm",children:"Active"}),e.jsx(mt,{className:"w-5 h-5 text-blue-400"})]}),e.jsx("h3",{className:"text-3xl font-bold text-white",children:a.filter(x=>x.status==="active").length})]}),e.jsxs("div",{className:"bg-[#2A2A3A] rounded-2xl p-6 border border-gray-700",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("p",{className:"text-gray-400 text-sm",children:"Completed"}),e.jsx(Te,{className:"w-5 h-5 text-green-400"})]}),e.jsx("h3",{className:"text-3xl font-bold text-white",children:a.filter(x=>x.status==="completed").length})]})]}),e.jsx("div",{className:"flex items-center space-x-2 overflow-x-auto pb-2 scrollbar-hide",children:o.map(x=>e.jsx("button",{onClick:()=>s(x.id),className:`px-4 py-2 rounded-xl font-medium transition-all ${t===x.id?"bg-gradient-to-r from-[#A88BFF] to-[#8B6FE8] text-white shadow-lg":"bg-[#2A2A3A] text-gray-400 hover:text-white border border-gray-700"}`,children:x.label},x.id))}),e.jsx("div",{className:"space-y-4",children:d.map(x=>e.jsxs("div",{className:"bg-[#2A2A3A] rounded-2xl p-6 border border-gray-700 hover:border-[#A88BFF] transition-all",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-[#A88BFF] to-[#8B6FE8] flex items-center justify-center flex-shrink-0",children:e.jsx(ot,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-white text-lg font-semibold",children:x.name}),e.jsx("p",{className:"text-gray-400 text-sm mt-1",children:x.client}),e.jsx("p",{className:"text-[#A88BFF] text-sm mt-1",children:x.role})]})]}),e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${x.status==="active"?"bg-blue-500/20 text-blue-400":"bg-green-500/20 text-green-400"}`,children:x.status.toUpperCase()})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-gray-400 text-sm",children:"Progress"}),e.jsxs("span",{className:"text-white font-medium",children:[x.progress,"%"]})]}),e.jsx("div",{className:"w-full bg-gray-700 rounded-full h-2",children:e.jsx("div",{className:"bg-gradient-to-r from-[#A88BFF] to-[#8B6FE8] h-2 rounded-full transition-all",style:{width:`${x.progress}%`}})})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ue,{className:"w-4 h-4 text-gray-400"}),e.jsxs("span",{className:"text-gray-400 text-sm",children:[x.team," members"]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Oe,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{className:"text-gray-400 text-sm",children:x.deadline})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{className:"text-gray-400 text-sm",children:x.status==="completed"?"Completed":"In Progress"})]})]})]},x.id))}),d.length===0&&e.jsxs("div",{className:"bg-[#2A2A3A] rounded-2xl p-12 border border-gray-700 text-center",children:[e.jsx(ot,{className:"w-16 h-16 text-gray-600 mx-auto mb-4"}),e.jsx("h3",{className:"text-white text-lg font-semibold mb-2",children:"No projects found"}),e.jsx("p",{className:"text-gray-400",children:"No projects match the selected filter"})]})]}),e.jsx(qt,{})]})},K3=()=>{const[t,s]=y.useState([]),[a,r]=y.useState(!0),[n,i]=y.useState(!1),[l,c]=y.useState(null),[o,d]=y.useState({relationship:"",name:"",dateOfBirth:"",gender:"",aadhaarNumber:"",panNumber:"",isNominee:!1,nomineeFor:[],nomineePercentage:100,contactNumber:"",address:{street:"",city:"",state:"",zipCode:"",country:"India"}});y.useEffect(()=>{x()},[]);const x=async()=>{var h,p;try{r(!0);const j=await J.get("/employee/profile/family");s(j.data.data)}catch(j){_.error(((p=(h=j.response)==null?void 0:h.data)==null?void 0:p.message)||"Failed to fetch family details")}finally{r(!1)}},u=h=>{const{name:p,value:j,type:v,checked:w}=h.target;if(p.startsWith("address.")){const b=p.split(".")[1];d(A=>({...A,address:{...A.address,[b]:j}}))}else if(p==="isNominee")d(b=>({...b,[p]:w}));else if(p==="nomineeFor"){const b=Array.from(h.target.selectedOptions,A=>A.value);d(A=>({...A,[p]:b}))}else d(b=>({...b,[p]:j}))},m=async h=>{var p,j;h.preventDefault();try{l?(await J.put(`/employee/profile/family/${l._id}`,o),_.success("Family detail updated successfully")):(await J.post("/employee/profile/family",o),_.success("Family detail added successfully")),i(!1),c(null),d({relationship:"",name:"",dateOfBirth:"",gender:"",aadhaarNumber:"",panNumber:"",isNominee:!1,nomineeFor:[],nomineePercentage:100,contactNumber:"",address:{street:"",city:"",state:"",zipCode:"",country:"India"}}),x()}catch(v){_.error(((j=(p=v.response)==null?void 0:p.data)==null?void 0:j.message)||"Failed to save family detail")}},f=h=>{c(h),d({relationship:h.relationship||"",name:h.name||"",dateOfBirth:h.dateOfBirth?new Date(h.dateOfBirth).toISOString().split("T")[0]:"",gender:h.gender||"",aadhaarNumber:h.aadhaarNumber||"",panNumber:h.panNumber||"",isNominee:h.isNominee||!1,nomineeFor:h.nomineeFor||[],nomineePercentage:h.nomineePercentage||100,contactNumber:h.contactNumber||"",address:h.address||{street:"",city:"",state:"",zipCode:"",country:"India"}}),i(!0)},g=async h=>{var p,j;if(window.confirm("Are you sure you want to delete this family detail?"))try{await J.delete(`/employee/profile/family/${h}`),_.success("Family detail deleted successfully"),x()}catch(v){_.error(((j=(p=v.response)==null?void 0:p.data)==null?void 0:j.message)||"Failed to delete family detail")}};return a?e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("div",{className:"text-white",children:"Loading..."})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("h2",{className:"text-xl font-semibold text-white flex items-center gap-2",children:[e.jsx(Ue,{size:20})," Family Details"]}),e.jsxs("button",{onClick:()=>{c(null),d({relationship:"",name:"",dateOfBirth:"",gender:"",aadhaarNumber:"",panNumber:"",isNominee:!1,nomineeFor:[],nomineePercentage:100,contactNumber:"",address:{street:"",city:"",state:"",zipCode:"",country:"India"}}),i(!0)},className:"btn-primary",children:[e.jsx(qe,{size:20})," Add Family Member"]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:t.map(h=>e.jsxs("div",{className:"bg-dark-700 p-4 rounded-lg",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-white",children:h.name}),e.jsx("p",{className:"text-gray-400 text-sm capitalize",children:h.relationship})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>f(h),className:"text-primary-400 hover:text-primary-300",children:e.jsx($a,{size:18})}),e.jsx("button",{onClick:()=>g(h._id),className:"text-red-400 hover:text-red-300",children:e.jsx(kt,{size:18})})]})]}),h.isNominee&&e.jsxs("div",{className:"mt-2 p-2 bg-primary-900/20 rounded",children:[e.jsxs("p",{className:"text-primary-400 text-sm",children:["Nominee for: ",h.nomineeFor.join(", ")]}),e.jsxs("p",{className:"text-primary-400 text-sm",children:["Percentage: ",h.nomineePercentage,"%"]})]}),h.dateOfBirth&&e.jsxs("p",{className:"text-gray-400 text-sm mt-2",children:["DOB: ",new Date(h.dateOfBirth).toLocaleDateString()]})]},h._id))}),n&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-dark-700 p-6 rounded-lg shadow-xl w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-white",children:l?"Edit Family Member":"Add Family Member"}),e.jsx("button",{onClick:()=>i(!1),className:"text-gray-400 hover:text-white",children:e.jsx(Le,{size:20})})]}),e.jsxs("form",{onSubmit:m,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Relationship *"}),e.jsxs("select",{name:"relationship",value:o.relationship,onChange:u,className:"w-full px-3 py-2 bg-dark-600 border border-gray-600 rounded-md text-white",required:!0,children:[e.jsx("option",{value:"",children:"Select"}),e.jsx("option",{value:"spouse",children:"Spouse"}),e.jsx("option",{value:"son",children:"Son"}),e.jsx("option",{value:"daughter",children:"Daughter"}),e.jsx("option",{value:"father",children:"Father"}),e.jsx("option",{value:"mother",children:"Mother"}),e.jsx("option",{value:"brother",children:"Brother"}),e.jsx("option",{value:"sister",children:"Sister"}),e.jsx("option",{value:"father_in_law",children:"Father-in-law"}),e.jsx("option",{value:"mother_in_law",children:"Mother-in-law"}),e.jsx("option",{value:"other",children:"Other"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Name *"}),e.jsx("input",{type:"text",name:"name",value:o.name,onChange:u,className:"w-full px-3 py-2 bg-dark-600 border border-gray-600 rounded-md text-white",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Date of Birth *"}),e.jsx("input",{type:"date",name:"dateOfBirth",value:o.dateOfBirth,onChange:u,className:"w-full px-3 py-2 bg-dark-600 border border-gray-600 rounded-md text-white",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Gender"}),e.jsxs("select",{name:"gender",value:o.gender,onChange:u,className:"w-full px-3 py-2 bg-dark-600 border border-gray-600 rounded-md text-white",children:[e.jsx("option",{value:"",children:"Select"}),e.jsx("option",{value:"male",children:"Male"}),e.jsx("option",{value:"female",children:"Female"}),e.jsx("option",{value:"other",children:"Other"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Aadhaar Number"}),e.jsx("input",{type:"text",name:"aadhaarNumber",value:o.aadhaarNumber,onChange:u,className:"w-full px-3 py-2 bg-dark-600 border border-gray-600 rounded-md text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"PAN Number"}),e.jsx("input",{type:"text",name:"panNumber",value:o.panNumber,onChange:u,className:"w-full px-3 py-2 bg-dark-600 border border-gray-600 rounded-md text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Contact Number"}),e.jsx("input",{type:"text",name:"contactNumber",value:o.contactNumber,onChange:u,className:"w-full px-3 py-2 bg-dark-600 border border-gray-600 rounded-md text-white"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",name:"isNominee",checked:o.isNominee,onChange:u,className:"w-4 h-4"}),e.jsx("label",{className:"text-sm font-medium text-gray-300",children:"Is Nominee"})]}),o.isNominee&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Nominee For"}),e.jsxs("select",{name:"nomineeFor",multiple:!0,value:o.nomineeFor,onChange:u,className:"w-full px-3 py-2 bg-dark-600 border border-gray-600 rounded-md text-white",children:[e.jsx("option",{value:"PF",children:"PF"}),e.jsx("option",{value:"ESI",children:"ESI"}),e.jsx("option",{value:"Gratuity",children:"Gratuity"}),e.jsx("option",{value:"Insurance",children:"Insurance"}),e.jsx("option",{value:"Pension",children:"Pension"}),e.jsx("option",{value:"Other",children:"Other"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Nominee Percentage"}),e.jsx("input",{type:"number",name:"nomineePercentage",value:o.nomineePercentage,onChange:u,min:"0",max:"100",className:"w-full px-3 py-2 bg-dark-600 border border-gray-600 rounded-md text-white"})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-2",children:"Address"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Street"}),e.jsx("input",{type:"text",name:"address.street",value:o.address.street,onChange:u,className:"w-full px-3 py-2 bg-dark-600 border border-gray-600 rounded-md text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"City"}),e.jsx("input",{type:"text",name:"address.city",value:o.address.city,onChange:u,className:"w-full px-3 py-2 bg-dark-600 border border-gray-600 rounded-md text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"State"}),e.jsx("input",{type:"text",name:"address.state",value:o.address.state,onChange:u,className:"w-full px-3 py-2 bg-dark-600 border border-gray-600 rounded-md text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Zip Code"}),e.jsx("input",{type:"text",name:"address.zipCode",value:o.address.zipCode,onChange:u,className:"w-full px-3 py-2 bg-dark-600 border border-gray-600 rounded-md text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Country"}),e.jsx("input",{type:"text",name:"address.country",value:o.address.country,onChange:u,className:"w-full px-3 py-2 bg-dark-600 border border-gray-600 rounded-md text-white"})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx("button",{type:"button",onClick:()=>i(!1),className:"btn-secondary",children:"Cancel"}),e.jsxs("button",{type:"submit",className:"btn-primary",children:[e.jsx(Rs,{size:20})," ",l?"Update":"Save"]})]})]})]})})]})},Q3=()=>{const[t,s]=y.useState([]),[a,r]=y.useState(!0),[n,i]=y.useState(!1),[l,c]=y.useState(null),[o,d]=y.useState({certificationName:"",issuingOrganization:"",certificateNumber:"",issueDate:"",expiryDate:"",isPermanent:!1,documentUrl:"",skills:[],description:""});y.useEffect(()=>{x()},[]);const x=async()=>{var p,j;try{r(!0);const v=await J.get("/employee/profile/certifications");s(v.data.data)}catch(v){_.error(((j=(p=v.response)==null?void 0:p.data)==null?void 0:j.message)||"Failed to fetch certifications")}finally{r(!1)}},u=p=>{const{name:j,value:v,type:w,checked:b}=p.target;if(j==="isPermanent")d(A=>({...A,[j]:b}));else if(j==="skills"){const A=v.split(",").map(N=>N.trim()).filter(N=>N);d(N=>({...N,[j]:A}))}else d(A=>({...A,[j]:v}))},m=async p=>{var j,v;p.preventDefault();try{l?(await J.put(`/employee/profile/certifications/${l._id}`,o),_.success("Certification updated successfully")):(await J.post("/employee/profile/certifications",o),_.success("Certification added successfully")),i(!1),c(null),d({certificationName:"",issuingOrganization:"",certificateNumber:"",issueDate:"",expiryDate:"",isPermanent:!1,documentUrl:"",skills:[],description:""}),x()}catch(w){_.error(((v=(j=w.response)==null?void 0:j.data)==null?void 0:v.message)||"Failed to save certification")}},f=p=>{c(p),d({certificationName:p.certificationName||"",issuingOrganization:p.issuingOrganization||"",certificateNumber:p.certificateNumber||"",issueDate:p.issueDate?new Date(p.issueDate).toISOString().split("T")[0]:"",expiryDate:p.expiryDate?new Date(p.expiryDate).toISOString().split("T")[0]:"",isPermanent:p.isPermanent||!1,documentUrl:p.documentUrl||"",skills:p.skills||[],description:p.description||""}),i(!0)},g=async p=>{var j,v;if(window.confirm("Are you sure you want to delete this certification?"))try{await J.delete(`/employee/profile/certifications/${p}`),_.success("Certification deleted successfully"),x()}catch(w){_.error(((v=(j=w.response)==null?void 0:j.data)==null?void 0:v.message)||"Failed to delete certification")}},h=p=>{if(!p)return!1;const w=(new Date(p)-new Date)/(1e3*60*60*24);return w>0&&w<=90};return a?e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("div",{className:"text-white",children:"Loading..."})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("h2",{className:"text-xl font-semibold text-white flex items-center gap-2",children:[e.jsx(_a,{size:20})," Certifications"]}),e.jsxs("button",{onClick:()=>{c(null),d({certificationName:"",issuingOrganization:"",certificateNumber:"",issueDate:"",expiryDate:"",isPermanent:!1,documentUrl:"",skills:[],description:""}),i(!0)},className:"btn-primary",children:[e.jsx(qe,{size:20})," Add Certification"]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:t.map(p=>{const j=p.isExpired,v=h(p.expiryDate);return e.jsxs("div",{className:`bg-dark-700 p-4 rounded-lg ${j?"border-l-4 border-red-500":v?"border-l-4 border-yellow-500":""}`,children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-semibold text-white",children:p.certificationName}),e.jsx("p",{className:"text-gray-400 text-sm",children:p.issuingOrganization})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>f(p),className:"text-primary-400 hover:text-primary-300",children:e.jsx($a,{size:18})}),e.jsx("button",{onClick:()=>g(p._id),className:"text-red-400 hover:text-red-300",children:e.jsx(kt,{size:18})})]})]}),p.certificateNumber&&e.jsxs("p",{className:"text-gray-400 text-sm",children:["Cert #: ",p.certificateNumber]}),e.jsxs("div",{className:"mt-2 space-y-1",children:[e.jsxs("p",{className:"text-gray-400 text-sm",children:["Issued: ",p.issueDate?new Date(p.issueDate).toLocaleDateString():"N/A"]}),!p.isPermanent&&p.expiryDate&&e.jsx("p",{className:`text-sm ${j?"text-red-400":v?"text-yellow-400":"text-gray-400"}`,children:j?e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(mt,{size:14})," Expired: ",new Date(p.expiryDate).toLocaleDateString()]}):`Expires: ${new Date(p.expiryDate).toLocaleDateString()}`}),p.isPermanent&&e.jsx("p",{className:"text-green-400 text-sm",children:"Permanent"})]}),p.skills&&p.skills.length>0&&e.jsx("div",{className:"mt-2 flex flex-wrap gap-1",children:p.skills.map((w,b)=>e.jsx("span",{className:"px-2 py-1 bg-primary-900/30 text-primary-300 text-xs rounded",children:w},b))})]},p._id)})}),n&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-dark-700 p-6 rounded-lg shadow-xl w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-white",children:l?"Edit Certification":"Add Certification"}),e.jsx("button",{onClick:()=>i(!1),className:"text-gray-400 hover:text-white",children:e.jsx(Le,{size:20})})]}),e.jsxs("form",{onSubmit:m,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Certification Name *"}),e.jsx("input",{type:"text",name:"certificationName",value:o.certificationName,onChange:u,className:"w-full px-3 py-2 bg-dark-600 border border-gray-600 rounded-md text-white",required:!0})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Issuing Organization *"}),e.jsx("input",{type:"text",name:"issuingOrganization",value:o.issuingOrganization,onChange:u,className:"w-full px-3 py-2 bg-dark-600 border border-gray-600 rounded-md text-white",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Certificate Number"}),e.jsx("input",{type:"text",name:"certificateNumber",value:o.certificateNumber,onChange:u,className:"w-full px-3 py-2 bg-dark-600 border border-gray-600 rounded-md text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Issue Date *"}),e.jsx("input",{type:"date",name:"issueDate",value:o.issueDate,onChange:u,className:"w-full px-3 py-2 bg-dark-600 border border-gray-600 rounded-md text-white",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Expiry Date"}),e.jsx("input",{type:"date",name:"expiryDate",value:o.expiryDate,onChange:u,disabled:o.isPermanent,className:"w-full px-3 py-2 bg-dark-600 border border-gray-600 rounded-md text-white disabled:opacity-50"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",name:"isPermanent",checked:o.isPermanent,onChange:u,className:"w-4 h-4"}),e.jsx("label",{className:"text-sm font-medium text-gray-300",children:"Permanent (No Expiry)"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Skills (comma-separated)"}),e.jsx("input",{type:"text",name:"skills",value:o.skills.join(", "),onChange:u,placeholder:"e.g., JavaScript, React, Node.js",className:"w-full px-3 py-2 bg-dark-600 border border-gray-600 rounded-md text-white"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Document URL"}),e.jsx("input",{type:"url",name:"documentUrl",value:o.documentUrl,onChange:u,className:"w-full px-3 py-2 bg-dark-600 border border-gray-600 rounded-md text-white"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Description"}),e.jsx("textarea",{name:"description",value:o.description,onChange:u,rows:"3",className:"w-full px-3 py-2 bg-dark-600 border border-gray-600 rounded-md text-white"})]})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx("button",{type:"button",onClick:()=>i(!1),className:"btn-secondary",children:"Cancel"}),e.jsxs("button",{type:"submit",className:"btn-primary",children:[e.jsx(Rs,{size:20})," ",l?"Update":"Save"]})]})]})]})})]})},eA=()=>{const[t,s]=y.useState([]),[a,r]=y.useState(!0),[n,i]=y.useState(!1),[l,c]=y.useState(null),[o,d]=y.useState({degree:"",specialization:"",institution:"",passingYear:"",percentage:"",documentUrl:""});y.useEffect(()=>{x()},[]);const x=async()=>{try{r(!0);const h=await J.get("/employees/profile");h.data.data&&h.data.data.education&&s(h.data.data.education)}catch{console.log("Education endpoint not available yet")}finally{r(!1)}},u=h=>{const{name:p,value:j}=h.target;d(v=>({...v,[p]:j}))},m=async h=>{var p,j;h.preventDefault();try{_.success("Academic qualification saved successfully"),i(!1),c(null),d({degree:"",specialization:"",institution:"",passingYear:"",percentage:"",documentUrl:""}),x()}catch(v){_.error(((j=(p=v.response)==null?void 0:p.data)==null?void 0:j.message)||"Failed to save qualification")}},f=h=>{c(h),d({degree:h.degree||"",specialization:h.specialization||"",institution:h.institution||"",passingYear:h.passingYear||"",percentage:h.percentage||"",documentUrl:h.documentUrl||""}),i(!0)},g=async h=>{var p,j;if(window.confirm("Are you sure you want to delete this qualification?"))try{_.success("Qualification deleted successfully"),x()}catch(v){_.error(((j=(p=v.response)==null?void 0:p.data)==null?void 0:j.message)||"Failed to delete qualification")}};return a?e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("div",{className:"text-white",children:"Loading..."})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("h2",{className:"text-xl font-semibold text-white flex items-center gap-2",children:[e.jsx(Jo,{size:20})," Academic Qualifications"]}),e.jsxs("button",{onClick:()=>{c(null),d({degree:"",specialization:"",institution:"",passingYear:"",percentage:"",documentUrl:""}),i(!0)},className:"btn-primary",children:[e.jsx(qe,{size:20})," Add Qualification"]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:t.map((h,p)=>e.jsxs("div",{className:"bg-dark-700 p-4 rounded-lg",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-white",children:h.degree}),e.jsx("p",{className:"text-gray-400 text-sm",children:h.specialization})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>f(h),className:"text-primary-400 hover:text-primary-300",children:e.jsx($a,{size:18})}),e.jsx("button",{onClick:()=>g(),className:"text-red-400 hover:text-red-300",children:e.jsx(kt,{size:18})})]})]}),e.jsxs("div",{className:"space-y-1 mt-2",children:[e.jsxs("p",{className:"text-gray-400 text-sm",children:["Institution: ",h.institution]}),e.jsxs("p",{className:"text-gray-400 text-sm",children:["Year: ",h.passingYear]}),h.percentage&&e.jsxs("p",{className:"text-gray-400 text-sm",children:["Percentage: ",h.percentage,"%"]}),h.documentUrl&&e.jsxs("a",{href:h.documentUrl,target:"_blank",rel:"noopener noreferrer",className:"text-primary-400 hover:text-primary-300 text-sm flex items-center gap-1",children:[e.jsx(st,{size:14})," View Document"]})]})]},p))}),t.length===0&&e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-gray-400",children:"No academic qualifications added yet"})}),n&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-dark-700 p-6 rounded-lg shadow-xl w-full max-w-2xl",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-white",children:l?"Edit Qualification":"Add Qualification"}),e.jsx("button",{onClick:()=>i(!1),className:"text-gray-400 hover:text-white",children:e.jsx(Le,{size:20})})]}),e.jsxs("form",{onSubmit:m,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Degree *"}),e.jsx("input",{type:"text",name:"degree",value:o.degree,onChange:u,className:"w-full px-3 py-2 bg-dark-600 border border-gray-600 rounded-md text-white",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Specialization"}),e.jsx("input",{type:"text",name:"specialization",value:o.specialization,onChange:u,className:"w-full px-3 py-2 bg-dark-600 border border-gray-600 rounded-md text-white"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Institution *"}),e.jsx("input",{type:"text",name:"institution",value:o.institution,onChange:u,className:"w-full px-3 py-2 bg-dark-600 border border-gray-600 rounded-md text-white",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Passing Year *"}),e.jsx("input",{type:"number",name:"passingYear",value:o.passingYear,onChange:u,min:"1950",max:new Date().getFullYear(),className:"w-full px-3 py-2 bg-dark-600 border border-gray-600 rounded-md text-white",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Percentage/GPA"}),e.jsx("input",{type:"text",name:"percentage",value:o.percentage,onChange:u,placeholder:"e.g., 85 or 3.5",className:"w-full px-3 py-2 bg-dark-600 border border-gray-600 rounded-md text-white"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Document URL"}),e.jsx("input",{type:"url",name:"documentUrl",value:o.documentUrl,onChange:u,placeholder:"https://...",className:"w-full px-3 py-2 bg-dark-600 border border-gray-600 rounded-md text-white"})]})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx("button",{type:"button",onClick:()=>i(!1),className:"btn-secondary",children:"Cancel"}),e.jsxs("button",{type:"submit",className:"btn-primary",children:[e.jsx(Rs,{size:20})," ",l?"Update":"Save"]})]})]})]})})]})},tA=()=>{const{user:t}=Rt(),[s,a]=y.useState([]),[r,n]=y.useState(!0),[i,l]=y.useState(!1),[c,o]=y.useState({fieldName:"",fieldCategory:"",oldValue:"",newValue:"",reason:""});y.useEffect(()=>{d()},[]);const d=async()=>{var g,h;try{n(!0);const p=await J.get("/employee/profile/update-requests");a(p.data.data)}catch(p){_.error(((h=(g=p.response)==null?void 0:g.data)==null?void 0:h.message)||"Failed to fetch update requests")}finally{n(!1)}},x=g=>{const{name:h,value:p}=g.target;o(j=>({...j,[h]:p}))},u=async g=>{var h,p;g.preventDefault();try{await J.post("/employee/profile/update-requests",c),_.success("Profile update request submitted successfully"),l(!1),o({fieldName:"",fieldCategory:"",oldValue:"",newValue:"",reason:""}),d()}catch(j){_.error(((p=(h=j.response)==null?void 0:h.data)==null?void 0:p.message)||"Failed to submit request")}},m=async(g,h,p="")=>{var j,v;try{await J.post(`/employee/profile/update-requests/${g}/approve`,{action:h,comments:p}),_.success(`Request ${h}d successfully`),d()}catch(w){_.error(((v=(j=w.response)==null?void 0:j.data)==null?void 0:v.message)||`Failed to ${h} request`)}},f=g=>{switch(g){case"approved":return"text-green-400";case"rejected":return"text-red-400";case"pending":return"text-yellow-400";default:return"text-gray-400"}};return r?e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("div",{className:"text-white",children:"Loading..."})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("h2",{className:"text-xl font-semibold text-white flex items-center gap-2",children:[e.jsx(Ll,{size:20})," Profile Update Requests"]}),t.role==="employee"&&e.jsxs("button",{onClick:()=>{o({fieldName:"",fieldCategory:"",oldValue:"",newValue:"",reason:""}),l(!0)},className:"btn-primary",children:[e.jsx(qe,{size:20})," New Request"]})]}),e.jsx("div",{className:"space-y-4",children:s.map(g=>{var h;return e.jsxs("div",{className:"bg-dark-700 p-4 rounded-lg",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-white capitalize",children:g.fieldName.replace(/([A-Z])/g," $1").trim()}),e.jsx("p",{className:"text-gray-400 text-sm capitalize",children:g.fieldCategory})]}),e.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${f(g.status)} bg-opacity-20`,children:g.status})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-400 text-sm",children:"Old Value"}),e.jsx("p",{className:"text-white",children:String(g.oldValue||"N/A")})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-400 text-sm",children:"New Value"}),e.jsx("p",{className:"text-white",children:String(g.newValue||"N/A")})]})]}),g.reason&&e.jsxs("div",{className:"mt-2",children:[e.jsx("p",{className:"text-gray-400 text-sm",children:"Reason"}),e.jsx("p",{className:"text-white",children:g.reason})]}),g.slaDeadline&&g.status==="pending"&&e.jsxs("div",{className:"mt-2 flex items-center gap-2 text-yellow-400 text-sm",children:[e.jsx(Be,{size:14}),"SLA Deadline: ",new Date(g.slaDeadline).toLocaleString()]}),(t.role==="manager"||t.role==="hr"||t.role==="admin")&&g.status==="pending"&&((h=g.currentApprover)==null?void 0:h._id)===t._id&&e.jsxs("div",{className:"mt-4 flex gap-2",children:[e.jsxs("button",{onClick:()=>{const p=window.prompt("Enter approval comments (optional):");m(g._id,"approve",p||"")},className:"btn-primary flex items-center gap-2",children:[e.jsx(gn,{size:18})," Approve"]}),e.jsxs("button",{onClick:()=>{const p=window.prompt("Enter rejection reason:");p&&m(g._id,"reject",p)},className:"btn-secondary flex items-center gap-2",children:[e.jsx(Le,{size:18})," Reject"]})]}),g.approvals&&g.approvals.length>0&&e.jsxs("div",{className:"mt-4",children:[e.jsx("p",{className:"text-gray-400 text-sm mb-2",children:"Approval Status:"}),e.jsx("div",{className:"space-y-1",children:g.approvals.map((p,j)=>e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsxs("span",{className:"text-gray-400",children:[p.approverName,":"]}),e.jsx("span",{className:f(p.status),children:p.status})]},j))})]})]},g._id)})}),i&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-dark-700 p-6 rounded-lg shadow-xl w-full max-w-2xl",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-white",children:"New Profile Update Request"}),e.jsx("button",{onClick:()=>l(!1),className:"text-gray-400 hover:text-white",children:e.jsx(Le,{size:20})})]}),e.jsxs("form",{onSubmit:u,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Field Category *"}),e.jsxs("select",{name:"fieldCategory",value:c.fieldCategory,onChange:x,className:"w-full px-3 py-2 bg-dark-600 border border-gray-600 rounded-md text-white",required:!0,children:[e.jsx("option",{value:"",children:"Select"}),e.jsx("option",{value:"personal",children:"Personal"}),e.jsx("option",{value:"address",children:"Address"}),e.jsx("option",{value:"contact",children:"Contact"}),e.jsx("option",{value:"family",children:"Family"}),e.jsx("option",{value:"education",children:"Education"}),e.jsx("option",{value:"experience",children:"Experience"}),e.jsx("option",{value:"certification",children:"Certification"}),e.jsx("option",{value:"other",children:"Other"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Field Name *"}),e.jsx("input",{type:"text",name:"fieldName",value:c.fieldName,onChange:x,placeholder:"e.g., phone, email, permanentAddress",className:"w-full px-3 py-2 bg-dark-600 border border-gray-600 rounded-md text-white",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Current Value"}),e.jsx("input",{type:"text",name:"oldValue",value:c.oldValue,onChange:x,className:"w-full px-3 py-2 bg-dark-600 border border-gray-600 rounded-md text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"New Value *"}),e.jsx("input",{type:"text",name:"newValue",value:c.newValue,onChange:x,className:"w-full px-3 py-2 bg-dark-600 border border-gray-600 rounded-md text-white",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Reason *"}),e.jsx("textarea",{name:"reason",value:c.reason,onChange:x,rows:"3",className:"w-full px-3 py-2 bg-dark-600 border border-gray-600 rounded-md text-white",required:!0})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx("button",{type:"button",onClick:()=>l(!1),className:"btn-secondary",children:"Cancel"}),e.jsx("button",{type:"submit",className:"btn-primary",children:"Submit Request"})]})]})]})})]})},sA=()=>{const{user:t}=Rt(),[s,a]=y.useState(!1),[r,n]=y.useState("personal"),[i,l]=y.useState({firstName:(t==null?void 0:t.firstName)||"John",lastName:(t==null?void 0:t.lastName)||"Doe",email:(t==null?void 0:t.email)||"john.doe@company.com",phone:"+91 9876543210",designation:"Senior Software Engineer",department:"Technology",employeeId:"EMP001",joiningDate:"Jan 15, 2022",reportingTo:"Jane Smith",location:"Bangalore, India",address:"123 Tech Park, Whitefield, Bangalore - 560066"}),c=[{id:"personal",label:"Personal Info"},{id:"employment",label:"Employment"},{id:"family",label:"Family Details",icon:Ue},{id:"certifications",label:"Certifications",icon:_a},{id:"education",label:"Education",icon:Jo},{id:"update-requests",label:"Update Requests",icon:Ll},{id:"documents",label:"Documents"}],o=()=>{a(!1)};return e.jsxs("div",{className:"min-h-screen bg-[#1E1E2A] p-4 md:p-6 pb-24 md:pb-6",children:[e.jsxs("div",{className:"max-w-5xl mx-auto space-y-6",children:[e.jsxs("div",{className:"bg-[#2A2A3A] rounded-2xl p-4 md:p-8 border border-gray-700",children:[e.jsxs("div",{className:"flex flex-col md:flex-row items-start justify-between mb-6 gap-4",children:[e.jsxs("div",{className:"flex items-center space-x-4 md:space-x-6",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"w-24 h-24 rounded-full bg-gradient-to-br from-[#A88BFF] to-[#8B6FE8] flex items-center justify-center",children:e.jsxs("span",{className:"text-white text-3xl font-bold",children:[i.firstName.charAt(0),i.lastName.charAt(0)]})}),e.jsx("button",{className:"absolute bottom-0 right-0 w-8 h-8 bg-[#A88BFF] rounded-full flex items-center justify-center hover:bg-[#8B6FE8] transition-colors",children:e.jsx(_g,{className:"w-4 h-4 text-white"})})]}),e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold text-white",children:[i.firstName," ",i.lastName]}),e.jsx("p",{className:"text-[#A88BFF] font-medium mt-1",children:i.designation}),e.jsx("p",{className:"text-gray-400 text-sm mt-1",children:i.department}),e.jsxs("div",{className:"flex items-center space-x-4 mt-3",children:[e.jsx("span",{className:"px-3 py-1 bg-green-500/20 text-green-400 rounded-full text-xs font-medium",children:"ACTIVE"}),e.jsxs("span",{className:"text-gray-400 text-sm",children:["ID: ",i.employeeId]})]})]})]}),s?e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("button",{onClick:o,className:"flex items-center space-x-2 px-4 py-2 bg-green-500 text-white rounded-xl hover:bg-green-600 transition-colors",children:[e.jsx(Rs,{className:"w-4 h-4"}),e.jsx("span",{children:"Save"})]}),e.jsxs("button",{onClick:()=>a(!1),className:"flex items-center space-x-2 px-4 py-2 bg-[#1E1E2A] text-gray-400 rounded-xl hover:text-white transition-colors",children:[e.jsx(Le,{className:"w-4 h-4"}),e.jsx("span",{children:"Cancel"})]})]}):e.jsxs("button",{onClick:()=>a(!0),className:"flex items-center space-x-2 px-4 py-2 bg-gradient-to-r from-[#A88BFF] to-[#8B6FE8] text-white rounded-xl hover:shadow-lg transition-all",children:[e.jsx(ya,{className:"w-4 h-4"}),e.jsx("span",{children:"Edit Profile"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 pt-6 border-t border-gray-700",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-gray-400 text-sm mb-1",children:"Years at Company"}),e.jsx("p",{className:"text-white text-xl font-bold",children:"2.9"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-gray-400 text-sm mb-1",children:"Projects Completed"}),e.jsx("p",{className:"text-white text-xl font-bold",children:"12"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-gray-400 text-sm mb-1",children:"Performance Rating"}),e.jsx("p",{className:"text-[#A88BFF] text-xl font-bold",children:"4.5/5"})]})]})]}),e.jsx("div",{className:"flex items-center space-x-2 border-b border-gray-700 overflow-x-auto scrollbar-hide",children:c.map(d=>{const x=d.icon;return e.jsxs("button",{onClick:()=>n(d.id),className:`px-4 md:px-6 py-3 font-medium transition-all relative flex items-center gap-2 whitespace-nowrap ${r===d.id?"text-[#A88BFF]":"text-gray-400 hover:text-white"}`,children:[x&&e.jsx(x,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:d.label}),e.jsx("span",{className:"sm:hidden",children:d.label.split(" ")[0]}),r===d.id&&e.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-[#A88BFF]"})]},d.id)})}),r==="personal"&&e.jsxs("div",{className:"bg-[#2A2A3A] rounded-2xl p-6 border border-gray-700",children:[e.jsx("h3",{className:"text-white text-lg font-semibold mb-4",children:"Personal Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-sm mb-2 block",children:"First Name"}),e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-[#1E1E2A] rounded-xl",children:[e.jsx(_t,{className:"w-5 h-5 text-gray-400"}),e.jsx("input",{type:"text",value:i.firstName,disabled:!s,onChange:d=>l({...i,firstName:d.target.value}),className:"bg-transparent text-white flex-1 outline-none"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-sm mb-2 block",children:"Last Name"}),e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-[#1E1E2A] rounded-xl",children:[e.jsx(_t,{className:"w-5 h-5 text-gray-400"}),e.jsx("input",{type:"text",value:i.lastName,disabled:!s,onChange:d=>l({...i,lastName:d.target.value}),className:"bg-transparent text-white flex-1 outline-none"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-sm mb-2 block",children:"Email"}),e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-[#1E1E2A] rounded-xl",children:[e.jsx(wt,{className:"w-5 h-5 text-gray-400"}),e.jsx("input",{type:"email",value:i.email,disabled:!0,className:"bg-transparent text-gray-500 flex-1 outline-none"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-sm mb-2 block",children:"Phone"}),e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-[#1E1E2A] rounded-xl",children:[e.jsx(Bs,{className:"w-5 h-5 text-gray-400"}),e.jsx("input",{type:"tel",value:i.phone,disabled:!s,onChange:d=>l({...i,phone:d.target.value}),className:"bg-transparent text-white flex-1 outline-none"})]})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"text-gray-400 text-sm mb-2 block",children:"Address"}),e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-[#1E1E2A] rounded-xl",children:[e.jsx(Ra,{className:"w-5 h-5 text-gray-400"}),e.jsx("input",{type:"text",value:i.address,disabled:!s,onChange:d=>l({...i,address:d.target.value}),className:"bg-transparent text-white flex-1 outline-none"})]})]})]})]}),r==="employment"&&e.jsxs("div",{className:"bg-[#2A2A3A] rounded-2xl p-6 border border-gray-700",children:[e.jsx("h3",{className:"text-white text-lg font-semibold mb-4",children:"Employment Details"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-sm mb-2 block",children:"Employee ID"}),e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-[#1E1E2A] rounded-xl",children:[e.jsx(_a,{className:"w-5 h-5 text-gray-400"}),e.jsx("span",{className:"text-white",children:i.employeeId})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-sm mb-2 block",children:"Designation"}),e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-[#1E1E2A] rounded-xl",children:[e.jsx(ot,{className:"w-5 h-5 text-gray-400"}),e.jsx("span",{className:"text-white",children:i.designation})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-sm mb-2 block",children:"Department"}),e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-[#1E1E2A] rounded-xl",children:[e.jsx(kn,{className:"w-5 h-5 text-gray-400"}),e.jsx("span",{className:"text-white",children:i.department})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-sm mb-2 block",children:"Joining Date"}),e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-[#1E1E2A] rounded-xl",children:[e.jsx(Oe,{className:"w-5 h-5 text-gray-400"}),e.jsx("span",{className:"text-white",children:i.joiningDate})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-sm mb-2 block",children:"Reporting To"}),e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-[#1E1E2A] rounded-xl",children:[e.jsx(_t,{className:"w-5 h-5 text-gray-400"}),e.jsx("span",{className:"text-white",children:i.reportingTo})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-sm mb-2 block",children:"Location"}),e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-[#1E1E2A] rounded-xl",children:[e.jsx(Ra,{className:"w-5 h-5 text-gray-400"}),e.jsx("span",{className:"text-white",children:i.location})]})]})]})]}),r==="family"&&e.jsx("div",{className:"bg-[#2A2A3A] rounded-2xl p-4 md:p-6 border border-gray-700",children:e.jsx(K3,{})}),r==="certifications"&&e.jsx("div",{className:"bg-[#2A2A3A] rounded-2xl p-4 md:p-6 border border-gray-700",children:e.jsx(Q3,{})}),r==="education"&&e.jsx("div",{className:"bg-[#2A2A3A] rounded-2xl p-4 md:p-6 border border-gray-700",children:e.jsx(eA,{})}),r==="update-requests"&&e.jsx("div",{className:"bg-[#2A2A3A] rounded-2xl p-4 md:p-6 border border-gray-700",children:e.jsx(tA,{})}),r==="documents"&&e.jsxs("div",{className:"bg-[#2A2A3A] rounded-2xl p-12 border border-gray-700 text-center",children:[e.jsx(_a,{className:"w-16 h-16 text-gray-600 mx-auto mb-4"}),e.jsx("h3",{className:"text-white text-lg font-semibold mb-2",children:"No Documents"}),e.jsx("p",{className:"text-gray-400",children:"Document management feature coming soon"})]})]}),e.jsx(qt,{})]})},Hf=[{value:"not-started",label:"Not Started"},{value:"in-progress",label:"In Progress"},{value:"at-risk",label:"At Risk"},{value:"completed",label:"Completed"}],qf=t=>{switch(t){case"completed":return"bg-green-500";case"at-risk":return"bg-red-500";case"in-progress":return"bg-blue-500";default:return"bg-gray-500"}},aA=t=>{switch(t){case"completed":return"bg-green-500/20 text-green-300";case"at-risk":return"bg-red-500/20 text-red-300";case"in-progress":return"bg-blue-500/20 text-blue-300";default:return"bg-gray-600/30 text-gray-300"}},rA=()=>{const t=Je(),[s,a]=y.useState(""),[r,n]=y.useState(!0),[i,l]=y.useState({totalMembers:0,present:0,onLeave:0}),[c,o]=y.useState({current:[],past:[],all:[]}),[d,x]=y.useState(null),[u,m]=y.useState(!1),[f,g]=y.useState(!1),h=[],p=async b=>{try{const A=b||localStorage.getItem("token");if(!A){_.error("Authentication token missing");return}const C=await(await fetch(`${it.apiBaseUrl}/manager/projects`,{headers:{Authorization:`Bearer ${A}`}})).json();C.success?o(C.data):_.error(C.message||"Failed to load projects")}catch(A){console.error("Error fetching projects:",A),_.error("Failed to load projects")}},j=async(b,A)=>{try{const N=localStorage.getItem("token");if(!N)return _.error("Authentication token missing"),!1;const k=await(await fetch(`${it.apiBaseUrl}/manager/projects/${b}/progress`,{method:"PUT",headers:{Authorization:`Bearer ${N}`,"Content-Type":"application/json"},body:JSON.stringify(A)})).json();return k.success?(_.success("Project progress updated"),await p(N),x(S=>!S||S._id!==b?S:{...S,...k.data,managerRole:S.managerRole}),!0):(_.error(k.message||"Failed to update progress"),!1)}catch(N){return console.error("Error updating progress:",N),_.error("Failed to update project progress"),!1}};y.useEffect(()=>{(async()=>{try{const A=localStorage.getItem("token"),C=await(await fetch(`${it.apiBaseUrl}/manager/team-stats`,{headers:{Authorization:`Bearer ${A}`}})).json();C.success&&l(C.data),await p(A),n(!1)}catch(A){console.error("Error fetching data:",A),n(!1)}})()},[]);const v=async b=>{const A=localStorage.getItem("token");if(!A||!(b!=null&&b._id)){_.error("Missing project information");return}g(!0),m(!0),x(null);try{const C=await(await fetch(`${it.apiBaseUrl}/manager/projects/${b._id}`,{headers:{Authorization:`Bearer ${A}`}})).json();C.success?x(C.data):(Wu(C.message||"Failed to load project"),g(!1))}catch(N){Wu(N),g(!1)}finally{m(!1)}},w=b=>new Date(b).toLocaleDateString("en-US",{month:"short",day:"numeric"});return e.jsxs("div",{className:"min-h-screen bg-[#1E1E2A] pb-24 md:pb-6",children:[e.jsx("div",{className:"sticky top-0 z-10 bg-[#1E1E2A] border-b border-gray-800 px-4 py-4",children:e.jsx("div",{className:"max-w-7xl mx-auto",children:e.jsxs("div",{className:"relative",children:[e.jsx(yt,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),e.jsx("input",{type:"text",placeholder:"Search team members",value:s,onChange:b=>a(b.target.value),className:"w-full bg-[#2A2A3A] text-white pl-12 pr-4 py-3 rounded-2xl border border-gray-700 focus:border-[#A88BFF] focus:outline-none transition-colors"})]})})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-6 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("button",{onClick:()=>t("/employee/manager/leave-approvals"),className:"bg-gradient-to-br from-[#A88BFF] to-[#8B6FE8] text-white p-4 rounded-2xl shadow-lg hover:shadow-xl transition-all",children:[e.jsx(Te,{className:"w-6 h-6 mx-auto mb-2"}),e.jsx("span",{className:"text-sm font-semibold",children:"Leave Approvals"})]}),e.jsxs("button",{onClick:()=>t("/employee/manager/assign-project"),className:"bg-[#2A2A3A] text-white p-4 rounded-2xl border border-gray-700 hover:border-[#A88BFF] transition-all",children:[e.jsx(ot,{className:"w-6 h-6 text-[#A88BFF] mx-auto mb-2"}),e.jsx("span",{className:"text-sm font-semibold",children:"Assign Project"})]}),e.jsxs("button",{onClick:()=>t("/employee/manager/schedule-meeting"),className:"bg-[#2A2A3A] text-white p-4 rounded-2xl border border-gray-700 hover:border-[#A88BFF] transition-all",children:[e.jsx(Oe,{className:"w-6 h-6 text-[#A88BFF] mx-auto mb-2"}),e.jsx("span",{className:"text-sm font-semibold",children:"Schedule Meeting"})]}),e.jsxs("button",{onClick:()=>t("/employee/manager/announcements"),className:"bg-[#2A2A3A] text-white p-4 rounded-2xl border border-gray-700 hover:border-[#A88BFF] transition-all",children:[e.jsx(wn,{className:"w-6 h-6 text-[#A88BFF] mx-auto mb-2"}),e.jsx("span",{className:"text-sm font-semibold",children:"Announcements"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-[#2A2A3A] rounded-2xl p-4 border border-gray-700",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("p",{className:"text-gray-400 text-sm",children:"Team Size"}),e.jsx(Ue,{className:"w-5 h-5 text-[#A88BFF]"})]}),e.jsx("h3",{className:"text-2xl font-bold text-white",children:i.totalMembers})]}),e.jsxs("div",{className:"bg-[#2A2A3A] rounded-2xl p-4 border border-gray-700",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("p",{className:"text-gray-400 text-sm",children:"Present Today"}),e.jsx(Te,{className:"w-5 h-5 text-green-400"})]}),e.jsx("h3",{className:"text-2xl font-bold text-white",children:i.present})]}),e.jsxs("div",{className:"bg-[#2A2A3A] rounded-2xl p-4 border border-gray-700",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("p",{className:"text-gray-400 text-sm",children:"On Leave"}),e.jsx(Oe,{className:"w-5 h-5 text-yellow-400"})]}),e.jsx("h3",{className:"text-2xl font-bold text-white",children:i.onLeave})]})]}),e.jsxs("div",{className:"bg-[#2A2A3A] rounded-2xl p-6 border border-gray-700",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-white text-lg font-semibold",children:"Assigned Projects"}),e.jsxs("button",{onClick:()=>t("/employee/manager/assign-project"),className:"flex items-center space-x-2 px-4 py-2 bg-gradient-to-r from-[#A88BFF] to-[#8B6FE8] text-white rounded-xl hover:shadow-lg transition-all text-sm",children:[e.jsx(qe,{className:"w-4 h-4"}),e.jsx("span",{children:"Assign Project"})]})]}),c.current&&c.current.length>0?e.jsx("div",{className:"space-y-3",children:c.current.map(b=>{var A,N,C,k,S,F;return e.jsx("div",{className:"p-4 bg-[#1E1E2A] rounded-xl",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-[#A88BFF] to-[#8B6FE8] flex items-center justify-center",children:e.jsx(ot,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-white font-medium",children:b.name}),e.jsx("p",{className:"text-gray-400 text-sm",children:b.projectCode})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[e.jsxs("p",{className:"text-gray-400",children:[e.jsx("span",{className:"text-white font-medium",children:"Client:"})," ",((A=b.client)==null?void 0:A.name)||"N/A"]}),e.jsxs("p",{className:"text-gray-400",children:[e.jsx("span",{className:"text-white font-medium",children:"Role:"})," ",b.managerRole]}),e.jsxs("p",{className:"text-gray-400",children:[e.jsx("span",{className:"text-white font-medium",children:"Status:"})," ",e.jsx("span",{className:`capitalize ${b.status==="active"?"text-green-400":b.status==="completed"?"text-blue-400":b.status==="on-hold"?"text-yellow-400":"text-gray-400"}`,children:b.status})]}),e.jsxs("p",{className:"text-gray-400",children:[e.jsx("span",{className:"text-white font-medium",children:"Team Size:"})," ",b.teamSize]})]}),b.description&&e.jsx("p",{className:"text-gray-400 text-sm mt-2",children:b.description}),e.jsxs("div",{className:"mt-4 space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-400",children:[e.jsx("span",{children:"Progress"}),e.jsxs("span",{children:[Math.round(((N=b.progress)==null?void 0:N.percentage)??0),"%"]})]}),e.jsx("div",{className:"w-full h-2 bg-gray-700 rounded-full overflow-hidden",children:e.jsx("div",{className:`${qf((C=b.progress)==null?void 0:C.status)} h-2 transition-all duration-300`,style:{width:`${Math.round(((k=b.progress)==null?void 0:k.percentage)??0)}%`}})}),e.jsx("span",{className:`inline-flex px-2 py-1 rounded-full text-xs font-medium ${aA((S=b.progress)==null?void 0:S.status)}`,children:((F=Hf.find(R=>{var T;return R.value===((T=b.progress)==null?void 0:T.status)}))==null?void 0:F.label)||"Not Tracked"})]})]}),e.jsx("button",{onClick:()=>v(b),className:"ml-4 px-4 py-2 bg-[#1E1E2A] text-white rounded-xl border border-gray-700 hover:border-[#A88BFF] transition-all text-sm",children:"View Details"})]})},b._id)})}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(ot,{className:"w-12 h-12 text-gray-600 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-400",children:"No active projects assigned"})]}),c.past&&c.past.length>0&&e.jsxs("div",{className:"mt-6 pt-6 border-t border-gray-700",children:[e.jsx("h4",{className:"text-white font-medium mb-3",children:"Past Projects"}),e.jsx("div",{className:"space-y-2",children:c.past.slice(0,3).map(b=>e.jsx("div",{className:"p-3 bg-[#1E1E2A] rounded-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-white text-sm font-medium",children:b.name}),e.jsxs("p",{className:"text-gray-400 text-xs",children:[b.projectCode," â€¢ ",b.managerRole]})]}),e.jsx("span",{className:`text-xs capitalize ${b.status==="completed"?"text-green-400":b.status==="cancelled"?"text-red-400":"text-gray-400"}`,children:b.status})]})},b._id))})]})]}),e.jsxs("div",{className:"bg-[#2A2A3A] rounded-2xl p-6 border border-gray-700",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-white text-lg font-semibold",children:"Upcoming Meetings"}),e.jsxs("button",{onClick:()=>t("/employee/manager/schedule-meeting"),className:"flex items-center space-x-2 px-4 py-2 bg-gradient-to-r from-[#A88BFF] to-[#8B6FE8] text-white rounded-xl hover:shadow-lg transition-all",children:[e.jsx(qe,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm",children:"Schedule"})]})]}),e.jsx("div",{className:"space-y-3",children:h.map(b=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-[#1E1E2A] rounded-xl",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-[#A88BFF] to-[#8B6FE8] flex items-center justify-center",children:e.jsx(Oe,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-white font-medium",children:b.title}),e.jsxs("p",{className:"text-gray-400 text-sm",children:[w(b.date)," at ",b.time]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ue,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{className:"text-gray-400 text-sm",children:b.attendees})]})]},b.id))})]})]}),e.jsx(qt,{}),f&&e.jsx(nA,{project:d,loading:u,onClose:()=>{g(!1),x(null)},onUpdateProgress:j})]})},Wu=t=>{console.error("Error fetching project details:",t),_.error("Unable to load project details right now")},nA=({project:t,loading:s,onClose:a,onUpdateProgress:r})=>{var m,f,g,h,p;const[n,i]=y.useState(((m=t==null?void 0:t.progress)==null?void 0:m.percentage)??0),[l,c]=y.useState(((f=t==null?void 0:t.progress)==null?void 0:f.status)??"not-started"),[o,d]=y.useState(!1);y.useEffect(()=>{var j,v;i(((j=t==null?void 0:t.progress)==null?void 0:j.percentage)??0),c(((v=t==null?void 0:t.progress)==null?void 0:v.status)??"not-started")},[t]);const x=async j=>{if(j.preventDefault(),!(t!=null&&t._id)||!r)return;d(!0);const v=await r(t._id,{percentage:n,status:l});d(!1),v&&_.success("Progress updated")},u=Math.round(n??0);return e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-[#2A2A3A] rounded-2xl w-full max-w-3xl max-h-[90vh] overflow-y-auto border border-gray-700",children:[e.jsxs("div",{className:"sticky top-0 bg-[#2A2A3A] border-b border-gray-700 p-5 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-white",children:"Project Details"}),t&&e.jsx("p",{className:"text-sm text-gray-400 mt-1",children:t.projectCode})]}),e.jsx("button",{onClick:a,className:"text-gray-400 hover:text-white",children:e.jsx(Le,{size:22})})]}),e.jsx("div",{className:"p-6 space-y-6",children:s?e.jsxs("div",{className:"flex flex-col items-center justify-center py-16 text-gray-400",children:[e.jsx(Qt,{className:"w-8 h-8 animate-spin mb-3"}),"Loading project details..."]}):t?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(Xa,{label:"Project Name",value:t.name}),e.jsx(Xa,{label:"Status",value:t.status,capitalize:!0}),e.jsx(Xa,{label:"Client",value:((g=t.client)==null?void 0:g.name)||"N/A"}),e.jsx(Xa,{label:"Location",value:t.location||"N/A"}),e.jsx(Xa,{label:"Start Date",value:t.startDate?new Date(t.startDate).toLocaleDateString():"N/A"}),e.jsx(Xa,{label:"End Date",value:t.endDate?new Date(t.endDate).toLocaleDateString():"Ongoing"}),e.jsx(Xa,{label:"Project Manager",value:t.projectManager?`${t.projectManager.firstName} ${t.projectManager.lastName}`:"Not assigned"}),e.jsx(Xa,{label:"Team Size",value:((h=t.teamMembers)==null?void 0:h.filter(j=>j.isActive).length)||0})]}),t.description&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm text-gray-400 uppercase tracking-wide mb-2",children:"Description"}),e.jsx("p",{className:"text-gray-300 leading-relaxed",children:t.description})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm text-gray-400 uppercase tracking-wide mb-3",children:"Progress"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-400 mb-2",children:[e.jsx("span",{children:"Completion"}),e.jsxs("span",{children:[u,"%"]})]}),e.jsx("input",{type:"range",min:"0",max:"100",value:n,onChange:j=>i(Number(j.target.value)),className:"w-full",disabled:t.managerRole!=="Project Manager"}),e.jsx("div",{className:"w-full h-2 bg-gray-700 rounded-full overflow-hidden mt-2",children:e.jsx("div",{className:`${qf(l)} h-2 transition-all duration-300`,style:{width:`${u}%`}})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 items-end",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"Progress Status"}),e.jsx("select",{value:l,onChange:j=>c(j.target.value),disabled:t.managerRole!=="Project Manager",className:"w-full bg-[#1E1E2A] text-white p-3 rounded-xl border border-gray-700 focus:border-[#A88BFF] focus:outline-none",children:Hf.map(j=>e.jsx("option",{value:j.value,children:j.label},j.value))})]}),t.managerRole==="Project Manager"&&e.jsx("button",{onClick:x,disabled:o,className:"px-4 py-3 bg-gradient-to-r from-[#A88BFF] to-[#8B6FE8] text-white rounded-xl font-semibold shadow-lg hover:shadow-xl transition-all disabled:opacity-50",children:o?"Updating...":"Update Progress"})]}),((p=t.progress)==null?void 0:p.updatedAt)&&e.jsxs("p",{className:"text-xs text-gray-500",children:["Last updated on ",new Date(t.progress.updatedAt).toLocaleString()]})]})]}),t.teamMembers&&t.teamMembers.length>0&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm text-gray-400 uppercase tracking-wide mb-3",children:"Active Team Members"}),e.jsx("div",{className:"space-y-3",children:t.teamMembers.filter(j=>j.isActive).map(j=>{var v,w,b,A,N;return e.jsx("div",{className:"bg-[#1E1E2A] border border-gray-700 rounded-xl p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-white font-medium",children:[(v=j.employee)==null?void 0:v.firstName," ",(w=j.employee)==null?void 0:w.lastName]}),e.jsx("p",{className:"text-sm text-gray-400",children:j.role||"Team Member"})]}),e.jsxs("div",{className:"text-right text-sm text-gray-400",children:[e.jsx("p",{children:((b=j.employee)==null?void 0:b.designation)||"Designation N/A"}),j.startDate&&e.jsxs("p",{children:["Since ",new Date(j.startDate).toLocaleDateString()]})]})]})},j._id||((A=j.employee)==null?void 0:A._id)||((N=j.employee)==null?void 0:N.email))})})]})]}):e.jsx("div",{className:"text-center text-gray-400 py-12",children:"Unable to load project details."})})]})})},Xa=({label:t,value:s,capitalize:a})=>e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-wide mb-1",children:t}),e.jsx("p",{className:`text-sm text-gray-200 ${a?"capitalize":""}`,children:s||"N/A"})]}),iA=()=>{const t=Je(),[s,a]=y.useState("pending"),[r,n]=y.useState(!1),[i,l]=y.useState(null),[c,o]=y.useState(""),[d,x]=y.useState([]),[u,m]=y.useState(!0),f=async()=>{try{const b=localStorage.getItem("token");let A;s==="pending"?A=`${it.apiBaseUrl}/manager/pending-leaves`:s==="approved"||s==="rejected"?A=`${it.apiBaseUrl}/manager/approval-history`:A=`${it.apiBaseUrl}/manager/approval-history`;const C=await(await fetch(A,{headers:{Authorization:`Bearer ${b}`}})).json();if(C.success){let k=C.data;s==="approved"?k=C.data.filter(S=>S.status==="approved"):s==="rejected"&&(k=C.data.filter(S=>S.status==="rejected")),x(k)}else _.error(C.message||"Failed to load leave requests");m(!1)}catch(b){console.error("Error fetching leave requests:",b),_.error("Failed to load leave requests"),m(!1)}};y.useEffect(()=>{f()},[s]);const g=y.useMemo(()=>{const b=d.reduce((A,N)=>(A[N.status]=(A[N.status]||0)+1,A),{});return[{id:"pending",label:"Pending",count:b.pending||0},{id:"approved",label:"Approved",count:b.approved||0},{id:"rejected",label:"Rejected",count:b.rejected||0}]},[d]),h=d,p=async b=>{try{const A=localStorage.getItem("token"),C=await(await fetch(`${it.apiBaseUrl}/manager/leave/${b}/approve`,{method:"PUT",headers:{Authorization:`Bearer ${A}`,"Content-Type":"application/json"},body:JSON.stringify({comments:""})})).json();C.success?(f(),_.success("Leave approved successfully")):_.error(C.message||"Failed to approve leave")}catch(A){console.error("Error approving leave:",A),_.error("Failed to approve leave")}},j=async()=>{if(!c.trim()){alert("Please provide a reason for rejection");return}try{const b=localStorage.getItem("token"),N=await(await fetch(`${it.apiBaseUrl}/manager/leave/${i}/reject`,{method:"PUT",headers:{Authorization:`Bearer ${b}`,"Content-Type":"application/json"},body:JSON.stringify({reason:c})})).json();N.success?(x(d.filter(C=>C._id!==i)),_.success("Leave rejected successfully")):_.error(N.message||"Failed to reject leave")}catch(b){console.error("Error rejecting leave:",b),_.error("Failed to reject leave")}n(!1),o(""),l(null)},v=b=>new Date(b).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),w=b=>{switch(b){case"approved":return"bg-green-500/20 text-green-400";case"rejected":return"bg-red-500/20 text-red-400";case"pending":return"bg-orange-500/20 text-orange-400";default:return"bg-gray-500/20 text-gray-400"}};return e.jsxs("div",{className:"min-h-screen bg-[#1E1E2A] p-4 md:p-6 pb-24 md:pb-6",children:[e.jsx("div",{className:"sticky top-0 z-10 bg-[#1E1E2A] border-b border-gray-800 px-4 py-4 -mx-4 mb-6",children:e.jsx("div",{className:"max-w-7xl mx-auto flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("button",{onClick:()=>t("/employee/manager/home"),className:"text-gray-400 hover:text-white transition-colors",children:e.jsx(xt,{className:"w-6 h-6"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold text-white",children:"Leave Approvals"}),e.jsx("p",{className:"text-gray-400 text-sm",children:"Review and approve team leave requests"})]})]})})}),e.jsxs("div",{className:"max-w-7xl mx-auto space-y-6",children:[e.jsx("div",{className:"flex items-center space-x-2 overflow-x-auto scrollbar-hide",children:g.map(b=>e.jsxs("button",{onClick:()=>a(b.id),className:`px-6 py-3 rounded-xl font-semibold whitespace-nowrap transition-all ${s===b.id?"bg-gradient-to-r from-[#A88BFF] to-[#8B6FE8] text-white shadow-lg":"bg-[#2A2A3A] text-gray-400 hover:text-white border border-gray-700"}`,children:[b.label,b.count>0&&e.jsx("span",{className:`ml-2 px-2 py-0.5 rounded-full text-xs ${s===b.id?"bg-white/20":"bg-gray-700"}`,children:b.count})]},b.id))}),e.jsx("div",{className:"space-y-4",children:u?e.jsxs("div",{className:"bg-[#2A2A3A] rounded-2xl p-12 border border-gray-700 text-center",children:[e.jsx(Be,{className:"w-16 h-16 text-gray-600 mx-auto mb-4 animate-spin"}),e.jsx("h3",{className:"text-white text-lg font-semibold mb-2",children:"Loading leave requests..."}),e.jsx("p",{className:"text-gray-400",children:"Please wait while we fetch the latest data."})]}):h.length>0?h.map(b=>e.jsxs("div",{className:"bg-[#2A2A3A] rounded-2xl p-6 border border-gray-700",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-[#A88BFF] to-[#8B6FE8] flex items-center justify-center",children:e.jsx("span",{className:"text-white font-bold text-lg",children:b.employeeName.charAt(0)})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-white font-semibold",children:b.employeeName}),e.jsx("p",{className:"text-gray-400 text-sm",children:b.employeeEmail})]})]}),e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${w(b.status)}`,children:b.status.toUpperCase()})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Oe,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{className:"text-gray-400 text-sm",children:"Leave Type:"}),e.jsx("span",{className:"text-white text-sm font-medium",children:b.leaveType})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{className:"text-gray-400 text-sm",children:"Duration:"}),e.jsxs("span",{className:"text-white text-sm font-medium",children:[b.numberOfDays," day(s)"]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-gray-400 text-sm",children:"From:"}),e.jsx("span",{className:"text-white text-sm font-medium",children:v(b.startDate)})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-gray-400 text-sm",children:"To:"}),e.jsx("span",{className:"text-white text-sm font-medium",children:v(b.endDate)})]})]})]}),e.jsx("div",{className:"p-4 bg-[#1E1E2A] rounded-xl mb-4",children:e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx(wn,{className:"w-4 h-4 text-gray-400 mt-1"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-400 text-sm mb-1",children:"Reason:"}),e.jsx("p",{className:"text-white text-sm",children:b.reason})]})]})}),e.jsxs("p",{className:"text-gray-400 text-xs mb-4",children:["Applied on: ",v(b.appliedOn)]}),b.status==="pending"&&e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("button",{onClick:()=>p(b._id),className:"flex-1 flex items-center justify-center space-x-2 px-4 py-3 bg-green-500 text-white rounded-xl hover:bg-green-600 transition-colors font-semibold",children:[e.jsx(Te,{className:"w-5 h-5"}),e.jsx("span",{children:"Approve"})]}),e.jsxs("button",{onClick:()=>{l(b._id),n(!0)},className:"flex-1 flex items-center justify-center space-x-2 px-4 py-3 bg-red-500 text-white rounded-xl hover:bg-red-600 transition-colors font-semibold",children:[e.jsx(Qe,{className:"w-5 h-5"}),e.jsx("span",{children:"Reject"})]})]}),b.status==="approved"&&e.jsxs("div",{className:"flex items-center space-x-2 text-green-400",children:[e.jsx(Te,{className:"w-5 h-5"}),e.jsxs("span",{className:"text-sm",children:["Approved on ",v(b.approvedOn)]})]})]},b._id)):e.jsxs("div",{className:"bg-[#2A2A3A] rounded-2xl p-12 border border-gray-700 text-center",children:[e.jsx(Be,{className:"w-16 h-16 text-gray-600 mx-auto mb-4"}),e.jsxs("h3",{className:"text-white text-lg font-semibold mb-2",children:["No ",s," requests"]}),e.jsxs("p",{className:"text-gray-400",children:["There are no ",s," leave requests at the moment"]})]})})]}),r&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-[#2A2A3A] rounded-2xl p-6 max-w-md w-full border border-gray-700",children:[e.jsx("h3",{className:"text-white text-lg font-semibold mb-4",children:"Reject Leave Request"}),e.jsx("p",{className:"text-gray-400 text-sm mb-4",children:"Please provide a reason for rejecting this leave request."}),e.jsx("textarea",{value:c,onChange:b=>o(b.target.value),placeholder:"Enter rejection reason...",className:"w-full bg-[#1E1E2A] text-white p-4 rounded-xl border border-gray-700 focus:border-[#A88BFF] focus:outline-none mb-4 min-h-[100px]"}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:j,className:"flex-1 px-4 py-3 bg-red-500 text-white rounded-xl hover:bg-red-600 transition-colors font-semibold",children:"Confirm Reject"}),e.jsx("button",{onClick:()=>{n(!1),o(""),l(null)},className:"flex-1 px-4 py-3 bg-gray-700 text-white rounded-xl hover:bg-gray-600 transition-colors font-semibold",children:"Cancel"})]})]})}),e.jsx(qt,{})]})},lA=()=>{const t=Je(),[s,a]=y.useState({projectName:"",description:"",startDate:"",endDate:"",priority:"medium",selectedEmployees:[],clientId:"",location:""}),[r,n]=y.useState([]),[i,l]=y.useState([]),[c,o]=y.useState(!0),[d,x]=y.useState(!1);y.useEffect(()=>{(async()=>{try{const g=localStorage.getItem("token"),[h,p]=await Promise.all([fetch(`${it.apiBaseUrl}/manager/team-members`,{headers:{Authorization:`Bearer ${g}`}}),fetch(`${it.apiBaseUrl}/manager/clients`,{headers:{Authorization:`Bearer ${g}`}})]),j=await h.json(),v=await p.json();if(j.success){const w=j.data.map(b=>({id:b._id,name:`${b.firstName} ${b.lastName}`,designation:b.designation||"Employee",avatar:`${b.firstName.charAt(0)}${b.lastName.charAt(0)}`}));n(w)}else _.error(j.message||"Unable to load team members");v.success?l(v.data||[]):_.error(v.message||"Unable to load clients")}catch(g){console.error("Error fetching team members:",g),_.error("Failed to load assignment details")}finally{o(!1)}})()},[]);const u=f=>{a(g=>({...g,selectedEmployees:g.selectedEmployees.includes(f)?g.selectedEmployees.filter(h=>h!==f):[...g.selectedEmployees,f]}))},m=async f=>{if(f.preventDefault(),!s.clientId){_.error("Select a client for this project");return}if(!s.location.trim()){_.error("Project location is required");return}if(s.selectedEmployees.length===0){_.error("Select at least one team member");return}try{x(!0);const g=localStorage.getItem("token"),p=await(await fetch(`${it.apiBaseUrl}/manager/projects`,{headers:{Authorization:`Bearer ${g}`,"Content-Type":"application/json"},method:"POST",body:JSON.stringify({projectName:s.projectName,description:s.description,startDate:s.startDate,endDate:s.endDate,priority:s.priority,clientId:s.clientId,location:s.location,selectedEmployees:s.selectedEmployees})})).json();p.success?(_.success("Project submitted for approval successfully"),t("/employee/manager/projects")):_.error(p.message||"Failed to submit project for approval")}catch(g){console.error("Error assigning project:",g),_.error("Failed to assign project")}finally{x(!1)}};return e.jsxs("div",{className:"min-h-screen bg-[#1E1E2A] p-4 md:p-6 pb-24 md:pb-6",children:[e.jsx("div",{className:"sticky top-0 z-10 bg-[#1E1E2A] border-b border-gray-800 px-4 py-4 -mx-4 mb-6",children:e.jsxs("div",{className:"max-w-3xl mx-auto flex items-center space-x-4",children:[e.jsx("button",{onClick:()=>t("/employee/manager/home"),className:"text-gray-400 hover:text-white transition-colors",children:e.jsx(xt,{className:"w-6 h-6"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold text-white",children:"Submit Project for Approval"}),e.jsx("p",{className:"text-gray-400 text-sm",children:"Create project and submit for admin approval"})]})]})}),e.jsx("div",{className:"max-w-3xl mx-auto",children:e.jsxs("form",{onSubmit:m,className:"space-y-6",children:[e.jsxs("div",{className:"bg-[#2A2A3A] rounded-2xl p-6 border border-gray-700",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-[#A88BFF] to-[#8B6FE8] flex items-center justify-center",children:e.jsx(ot,{className:"w-5 h-5 text-white"})}),e.jsx("h2",{className:"text-white text-lg font-semibold",children:"Project Details"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-sm mb-2 block",children:"Project Name *"}),e.jsx("input",{type:"text",required:!0,value:s.projectName,onChange:f=>a({...s,projectName:f.target.value}),placeholder:"Enter project name",className:"w-full bg-[#1E1E2A] text-white p-4 rounded-xl border border-gray-700 focus:border-[#A88BFF] focus:outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-sm mb-2 block",children:"Description *"}),e.jsx("textarea",{required:!0,value:s.description,onChange:f=>a({...s,description:f.target.value}),placeholder:"Describe the project objectives and scope",className:"w-full bg-[#1E1E2A] text-white p-4 rounded-xl border border-gray-700 focus:border-[#A88BFF] focus:outline-none min-h-[100px]"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-sm mb-2 block",children:"Client *"}),e.jsxs("select",{required:!0,value:s.clientId,onChange:f=>a({...s,clientId:f.target.value}),className:"w-full bg-[#1E1E2A] text-white p-4 rounded-xl border border-gray-700 focus:border-[#A88BFF] focus:outline-none",children:[e.jsx("option",{value:"",disabled:!0,children:"Select client"}),i.map(f=>e.jsxs("option",{value:f._id,children:[f.name||f.companyName," (",f.clientCode,")"]},f._id||f.clientCode))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-sm mb-2 block",children:"Project Location *"}),e.jsx("input",{type:"text",required:!0,value:s.location,onChange:f=>a({...s,location:f.target.value}),placeholder:"e.g., Bengaluru / Remote",className:"w-full bg-[#1E1E2A] text-white p-4 rounded-xl border border-gray-700 focus:border-[#A88BFF] focus:outline-none"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-sm mb-2 block",children:"Start Date *"}),e.jsx("input",{type:"date",required:!0,value:s.startDate,onChange:f=>a({...s,startDate:f.target.value}),className:"w-full bg-[#1E1E2A] text-white p-4 rounded-xl border border-gray-700 focus:border-[#A88BFF] focus:outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-sm mb-2 block",children:"End Date *"}),e.jsx("input",{type:"date",required:!0,value:s.endDate,onChange:f=>a({...s,endDate:f.target.value}),className:"w-full bg-[#1E1E2A] text-white p-4 rounded-xl border border-gray-700 focus:border-[#A88BFF] focus:outline-none"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-sm mb-2 block",children:"Priority"}),e.jsxs("select",{value:s.priority,onChange:f=>a({...s,priority:f.target.value}),className:"w-full bg-[#1E1E2A] text-white p-4 rounded-xl border border-gray-700 focus:border-[#A88BFF] focus:outline-none",children:[e.jsx("option",{value:"low",children:"Low"}),e.jsx("option",{value:"medium",children:"Medium"}),e.jsx("option",{value:"high",children:"High"})]})]})]})]}),e.jsxs("div",{className:"bg-[#2A2A3A] rounded-2xl p-6 border border-gray-700",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-[#A88BFF] to-[#8B6FE8] flex items-center justify-center",children:e.jsx(Ue,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h2",{className:"text-white text-lg font-semibold",children:"Assign Team Members"}),e.jsxs("p",{className:"text-gray-400 text-sm",children:[s.selectedEmployees.length," member(s) selected"]})]})]}),c?e.jsx("div",{className:"flex items-center justify-center py-8 text-gray-400",children:"Loading team members..."}):e.jsx("div",{className:"space-y-3",children:r.map(f=>e.jsxs("div",{onClick:()=>u(f.id),className:`flex items-center justify-between p-4 rounded-xl cursor-pointer transition-all ${s.selectedEmployees.includes(f.id)?"bg-[#A88BFF]/20 border-2 border-[#A88BFF]":"bg-[#1E1E2A] border-2 border-transparent hover:border-gray-700"}`,children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-[#A88BFF] to-[#8B6FE8] flex items-center justify-center",children:e.jsx("span",{className:"text-white font-bold",children:f.avatar})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-white font-medium",children:f.name}),e.jsx("p",{className:"text-gray-400 text-sm",children:f.designation})]})]}),s.selectedEmployees.includes(f.id)&&e.jsx("div",{className:"w-6 h-6 rounded-full bg-[#A88BFF] flex items-center justify-center",children:e.jsx("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})})]},f.id))})]}),e.jsx("button",{type:"submit",disabled:d||s.selectedEmployees.length===0||!s.clientId||!s.location.trim(),className:"w-full bg-gradient-to-r from-[#A88BFF] to-[#8B6FE8] text-white py-4 rounded-2xl font-semibold shadow-lg hover:shadow-xl transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:d?"Submitting for Approval...":"Submit Project for Approval"})]})}),e.jsx(qt,{})]})},cA=()=>{const t=Je(),[s,a]=y.useState({current:[],pending:[],rejected:[],past:[],all:[]}),[r,n]=y.useState(!0),[i,l]=y.useState("all");y.useEffect(()=>{c()},[]);const c=async()=>{try{const h=localStorage.getItem("token"),j=await(await fetch(`${it.apiBaseUrl}/manager/projects`,{headers:{Authorization:`Bearer ${h}`}})).json();j.success?(a(j.data),console.log("Manager projects loaded:",j.data)):_.error(j.message||"Failed to load projects")}catch(h){console.error("Error fetching projects:",h),_.error("Failed to load projects")}finally{n(!1)}},o=h=>{switch(h){case"pending":return"bg-yellow-500/20 text-yellow-400 border-yellow-500/30";case"approved":return"bg-green-500/20 text-green-400 border-green-500/30";case"rejected":return"bg-red-500/20 text-red-400 border-red-500/30";case"active":return"bg-blue-500/20 text-blue-400 border-blue-500/30";default:return"bg-gray-500/20 text-gray-400 border-gray-500/30"}},d=h=>{switch(h){case"high":return"bg-red-500/20 text-red-400";case"medium":return"bg-yellow-500/20 text-yellow-400";case"low":return"bg-green-500/20 text-green-400";default:return"bg-gray-500/20 text-gray-400"}},x=h=>new Date(h).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),u=h=>{switch(h){case"current":return s.current.length;case"pending":return s.pending.length;case"rejected":return s.rejected.length;case"past":return s.past.length;default:return s.all.length}},m=h=>{switch(h){case"current":return s.current;case"pending":return s.pending;case"rejected":return s.rejected;case"past":return s.past;default:return s.all}},f=[{id:"all",label:"All Projects",icon:ot},{id:"current",label:"Active",icon:Te},{id:"pending",label:"Pending Approval",icon:Be},{id:"rejected",label:"Rejected",icon:Qe},{id:"past",label:"Completed",icon:Oe}];if(r)return e.jsx("div",{className:"min-h-screen bg-[#1E1E2A] p-4 md:p-6 pb-24 md:pb-6 flex items-center justify-center",children:e.jsx("div",{className:"text-white",children:"Loading projects..."})});const g=m(i);return e.jsxs("div",{className:"min-h-screen bg-[#1E1E2A] p-4 md:p-6 pb-24 md:pb-6",children:[e.jsx("div",{className:"sticky top-0 z-10 bg-[#1E1E2A] border-b border-gray-800 px-4 py-4 -mx-4 mb-6",children:e.jsxs("div",{className:"max-w-6xl mx-auto flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("button",{onClick:()=>t("/employee/manager/home"),className:"text-gray-400 hover:text-white transition-colors",children:e.jsx(xt,{className:"w-6 h-6"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold text-white",children:"My Projects"}),e.jsx("p",{className:"text-gray-400 text-sm",children:"Manage and track project assignments"})]})]}),e.jsxs("button",{onClick:()=>t("/employee/manager/assign-project"),className:"bg-gradient-to-r from-[#A88BFF] to-[#8B6FE8] text-white px-4 py-2 rounded-xl flex items-center space-x-2 hover:shadow-lg transition-all",children:[e.jsx(qe,{className:"w-4 h-4"}),e.jsx("span",{children:"New Project"})]})]})}),e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsx("div",{className:"flex space-x-1 mb-6 bg-[#2A2A3A] p-1 rounded-xl",children:f.map(h=>{const p=h.icon,j=u(h.id);return e.jsxs("button",{onClick:()=>l(h.id),className:`flex-1 flex items-center justify-center space-x-2 px-4 py-3 rounded-lg transition-all ${i===h.id?"bg-[#A88BFF] text-white":"text-gray-400 hover:text-white hover:bg-[#3A3A4A]"}`,children:[e.jsx(p,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-medium",children:h.label}),j>0&&e.jsx("span",{className:"bg-[#1E1E2A] text-white text-xs px-2 py-1 rounded-full",children:j})]},h.id)})}),g.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(ot,{className:"w-16 h-16 text-gray-500 mx-auto mb-4"}),e.jsx("h3",{className:"text-white text-lg font-medium mb-2",children:"No Projects Found"}),e.jsx("p",{className:"text-gray-400",children:i==="pending"?"No projects pending approval":i==="rejected"?"No rejected projects":"No projects found. Create your first project!"}),i==="all"&&e.jsx("button",{onClick:()=>t("/employee/manager/assign-project"),className:"mt-4 bg-gradient-to-r from-[#A88BFF] to-[#8B6FE8] text-white px-6 py-3 rounded-xl font-medium hover:shadow-lg transition-all",children:"Create Your First Project"})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:g.map(h=>{var p,j,v;return e.jsxs("div",{className:"bg-[#2A2A3A] rounded-2xl border border-gray-700 overflow-hidden hover:border-[#A88BFF]/50 transition-all",children:[e.jsxs("div",{className:"p-6 border-b border-gray-700",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsx("h3",{className:"text-white text-lg font-semibold line-clamp-2",children:h.name}),e.jsxs("div",{className:"flex flex-col space-y-2",children:[e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${d(h.priority)}`,children:(p=h.priority)==null?void 0:p.toUpperCase()}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium border ${o(h.approvalStatus)}`,children:(j=h.approvalStatus)==null?void 0:j.toUpperCase()})]})]}),e.jsx("p",{className:"text-gray-400 text-sm line-clamp-3 mb-3",children:h.description}),e.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-400",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(ot,{className:"w-4 h-4"}),e.jsx("span",{children:h.projectCode})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(Oe,{className:"w-4 h-4"}),e.jsx("span",{children:x(h.startDate)})]})]})]}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"space-y-3 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500",children:"Client:"}),e.jsx("span",{className:"text-white",children:((v=h.client)==null?void 0:v.name)||"N/A"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500",children:"Team Size:"}),e.jsx("span",{className:"text-white",children:h.teamSize||0})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500",children:"Your Role:"}),e.jsx("span",{className:"text-white",children:h.managerRole})]}),h.submittedAt&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500",children:"Submitted:"}),e.jsx("span",{className:"text-white",children:x(h.submittedAt)})]}),h.approvedAt&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500",children:"Approved:"}),e.jsx("span",{className:"text-white",children:x(h.approvedAt)})]}),h.rejectionReason&&e.jsxs("div",{className:"mt-3 p-3 bg-red-500/20 border border-red-500/30 rounded-lg",children:[e.jsx("span",{className:"text-red-400 text-xs font-medium",children:"Rejection Reason:"}),e.jsx("p",{className:"text-red-300 text-sm mt-1",children:h.rejectionReason})]})]}),h.approvalStatus==="pending"&&h.canEdit&&e.jsx("button",{onClick:()=>t("/employee/manager/assign-project"),className:"w-full mt-4 bg-yellow-500 hover:bg-yellow-600 text-white py-2 rounded-lg font-medium transition-colors",children:"Edit Project"})]})]},h._id)})})]}),e.jsx(qt,{})]})},oA=()=>{const t=Je(),[s,a]=y.useState({title:"",description:"",date:"",time:"",duration:"30",meetingType:"online",location:"",meetingLink:"",selectedAttendees:[]}),[r,n]=y.useState([]),[i,l]=y.useState(!1);y.useEffect(()=>{(async()=>{try{const x=localStorage.getItem("token"),m=await(await fetch(`${it.apiBaseUrl}/manager/team-members`,{headers:{Authorization:`Bearer ${x}`}})).json();if(m.success){const f=m.data.map(g=>({id:g._id,name:`${g.firstName} ${g.lastName}`,designation:g.designation||"Employee"}));n(f)}}catch(x){console.error("Error fetching team members:",x)}})()},[]);const c=d=>{a(x=>({...x,selectedAttendees:x.selectedAttendees.includes(d)?x.selectedAttendees.filter(u=>u!==d):[...x.selectedAttendees,d]}))},o=async d=>{if(d.preventDefault(),s.meetingType==="online"&&!s.meetingLink.trim()){_.error("Please provide a meeting link for online meetings");return}if(s.meetingType==="offline"&&!s.location.trim()){_.error("Please specify meeting location for offline meetings");return}if(s.selectedAttendees.length===0){_.error("Select at least one attendee");return}try{l(!0);const x=localStorage.getItem("token");if(!x){_.error("Authentication token missing");return}const u={title:s.title,description:s.description,meetingDate:s.date,startTime:s.time,duration:Number(s.duration),meetingType:s.meetingType,location:s.meetingType==="offline"?s.location:void 0,meetingLink:s.meetingType==="online"?s.meetingLink:void 0,attendees:s.selectedAttendees},f=await(await fetch(`${it.apiBaseUrl}/manager/meetings`,{method:"POST",headers:{Authorization:`Bearer ${x}`,"Content-Type":"application/json"},body:JSON.stringify(u)})).json();f.success?(_.success("Meeting scheduled successfully"),t("/employee/manager/home")):_.error(f.message||"Failed to schedule meeting")}catch(x){console.error("Error scheduling meeting:",x),_.error("Failed to schedule meeting")}finally{l(!1)}};return e.jsxs("div",{className:"min-h-screen bg-[#1E1E2A] p-4 md:p-6 pb-24 md:pb-6",children:[e.jsx("div",{className:"sticky top-0 z-10 bg-[#1E1E2A] border-b border-gray-800 px-4 py-4 -mx-4 mb-6",children:e.jsxs("div",{className:"max-w-3xl mx-auto flex items-center space-x-4",children:[e.jsx("button",{onClick:()=>t("/employee/manager/home"),className:"text-gray-400 hover:text-white",children:e.jsx(xt,{className:"w-6 h-6"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold text-white",children:"Schedule Meeting"}),e.jsx("p",{className:"text-gray-400 text-sm",children:"Create a new team meeting"})]})]})}),e.jsx("div",{className:"max-w-3xl mx-auto",children:e.jsxs("form",{onSubmit:o,className:"space-y-6",children:[e.jsxs("div",{className:"bg-[#2A2A3A] rounded-2xl p-6 border border-gray-700 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-sm mb-2 block",children:"Meeting Title *"}),e.jsx("input",{type:"text",required:!0,value:s.title,onChange:d=>a({...s,title:d.target.value}),placeholder:"e.g., Sprint Planning, Team Standup",className:"w-full bg-[#1E1E2A] text-white p-4 rounded-xl border border-gray-700 focus:border-[#A88BFF] focus:outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-sm mb-2 block",children:"Description"}),e.jsx("textarea",{value:s.description,onChange:d=>a({...s,description:d.target.value}),placeholder:"Meeting agenda and objectives",className:"w-full bg-[#1E1E2A] text-white p-4 rounded-xl border border-gray-700 focus:border-[#A88BFF] focus:outline-none min-h-[80px]"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-sm mb-2 block",children:"Date *"}),e.jsx("input",{type:"date",required:!0,value:s.date,onChange:d=>a({...s,date:d.target.value}),className:"w-full bg-[#1E1E2A] text-white p-4 rounded-xl border border-gray-700 focus:border-[#A88BFF] focus:outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-sm mb-2 block",children:"Time *"}),e.jsx("input",{type:"time",required:!0,value:s.time,onChange:d=>a({...s,time:d.target.value}),className:"w-full bg-[#1E1E2A] text-white p-4 rounded-xl border border-gray-700 focus:border-[#A88BFF] focus:outline-none"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-sm mb-2 block",children:"Duration (minutes)"}),e.jsxs("select",{value:s.duration,onChange:d=>a({...s,duration:d.target.value}),className:"w-full bg-[#1E1E2A] text-white p-4 rounded-xl border border-gray-700 focus:border-[#A88BFF] focus:outline-none",children:[e.jsx("option",{value:"15",children:"15 minutes"}),e.jsx("option",{value:"30",children:"30 minutes"}),e.jsx("option",{value:"45",children:"45 minutes"}),e.jsx("option",{value:"60",children:"1 hour"}),e.jsx("option",{value:"90",children:"1.5 hours"}),e.jsx("option",{value:"120",children:"2 hours"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-sm mb-2 block",children:"Meeting Type"}),e.jsxs("select",{value:s.meetingType,onChange:d=>a({...s,meetingType:d.target.value}),className:"w-full bg-[#1E1E2A] text-white p-4 rounded-xl border border-gray-700 focus:border-[#A88BFF] focus:outline-none",children:[e.jsx("option",{value:"online",children:"Online"}),e.jsx("option",{value:"offline",children:"Offline"})]})]})]}),s.meetingType==="offline"&&e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-sm mb-2 block",children:"Location"}),e.jsx("input",{type:"text",value:s.location,onChange:d=>a({...s,location:d.target.value}),placeholder:"Meeting room or location",className:"w-full bg-[#1E1E2A] text-white p-4 rounded-xl border border-gray-700 focus:border-[#A88BFF] focus:outline-none"})]}),s.meetingType==="online"&&e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-sm mb-2 block",children:"Meeting Link *"}),e.jsxs("div",{className:"flex items-center space-x-3 bg-[#1E1E2A] text-white p-4 rounded-xl border border-gray-700 focus-within:border-[#A88BFF]",children:[e.jsx(Fg,{className:"w-5 h-5 text-[#A88BFF]"}),e.jsx("input",{type:"url",required:!0,value:s.meetingLink,onChange:d=>a({...s,meetingLink:d.target.value}),placeholder:"https://meet.google.com/...",className:"bg-transparent flex-1 focus:outline-none"})]})]})]}),e.jsxs("div",{className:"bg-[#2A2A3A] rounded-2xl p-6 border border-gray-700",children:[e.jsxs("h3",{className:"text-white font-semibold mb-4",children:["Select Attendees (",s.selectedAttendees.length,")"]}),e.jsx("div",{className:"space-y-2",children:r.map(d=>e.jsx("label",{className:`flex items-center justify-between p-3 rounded-xl cursor-pointer transition-all ${s.selectedAttendees.includes(d.id)?"bg-[#A88BFF]/20 border border-[#A88BFF]":"bg-[#1E1E2A] hover:bg-[#1E1E2A]/50"}`,children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("input",{type:"checkbox",checked:s.selectedAttendees.includes(d.id),onChange:()=>c(d.id),className:"w-5 h-5 rounded accent-[#A88BFF]"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-white font-medium",children:d.name}),e.jsx("p",{className:"text-gray-400 text-sm",children:d.designation})]})]})},d.id))})]}),e.jsx("button",{type:"submit",disabled:i||s.selectedAttendees.length===0||!s.title.trim()||!s.date||!s.time||s.meetingType==="online"&&!s.meetingLink.trim()||s.meetingType==="offline"&&!s.location.trim(),className:"w-full bg-gradient-to-r from-[#A88BFF] to-[#8B6FE8] text-white py-4 rounded-2xl font-semibold shadow-lg hover:shadow-xl transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:i?"Scheduling...":"Schedule Meeting"})]})}),e.jsx(qt,{})]})},dA=()=>{const t=Je(),[s,a]=y.useState(!1),[r,n]=y.useState({title:"",message:"",priority:"normal",sendTo:"team"}),[i,l]=y.useState([]);y.useEffect(()=>{(async()=>{})()},[]);const c=x=>{x.preventDefault();const u={id:Date.now(),...r,createdAt:new Date().toISOString().split("T")[0],createdBy:"You"};l([u,...i]),n({title:"",message:"",priority:"normal",sendTo:"team"}),a(!1)},o=x=>{l(i.filter(u=>u.id!==x))},d=x=>{switch(x){case"high":return"bg-red-500/20 text-red-400";case"normal":return"bg-blue-500/20 text-blue-400";case"low":return"bg-gray-500/20 text-gray-400";default:return"bg-gray-500/20 text-gray-400"}};return e.jsxs("div",{className:"min-h-screen bg-[#1E1E2A] p-4 md:p-6 pb-24 md:pb-6",children:[e.jsx("div",{className:"sticky top-0 z-10 bg-[#1E1E2A] border-b border-gray-800 px-4 py-4 -mx-4 mb-6",children:e.jsxs("div",{className:"max-w-4xl mx-auto flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("button",{onClick:()=>t("/employee/manager/home"),className:"text-gray-400 hover:text-white",children:e.jsx(xt,{className:"w-6 h-6"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold text-white",children:"Announcements"}),e.jsx("p",{className:"text-gray-400 text-sm",children:"Create and manage team announcements"})]})]}),e.jsxs("button",{onClick:()=>a(!s),className:"flex items-center space-x-2 px-4 py-2 bg-gradient-to-r from-[#A88BFF] to-[#8B6FE8] text-white rounded-xl hover:shadow-lg transition-all",children:[e.jsx(wn,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden md:inline",children:"New"})]})]})}),e.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[s&&e.jsxs("div",{className:"bg-[#2A2A3A] rounded-2xl p-6 border border-gray-700",children:[e.jsx("h3",{className:"text-white text-lg font-semibold mb-4",children:"Create Announcement"}),e.jsxs("form",{onSubmit:c,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-sm mb-2 block",children:"Title *"}),e.jsx("input",{type:"text",required:!0,value:r.title,onChange:x=>n({...r,title:x.target.value}),placeholder:"Announcement title",className:"w-full bg-[#1E1E2A] text-white p-4 rounded-xl border border-gray-700 focus:border-[#A88BFF] focus:outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-sm mb-2 block",children:"Message *"}),e.jsx("textarea",{required:!0,value:r.message,onChange:x=>n({...r,message:x.target.value}),placeholder:"Write your announcement message...",className:"w-full bg-[#1E1E2A] text-white p-4 rounded-xl border border-gray-700 focus:border-[#A88BFF] focus:outline-none min-h-[120px]"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-sm mb-2 block",children:"Priority"}),e.jsxs("select",{value:r.priority,onChange:x=>n({...r,priority:x.target.value}),className:"w-full bg-[#1E1E2A] text-white p-4 rounded-xl border border-gray-700 focus:border-[#A88BFF] focus:outline-none",children:[e.jsx("option",{value:"low",children:"Low"}),e.jsx("option",{value:"normal",children:"Normal"}),e.jsx("option",{value:"high",children:"High"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-sm mb-2 block",children:"Send To"}),e.jsxs("select",{value:r.sendTo,onChange:x=>n({...r,sendTo:x.target.value}),className:"w-full bg-[#1E1E2A] text-white p-4 rounded-xl border border-gray-700 focus:border-[#A88BFF] focus:outline-none",children:[e.jsx("option",{value:"team",children:"My Team"}),e.jsx("option",{value:"department",children:"Entire Department"}),e.jsx("option",{value:"company",children:"All Employees"})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("button",{type:"submit",className:"flex-1 flex items-center justify-center space-x-2 px-4 py-3 bg-gradient-to-r from-[#A88BFF] to-[#8B6FE8] text-white rounded-xl hover:shadow-lg transition-all font-semibold",children:[e.jsx(Gn,{className:"w-5 h-5"}),e.jsx("span",{children:"Send Announcement"})]}),e.jsx("button",{type:"button",onClick:()=>a(!1),className:"px-4 py-3 bg-gray-700 text-white rounded-xl hover:bg-gray-600 transition-colors font-semibold",children:"Cancel"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-white font-semibold",children:["Recent Announcements (",i.length,")"]}),i.length>0?i.map(x=>e.jsx("div",{className:"bg-[#2A2A3A] rounded-2xl p-6 border border-gray-700",children:e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex items-start space-x-4 flex-1",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-[#A88BFF] to-[#8B6FE8] flex items-center justify-center flex-shrink-0",children:e.jsx(Da,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[e.jsx("h3",{className:"text-white font-semibold",children:x.title}),e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${d(x.priority)}`,children:x.priority.toUpperCase()})]}),e.jsx("p",{className:"text-gray-300 text-sm mb-3",children:x.message}),e.jsxs("div",{className:"flex items-center space-x-4 text-xs text-gray-400",children:[e.jsxs("span",{children:["By ",x.createdBy]}),e.jsx("span",{children:"â€¢"}),e.jsx("span",{children:new Date(x.createdAt).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})})]})]})]}),e.jsx("button",{onClick:()=>o(x.id),className:"p-2 text-gray-400 hover:text-red-400 hover:bg-red-500/10 rounded-lg transition-colors",children:e.jsx(kt,{className:"w-5 h-5"})})]})},x.id)):e.jsxs("div",{className:"bg-[#2A2A3A] rounded-2xl p-12 border border-gray-700 text-center",children:[e.jsx(Da,{className:"w-16 h-16 text-gray-600 mx-auto mb-4"}),e.jsx("h3",{className:"text-white text-lg font-semibold mb-2",children:"No Announcements"}),e.jsx("p",{className:"text-gray-400",children:"Create your first announcement to notify your team"})]})]})]}),e.jsx(qt,{})]})},Gu={totalMembers:0,present:0,onLeave:0},xA=()=>{var m;const t=Je(),[s,a]=y.useState(!0),[r,n]=y.useState(Gu),[i,l]=y.useState([]),[c,o]=y.useState({current:[],past:[]}),[d,x]=y.useState(null);y.useEffect(()=>{const f=localStorage.getItem("token");if(!f){x("Authentication token missing. Please login again."),a(!1);return}(async()=>{try{a(!0);const h={Authorization:`Bearer ${f}`},[p,j,v]=await Promise.all([fetch(`${it.apiBaseUrl}/manager/team-stats`,{headers:h}),fetch(`${it.apiBaseUrl}/manager/team-members`,{headers:h}),fetch(`${it.apiBaseUrl}/manager/projects`,{headers:h})]),[w,b,A]=await Promise.all([p.json(),j.json(),v.json()]);if(!w.success)throw new Error(w.message||"Unable to load team statistics");if(!b.success)throw new Error(b.message||"Unable to load team members");if(!A.success)throw new Error(A.message||"Unable to load projects");n(w.data||Gu),l(b.data||[]),o(A.data||{current:[],past:[]}),x(null)}catch(h){console.error("Failed to load team reports:",h);const p=(h==null?void 0:h.message)||"Failed to load team reports";p.toLowerCase().includes("client must be connected")?x("Unable to reach the tenant database. Please ensure the backend is running and refresh the page."):x(p)}finally{a(!1)}})()},[]);const u=y.useMemo(()=>{const f=r.totalMembers||0,g=r.present||0,h=r.onLeave||0,p=Math.max(f-g-h,0),j=f>0?Math.round(g/f*100):0;return{total:f,present:g,onLeave:h,absent:p,rate:j}},[r]);return e.jsxs("div",{className:"min-h-screen bg-[#1E1E2A] pb-24 md:pb-6",children:[e.jsx("div",{className:"sticky top-0 z-10 bg-[#1E1E2A] border-b border-gray-800 px-4 py-4",children:e.jsx("div",{className:"max-w-7xl mx-auto flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:()=>t("/employee/manager/home"),className:"text-gray-400 hover:text-white transition-colors","aria-label":"Back to Manager Home",children:e.jsx(xt,{className:"w-6 h-6"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold text-white",children:"Team Reports"}),e.jsx("p",{className:"text-gray-400 text-sm",children:"Overview of your team performance and staffing"})]})]})})}),e.jsx("div",{className:"max-w-7xl mx-auto px-4 py-6 space-y-6",children:s?e.jsxs("div",{className:"flex flex-col items-center justify-center py-16 card",children:[e.jsx(Qt,{className:"w-10 h-10 text-[#A88BFF] animate-spin mb-3"}),e.jsx("p",{className:"text-gray-400",children:"Loading team reports..."})]}):d?e.jsxs("div",{className:"card border border-red-500/40 bg-red-500/10 text-red-200 p-6",children:[e.jsx("h2",{className:"text-lg font-semibold mb-2",children:"Unable to load team data"}),e.jsx("p",{className:"text-sm",children:d})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx(Xi,{icon:Ue,label:"Team Members",value:u.total,subtitle:"Total active members"}),e.jsx(Xi,{icon:Fr,label:"Present Today",value:u.present,accent:"text-green-400",subtitle:`Attendance rate ${u.rate}%`}),e.jsx(Xi,{icon:Tg,label:"On Leave",value:u.onLeave,accent:"text-yellow-400",subtitle:"Approved leaves"}),e.jsx(Xi,{icon:Be,label:"Absent",value:u.absent,accent:"text-red-400",subtitle:"Not checked-in today"})]}),e.jsxs("div",{className:"card p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-lg font-semibold text-white",children:"Team Composition"}),e.jsxs("span",{className:"text-sm text-gray-400",children:["Active members: ",i.length]})]}),i.length===0?e.jsx("p",{className:"text-gray-400 text-sm",children:"No team members assigned yet."}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"text-left text-sm text-gray-400",children:[e.jsx("th",{className:"pb-3",children:"Name"}),e.jsx("th",{className:"pb-3",children:"Email"}),e.jsx("th",{className:"pb-3",children:"Designation"}),e.jsx("th",{className:"pb-3",children:"Department"}),e.jsx("th",{className:"pb-3",children:"Employee Code"})]})}),e.jsx("tbody",{className:"text-sm text-gray-300 divide-y divide-gray-800",children:i.map(f=>{var g;return e.jsxs("tr",{className:"hover:bg-[#2A2A3A] transition-colors",children:[e.jsxs("td",{className:"py-3 pr-4 font-medium text-white",children:[f.firstName," ",f.lastName]}),e.jsx("td",{className:"py-3 pr-4",children:f.email}),e.jsx("td",{className:"py-3 pr-4",children:f.designation||"â€”"}),e.jsx("td",{className:"py-3 pr-4",children:((g=f.department)==null?void 0:g.name)||f.department||"â€”"}),e.jsx("td",{className:"py-3 pr-4",children:f.employeeCode||"â€”"})]},f._id)})})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[e.jsx(Yu,{title:"Active Projects",projects:c.current,emptyMessage:"No active projects"}),e.jsx(Yu,{title:"Recent Projects",projects:((m=c.past)==null?void 0:m.slice(0,5))||[],emptyMessage:"No recent projects"})]})]})}),e.jsx(qt,{})]})},Xi=({icon:t,label:s,value:a,subtitle:r,accent:n})=>e.jsxs("div",{className:"card p-5",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-400",children:s}),e.jsx("p",{className:"text-2xl font-bold text-white",children:a})]}),e.jsx("div",{className:"p-3 rounded-xl bg-[#A88BFF]/10",children:e.jsx(t,{className:`w-6 h-6 text-[#A88BFF] ${n||""}`})})]}),r&&e.jsx("p",{className:"text-xs text-gray-500 mt-3",children:r})]}),Yu=({title:t,projects:s,emptyMessage:a})=>e.jsxs("div",{className:"card p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h2",{className:"text-lg font-semibold text-white flex items-center gap-2",children:[e.jsx(ot,{className:"w-5 h-5 text-[#A88BFF]"}),t]}),e.jsxs("span",{className:"text-xs text-gray-400 uppercase tracking-wide",children:[s.length," Projects"]})]}),s.length===0?e.jsx("p",{className:"text-gray-400 text-sm",children:a}):e.jsx("div",{className:"space-y-3",children:s.map(r=>{var n,i;return e.jsxs("div",{className:"bg-[#1E1E2A] rounded-xl p-4 border border-gray-800",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-white font-medium",children:r.name}),e.jsx("p",{className:"text-xs text-gray-500",children:r.projectCode})]}),e.jsx("span",{className:"text-xs text-gray-400 capitalize",children:r.status})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-3 text-xs text-gray-400",children:[e.jsxs("span",{children:[e.jsx("span",{className:"text-gray-500",children:"Client:"})," ",((n=r.client)==null?void 0:n.name)||"â€”"]}),e.jsxs("span",{children:[e.jsx("span",{className:"text-gray-500",children:"Team Size:"})," ",r.teamSize||((i=r.teamMembers)==null?void 0:i.length)||0]}),e.jsxs("span",{children:[e.jsx("span",{className:"text-gray-500",children:"Role:"})," ",r.managerRole||"â€”"]}),e.jsxs("span",{children:[e.jsx("span",{className:"text-gray-500",children:"Duration:"})," ",uA(r.startDate,r.endDate)]})]})]},r._id)})})]}),uA=(t,s)=>{if(!t)return"â€”";const a=new Date(t).toLocaleDateString(),r=s?new Date(s).toLocaleDateString():"Present";return`${a} â†’ ${r}`},mA=async()=>(await J.get("/dashboard/hr/stats")).data,hA=()=>{var m,f,g,h,p,j,v,w;const t=Je(),[s,a]=y.useState({totalEmployees:0,pendingLeaves:0,payrollThisMonth:0,openPositions:0,recruitment:{totalApplications:0,shortlisted:0,interviewScheduled:0,selected:0,rejected:0},onboarding:{total:0,preboarding:0,inProgress:0,completed:0}}),[r,n]=y.useState(!0),[i,l]=y.useState("");y.useEffect(()=>{c()},[]);const c=async()=>{var b,A;n(!0),l("");try{const N=await mA();N.success?a(N.data):(l(N.message||"Failed to load dashboard stats"),_.error(N.message||"Failed to load dashboard stats"))}catch(N){const C=((A=(b=N.response)==null?void 0:b.data)==null?void 0:A.message)||"Failed to load dashboard stats";l(C),_.error(C)}finally{n(!1)}},o=b=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:0,maximumFractionDigits:0}).format(b),d=[{name:"Total Employees",value:s.totalEmployees.toString(),icon:Ue,color:"from-blue-500 to-blue-600"},{name:"Pending Leaves",value:s.pendingLeaves.toString(),icon:Oe,color:"from-orange-500 to-orange-600"},{name:"Payroll This Month",value:o(s.payrollThisMonth),icon:gt,color:"from-green-500 to-green-600"},{name:"Open Positions",value:s.openPositions.toString(),icon:ot,color:"from-purple-500 to-purple-600"}],x=[{name:"Total Applications",value:((m=s.recruitment)==null?void 0:m.totalApplications)||0,icon:Ue,color:"from-cyan-500 to-cyan-600"},{name:"Shortlisted",value:((f=s.recruitment)==null?void 0:f.shortlisted)||0,icon:Fr,color:"from-green-500 to-green-600"},{name:"Interview Scheduled",value:((g=s.recruitment)==null?void 0:g.interviewScheduled)||0,icon:Oe,color:"from-blue-500 to-blue-600"},{name:"Selected",value:((h=s.recruitment)==null?void 0:h.selected)||0,icon:Zs,color:"from-emerald-500 to-emerald-600"}],u=[{name:"Total Onboarding",value:((p=s.onboarding)==null?void 0:p.total)||0,icon:Zo,color:"from-indigo-500 to-indigo-600"},{name:"Preboarding",value:((j=s.onboarding)==null?void 0:j.preboarding)||0,icon:Be,color:"from-yellow-500 to-yellow-600"},{name:"In Progress",value:((v=s.onboarding)==null?void 0:v.inProgress)||0,icon:Ks,color:"from-orange-500 to-orange-600"},{name:"Completed",value:((w=s.onboarding)==null?void 0:w.completed)||0,icon:Fr,color:"from-green-500 to-green-600"}];return e.jsxs("div",{className:"min-h-screen bg-[#1E1E2A] p-6",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"HR Dashboard"}),e.jsx("p",{className:"text-gray-400",children:"Welcome to HR Management Portal"})]}),i&&e.jsx("div",{className:"mb-6 bg-red-500/10 border border-red-500/40 text-red-300 text-sm rounded-xl px-4 py-3",children:i}),r?e.jsx("div",{className:"flex items-center justify-center h-64 mb-8",children:e.jsxs("div",{className:"flex flex-col items-center gap-3",children:[e.jsx(Qt,{className:"w-8 h-8 animate-spin text-[#A88BFF]"}),e.jsx("p",{className:"text-gray-400",children:"Loading dashboard stats..."})]})}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:d.map(b=>{const A=b.icon;return e.jsxs("div",{className:"bg-[#2A2A3A] rounded-2xl p-6 border border-gray-800",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsx("div",{className:`w-12 h-12 rounded-xl bg-gradient-to-br ${b.color} flex items-center justify-center`,children:e.jsx(A,{className:"w-6 h-6 text-white"})})}),e.jsx("h3",{className:"text-gray-400 text-sm mb-1",children:b.name}),e.jsx("p",{className:"text-3xl font-bold text-white",children:b.value})]},b.name)})}),e.jsxs("div",{className:"bg-[#2A2A3A] rounded-2xl p-6 border border-gray-800 mb-8",children:[e.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:"Recruitment Pipeline"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:x.map(b=>{const A=b.icon;return e.jsxs("div",{className:"bg-[#1E1E2A] rounded-xl p-4 border border-gray-800",children:[e.jsx("div",{className:"flex items-center justify-between mb-3",children:e.jsx("div",{className:`w-10 h-10 rounded-lg bg-gradient-to-br ${b.color} flex items-center justify-center`,children:e.jsx(A,{className:"w-5 h-5 text-white"})})}),e.jsx("h3",{className:"text-gray-400 text-xs mb-1",children:b.name}),e.jsx("p",{className:"text-2xl font-bold text-white",children:b.value})]},b.name)})})]}),e.jsxs("div",{className:"bg-[#2A2A3A] rounded-2xl p-6 border border-gray-800 mb-8",children:[e.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:"Onboarding Status"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:u.map(b=>{const A=b.icon;return e.jsxs("div",{className:"bg-[#1E1E2A] rounded-xl p-4 border border-gray-800",children:[e.jsx("div",{className:"flex items-center justify-between mb-3",children:e.jsx("div",{className:`w-10 h-10 rounded-lg bg-gradient-to-br ${b.color} flex items-center justify-center`,children:e.jsx(A,{className:"w-5 h-5 text-white"})})}),e.jsx("h3",{className:"text-gray-400 text-xs mb-1",children:b.name}),e.jsx("p",{className:"text-2xl font-bold text-white",children:b.value})]},b.name)})})]}),e.jsxs("div",{className:"bg-[#2A2A3A] rounded-2xl p-6 border border-gray-800",children:[e.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:"Quick Actions"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("button",{onClick:()=>t("/employees"),className:"p-4 bg-[#1E1E2A] rounded-xl hover:bg-[#3A3A4A] transition-colors text-left",children:[e.jsx(Ue,{className:"w-6 h-6 text-[#A88BFF] mb-2"}),e.jsx("h3",{className:"text-white font-semibold mb-1",children:"Manage Employees"}),e.jsx("p",{className:"text-gray-400 text-sm",children:"View and manage employee records"})]}),e.jsxs("button",{onClick:()=>t("/approval-workflow/pending"),className:"p-4 bg-[#1E1E2A] rounded-xl hover:bg-[#3A3A4A] transition-colors text-left",children:[e.jsx(Oe,{className:"w-6 h-6 text-[#A88BFF] mb-2"}),e.jsx("h3",{className:"text-white font-semibold mb-1",children:"Leave Approvals"}),e.jsx("p",{className:"text-gray-400 text-sm",children:"Review pending leave requests"})]}),e.jsxs("button",{onClick:()=>t("/payroll"),className:"p-4 bg-[#1E1E2A] rounded-xl hover:bg-[#3A3A4A] transition-colors text-left",children:[e.jsx(gt,{className:"w-6 h-6 text-[#A88BFF] mb-2"}),e.jsx("h3",{className:"text-white font-semibold mb-1",children:"Process Payroll"}),e.jsx("p",{className:"text-gray-400 text-sm",children:"Generate and manage payroll"})]})]})]})]})},fA=()=>e.jsx(sh,{}),pA=()=>{const[t,s]=y.useState({requiredSkills:[],preferredSkills:[],minimumExperience:0,candidateIds:[],maxResults:10,includeAllCandidates:!1}),[a,r]=y.useState(""),[n,i]=y.useState(""),[l,c]=y.useState([]),[o,d]=y.useState(!1),[x,u]=y.useState(""),[m,f]=y.useState(!1),[g,h]=y.useState(null),p=["JavaScript","Python","Java","React","Node.js","Angular","Vue.js","AWS","Azure","GCP","Docker","Kubernetes","MongoDB","PostgreSQL","MySQL","Redis","REST APIs","GraphQL","Microservices","Git","Agile","Scrum","Machine Learning","Deep Learning","TensorFlow","TypeScript","HTML","CSS","DevOps","CI/CD","Terraform","Ansible"],j=(N,C)=>{if(!N.trim())return;const k=C==="required"?"requiredSkills":"preferredSkills",S=t[k];S.includes(N.trim())||s(F=>({...F,[k]:[...S,N.trim()]})),C==="required"?r(""):i("")},v=(N,C)=>{const k=C==="required"?"requiredSkills":"preferredSkills";s(S=>({...S,[k]:S[k].filter(F=>F!==N)}))},w=async()=>{var N,C;d(!0),u(""),c([]);try{const k=await J.post("/ai-analysis/resume-search",t);k.data.success?c(k.data.data):u(k.data.message||"Search failed")}catch(k){u(((C=(N=k.response)==null?void 0:N.data)==null?void 0:C.message)||"Failed to search resumes")}finally{d(!1)}},b=N=>N>=80?"text-green-400":N>=60?"text-yellow-400":N>=40?"text-orange-400":"text-red-400",A=N=>N>=80?"bg-green-500/20 border-green-500":N>=60?"bg-yellow-500/20 border-yellow-500":N>=40?"bg-orange-500/20 border-orange-500":"bg-red-500/20 border-red-500";return e.jsxs("div",{className:"min-h-screen bg-[#1E1E2A] p-6",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Resume Search & Shortlisting"}),e.jsx("p",{className:"text-gray-400",children:"AI-powered candidate screening and matching"})]}),e.jsxs("div",{className:"bg-[#2A2A3A] rounded-2xl border border-gray-800 p-6 mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-bold text-white",children:"Search Criteria"}),e.jsxs("button",{onClick:()=>f(!m),className:"flex items-center gap-2 text-[#A88BFF] hover:text-[#B89CFF] transition-colors",children:[e.jsx(Vs,{className:"w-4 h-4"}),m?"Hide Filters":"Show Filters",e.jsx(wi,{className:`w-4 h-4 transition-transform ${m?"rotate-180":""}`})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:["Required Skills ",e.jsx("span",{className:"text-red-400",children:"*"})]}),e.jsxs("div",{className:"flex gap-2 mb-3",children:[e.jsx("input",{type:"text",value:a,onChange:N=>r(N.target.value),onKeyPress:N=>N.key==="Enter"&&j(a,"required"),placeholder:"Add required skill (e.g., React, Node.js)",className:"flex-1 px-4 py-2 bg-[#1E1E2A] border border-gray-700 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:border-[#A88BFF]"}),e.jsx("button",{onClick:()=>j(a,"required"),className:"px-4 py-2 bg-[#A88BFF] text-white rounded-lg hover:bg-[#B89CFF] transition-colors",children:e.jsx(qe,{className:"w-4 h-4"})})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:t.requiredSkills.map(N=>e.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-[#A88BFF]/20 text-[#A88BFF] rounded-full text-sm",children:[N,e.jsx("button",{onClick:()=>v(N,"required"),className:"hover:text-white",children:e.jsx(Le,{className:"w-3 h-3"})})]},N))}),t.requiredSkills.length===0&&e.jsxs("div",{className:"mt-3",children:[e.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"Common skills:"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:p.slice(0,8).map(N=>e.jsx("button",{onClick:()=>j(N,"required"),className:"px-2 py-1 text-xs bg-[#1E1E2A] border border-gray-700 rounded text-gray-400 hover:border-[#A88BFF] hover:text-[#A88BFF] transition-colors",children:N},N))})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Preferred Skills (Optional)"}),e.jsxs("div",{className:"flex gap-2 mb-3",children:[e.jsx("input",{type:"text",value:n,onChange:N=>i(N.target.value),onKeyPress:N=>N.key==="Enter"&&j(n,"preferred"),placeholder:"Add preferred skill",className:"flex-1 px-4 py-2 bg-[#1E1E2A] border border-gray-700 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:border-[#A88BFF]"}),e.jsx("button",{onClick:()=>j(n,"preferred"),className:"px-4 py-2 bg-[#A88BFF] text-white rounded-lg hover:bg-[#B89CFF] transition-colors",children:e.jsx(qe,{className:"w-4 h-4"})})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:t.preferredSkills.map(N=>e.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-green-500/20 text-green-400 rounded-full text-sm",children:[N,e.jsx("button",{onClick:()=>v(N,"preferred"),className:"hover:text-white",children:e.jsx(Le,{className:"w-3 h-3"})})]},N))})]}),m&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Minimum Experience (years)"}),e.jsx("input",{type:"number",min:"0",value:t.minimumExperience,onChange:N=>s(C=>({...C,minimumExperience:parseInt(N.target.value)||0})),className:"w-full px-4 py-2 bg-[#1E1E2A] border border-gray-700 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:border-[#A88BFF]"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Max Results"}),e.jsxs("select",{value:t.maxResults,onChange:N=>s(C=>({...C,maxResults:parseInt(N.target.value)})),className:"w-full px-4 py-2 bg-[#1E1E2A] border border-gray-700 rounded-lg text-white focus:outline-none focus:border-[#A88BFF]",children:[e.jsx("option",{value:5,children:"5 Results"}),e.jsx("option",{value:10,children:"10 Results"}),e.jsx("option",{value:20,children:"20 Results"}),e.jsx("option",{value:50,children:"50 Results"})]})]}),e.jsx("div",{className:"flex items-end",children:e.jsxs("label",{className:"flex items-center gap-2 text-sm text-gray-300 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:t.includeAllCandidates,onChange:N=>s(C=>({...C,includeAllCandidates:N.target.checked})),className:"w-4 h-4 text-[#A88BFF] bg-[#1E1E2A] border-gray-700 rounded focus:ring-[#A88BFF]"}),"Search all candidates"]})})]}),e.jsx("button",{onClick:w,disabled:o||t.requiredSkills.length===0,className:"w-full py-3 bg-[#A88BFF] text-white rounded-lg hover:bg-[#B89CFF] disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center justify-center gap-2",children:o?e.jsxs(e.Fragment,{children:[e.jsx(Qt,{className:"w-4 h-4 animate-spin"}),"Searching Candidates..."]}):e.jsxs(e.Fragment,{children:[e.jsx(yt,{className:"w-4 h-4"}),"Search & Shortlist Candidates"]})})]}),x&&e.jsx("div",{className:"bg-red-500/20 border border-red-500 rounded-lg p-4 mb-6",children:e.jsx("p",{className:"text-red-400",children:x})}),l.length>0&&e.jsxs("div",{className:"bg-[#2A2A3A] rounded-2xl border border-gray-800 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-bold text-white",children:"Shortlisted Candidates"}),e.jsxs("span",{className:"text-sm text-gray-400",children:[l.length," candidates found"]})]}),e.jsx("div",{className:"space-y-4",children:l.map((N,C)=>e.jsxs("div",{className:"bg-[#1E1E2A] rounded-xl border border-gray-700 p-6 hover:border-[#A88BFF]/50 transition-colors",children:[e.jsx("div",{className:"flex items-start justify-between mb-4",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("h3",{className:"text-lg font-semibold text-white",children:N.name}),e.jsx("div",{className:`px-3 py-1 rounded-full border ${A(N.score)}`,children:e.jsxs("span",{className:`text-sm font-medium ${b(N.score)}`,children:[N.score,"% Match"]})})]}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-400",children:[N.email&&e.jsx("span",{children:N.email}),N.currentCompany&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(ot,{className:"w-3 h-3"}),N.currentCompany]}),N.currentDesignation&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Ue,{className:"w-3 h-3"}),N.currentDesignation]}),N.experience&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Be,{className:"w-3 h-3"}),N.experience]})]})]})}),N.matchedSkills&&N.matchedSkills.length>0&&e.jsxs("div",{className:"mb-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-300 mb-2",children:"Matched Skills:"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:N.matchedSkills.map((k,S)=>e.jsx("span",{className:"px-2 py-1 bg-[#A88BFF]/20 text-[#A88BFF] rounded text-sm",children:k},S))})]}),N.summary&&e.jsxs("div",{className:"mb-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-300 mb-2",children:"Why this candidate is relevant:"}),e.jsx("p",{className:"text-sm text-gray-400 leading-relaxed",children:N.summary})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>h(N),className:"px-4 py-2 bg-[#A88BFF] text-white rounded-lg hover:bg-[#B89CFF] transition-colors text-sm",children:"View Details"}),e.jsx("button",{className:"px-4 py-2 bg-[#1E1E2A] border border-gray-700 text-gray-300 rounded-lg hover:border-[#A88BFF] hover:text-[#A88BFF] transition-colors text-sm",children:"Contact Candidate"})]})]},N.candidateId||C))})]}),g&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-6 z-50",children:e.jsx("div",{className:"bg-[#2A2A3A] rounded-2xl border border-gray-800 max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-xl font-bold text-white",children:"Candidate Details"}),e.jsx("button",{onClick:()=>h(null),className:"text-gray-400 hover:text-white",children:e.jsx(Le,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-white mb-3",children:g.name}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-400",children:"Email:"}),e.jsx("p",{className:"text-white",children:g.email||"N/A"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-400",children:"Phone:"}),e.jsx("p",{className:"text-white",children:g.phone||"N/A"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-400",children:"Experience:"}),e.jsx("p",{className:"text-white",children:g.experience||"N/A"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-400",children:"Location:"}),e.jsx("p",{className:"text-white",children:g.location||"N/A"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-400",children:"Current Company:"}),e.jsx("p",{className:"text-white",children:g.currentCompany||"N/A"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-400",children:"Current Role:"}),e.jsx("p",{className:"text-white",children:g.currentDesignation||"N/A"})]})]})]}),e.jsxs("div",{children:[e.jsx("h5",{className:"text-white font-medium mb-3",children:"All Skills"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:(g.allSkills||[]).map((N,C)=>e.jsx("span",{className:"px-2 py-1 bg-[#1E1E2A] border border-gray-700 rounded text-sm text-gray-300",children:N},C))})]}),e.jsxs("div",{children:[e.jsx("h5",{className:"text-white font-medium mb-3",children:"Matched Skills"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:g.matchedSkills.map((N,C)=>e.jsx("span",{className:"px-2 py-1 bg-[#A88BFF]/20 text-[#A88BFF] rounded text-sm",children:N},C))})]}),e.jsxs("div",{children:[e.jsx("h5",{className:"text-white font-medium mb-3",children:"AI Summary"}),e.jsx("p",{className:"text-gray-300 leading-relaxed",children:g.summary})]}),e.jsxs("div",{className:"flex gap-3 pt-4 border-t border-gray-700",children:[e.jsx("button",{className:"px-4 py-2 bg-[#A88BFF] text-white rounded-lg hover:bg-[#B89CFF] transition-colors",children:"Schedule Interview"}),e.jsx("button",{className:"px-4 py-2 bg-[#1E1E2A] border border-gray-700 text-gray-300 rounded-lg hover:border-[#A88BFF] hover:text-[#A88BFF] transition-colors",children:"Send Message"}),e.jsx("button",{className:"px-4 py-2 bg-green-500/20 text-green-400 rounded-lg hover:bg-green-500/30 transition-colors",children:"Shortlist"})]})]})]})})})]})},gA=()=>{var Ne,I,ce;const[t,s]=y.useState([]),[a,r]=y.useState([]),[n,i]=y.useState(!1),[l,c]=y.useState(""),[o,d]=y.useState(1),[x,u]=y.useState(1),[m,f]=y.useState(0),[g,h]=y.useState(""),[p,j]=y.useState(!1),[v,w]=y.useState(!1),[b,A]=y.useState(null),[N,C]=y.useState({status:"active",processingStatus:"",minExperience:"",maxExperience:""}),[k,S]=y.useState({name:"",email:"",phone:"",rawText:"",tags:""}),[F,R]=y.useState({file:null,name:"",email:"",phone:"",tags:""}),[T,M]=y.useState(!1),H=20,U=(L={})=>{var V,te,ne,xe,he;return{id:L._id,type:"resume",name:L.name||"Unnamed Candidate",email:L.email||"",phone:L.phone||"",experience:{years:((te=(V=L.parsedData)==null?void 0:V.experience)==null?void 0:te.years)??null,months:((xe=(ne=L.parsedData)==null?void 0:ne.experience)==null?void 0:xe.months)??null},skills:((he=L.parsedData)==null?void 0:he.skills)||[],statusLabel:L.processingStatus||"pending",statusType:"processing",tags:L.tags||[],source:L.fileName||"Resume Upload",rawText:L.rawText||"",createdAt:L.createdAt||L.updatedAt,appliedRole:null,stage:null,original:L}},W=(L={})=>{var V,te,ne,xe,he,Se;return{id:L._id,type:"candidate",name:`${L.firstName||""} ${L.lastName||""}`.trim()||"Unnamed Candidate",email:L.email||"",phone:L.phone||"",experience:{years:((V=L.experience)==null?void 0:V.years)??null,months:((te=L.experience)==null?void 0:te.months)??null},skills:Array.isArray(L.skills)?L.skills:[],statusLabel:L.stage||L.status||"applied",statusType:"stage",tags:[L.source,(ne=L.appliedFor)==null?void 0:ne.title].filter(Boolean),source:(xe=L.appliedFor)!=null&&xe.title?`Applied for ${L.appliedFor.title}`:"Job Applicant",rawText:"",createdAt:L.createdAt,appliedRole:((he=L.appliedFor)==null?void 0:he.title)||"",stage:L.stage||"",resumeUrl:(Se=L.resume)==null?void 0:Se.url,original:L}},se=(L,V=1)=>{const te=L.length,ne=Math.max(1,Math.ceil(te/H)),xe=Math.min(Math.max(V,1),ne),he=(xe-1)*H;r(L.slice(he,he+H)),d(xe),u(ne),f(te)},X=async(L={})=>{var te,ne,xe,he;i(!0),c("");const V=L.page||1;try{const Se={page:1,limit:H,status:N.status};N.processingStatus&&(Se.processingStatus=N.processingStatus),N.minExperience&&(Se.minExperience=N.minExperience),N.maxExperience&&(Se.maxExperience=N.maxExperience);const G=g.trim()?J.post("/resume-pool/search",{query:g.trim(),page:1,limit:H,filters:{}}):J.get("/resume-pool",{params:Se}),Q={};g.trim()&&(Q.search=g.trim());const[me,je]=await Promise.all([G,J.get("/candidates",{params:Q})]),Ae=Array.isArray((te=me==null?void 0:me.data)==null?void 0:te.data)?me.data.data:[],we=Array.isArray((ne=je==null?void 0:je.data)==null?void 0:ne.data)?je.data.data:[],_e=Ae.map(U),Pe=[...we.map(W),..._e].sort((ze,Ye)=>{const at=ze.createdAt?new Date(ze.createdAt).getTime():0;return(Ye.createdAt?new Date(Ye.createdAt).getTime():0)-at});s(Pe),se(Pe,V)}catch(Se){c(((he=(xe=Se.response)==null?void 0:xe.data)==null?void 0:he.message)||"Failed to load candidate pool")}finally{i(!1)}};y.useEffect(()=>{X({page:1})},[]);const D=()=>{X({page:1})},le=(L,V)=>{C(te=>({...te,[L]:V})),setTimeout(()=>X({page:1}),0)},de=L=>{L<1||L>x||se(t,L)},E=()=>{S({name:"",email:"",phone:"",rawText:"",tags:""}),j(!0)},z=()=>{R({file:null,name:"",email:"",phone:"",tags:""}),w(!0)},O=async()=>{var L,V;if(!(!k.name.trim()||!k.rawText.trim())){M(!0),c("");try{const te={name:k.name.trim(),email:k.email.trim()||void 0,phone:k.phone.trim()||void 0,rawText:k.rawText,tags:k.tags?k.tags.split(",").map(xe=>xe.trim()).filter(Boolean):[]},ne=await J.post("/resume-pool/text",te);ne.data.success?(j(!1),await fetchResumes({page:1})):c(ne.data.message||"Failed to add resume")}catch(te){c(((V=(L=te.response)==null?void 0:L.data)==null?void 0:V.message)||"Failed to add resume")}finally{M(!1)}}},P=async()=>{var L,V;if(F.file){M(!0),c("");try{const te=new FormData;te.append("resume",F.file),F.name&&te.append("name",F.name),F.email&&te.append("email",F.email),F.phone&&te.append("phone",F.phone),F.tags&&te.append("tags",F.tags);const ne=await J.post("/resume-pool/file",te,{headers:{"Content-Type":"multipart/form-data"}});ne.data.success?(w(!1),await fetchResumes({page:1})):c(ne.data.message||"Failed to upload resume file")}catch(te){c(((V=(L=te.response)==null?void 0:L.data)==null?void 0:V.message)||"Failed to upload resume file")}finally{M(!1)}}},Z=L=>{var ne,xe,he,Se;if(!L)return"N/A";if(L.type==="candidate"){const G=((ne=L.experience)==null?void 0:ne.years)||0,Q=((xe=L.experience)==null?void 0:xe.months)||0;return!G&&!Q?"N/A":Q?`${G} yrs ${Q} mo`:`${G} yrs`}const V=((he=L.experience)==null?void 0:he.years)||0,te=((Se=L.experience)==null?void 0:Se.months)||0;return!V&&!te?"N/A":te?`${V} yrs ${te} mo`:`${V} yrs`},re=L=>{if(!L)return"text-gray-400 border-gray-700";if(L.type==="candidate")switch(L.statusLabel){case"shortlisted":case"interview-scheduled":return"border-green-500/50 text-green-300 bg-green-500/10";case"offer-extended":case"offer-accepted":return"border-blue-500/50 text-blue-300 bg-blue-500/10";case"rejected":return"border-red-500/50 text-red-300 bg-red-500/10";default:return"border-[#A88BFF]/50 text-[#C7B6FF] bg-[#A88BFF]/10"}switch(L.statusLabel){case"completed":return"border-green-500/50 text-green-300 bg-green-500/10";case"failed":return"border-red-500/50 text-red-300 bg-red-500/10";case"processing":return"border-blue-500/50 text-blue-300 bg-blue-500/10";default:return"border-[#A88BFF]/50 text-[#C7B6FF] bg-[#A88BFF]/10"}},ie=L=>{if(!L)return[];if(L.type==="candidate"){const V=L.tags||[];return V.length?V:["Job Applicant"]}return L.tags||[]},oe=L=>{A(L)},ue=()=>{A(null)};return e.jsxs("div",{className:"min-h-screen bg-[#1E1E2A] p-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4 mb-6",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold text-white flex items-center gap-3",children:[e.jsx(Ue,{className:"w-7 h-7 text-[#A88BFF]"}),"Candidate Pool"]}),e.jsx("p",{className:"text-gray-400 mt-1",children:"Unified view of all applicants and uploaded resumes across roles and sources."})]}),e.jsxs("div",{className:"flex flex-wrap gap-3",children:[e.jsxs("button",{onClick:E,className:"inline-flex items-center gap-2 px-4 py-2 rounded-lg bg-[#A88BFF] text-white text-sm font-medium hover:bg-[#B89CFF] transition-colors",children:[e.jsx(qe,{className:"w-4 h-4"}),"Add Raw Text"]}),e.jsxs("button",{onClick:z,className:"inline-flex items-center gap-2 px-4 py-2 rounded-lg bg-[#1E1E2A] border border-gray-700 text-gray-200 text-sm font-medium hover:border-[#A88BFF] hover:text-[#A88BFF] transition-colors",children:[e.jsx(Mi,{className:"w-4 h-4"}),"Upload Resume File"]})]})]}),e.jsx("div",{className:"bg-[#2A2A3A] rounded-2xl border border-gray-800 p-4 mb-6",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4 md:items-center md:justify-between",children:[e.jsxs("div",{className:"flex-1 flex items-center gap-2",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(yt,{className:"w-4 h-4 text-gray-500 absolute left-3 top-1/2 -translate-y-1/2"}),e.jsx("input",{type:"text",placeholder:"Search by name, skills, text...",value:g,onChange:L=>h(L.target.value),onKeyDown:L=>L.key==="Enter"&&D(),className:"w-full pl-9 pr-3 py-2 bg-[#1E1E2A] border border-gray-700 rounded-lg text-sm text-white placeholder-gray-500 focus:outline-none focus:border-[#A88BFF]"})]}),e.jsxs("button",{onClick:D,className:"inline-flex items-center gap-2 px-3 py-2 rounded-lg bg-[#A88BFF] text-white text-sm font-medium hover:bg-[#B89CFF] transition-colors",children:[e.jsx(yt,{className:"w-4 h-4"}),"Search"]})]}),e.jsxs("div",{className:"flex flex-wrap gap-3 items-center",children:[e.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-400",children:[e.jsx(Vs,{className:"w-3 h-3"}),"Filters"]}),e.jsxs("select",{value:N.processingStatus,onChange:L=>le("processingStatus",L.target.value),className:"px-3 py-1.5 bg-[#1E1E2A] border border-gray-700 rounded-lg text-xs text-gray-200 focus:outline-none focus:border-[#A88BFF]",children:[e.jsx("option",{value:"",children:"All Status"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"processing",children:"Processing"}),e.jsx("option",{value:"completed",children:"Completed"}),e.jsx("option",{value:"failed",children:"Failed"})]}),e.jsx("input",{type:"number",placeholder:"Min Exp",value:N.minExperience,onChange:L=>le("minExperience",L.target.value),className:"w-20 px-2 py-1.5 bg-[#1E1E2A] border border-gray-700 rounded-lg text-xs text-gray-200 placeholder-gray-500 focus:outline-none focus:border-[#A88BFF]"}),e.jsx("input",{type:"number",placeholder:"Max Exp",value:N.maxExperience,onChange:L=>le("maxExperience",L.target.value),className:"w-20 px-2 py-1.5 bg-[#1E1E2A] border border-gray-700 rounded-lg text-xs text-gray-200 placeholder-gray-500 focus:outline-none focus:border-[#A88BFF]"})]})]})}),l&&e.jsx("div",{className:"bg-red-500/10 border border-red-500/40 text-red-300 text-sm rounded-xl px-4 py-3 mb-4",children:l}),e.jsxs("div",{className:"bg-[#2A2A3A] rounded-2xl border border-gray-800 overflow-hidden",children:[e.jsxs("div",{className:"px-4 py-3 border-b border-gray-800 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-300",children:[e.jsx(Ue,{className:"w-4 h-4 text-[#A88BFF]"}),e.jsx("span",{children:"Candidate Pool"}),e.jsxs("span",{className:"text-xs text-gray-500",children:["(",a.length," shown of ",m,")"]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500",children:[e.jsx(Be,{className:"w-3 h-3"}),"Recruiting + AI parsed resumes, combined automatically"]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-[#232334] text-xs uppercase text-gray-400",children:[e.jsx("th",{className:"px-4 py-3 text-left",children:"Name"}),e.jsx("th",{className:"px-4 py-3 text-left",children:"Contact"}),e.jsx("th",{className:"px-4 py-3 text-left",children:"Experience"}),e.jsx("th",{className:"px-4 py-3 text-left",children:"Key Skills"}),e.jsx("th",{className:"px-4 py-3 text-left",children:"Status"}),e.jsx("th",{className:"px-4 py-3 text-left",children:"Source"}),e.jsx("th",{className:"px-4 py-3 text-right",children:"Actions"})]})}),e.jsx("tbody",{children:n?e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"px-4 py-10 text-center text-gray-400",children:e.jsxs("div",{className:"flex flex-col items-center justify-center gap-2",children:[e.jsx(Qt,{className:"w-5 h-5 animate-spin text-[#A88BFF]"}),e.jsx("span",{children:"Loading candidate pool..."})]})})}):a.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"px-4 py-10 text-center text-gray-500 text-sm",children:"No candidates found yet. Adjust filters or add resumes manually."})}):a.map(L=>e.jsxs("tr",{className:"border-t border-gray-800 hover:bg-[#1E1E2A]/60 transition-colors",children:[e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("span",{className:"text-white font-medium flex items-center gap-2",children:[L.name,L.type==="candidate"&&e.jsx("span",{className:"px-2 py-0.5 text-[10px] rounded-full bg-blue-500/10 text-blue-300 border border-blue-500/30",children:"Applicant"}),L.type==="resume"&&e.jsx("span",{className:"px-2 py-0.5 text-[10px] rounded-full bg-purple-500/10 text-purple-300 border border-purple-500/30",children:"Resume"})]}),L.appliedRole&&e.jsxs("span",{className:"text-xs text-gray-500",children:["Applied for: ",L.appliedRole]}),L.source&&L.type==="resume"&&e.jsx("span",{className:"text-xs text-gray-500",children:L.source})]})}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex flex-col text-xs text-gray-300",children:[L.email&&e.jsx("span",{children:L.email}),L.phone&&e.jsx("span",{className:"text-gray-500",children:L.phone})]})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("span",{className:"text-xs text-gray-300",children:Z(L)})}),e.jsx("td",{className:"px-4 py-3 max-w-xs",children:e.jsxs("div",{className:"flex flex-wrap gap-1",children:[(L.skills||[]).slice(0,5).map((V,te)=>e.jsx("span",{className:"px-2 py-0.5 rounded-full bg-[#1E1E2A] border border-gray-700 text-[11px] text-gray-200",children:V},te)),(L.skills||[]).length>5&&e.jsxs("span",{className:"text-[11px] text-gray-500",children:["+",L.skills.length-5," more"]})]})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("span",{className:`inline-flex items-center px-2 py-0.5 rounded-full border text-[11px] ${re(L)}`,children:L.statusLabel||"pending"})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("div",{className:"flex flex-wrap gap-1",children:ie(L).slice(0,3).map((V,te)=>e.jsx("span",{className:"px-2 py-0.5 rounded-full bg-[#1E1E2A] border border-gray-700 text-[11px] text-gray-400",children:V},te))})}),e.jsx("td",{className:"px-4 py-3 text-right",children:e.jsxs("button",{onClick:()=>oe(L),className:"inline-flex items-center gap-1 px-3 py-1.5 rounded-lg bg-[#1E1E2A] border border-gray-700 text-xs text-gray-200 hover:border-[#A88BFF] hover:text-[#A88BFF] transition-colors",children:[e.jsx(st,{className:"w-3 h-3"}),"View"]})})]},L.id))})]})}),x>1&&e.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-t border-gray-800 text-xs text-gray-400",children:[e.jsxs("span",{children:["Page ",o," of ",x]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>de(o-1),disabled:o===1,className:"px-2 py-1 rounded border border-gray-700 disabled:opacity-40 disabled:cursor-not-allowed hover:border-[#A88BFF] hover:text-[#A88BFF]",children:"Prev"}),e.jsx("button",{onClick:()=>de(o+1),disabled:o===x,className:"px-2 py-1 rounded border border-gray-700 disabled:opacity-40 disabled:cursor-not-allowed hover:border-[#A88BFF] hover:text-[#A88BFF]",children:"Next"})]})]})]}),p&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm p-4",children:e.jsxs("div",{className:"w-full max-w-3xl bg-[#2A2A3A] border border-gray-800 rounded-2xl shadow-xl max-h-[90vh] overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between px-5 py-4 border-b border-gray-800",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-lg font-semibold text-white flex items-center gap-2",children:[e.jsx(qe,{className:"w-4 h-4 text-[#A88BFF]"}),"Add Resume (Raw Text)"]}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Paste full resume text. We will auto-parse skills and experience."})]}),e.jsx("button",{onClick:()=>j(!1),className:"text-gray-400 hover:text-white",children:e.jsx(Le,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"px-5 py-4 space-y-4 overflow-y-auto max-h-[70vh]",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-300 mb-1",children:["Candidate Name ",e.jsx("span",{className:"text-red-400",children:"*"})]}),e.jsx("input",{type:"text",value:k.name,onChange:L=>S(V=>({...V,name:L.target.value})),className:"w-full px-3 py-2 bg-[#1E1E2A] border border-gray-700 rounded-lg text-sm text-white placeholder-gray-500 focus:outline-none focus:border-[#A88BFF]",placeholder:"e.g. Sarah Chen"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-300 mb-1",children:"Email"}),e.jsx("input",{type:"email",value:k.email,onChange:L=>S(V=>({...V,email:L.target.value})),className:"w-full px-3 py-2 bg-[#1E1E2A] border border-gray-700 rounded-lg text-sm text-white placeholder-gray-500 focus:outline-none focus:border-[#A88BFF]",placeholder:"candidate@example.com"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-300 mb-1",children:"Phone"}),e.jsx("input",{type:"text",value:k.phone,onChange:L=>S(V=>({...V,phone:L.target.value})),className:"w-full px-3 py-2 bg-[#1E1E2A] border border-gray-700 rounded-lg text-sm text-white placeholder-gray-500 focus:outline-none focus:border-[#A88BFF]",placeholder:"+91 98765 43210"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-300 mb-1",children:"Tags (comma separated)"}),e.jsx("input",{type:"text",value:k.tags,onChange:L=>S(V=>({...V,tags:L.target.value})),className:"w-full px-3 py-2 bg-[#1E1E2A] border border-gray-700 rounded-lg text-sm text-white placeholder-gray-500 focus:outline-none focus:border-[#A88BFF]",placeholder:"e.g. Java, Backend, 6 years"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-300 mb-1",children:["Resume Text ",e.jsx("span",{className:"text-red-400",children:"*"})]}),e.jsx("textarea",{rows:10,value:k.rawText,onChange:L=>S(V=>({...V,rawText:L.target.value})),className:"w-full px-3 py-2 bg-[#1E1E2A] border border-gray-700 rounded-lg text-sm text-white placeholder-gray-500 focus:outline-none focus:border-[#A88BFF] resize-none",placeholder:"Paste full resume content here..."})]})]}),e.jsxs("div",{className:"px-5 py-4 border-t border-gray-800 flex items-center justify-between",children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Tip: You can copy-paste from PDF or Word. The system will auto-extract skills & experience."}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>j(!1),className:"px-4 py-2 rounded-lg border border-gray-700 text-xs text-gray-300 hover:border-gray-500 hover:text-white",children:"Cancel"}),e.jsx("button",{onClick:O,disabled:T||!k.name.trim()||!k.rawText.trim(),className:"px-4 py-2 rounded-lg bg-[#A88BFF] text-xs text-white font-medium hover:bg-[#B89CFF] disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:T?e.jsxs(e.Fragment,{children:[e.jsx(Qt,{className:"w-4 h-4 animate-spin"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(qe,{className:"w-3 h-3"}),"Add to Pool"]})})]})]})]})}),v&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm p-4",children:e.jsxs("div",{className:"w-full max-w-xl bg-[#2A2A3A] border border-gray-800 rounded-2xl shadow-xl max-h-[90vh] overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between px-5 py-4 border-b border-gray-800",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-lg font-semibold text-white flex items-Ñenter gap-2",children:[e.jsx(Mi,{className:"w-4 h-4 text-[#A88BFF]"}),"Upload Resume File"]}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Upload PDF or DOCX files. We will parse them automatically."})]}),e.jsx("button",{onClick:()=>w(!1),className:"text-gray-400 hover:text-white",children:e.jsx(Le,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"px-5 py-4 space-y-4 overflow-y-auto max-h-[70vh]",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-300 mb-1",children:"Candidate Name (optional)"}),e.jsx("input",{type:"text",value:F.name,onChange:L=>R(V=>({...V,name:L.target.value})),className:"w-full px-3 py-2 bg-[#1E1E2A] border border-gray-700 rounded-lg text-sm text-white placeholder-gray-500 focus:outline-none focus:border-[#A88BFF]",placeholder:"If empty, system will try to detect"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-300 mb-1",children:"Tags (comma separated)"}),e.jsx("input",{type:"text",value:F.tags,onChange:L=>R(V=>({...V,tags:L.target.value})),className:"w-full px-3 py-2 bg-[#1E1E2A] border border-gray-700 rounded-lg text-sm text-white placeholder-gray-500 focus:outline-none focus:border-[#A88BFF]",placeholder:"e.g. Backend, Senior, React"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-300 mb-2",children:["Resume File ",e.jsx("span",{className:"text-red-400",children:"*"})]}),e.jsxs("label",{className:"flex flex-col items-center justify-center gap-2 px-4 py-8 border-2 border-dashed border-gray-700 rounded-xl bg-[#1E1E2A] text-gray-400 cursor-pointer hover:border-[#A88BFF] hover:text-[#A88BFF] transition-colors text-center text-xs",children:[e.jsx(Mi,{className:"w-5 h-5"}),F.file?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-gray-200 text-sm",children:F.file.name}),e.jsx("span",{children:"Click to change file"})]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-gray-200 text-sm",children:"Click to upload PDF or DOCX"}),e.jsx("span",{children:"Max 10MB per file"})]}),e.jsx("input",{type:"file",className:"hidden",accept:"application/pdf,application/vnd.openxmlformats-officedocument.wordprocessingml.document",onChange:L=>{var te;const V=(te=L.target.files)==null?void 0:te[0];V&&R(ne=>({...ne,file:V}))}})]})]})]}),e.jsxs("div",{className:"px-5 py-4 border-t border-gray-800 flex items-center justify-between",children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Files are stored in the resume pool and auto-parsed for skills & experience."}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>w(!1),className:"px-4 py-2 rounded-lg border border-gray-700 text-xs text-gray-300 hover:border-gray-500 hover:text-white",children:"Cancel"}),e.jsx("button",{onClick:P,disabled:T||!F.file,className:"px-4 py-2 rounded-lg bg-[#A88BFF] text-xs text-white font-medium hover:bg-[#B89CFF] disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:T?e.jsxs(e.Fragment,{children:[e.jsx(Qt,{className:"w-4 h-4 animate-spin"}),"Uploading..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Mi,{className:"w-3 h-3"}),"Upload"]})})]})]})]})}),b&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm p-4",children:e.jsxs("div",{className:"w-full max-w-4xl bg-[#2A2A3A] border border-gray-800 rounded-2xl shadow-xl max-h-[90vh] overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between px-5 py-4 border-b border-gray-800",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-lg font-semibold text-white flex items-center gap-2",children:[e.jsx(st,{className:"w-4 h-4 text-[#A88BFF]"}),b.name]}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:b.type==="candidate"?b.appliedRole?`Job Applicant â€¢ Applied for ${b.appliedRole}`:"Job Applicant":b.source||"Resume Pool"})]}),e.jsx("button",{onClick:ue,className:"text-gray-400 hover:text-white",children:e.jsx(Le,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4 px-5 py-4 overflow-y-auto max-h-[70vh]",children:[e.jsxs("div",{className:"space-y-4 lg:col-span-1",children:[e.jsxs("div",{className:"bg-[#1E1E2A] border border-gray-800 rounded-xl p-4",children:[e.jsx("h3",{className:"text-sm font-semibold text-white mb-3",children:"Basic Info"}),e.jsxs("div",{className:"space-y-2 text-xs text-gray-300",children:[b.email&&e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Email: "}),e.jsx("span",{children:b.email})]}),b.phone&&e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Phone: "}),e.jsx("span",{children:b.phone})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Experience: "}),e.jsx("span",{children:Z(b)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Status: "}),e.jsx("span",{className:"capitalize",children:b.statusLabel||"pending"})]}),ie(b).length>0&&e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Tags: "}),e.jsx("div",{className:"mt-1 flex flex-wrap gap-1",children:ie(b).map((L,V)=>e.jsx("span",{className:"px-2 py-0.5 rounded-full bg-[#1E1E2A] border border-gray-700 text-[11px] text-gray-300",children:L},V))})]})]})]}),e.jsxs("div",{className:"bg-[#1E1E2A] border border-gray-800 rounded-xl p-4",children:[e.jsx("h3",{className:"text-sm font-semibold text-white mb-3",children:"Skills"}),e.jsxs("div",{className:"flex flex-wrap gap-1 text-xs",children:[(b.skills||[]).map((L,V)=>e.jsx("span",{className:"px-2 py-0.5 rounded-full bg-[#232334] text-gray-200 border border-gray-700",children:L},V)),(!b.skills||b.skills.length===0)&&e.jsx("span",{className:"text-gray-500",children:"No parsed skills available."})]})]}),b.type==="resume"&&((Ne=b.original)==null?void 0:Ne.aiAnalysis)&&e.jsxs("div",{className:"bg-[#1E1E2A] border border-gray-800 rounded-xl p-4",children:[e.jsx("h3",{className:"text-sm font-semibold text-white mb-3",children:"AI Insights"}),e.jsxs("div",{className:"space-y-2 text-xs text-gray-300",children:[b.original.aiAnalysis.overallFit&&e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Overall Fit: "}),e.jsx("span",{className:"capitalize",children:b.original.aiAnalysis.overallFit})]}),b.original.aiAnalysis.keyHighlights&&b.original.aiAnalysis.keyHighlights.length>0&&e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Highlights:"}),e.jsx("ul",{className:"mt-1 list-disc list-inside space-y-1",children:b.original.aiAnalysis.keyHighlights.map((L,V)=>e.jsx("li",{children:L},V))})]})]})]})]}),e.jsx("div",{className:"lg:col-span-2",children:b.type==="resume"?e.jsxs("div",{className:"bg-[#1E1E2A] border border-gray-800 rounded-xl p-4 h-full flex flex-col",children:[e.jsxs("h3",{className:"text-sm font-semibold text-white mb-3 flex items-center gap-2",children:[e.jsx(st,{className:"w-4 h-4 text-[#A88BFF]"}),"Raw Resume Text"]}),e.jsx("div",{className:"flex-1 overflow-y-auto rounded-lg bg-[#11111C] border border-gray-900 p-3 text-xs text-gray-300 whitespace-pre-wrap leading-relaxed",children:b.rawText||"No raw text available."})]}):e.jsxs("div",{className:"bg-[#1E1E2A] border border-gray-800 rounded-xl p-4 h-full flex flex-col",children:[e.jsxs("h3",{className:"text-sm font-semibold text-white mb-3 flex items-center gap-2",children:[e.jsx(st,{className:"w-4 h-4 text-[#A88BFF]"}),"Candidate Overview"]}),e.jsxs("div",{className:"flex-1 overflow-y-auto rounded-lg bg-[#11111C] border border-gray-900 p-3 text-xs text-gray-300 space-y-3",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500 block mb-1",children:"Stage"}),e.jsx("span",{className:"capitalize",children:b.stage||b.statusLabel||"applied"})]}),((I=b.original)==null?void 0:I.professionalExperience)&&b.original.professionalExperience.length>0&&e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500 block mb-1",children:"Experience Highlights"}),e.jsx("ul",{className:"list-disc list-inside space-y-1",children:b.original.professionalExperience.slice(0,5).map((L,V)=>e.jsxs("li",{children:[e.jsxs("span",{className:"text-white",children:[L.designation||"Role"," @ ",L.company||"Company"]}),L.startDate&&e.jsxs("span",{className:"text-gray-500 ml-1",children:["(",new Date(L.startDate).toLocaleDateString()," - ",L.currentlyWorking?"Present":L.endDate?new Date(L.endDate).toLocaleDateString():"Unknown",")"]})]},V))})]}),((ce=b.original)==null?void 0:ce.timeline)&&b.original.timeline.length>0&&e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500 block mb-1",children:"Recent Timeline"}),e.jsx("ul",{className:"space-y-1",children:b.original.timeline.slice(-4).reverse().map((L,V)=>e.jsxs("li",{className:"text-gray-300",children:[e.jsx("span",{className:"text-white",children:L.action}),e.jsx("span",{className:"ml-2 text-gray-500 text-[11px]",children:new Date(L.timestamp).toLocaleString()}),L.description&&e.jsx("div",{className:"text-gray-400 text-[11px]",children:L.description})]},V))})]})]})]})})]})]})})]})},yA=()=>{const[t,s]=y.useState([]),[a,r]=y.useState(null),[n,i]=y.useState([]),[l,c]=y.useState(!0),[o,d]=y.useState(null),[x,u]=y.useState(""),[m,f]=y.useState(""),[g,h]=y.useState([]),[p,j]=y.useState(!1),[v,w]=y.useState(null),[b,A]=y.useState("");y.useEffect(()=>{N(),C()},[x]);const N=async()=>{try{c(!0);const U=await vv(x);U.success&&s(U.data)}catch{_.error("Failed to load candidates")}finally{c(!1)}},C=async()=>{try{const U=await Cv();U.success&&d(U.data)}catch(U){console.error("Failed to load stats:",U)}},k=async U=>{try{const W=await jv(U);W.success&&(r(W.data.candidate),i(W.data.documents))}catch{_.error("Failed to load documents")}},S=async U=>{try{(await Nv(U,"Document verified")).success&&(_.success("Document verified successfully"),k(a.onboardingId),N(),C())}catch{_.error("Failed to verify document")}},F=async()=>{if(!b.trim()){_.error("Please provide a reason for rejection");return}try{(await wv(v._id,b)).success&&(_.success("Document rejected. Re-submission email sent to candidate."),j(!1),w(null),A(""),k(a.onboardingId),N(),C())}catch{_.error("Failed to reject document")}},R=async()=>{if(g.length===0){_.error("Please select documents to verify");return}try{(await kv(g,"Bulk verified")).success&&(_.success(`${g.length} documents verified successfully`),h([]),k(a.onboardingId),N(),C())}catch{_.error("Failed to bulk verify documents")}},T=async(U,W)=>{try{const se=await Sv(U),X=window.URL.createObjectURL(se),D=document.createElement("a");D.href=X,D.download=W,document.body.appendChild(D),D.click(),window.URL.revokeObjectURL(X),document.body.removeChild(D),_.success("Document downloaded")}catch{_.error("Failed to download document")}},M=t.filter(U=>{var W,se,X;return((W=U.candidateName)==null?void 0:W.toLowerCase().includes(m.toLowerCase()))||((se=U.candidateEmail)==null?void 0:se.toLowerCase().includes(m.toLowerCase()))||((X=U.candidateId)==null?void 0:X.toLowerCase().includes(m.toLowerCase()))}),H=U=>({verified:"bg-green-100 text-green-800",unverified:"bg-red-100 text-red-800",pending:"bg-yellow-100 text-yellow-800",resubmitted:"bg-blue-100 text-blue-800"})[U]||"bg-gray-100 text-gray-800";return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-white",children:"Document Verification"}),e.jsx("p",{className:"text-gray-400 mt-1",children:"Review and verify candidate documents"})]})}),o&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx("div",{className:"card",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-400",children:"Total Documents"}),e.jsx("h3",{className:"text-2xl font-bold text-white",children:o.total})]}),e.jsx(st,{className:"w-8 h-8 text-blue-500"})]})}),e.jsx("div",{className:"card",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-400",children:"Pending Review"}),e.jsx("h3",{className:"text-2xl font-bold text-yellow-500",children:o.pending})]}),e.jsx(mt,{className:"w-8 h-8 text-yellow-500"})]})}),e.jsx("div",{className:"card",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-400",children:"Verified"}),e.jsx("h3",{className:"text-2xl font-bold text-green-500",children:o.verified})]}),e.jsx(Te,{className:"w-8 h-8 text-green-500"})]})}),e.jsx("div",{className:"card",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-400",children:"Rejected"}),e.jsx("h3",{className:"text-2xl font-bold text-red-500",children:o.unverified})]}),e.jsx(Qe,{className:"w-8 h-8 text-red-500"})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"lg:col-span-1",children:e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Candidates"}),e.jsxs("div",{className:"relative mb-3",children:[e.jsx(yt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search candidates...",value:m,onChange:U=>f(U.target.value),className:"input pl-10 w-full"})]}),e.jsxs("select",{value:x,onChange:U=>u(U.target.value),className:"input w-full",children:[e.jsx("option",{value:"",children:"All Status"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"verified",children:"Verified"}),e.jsx("option",{value:"unverified",children:"Rejected"}),e.jsx("option",{value:"resubmitted",children:"Resubmitted"})]})]}),e.jsx("div",{className:"space-y-2 max-h-[600px] overflow-y-auto",children:M.map(U=>e.jsxs("div",{onClick:()=>k(U.onboardingId),className:`p-4 rounded-lg cursor-pointer transition-colors ${(a==null?void 0:a.onboardingId)===U.onboardingId?"bg-primary-600":"bg-dark-800 hover:bg-dark-700"}`,children:[e.jsx("h4",{className:"font-medium text-white",children:U.candidateName}),e.jsx("p",{className:"text-sm text-gray-400",children:U.position}),e.jsxs("div",{className:"flex items-center gap-2 mt-2 text-xs",children:[e.jsxs("span",{className:"text-gray-400",children:[U.documentStats.total," docs"]}),U.documentStats.pending>0&&e.jsxs("span",{className:"px-2 py-0.5 bg-yellow-500/20 text-yellow-400 rounded",children:[U.documentStats.pending," pending"]})]})]},U.onboardingId))})]})}),e.jsx("div",{className:"lg:col-span-2",children:e.jsx("div",{className:"card",children:a?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-white",children:a.candidateName}),e.jsx("p",{className:"text-sm text-gray-400",children:a.candidateEmail}),e.jsx("p",{className:"text-sm text-gray-400",children:a.position})]}),g.length>0&&e.jsxs("button",{onClick:R,className:"btn-primary",children:["Verify Selected (",g.length,")"]})]})}),e.jsxs("div",{className:"space-y-4",children:[n.map(U=>e.jsx("div",{className:"bg-dark-800 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-start gap-3 flex-1",children:[e.jsx("input",{type:"checkbox",checked:g.includes(U._id),onChange:W=>{W.target.checked?h([...g,U._id]):h(g.filter(se=>se!==U._id))},className:"mt-1"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(st,{className:"w-5 h-5 text-gray-400"}),e.jsx("h4",{className:"font-medium text-white",children:U.documentName}),e.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${H(U.verificationStatus)}`,children:U.verificationStatus})]}),e.jsx("p",{className:"text-sm text-gray-400 mb-2",children:U.originalFileName}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Uploaded: ",new Date(U.uploadedAt).toLocaleString()]}),U.unverificationReason&&e.jsx("div",{className:"mt-2 p-2 bg-red-500/10 border border-red-500/20 rounded",children:e.jsxs("p",{className:"text-sm text-red-400",children:[e.jsx("strong",{children:"Rejection Reason:"})," ",U.unverificationReason]})})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>T(U._id,U.originalFileName),className:"p-2 hover:bg-dark-700 rounded-lg transition-colors",title:"Download",children:e.jsx(Mt,{className:"w-4 h-4 text-gray-400"})}),U.verificationStatus!=="verified"&&e.jsx("button",{onClick:()=>S(U._id),className:"p-2 hover:bg-green-500/10 rounded-lg transition-colors",title:"Verify",children:e.jsx(Te,{className:"w-4 h-4 text-green-500"})}),U.verificationStatus!=="unverified"&&e.jsx("button",{onClick:()=>{w(U),j(!0)},className:"p-2 hover:bg-red-500/10 rounded-lg transition-colors",title:"Reject",children:e.jsx(Qe,{className:"w-4 h-4 text-red-500"})})]})]})},U._id)),n.length===0&&e.jsx("div",{className:"text-center py-8 text-gray-400",children:"No documents uploaded yet"})]})]}):e.jsxs("div",{className:"text-center py-12 text-gray-400",children:[e.jsx(st,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"Select a candidate to view their documents"})]})})})]}),p&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-dark-900 rounded-xl max-w-md w-full p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Reject Document"}),e.jsxs("p",{className:"text-gray-400 mb-4",children:["Please provide a reason for rejecting ",e.jsx("strong",{children:v==null?void 0:v.documentName})]}),e.jsx("textarea",{value:b,onChange:U=>A(U.target.value),placeholder:"Enter rejection reason...",className:"input w-full h-32 mb-4",required:!0}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>{j(!1),w(null),A("")},className:"btn-secondary flex-1",children:"Cancel"}),e.jsx("button",{onClick:F,className:"btn-danger flex-1",children:"Reject & Send Email"})]})]})})]})},bA=()=>{var o,d,x,u,m,f,g;const{theme:t}=St(),[s,a]=y.useState(null),[r,n]=y.useState(!0);y.useEffect(()=>{i()},[]);const i=async()=>{try{const h=await Mb();a(h.data),n(!1)}catch(h){console.error("Error fetching dashboard stats:",h),_.error("Failed to fetch dashboard statistics"),a({overview:{totalClients:0,activeClients:0,totalUsers:1,totalPackages:3},clientStats:[],subscriptionStats:[],recentActivities:[]}),n(!1)}},l=({title:h,value:p,icon:j,trend:v,color:w="blue"})=>e.jsx("div",{className:`p-6 rounded-xl border ${t==="dark"?"bg-gray-800 border-gray-700":"bg-white border-gray-200"} hover:shadow-lg transition-shadow duration-200`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:`text-sm font-medium ${t==="dark"?"text-gray-400":"text-gray-600"}`,children:h}),e.jsx("p",{className:`text-3xl font-bold mt-2 ${t==="dark"?"text-white":"text-gray-900"}`,children:p}),v&&e.jsxs("p",{className:`text-sm mt-2 flex items-center ${v.type==="increase"?"text-green-600":"text-red-600"}`,children:[e.jsx(Ks,{className:"w-4 h-4 mr-1"}),v.value,"% from last month"]})]}),e.jsx("div",{className:`p-3 rounded-lg bg-${w}-100 dark:bg-${w}-900/20`,children:e.jsx(j,{className:`w-6 h-6 text-${w}-600 dark:text-${w}-400`})})]})}),c=({activity:h})=>{var p,j;return e.jsxs("div",{className:`flex items-center space-x-3 p-3 rounded-lg ${t==="dark"?"hover:bg-gray-700":"hover:bg-gray-50"} transition-colors duration-200`,children:[e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center ${h.action==="create"?"bg-green-100 dark:bg-green-900/20":h.action==="update"?"bg-blue-100 dark:bg-blue-900/20":"bg-red-100 dark:bg-red-900/20"}`,children:h.action==="create"?e.jsx(Te,{className:"w-4 h-4 text-green-600 dark:text-green-400"}):h.action==="update"?e.jsx(Dr,{className:"w-4 h-4 text-blue-600 dark:text-blue-400"}):e.jsx(Qe,{className:"w-4 h-4 text-red-600 dark:text-red-400"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("p",{className:`text-sm font-medium ${t==="dark"?"text-white":"text-gray-900"}`,children:[(p=h.userId)==null?void 0:p.email," ",h.action,"d ",h.resource]}),e.jsxs("p",{className:`text-xs ${t==="dark"?"text-gray-400":"text-gray-500"}`,children:[(j=h.clientId)==null?void 0:j.name," â€¢ ",new Date(h.createdAt).toLocaleString()]})]})]})};return r?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:`text-3xl font-bold ${t==="dark"?"text-white":"text-gray-900"}`,children:"Super Admin Dashboard"}),e.jsx("p",{className:`mt-2 ${t==="dark"?"text-gray-400":"text-gray-600"}`,children:"System overview and key metrics"})]}),e.jsx("div",{className:"flex items-center space-x-3",children:e.jsxs("div",{className:`px-3 py-1 rounded-full text-xs font-medium ${t==="dark"?"bg-green-900/20 text-green-400":"bg-green-100 text-green-800"}`,children:[e.jsx(hl,{className:"w-3 h-3 inline mr-1"}),"All Systems Operational"]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx(l,{title:"Total Clients",value:((o=s==null?void 0:s.overview)==null?void 0:o.totalClients)||0,icon:Ue,trend:{type:"increase",value:12},color:"blue"}),e.jsx(l,{title:"Active Clients",value:((d=s==null?void 0:s.overview)==null?void 0:d.activeClients)||0,icon:Te,trend:{type:"increase",value:8},color:"green"}),e.jsx(l,{title:"Total Users",value:((x=s==null?void 0:s.overview)==null?void 0:x.totalUsers)||0,icon:Dr,trend:{type:"increase",value:15},color:"purple"}),e.jsx(l,{title:"Active Packages",value:((u=s==null?void 0:s.overview)==null?void 0:u.totalPackages)||0,icon:is,color:"orange"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:`p-6 rounded-xl border ${t==="dark"?"bg-gray-800 border-gray-700":"bg-white border-gray-200"}`,children:[e.jsx("h3",{className:`text-lg font-semibold mb-4 ${t==="dark"?"text-white":"text-gray-900"}`,children:"Client Status"}),e.jsx("div",{className:"space-y-3",children:(m=s==null?void 0:s.clientStats)==null?void 0:m.map(h=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:`w-3 h-3 rounded-full ${h._id==="active"?"bg-green-500":h._id==="inactive"?"bg-gray-500":"bg-red-500"}`}),e.jsx("span",{className:`text-sm capitalize ${t==="dark"?"text-gray-300":"text-gray-700"}`,children:h._id})]}),e.jsx("span",{className:`text-sm font-medium ${t==="dark"?"text-white":"text-gray-900"}`,children:h.count})]},h._id))})]}),e.jsxs("div",{className:`p-6 rounded-xl border ${t==="dark"?"bg-gray-800 border-gray-700":"bg-white border-gray-200"}`,children:[e.jsx("h3",{className:`text-lg font-semibold mb-4 ${t==="dark"?"text-white":"text-gray-900"}`,children:"Subscriptions"}),e.jsx("div",{className:"space-y-3",children:(f=s==null?void 0:s.subscriptionStats)==null?void 0:f.map(h=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:`w-3 h-3 rounded-full ${h._id==="active"?"bg-blue-500":h._id==="trial"?"bg-yellow-500":"bg-red-500"}`}),e.jsx("span",{className:`text-sm capitalize ${t==="dark"?"text-gray-300":"text-gray-700"}`,children:h._id})]}),e.jsx("span",{className:`text-sm font-medium ${t==="dark"?"text-white":"text-gray-900"}`,children:h.count})]},h._id))})]}),e.jsxs("div",{className:`p-6 rounded-xl border ${t==="dark"?"bg-gray-800 border-gray-700":"bg-white border-gray-200"}`,children:[e.jsx("h3",{className:`text-lg font-semibold mb-4 ${t==="dark"?"text-white":"text-gray-900"}`,children:"Recent Activities"}),e.jsx("div",{className:"space-y-2",children:((g=s==null?void 0:s.recentActivities)==null?void 0:g.length)>0?s.recentActivities.map(h=>e.jsx(c,{activity:h},h._id)):e.jsx("p",{className:`text-sm ${t==="dark"?"text-gray-400":"text-gray-500"}`,children:"No recent activities"})})]})]}),e.jsx("div",{className:"p-6 rounded-xl border border-yellow-200 bg-yellow-50 dark:bg-yellow-900/10 dark:border-yellow-800",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(Jt,{className:"w-5 h-5 text-yellow-600 dark:text-yellow-400 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-yellow-800 dark:text-yellow-200",children:"System Alerts"}),e.jsx("p",{className:"text-sm text-yellow-700 dark:text-yellow-300 mt-1",children:"2 subscriptions expiring in the next 7 days. Review client renewals."})]})]})})]})},Zu=({client:t,onClose:s,onSuccess:a})=>{const{theme:r}=St(),[n,i]=y.useState({companyName:"",clientCode:"",email:"",adminEmail:"",phone:"",address:"",contactPerson:"",subscriptionPlan:"basic",subscriptionStartDate:new Date().toISOString().split("T")[0],subscriptionEndDate:"",maxUsers:10,status:"active",industry:"",website:"",taxId:"",notes:""});y.useEffect(()=>{var o,d,x,u,m,f;t&&i({companyName:t.companyName||"",clientCode:t.clientCode||"",email:t.email||"",adminEmail:((o=t.contactPerson)==null?void 0:o.email)||"",phone:t.phone||"",address:typeof t.address=="string"?t.address:"",contactPerson:((d=t.contactPerson)==null?void 0:d.name)||"",subscriptionPlan:((x=t.subscription)==null?void 0:x.plan)||"basic",subscriptionStartDate:(u=t.subscription)!=null&&u.startDate?new Date(t.subscription.startDate).toISOString().split("T")[0]:new Date().toISOString().split("T")[0],subscriptionEndDate:(m=t.subscription)!=null&&m.endDate?new Date(t.subscription.endDate).toISOString().split("T")[0]:"",maxUsers:((f=t.subscription)==null?void 0:f.maxUsers)||10,status:t.status||"active",industry:t.industry||"",website:t.website||"",taxId:t.taxId||"",notes:t.notes||""})},[t]);const l=o=>{const{name:d,value:x}=o.target;d==="phone"&&!/^[0-9+\-\s()]*$/.test(x)||i(u=>({...u,[d]:x}))},c=async o=>{var d,x;o.preventDefault();try{const u={clientCode:n.clientCode,name:n.companyName,companyName:n.companyName,email:n.email,adminEmail:n.adminEmail,phone:n.phone,address:n.address,contactPerson:{name:n.contactPerson,email:n.adminEmail||n.email,phone:n.phone},status:n.status,industry:n.industry,website:n.website,taxId:n.taxId,notes:n.notes,subscription:{plan:n.subscriptionPlan,startDate:n.subscriptionStartDate,endDate:n.subscriptionEndDate,maxUsers:n.maxUsers,status:"active"}};t?(await zb(t._id,u),_.success("Client updated successfully")):(await Bb(u),_.success("Client created successfully")),a(),s()}catch(u){console.error("Error saving client:",u),_.error(((x=(d=u.response)==null?void 0:d.data)==null?void 0:x.message)||"Failed to save client")}};return e.jsx("div",{className:`fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4 ${r==="dark"?"dark":""}`,children:e.jsxs("div",{className:`w-full max-w-4xl rounded-xl shadow-2xl overflow-hidden ${r==="dark"?"bg-gray-800 text-white":"bg-white text-gray-900"}`,children:[e.jsxs("div",{className:`flex items-center justify-between p-4 border-b ${r==="dark"?"border-gray-700":"border-gray-200"}`,children:[e.jsx("h2",{className:"text-xl font-semibold",children:t?"Edit Client":"Add New Client"}),e.jsx("button",{onClick:s,className:`p-2 rounded-full hover:bg-opacity-10 hover:bg-gray-500 ${r==="dark"?"text-gray-400":"text-gray-600"}`,children:e.jsx(Le,{className:"w-5 h-5"})})]}),e.jsxs("form",{onSubmit:c,className:"p-6 max-h-[80vh] overflow-y-auto",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("h3",{className:"text-lg font-medium flex items-center",children:[e.jsx(kn,{className:"w-5 h-5 mr-2 text-blue-500"}),"Company Information"]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium mb-1",children:["Company Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",name:"companyName",value:n.companyName,onChange:l,className:`w-full px-3 py-2 rounded-lg border ${r==="dark"?"bg-gray-700 border-gray-600":"bg-white border-gray-300"}`,required:!0})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium mb-1",children:["Client Code ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",name:"clientCode",value:n.clientCode,onChange:l,className:`w-full px-3 py-2 rounded-lg border ${r==="dark"?"bg-gray-700 border-gray-600":"bg-white border-gray-300"}`,required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Industry"}),e.jsx("input",{type:"text",name:"industry",value:n.industry,onChange:l,className:`w-full px-3 py-2 rounded-lg border ${r==="dark"?"bg-gray-700 border-gray-600":"bg-white border-gray-300"}`})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Website"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("span",{className:"text-gray-500",children:"https://"})}),e.jsx("input",{type:"text",name:"website",value:n.website,onChange:l,className:`w-full px-3 py-2 pl-16 rounded-lg border ${r==="dark"?"bg-gray-700 border-gray-600":"bg-white border-gray-300"}`,placeholder:"example.com"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Tax ID"}),e.jsx("input",{type:"text",name:"taxId",value:n.taxId,onChange:l,className:`w-full px-3 py-2 rounded-lg border ${r==="dark"?"bg-gray-700 border-gray-600":"bg-white border-gray-300"}`})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("h3",{className:"text-lg font-medium flex items-center",children:[e.jsx(_t,{className:"w-5 h-5 mr-2 text-blue-500"}),"Contact Information"]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium mb-1",children:["Contact Person ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",name:"contactPerson",value:n.contactPerson,onChange:l,className:`w-full px-3 py-2 rounded-lg border ${r==="dark"?"bg-gray-700 border-gray-600":"bg-white border-gray-300"}`,required:!0})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium mb-1",children:["Company Email ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(wt,{className:"h-4 w-4 text-gray-500"})}),e.jsx("input",{type:"email",name:"email",value:n.email,onChange:l,className:`w-full pl-10 px-3 py-2 rounded-lg border ${r==="dark"?"bg-gray-700 border-gray-600":"bg-white border-gray-300"}`,placeholder:"company@example.com",required:!0})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium mb-1",children:["Admin User Email ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(_t,{className:"h-4 w-4 text-gray-500"})}),e.jsx("input",{type:"email",name:"adminEmail",value:n.adminEmail,onChange:l,className:`w-full pl-10 px-3 py-2 rounded-lg border ${r==="dark"?"bg-gray-700 border-gray-600":"bg-white border-gray-300"}`,placeholder:"admin@example.com",required:!0})]}),e.jsx("p",{className:`text-xs mt-1 ${r==="dark"?"text-gray-400":"text-gray-500"}`,children:"This email will be used to create the admin user account (password: password123)"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium mb-1",children:["Phone ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(Bs,{className:"h-4 w-4 text-gray-500"})}),e.jsx("input",{type:"tel",name:"phone",value:n.phone,onChange:l,onKeyPress:o=>{const d=String.fromCharCode(o.which);!/[0-9+\-\s()]/.test(d)&&o.which!==8&&o.which!==46&&o.preventDefault()},className:`w-full pl-10 px-3 py-2 rounded-lg border ${r==="dark"?"bg-gray-700 border-gray-600":"bg-white border-gray-300"}`,required:!0,placeholder:"Enter phone number (numbers only)"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Address"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute top-3 left-3",children:e.jsx(Ra,{className:"h-4 w-4 text-gray-500"})}),e.jsx("textarea",{name:"address",value:n.address,onChange:l,rows:"3",className:`w-full pl-10 px-3 py-2 rounded-lg border ${r==="dark"?"bg-gray-700 border-gray-600":"bg-white border-gray-300"}`})]})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("h3",{className:"text-lg font-medium flex items-center",children:[e.jsx(_r,{className:"w-5 h-5 mr-2 text-blue-500"}),"Subscription Details"]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium mb-1",children:["Plan ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{name:"subscriptionPlan",value:n.subscriptionPlan,onChange:l,className:`w-full px-3 py-2 rounded-lg border ${r==="dark"?"bg-gray-700 border-gray-600":"bg-white border-gray-300"}`,children:[e.jsx("option",{value:"free",children:"Free"}),e.jsx("option",{value:"basic",children:"Basic"}),e.jsx("option",{value:"standard",children:"Standard"}),e.jsx("option",{value:"premium",children:"Premium"}),e.jsx("option",{value:"enterprise",children:"Enterprise"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium mb-1",children:["Start Date ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("div",{className:"relative",children:e.jsx("input",{type:"date",name:"subscriptionStartDate",value:n.subscriptionStartDate,onChange:l,className:`w-full px-3 py-2 rounded-lg border ${r==="dark"?"bg-gray-700 border-gray-600":"bg-white border-gray-300"}`,required:!0})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"End Date"}),e.jsx("div",{className:"relative",children:e.jsx("input",{type:"date",name:"subscriptionEndDate",value:n.subscriptionEndDate,onChange:l,min:n.subscriptionStartDate,className:`w-full px-3 py-2 rounded-lg border ${r==="dark"?"bg-gray-700 border-gray-600":"bg-white border-gray-300"}`})})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium mb-1",children:["Maximum Users ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(Ue,{className:"h-4 w-4 text-gray-500"})}),e.jsx("input",{type:"number",name:"maxUsers",min:"1",value:n.maxUsers,onChange:l,className:`w-full pl-10 px-3 py-2 rounded-lg border ${r==="dark"?"bg-gray-700 border-gray-600":"bg-white border-gray-300"}`,required:!0})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium mb-1",children:["Status ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{name:"status",value:n.status,onChange:l,className:`w-full px-3 py-2 rounded-lg border ${r==="dark"?"bg-gray-700 border-gray-600":"bg-white border-gray-300"}`,children:[e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"inactive",children:"Inactive"}),e.jsx("option",{value:"suspended",children:"Suspended"})]})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("h3",{className:"text-lg font-medium flex items-center",children:[e.jsx(st,{className:"w-5 h-5 mr-2 text-blue-500"}),"Additional Information"]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Notes"}),e.jsx("textarea",{name:"notes",value:n.notes,onChange:l,rows:"4",className:`w-full px-3 py-2 rounded-lg border ${r==="dark"?"bg-gray-700 border-gray-600":"bg-white border-gray-300"}`,placeholder:"Any additional notes about this client..."})]})]})]}),e.jsxs("div",{className:"mt-8 flex justify-end space-x-3",children:[e.jsx("button",{type:"button",onClick:s,className:`px-4 py-2 rounded-lg border ${r==="dark"?"border-gray-600 text-gray-300 hover:bg-gray-700":"border-gray-300 text-gray-700 hover:bg-gray-50"}`,children:"Cancel"}),e.jsxs("button",{type:"submit",className:"px-4 py-2 rounded-lg bg-blue-600 text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 flex items-center",children:[e.jsx(Rs,{className:"w-4 h-4 mr-2"}),t?"Update Client":"Create Client"]})]})]})]})})},vA=({clientId:t,clientName:s,isOpen:a,onClose:r})=>{const{theme:n}=St(),[i,l]=y.useState([]),[c,o]=y.useState([]),[d,x]=y.useState(!1),[u,m]=y.useState(!1),[f,g]=y.useState(null),[h,p]=y.useState({billingCycle:"monthly",customPrice:"",startDate:new Date().toISOString().split("T")[0],autoRenew:!1,trialDays:0});y.useEffect(()=>{a&&t&&(j(),v())},[a,t]);const j=async()=>{var N,C;try{const k=await nd();(C=(N=k.data)==null?void 0:N.data)!=null&&C.packages&&l(k.data.data.packages)}catch(k){console.error("Error fetching packages:",k),_.error("Failed to fetch packages")}},v=async()=>{var N;try{const C=await K0(t);(N=C.data)!=null&&N.clientPackages&&o(C.data.clientPackages)}catch(C){console.error("Error fetching client packages:",C)}},w=async()=>{var N,C;if(f)try{x(!0);const k={clientId:t,packageId:f._id,...h,customPrice:h.customPrice?parseFloat(h.customPrice):null};await X0(k),_.success("Package assigned successfully!"),m(!1),g(null),p({billingCycle:"monthly",customPrice:"",startDate:new Date().toISOString().split("T")[0],autoRenew:!1,trialDays:0}),v()}catch(k){console.error("Error assigning package:",k),_.error(((C=(N=k.response)==null?void 0:N.data)==null?void 0:C.message)||"Failed to assign package")}finally{x(!1)}},b=async(N,C)=>{if(window.confirm(`Are you sure you want to cancel the "${C}" package for ${s}?`))try{await tv(N,{reason:"Cancelled by Super Admin"}),_.success("Package cancelled successfully"),v()}catch(k){console.error("Error cancelling package:",k),_.error("Failed to cancel package")}},A=N=>{const C={active:"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400",trial:"bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-400",expired:"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400",cancelled:"bg-gray-100 text-gray-800 dark:bg-gray-600 dark:text-gray-300",suspended:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-400"};return C[N]||C.active};return a?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:`max-w-4xl w-full max-h-[90vh] overflow-y-auto rounded-xl ${n==="dark"?"bg-gray-800":"bg-white"}`,children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:`text-2xl font-bold ${n==="dark"?"text-white":"text-gray-900"}`,children:"Package Management"}),e.jsxs("p",{className:`text-sm ${n==="dark"?"text-gray-400":"text-gray-600"}`,children:["Managing packages for: ",e.jsx("span",{className:"font-medium",children:s})]})]}),e.jsx("button",{onClick:r,className:`p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 ${n==="dark"?"text-gray-400":"text-gray-600"}`,children:"Ã—"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:`text-lg font-semibold ${n==="dark"?"text-white":"text-gray-900"}`,children:"Current Packages"}),e.jsxs("button",{onClick:()=>m(!0),className:"flex items-center space-x-2 px-3 py-1 bg-blue-600 hover:bg-blue-700 text-white rounded-lg text-sm transition-colors duration-200",children:[e.jsx(qe,{className:"w-4 h-4"}),e.jsx("span",{children:"Assign Package"})]})]}),e.jsx("div",{className:"space-y-3",children:c.length>0?c.map(N=>{var C,k,S;return e.jsxs("div",{className:`p-4 rounded-lg border ${n==="dark"?"border-gray-700 bg-gray-700":"border-gray-200 bg-gray-50"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h4",{className:`font-medium ${n==="dark"?"text-white":"text-gray-900"}`,children:((C=N.packageId)==null?void 0:C.name)||"Unknown Package"}),e.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${A(N.status)}`,children:N.status})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm text-gray-500 mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(gt,{className:"w-4 h-4"}),e.jsxs("span",{children:["$",N.customPrice||((S=(k=N.packageId)==null?void 0:k.pricing)==null?void 0:S.monthly)||0,"/",N.billingCycle]})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(Oe,{className:"w-4 h-4"}),e.jsxs("span",{children:["Ends: ",new Date(N.endDate).toLocaleDateString()]})]})]}),e.jsx("div",{className:"flex justify-end space-x-2",children:e.jsx("button",{onClick:()=>{var F;return b(N._id,(F=N.packageId)==null?void 0:F.name)},className:"p-1 text-red-600 hover:bg-red-100 dark:hover:bg-red-900/20 rounded",title:"Cancel Package",children:e.jsx(kt,{className:"w-4 h-4"})})})]},N._id)}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(is,{className:`w-12 h-12 mx-auto mb-4 opacity-50 ${n==="dark"?"text-gray-400":"text-gray-500"}`}),e.jsx("p",{className:`${n==="dark"?"text-gray-400":"text-gray-500"}`,children:"No packages assigned to this client"})]})})]}),e.jsx("div",{children:u?e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:`text-lg font-semibold ${n==="dark"?"text-white":"text-gray-900"}`,children:"Assign New Package"}),e.jsx("button",{onClick:()=>{m(!1),g(null)},className:`text-sm ${n==="dark"?"text-gray-400":"text-gray-600"}`,children:"Cancel"})]}),e.jsx("div",{className:"space-y-3 mb-4 max-h-40 overflow-y-auto",children:i.map(N=>e.jsx("div",{onClick:()=>g(N),className:`p-3 rounded-lg cursor-pointer transition-colors border ${(f==null?void 0:f._id)===N._id?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":n==="dark"?"border-gray-600 bg-gray-700 hover:bg-gray-600":"border-gray-200 bg-white hover:bg-gray-50"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:`font-medium ${n==="dark"?"text-white":"text-gray-900"}`,children:N.name}),e.jsx("p",{className:"text-xs text-gray-500",children:N.type})]}),e.jsxs("span",{className:`text-sm font-medium ${n==="dark"?"text-green-400":"text-green-600"}`,children:["$",N.pricing.monthly,"/mo"]})]})},N._id))}),f&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-1 ${n==="dark"?"text-gray-300":"text-gray-700"}`,children:"Billing Cycle"}),e.jsxs("select",{value:h.billingCycle,onChange:N=>p({...h,billingCycle:N.target.value}),className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ${n==="dark"?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"}`,children:[e.jsx("option",{value:"monthly",children:"Monthly"}),e.jsx("option",{value:"quarterly",children:"Quarterly"}),e.jsx("option",{value:"yearly",children:"Yearly"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-1 ${n==="dark"?"text-gray-300":"text-gray-700"}`,children:"Custom Price (optional)"}),e.jsx("input",{type:"number",placeholder:`Default: $${f.pricing[h.billingCycle]||f.pricing.monthly}`,value:h.customPrice,onChange:N=>p({...h,customPrice:N.target.value}),className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ${n==="dark"?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"}`})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:"autoRenew",checked:h.autoRenew,onChange:N=>p({...h,autoRenew:N.target.checked}),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),e.jsx("label",{htmlFor:"autoRenew",className:`text-sm ${n==="dark"?"text-gray-300":"text-gray-700"}`,children:"Auto Renew"})]}),e.jsx("button",{onClick:w,disabled:d,className:"w-full px-4 py-2 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 text-white rounded-lg transition-colors duration-200",children:d?"Assigning...":"Assign Package"})]})]}):e.jsxs("div",{children:[e.jsx("h3",{className:`text-lg font-semibold mb-4 ${n==="dark"?"text-white":"text-gray-900"}`,children:"Available Packages"}),e.jsx("div",{className:"space-y-3",children:i.map(N=>{var C;return e.jsx("div",{className:`p-3 rounded-lg border ${n==="dark"?"border-gray-600 bg-gray-700":"border-gray-200 bg-gray-50"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:`font-medium ${n==="dark"?"text-white":"text-gray-900"}`,children:N.name}),e.jsxs("p",{className:"text-xs text-gray-500",children:[N.type," â€¢ ",((C=N.includedModules)==null?void 0:C.length)||0," modules"]})]}),e.jsxs("span",{className:`text-sm font-medium ${n==="dark"?"text-green-400":"text-green-600"}`,children:["$",N.pricing.monthly,"/mo"]})]})},N._id)})})]})})]})]})})}):null},jA=()=>{var D,le,de;const{theme:t}=St(),[s,a]=y.useState([]),[r,n]=y.useState(!0),[i,l]=y.useState(""),[c,o]=y.useState(""),[d,x]=y.useState(""),[u,m]=y.useState(1),[f,g]=y.useState(1),[h,p]=y.useState(!1),[j,v]=y.useState(null),[w,b]=y.useState(!1),[A,N]=y.useState(null),[C,k]=y.useState(!1),[S,F]=y.useState(null),[R,T]=y.useState(null);y.useEffect(()=>{M()},[u,i,c,d]);const M=async()=>{var E,z,O,P,Z,re;try{n(!0);const oe=await J0({page:u,limit:10,search:i,status:c,subscriptionStatus:d}),ue=((z=(E=oe.data)==null?void 0:E.data)==null?void 0:z.clients)||[],Ne=((P=(O=oe.data)==null?void 0:O.data)==null?void 0:P.pagination)||{pages:1};a(ue),g(Ne.pages||1)}catch(ie){console.error("Error fetching clients:",ie),a([]),g(1),_.error("Failed to fetch clients: "+(((re=(Z=ie.response)==null?void 0:Z.data)==null?void 0:re.message)||ie.message))}finally{n(!1)}},H=async(E,z)=>{try{await Ub(E,z),_.success(`Client ${z} successfully`),M()}catch(O){console.error("Error updating client status:",O),_.error("Failed to update client status")}},U=async E=>{if(window.confirm("Are you sure you want to delete this client? This action cannot be undone."))try{await Vb(E),_.success("Client deleted successfully"),M()}catch(z){console.error("Error deleting client:",z),_.error("Failed to delete client")}},W=E=>{const z={active:{bg:"bg-green-100 dark:bg-green-900/20",text:"text-green-800 dark:text-green-400",label:"Active"},inactive:{bg:"bg-gray-100 dark:bg-gray-900/20",text:"text-gray-800 dark:text-gray-400",label:"Inactive"},suspended:{bg:"bg-red-100 dark:bg-red-900/20",text:"text-red-800 dark:text-red-400",label:"Suspended"}},O=z[E]||z.inactive;return e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${O.bg} ${O.text}`,children:O.label})},se=E=>{const z={active:{bg:"bg-blue-100 dark:bg-blue-900/20",text:"text-blue-800 dark:text-blue-400",label:"Active"},trial:{bg:"bg-yellow-100 dark:bg-yellow-900/20",text:"text-yellow-800 dark:text-yellow-400",label:"Trial"},expired:{bg:"bg-red-100 dark:bg-red-900/20",text:"text-red-800 dark:text-red-400",label:"Expired"},suspended:{bg:"bg-orange-100 dark:bg-orange-900/20",text:"text-orange-800 dark:text-orange-400",label:"Suspended"}},O=(E==null?void 0:E.status)||"trial",P=z[O]||z.trial;return e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${P.bg} ${P.text}`,children:P.label})},X=({client:E})=>{var z;return e.jsxs("div",{className:`p-6 rounded-xl border ${t==="dark"?"bg-gray-800 border-gray-700 hover:border-gray-600":"bg-white border-gray-200 hover:border-gray-300"} hover:shadow-lg transition-all duration-200`,children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-blue-500 to-purple-600 rounded-lg flex items-center justify-center",children:e.jsx(kn,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:`text-lg font-semibold ${t==="dark"?"text-white":"text-gray-900"}`,children:E.companyName}),e.jsx("p",{className:`text-sm ${t==="dark"?"text-gray-400":"text-gray-600"}`,children:E.clientCode})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx("button",{onClick:()=>T(R===E._id?null:E._id),className:`p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 ${t==="dark"?"text-gray-400":"text-gray-600"}`,children:e.jsx(Qo,{className:"w-4 h-4"})}),R===E._id&&e.jsx("div",{className:`absolute right-0 top-10 w-48 rounded-lg shadow-lg border z-10 ${t==="dark"?"bg-gray-800 border-gray-700":"bg-white border-gray-200"}`,children:e.jsxs("div",{className:"py-1",children:[e.jsxs("button",{onClick:()=>{v(E),T(null)},className:`w-full px-4 py-2 text-left text-sm hover:bg-gray-100 dark:hover:bg-gray-700 flex items-center space-x-2 ${t==="dark"?"text-gray-300":"text-gray-700"}`,children:[e.jsx(Ht,{className:"w-4 h-4"}),e.jsx("span",{children:"View Details"})]}),e.jsxs("button",{onClick:()=>{N(E),T(null)},className:`w-full px-4 py-2 text-left text-sm hover:bg-gray-100 dark:hover:bg-gray-700 flex items-center space-x-2 ${t==="dark"?"text-gray-300":"text-gray-700"}`,children:[e.jsx($a,{className:"w-4 h-4"}),e.jsx("span",{children:"Edit Client"})]}),e.jsxs("button",{onClick:()=>{F(E),k(!0),T(null)},className:`w-full px-4 py-2 text-left text-sm hover:bg-gray-100 dark:hover:bg-gray-700 flex items-center space-x-2 ${t==="dark"?"text-gray-300":"text-gray-700"}`,children:[e.jsx(is,{className:"w-4 h-4"}),e.jsx("span",{children:"Manage Packages"})]}),E.status==="active"?e.jsxs("button",{onClick:()=>{H(E._id,"suspended"),T(null)},className:"w-full px-4 py-2 text-left text-sm hover:bg-gray-100 dark:hover:bg-gray-700 flex items-center space-x-2 text-orange-600",children:[e.jsx(ed,{className:"w-4 h-4"}),e.jsx("span",{children:"Suspend"})]}):e.jsxs("button",{onClick:()=>{H(E._id,"active"),T(null)},className:"w-full px-4 py-2 text-left text-sm hover:bg-gray-100 dark:hover:bg-gray-700 flex items-center space-x-2 text-green-600",children:[e.jsx(Fr,{className:"w-4 h-4"}),e.jsx("span",{children:"Activate"})]}),e.jsxs("button",{onClick:()=>{U(E._id),T(null)},className:"w-full px-4 py-2 text-left text-sm hover:bg-gray-100 dark:hover:bg-gray-700 flex items-center space-x-2 text-red-600",children:[e.jsx(kt,{className:"w-4 h-4"}),e.jsx("span",{children:"Delete"})]})]})})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:`text-sm ${t==="dark"?"text-gray-400":"text-gray-600"}`,children:"Status"}),W(E.status)]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:`text-sm ${t==="dark"?"text-gray-400":"text-gray-600"}`,children:"Subscription"}),se(E.subscription)]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(wt,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{className:`text-sm ${t==="dark"?"text-gray-300":"text-gray-700"}`,children:E.email})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Bs,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{className:`text-sm ${t==="dark"?"text-gray-300":"text-gray-700"}`,children:E.phone})]}),((z=E.address)==null?void 0:z.city)&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ra,{className:"w-4 h-4 text-gray-400"}),e.jsxs("span",{className:`text-sm ${t==="dark"?"text-gray-300":"text-gray-700"}`,children:[E.address.city,", ",E.address.country]})]}),e.jsx("div",{className:"pt-2 border-t border-gray-200 dark:border-gray-700",children:E.activePackages&&E.activePackages.length>0?e.jsx("div",{className:"space-y-2",children:E.activePackages.map((O,P)=>{var Z;return e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(is,{className:"w-4 h-4 text-green-500"}),e.jsx("span",{className:`text-sm font-medium ${t==="dark"?"text-gray-300":"text-gray-700"}`,children:((Z=O.packageId)==null?void 0:Z.name)||"Unknown Package"}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${O.status==="active"?"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-400"}`,children:O.status})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Oe,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{className:`text-xs ${t==="dark"?"text-gray-400":"text-gray-500"}`,children:O.endDate?new Date(O.endDate).toLocaleDateString():"No expiry"})]})]},P)})}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(is,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{className:`text-sm ${t==="dark"?"text-gray-300":"text-gray-700"}`,children:"No Active Packages"})]})})]})]})};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:`text-3xl font-bold ${t==="dark"?"text-white":"text-gray-900"}`,children:"Client Management"}),e.jsx("p",{className:`mt-2 ${t==="dark"?"text-gray-400":"text-gray-600"}`,children:"Manage and monitor all client accounts"})]}),e.jsxs("button",{onClick:()=>p(!0),className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors duration-200",children:[e.jsx(qe,{className:"w-4 h-4"}),e.jsx("span",{children:"Add Client"})]})]}),e.jsx("div",{className:`p-4 rounded-xl border ${t==="dark"?"bg-gray-800 border-gray-700":"bg-white border-gray-200"}`,children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(yt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search clients...",value:i,onChange:E=>l(E.target.value),className:`w-full pl-10 pr-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ${t==="dark"?"bg-gray-700 border-gray-600 text-white placeholder-gray-400":"bg-white border-gray-300 text-gray-900 placeholder-gray-500"}`})]}),e.jsxs("select",{value:c,onChange:E=>o(E.target.value),className:`px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ${t==="dark"?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"}`,children:[e.jsx("option",{value:"",children:"All Status"}),e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"inactive",children:"Inactive"}),e.jsx("option",{value:"suspended",children:"Suspended"})]}),e.jsxs("select",{value:d,onChange:E=>x(E.target.value),className:`px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ${t==="dark"?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"}`,children:[e.jsx("option",{value:"",children:"All Subscriptions"}),e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"trial",children:"Trial"}),e.jsx("option",{value:"expired",children:"Expired"}),e.jsx("option",{value:"suspended",children:"Suspended"})]}),e.jsxs("button",{onClick:()=>{l(""),o(""),x("")},className:`flex items-center justify-center space-x-2 px-4 py-2 border rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors duration-200 ${t==="dark"?"border-gray-600 text-gray-300":"border-gray-300 text-gray-700"}`,children:[e.jsx(Vs,{className:"w-4 h-4"}),e.jsx("span",{children:"Clear"})]})]})}),r?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):s&&Array.isArray(s)&&s.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:s.map(E=>e.jsx(X,{client:E},E._id))}):e.jsxs("div",{className:`text-center py-12 ${t==="dark"?"text-gray-400":"text-gray-500"}`,children:[e.jsx(Ue,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{className:"text-lg font-medium mb-2",children:"No clients found"}),e.jsx("p",{children:"Try adjusting your search criteria or add a new client."})]}),f>1&&e.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[e.jsx("button",{onClick:()=>m(Math.max(1,u-1)),disabled:u===1,className:`px-3 py-2 rounded-lg border ${u===1?"opacity-50 cursor-not-allowed":"hover:bg-gray-50 dark:hover:bg-gray-700"} ${t==="dark"?"border-gray-600 text-gray-300":"border-gray-300 text-gray-700"}`,children:"Previous"}),e.jsxs("span",{className:`px-4 py-2 ${t==="dark"?"text-gray-300":"text-gray-700"}`,children:["Page ",u," of ",f]}),e.jsx("button",{onClick:()=>m(Math.min(f,u+1)),disabled:u===f,className:`px-3 py-2 rounded-lg border ${u===f?"opacity-50 cursor-not-allowed":"hover:bg-gray-50 dark:hover:bg-gray-700"} ${t==="dark"?"border-gray-600 text-gray-300":"border-gray-300 text-gray-700"}`,children:"Next"})]}),h&&e.jsx(Zu,{onClose:()=>p(!1),onSuccess:()=>{p(!1),m(1),l(""),o(""),x(""),setTimeout(()=>{M()},500)}}),A&&e.jsx(Zu,{client:A,onClose:()=>N(null),onSuccess:()=>{M(),N(null)}}),C&&S&&e.jsx(vA,{clientId:S._id,clientName:S.companyName,isOpen:C,onClose:()=>{k(!1),F(null)}}),j&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:`w-full max-w-4xl max-h-[90vh] overflow-y-auto rounded-xl shadow-xl ${t==="dark"?"bg-gray-800":"bg-white"}`,children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:`w-12 h-12 rounded-lg flex items-center justify-center ${j.status==="active"?"bg-green-100 dark:bg-green-900/20":j.status==="suspended"?"bg-red-100 dark:bg-red-900/20":"bg-yellow-100 dark:bg-yellow-900/20"}`,children:e.jsx(Fr,{className:`w-6 h-6 ${j.status==="active"?"text-green-600 dark:text-green-400":j.status==="suspended"?"text-red-600 dark:text-red-400":"text-yellow-600 dark:text-yellow-400"}`})}),e.jsxs("div",{children:[e.jsx("h2",{className:`text-xl font-semibold ${t==="dark"?"text-white":"text-gray-900"}`,children:j.companyName}),e.jsx("p",{className:`text-sm ${t==="dark"?"text-gray-400":"text-gray-500"}`,children:j.clientCode})]})]}),e.jsx("button",{onClick:()=>v(null),className:`p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 ${t==="dark"?"text-gray-400":"text-gray-600"}`,children:e.jsx(Le,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:`text-lg font-medium mb-4 ${t==="dark"?"text-white":"text-gray-900"}`,children:"Company Information"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(wt,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{className:`text-sm ${t==="dark"?"text-gray-300":"text-gray-700"}`,children:j.email})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Bs,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{className:`text-sm ${t==="dark"?"text-gray-300":"text-gray-700"}`,children:j.phone})]}),j.website&&e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(td,{className:"w-4 h-4 text-gray-400"}),e.jsx("a",{href:j.website,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300",children:j.website})]}),j.address&&e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(Ra,{className:"w-4 h-4 text-gray-400 mt-0.5"}),e.jsx("span",{className:`text-sm ${t==="dark"?"text-gray-300":"text-gray-700"}`,children:typeof j.address=="string"?j.address:`${j.address.street}, ${j.address.city}, ${j.address.country}`})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:`text-lg font-medium mb-4 ${t==="dark"?"text-white":"text-gray-900"}`,children:"Contact Person"}),e.jsxs("div",{className:"space-y-3",children:[((D=j.contactPerson)==null?void 0:D.name)&&e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(_t,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{className:`text-sm ${t==="dark"?"text-gray-300":"text-gray-700"}`,children:j.contactPerson.name})]}),((le=j.contactPerson)==null?void 0:le.email)&&e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(wt,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{className:`text-sm ${t==="dark"?"text-gray-300":"text-gray-700"}`,children:j.contactPerson.email})]}),((de=j.contactPerson)==null?void 0:de.position)&&e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(ot,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{className:`text-sm ${t==="dark"?"text-gray-300":"text-gray-700"}`,children:j.contactPerson.position})]})]})]})]}),j.activePackages&&j.activePackages.length>0&&e.jsxs("div",{children:[e.jsx("h3",{className:`text-lg font-medium mb-4 ${t==="dark"?"text-white":"text-gray-900"}`,children:"Active Packages"}),e.jsx("div",{className:"space-y-3",children:j.activePackages.map((E,z)=>{var O;return e.jsx("div",{className:`p-4 rounded-lg border ${t==="dark"?"bg-gray-700 border-gray-600":"bg-gray-50 border-gray-200"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(is,{className:"w-5 h-5 text-blue-600"}),e.jsxs("div",{children:[e.jsx("h4",{className:`font-medium ${t==="dark"?"text-white":"text-gray-900"}`,children:((O=E.packageId)==null?void 0:O.name)||"Unknown Package"}),e.jsxs("p",{className:`text-sm ${t==="dark"?"text-gray-400":"text-gray-500"}`,children:[E.billingCycle," billing â€¢ ",E.status]})]})]}),e.jsx("div",{className:"text-right",children:e.jsxs("p",{className:`text-sm ${t==="dark"?"text-gray-300":"text-gray-700"}`,children:["Expires: ",E.endDate?new Date(E.endDate).toLocaleDateString():"No expiry"]})})]})},z)})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:`text-lg font-medium mb-4 ${t==="dark"?"text-white":"text-gray-900"}`,children:"Status Information"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:`text-sm ${t==="dark"?"text-gray-400":"text-gray-500"}`,children:"Status:"}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${j.status==="active"?"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400":j.status==="suspended"?"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-400"}`,children:j.status})]}),j.industry&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:`text-sm ${t==="dark"?"text-gray-400":"text-gray-500"}`,children:"Industry:"}),e.jsx("span",{className:`text-sm ${t==="dark"?"text-gray-300":"text-gray-700"}`,children:j.industry})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:`text-lg font-medium mb-4 ${t==="dark"?"text-white":"text-gray-900"}`,children:"Timeline"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:`text-sm ${t==="dark"?"text-gray-400":"text-gray-500"}`,children:"Created:"}),e.jsx("span",{className:`text-sm ${t==="dark"?"text-gray-300":"text-gray-700"}`,children:new Date(j.createdAt).toLocaleDateString()})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:`text-sm ${t==="dark"?"text-gray-400":"text-gray-500"}`,children:"Last Updated:"}),e.jsx("span",{className:`text-sm ${t==="dark"?"text-gray-300":"text-gray-700"}`,children:new Date(j.updatedAt).toLocaleDateString()})]})]})]})]})]}),e.jsxs("div",{className:"flex items-center justify-end space-x-4 p-6 border-t border-gray-200 dark:border-gray-700",children:[e.jsx("button",{onClick:()=>{const E=j;v(null),N(E)},className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors duration-200",children:"Edit Client"}),e.jsx("button",{onClick:()=>v(null),className:`px-4 py-2 border rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors duration-200 ${t==="dark"?"border-gray-600 text-gray-300":"border-gray-300 text-gray-700"}`,children:"Close"})]})]})})]})},NA=({isOpen:t,onClose:s})=>{const{theme:a}=St(),[r,n]=y.useState([]),[i,l]=y.useState([]),[c,o]=y.useState(null),[d,x]=y.useState(null),[u,m]=y.useState([]),[f,g]=y.useState(!1),[h,p]=y.useState(""),[j,v]=y.useState({billingCycle:"monthly",customPrice:"",startDate:new Date().toISOString().split("T")[0],endDate:"",autoRenew:!1,trialDays:0});y.useEffect(()=>{t&&(w(),b())},[t]),y.useEffect(()=>{c&&A()},[c]);const w=async()=>{var k,S,F,R;try{console.log("ðŸ” Fetching clients with search:",h);const T=await J0({search:h});console.log("ðŸ“Š Clients API response:",T),console.log("ðŸ“Š Clients data:",T.data),console.log("ðŸ” Clients response keys:",Object.keys(T.data||{}));let M=[];(S=(k=T.data)==null?void 0:k.data)!=null&&S.clients?(M=T.data.data.clients,console.log("âœ… Found clients in data.data.clients:",M.length)):(F=T.data)!=null&&F.clients?(M=T.data.clients,console.log("âœ… Found clients in data.clients:",M.length)):Array.isArray(T.data)?(M=T.data,console.log("âœ… Found clients as direct array:",M.length)):(console.log("âŒ No clients found in any expected location"),console.log("ðŸ“‹ Clients response keys:",Object.keys(T.data||{}))),n(M||[])}catch(T){console.error("âŒ Error fetching clients:",T),console.error("ðŸ“‹ Client error details:",(R=T.response)==null?void 0:R.data),_.error("Failed to fetch clients"),n([])}},b=async()=>{var k,S,F,R;try{console.log("ðŸ” Fetching packages for assignment...");const T=await nd();console.log("ðŸ“Š Packages API response:",T),console.log("ðŸ” Packages response keys:",Object.keys(T.data||{}));let M=[];(S=(k=T.data)==null?void 0:k.data)!=null&&S.packages?(M=T.data.data.packages,console.log("âœ… Found packages in data.data.packages:",M.length)):(F=T.data)!=null&&F.packages?(M=T.data.packages,console.log("âœ… Found packages in data.packages:",M.length)):Array.isArray(T.data)?(M=T.data,console.log("âœ… Found packages as direct array:",M.length)):(console.log("âŒ No packages found for assignment"),console.log("ðŸ“‹ Packages response keys:",Object.keys(T.data||{}))),l(M||[])}catch(T){console.error("âŒ Error fetching packages for assignment:",T),console.error("ðŸ“‹ Package error details:",(R=T.response)==null?void 0:R.data),_.error("Failed to fetch packages"),l([])}},A=async()=>{try{const k=await K0(c._id);m(k.data.clientPackages||[])}catch(k){console.error("Error fetching client packages:",k)}},N=async()=>{var k,S;if(!c||!d){_.error("Please select both client and package");return}try{g(!0);const F={clientId:c._id,packageId:d._id,...j,customPrice:j.customPrice?parseFloat(j.customPrice):null};await X0(F),_.success("Package assigned successfully!"),x(null),v({billingCycle:"monthly",customPrice:"",startDate:new Date().toISOString().split("T")[0],endDate:"",autoRenew:!1,trialDays:0}),A()}catch(F){console.error("Error assigning package:",F),_.error(((S=(k=F.response)==null?void 0:k.data)==null?void 0:S.message)||"Failed to assign package")}finally{g(!1)}},C=r.filter(k=>{var S,F;return((S=k.companyName)==null?void 0:S.toLowerCase().includes(h.toLowerCase()))||((F=k.name)==null?void 0:F.toLowerCase().includes(h.toLowerCase()))});return t?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:`max-w-6xl w-full max-h-[90vh] overflow-y-auto rounded-xl ${a==="dark"?"bg-gray-800":"bg-white"}`,children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:`text-2xl font-bold ${a==="dark"?"text-white":"text-gray-900"}`,children:"Package Assignment"}),e.jsx("button",{onClick:s,className:`p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 ${a==="dark"?"text-gray-400":"text-gray-600"}`,children:"Ã—"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:`p-4 rounded-lg border ${a==="dark"?"border-gray-700":"border-gray-200"}`,children:[e.jsx("h3",{className:`text-lg font-semibold mb-4 ${a==="dark"?"text-white":"text-gray-900"}`,children:"Select Client"}),e.jsxs("div",{className:"relative mb-4",children:[e.jsx(yt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search clients...",value:h,onChange:k=>p(k.target.value),className:`w-full pl-10 pr-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ${a==="dark"?"bg-gray-700 border-gray-600 text-white placeholder-gray-400":"bg-white border-gray-300 text-gray-900 placeholder-gray-500"}`})]}),e.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:C.map(k=>e.jsx("div",{onClick:()=>o(k),className:`p-3 rounded-lg cursor-pointer transition-colors ${(c==null?void 0:c._id)===k._id?"bg-blue-100 dark:bg-blue-900/20 border-blue-500":a==="dark"?"bg-gray-700 hover:bg-gray-600 border-gray-600":"bg-gray-50 hover:bg-gray-100 border-gray-200"} border`,children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(_t,{className:"w-4 h-4 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:`font-medium ${a==="dark"?"text-white":"text-gray-900"}`,children:k.companyName}),e.jsx("p",{className:"text-xs text-gray-500",children:k.email})]})]})},k._id))})]}),e.jsxs("div",{className:`p-4 rounded-lg border ${a==="dark"?"border-gray-700":"border-gray-200"}`,children:[e.jsx("h3",{className:`text-lg font-semibold mb-4 ${a==="dark"?"text-white":"text-gray-900"}`,children:"Select Package"}),e.jsx("div",{className:"space-y-3 mb-4 max-h-40 overflow-y-auto",children:i.map(k=>e.jsx("div",{onClick:()=>x(k),className:`p-3 rounded-lg cursor-pointer transition-colors ${(d==null?void 0:d._id)===k._id?"bg-green-100 dark:bg-green-900/20 border-green-500":a==="dark"?"bg-gray-700 hover:bg-gray-600 border-gray-600":"bg-gray-50 hover:bg-gray-100 border-gray-200"} border`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(is,{className:"w-4 h-4 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:`font-medium ${a==="dark"?"text-white":"text-gray-900"}`,children:k.name}),e.jsx("p",{className:"text-xs text-gray-500",children:k.type})]})]}),e.jsxs("span",{className:`text-sm font-medium ${a==="dark"?"text-green-400":"text-green-600"}`,children:["$",k.pricing.monthly,"/mo"]})]})},k._id))}),d&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-1 ${a==="dark"?"text-gray-300":"text-gray-700"}`,children:"Billing Cycle"}),e.jsxs("select",{value:j.billingCycle,onChange:k=>v({...j,billingCycle:k.target.value}),className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ${a==="dark"?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"}`,children:[e.jsx("option",{value:"monthly",children:"Monthly"}),e.jsx("option",{value:"quarterly",children:"Quarterly"}),e.jsx("option",{value:"yearly",children:"Yearly"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-1 ${a==="dark"?"text-gray-300":"text-gray-700"}`,children:"Custom Price (optional)"}),e.jsx("input",{type:"number",placeholder:`Default: $${d.pricing[j.billingCycle]||d.pricing.monthly}`,value:j.customPrice,onChange:k=>v({...j,customPrice:k.target.value}),className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ${a==="dark"?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"}`})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-1 ${a==="dark"?"text-gray-300":"text-gray-700"}`,children:"Start Date"}),e.jsx("input",{type:"date",value:j.startDate,onChange:k=>v({...j,startDate:k.target.value}),className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ${a==="dark"?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"}`})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-1 ${a==="dark"?"text-gray-300":"text-gray-700"}`,children:"End Date (Optional)"}),e.jsx("input",{type:"date",value:j.endDate,onChange:k=>v({...j,endDate:k.target.value}),className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ${a==="dark"?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"}`,placeholder:"Auto-calculated if not provided"}),e.jsx("p",{className:`text-xs mt-1 ${a==="dark"?"text-gray-400":"text-gray-500"}`,children:"If not provided, will be calculated based on billing cycle"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:"autoRenew",checked:j.autoRenew,onChange:k=>v({...j,autoRenew:k.target.checked}),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),e.jsx("label",{htmlFor:"autoRenew",className:`text-sm ${a==="dark"?"text-gray-300":"text-gray-700"}`,children:"Auto Renew"})]}),e.jsx("button",{onClick:N,disabled:f||!c,className:"w-full px-4 py-2 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 text-white rounded-lg transition-colors duration-200",children:f?"Assigning...":"Assign Package"})]})]}),e.jsxs("div",{className:`p-4 rounded-lg border ${a==="dark"?"border-gray-700":"border-gray-200"}`,children:[e.jsx("h3",{className:`text-lg font-semibold mb-4 ${a==="dark"?"text-white":"text-gray-900"}`,children:c?`${c.companyName} Packages`:"Client Packages"}),c?e.jsx("div",{className:"space-y-3",children:u.length>0?u.map(k=>{var S;return e.jsxs("div",{className:`p-3 rounded-lg border ${a==="dark"?"border-gray-600 bg-gray-700":"border-gray-200 bg-gray-50"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:`font-medium ${a==="dark"?"text-white":"text-gray-900"}`,children:(S=k.packageId)==null?void 0:S.name}),e.jsx("span",{className:`px-2 py-1 rounded text-xs ${k.status==="active"?"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400":"bg-gray-100 text-gray-800 dark:bg-gray-600 dark:text-gray-300"}`,children:k.status})]}),e.jsxs("div",{className:"text-xs text-gray-500 space-y-1",children:[e.jsxs("p",{children:["Billing: ",k.billingCycle]}),e.jsxs("p",{children:["End Date: ",new Date(k.endDate).toLocaleDateString()]})]})]},k._id)}):e.jsx("p",{className:"text-gray-500 text-center py-4",children:"No packages assigned"})}):e.jsx("p",{className:"text-gray-500 text-center py-8",children:"Select a client to view their packages"})]})]})]})})}):null},Ju=({package:t,onClose:s,onSuccess:a})=>{const{theme:r}=St(),[n,i]=y.useState(!1),[l,c]=y.useState({name:"",description:"",type:"starter",pricing:{monthly:"",quarterly:"",yearly:"",currency:"USD"},features:{maxEmployees:"",maxAdmins:"2",storageLimit:"10",customBranding:!1,apiAccess:!1,advancedReporting:!1,multiLocation:!1,integrations:!1},includedModules:[],isActive:!0,isPopular:!1,trialDays:"14"}),o=["hr","payroll","timesheet","attendance","recruitment","performance","assets","compliance"],d=[{value:"starter",label:"Starter",color:"text-green-600"},{value:"professional",label:"Professional",color:"text-blue-600"},{value:"enterprise",label:"Enterprise",color:"text-purple-600"},{value:"custom",label:"Custom",color:"text-orange-600"}];y.useEffect(()=>{var m,f,g,h,p,j,v,w,b,A,N,C,k,S,F,R,T,M,H;t&&c({name:t.name||"",description:t.description||"",type:t.type||"starter",pricing:{monthly:((f=(m=t.pricing)==null?void 0:m.monthly)==null?void 0:f.toString())||"",quarterly:((h=(g=t.pricing)==null?void 0:g.quarterly)==null?void 0:h.toString())||"",yearly:((j=(p=t.pricing)==null?void 0:p.yearly)==null?void 0:j.toString())||"",currency:((v=t.pricing)==null?void 0:v.currency)||"USD"},features:{maxEmployees:((b=(w=t.features)==null?void 0:w.maxEmployees)==null?void 0:b.toString())||"",maxAdmins:((N=(A=t.features)==null?void 0:A.maxAdmins)==null?void 0:N.toString())||"2",storageLimit:((k=(C=t.features)==null?void 0:C.storageLimit)==null?void 0:k.toString())||"10",customBranding:((S=t.features)==null?void 0:S.customBranding)||!1,apiAccess:((F=t.features)==null?void 0:F.apiAccess)||!1,advancedReporting:((R=t.features)==null?void 0:R.advancedReporting)||!1,multiLocation:((T=t.features)==null?void 0:T.multiLocation)||!1,integrations:((M=t.features)==null?void 0:M.integrations)||!1},includedModules:t.includedModules||[],isActive:t.isActive!==void 0?t.isActive:!0,isPopular:t.isPopular||!1,trialDays:((H=t.trialDays)==null?void 0:H.toString())||"14"})},[t]);const x=async m=>{var f,g;m.preventDefault(),i(!0);try{const h={...l,pricing:{...l.pricing,monthly:parseFloat(l.pricing.monthly)||0,quarterly:parseFloat(l.pricing.quarterly)||0,yearly:parseFloat(l.pricing.yearly)||0},features:{...l.features,maxEmployees:parseInt(l.features.maxEmployees)||0,maxAdmins:parseInt(l.features.maxAdmins)||2,storageLimit:parseInt(l.features.storageLimit)||10},trialDays:parseInt(l.trialDays)||14};t?(await qb(t._id,h),_.success("Package updated successfully!")):(await Hb(h),_.success("Package created successfully!")),a(),s()}catch(h){console.error("Error saving package:",h),_.error(((g=(f=h.response)==null?void 0:f.data)==null?void 0:g.message)||"Failed to save package")}finally{i(!1)}},u=m=>{c(f=>({...f,includedModules:f.includedModules.includes(m)?f.includedModules.filter(g=>g!==m):[...f.includedModules,m]}))};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:`w-full max-w-4xl max-h-[90vh] overflow-y-auto rounded-xl shadow-xl ${r==="dark"?"bg-gray-800":"bg-white"}`,children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(is,{className:"w-6 h-6 text-blue-600"}),e.jsx("h2",{className:`text-xl font-semibold ${r==="dark"?"text-white":"text-gray-900"}`,children:t?"Edit Package":"Create New Package"})]}),e.jsx("button",{onClick:s,className:`p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 ${r==="dark"?"text-gray-400":"text-gray-600"}`,children:e.jsx(Le,{className:"w-5 h-5"})})]}),e.jsxs("form",{onSubmit:x,className:"p-6 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${r==="dark"?"text-gray-300":"text-gray-700"}`,children:"Package Name *"}),e.jsx("input",{type:"text",value:l.name,onChange:m=>c(f=>({...f,name:m.target.value})),className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ${r==="dark"?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"}`,required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${r==="dark"?"text-gray-300":"text-gray-700"}`,children:"Package Type *"}),e.jsx("select",{value:l.type,onChange:m=>c(f=>({...f,type:m.target.value})),className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ${r==="dark"?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"}`,required:!0,children:d.map(m=>e.jsx("option",{value:m.value,children:m.label},m.value))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${r==="dark"?"text-gray-300":"text-gray-700"}`,children:"Description *"}),e.jsx("textarea",{value:l.description,onChange:m=>c(f=>({...f,description:m.target.value})),rows:3,className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ${r==="dark"?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"}`,required:!0})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:`text-lg font-medium mb-4 flex items-center space-x-2 ${r==="dark"?"text-white":"text-gray-900"}`,children:[e.jsx(gt,{className:"w-5 h-5"}),e.jsx("span",{children:"Pricing"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-1 ${r==="dark"?"text-gray-300":"text-gray-700"}`,children:"Monthly Price ($)"}),e.jsx("input",{type:"number",step:"0.01",value:l.pricing.monthly,onChange:m=>c(f=>({...f,pricing:{...f.pricing,monthly:m.target.value}})),className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ${r==="dark"?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"}`})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-1 ${r==="dark"?"text-gray-300":"text-gray-700"}`,children:"Quarterly Price ($)"}),e.jsx("input",{type:"number",step:"0.01",value:l.pricing.quarterly,onChange:m=>c(f=>({...f,pricing:{...f.pricing,quarterly:m.target.value}})),className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ${r==="dark"?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"}`})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-1 ${r==="dark"?"text-gray-300":"text-gray-700"}`,children:"Yearly Price ($)"}),e.jsx("input",{type:"number",step:"0.01",value:l.pricing.yearly,onChange:m=>c(f=>({...f,pricing:{...f.pricing,yearly:m.target.value}})),className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ${r==="dark"?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"}`})]})]})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:`text-lg font-medium mb-4 flex items-center space-x-2 ${r==="dark"?"text-white":"text-gray-900"}`,children:[e.jsx(Ta,{className:"w-5 h-5"}),e.jsx("span",{children:"Features & Limits"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-1 ${r==="dark"?"text-gray-300":"text-gray-700"}`,children:"Max Employees"}),e.jsx("input",{type:"number",value:l.features.maxEmployees,onChange:m=>c(f=>({...f,features:{...f.features,maxEmployees:m.target.value}})),className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ${r==="dark"?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"}`})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-1 ${r==="dark"?"text-gray-300":"text-gray-700"}`,children:"Max Admins"}),e.jsx("input",{type:"number",value:l.features.maxAdmins,onChange:m=>c(f=>({...f,features:{...f.features,maxAdmins:m.target.value}})),className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ${r==="dark"?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"}`})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-1 ${r==="dark"?"text-gray-300":"text-gray-700"}`,children:"Storage Limit (GB)"}),e.jsx("input",{type:"number",value:l.features.storageLimit,onChange:m=>c(f=>({...f,features:{...f.features,storageLimit:m.target.value}})),className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ${r==="dark"?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"}`})]})]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4 mt-4",children:[{key:"customBranding",label:"Custom Branding"},{key:"apiAccess",label:"API Access"},{key:"advancedReporting",label:"Advanced Reporting"},{key:"multiLocation",label:"Multi Location"},{key:"integrations",label:"Integrations"}].map(m=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:m.key,checked:l.features[m.key],onChange:f=>c(g=>({...g,features:{...g.features,[m.key]:f.target.checked}})),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),e.jsx("label",{htmlFor:m.key,className:`text-sm ${r==="dark"?"text-gray-300":"text-gray-700"}`,children:m.label})]},m.key))})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:`text-lg font-medium mb-4 flex items-center space-x-2 ${r==="dark"?"text-white":"text-gray-900"}`,children:[e.jsx(Ue,{className:"w-5 h-5"}),e.jsx("span",{children:"Included Modules"})]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:o.map(m=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:m,checked:l.includedModules.includes(m),onChange:()=>u(m),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),e.jsx("label",{htmlFor:m,className:`text-sm capitalize ${r==="dark"?"text-gray-300":"text-gray-700"}`,children:m})]},m))})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-1 ${r==="dark"?"text-gray-300":"text-gray-700"}`,children:"Trial Days"}),e.jsx("input",{type:"number",value:l.trialDays,onChange:m=>c(f=>({...f,trialDays:m.target.value})),className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ${r==="dark"?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"}`})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:"isActive",checked:l.isActive,onChange:m=>c(f=>({...f,isActive:m.target.checked})),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),e.jsx("label",{htmlFor:"isActive",className:`text-sm ${r==="dark"?"text-gray-300":"text-gray-700"}`,children:"Active Package"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:"isPopular",checked:l.isPopular,onChange:m=>c(f=>({...f,isPopular:m.target.checked})),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),e.jsx("label",{htmlFor:"isPopular",className:`text-sm ${r==="dark"?"text-gray-300":"text-gray-700"}`,children:"Popular Package"})]})]}),e.jsxs("div",{className:"flex items-center justify-end space-x-4 pt-6 border-t border-gray-200 dark:border-gray-700",children:[e.jsx("button",{type:"button",onClick:s,className:`px-4 py-2 border rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 ${r==="dark"?"border-gray-600 text-gray-300":"border-gray-300 text-gray-700"}`,children:"Cancel"}),e.jsx("button",{type:"submit",disabled:n,className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg disabled:opacity-50 disabled:cursor-not-allowed",children:n?"Saving...":t?"Update Package":"Create Package"})]})]})]})})},wA=()=>{const{theme:t}=St(),[s,a]=y.useState([]),[r,n]=y.useState(!0),[i,l]=y.useState(""),[c,o]=y.useState(""),[d,x]=y.useState(!1),[u,m]=y.useState(null),[f,g]=y.useState(!1),[h,p]=y.useState(null);y.useEffect(()=>{j()},[i,c]);const j=async()=>{var N,C,k,S,F,R,T,M,H;try{n(!0);const U={search:i,type:c};console.log("ðŸ” Fetching packages with params:",U);const W=await nd(U);console.log("ðŸ“¦ API Response:",W),console.log("ðŸ“Š Response data:",W.data),console.log("ðŸ” Response data type:",typeof W.data),console.log("ðŸ” Response data keys:",Object.keys(W.data||{})),console.log("ðŸ” Looking for packages in:",(C=(N=W.data)==null?void 0:N.data)==null?void 0:C.packages);let se=[];(S=(k=W.data)==null?void 0:k.data)!=null&&S.packages?(se=W.data.data.packages,console.log("âœ… Found packages in data.data.packages:",se.length)):(F=W.data)!=null&&F.packages?(se=W.data.packages,console.log("âœ… Found packages in data.packages:",se.length)):Array.isArray(W.data)?(se=W.data,console.log("âœ… Found packages as direct array:",se.length)):(console.log("âŒ No packages found in any expected location"),console.log("ðŸ“‹ Response data keys:",Object.keys(W.data||{})),console.log("ðŸ“‹ Full response structure (first 500 chars):",JSON.stringify(W.data,null,2).substring(0,500))),a(se||[])}catch(U){console.error("âŒ Error fetching packages:",U),console.error("ðŸ“‹ Error response:",U.response),console.error("ðŸ“‹ Error status:",(R=U.response)==null?void 0:R.status),console.error("ðŸ“‹ Error data:",(T=U.response)==null?void 0:T.data),_.error(((H=(M=U.response)==null?void 0:M.data)==null?void 0:H.message)||"Failed to fetch packages"),a([])}finally{n(!1)}},v=async N=>{try{await Wb(N),_.success("Package status updated successfully"),j()}catch(C){console.error("Error toggling package status:",C),_.error("Failed to update package status")}},w=async N=>{var C,k;if(window.confirm("Are you sure you want to delete this package? This action cannot be undone."))try{await Gb(N),_.success("Package deleted successfully"),j()}catch(S){console.error("Error deleting package:",S),_.error(((k=(C=S.response)==null?void 0:C.data)==null?void 0:k.message)||"Failed to delete package")}},b=N=>{const C={starter:"bg-green-100 dark:bg-green-900/20 text-green-800 dark:text-green-400",professional:"bg-blue-100 dark:bg-blue-900/20 text-blue-800 dark:text-blue-400",enterprise:"bg-purple-100 dark:bg-purple-900/20 text-purple-800 dark:text-purple-400",custom:"bg-orange-100 dark:bg-orange-900/20 text-orange-800 dark:text-orange-400"};return C[N]||C.starter},A=({pkg:N})=>{var C,k;return e.jsxs("div",{className:`p-6 rounded-xl border ${t==="dark"?"bg-gray-800 border-gray-700 hover:border-gray-600":"bg-white border-gray-200 hover:border-gray-300"} hover:shadow-lg transition-all duration-200 relative`,children:[N.isPopular&&e.jsx("div",{className:"absolute -top-2 -right-2",children:e.jsxs("div",{className:"bg-gradient-to-r from-yellow-400 to-orange-500 text-white px-3 py-1 rounded-full text-xs font-medium flex items-center space-x-1",children:[e.jsx(Ko,{className:"w-3 h-3"}),e.jsx("span",{children:"Popular"})]})}),e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:`w-12 h-12 rounded-lg flex items-center justify-center ${N.type==="starter"?"bg-green-100 dark:bg-green-900/20":N.type==="professional"?"bg-blue-100 dark:bg-blue-900/20":N.type==="enterprise"?"bg-purple-100 dark:bg-purple-900/20":"bg-orange-100 dark:bg-orange-900/20"}`,children:e.jsx(is,{className:`w-6 h-6 ${N.type==="starter"?"text-green-600 dark:text-green-400":N.type==="professional"?"text-blue-600 dark:text-blue-400":N.type==="enterprise"?"text-purple-600 dark:text-purple-400":"text-orange-600 dark:text-orange-400"}`})}),e.jsxs("div",{children:[e.jsx("h3",{className:`text-lg font-semibold ${t==="dark"?"text-white":"text-gray-900"}`,children:N.name}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${b(N.type)}`,children:N.type.charAt(0).toUpperCase()+N.type.slice(1)})]})]}),e.jsx("div",{className:"flex items-center space-x-2",children:e.jsx("button",{onClick:()=>v(N._id),className:`p-2 rounded-lg transition-colors duration-200 ${N.isActive?"text-green-600 hover:bg-green-100 dark:hover:bg-green-900/20":"text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700"}`,title:N.isActive?"Deactivate Package":"Activate Package",children:N.isActive?e.jsx(Dg,{className:"w-5 h-5"}):e.jsx(Rg,{className:"w-5 h-5"})})})]}),e.jsx("p",{className:`text-sm mb-4 ${t==="dark"?"text-gray-400":"text-gray-600"}`,children:N.description}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex items-baseline space-x-2",children:[e.jsxs("span",{className:`text-2xl font-bold ${t==="dark"?"text-white":"text-gray-900"}`,children:["$",N.pricing.monthly]}),e.jsx("span",{className:`text-sm ${t==="dark"?"text-gray-400":"text-gray-600"}`,children:"/month"})]}),N.pricing.yearly&&e.jsxs("p",{className:"text-xs text-gray-500",children:["$",N.pricing.yearly,"/year (Save ",Math.round((1-N.pricing.yearly/12/N.pricing.monthly)*100),"%)"]})]}),e.jsxs("div",{className:"space-y-2 mb-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:`text-sm ${t==="dark"?"text-gray-400":"text-gray-600"}`,children:"Max Employees"}),e.jsx("span",{className:`text-sm font-medium ${t==="dark"?"text-white":"text-gray-900"}`,children:N.features.maxEmployees===-1?"Unlimited":N.features.maxEmployees})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:`text-sm ${t==="dark"?"text-gray-400":"text-gray-600"}`,children:"Storage"}),e.jsxs("span",{className:`text-sm font-medium ${t==="dark"?"text-white":"text-gray-900"}`,children:[N.features.storageLimit,"GB"]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:`text-sm ${t==="dark"?"text-gray-400":"text-gray-600"}`,children:"API Access"}),N.features.apiAccess?e.jsx(Te,{className:"w-4 h-4 text-green-500"}):e.jsx(Qe,{className:"w-4 h-4 text-red-500"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:`text-sm ${t==="dark"?"text-gray-400":"text-gray-600"}`,children:"Custom Branding"}),N.features.customBranding?e.jsx(Te,{className:"w-4 h-4 text-green-500"}):e.jsx(Qe,{className:"w-4 h-4 text-red-500"})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("p",{className:`text-sm font-medium mb-2 ${t==="dark"?"text-gray-300":"text-gray-700"}`,children:["Included Modules (",((C=N.includedModules)==null?void 0:C.length)||0,")"]}),e.jsxs("div",{className:"flex flex-wrap gap-1",children:[((k=N.includedModules)==null?void 0:k.slice(0,3).map(S=>e.jsx("span",{className:`px-2 py-1 rounded text-xs ${t==="dark"?"bg-gray-700 text-gray-300":"bg-gray-100 text-gray-700"}`,children:S.toUpperCase()},S)))||[],N.includedModules&&N.includedModules.length>3&&e.jsxs("span",{className:`px-2 py-1 rounded text-xs ${t==="dark"?"bg-gray-700 text-gray-400":"bg-gray-100 text-gray-500"}`,children:["+",N.includedModules.length-3," more"]})]})]}),e.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ue,{className:"w-4 h-4 text-gray-400"}),e.jsxs("span",{className:`text-sm ${t==="dark"?"text-gray-300":"text-gray-700"}`,children:[N.usageCount||0," clients"]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>m(N),className:`p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 ${t==="dark"?"text-gray-400":"text-gray-600"}`,title:"View Details",children:e.jsx(Ht,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>p(N),className:`p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 ${t==="dark"?"text-gray-400":"text-gray-600"}`,title:"Edit Package",children:e.jsx($a,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>w(N._id),className:"p-2 rounded-lg hover:bg-red-100 dark:hover:bg-red-900/20 text-red-600",title:"Delete Package",children:e.jsx(kt,{className:"w-4 h-4"})})]})]})]})};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:`text-3xl font-bold ${t==="dark"?"text-white":"text-gray-900"}`,children:"Package Management"}),e.jsx("p",{className:`mt-2 ${t==="dark"?"text-gray-400":"text-gray-600"}`,children:"Create and manage subscription packages for clients"})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsxs("button",{onClick:()=>g(!0),className:"flex items-center space-x-2 px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg transition-colors duration-200",children:[e.jsx(Ue,{className:"w-4 h-4"}),e.jsx("span",{children:"Assign to Client"})]}),e.jsxs("button",{onClick:()=>x(!0),className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors duration-200",children:[e.jsx(qe,{className:"w-4 h-4"}),e.jsx("span",{children:"Create Package"})]})]})]}),e.jsx("div",{className:`p-4 rounded-xl border ${t==="dark"?"bg-gray-800 border-gray-700":"bg-white border-gray-200"}`,children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(yt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search packages...",value:i,onChange:N=>l(N.target.value),className:`w-full pl-10 pr-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ${t==="dark"?"bg-gray-700 border-gray-600 text-white placeholder-gray-400":"bg-white border-gray-300 text-gray-900 placeholder-gray-500"}`})]}),e.jsxs("select",{value:c,onChange:N=>o(N.target.value),className:`px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ${t==="dark"?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"}`,children:[e.jsx("option",{value:"",children:"All Types"}),e.jsx("option",{value:"starter",children:"Starter"}),e.jsx("option",{value:"professional",children:"Professional"}),e.jsx("option",{value:"enterprise",children:"Enterprise"}),e.jsx("option",{value:"custom",children:"Custom"})]}),e.jsx("button",{onClick:()=>{l(""),o("")},className:`flex items-center justify-center space-x-2 px-4 py-2 border rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors duration-200 ${t==="dark"?"border-gray-600 text-gray-300":"border-gray-300 text-gray-700"}`,children:e.jsx("span",{children:"Clear Filters"})})]})}),r?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):s&&s.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:s.map(N=>e.jsx(A,{pkg:N},N._id))}):e.jsxs("div",{className:`text-center py-12 ${t==="dark"?"text-gray-400":"text-gray-500"}`,children:[e.jsx(is,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{className:"text-lg font-medium mb-2",children:"No packages found"}),e.jsx("p",{children:"Try adjusting your search criteria or create a new package."})]}),d&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:`max-w-4xl w-full max-h-[90vh] overflow-y-auto rounded-xl ${t==="dark"?"bg-gray-800":"bg-white"}`,children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:`text-xl font-bold ${t==="dark"?"text-white":"text-gray-900"}`,children:"Create Package"}),e.jsx("button",{onClick:()=>x(!1),className:`p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 ${t==="dark"?"text-gray-400":"text-gray-600"}`,children:"Ã—"})]}),e.jsxs("form",{onSubmit:handleCreatePackage,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-1 ${t==="dark"?"text-gray-300":"text-gray-700"}`,children:"Package Name *"}),e.jsx("input",{type:"text",required:!0,value:createForm.name,onChange:N=>setCreateForm({...createForm,name:N.target.value}),className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ${t==="dark"?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"}`,placeholder:"e.g., Starter Plan"})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-1 ${t==="dark"?"text-gray-300":"text-gray-700"}`,children:"Package Type *"}),e.jsxs("select",{value:createForm.type,onChange:N=>setCreateForm({...createForm,type:N.target.value}),className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ${t==="dark"?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"}`,children:[e.jsx("option",{value:"starter",children:"Starter"}),e.jsx("option",{value:"professional",children:"Professional"}),e.jsx("option",{value:"enterprise",children:"Enterprise"}),e.jsx("option",{value:"custom",children:"Custom"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-1 ${t==="dark"?"text-gray-300":"text-gray-700"}`,children:"Description *"}),e.jsx("textarea",{required:!0,value:createForm.description,onChange:N=>setCreateForm({...createForm,description:N.target.value}),rows:3,className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ${t==="dark"?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"}`,placeholder:"Describe the package features and benefits"})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${t==="dark"?"text-gray-300":"text-gray-700"}`,children:"Pricing"}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:"Monthly ($) *"}),e.jsx("input",{type:"number",required:!0,value:createForm.pricing.monthly,onChange:N=>setCreateForm({...createForm,pricing:{...createForm.pricing,monthly:N.target.value}}),className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ${t==="dark"?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"}`,placeholder:"29"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:"Quarterly ($)"}),e.jsx("input",{type:"number",value:createForm.pricing.quarterly,onChange:N=>setCreateForm({...createForm,pricing:{...createForm.pricing,quarterly:N.target.value}}),className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ${t==="dark"?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"}`,placeholder:"78"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:"Yearly ($)"}),e.jsx("input",{type:"number",value:createForm.pricing.yearly,onChange:N=>setCreateForm({...createForm,pricing:{...createForm.pricing,yearly:N.target.value}}),className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ${t==="dark"?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"}`,placeholder:"290"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${t==="dark"?"text-gray-300":"text-gray-700"}`,children:"Features"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:"Max Employees *"}),e.jsx("input",{type:"number",required:!0,value:createForm.features.maxEmployees,onChange:N=>setCreateForm({...createForm,features:{...createForm.features,maxEmployees:N.target.value}}),className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ${t==="dark"?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"}`,placeholder:"25"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:"Storage (GB)"}),e.jsx("input",{type:"number",value:createForm.features.storageLimit,onChange:N=>setCreateForm({...createForm,features:{...createForm.features,storageLimit:N.target.value}}),className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ${t==="dark"?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"}`,placeholder:"10"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${t==="dark"?"text-gray-300":"text-gray-700"}`,children:"Included Modules"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:modules.map(N=>e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",checked:createForm.includedModules.includes(N),onChange:C=>{C.target.checked?setCreateForm({...createForm,includedModules:[...createForm.includedModules,N]}):setCreateForm({...createForm,includedModules:createForm.includedModules.filter(k=>k!==N)})},className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),e.jsx("span",{className:`text-sm ${t==="dark"?"text-gray-300":"text-gray-700"}`,children:N.charAt(0).toUpperCase()+N.slice(1)})]},N))})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>x(!1),className:`px-4 py-2 border rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors duration-200 ${t==="dark"?"border-gray-600 text-gray-300":"border-gray-300 text-gray-700"}`,children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors duration-200",children:"Create Package"})]})]})]})})}),u&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:`max-w-2xl w-full max-h-[90vh] overflow-y-auto rounded-xl ${t==="dark"?"bg-gray-800":"bg-white"}`,children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:`text-2xl font-bold ${t==="dark"?"text-white":"text-gray-900"}`,children:u.name}),e.jsx("button",{onClick:()=>m(null),className:`p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 ${t==="dark"?"text-gray-400":"text-gray-600"}`,children:"Ã—"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:`${t==="dark"?"text-gray-300":"text-gray-700"}`,children:u.description}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:`font-medium mb-2 ${t==="dark"?"text-white":"text-gray-900"}`,children:"Pricing"}),e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("p",{children:["Monthly: $",u.pricing.monthly]}),u.pricing.quarterly&&e.jsxs("p",{children:["Quarterly: $",u.pricing.quarterly]}),u.pricing.yearly&&e.jsxs("p",{children:["Yearly: $",u.pricing.yearly]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:`font-medium mb-2 ${t==="dark"?"text-white":"text-gray-900"}`,children:"Features"}),e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("p",{children:["Max Employees: ",u.features.maxEmployees===-1?"Unlimited":u.features.maxEmployees]}),e.jsxs("p",{children:["Storage: ",u.features.storageLimit,"GB"]}),e.jsxs("p",{children:["API Access: ",u.features.apiAccess?"Yes":"No"]}),e.jsxs("p",{children:["Custom Branding: ",u.features.customBranding?"Yes":"No"]})]})]})]})]})]})})}),f&&e.jsx(NA,{isOpen:f,onClose:()=>g(!1)}),d&&e.jsx(Ju,{onClose:()=>x(!1),onSuccess:()=>{j(),x(!1)}}),h&&e.jsx(Ju,{package:h,onClose:()=>p(null),onSuccess:()=>{j(),p(null)}})]})},kA=()=>{var R;const{theme:t}=St(),[s,a]=y.useState([]),[r,n]=y.useState({}),[i,l]=y.useState({}),[c,o]=y.useState(null),[d,x]=y.useState(!0),[u,m]=y.useState(!1),[f,g]=y.useState(!1),[h,p]=y.useState(null),[j,v]=y.useState({search:"",role:"",page:1});y.useEffect(()=>{w()},[j]);const w=async()=>{var T,M,H,U;try{x(!0);const[W,se,X]=await Promise.all([Zb(j),Yb(),Jb()]),D=((T=W.data)==null?void 0:T.data)||W.data,le=((M=se.data)==null?void 0:M.data)||se.data,de=((H=X.data)==null?void 0:H.data)||X.data;a((D==null?void 0:D.users)||[]),n((le==null?void 0:le.roles)||{}),l((le==null?void 0:le.permissions)||{}),o(de||null),console.log("âœ… Role management data loaded successfully"),console.log("ðŸ“Š Users:",((U=D==null?void 0:D.users)==null?void 0:U.length)||0),console.log("ðŸŽ­ Roles:",Object.keys((le==null?void 0:le.roles)||{}).length)}catch(W){console.error("âŒ Error fetching role management data:",W),_.error("Failed to fetch role management data"),a([]),n({}),l({}),o(null)}finally{x(!1)}},b=async T=>{var M,H;try{await Kb(T),_.success("Super Admin user created successfully"),m(!1),w()}catch(U){_.error(((H=(M=U.response)==null?void 0:M.data)==null?void 0:H.message)||"Failed to create user")}},A=async(T,M)=>{var H,U;try{await Qb(T,{internalRole:M}),_.success("User role updated successfully"),g(!1),w()}catch(W){_.error(((U=(H=W.response)==null?void 0:H.data)==null?void 0:U.message)||"Failed to update user role")}},N=async T=>{var M,H;if(window.confirm("Are you sure you want to deactivate this user?"))try{await ev(T),_.success("User deactivated successfully"),w()}catch(U){_.error(((H=(M=U.response)==null?void 0:M.data)==null?void 0:H.message)||"Failed to deactivate user")}},C=T=>({super_admin:Ig,system_manager:Ta,finance_admin:gt,compliance_officer:st,tech_admin:Ol,viewer:Ht})[T]||Ue,k=T=>({super_admin:"text-purple-600 bg-purple-100 dark:bg-purple-900/20",system_manager:"text-blue-600 bg-blue-100 dark:bg-blue-900/20",finance_admin:"text-green-600 bg-green-100 dark:bg-green-900/20",compliance_officer:"text-orange-600 bg-orange-100 dark:bg-orange-900/20",tech_admin:"text-red-600 bg-red-100 dark:bg-red-900/20",viewer:"text-gray-600 bg-gray-100 dark:bg-gray-900/20"})[T]||"text-gray-600 bg-gray-100 dark:bg-gray-900/20",S=()=>{const[T,M]=y.useState({email:"",password:"",internalRole:"viewer"}),H=U=>{U.preventDefault(),b(T)};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:`p-6 rounded-xl max-w-md w-full mx-4 ${t==="dark"?"bg-gray-800":"bg-white"}`,children:[e.jsx("h3",{className:`text-lg font-semibold mb-4 ${t==="dark"?"text-white":"text-gray-900"}`,children:"Create Super Admin User"}),e.jsxs("form",{onSubmit:H,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-1 ${t==="dark"?"text-gray-300":"text-gray-700"}`,children:"Email"}),e.jsx("input",{type:"email",value:T.email,onChange:U=>M({...T,email:U.target.value}),className:`w-full p-2 border rounded-lg ${t==="dark"?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"}`,required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-1 ${t==="dark"?"text-gray-300":"text-gray-700"}`,children:"Password"}),e.jsx("input",{type:"password",value:T.password,onChange:U=>M({...T,password:U.target.value}),className:`w-full p-2 border rounded-lg ${t==="dark"?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"}`,required:!0,minLength:6})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-1 ${t==="dark"?"text-gray-300":"text-gray-700"}`,children:"Role"}),e.jsx("select",{value:T.internalRole,onChange:U=>M({...T,internalRole:U.target.value}),className:`w-full p-2 border rounded-lg ${t==="dark"?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"}`,children:r&&Object.entries(r).map(([U,W])=>e.jsx("option",{value:U,children:W.name},U))})]}),e.jsxs("div",{className:"flex space-x-3 pt-4",children:[e.jsx("button",{type:"submit",className:"flex-1 bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 transition-colors",children:"Create User"}),e.jsx("button",{type:"button",onClick:()=>m(!1),className:`flex-1 py-2 px-4 rounded-lg border transition-colors ${t==="dark"?"border-gray-600 text-gray-300 hover:bg-gray-700":"border-gray-300 text-gray-700 hover:bg-gray-50"}`,children:"Cancel"})]})]})]})})},F=()=>{const[T,M]=y.useState((h==null?void 0:h.internalRole)||""),H=U=>{U.preventDefault(),A(h._id,T)};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:`p-6 rounded-xl max-w-md w-full mx-4 ${t==="dark"?"bg-gray-800":"bg-white"}`,children:[e.jsx("h3",{className:`text-lg font-semibold mb-4 ${t==="dark"?"text-white":"text-gray-900"}`,children:"Update User Role"}),e.jsx("div",{className:"mb-4",children:e.jsxs("p",{className:`text-sm ${t==="dark"?"text-gray-300":"text-gray-600"}`,children:["User: ",e.jsx("span",{className:"font-medium",children:h==null?void 0:h.email})]})}),e.jsxs("form",{onSubmit:H,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-1 ${t==="dark"?"text-gray-300":"text-gray-700"}`,children:"New Role"}),e.jsx("select",{value:T,onChange:U=>M(U.target.value),className:`w-full p-2 border rounded-lg ${t==="dark"?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"}`,children:r&&Object.entries(r).map(([U,W])=>e.jsx("option",{value:U,children:W.name},U))})]}),e.jsxs("div",{className:"flex space-x-3 pt-4",children:[e.jsx("button",{type:"submit",className:"flex-1 bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 transition-colors",children:"Update Role"}),e.jsx("button",{type:"button",onClick:()=>g(!1),className:`flex-1 py-2 px-4 rounded-lg border transition-colors ${t==="dark"?"border-gray-600 text-gray-300 hover:bg-gray-700":"border-gray-300 text-gray-700 hover:bg-gray-50"}`,children:"Cancel"})]})]})]})})};return d||!r?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:`text-3xl font-bold ${t==="dark"?"text-white":"text-gray-900"}`,children:"User Management"}),e.jsx("p",{className:`mt-2 ${t==="dark"?"text-gray-400":"text-gray-600"}`,children:"Manage all system users, roles, and permissions"})]}),e.jsxs("button",{onClick:()=>m(!0),className:"flex items-center space-x-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx(Zs,{className:"w-4 h-4"}),e.jsx("span",{children:"Add User"})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:(R=c==null?void 0:c.roleStats)==null?void 0:R.map(T=>{var H;const M=C(T._id);return e.jsx("div",{className:`p-6 rounded-xl border ${t==="dark"?"bg-gray-800 border-gray-700":"bg-white border-gray-200"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:`text-sm font-medium ${t==="dark"?"text-gray-400":"text-gray-600"}`,children:((H=r[T._id])==null?void 0:H.name)||T._id}),e.jsx("p",{className:`text-2xl font-bold mt-1 ${t==="dark"?"text-white":"text-gray-900"}`,children:T.count}),e.jsxs("p",{className:"text-xs mt-1 text-gray-500",children:[T.active," active"]})]}),e.jsx("div",{className:`p-3 rounded-lg ${k(T._id)}`,children:e.jsx(M,{className:"w-6 h-6"})})]})},T._id)})}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsx("input",{type:"text",placeholder:"Search users...",value:j.search,onChange:T=>v({...j,search:T.target.value,page:1}),className:`w-full p-3 border rounded-lg ${t==="dark"?"bg-gray-800 border-gray-600 text-white placeholder-gray-400":"bg-white border-gray-300 text-gray-900 placeholder-gray-500"}`})}),e.jsxs("select",{value:j.role,onChange:T=>v({...j,role:T.target.value,page:1}),className:`p-3 border rounded-lg ${t==="dark"?"bg-gray-800 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"}`,children:[e.jsx("option",{value:"",children:"All Users"}),e.jsxs("optgroup",{label:"System Roles",children:[e.jsx("option",{value:"superadmin",children:"Super Admin"}),e.jsx("option",{value:"admin",children:"Admin"}),e.jsx("option",{value:"hr",children:"HR"}),e.jsx("option",{value:"employee",children:"Employee"})]}),e.jsx("optgroup",{label:"Super Admin Internal Roles",children:r&&Object.entries(r).map(([T,M])=>e.jsx("option",{value:T,children:M.name},T))})]})]}),e.jsx("div",{className:`rounded-xl border ${t==="dark"?"bg-gray-800 border-gray-700":"bg-white border-gray-200"}`,children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:`border-b ${t==="dark"?"border-gray-700":"border-gray-200"}`,children:[e.jsx("th",{className:`text-left p-4 font-medium ${t==="dark"?"text-gray-300":"text-gray-700"}`,children:"User"}),e.jsx("th",{className:`text-left p-4 font-medium ${t==="dark"?"text-gray-300":"text-gray-700"}`,children:"Role"}),e.jsx("th",{className:`text-left p-4 font-medium ${t==="dark"?"text-gray-300":"text-gray-700"}`,children:"Status"}),e.jsx("th",{className:`text-left p-4 font-medium ${t==="dark"?"text-gray-300":"text-gray-700"}`,children:"Last Login"}),e.jsx("th",{className:`text-left p-4 font-medium ${t==="dark"?"text-gray-300":"text-gray-700"}`,children:"Actions"})]})}),e.jsx("tbody",{children:s.map(T=>{var U;const M=T.internalRole||T.role,H=C(M);return e.jsxs("tr",{className:`border-b ${t==="dark"?"border-gray-700":"border-gray-200"}`,children:[e.jsx("td",{className:"p-4",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center ${k(M)}`,children:e.jsx(H,{className:"w-4 h-4"})}),e.jsx("div",{children:e.jsx("p",{className:`font-medium ${t==="dark"?"text-white":"text-gray-900"}`,children:T.email})})]})}),e.jsx("td",{className:"p-4",children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${k(M)}`,children:T.displayRole||((U=T.roleDefinition)==null?void 0:U.name)||T.role}),T.clientId&&e.jsx("span",{className:"text-xs text-gray-500 mt-1",children:T.clientId.companyName})]})}),e.jsx("td",{className:"p-4",children:e.jsxs("div",{className:"flex items-center space-x-1",children:[T.isActive?e.jsx(Te,{className:"w-4 h-4 text-green-500"}):e.jsx(Qe,{className:"w-4 h-4 text-red-500"}),e.jsx("span",{className:`text-sm ${T.isActive?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:T.isActive?"Active":"Inactive"})]})}),e.jsx("td",{className:"p-4",children:e.jsx("span",{className:`text-sm ${t==="dark"?"text-gray-400":"text-gray-600"}`,children:T.lastLogin?new Date(T.lastLogin).toLocaleDateString():"Never"})}),e.jsx("td",{className:"p-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>{p(T),g(!0)},className:`p-1 rounded hover:bg-gray-100 dark:hover:bg-gray-700 ${t==="dark"?"text-gray-400":"text-gray-600"}`,title:"Edit Role",children:e.jsx(Pg,{className:"w-4 h-4"})}),T.isActive&&e.jsx("button",{onClick:()=>N(T._id),className:`p-1 rounded hover:bg-gray-100 dark:hover:bg-gray-700 ${t==="dark"?"text-gray-400":"text-gray-600"}`,title:"Deactivate User",children:e.jsx(ed,{className:"w-4 h-4"})})]})})]},T._id)})})]})})}),u&&e.jsx(S,{}),f&&e.jsx(F,{})]})},SA=()=>{const{theme:t}=St(),s=[{icon:st,title:"Comprehensive Audit Trail",description:"Complete logging of all system activities, user actions, and data modifications with detailed timestamps and user attribution."},{icon:Lt,title:"Security Event Monitoring",description:"Real-time tracking of security events including login attempts, permission changes, and suspicious activities."},{icon:_t,title:"User Activity Tracking",description:"Detailed logs of user sessions, actions performed, and access patterns across all system modules."},{icon:Dr,title:"System Performance Logs",description:"Monitor system performance metrics, API calls, database queries, and resource utilization patterns."},{icon:yt,title:"Advanced Search & Filtering",description:"Powerful search capabilities with filters by date range, user, action type, and severity level."},{icon:Mt,title:"Export & Compliance Reports",description:"Generate compliance reports and export audit data in various formats for regulatory requirements."}],a=["Real-time log streaming and alerts","Automated compliance report generation","Integration with SIEM systems","Advanced analytics and anomaly detection","Custom audit rule configuration","Multi-level log retention policies"];return e.jsx("div",{className:`min-h-screen ${t==="dark"?"bg-gray-900":"bg-gray-50"}`,children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[e.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/20 rounded-lg",children:e.jsx(st,{className:"w-8 h-8 text-blue-600 dark:text-blue-400"})}),e.jsxs("div",{children:[e.jsx("h1",{className:`text-3xl font-bold ${t==="dark"?"text-white":"text-gray-900"}`,children:"Audit Logs"}),e.jsx("p",{className:`text-lg ${t==="dark"?"text-gray-300":"text-gray-600"}`,children:"Comprehensive audit trails and security monitoring"})]})]}),e.jsx("div",{className:`p-4 rounded-lg border-l-4 border-yellow-400 ${t==="dark"?"bg-yellow-900/20 border-yellow-400":"bg-yellow-50 border-yellow-400"}`,children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(mt,{className:"w-5 h-5 text-yellow-600 dark:text-yellow-400 mr-3"}),e.jsxs("div",{children:[e.jsx("h3",{className:`font-semibold ${t==="dark"?"text-yellow-400":"text-yellow-800"}`,children:"Under Development"}),e.jsx("p",{className:`text-sm ${t==="dark"?"text-yellow-300":"text-yellow-700"}`,children:"This module is currently being developed. Full functionality will be available soon."})]})]})})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-12",children:s.map((r,n)=>{const i=r.icon;return e.jsx("div",{className:`p-6 rounded-xl border ${t==="dark"?"bg-gray-800 border-gray-700 hover:border-gray-600":"bg-white border-gray-200 hover:border-gray-300"} transition-all duration-200 hover:shadow-lg`,children:e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/20 rounded-lg flex-shrink-0",children:e.jsx(i,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"})}),e.jsxs("div",{children:[e.jsx("h3",{className:`font-semibold mb-2 ${t==="dark"?"text-white":"text-gray-900"}`,children:r.title}),e.jsx("p",{className:`text-sm ${t==="dark"?"text-gray-300":"text-gray-600"}`,children:r.description})]})]})},n)})}),e.jsxs("div",{className:`p-8 rounded-xl ${t==="dark"?"bg-gray-800 border-gray-700":"bg-white border-gray-200"} border mb-8`,children:[e.jsx("h2",{className:`text-2xl font-bold mb-6 ${t==="dark"?"text-white":"text-gray-900"}`,children:"How Audit Logs Work"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsxs("div",{children:[e.jsx("h3",{className:`text-lg font-semibold mb-4 ${t==="dark"?"text-white":"text-gray-900"}`,children:"Automatic Logging"}),e.jsxs("ul",{className:`space-y-2 text-sm ${t==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsxs("li",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"w-4 h-4 text-green-500"}),e.jsx("span",{children:"Real-time capture of all system events"})]}),e.jsxs("li",{className:"flex items-center space-x-2",children:[e.jsx(_t,{className:"w-4 h-4 text-green-500"}),e.jsx("span",{children:"User action tracking with full context"})]}),e.jsxs("li",{className:"flex items-center space-x-2",children:[e.jsx(Lt,{className:"w-4 h-4 text-green-500"}),e.jsx("span",{children:"Security event monitoring and alerts"})]}),e.jsxs("li",{className:"flex items-center space-x-2",children:[e.jsx(Dr,{className:"w-4 h-4 text-green-500"}),e.jsx("span",{children:"System performance and health metrics"})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:`text-lg font-semibold mb-4 ${t==="dark"?"text-white":"text-gray-900"}`,children:"Analysis & Reporting"}),e.jsxs("ul",{className:`space-y-2 text-sm ${t==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsxs("li",{className:"flex items-center space-x-2",children:[e.jsx(yt,{className:"w-4 h-4 text-blue-500"}),e.jsx("span",{children:"Advanced search and filtering capabilities"})]}),e.jsxs("li",{className:"flex items-center space-x-2",children:[e.jsx(Vs,{className:"w-4 h-4 text-blue-500"}),e.jsx("span",{children:"Custom filters by date, user, and action type"})]}),e.jsxs("li",{className:"flex items-center space-x-2",children:[e.jsx(Mt,{className:"w-4 h-4 text-blue-500"}),e.jsx("span",{children:"Export logs for compliance and analysis"})]}),e.jsxs("li",{className:"flex items-center space-x-2",children:[e.jsx(Ht,{className:"w-4 h-4 text-blue-500"}),e.jsx("span",{children:"Detailed event inspection and drill-down"})]})]})]})]})]}),e.jsxs("div",{className:`p-6 rounded-xl ${t==="dark"?"bg-gray-800 border-gray-700":"bg-white border-gray-200"} border`,children:[e.jsx("h2",{className:`text-xl font-bold mb-4 ${t==="dark"?"text-white":"text-gray-900"}`,children:"Upcoming Features"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:a.map((r,n)=>e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"}),e.jsx("span",{className:`text-sm ${t==="dark"?"text-gray-300":"text-gray-600"}`,children:r})]},n))})]})]})})},CA=()=>{const{theme:t}=St(),s=[{icon:lr,title:"Revenue Analytics",description:"Comprehensive revenue tracking, growth analysis, and financial performance metrics across all clients and packages."},{icon:Ue,title:"Client Analytics",description:"Client behavior analysis, subscription patterns, churn rates, and customer lifetime value calculations."},{icon:Ks,title:"Growth Metrics",description:"Track business growth with KPIs, conversion rates, market expansion, and performance benchmarking."},{icon:b0,title:"Package Performance",description:"Analyze package popularity, pricing effectiveness, and feature utilization across different client segments."},{icon:Dr,title:"System Usage Analytics",description:"Monitor system performance, user engagement, feature adoption, and resource utilization patterns."},{icon:td,title:"Geographic Analytics",description:"Regional performance analysis, market penetration insights, and location-based growth opportunities."}],a=[{icon:gt,title:"Financial Reports",description:"Revenue, profit margins, billing cycles, payment analytics",frequency:"Daily, Weekly, Monthly, Quarterly"},{icon:Ue,title:"Client Reports",description:"User activity, subscription status, engagement metrics",frequency:"Real-time, Daily, Weekly"},{icon:Xo,title:"Performance Reports",description:"KPI tracking, goal achievement, benchmark analysis",frequency:"Weekly, Monthly, Quarterly"},{icon:$g,title:"Trend Analysis",description:"Growth trends, seasonal patterns, predictive insights",frequency:"Monthly, Quarterly, Yearly"}],r=["AI-powered predictive analytics","Custom dashboard builder","Real-time data streaming","Advanced data visualization tools","Automated report scheduling","Integration with external BI tools","Machine learning insights","Custom KPI tracking"];return e.jsx("div",{className:`min-h-screen ${t==="dark"?"bg-gray-900":"bg-gray-50"}`,children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[e.jsx("div",{className:"p-2 bg-purple-100 dark:bg-purple-900/20 rounded-lg",children:e.jsx(lr,{className:"w-8 h-8 text-purple-600 dark:text-purple-400"})}),e.jsxs("div",{children:[e.jsx("h1",{className:`text-3xl font-bold ${t==="dark"?"text-white":"text-gray-900"}`,children:"Analytics & Reports"}),e.jsx("p",{className:`text-lg ${t==="dark"?"text-gray-300":"text-gray-600"}`,children:"Comprehensive business intelligence and reporting suite"})]})]}),e.jsx("div",{className:`p-4 rounded-lg border-l-4 border-yellow-400 ${t==="dark"?"bg-yellow-900/20 border-yellow-400":"bg-yellow-50 border-yellow-400"}`,children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(mt,{className:"w-5 h-5 text-yellow-600 dark:text-yellow-400 mr-3"}),e.jsxs("div",{children:[e.jsx("h3",{className:`font-semibold ${t==="dark"?"text-yellow-400":"text-yellow-800"}`,children:"Under Development"}),e.jsx("p",{className:`text-sm ${t==="dark"?"text-yellow-300":"text-yellow-700"}`,children:"Advanced analytics and reporting features are being developed. Basic reporting is available in other modules."})]})]})})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-12",children:s.map((n,i)=>{const l=n.icon;return e.jsx("div",{className:`p-6 rounded-xl border ${t==="dark"?"bg-gray-800 border-gray-700 hover:border-gray-600":"bg-white border-gray-200 hover:border-gray-300"} transition-all duration-200 hover:shadow-lg`,children:e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx("div",{className:"p-2 bg-purple-100 dark:bg-purple-900/20 rounded-lg flex-shrink-0",children:e.jsx(l,{className:"w-6 h-6 text-purple-600 dark:text-purple-400"})}),e.jsxs("div",{children:[e.jsx("h3",{className:`font-semibold mb-2 ${t==="dark"?"text-white":"text-gray-900"}`,children:n.title}),e.jsx("p",{className:`text-sm ${t==="dark"?"text-gray-300":"text-gray-600"}`,children:n.description})]})]})},i)})}),e.jsxs("div",{className:`p-8 rounded-xl ${t==="dark"?"bg-gray-800 border-gray-700":"bg-white border-gray-200"} border mb-8`,children:[e.jsx("h2",{className:`text-2xl font-bold mb-6 ${t==="dark"?"text-white":"text-gray-900"}`,children:"Available Report Types"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:a.map((n,i)=>{const l=n.icon;return e.jsx("div",{className:`p-6 rounded-lg border ${t==="dark"?"border-gray-600 bg-gray-700/50":"border-gray-200 bg-gray-50"}`,children:e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/20 rounded-lg",children:e.jsx(l,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:`font-semibold mb-2 ${t==="dark"?"text-white":"text-gray-900"}`,children:n.title}),e.jsx("p",{className:`text-sm mb-3 ${t==="dark"?"text-gray-300":"text-gray-600"}`,children:n.description}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Oe,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{className:`text-xs ${t==="dark"?"text-gray-400":"text-gray-500"}`,children:n.frequency})]})]})]})},i)})})]}),e.jsxs("div",{className:`p-8 rounded-xl ${t==="dark"?"bg-gray-800 border-gray-700":"bg-white border-gray-200"} border mb-8`,children:[e.jsx("h2",{className:`text-2xl font-bold mb-6 ${t==="dark"?"text-white":"text-gray-900"}`,children:"How Analytics & Reports Work"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"p-3 bg-green-100 dark:bg-green-900/20 rounded-full w-16 h-16 mx-auto mb-4 flex items-center justify-center",children:e.jsx(Dr,{className:"w-8 h-8 text-green-600 dark:text-green-400"})}),e.jsx("h3",{className:`font-semibold mb-2 ${t==="dark"?"text-white":"text-gray-900"}`,children:"Data Collection"}),e.jsx("p",{className:`text-sm ${t==="dark"?"text-gray-300":"text-gray-600"}`,children:"Automatic collection of business metrics, user interactions, and system performance data"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"p-3 bg-blue-100 dark:bg-blue-900/20 rounded-full w-16 h-16 mx-auto mb-4 flex items-center justify-center",children:e.jsx(Vs,{className:"w-8 h-8 text-blue-600 dark:text-blue-400"})}),e.jsx("h3",{className:`font-semibold mb-2 ${t==="dark"?"text-white":"text-gray-900"}`,children:"Data Processing"}),e.jsx("p",{className:`text-sm ${t==="dark"?"text-gray-300":"text-gray-600"}`,children:"Advanced algorithms process and analyze data to generate meaningful insights and trends"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"p-3 bg-purple-100 dark:bg-purple-900/20 rounded-full w-16 h-16 mx-auto mb-4 flex items-center justify-center",children:e.jsx(Mt,{className:"w-8 h-8 text-purple-600 dark:text-purple-400"})}),e.jsx("h3",{className:`font-semibold mb-2 ${t==="dark"?"text-white":"text-gray-900"}`,children:"Report Generation"}),e.jsx("p",{className:`text-sm ${t==="dark"?"text-gray-300":"text-gray-600"}`,children:"Interactive dashboards and exportable reports with customizable views and scheduling"})]})]})]}),e.jsxs("div",{className:`p-6 rounded-xl ${t==="dark"?"bg-gray-800 border-gray-700":"bg-white border-gray-200"} border`,children:[e.jsx("h2",{className:`text-xl font-bold mb-4 ${t==="dark"?"text-white":"text-gray-900"}`,children:"Upcoming Advanced Features"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:r.map((n,i)=>e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-2 h-2 bg-purple-500 rounded-full"}),e.jsx("span",{className:`text-sm ${t==="dark"?"text-gray-300":"text-gray-600"}`,children:n})]},i))})]})]})})},AA=()=>{const{theme:t}=St(),s=[{icon:Ol,title:"System Settings",description:"Core system configuration including server settings, performance tuning, and resource allocation.",features:["Server configuration","Performance optimization","Resource limits","Cache settings"]},{icon:io,title:"Database Configuration",description:"Database connection settings, backup schedules, and data retention policies.",features:["Connection pools","Backup automation","Data retention","Query optimization"]},{icon:Lt,title:"Security Settings",description:"Security policies, authentication methods, and access control configurations.",features:["Password policies","2FA settings","Session management","IP restrictions"]},{icon:wt,title:"Email Configuration",description:"SMTP settings, email templates, and notification preferences for system communications.",features:["SMTP configuration","Email templates","Delivery settings","Bounce handling"]},{icon:Da,title:"Notification Settings",description:"System-wide notification preferences, alert thresholds, and communication channels.",features:["Alert thresholds","Notification channels","Escalation rules","Quiet hours"]},{icon:td,title:"Localization",description:"Multi-language support, timezone settings, and regional formatting preferences.",features:["Language packs","Timezone settings","Date formats","Currency settings"]}],a=[{icon:g0,title:"API Configuration",description:"API rate limits, authentication keys, and integration settings"},{icon:ro,title:"UI Customization",description:"Branding, themes, and user interface customization options"},{icon:Be,title:"Scheduling",description:"Automated tasks, maintenance windows, and system schedules"},{icon:hl,title:"Performance Monitoring",description:"System health monitoring, alerts, and performance metrics"},{icon:Tr,title:"Compliance Settings",description:"GDPR, data protection, and regulatory compliance configurations"},{icon:nx,title:"System Monitoring",description:"Real-time monitoring, logging levels, and diagnostic tools"}],r=["Advanced backup and disaster recovery","Multi-tenant configuration management","Automated system health checks","Configuration version control","Environment-specific settings","Advanced security hardening options","Custom workflow configurations","Integration marketplace"];return e.jsx("div",{className:`min-h-screen ${t==="dark"?"bg-gray-900":"bg-gray-50"}`,children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[e.jsx("div",{className:"p-2 bg-green-100 dark:bg-green-900/20 rounded-lg",children:e.jsx(Ta,{className:"w-8 h-8 text-green-600 dark:text-green-400"})}),e.jsxs("div",{children:[e.jsx("h1",{className:`text-3xl font-bold ${t==="dark"?"text-white":"text-gray-900"}`,children:"System Configuration"}),e.jsx("p",{className:`text-lg ${t==="dark"?"text-gray-300":"text-gray-600"}`,children:"System-wide settings and configuration management"})]})]}),e.jsx("div",{className:`p-4 rounded-lg border-l-4 border-yellow-400 ${t==="dark"?"bg-yellow-900/20 border-yellow-400":"bg-yellow-50 border-yellow-400"}`,children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(mt,{className:"w-5 h-5 text-yellow-600 dark:text-yellow-400 mr-3"}),e.jsxs("div",{children:[e.jsx("h3",{className:`font-semibold ${t==="dark"?"text-yellow-400":"text-yellow-800"}`,children:"Under Development"}),e.jsx("p",{className:`text-sm ${t==="dark"?"text-yellow-300":"text-yellow-700"}`,children:"Advanced system configuration features are being developed. Basic settings are available in individual modules."})]})]})})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-12",children:s.map((n,i)=>{const l=n.icon;return e.jsxs("div",{className:`p-6 rounded-xl border ${t==="dark"?"bg-gray-800 border-gray-700 hover:border-gray-600":"bg-white border-gray-200 hover:border-gray-300"} transition-all duration-200 hover:shadow-lg`,children:[e.jsxs("div",{className:"flex items-start space-x-4 mb-4",children:[e.jsx("div",{className:"p-2 bg-green-100 dark:bg-green-900/20 rounded-lg flex-shrink-0",children:e.jsx(l,{className:"w-6 h-6 text-green-600 dark:text-green-400"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:`font-semibold mb-2 ${t==="dark"?"text-white":"text-gray-900"}`,children:n.title}),e.jsx("p",{className:`text-sm mb-4 ${t==="dark"?"text-gray-300":"text-gray-600"}`,children:n.description})]})]}),e.jsx("div",{className:"space-y-2",children:n.features.map((c,o)=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-green-500 rounded-full"}),e.jsx("span",{className:`text-sm ${t==="dark"?"text-gray-400":"text-gray-500"}`,children:c})]},o))})]},i)})}),e.jsxs("div",{className:`p-8 rounded-xl ${t==="dark"?"bg-gray-800 border-gray-700":"bg-white border-gray-200"} border mb-8`,children:[e.jsx("h2",{className:`text-2xl font-bold mb-6 ${t==="dark"?"text-white":"text-gray-900"}`,children:"Advanced Configuration Options"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:a.map((n,i)=>{const l=n.icon;return e.jsx("div",{className:`p-4 rounded-lg border ${t==="dark"?"border-gray-600 bg-gray-700/50":"border-gray-200 bg-gray-50"}`,children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/20 rounded-lg",children:e.jsx(l,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})}),e.jsxs("div",{children:[e.jsx("h3",{className:`font-semibold mb-1 ${t==="dark"?"text-white":"text-gray-900"}`,children:n.title}),e.jsx("p",{className:`text-sm ${t==="dark"?"text-gray-300":"text-gray-600"}`,children:n.description})]})]})},i)})})]}),e.jsxs("div",{className:`p-8 rounded-xl ${t==="dark"?"bg-gray-800 border-gray-700":"bg-white border-gray-200"} border mb-8`,children:[e.jsx("h2",{className:`text-2xl font-bold mb-6 ${t==="dark"?"text-white":"text-gray-900"}`,children:"Configuration Management Process"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"p-3 bg-blue-100 dark:bg-blue-900/20 rounded-full w-16 h-16 mx-auto mb-4 flex items-center justify-center",children:e.jsx(Ta,{className:"w-8 h-8 text-blue-600 dark:text-blue-400"})}),e.jsx("h3",{className:`font-semibold mb-2 ${t==="dark"?"text-white":"text-gray-900"}`,children:"Configure"}),e.jsx("p",{className:`text-sm ${t==="dark"?"text-gray-300":"text-gray-600"}`,children:"Set up system parameters and preferences"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"p-3 bg-green-100 dark:bg-green-900/20 rounded-full w-16 h-16 mx-auto mb-4 flex items-center justify-center",children:e.jsx(Lt,{className:"w-8 h-8 text-green-600 dark:text-green-400"})}),e.jsx("h3",{className:`font-semibold mb-2 ${t==="dark"?"text-white":"text-gray-900"}`,children:"Validate"}),e.jsx("p",{className:`text-sm ${t==="dark"?"text-gray-300":"text-gray-600"}`,children:"Verify configuration integrity and security"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"p-3 bg-purple-100 dark:bg-purple-900/20 rounded-full w-16 h-16 mx-auto mb-4 flex items-center justify-center",children:e.jsx(hl,{className:"w-8 h-8 text-purple-600 dark:text-purple-400"})}),e.jsx("h3",{className:`font-semibold mb-2 ${t==="dark"?"text-white":"text-gray-900"}`,children:"Apply"}),e.jsx("p",{className:`text-sm ${t==="dark"?"text-gray-300":"text-gray-600"}`,children:"Deploy changes across the system"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"p-3 bg-orange-100 dark:bg-orange-900/20 rounded-full w-16 h-16 mx-auto mb-4 flex items-center justify-center",children:e.jsx(nx,{className:"w-8 h-8 text-orange-600 dark:text-orange-400"})}),e.jsx("h3",{className:`font-semibold mb-2 ${t==="dark"?"text-white":"text-gray-900"}`,children:"Monitor"}),e.jsx("p",{className:`text-sm ${t==="dark"?"text-gray-300":"text-gray-600"}`,children:"Track system performance and health"})]})]})]}),e.jsxs("div",{className:`p-6 rounded-xl ${t==="dark"?"bg-gray-800 border-gray-700":"bg-white border-gray-200"} border`,children:[e.jsx("h2",{className:`text-xl font-bold mb-4 ${t==="dark"?"text-white":"text-gray-900"}`,children:"Upcoming Configuration Features"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:r.map((n,i)=>e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),e.jsx("span",{className:`text-sm ${t==="dark"?"text-gray-300":"text-gray-600"}`,children:n})]},i))})]})]})})},EA=()=>{const{theme:t}=St(),s=[{icon:io,title:"Database Backups",description:"Automated and manual database backup solutions with multiple restore points and integrity verification.",features:["Scheduled backups","Point-in-time recovery","Backup verification","Cross-region storage"]},{icon:ix,title:"Data Archival",description:"Intelligent data archival system for long-term storage and compliance with automated lifecycle management.",features:["Automated archival","Compliance retention","Data compression","Retrieval on demand"]},{icon:Mt,title:"Data Export",description:"Comprehensive data export capabilities with multiple formats and customizable data selection.",features:["Multiple formats","Selective export","Bulk operations","API integration"]},{icon:js,title:"Data Import",description:"Secure data import tools with validation, transformation, and error handling capabilities.",features:["Data validation","Format conversion","Error handling","Progress tracking"]},{icon:Xt,title:"Data Migration",description:"Safe and efficient data migration tools for system upgrades and platform transitions.",features:["Zero-downtime migration","Data mapping","Rollback capability","Progress monitoring"]},{icon:Lt,title:"Data Security",description:"Advanced data protection with encryption, access controls, and audit trails for sensitive information.",features:["End-to-end encryption","Access logging","Data masking","Compliance reporting"]}],a=[{icon:Be,title:"Incremental Backups",description:"Daily incremental backups capturing only changed data",frequency:"Every 6 hours"},{icon:io,title:"Full System Backups",description:"Complete system snapshots including all databases and files",frequency:"Weekly"},{icon:Og,title:"Cloud Backups",description:"Secure cloud storage with geographic redundancy",frequency:"Real-time sync"},{icon:Ml,title:"Mirror Backups",description:"Real-time database mirroring for instant failover",frequency:"Continuous"}],r=[{icon:no,title:"Point-in-Time Recovery",description:"Restore data to any specific point in time"},{icon:st,title:"Data Audit Trails",description:"Complete tracking of all data modifications"},{icon:Tr,title:"Data Encryption",description:"Advanced encryption for data at rest and in transit"},{icon:kt,title:"Secure Data Deletion",description:"GDPR-compliant secure data removal processes"}],n=["AI-powered backup optimization","Automated disaster recovery testing","Multi-cloud backup strategies","Real-time data synchronization","Advanced data deduplication","Blockchain-based data integrity","Automated compliance reporting","Smart data lifecycle management"];return e.jsx("div",{className:`min-h-screen ${t==="dark"?"bg-gray-900":"bg-gray-50"}`,children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[e.jsx("div",{className:"p-2 bg-indigo-100 dark:bg-indigo-900/20 rounded-lg",children:e.jsx(Ol,{className:"w-8 h-8 text-indigo-600 dark:text-indigo-400"})}),e.jsxs("div",{children:[e.jsx("h1",{className:`text-3xl font-bold ${t==="dark"?"text-white":"text-gray-900"}`,children:"Data Management"}),e.jsx("p",{className:`text-lg ${t==="dark"?"text-gray-300":"text-gray-600"}`,children:"Comprehensive data backup, archival, and management solutions"})]})]}),e.jsx("div",{className:`p-4 rounded-lg border-l-4 border-yellow-400 ${t==="dark"?"bg-yellow-900/20 border-yellow-400":"bg-yellow-50 border-yellow-400"}`,children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(mt,{className:"w-5 h-5 text-yellow-600 dark:text-yellow-400 mr-3"}),e.jsxs("div",{children:[e.jsx("h3",{className:`font-semibold ${t==="dark"?"text-yellow-400":"text-yellow-800"}`,children:"Under Development"}),e.jsx("p",{className:`text-sm ${t==="dark"?"text-yellow-300":"text-yellow-700"}`,children:"Advanced data management features are being developed. Basic backup functionality is available."})]})]})})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-12",children:s.map((i,l)=>{const c=i.icon;return e.jsxs("div",{className:`p-6 rounded-xl border ${t==="dark"?"bg-gray-800 border-gray-700 hover:border-gray-600":"bg-white border-gray-200 hover:border-gray-300"} transition-all duration-200 hover:shadow-lg`,children:[e.jsxs("div",{className:"flex items-start space-x-4 mb-4",children:[e.jsx("div",{className:"p-2 bg-indigo-100 dark:bg-indigo-900/20 rounded-lg flex-shrink-0",children:e.jsx(c,{className:"w-6 h-6 text-indigo-600 dark:text-indigo-400"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:`font-semibold mb-2 ${t==="dark"?"text-white":"text-gray-900"}`,children:i.title}),e.jsx("p",{className:`text-sm mb-4 ${t==="dark"?"text-gray-300":"text-gray-600"}`,children:i.description})]})]}),e.jsx("div",{className:"space-y-2",children:i.features.map((o,d)=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-indigo-500 rounded-full"}),e.jsx("span",{className:`text-sm ${t==="dark"?"text-gray-400":"text-gray-500"}`,children:o})]},d))})]},l)})}),e.jsxs("div",{className:`p-8 rounded-xl ${t==="dark"?"bg-gray-800 border-gray-700":"bg-white border-gray-200"} border mb-8`,children:[e.jsx("h2",{className:`text-2xl font-bold mb-6 ${t==="dark"?"text-white":"text-gray-900"}`,children:"Backup Strategies"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:a.map((i,l)=>{const c=i.icon;return e.jsx("div",{className:`p-6 rounded-lg border ${t==="dark"?"border-gray-600 bg-gray-700/50":"border-gray-200 bg-gray-50"}`,children:e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/20 rounded-lg",children:e.jsx(c,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:`font-semibold mb-2 ${t==="dark"?"text-white":"text-gray-900"}`,children:i.title}),e.jsx("p",{className:`text-sm mb-3 ${t==="dark"?"text-gray-300":"text-gray-600"}`,children:i.description}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{className:`text-xs ${t==="dark"?"text-gray-400":"text-gray-500"}`,children:i.frequency})]})]})]})},l)})})]}),e.jsxs("div",{className:`p-8 rounded-xl ${t==="dark"?"bg-gray-800 border-gray-700":"bg-white border-gray-200"} border mb-8`,children:[e.jsx("h2",{className:`text-2xl font-bold mb-6 ${t==="dark"?"text-white":"text-gray-900"}`,children:"Advanced Data Operations"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:r.map((i,l)=>{const c=i.icon;return e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"p-3 bg-green-100 dark:bg-green-900/20 rounded-full w-16 h-16 mx-auto mb-4 flex items-center justify-center",children:e.jsx(c,{className:"w-8 h-8 text-green-600 dark:text-green-400"})}),e.jsx("h3",{className:`font-semibold mb-2 ${t==="dark"?"text-white":"text-gray-900"}`,children:i.title}),e.jsx("p",{className:`text-sm ${t==="dark"?"text-gray-300":"text-gray-600"}`,children:i.description})]},l)})})]}),e.jsxs("div",{className:`p-8 rounded-xl ${t==="dark"?"bg-gray-800 border-gray-700":"bg-white border-gray-200"} border mb-8`,children:[e.jsx("h2",{className:`text-2xl font-bold mb-6 ${t==="dark"?"text-white":"text-gray-900"}`,children:"Data Management Workflow"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"p-3 bg-blue-100 dark:bg-blue-900/20 rounded-full w-16 h-16 mx-auto mb-4 flex items-center justify-center",children:e.jsx(Lg,{className:"w-8 h-8 text-blue-600 dark:text-blue-400"})}),e.jsx("h3",{className:`font-semibold mb-2 ${t==="dark"?"text-white":"text-gray-900"}`,children:"Collect"}),e.jsx("p",{className:`text-sm ${t==="dark"?"text-gray-300":"text-gray-600"}`,children:"Automated data collection and preparation for backup"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"p-3 bg-green-100 dark:bg-green-900/20 rounded-full w-16 h-16 mx-auto mb-4 flex items-center justify-center",children:e.jsx(Lt,{className:"w-8 h-8 text-green-600 dark:text-green-400"})}),e.jsx("h3",{className:`font-semibold mb-2 ${t==="dark"?"text-white":"text-gray-900"}`,children:"Secure"}),e.jsx("p",{className:`text-sm ${t==="dark"?"text-gray-300":"text-gray-600"}`,children:"Encryption and security validation before storage"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"p-3 bg-purple-100 dark:bg-purple-900/20 rounded-full w-16 h-16 mx-auto mb-4 flex items-center justify-center",children:e.jsx(ix,{className:"w-8 h-8 text-purple-600 dark:text-purple-400"})}),e.jsx("h3",{className:`font-semibold mb-2 ${t==="dark"?"text-white":"text-gray-900"}`,children:"Store"}),e.jsx("p",{className:`text-sm ${t==="dark"?"text-gray-300":"text-gray-600"}`,children:"Multi-location storage with redundancy and verification"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"p-3 bg-orange-100 dark:bg-orange-900/20 rounded-full w-16 h-16 mx-auto mb-4 flex items-center justify-center",children:e.jsx(no,{className:"w-8 h-8 text-orange-600 dark:text-orange-400"})}),e.jsx("h3",{className:`font-semibold mb-2 ${t==="dark"?"text-white":"text-gray-900"}`,children:"Restore"}),e.jsx("p",{className:`text-sm ${t==="dark"?"text-gray-300":"text-gray-600"}`,children:"Fast and reliable data recovery when needed"})]})]})]}),e.jsxs("div",{className:`p-6 rounded-xl ${t==="dark"?"bg-gray-800 border-gray-700":"bg-white border-gray-200"} border`,children:[e.jsx("h2",{className:`text-xl font-bold mb-4 ${t==="dark"?"text-white":"text-gray-900"}`,children:"Upcoming Data Management Features"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:n.map((i,l)=>e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-2 h-2 bg-indigo-500 rounded-full"}),e.jsx("span",{className:`text-sm ${t==="dark"?"text-gray-300":"text-gray-600"}`,children:i})]},l))})]})]})})},_A="modulepreload",FA=function(t){return"/"+t},Xu={},Eo=function(s,a,r){let n=Promise.resolve();if(a&&a.length>0){document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),c=(l==null?void 0:l.nonce)||(l==null?void 0:l.getAttribute("nonce"));n=Promise.allSettled(a.map(o=>{if(o=FA(o),o in Xu)return;Xu[o]=!0;const d=o.endsWith(".css"),x=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${o}"]${x}`))return;const u=document.createElement("link");if(u.rel=d?"stylesheet":_A,d||(u.as="script"),u.crossOrigin="",u.href=o,c&&u.setAttribute("nonce",c),document.head.appendChild(u),d)return new Promise((m,f)=>{u.addEventListener("load",m),u.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${o}`)))})}))}function i(l){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=l,window.dispatchEvent(c),!c.defaultPrevented)throw l}return n.then(l=>{for(const c of l||[])c.status==="rejected"&&i(c.reason);return s().catch(i)})},TA=()=>{const{theme:t}=St(),{user:s}=Rt(),[a,r]=y.useState(null),[n,i]=y.useState(!1),l=async()=>{var x;i(!0);const o={timestamp:new Date().toISOString(),checks:[]},d=localStorage.getItem("token");o.checks.push({name:"Authentication Token",status:d?"success":"error",message:d?`Token exists (${d.length} chars)`:"No authentication token found",details:d?`Preview: ${d.substring(0,20)}...`:"Please log in again"}),o.checks.push({name:"User Object",status:s?"success":"error",message:s?`User logged in: ${s.email}`:"No user object found",details:s?`Role: ${s.role}`:"User context is missing"});try{const u=await Eo(()=>Promise.resolve().then(()=>_b),void 0);o.checks.push({name:"API Configuration",status:"success",message:`API Base URL: ${u.default.apiBaseUrl}`,details:`Environment: ${u.default.env}`})}catch(u){o.checks.push({name:"API Configuration",status:"error",message:"Failed to load API configuration",details:u.message})}try{const u=await fetch("/api/super-admin/roles/my-permissions",{headers:{Authorization:`Bearer ${d}`,"Content-Type":"application/json"}});if(u.ok){const m=await u.json();o.checks.push({name:"Backend Connectivity",status:"success",message:"Successfully connected to backend",details:`Response: ${u.status} ${u.statusText}`}),o.checks.push({name:"Permissions API",status:m.success?"success":"warning",message:m.success?"Permissions loaded successfully":"Permissions API returned error",details:m.success?`Internal Role: ${((x=m.data)==null?void 0:x.internalRole)||"undefined"}`:m.message})}else o.checks.push({name:"Backend Connectivity",status:"error",message:`Backend responded with error: ${u.status}`,details:`${u.status} ${u.statusText}`})}catch(u){o.checks.push({name:"Backend Connectivity",status:"error",message:"Cannot connect to backend server",details:u.message||"Network error - check if backend is running on port 5000"})}try{const u=await fetch("/api/super-admin/subscriptions?page=1&limit=1",{headers:{Authorization:`Bearer ${d}`,"Content-Type":"application/json"}});o.checks.push({name:"Billing API",status:u.ok?"success":"error",message:u.ok?"Billing API accessible":`Billing API error: ${u.status}`,details:`${u.status} ${u.statusText}`})}catch(u){o.checks.push({name:"Billing API",status:"error",message:"Billing API connection failed",details:u.message})}r(o),i(!1)},c=o=>{switch(o){case"success":return e.jsx(Te,{className:"w-5 h-5 text-green-500"});case"warning":return e.jsx(Jt,{className:"w-5 h-5 text-yellow-500"});case"error":return e.jsx(Qe,{className:"w-5 h-5 text-red-500"});default:return e.jsx(Jt,{className:"w-5 h-5 text-gray-500"})}};return e.jsxs("div",{className:`p-6 rounded-lg border ${t==="dark"?"bg-gray-800 border-gray-700":"bg-white border-gray-200"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:`text-lg font-medium ${t==="dark"?"text-white":"text-gray-900"}`,children:"System Diagnostics"}),e.jsxs("button",{onClick:l,disabled:n,className:"inline-flex items-center px-3 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 disabled:opacity-50",children:[n?e.jsx(Xt,{className:"w-4 h-4 mr-2 animate-spin"}):e.jsx(Xt,{className:"w-4 h-4 mr-2"}),"Run Diagnostics"]})]}),a&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:`text-xs ${t==="dark"?"text-gray-400":"text-gray-500"}`,children:["Last run: ",new Date(a.timestamp).toLocaleString()]}),a.checks.map((o,d)=>e.jsxs("div",{className:`flex items-start space-x-3 p-3 rounded-md ${o.status==="success"?"bg-green-50 dark:bg-green-900/20":o.status==="warning"?"bg-yellow-50 dark:bg-yellow-900/20":"bg-red-50 dark:bg-red-900/20"}`,children:[c(o.status),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:`text-sm font-medium ${t==="dark"?"text-white":"text-gray-900"}`,children:o.name}),e.jsx("div",{className:`text-sm ${o.status==="success"?"text-green-700 dark:text-green-300":o.status==="warning"?"text-yellow-700 dark:text-yellow-300":"text-red-700 dark:text-red-300"}`,children:o.message}),o.details&&e.jsx("div",{className:`text-xs mt-1 ${t==="dark"?"text-gray-400":"text-gray-500"}`,children:o.details})]})]},d))]}),!a&&!n&&e.jsx("div",{className:`text-center py-8 ${t==="dark"?"text-gray-400":"text-gray-500"}`,children:'Click "Run Diagnostics" to check system connectivity and authentication'})]})},DA=({isOpen:t,onClose:s,onSuccess:a})=>{const{theme:r}=St(),[n,i]=y.useState(!1),[l,c]=y.useState([]),[o,d]=y.useState([]),[x,u]=y.useState({clientId:"",packageId:"",billingCycle:"monthly",startDate:new Date().toISOString().split("T")[0],autoRenew:!0,trialDays:0,discount:{percentage:0,amount:0,reason:""},notes:""}),[m,f]=y.useState(null),[g,h]=y.useState(0);y.useEffect(()=>{t&&(p(),j())},[t]),y.useEffect(()=>{if(x.packageId){const N=o.find(C=>C._id===x.packageId);f(N),v(N)}},[x.packageId,x.billingCycle,x.discount,o]);const p=async()=>{try{const C=await(await fetch("/api/super-admin/clients?limit=100",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,"Content-Type":"application/json"}})).json();C.success&&c(C.data.clients||[])}catch(N){console.error("Error fetching clients:",N),_.error("Failed to fetch clients")}},j=async()=>{try{const C=await(await fetch("/api/super-admin/packages?limit=100",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,"Content-Type":"application/json"}})).json();C.success&&d(C.data.packages||[])}catch(N){console.error("Error fetching packages:",N),_.error("Failed to fetch packages")}},v=N=>{if(!N)return;let C=0;switch(x.billingCycle){case"monthly":C=N.pricing.monthly;break;case"quarterly":C=N.pricing.quarterly||N.pricing.monthly*3;break;case"yearly":C=N.pricing.yearly||N.pricing.monthly*12;break;default:C=N.pricing.monthly}let k=0;x.discount.percentage>0&&(k+=C*(x.discount.percentage/100)),x.discount.amount>0&&(k+=x.discount.amount);const S=Math.max(0,C-k);h(S)},w=N=>{const{name:C,value:k,type:S,checked:F}=N.target;if(C.startsWith("discount.")){const R=C.split(".")[1];u(T=>({...T,discount:{...T.discount,[R]:S==="number"?parseFloat(k)||0:k}}))}else u(R=>({...R,[C]:S==="checkbox"?F:k}))},b=async N=>{N.preventDefault(),i(!0);try{if(!x.clientId||!x.packageId){_.error("Please select both client and package");return}const k=await(await fetch("/api/super-admin/subscriptions",{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,"Content-Type":"application/json"},body:JSON.stringify({...x,basePrice:(m==null?void 0:m.pricing[x.billingCycle])||0,effectivePrice:g})})).json();k.success?(_.success("Subscription created successfully"),a&&a(k.data),s(),A()):_.error(k.message||"Failed to create subscription")}catch(C){console.error("Error creating subscription:",C),_.error("Failed to create subscription")}finally{i(!1)}},A=()=>{u({clientId:"",packageId:"",billingCycle:"monthly",startDate:new Date().toISOString().split("T")[0],autoRenew:!0,trialDays:0,discount:{percentage:0,amount:0,reason:""},notes:""}),f(null),h(0)};return t?e.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:e.jsxs("div",{className:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[e.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity",onClick:s}),e.jsxs("div",{className:`inline-block align-bottom rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-2xl sm:w-full ${r==="dark"?"bg-gray-800":"bg-white"}`,children:[e.jsx("div",{className:`px-6 py-4 border-b ${r==="dark"?"border-gray-700":"border-gray-200"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:`text-lg font-medium ${r==="dark"?"text-white":"text-gray-900"}`,children:"Create New Subscription"}),e.jsx("button",{onClick:s,className:`rounded-md p-2 hover:bg-gray-100 dark:hover:bg-gray-700 ${r==="dark"?"text-gray-400":"text-gray-500"}`,children:e.jsx(Le,{className:"w-5 h-5"})})]})}),e.jsxs("form",{onSubmit:b,className:"px-6 py-4 space-y-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:`block text-sm font-medium mb-2 ${r==="dark"?"text-gray-300":"text-gray-700"}`,children:[e.jsx(Ue,{className:"w-4 h-4 inline mr-2"}),"Client"]}),e.jsxs("select",{name:"clientId",value:x.clientId,onChange:w,required:!0,className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500 ${r==="dark"?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"}`,children:[e.jsx("option",{value:"",children:"Select a client..."}),l.map(N=>e.jsxs("option",{value:N._id,children:[N.companyName," (",N.email,")"]},N._id))]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:`block text-sm font-medium mb-2 ${r==="dark"?"text-gray-300":"text-gray-700"}`,children:[e.jsx(is,{className:"w-4 h-4 inline mr-2"}),"Package"]}),e.jsxs("select",{name:"packageId",value:x.packageId,onChange:w,required:!0,className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500 ${r==="dark"?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"}`,children:[e.jsx("option",{value:"",children:"Select a package..."}),o.map(N=>e.jsxs("option",{value:N._id,children:[N.name," - $",N.pricing.monthly,"/month"]},N._id))]}),m&&e.jsxs("div",{className:`mt-2 p-3 rounded-md ${r==="dark"?"bg-gray-700":"bg-gray-50"}`,children:[e.jsx("p",{className:`text-sm ${r==="dark"?"text-gray-300":"text-gray-600"}`,children:m.description}),e.jsxs("p",{className:`text-xs mt-1 ${r==="dark"?"text-gray-400":"text-gray-500"}`,children:["Max Employees: ",m.features.maxEmployees," | Storage: ",m.features.storageLimit,"GB"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${r==="dark"?"text-gray-300":"text-gray-700"}`,children:"Billing Cycle"}),e.jsxs("select",{name:"billingCycle",value:x.billingCycle,onChange:w,className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500 ${r==="dark"?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"}`,children:[e.jsx("option",{value:"monthly",children:"Monthly"}),e.jsx("option",{value:"quarterly",children:"Quarterly"}),e.jsx("option",{value:"yearly",children:"Yearly"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:`block text-sm font-medium mb-2 ${r==="dark"?"text-gray-300":"text-gray-700"}`,children:[e.jsx(gt,{className:"w-4 h-4 inline mr-2"}),"Calculated Price"]}),e.jsxs("div",{className:`w-full px-3 py-2 border rounded-md ${r==="dark"?"bg-gray-700 border-gray-600":"bg-gray-50 border-gray-300"}`,children:[e.jsxs("span",{className:`text-lg font-bold ${r==="dark"?"text-green-400":"text-green-600"}`,children:["$",g.toFixed(2)]}),m&&e.jsxs("span",{className:`text-sm ml-2 ${r==="dark"?"text-gray-400":"text-gray-500"}`,children:["(Base: $",m.pricing[x.billingCycle]||0,")"]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:`block text-sm font-medium mb-2 ${r==="dark"?"text-gray-300":"text-gray-700"}`,children:[e.jsx(Oe,{className:"w-4 h-4 inline mr-2"}),"Start Date"]}),e.jsx("input",{type:"date",name:"startDate",value:x.startDate,onChange:w,className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500 ${r==="dark"?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"}`})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${r==="dark"?"text-gray-300":"text-gray-700"}`,children:"Trial Days"}),e.jsx("input",{type:"number",name:"trialDays",value:x.trialDays,onChange:w,min:"0",max:"90",className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500 ${r==="dark"?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"}`})]})]}),e.jsxs("div",{className:`p-4 rounded-md ${r==="dark"?"bg-gray-700":"bg-gray-50"}`,children:[e.jsx("h4",{className:`text-sm font-medium mb-3 ${r==="dark"?"text-gray-300":"text-gray-700"}`,children:"Discount (Optional)"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-xs mb-1 ${r==="dark"?"text-gray-400":"text-gray-600"}`,children:"Percentage (%)"}),e.jsx("input",{type:"number",name:"discount.percentage",value:x.discount.percentage,onChange:w,min:"0",max:"100",step:"0.1",className:`w-full px-2 py-1 border rounded text-sm focus:outline-none focus:ring-1 focus:ring-indigo-500 ${r==="dark"?"bg-gray-600 border-gray-500 text-white":"bg-white border-gray-300 text-gray-900"}`})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-xs mb-1 ${r==="dark"?"text-gray-400":"text-gray-600"}`,children:"Fixed Amount ($)"}),e.jsx("input",{type:"number",name:"discount.amount",value:x.discount.amount,onChange:w,min:"0",step:"0.01",className:`w-full px-2 py-1 border rounded text-sm focus:outline-none focus:ring-1 focus:ring-indigo-500 ${r==="dark"?"bg-gray-600 border-gray-500 text-white":"bg-white border-gray-300 text-gray-900"}`})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-xs mb-1 ${r==="dark"?"text-gray-400":"text-gray-600"}`,children:"Reason"}),e.jsx("input",{type:"text",name:"discount.reason",value:x.discount.reason,onChange:w,placeholder:"e.g., Early bird",className:`w-full px-2 py-1 border rounded text-sm focus:outline-none focus:ring-1 focus:ring-indigo-500 ${r==="dark"?"bg-gray-600 border-gray-500 text-white":"bg-white border-gray-300 text-gray-900"}`})]})]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",name:"autoRenew",checked:x.autoRenew,onChange:w,className:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"}),e.jsx("label",{className:`ml-2 text-sm ${r==="dark"?"text-gray-300":"text-gray-700"}`,children:"Enable auto-renewal"})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${r==="dark"?"text-gray-300":"text-gray-700"}`,children:"Notes (Optional)"}),e.jsx("textarea",{name:"notes",value:x.notes,onChange:w,rows:3,placeholder:"Additional notes about this subscription...",className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500 ${r==="dark"?"bg-gray-700 border-gray-600 text-white placeholder-gray-400":"bg-white border-gray-300 text-gray-900 placeholder-gray-500"}`})]})]}),e.jsx("div",{className:`px-6 py-4 border-t ${r==="dark"?"border-gray-700 bg-gray-750":"border-gray-200 bg-gray-50"}`,children:e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{type:"button",onClick:s,className:`px-4 py-2 border rounded-md text-sm font-medium ${r==="dark"?"border-gray-600 text-gray-300 hover:bg-gray-700":"border-gray-300 text-gray-700 hover:bg-gray-50"}`,children:"Cancel"}),e.jsx("button",{type:"submit",onClick:b,disabled:n||!x.clientId||!x.packageId,className:"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed",children:n?"Creating...":"Create Subscription"})]})})]})]})}):null},RA=()=>{const{theme:t}=St(),[s,a]=y.useState([]),[r,n]=y.useState(!0),[i,l]=y.useState(""),[c,o]=y.useState(""),[d,x]=y.useState(""),[u,m]=y.useState(!1),[f,g]=y.useState(null),[h,p]=y.useState(!1),[j,v]=y.useState(1),[w,b]=y.useState(1),[A,N]=y.useState({total:0,active:0,expiring:0,expired:0});y.useEffect(()=>{C(),k()},[i,c,d,j]);const C=async()=>{var X,D,le,de,E;try{n(!0);const z=localStorage.getItem("token");console.log("ðŸ”‘ Auth token exists:",!!z),console.log("ðŸ”‘ Token preview:",z?z.substring(0,20)+"...":"No token");const O={page:j,limit:10,search:i,status:c,billingCycle:d};console.log("ðŸ“¡ Making API request to:","/api/super-admin/subscriptions"),console.log("ðŸ“Š Request params:",O);const{getSubscriptions:P}=await Eo(async()=>{const{getSubscriptions:re}=await import("./billing-BWWpGVWH.js");return{getSubscriptions:re}},__vite__mapDeps([0,1,2,3])),Z=await P(O);console.log("âœ… API Response received:",Z),(X=Z.data)!=null&&X.success?(a(Z.data.data.subscriptions||[]),b(((D=Z.data.data.pagination)==null?void 0:D.pages)||1),console.log("ðŸ“‹ Subscriptions loaded:",((le=Z.data.data.subscriptions)==null?void 0:le.length)||0)):(console.warn("âš ï¸ API response not successful:",Z.data),a([]))}catch(z){console.error("âŒ Error fetching subscriptions:",z),((de=z.response)==null?void 0:de.status)===401?(console.error("ðŸš« Authentication failed - token may be invalid or expired"),_.error("Authentication failed. Please log in again.")):((E=z.response)==null?void 0:E.status)===403?(console.error("ðŸš« Access forbidden - insufficient permissions"),_.error("Access denied. You don't have permission to view subscriptions.")):z.code==="NETWORK_ERROR"||!z.response?(console.error("ðŸŒ Network error - backend server may be down"),_.error("Cannot connect to server. Please check if the backend is running on port 5000.")):(console.error("ðŸ’¥ Unexpected error:",z.message),_.error("Failed to fetch subscriptions: "+z.message)),a([])}finally{n(!1)}},k=async()=>{var X,D,le,de,E,z,O,P,Z;try{const{getSubscriptions:re}=await Eo(async()=>{const{getSubscriptions:V}=await import("./billing-BWWpGVWH.js");return{getSubscriptions:V}},__vite__mapDeps([0,1,2,3])),[ie,oe,ue]=await Promise.all([re({limit:1e3}),re({status:"active",expiring:!0}),re({status:"expired"})]),Ne=((D=(X=ie.data)==null?void 0:X.data)==null?void 0:D.total)||0,I=((E=(de=(le=ie.data)==null?void 0:le.data)==null?void 0:de.subscriptions)==null?void 0:E.filter(V=>V.status==="active").length)||0,ce=((O=(z=oe.data)==null?void 0:z.data)==null?void 0:O.total)||0,L=((Z=(P=ue.data)==null?void 0:P.data)==null?void 0:Z.total)||0;N({total:Ne,active:I,expiring:ce,expired:L})}catch(re){console.error("Error fetching stats:",re),N({total:0,active:0,expiring:0,expired:0})}},S=async X=>{try{(await fetch(`/api/super-admin/subscriptions/${X}/renew`,{method:"PATCH",headers:{"Content-Type":"application/json"}})).ok&&(_.success("Subscription renewed successfully"),C())}catch{_.error("Failed to renew subscription")}},F=async X=>{try{(await fetch(`/api/super-admin/subscriptions/${X}/suspend`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({reason:"Manual suspension"})})).ok&&(_.success("Subscription suspended successfully"),C())}catch{_.error("Failed to suspend subscription")}},R=async X=>{try{(await fetch(`/api/super-admin/subscriptions/${X}/reactivate`,{method:"PATCH",headers:{"Content-Type":"application/json"}})).ok&&(_.success("Subscription reactivated successfully"),C())}catch{_.error("Failed to reactivate subscription")}},T=X=>{console.log("âœ… New subscription created:",X),C(),k()},M=X=>{const D={active:{color:"bg-green-100 text-green-800",icon:Te},pending_payment:{color:"bg-yellow-100 text-yellow-800",icon:Be},expired:{color:"bg-red-100 text-red-800",icon:Qe},suspended:{color:"bg-gray-100 text-gray-800",icon:lx},cancelled:{color:"bg-red-100 text-red-800",icon:Qe}},le=D[X]||D.active,de=le.icon;return e.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${le.color}`,children:[e.jsx(de,{className:"w-3 h-3 mr-1"}),X.replace("_"," ").toUpperCase()]})},H=X=>{const D={monthly:"bg-blue-100 text-blue-800",quarterly:"bg-purple-100 text-purple-800",yearly:"bg-green-100 text-green-800"};return e.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${D[X]||"bg-gray-100 text-gray-800"}`,children:X==null?void 0:X.toUpperCase()})},U=(X,D="USD")=>new Intl.NumberFormat("en-US",{style:"currency",currency:D}).format(X),W=X=>new Date(X).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),se=X=>{const D=new Date,de=new Date(X)-D;return Math.ceil(de/(1e3*60*60*24))};return e.jsx("div",{className:`min-h-screen ${t==="dark"?"bg-gray-900":"bg-gray-50"}`,children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:`text-3xl font-bold ${t==="dark"?"text-white":"text-gray-900"}`,children:"Subscription Management"}),e.jsx("p",{className:`mt-2 ${t==="dark"?"text-gray-400":"text-gray-600"}`,children:"Manage client subscriptions, billing cycles, and renewals"})]}),e.jsxs("button",{onClick:()=>m(!0),className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:[e.jsx(qe,{className:"w-4 h-4 mr-2"}),"New Subscription"]})]})}),e.jsx("div",{className:"mb-8",children:e.jsx(TA,{})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[e.jsx("div",{className:`${t==="dark"?"bg-gray-800":"bg-white"} overflow-hidden shadow rounded-lg`,children:e.jsx("div",{className:"p-5",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(_r,{className:"h-6 w-6 text-gray-400"})}),e.jsx("div",{className:"ml-5 w-0 flex-1",children:e.jsxs("dl",{children:[e.jsx("dt",{className:`text-sm font-medium ${t==="dark"?"text-gray-400":"text-gray-500"} truncate`,children:"Total Subscriptions"}),e.jsx("dd",{className:`text-lg font-medium ${t==="dark"?"text-white":"text-gray-900"}`,children:A.total})]})})]})})}),e.jsx("div",{className:`${t==="dark"?"bg-gray-800":"bg-white"} overflow-hidden shadow rounded-lg`,children:e.jsx("div",{className:"p-5",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(Te,{className:"h-6 w-6 text-green-400"})}),e.jsx("div",{className:"ml-5 w-0 flex-1",children:e.jsxs("dl",{children:[e.jsx("dt",{className:`text-sm font-medium ${t==="dark"?"text-gray-400":"text-gray-500"} truncate`,children:"Active"}),e.jsx("dd",{className:`text-lg font-medium ${t==="dark"?"text-white":"text-gray-900"}`,children:A.active})]})})]})})}),e.jsx("div",{className:`${t==="dark"?"bg-gray-800":"bg-white"} overflow-hidden shadow rounded-lg`,children:e.jsx("div",{className:"p-5",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(Jt,{className:"h-6 w-6 text-yellow-400"})}),e.jsx("div",{className:"ml-5 w-0 flex-1",children:e.jsxs("dl",{children:[e.jsx("dt",{className:`text-sm font-medium ${t==="dark"?"text-gray-400":"text-gray-500"} truncate`,children:"Expiring Soon"}),e.jsx("dd",{className:`text-lg font-medium ${t==="dark"?"text-white":"text-gray-900"}`,children:A.expiring})]})})]})})}),e.jsx("div",{className:`${t==="dark"?"bg-gray-800":"bg-white"} overflow-hidden shadow rounded-lg`,children:e.jsx("div",{className:"p-5",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(Qe,{className:"h-6 w-6 text-red-400"})}),e.jsx("div",{className:"ml-5 w-0 flex-1",children:e.jsxs("dl",{children:[e.jsx("dt",{className:`text-sm font-medium ${t==="dark"?"text-gray-400":"text-gray-500"} truncate`,children:"Expired"}),e.jsx("dd",{className:`text-lg font-medium ${t==="dark"?"text-white":"text-gray-900"}`,children:A.expired})]})})]})})})]}),e.jsx("div",{className:`${t==="dark"?"bg-gray-800":"bg-white"} shadow rounded-lg mb-6`,children:e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium ${t==="dark"?"text-gray-300":"text-gray-700"} mb-2`,children:"Search"}),e.jsxs("div",{className:"relative",children:[e.jsx(yt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx("input",{type:"text",value:i,onChange:X=>l(X.target.value),placeholder:"Search subscriptions...",className:`pl-10 w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500 ${t==="dark"?"bg-gray-700 border-gray-600 text-white placeholder-gray-400":"bg-white border-gray-300 text-gray-900 placeholder-gray-500"}`})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium ${t==="dark"?"text-gray-300":"text-gray-700"} mb-2`,children:"Status"}),e.jsxs("select",{value:c,onChange:X=>o(X.target.value),className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500 ${t==="dark"?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"}`,children:[e.jsx("option",{value:"",children:"All Statuses"}),e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"pending_payment",children:"Pending Payment"}),e.jsx("option",{value:"expired",children:"Expired"}),e.jsx("option",{value:"suspended",children:"Suspended"}),e.jsx("option",{value:"cancelled",children:"Cancelled"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium ${t==="dark"?"text-gray-300":"text-gray-700"} mb-2`,children:"Billing Cycle"}),e.jsxs("select",{value:d,onChange:X=>x(X.target.value),className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500 ${t==="dark"?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"}`,children:[e.jsx("option",{value:"",children:"All Cycles"}),e.jsx("option",{value:"monthly",children:"Monthly"}),e.jsx("option",{value:"quarterly",children:"Quarterly"}),e.jsx("option",{value:"yearly",children:"Yearly"})]})]}),e.jsx("div",{className:"flex items-end",children:e.jsx("button",{onClick:()=>{l(""),o(""),x("")},className:`px-4 py-2 border rounded-md text-sm font-medium ${t==="dark"?"border-gray-600 text-gray-300 hover:bg-gray-700":"border-gray-300 text-gray-700 hover:bg-gray-50"}`,children:"Clear Filters"})})]})})}),e.jsxs("div",{className:`${t==="dark"?"bg-gray-800":"bg-white"} shadow rounded-lg overflow-hidden`,children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsx("h3",{className:`text-lg font-medium ${t==="dark"?"text-white":"text-gray-900"}`,children:"Subscriptions"})}),r?e.jsx("div",{className:"flex justify-center items-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600"})}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:t==="dark"?"bg-gray-700":"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:`px-6 py-3 text-left text-xs font-medium uppercase tracking-wider ${t==="dark"?"text-gray-300":"text-gray-500"}`,children:"Client"}),e.jsx("th",{className:`px-6 py-3 text-left text-xs font-medium uppercase tracking-wider ${t==="dark"?"text-gray-300":"text-gray-500"}`,children:"Package"}),e.jsx("th",{className:`px-6 py-3 text-left text-xs font-medium uppercase tracking-wider ${t==="dark"?"text-gray-300":"text-gray-500"}`,children:"Status"}),e.jsx("th",{className:`px-6 py-3 text-left text-xs font-medium uppercase tracking-wider ${t==="dark"?"text-gray-300":"text-gray-500"}`,children:"Billing"}),e.jsx("th",{className:`px-6 py-3 text-left text-xs font-medium uppercase tracking-wider ${t==="dark"?"text-gray-300":"text-gray-500"}`,children:"End Date"}),e.jsx("th",{className:`px-6 py-3 text-left text-xs font-medium uppercase tracking-wider ${t==="dark"?"text-gray-300":"text-gray-500"}`,children:"Revenue"}),e.jsx("th",{className:`px-6 py-3 text-right text-xs font-medium uppercase tracking-wider ${t==="dark"?"text-gray-300":"text-gray-500"}`,children:"Actions"})]})}),e.jsx("tbody",{className:`divide-y ${t==="dark"?"bg-gray-800 divide-gray-700":"bg-white divide-gray-200"}`,children:s.map(X=>{var de,E,z;const D=se(X.endDate),le=D<=10&&D>0;return e.jsxs("tr",{className:t==="dark"?"hover:bg-gray-700":"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0 h-10 w-10",children:e.jsx("div",{className:`h-10 w-10 rounded-full flex items-center justify-center ${t==="dark"?"bg-gray-600":"bg-gray-200"}`,children:e.jsx(Ue,{className:"h-5 w-5 text-gray-500"})})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("div",{className:`text-sm font-medium ${t==="dark"?"text-white":"text-gray-900"}`,children:(de=X.clientId)==null?void 0:de.companyName}),e.jsx("div",{className:`text-sm ${t==="dark"?"text-gray-400":"text-gray-500"}`,children:X.subscriptionCode})]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(is,{className:"h-4 w-4 text-gray-400 mr-2"}),e.jsxs("div",{children:[e.jsx("div",{className:`text-sm font-medium ${t==="dark"?"text-white":"text-gray-900"}`,children:(E=X.packageId)==null?void 0:E.name}),e.jsx("div",{className:`text-sm ${t==="dark"?"text-gray-400":"text-gray-500"}`,children:(z=X.packageId)==null?void 0:z.type})]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:M(X.status)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{children:[H(X.billingCycle),e.jsx("div",{className:`text-sm mt-1 ${t==="dark"?"text-gray-400":"text-gray-500"}`,children:U(X.effectivePrice,X.currency)})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{children:[e.jsx("div",{className:`text-sm ${t==="dark"?"text-white":"text-gray-900"}`,children:W(X.endDate)}),le&&e.jsxs("div",{className:"text-sm text-yellow-600 flex items-center mt-1",children:[e.jsx(Jt,{className:"h-3 w-3 mr-1"}),D," days left"]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:`text-sm font-medium ${t==="dark"?"text-white":"text-gray-900"}`,children:U(X.totalRevenue,X.currency)})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx("button",{onClick:()=>{g(X),p(!0)},className:"text-indigo-600 hover:text-indigo-900",title:"View Details",children:e.jsx(Ht,{className:"h-4 w-4"})}),X.status==="active"&&e.jsx("button",{onClick:()=>S(X._id),className:"text-green-600 hover:text-green-900",title:"Renew",children:e.jsx(Xt,{className:"h-4 w-4"})}),X.status==="active"&&e.jsx("button",{onClick:()=>F(X._id),className:"text-yellow-600 hover:text-yellow-900",title:"Suspend",children:e.jsx(lx,{className:"h-4 w-4"})}),X.status==="suspended"&&e.jsx("button",{onClick:()=>R(X._id),className:"text-green-600 hover:text-green-900",title:"Reactivate",children:e.jsx(zl,{className:"h-4 w-4"})})]})})]},X._id)})})]})}),w>1&&e.jsxs("div",{className:"px-6 py-4 border-t border-gray-200 flex justify-between items-center",children:[e.jsxs("div",{className:`text-sm ${t==="dark"?"text-gray-400":"text-gray-500"}`,children:["Page ",j," of ",w]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>v(X=>Math.max(X-1,1)),disabled:j===1,className:`px-3 py-1 rounded text-sm ${j===1?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-indigo-600 text-white hover:bg-indigo-700"}`,children:"Previous"}),e.jsx("button",{onClick:()=>v(X=>Math.min(X+1,w)),disabled:j===w,className:`px-3 py-1 rounded text-sm ${j===w?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-indigo-600 text-white hover:bg-indigo-700"}`,children:"Next"})]})]})]}),e.jsx(DA,{isOpen:u,onClose:()=>m(!1),onSuccess:T})]})})},PA=()=>{const{theme:t}=St(),[s,a]=y.useState([]),[r,n]=y.useState(!0),[i,l]=y.useState(""),[c,o]=y.useState(""),[d,x]=y.useState(""),[u,m]=y.useState(""),[f,g]=y.useState(!1),[h,p]=y.useState(null),[j,v]=y.useState(!1),[w,b]=y.useState(!1),[A,N]=y.useState(!1),[C,k]=y.useState([]),[S,F]=y.useState(!1),[R,T]=y.useState(1),[M,H]=y.useState(1),[U,W]=y.useState({total:0,paid:0,pending:0,overdue:0,totalAmount:0,paidAmount:0,pendingAmount:0});y.useEffect(()=>{se(),X()},[i,c,d,u,R]);const se=async()=>{var L;try{n(!0);const V=new URLSearchParams;V.append("page",R),V.append("limit",10),i&&V.append("search",i),c&&V.append("status",c),d&&V.append("paymentStatus",d),u&&V.append("dateRange",u);const te=localStorage.getItem("token"),ne=await fetch("/api/super-admin/invoices?"+V.toString(),{headers:{Authorization:`Bearer ${te}`,"Content-Type":"application/json"}});if(!ne.ok)throw new Error(`HTTP error! status: ${ne.status}`);const xe=await ne.json();if(xe.success)a(xe.data.invoices||[]),H(((L=xe.data.pagination)==null?void 0:L.pages)||1),xe.data.invoices&&xe.data.invoices.length>0&&D(xe.data.invoices);else throw new Error(xe.message||"Failed to fetch invoices")}catch(V){console.error("Error fetching invoices:",V),_.error("Failed to fetch invoices: "+V.message),a([])}finally{n(!1)}},X=async()=>{try{const L=localStorage.getItem("token"),V=await fetch("/api/super-admin/invoices/stats",{headers:{Authorization:`Bearer ${L}`,"Content-Type":"application/json"}});if(V.ok){const te=await V.json();te.success&&W(te.data)}else D()}catch(L){console.error("Error fetching stats:",L),D()}},D=(L=s)=>{if(L.length===0)return;const V=L.reduce((te,ne)=>{var xe,he,Se,G;switch(te.total+=1,te.totalAmount+=((xe=ne.amount)==null?void 0:xe.total)||0,ne.paymentStatus){case"paid":te.paid+=1,te.paidAmount+=((he=ne.amount)==null?void 0:he.total)||0;break;case"pending":te.pending+=1,te.pendingAmount+=((Se=ne.amount)==null?void 0:Se.total)||0;break;default:ne.status==="overdue"&&(te.overdue+=1,te.pendingAmount+=((G=ne.amount)==null?void 0:G.total)||0)}return te},{total:0,paid:0,pending:0,overdue:0,totalAmount:0,paidAmount:0,pendingAmount:0});W(V)},le=async L=>{try{const V=localStorage.getItem("token"),te=await fetch("/api/super-admin/invoices/generate",{method:"POST",headers:{Authorization:`Bearer ${V}`,"Content-Type":"application/json"},body:JSON.stringify({subscriptionId:L})});if(te.ok){const ne=await te.json();_.success("Invoice generated successfully"),se(),X(),g(!1)}else{const ne=await te.json();throw new Error(ne.message||"Failed to generate invoice")}}catch(V){console.error("Error generating invoice:",V),_.error("Failed to generate invoice: "+V.message)}},de=async(L,V)=>{try{const te=localStorage.getItem("token"),ne=await fetch(`/api/super-admin/invoices/${L}/mark-paid`,{method:"PATCH",headers:{Authorization:`Bearer ${te}`,"Content-Type":"application/json"},body:JSON.stringify(V)});if(ne.ok){const xe=await ne.json();_.success("Invoice marked as paid successfully"),se(),X(),b(!1)}else if(ne.status===500){try{const xe=await ne.json();if(xe.message&&(xe.message.includes("audit")||xe.message.includes("log"))){_.success("Invoice marked as paid successfully (audit log warning)"),se(),X(),b(!1);return}}catch{console.log("Assuming operation succeeded despite server error"),_.success("Invoice marked as paid successfully (server warning)"),se(),X(),b(!1);return}throw new Error("Server error occurred")}else{const xe=await ne.json();throw new Error(xe.message||"Failed to mark invoice as paid")}}catch(te){console.error("Error marking invoice as paid:",te),_.error("Failed to mark invoice as paid: "+te.message)}},E=async L=>{try{const V=localStorage.getItem("token"),te=await fetch(`/api/super-admin/invoices/${L}/send-reminder`,{method:"PATCH",headers:{Authorization:`Bearer ${V}`,"Content-Type":"application/json"}});if(te.ok){const ne=await te.json();_.success("Reminder sent successfully"),se()}else{const ne=await te.json();throw new Error(ne.message||"Failed to send reminder")}}catch(V){console.error("Error sending reminder:",V),_.error("Failed to send reminder: "+V.message)}},z=async(L,V)=>{try{const te=localStorage.getItem("token"),ne=await fetch(`/api/super-admin/invoices/${L}/pdf`,{headers:{Authorization:`Bearer ${te}`}});if(ne.ok){const xe=await ne.blob(),he=window.URL.createObjectURL(xe),Se=document.createElement("a");Se.href=he,Se.download=`invoice-${V}.pdf`,document.body.appendChild(Se),Se.click(),window.URL.revokeObjectURL(he),document.body.removeChild(Se),_.success("Invoice PDF downloaded successfully")}else throw new Error("Failed to download PDF")}catch(te){console.error("Error downloading PDF:",te),_.error("Failed to download PDF: "+te.message)}},O=async(L,V)=>{try{const te=localStorage.getItem("token"),ne=await fetch(`/api/super-admin/invoices/${L}`,{method:"PUT",headers:{Authorization:`Bearer ${te}`,"Content-Type":"application/json"},body:JSON.stringify({status:V})});if(ne.ok){const xe=await ne.json();_.success(`Invoice status updated to ${V}`),se(),X(),N(!1)}else{const xe=await ne.json();throw new Error(xe.message||"Failed to update invoice status")}}catch(te){console.error("Error updating invoice status:",te),_.error("Failed to update status: "+te.message)}},P=async(L,V)=>{try{const te=localStorage.getItem("token"),ne=await fetch(`/api/super-admin/invoices/${L._id}`,{method:"PUT",headers:{Authorization:`Bearer ${te}`,"Content-Type":"application/json"},body:JSON.stringify({status:V})});if(ne.ok)_.success(`Invoice ${V==="sent"?"sent to client":"cancelled"}`),se(),X();else{const xe=await ne.json();throw new Error(xe.message||"Failed to update invoice")}}catch(te){console.error("Error updating invoice:",te),_.error("Failed to update invoice: "+te.message)}},Z=(L,V)=>{k(V?te=>[...te,L]:te=>te.filter(ne=>ne!==L))},re=L=>{k(L?s.map(V=>V._id):[])},ie=async L=>{if(C.length===0){_.error("Please select invoices first");return}try{const V=localStorage.getItem("token"),te=await fetch("/api/super-admin/invoices/bulk-update",{method:"PATCH",headers:{Authorization:`Bearer ${V}`,"Content-Type":"application/json"},body:JSON.stringify({invoiceIds:C,action:L})});if(te.ok){const ne=await te.json();_.success(`${C.length} invoices updated successfully`),se(),X(),k([]),F(!1)}else{const ne=await te.json();throw new Error(ne.message||"Failed to update invoices")}}catch(V){console.error("Error with bulk action:",V),_.error("Failed to update invoices: "+V.message)}},oe=L=>{const V={draft:{color:"bg-gray-100 text-gray-800",icon:st},sent:{color:"bg-blue-100 text-blue-800",icon:Gn},paid:{color:"bg-green-100 text-green-800",icon:Te},overdue:{color:"bg-red-100 text-red-800",icon:Jt},cancelled:{color:"bg-gray-100 text-gray-800",icon:Qe}},te=V[L]||V.draft,ne=te.icon;return e.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${te.color}`,children:[e.jsx(ne,{className:"w-3 h-3 mr-1"}),L.toUpperCase()]})},ue=L=>{const V={pending:{color:"bg-yellow-100 text-yellow-800",icon:Be},partial:{color:"bg-orange-100 text-orange-800",icon:_r},paid:{color:"bg-green-100 text-green-800",icon:Te},failed:{color:"bg-red-100 text-red-800",icon:Qe},refunded:{color:"bg-purple-100 text-purple-800",icon:Xt}},te=V[L]||V.pending,ne=te.icon;return e.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${te.color}`,children:[e.jsx(ne,{className:"w-3 h-3 mr-1"}),L.toUpperCase()]})},Ne=(L,V="USD")=>new Intl.NumberFormat("en-US",{style:"currency",currency:V}).format(L),I=L=>new Date(L).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),ce=L=>{const V=new Date,te=new Date(L),ne=V-te,xe=Math.ceil(ne/(1e3*60*60*24));return xe>0?xe:0};return e.jsx("div",{className:`min-h-screen ${t==="dark"?"bg-gray-900":"bg-gray-50"}`,children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:`text-3xl font-bold ${t==="dark"?"text-white":"text-gray-900"}`,children:"Invoice Center"}),e.jsx("p",{className:`mt-2 ${t==="dark"?"text-gray-400":"text-gray-600"}`,children:"Manage invoices, payments, and billing operations"})]}),e.jsxs("button",{onClick:()=>g(!0),className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:[e.jsx(qe,{className:"w-4 h-4 mr-2"}),"Generate Invoice"]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[e.jsx("div",{className:`${t==="dark"?"bg-gray-800":"bg-white"} overflow-hidden shadow rounded-lg`,children:e.jsx("div",{className:"p-5",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(st,{className:"h-6 w-6 text-gray-400"})}),e.jsx("div",{className:"ml-5 w-0 flex-1",children:e.jsxs("dl",{children:[e.jsx("dt",{className:`text-sm font-medium ${t==="dark"?"text-gray-400":"text-gray-500"} truncate`,children:"Total Invoices"}),e.jsx("dd",{className:`text-lg font-medium ${t==="dark"?"text-white":"text-gray-900"}`,children:U.total})]})})]})})}),e.jsx("div",{className:`${t==="dark"?"bg-gray-800":"bg-white"} overflow-hidden shadow rounded-lg`,children:e.jsx("div",{className:"p-5",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(Te,{className:"h-6 w-6 text-green-400"})}),e.jsx("div",{className:"ml-5 w-0 flex-1",children:e.jsxs("dl",{children:[e.jsx("dt",{className:`text-sm font-medium ${t==="dark"?"text-gray-400":"text-gray-500"} truncate`,children:"Paid"}),e.jsx("dd",{className:`text-lg font-medium ${t==="dark"?"text-white":"text-gray-900"}`,children:U.paid})]})})]})})}),e.jsx("div",{className:`${t==="dark"?"bg-gray-800":"bg-white"} overflow-hidden shadow rounded-lg`,children:e.jsx("div",{className:"p-5",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(Be,{className:"h-6 w-6 text-yellow-400"})}),e.jsx("div",{className:"ml-5 w-0 flex-1",children:e.jsxs("dl",{children:[e.jsx("dt",{className:`text-sm font-medium ${t==="dark"?"text-gray-400":"text-gray-500"} truncate`,children:"Pending"}),e.jsx("dd",{className:`text-lg font-medium ${t==="dark"?"text-white":"text-gray-900"}`,children:U.pending})]})})]})})}),e.jsx("div",{className:`${t==="dark"?"bg-gray-800":"bg-white"} overflow-hidden shadow rounded-lg`,children:e.jsx("div",{className:"p-5",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(Jt,{className:"h-6 w-6 text-red-400"})}),e.jsx("div",{className:"ml-5 w-0 flex-1",children:e.jsxs("dl",{children:[e.jsx("dt",{className:`text-sm font-medium ${t==="dark"?"text-gray-400":"text-gray-500"} truncate`,children:"Overdue"}),e.jsx("dd",{className:`text-lg font-medium ${t==="dark"?"text-white":"text-gray-900"}`,children:U.overdue})]})})]})})})]}),e.jsx("div",{className:`${t==="dark"?"bg-gray-800":"bg-white"} shadow rounded-lg mb-6`,children:e.jsxs("div",{className:"p-6",children:[e.jsx("h3",{className:`text-lg font-medium mb-4 ${t==="dark"?"text-white":"text-gray-900"}`,children:"Revenue Summary"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{children:[e.jsx("div",{className:`text-sm font-medium ${t==="dark"?"text-gray-400":"text-gray-500"}`,children:"Total Invoiced"}),e.jsx("div",{className:`text-2xl font-bold ${t==="dark"?"text-white":"text-gray-900"}`,children:Ne(U.totalAmount)})]}),e.jsxs("div",{children:[e.jsx("div",{className:`text-sm font-medium ${t==="dark"?"text-gray-400":"text-gray-500"}`,children:"Amount Collected"}),e.jsx("div",{className:"text-2xl font-bold text-green-600",children:Ne(U.paidAmount)})]}),e.jsxs("div",{children:[e.jsx("div",{className:`text-sm font-medium ${t==="dark"?"text-gray-400":"text-gray-500"}`,children:"Outstanding"}),e.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:Ne(U.pendingAmount)})]})]})]})}),e.jsx("div",{className:`${t==="dark"?"bg-gray-800":"bg-white"} shadow rounded-lg mb-6`,children:e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium ${t==="dark"?"text-gray-300":"text-gray-700"} mb-2`,children:"Search"}),e.jsxs("div",{className:"relative",children:[e.jsx(yt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx("input",{type:"text",value:i,onChange:L=>l(L.target.value),placeholder:"Search invoices...",className:`pl-10 w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500 ${t==="dark"?"bg-gray-700 border-gray-600 text-white placeholder-gray-400":"bg-white border-gray-300 text-gray-900 placeholder-gray-500"}`})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium ${t==="dark"?"text-gray-300":"text-gray-700"} mb-2`,children:"Status"}),e.jsxs("select",{value:c,onChange:L=>o(L.target.value),className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500 ${t==="dark"?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"}`,children:[e.jsx("option",{value:"",children:"All Statuses"}),e.jsx("option",{value:"draft",children:"Draft"}),e.jsx("option",{value:"sent",children:"Sent"}),e.jsx("option",{value:"paid",children:"Paid"}),e.jsx("option",{value:"overdue",children:"Overdue"}),e.jsx("option",{value:"cancelled",children:"Cancelled"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium ${t==="dark"?"text-gray-300":"text-gray-700"} mb-2`,children:"Payment Status"}),e.jsxs("select",{value:d,onChange:L=>x(L.target.value),className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500 ${t==="dark"?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"}`,children:[e.jsx("option",{value:"",children:"All Payment Statuses"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"partial",children:"Partial"}),e.jsx("option",{value:"paid",children:"Paid"}),e.jsx("option",{value:"failed",children:"Failed"}),e.jsx("option",{value:"refunded",children:"Refunded"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium ${t==="dark"?"text-gray-300":"text-gray-700"} mb-2`,children:"Date Range"}),e.jsxs("select",{value:u,onChange:L=>m(L.target.value),className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500 ${t==="dark"?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"}`,children:[e.jsx("option",{value:"",children:"All Time"}),e.jsx("option",{value:"today",children:"Today"}),e.jsx("option",{value:"week",children:"This Week"}),e.jsx("option",{value:"month",children:"This Month"}),e.jsx("option",{value:"quarter",children:"This Quarter"}),e.jsx("option",{value:"year",children:"This Year"})]})]}),e.jsx("div",{className:"flex items-end",children:e.jsx("button",{onClick:()=>{l(""),o(""),x(""),m("")},className:`px-4 py-2 border rounded-md text-sm font-medium ${t==="dark"?"border-gray-600 text-gray-300 hover:bg-gray-700":"border-gray-300 text-gray-700 hover:bg-gray-50"}`,children:"Clear Filters"})})]})})}),e.jsxs("div",{className:`${t==="dark"?"bg-gray-800":"bg-white"} shadow rounded-lg overflow-hidden`,children:[e.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 flex justify-between items-center",children:[e.jsxs("h3",{className:`text-lg font-medium ${t==="dark"?"text-white":"text-gray-900"}`,children:["Invoices",C.length>0&&e.jsxs("span",{className:`ml-2 text-sm ${t==="dark"?"text-gray-400":"text-gray-500"}`,children:["(",C.length," selected)"]})]}),C.length>0&&e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs("button",{onClick:()=>ie("send"),className:"inline-flex items-center px-3 py-1 border border-transparent text-xs font-medium rounded text-white bg-blue-600 hover:bg-blue-700",children:[e.jsx(Gn,{className:"w-3 h-3 mr-1"}),"Send Selected"]}),e.jsxs("button",{onClick:()=>ie("mark-overdue"),className:"inline-flex items-center px-3 py-1 border border-transparent text-xs font-medium rounded text-white bg-yellow-600 hover:bg-yellow-700",children:[e.jsx(Jt,{className:"w-3 h-3 mr-1"}),"Mark Overdue"]}),e.jsxs("button",{onClick:()=>{window.confirm(`Are you sure you want to cancel ${C.length} invoices?`)&&ie("cancel")},className:"inline-flex items-center px-3 py-1 border border-transparent text-xs font-medium rounded text-white bg-red-600 hover:bg-red-700",children:[e.jsx(Qe,{className:"w-3 h-3 mr-1"}),"Cancel Selected"]})]})]}),r?e.jsx("div",{className:"flex justify-center items-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600"})}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:t==="dark"?"bg-gray-700":"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:`px-6 py-3 text-left text-xs font-medium uppercase tracking-wider ${t==="dark"?"text-gray-300":"text-gray-500"}`,children:e.jsx("input",{type:"checkbox",checked:C.length===s.length&&s.length>0,onChange:L=>re(L.target.checked),className:"rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"})}),e.jsx("th",{className:`px-6 py-3 text-left text-xs font-medium uppercase tracking-wider ${t==="dark"?"text-gray-300":"text-gray-500"}`,children:"Invoice"}),e.jsx("th",{className:`px-6 py-3 text-left text-xs font-medium uppercase tracking-wider ${t==="dark"?"text-gray-300":"text-gray-500"}`,children:"Client"}),e.jsx("th",{className:`px-6 py-3 text-left text-xs font-medium uppercase tracking-wider ${t==="dark"?"text-gray-300":"text-gray-500"}`,children:"Amount"}),e.jsx("th",{className:`px-6 py-3 text-left text-xs font-medium uppercase tracking-wider ${t==="dark"?"text-gray-300":"text-gray-500"}`,children:"Status"}),e.jsx("th",{className:`px-6 py-3 text-left text-xs font-medium uppercase tracking-wider ${t==="dark"?"text-gray-300":"text-gray-500"}`,children:"Payment"}),e.jsx("th",{className:`px-6 py-3 text-left text-xs font-medium uppercase tracking-wider ${t==="dark"?"text-gray-300":"text-gray-500"}`,children:"Due Date"}),e.jsx("th",{className:`px-6 py-3 text-right text-xs font-medium uppercase tracking-wider ${t==="dark"?"text-gray-300":"text-gray-500"}`,children:"Actions"})]})}),e.jsx("tbody",{className:`divide-y ${t==="dark"?"bg-gray-800 divide-gray-700":"bg-white divide-gray-200"}`,children:s.map(L=>{var ne,xe;const V=ce(L.dueDate),te=V>0&&L.status!=="paid";return e.jsxs("tr",{className:t==="dark"?"hover:bg-gray-700":"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("input",{type:"checkbox",checked:C.includes(L._id),onChange:he=>Z(L._id,he.target.checked),className:"rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{children:[e.jsx("div",{className:`text-sm font-medium ${t==="dark"?"text-white":"text-gray-900"}`,children:L.invoiceNumber}),e.jsx("div",{className:`text-sm ${t==="dark"?"text-gray-400":"text-gray-500"}`,children:I(L.createdAt)})]})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsx("div",{className:`text-sm font-medium ${t==="dark"?"text-white":"text-gray-900"}`,children:(ne=L.clientId)==null?void 0:ne.companyName}),e.jsx("div",{className:`text-sm ${t==="dark"?"text-gray-400":"text-gray-500"}`,children:(xe=L.clientId)==null?void 0:xe.email})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{children:[e.jsx("div",{className:`text-sm font-medium ${t==="dark"?"text-white":"text-gray-900"}`,children:Ne(L.amount.total,L.currency)}),L.paidAmount>0&&e.jsxs("div",{className:"text-sm text-green-600",children:[Ne(L.paidAmount,L.currency)," paid"]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:oe(L.status)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:ue(L.paymentStatus)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{children:[e.jsx("div",{className:`text-sm ${t==="dark"?"text-white":"text-gray-900"}`,children:I(L.dueDate)}),te&&e.jsxs("div",{className:"text-sm text-red-600 flex items-center mt-1",children:[e.jsx(Jt,{className:"h-3 w-3 mr-1"}),V," days overdue"]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx("button",{onClick:()=>{p(L),v(!0)},className:"text-indigo-600 hover:text-indigo-900",title:"View Details",children:e.jsx(Ht,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>z(L._id,L.invoiceNumber),className:"text-blue-600 hover:text-blue-900",title:"Download PDF",children:e.jsx(Mt,{className:"h-4 w-4"})}),L.status==="draft"&&e.jsx("button",{onClick:()=>P(L,"sent"),className:"text-blue-600 hover:text-blue-900",title:"Send to Client",children:e.jsx(Gn,{className:"h-4 w-4"})}),L.paymentStatus!=="paid"&&L.status!=="cancelled"&&e.jsx("button",{onClick:()=>{p(L),b(!0)},className:"text-green-600 hover:text-green-900",title:"Mark as Paid",children:e.jsx(gt,{className:"h-4 w-4"})}),(L.status==="sent"||L.status==="overdue")&&L.paymentStatus!=="paid"&&e.jsx("button",{onClick:()=>E(L._id),className:"text-yellow-600 hover:text-yellow-900",title:"Send Reminder",children:e.jsx(wt,{className:"h-4 w-4"})}),L.status!=="paid"&&L.status!=="cancelled"&&e.jsx("button",{onClick:()=>{p(L),N(!0)},className:"text-purple-600 hover:text-purple-900",title:"Update Status",children:e.jsx(Xt,{className:"h-4 w-4"})}),(L.status==="draft"||L.status==="sent")&&e.jsx("button",{onClick:()=>{window.confirm("Are you sure you want to cancel this invoice?")&&P(L,"cancelled")},className:"text-red-600 hover:text-red-900",title:"Cancel Invoice",children:e.jsx(Qe,{className:"h-4 w-4"})})]})})]},L._id)})})]})}),M>1&&e.jsxs("div",{className:"px-6 py-4 border-t border-gray-200 flex justify-between items-center",children:[e.jsxs("div",{className:`text-sm ${t==="dark"?"text-gray-400":"text-gray-500"}`,children:["Page ",R," of ",M]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>T(L=>Math.max(L-1,1)),disabled:R===1,className:`px-3 py-1 rounded text-sm ${R===1?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-indigo-600 text-white hover:bg-indigo-700"}`,children:"Previous"}),e.jsx("button",{onClick:()=>T(L=>Math.min(L+1,M)),disabled:R===M,className:`px-3 py-1 rounded text-sm ${R===M?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-indigo-600 text-white hover:bg-indigo-700"}`,children:"Next"})]})]})]}),f&&e.jsx(IA,{isOpen:f,onClose:()=>g(!1),onGenerate:le,theme:t}),j&&h&&e.jsx($A,{isOpen:j,onClose:()=>v(!1),invoice:h,theme:t}),w&&h&&e.jsx(OA,{isOpen:w,onClose:()=>b(!1),onSubmit:L=>de(h._id,L),invoice:h,theme:t}),A&&h&&e.jsx(LA,{isOpen:A,onClose:()=>N(!1),onUpdate:L=>O(h._id,L),invoice:h,theme:t})]})})},IA=({isOpen:t,onClose:s,onGenerate:a,theme:r})=>{const[n,i]=y.useState([]),[l,c]=y.useState(""),[o,d]=y.useState(!1);y.useEffect(()=>{t&&x()},[t]);const x=async()=>{try{const m=localStorage.getItem("token"),f=await fetch("/api/super-admin/subscriptions?status=active&limit=100",{headers:{Authorization:`Bearer ${m}`,"Content-Type":"application/json"}});if(f.ok){const g=await f.json();i(g.data.subscriptions||[])}}catch(m){console.error("Error fetching subscriptions:",m)}},u=async m=>{m.preventDefault(),l&&(d(!0),await a(l),d(!1))};return t?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:`${r==="dark"?"bg-gray-800":"bg-white"} rounded-lg p-6 w-full max-w-md`,children:[e.jsx("h3",{className:`text-lg font-medium mb-4 ${r==="dark"?"text-white":"text-gray-900"}`,children:"Generate Invoice"}),e.jsxs("form",{onSubmit:u,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${r==="dark"?"text-gray-300":"text-gray-700"}`,children:"Select Subscription"}),e.jsxs("select",{value:l,onChange:m=>c(m.target.value),className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500 ${r==="dark"?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"}`,required:!0,children:[e.jsx("option",{value:"",children:"Select a subscription"}),n.map(m=>{var f,g;return e.jsxs("option",{value:m._id,children:[(f=m.clientId)==null?void 0:f.companyName," - ",(g=m.packageId)==null?void 0:g.name," (",m.subscriptionCode,")"]},m._id)})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{type:"button",onClick:s,className:`px-4 py-2 border rounded-md text-sm font-medium ${r==="dark"?"border-gray-600 text-gray-300 hover:bg-gray-700":"border-gray-300 text-gray-700 hover:bg-gray-50"}`,children:"Cancel"}),e.jsx("button",{type:"submit",disabled:o||!l,className:"px-4 py-2 bg-indigo-600 text-white rounded-md text-sm font-medium hover:bg-indigo-700 disabled:opacity-50",children:o?"Generating...":"Generate Invoice"})]})]})]})}):null},$A=({isOpen:t,onClose:s,invoice:a,theme:r})=>{var l,c,o,d,x,u,m,f,g;if(!t||!a)return null;const n=(h,p="USD")=>new Intl.NumberFormat("en-US",{style:"currency",currency:p}).format(h),i=h=>new Date(h).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"});return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:`${r==="dark"?"bg-gray-800":"bg-white"} rounded-lg p-6 w-full max-w-2xl max-h-screen overflow-y-auto`,children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h3",{className:`text-xl font-medium ${r==="dark"?"text-white":"text-gray-900"}`,children:"Invoice Details"}),e.jsx("button",{onClick:s,className:"text-gray-400 hover:text-gray-600",children:e.jsx(Qe,{className:"h-6 w-6"})})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:`font-medium mb-2 ${r==="dark"?"text-white":"text-gray-900"}`,children:"Invoice Information"}),e.jsxs("p",{className:`text-sm ${r==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("strong",{children:"Invoice Number:"})," ",a.invoiceNumber]}),e.jsxs("p",{className:`text-sm ${r==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("strong",{children:"Created:"})," ",i(a.createdAt)]}),e.jsxs("p",{className:`text-sm ${r==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("strong",{children:"Due Date:"})," ",i(a.dueDate)]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:`font-medium mb-2 ${r==="dark"?"text-white":"text-gray-900"}`,children:"Client Information"}),e.jsxs("p",{className:`text-sm ${r==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("strong",{children:"Company:"})," ",(l=a.clientId)==null?void 0:l.companyName]}),e.jsxs("p",{className:`text-sm ${r==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("strong",{children:"Email:"})," ",(c=a.clientId)==null?void 0:c.email]}),e.jsxs("p",{className:`text-sm ${r==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("strong",{children:"Contact:"})," ",(d=(o=a.clientId)==null?void 0:o.contactPerson)==null?void 0:d.name]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:`font-medium mb-3 ${r==="dark"?"text-white":"text-gray-900"}`,children:"Invoice Items"}),e.jsx("div",{className:`border rounded-lg ${r==="dark"?"border-gray-600":"border-gray-200"}`,children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:`${r==="dark"?"bg-gray-700":"bg-gray-50"}`,children:e.jsxs("tr",{children:[e.jsx("th",{className:`px-4 py-2 text-left text-sm font-medium ${r==="dark"?"text-gray-300":"text-gray-500"}`,children:"Description"}),e.jsx("th",{className:`px-4 py-2 text-right text-sm font-medium ${r==="dark"?"text-gray-300":"text-gray-500"}`,children:"Amount"})]})}),e.jsx("tbody",{children:(x=a.itemDetails)==null?void 0:x.map((h,p)=>e.jsxs("tr",{className:`border-t ${r==="dark"?"border-gray-600":"border-gray-200"}`,children:[e.jsx("td",{className:`px-4 py-2 text-sm ${r==="dark"?"text-gray-300":"text-gray-600"}`,children:h.description}),e.jsx("td",{className:`px-4 py-2 text-sm text-right ${r==="dark"?"text-gray-300":"text-gray-600"}`,children:n(h.total,a.currency)})]},p))})]})})]}),e.jsx("div",{className:`border-t pt-4 ${r==="dark"?"border-gray-600":"border-gray-200"}`,children:e.jsx("div",{className:"flex justify-end",children:e.jsxs("div",{className:"w-64",children:[e.jsxs("div",{className:"flex justify-between mb-2",children:[e.jsx("span",{className:`text-sm ${r==="dark"?"text-gray-300":"text-gray-600"}`,children:"Subtotal:"}),e.jsx("span",{className:`text-sm ${r==="dark"?"text-gray-300":"text-gray-600"}`,children:n(((u=a.amount)==null?void 0:u.subtotal)||0,a.currency)})]}),((m=a.amount)==null?void 0:m.discount)>0&&e.jsxs("div",{className:"flex justify-between mb-2",children:[e.jsx("span",{className:`text-sm ${r==="dark"?"text-gray-300":"text-gray-600"}`,children:"Discount:"}),e.jsxs("span",{className:"text-sm text-green-600",children:["-",n(a.amount.discount,a.currency)]})]}),e.jsxs("div",{className:"flex justify-between mb-2",children:[e.jsx("span",{className:`text-sm ${r==="dark"?"text-gray-300":"text-gray-600"}`,children:"Tax:"}),e.jsx("span",{className:`text-sm ${r==="dark"?"text-gray-300":"text-gray-600"}`,children:n(((f=a.amount)==null?void 0:f.tax)||0,a.currency)})]}),e.jsxs("div",{className:`flex justify-between border-t pt-2 ${r==="dark"?"border-gray-600":"border-gray-200"}`,children:[e.jsx("span",{className:`font-medium ${r==="dark"?"text-white":"text-gray-900"}`,children:"Total:"}),e.jsx("span",{className:`font-medium ${r==="dark"?"text-white":"text-gray-900"}`,children:n(((g=a.amount)==null?void 0:g.total)||0,a.currency)})]})]})})})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:s,className:"px-4 py-2 bg-indigo-600 text-white rounded-md text-sm font-medium hover:bg-indigo-700",children:"Close"})})]})})},OA=({isOpen:t,onClose:s,onSubmit:a,invoice:r,theme:n})=>{var x;const[i,l]=y.useState({amount:((x=r==null?void 0:r.amount)==null?void 0:x.total)||0,paymentMethod:"card",paymentDate:new Date().toISOString().split("T")[0],transactionId:"",notes:""}),[c,o]=y.useState(!1),d=async u=>{u.preventDefault(),o(!0),await a(i),o(!1)};return!t||!r?null:e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:`${n==="dark"?"bg-gray-800":"bg-white"} rounded-lg p-6 w-full max-w-md`,children:[e.jsx("h3",{className:`text-lg font-medium mb-4 ${n==="dark"?"text-white":"text-gray-900"}`,children:"Mark Invoice as Paid"}),e.jsxs("form",{onSubmit:d,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${n==="dark"?"text-gray-300":"text-gray-700"}`,children:"Payment Amount"}),e.jsx("input",{type:"number",step:"0.01",value:i.amount,onChange:u=>l({...i,amount:parseFloat(u.target.value)}),className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500 ${n==="dark"?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"}`,required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${n==="dark"?"text-gray-300":"text-gray-700"}`,children:"Payment Method"}),e.jsxs("select",{value:i.paymentMethod,onChange:u=>l({...i,paymentMethod:u.target.value}),className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500 ${n==="dark"?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"}`,required:!0,children:[e.jsx("option",{value:"card",children:"Credit Card"}),e.jsx("option",{value:"bank_transfer",children:"Bank Transfer"}),e.jsx("option",{value:"digital_wallet",children:"Digital Wallet"}),e.jsx("option",{value:"check",children:"Check"}),e.jsx("option",{value:"cash",children:"Cash"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${n==="dark"?"text-gray-300":"text-gray-700"}`,children:"Payment Date"}),e.jsx("input",{type:"date",value:i.paymentDate,onChange:u=>l({...i,paymentDate:u.target.value}),className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500 ${n==="dark"?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"}`,required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${n==="dark"?"text-gray-300":"text-gray-700"}`,children:"Transaction ID"}),e.jsx("input",{type:"text",value:i.transactionId,onChange:u=>l({...i,transactionId:u.target.value}),placeholder:"Optional transaction reference",className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500 ${n==="dark"?"bg-gray-700 border-gray-600 text-white placeholder-gray-400":"bg-white border-gray-300 text-gray-900 placeholder-gray-500"}`})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${n==="dark"?"text-gray-300":"text-gray-700"}`,children:"Notes"}),e.jsx("textarea",{value:i.notes,onChange:u=>l({...i,notes:u.target.value}),rows:3,placeholder:"Optional payment notes",className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500 ${n==="dark"?"bg-gray-700 border-gray-600 text-white placeholder-gray-400":"bg-white border-gray-300 text-gray-900 placeholder-gray-500"}`})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[e.jsx("button",{type:"button",onClick:s,className:`px-4 py-2 border rounded-md text-sm font-medium ${n==="dark"?"border-gray-600 text-gray-300 hover:bg-gray-700":"border-gray-300 text-gray-700 hover:bg-gray-50"}`,children:"Cancel"}),e.jsx("button",{type:"submit",disabled:c,className:"px-4 py-2 bg-green-600 text-white rounded-md text-sm font-medium hover:bg-green-700 disabled:opacity-50",children:c?"Processing...":"Mark as Paid"})]})]})]})})},LA=({isOpen:t,onClose:s,onUpdate:a,invoice:r,theme:n})=>{var m;const[i,l]=y.useState((r==null?void 0:r.status)||""),[c,o]=y.useState(!1),x=[{value:"draft",label:"Draft",description:"Invoice is being prepared"},{value:"sent",label:"Sent",description:"Invoice sent to client"},{value:"overdue",label:"Overdue",description:"Invoice is past due date"},{value:"cancelled",label:"Cancelled",description:"Invoice has been cancelled"}].filter(f=>f.value!==(r==null?void 0:r.status)&&f.value!=="paid"),u=async f=>{f.preventDefault(),!(!i||i===(r==null?void 0:r.status))&&(o(!0),await a(i),o(!1))};return!t||!r?null:e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:`${n==="dark"?"bg-gray-800":"bg-white"} rounded-lg p-6 w-full max-w-md`,children:[e.jsx("h3",{className:`text-lg font-medium mb-4 ${n==="dark"?"text-white":"text-gray-900"}`,children:"Update Invoice Status"}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:`text-sm ${n==="dark"?"text-gray-300":"text-gray-600"} mb-2`,children:[e.jsx("strong",{children:"Invoice:"})," ",r.invoiceNumber]}),e.jsxs("div",{className:`text-sm ${n==="dark"?"text-gray-300":"text-gray-600"} mb-4`,children:[e.jsx("strong",{children:"Current Status:"})," ",e.jsx("span",{className:"capitalize",children:r.status})]})]}),e.jsxs("form",{onSubmit:u,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${n==="dark"?"text-gray-300":"text-gray-700"}`,children:"New Status"}),e.jsxs("select",{value:i,onChange:f=>l(f.target.value),className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500 ${n==="dark"?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"}`,required:!0,children:[e.jsx("option",{value:"",children:"Select new status"}),x.map(f=>e.jsx("option",{value:f.value,children:f.label},f.value))]}),i&&e.jsx("div",{className:`text-xs mt-1 ${n==="dark"?"text-gray-400":"text-gray-500"}`,children:(m=x.find(f=>f.value===i))==null?void 0:m.description})]}),e.jsxs("div",{className:`mb-4 p-3 rounded-md ${n==="dark"?"bg-gray-700":"bg-gray-50"}`,children:[e.jsx("h4",{className:`text-sm font-medium mb-2 ${n==="dark"?"text-white":"text-gray-900"}`,children:"Status Change Effects:"}),e.jsxs("ul",{className:`text-xs space-y-1 ${n==="dark"?"text-gray-300":"text-gray-600"}`,children:[i==="sent"&&e.jsxs(e.Fragment,{children:[e.jsx("li",{children:"â€¢ Invoice will be marked as sent to client"}),e.jsx("li",{children:"â€¢ Client will receive email notification"}),e.jsx("li",{children:"â€¢ Payment reminders can be sent"})]}),i==="cancelled"&&e.jsxs(e.Fragment,{children:[e.jsx("li",{children:"â€¢ Invoice will be cancelled and cannot be paid"}),e.jsx("li",{children:"â€¢ This action cannot be undone"}),e.jsx("li",{children:"â€¢ Client will be notified of cancellation"})]}),i==="overdue"&&e.jsxs(e.Fragment,{children:[e.jsx("li",{children:"â€¢ Invoice will be marked as overdue"}),e.jsx("li",{children:"â€¢ Late fees may apply"}),e.jsx("li",{children:"â€¢ Escalated reminders will be sent"})]}),i==="draft"&&e.jsxs(e.Fragment,{children:[e.jsx("li",{children:"â€¢ Invoice will be moved back to draft"}),e.jsx("li",{children:"â€¢ Can be edited before sending"}),e.jsx("li",{children:"â€¢ Client notifications will stop"})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{type:"button",onClick:s,className:`px-4 py-2 border rounded-md text-sm font-medium ${n==="dark"?"border-gray-600 text-gray-300 hover:bg-gray-700":"border-gray-300 text-gray-700 hover:bg-gray-50"}`,children:"Cancel"}),e.jsx("button",{type:"submit",disabled:c||!i||i===(r==null?void 0:r.status),className:"px-4 py-2 bg-indigo-600 text-white rounded-md text-sm font-medium hover:bg-indigo-700 disabled:opacity-50",children:c?"Updating...":"Update Status"})]})]})]})})},MA=()=>{const{theme:t}=St(),[s,a]=y.useState(!0),[r,n]=y.useState("month"),[i,l]=y.useState({overview:{totalRevenue:0,revenueGrowth:0,totalInvoices:0,invoiceGrowth:0,averageInvoiceValue:0,activeSubscriptions:0,pendingRevenue:0,pendingInvoices:0},trends:[],packagePerformance:[],clientRevenue:[],paymentMethodStats:[],upcomingRenewals:{renewals:[],summary:{totalValue:0,count:0}},overdueInvoices:{summary:{totalOverdue:0,count:0},byAge:[]}});y.useEffect(()=>{c()},[r]);const c=async()=>{try{a(!0);const f=await(await fetch(`/api/super-admin/revenue/dashboard?period=${r}`)).json();f.success&&l(f.data)}catch(m){console.error("Error fetching dashboard data:",m),_.error("Failed to fetch dashboard data")}finally{a(!1)}},o=(m,f="USD")=>new Intl.NumberFormat("en-US",{style:"currency",currency:f,minimumFractionDigits:0,maximumFractionDigits:0}).format(m),d=m=>`${m>=0?"+":""}${m.toFixed(1)}%`,x=m=>m>=0?Ks:Mg,u=m=>m>=0?"text-green-600":"text-red-600";return e.jsx("div",{className:`min-h-screen ${t==="dark"?"bg-gray-900":"bg-gray-50"}`,children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:`text-3xl font-bold ${t==="dark"?"text-white":"text-gray-900"}`,children:"Revenue Dashboard"}),e.jsx("p",{className:`mt-2 ${t==="dark"?"text-gray-400":"text-gray-600"}`,children:"Comprehensive revenue analytics and financial insights"})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("select",{value:r,onChange:m=>n(m.target.value),className:`px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500 ${t==="dark"?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"}`,children:[e.jsx("option",{value:"week",children:"This Week"}),e.jsx("option",{value:"month",children:"This Month"}),e.jsx("option",{value:"quarter",children:"This Quarter"}),e.jsx("option",{value:"year",children:"This Year"})]}),e.jsxs("button",{onClick:c,className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700",children:[e.jsx(Xt,{className:"w-4 h-4 mr-2"}),"Refresh"]})]})]})}),s?e.jsx("div",{className:"flex justify-center items-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600"})}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[e.jsx("div",{className:`${t==="dark"?"bg-gray-800":"bg-white"} overflow-hidden shadow rounded-lg`,children:e.jsx("div",{className:"p-5",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(gt,{className:"h-6 w-6 text-green-400"})}),e.jsx("div",{className:"ml-5 w-0 flex-1",children:e.jsxs("dl",{children:[e.jsx("dt",{className:`text-sm font-medium ${t==="dark"?"text-gray-400":"text-gray-500"} truncate`,children:"Total Revenue"}),e.jsx("dd",{className:`text-lg font-medium ${t==="dark"?"text-white":"text-gray-900"}`,children:o(i.overview.totalRevenue)}),e.jsxs("dd",{className:`flex items-center text-sm ${u(i.overview.revenueGrowth)}`,children:[Ve.createElement(x(i.overview.revenueGrowth),{className:"h-4 w-4 mr-1"}),d(i.overview.revenueGrowth)]})]})})]})})}),e.jsx("div",{className:`${t==="dark"?"bg-gray-800":"bg-white"} overflow-hidden shadow rounded-lg`,children:e.jsx("div",{className:"p-5",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(_r,{className:"h-6 w-6 text-blue-400"})}),e.jsx("div",{className:"ml-5 w-0 flex-1",children:e.jsxs("dl",{children:[e.jsx("dt",{className:`text-sm font-medium ${t==="dark"?"text-gray-400":"text-gray-500"} truncate`,children:"Total Invoices"}),e.jsx("dd",{className:`text-lg font-medium ${t==="dark"?"text-white":"text-gray-900"}`,children:i.overview.totalInvoices}),e.jsxs("dd",{className:`flex items-center text-sm ${u(i.overview.invoiceGrowth)}`,children:[Ve.createElement(x(i.overview.invoiceGrowth),{className:"h-4 w-4 mr-1"}),d(i.overview.invoiceGrowth)]})]})})]})})}),e.jsx("div",{className:`${t==="dark"?"bg-gray-800":"bg-white"} overflow-hidden shadow rounded-lg`,children:e.jsx("div",{className:"p-5",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(Ue,{className:"h-6 w-6 text-purple-400"})}),e.jsx("div",{className:"ml-5 w-0 flex-1",children:e.jsxs("dl",{children:[e.jsx("dt",{className:`text-sm font-medium ${t==="dark"?"text-gray-400":"text-gray-500"} truncate`,children:"Active Subscriptions"}),e.jsx("dd",{className:`text-lg font-medium ${t==="dark"?"text-white":"text-gray-900"}`,children:i.overview.activeSubscriptions}),e.jsxs("dd",{className:`text-sm ${t==="dark"?"text-gray-400":"text-gray-500"}`,children:["Avg: ",o(i.overview.averageInvoiceValue)]})]})})]})})}),e.jsx("div",{className:`${t==="dark"?"bg-gray-800":"bg-white"} overflow-hidden shadow rounded-lg`,children:e.jsx("div",{className:"p-5",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(Be,{className:"h-6 w-6 text-yellow-400"})}),e.jsx("div",{className:"ml-5 w-0 flex-1",children:e.jsxs("dl",{children:[e.jsx("dt",{className:`text-sm font-medium ${t==="dark"?"text-gray-400":"text-gray-500"} truncate`,children:"Pending Revenue"}),e.jsx("dd",{className:`text-lg font-medium ${t==="dark"?"text-white":"text-gray-900"}`,children:o(i.overview.pendingRevenue)}),e.jsxs("dd",{className:`text-sm ${t==="dark"?"text-gray-400":"text-gray-500"}`,children:[i.overview.pendingInvoices," invoices"]})]})})]})})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:[e.jsxs("div",{className:`${t==="dark"?"bg-gray-800":"bg-white"} shadow rounded-lg p-6`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:`text-lg font-medium ${t==="dark"?"text-white":"text-gray-900"}`,children:"Revenue Trends"}),e.jsx(lr,{className:"h-5 w-5 text-gray-400"})]}),e.jsx("div",{className:"h-64 flex items-center justify-center",children:e.jsxs("div",{className:`text-sm ${t==="dark"?"text-gray-400":"text-gray-500"}`,children:["Chart visualization would go here",e.jsx("br",{}),"(Revenue trends over time)"]})})]}),e.jsxs("div",{className:`${t==="dark"?"bg-gray-800":"bg-white"} shadow rounded-lg p-6`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:`text-lg font-medium ${t==="dark"?"text-white":"text-gray-900"}`,children:"Package Performance"}),e.jsx(b0,{className:"h-5 w-5 text-gray-400"})]}),e.jsx("div",{className:"space-y-3",children:i.packagePerformance.slice(0,5).map((m,f)=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(is,{className:"h-4 w-4 text-gray-400 mr-2"}),e.jsx("span",{className:`text-sm ${t==="dark"?"text-white":"text-gray-900"}`,children:m.packageName})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:`text-sm font-medium ${t==="dark"?"text-white":"text-gray-900"}`,children:o(m.totalRevenue)}),e.jsxs("div",{className:`text-xs ${t==="dark"?"text-gray-400":"text-gray-500"}`,children:[m.totalInvoices," invoices"]})]})]},m._id))})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:[e.jsxs("div",{className:`${t==="dark"?"bg-gray-800":"bg-white"} shadow rounded-lg p-6`,children:[e.jsx("h3",{className:`text-lg font-medium mb-4 ${t==="dark"?"text-white":"text-gray-900"}`,children:"Top Clients by Revenue"}),e.jsx("div",{className:"space-y-3",children:i.clientRevenue.slice(0,5).map((m,f)=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-xs font-medium ${t==="dark"?"bg-gray-600 text-white":"bg-gray-200 text-gray-900"}`,children:f+1}),e.jsxs("div",{className:"ml-3",children:[e.jsx("div",{className:`text-sm font-medium ${t==="dark"?"text-white":"text-gray-900"}`,children:m.clientName}),e.jsxs("div",{className:`text-xs ${t==="dark"?"text-gray-400":"text-gray-500"}`,children:[m.totalInvoices," invoices"]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:`text-sm font-medium ${t==="dark"?"text-white":"text-gray-900"}`,children:o(m.totalRevenue)}),e.jsxs("div",{className:`text-xs ${t==="dark"?"text-gray-400":"text-gray-500"}`,children:["Avg: ",o(m.averageInvoiceValue)]})]})]},m._id))})]}),e.jsxs("div",{className:`${t==="dark"?"bg-gray-800":"bg-white"} shadow rounded-lg p-6`,children:[e.jsx("h3",{className:`text-lg font-medium mb-4 ${t==="dark"?"text-white":"text-gray-900"}`,children:"Payment Methods"}),e.jsx("div",{className:"space-y-3",children:i.paymentMethodStats.map((m,f)=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(_r,{className:"h-4 w-4 text-gray-400 mr-2"}),e.jsx("span",{className:`text-sm ${t==="dark"?"text-white":"text-gray-900"}`,children:m._id.replace("_"," ").toUpperCase()})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:`text-sm font-medium ${t==="dark"?"text-white":"text-gray-900"}`,children:o(m.totalAmount)}),e.jsxs("div",{className:`text-xs ${t==="dark"?"text-gray-400":"text-gray-500"}`,children:[m.count," payments"]})]})]},m._id))})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:`${t==="dark"?"bg-gray-800":"bg-white"} shadow rounded-lg p-6`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:`text-lg font-medium ${t==="dark"?"text-white":"text-gray-900"}`,children:"Upcoming Renewals"}),e.jsxs("div",{className:"flex items-center text-sm text-green-600",children:[e.jsx(Oe,{className:"h-4 w-4 mr-1"}),o(i.upcomingRenewals.summary.totalValue)]})]}),e.jsx("div",{className:"space-y-3",children:i.upcomingRenewals.renewals.slice(0,5).map(m=>{var f,g;return e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:`text-sm font-medium ${t==="dark"?"text-white":"text-gray-900"}`,children:(f=m.clientId)==null?void 0:f.companyName}),e.jsx("div",{className:`text-xs ${t==="dark"?"text-gray-400":"text-gray-500"}`,children:(g=m.packageId)==null?void 0:g.name})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:`text-sm font-medium ${t==="dark"?"text-white":"text-gray-900"}`,children:o(m.basePrice)}),e.jsx("div",{className:"text-xs text-yellow-600",children:new Date(m.endDate).toLocaleDateString()})]})]},m._id)})}),i.upcomingRenewals.summary.count>5&&e.jsxs("div",{className:`mt-3 text-sm ${t==="dark"?"text-gray-400":"text-gray-500"}`,children:["+",i.upcomingRenewals.summary.count-5," more renewals"]})]}),e.jsxs("div",{className:`${t==="dark"?"bg-gray-800":"bg-white"} shadow rounded-lg p-6`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:`text-lg font-medium ${t==="dark"?"text-white":"text-gray-900"}`,children:"Overdue Invoices"}),e.jsxs("div",{className:"flex items-center text-sm text-red-600",children:[e.jsx(Jt,{className:"h-4 w-4 mr-1"}),o(i.overdueInvoices.summary.totalOverdue)]})]}),i.overdueInvoices.summary.count>0?e.jsx("div",{className:"space-y-3",children:i.overdueInvoices.byAge.map((m,f)=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Jt,{className:"h-4 w-4 text-red-400 mr-2"}),e.jsx("span",{className:`text-sm ${t==="dark"?"text-white":"text-gray-900"}`,children:m._id==="365+"?"365+ days":`${m._id}-${m._id+29} days`})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:`text-sm font-medium ${t==="dark"?"text-white":"text-gray-900"}`,children:o(m.totalAmount)}),e.jsxs("div",{className:`text-xs ${t==="dark"?"text-gray-400":"text-gray-500"}`,children:[m.count," invoices"]})]})]},f))}):e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Te,{className:"h-12 w-12 text-green-400 mx-auto mb-2"}),e.jsx("div",{className:`text-sm ${t==="dark"?"text-gray-400":"text-gray-500"}`,children:"No overdue invoices"})]})})]})]})]})]})})},BA=()=>{const{theme:t}=St(),[s,a]=y.useState([]),[r,n]=y.useState(!0),[i,l]=y.useState("all"),[c,o]=y.useState("all"),[d,x]=y.useState(!1),[u,m]=y.useState({renewalDays:10,overdueEnabled:!0,paymentFailureEnabled:!0,emailNotifications:!0,dashboardNotifications:!0}),[f,g]=y.useState({total:0,critical:0,warning:0,info:0,resolved:0});y.useEffect(()=>{h(),p()},[i,c]);const h=async()=>{try{n(!0);let F=[{id:"1",type:"subscription_expiring",priority:"high",title:"Subscription Expiring Soon",message:"TechCorp subscription expires in 3 days",clientName:"TechCorp Solutions",subscriptionCode:"SUB0001",daysRemaining:3,amount:299,createdAt:new Date(Date.now()-2*60*60*1e3),status:"active",actionRequired:!0},{id:"2",type:"invoice_overdue",priority:"critical",title:"Invoice Overdue",message:"Invoice INV-2024-0156 is 5 days overdue",clientName:"Manufacturing Co",invoiceNumber:"INV-2024-0156",daysOverdue:5,amount:1250,createdAt:new Date(Date.now()-5*24*60*60*1e3),status:"active",actionRequired:!0},{id:"3",type:"payment_failed",priority:"high",title:"Payment Failed",message:"Automatic payment failed for HealthCare Plus",clientName:"HealthCare Plus",paymentId:"PAY-2024-00234",amount:599,createdAt:new Date(Date.now()-1*60*60*1e3),status:"active",actionRequired:!0},{id:"4",type:"renewal_success",priority:"info",title:"Subscription Renewed",message:"Green Energy Corp subscription renewed successfully",clientName:"Green Energy Corp",subscriptionCode:"SUB0045",amount:799,createdAt:new Date(Date.now()-30*60*1e3),status:"resolved",actionRequired:!1},{id:"5",type:"subscription_expiring",priority:"medium",title:"Subscription Expiring",message:"StartupHub subscription expires in 7 days",clientName:"StartupHub",subscriptionCode:"SUB0023",daysRemaining:7,amount:149,createdAt:new Date(Date.now()-4*60*60*1e3),status:"active",actionRequired:!0}];i!=="all"&&(F=F.filter(R=>R.status===i)),c!=="all"&&(F=F.filter(R=>R.priority===c)),a(F)}catch(S){console.error("Error fetching alerts:",S),_.error("Failed to fetch alerts")}finally{n(!1)}},p=async()=>{try{g({total:12,critical:2,warning:4,info:3,resolved:3})}catch(S){console.error("Error fetching stats:",S)}},j=async S=>{try{a(F=>F.map(R=>R.id===S?{...R,status:"resolved"}:R)),_.success("Alert resolved successfully")}catch{_.error("Failed to resolve alert")}},v=async S=>{try{a(F=>F.filter(R=>R.id!==S)),_.success("Alert dismissed")}catch{_.error("Failed to dismiss alert")}},w=async S=>{try{_.success(`Reminder sent to ${S.clientName}`)}catch{_.error("Failed to send reminder")}},b=S=>({subscription_expiring:Oe,invoice_overdue:Jt,payment_failed:Qe,renewal_success:Te,payment_success:Te,subscription_cancelled:Qe})[S]||Da,A=S=>{const F={critical:"text-red-500 bg-red-100",high:"text-orange-500 bg-orange-100",medium:"text-yellow-500 bg-yellow-100",low:"text-blue-500 bg-blue-100",info:"text-green-500 bg-green-100"};return F[S]||F.info},N=S=>{const F={critical:"bg-red-100 text-red-800",high:"bg-orange-100 text-orange-800",medium:"bg-yellow-100 text-yellow-800",low:"bg-blue-100 text-blue-800",info:"bg-green-100 text-green-800"};return e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${F[S]}`,children:S.toUpperCase()})},C=S=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(S),k=S=>{const R=new Date-new Date(S),T=Math.floor(R/6e4),M=Math.floor(R/36e5),H=Math.floor(R/864e5);return H>0?`${H} day${H>1?"s":""} ago`:M>0?`${M} hour${M>1?"s":""} ago`:`${T} minute${T>1?"s":""} ago`};return e.jsx("div",{className:`min-h-screen ${t==="dark"?"bg-gray-900":"bg-gray-50"}`,children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:`text-3xl font-bold ${t==="dark"?"text-white":"text-gray-900"}`,children:"Billing Alerts"}),e.jsx("p",{className:`mt-2 ${t==="dark"?"text-gray-400":"text-gray-600"}`,children:"Monitor subscription renewals, overdue invoices, and payment notifications"})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("button",{onClick:()=>x(!0),className:`inline-flex items-center px-4 py-2 border rounded-md text-sm font-medium ${t==="dark"?"border-gray-600 text-gray-300 hover:bg-gray-700":"border-gray-300 text-gray-700 hover:bg-gray-50"}`,children:[e.jsx(Ta,{className:"w-4 h-4 mr-2"}),"Settings"]}),e.jsxs("button",{onClick:h,className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700",children:[e.jsx(Xt,{className:"w-4 h-4 mr-2"}),"Refresh"]})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-6 mb-8",children:[e.jsx("div",{className:`${t==="dark"?"bg-gray-800":"bg-white"} overflow-hidden shadow rounded-lg`,children:e.jsx("div",{className:"p-5",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(Da,{className:"h-6 w-6 text-gray-400"})}),e.jsx("div",{className:"ml-5 w-0 flex-1",children:e.jsxs("dl",{children:[e.jsx("dt",{className:`text-sm font-medium ${t==="dark"?"text-gray-400":"text-gray-500"} truncate`,children:"Total Alerts"}),e.jsx("dd",{className:`text-lg font-medium ${t==="dark"?"text-white":"text-gray-900"}`,children:f.total})]})})]})})}),e.jsx("div",{className:`${t==="dark"?"bg-gray-800":"bg-white"} overflow-hidden shadow rounded-lg`,children:e.jsx("div",{className:"p-5",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(hl,{className:"h-6 w-6 text-red-400"})}),e.jsx("div",{className:"ml-5 w-0 flex-1",children:e.jsxs("dl",{children:[e.jsx("dt",{className:`text-sm font-medium ${t==="dark"?"text-gray-400":"text-gray-500"} truncate`,children:"Critical"}),e.jsx("dd",{className:`text-lg font-medium ${t==="dark"?"text-white":"text-gray-900"}`,children:f.critical})]})})]})})}),e.jsx("div",{className:`${t==="dark"?"bg-gray-800":"bg-white"} overflow-hidden shadow rounded-lg`,children:e.jsx("div",{className:"p-5",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(Jt,{className:"h-6 w-6 text-orange-400"})}),e.jsx("div",{className:"ml-5 w-0 flex-1",children:e.jsxs("dl",{children:[e.jsx("dt",{className:`text-sm font-medium ${t==="dark"?"text-gray-400":"text-gray-500"} truncate`,children:"Warning"}),e.jsx("dd",{className:`text-lg font-medium ${t==="dark"?"text-white":"text-gray-900"}`,children:f.warning})]})})]})})}),e.jsx("div",{className:`${t==="dark"?"bg-gray-800":"bg-white"} overflow-hidden shadow rounded-lg`,children:e.jsx("div",{className:"p-5",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(Be,{className:"h-6 w-6 text-blue-400"})}),e.jsx("div",{className:"ml-5 w-0 flex-1",children:e.jsxs("dl",{children:[e.jsx("dt",{className:`text-sm font-medium ${t==="dark"?"text-gray-400":"text-gray-500"} truncate`,children:"Info"}),e.jsx("dd",{className:`text-lg font-medium ${t==="dark"?"text-white":"text-gray-900"}`,children:f.info})]})})]})})}),e.jsx("div",{className:`${t==="dark"?"bg-gray-800":"bg-white"} overflow-hidden shadow rounded-lg`,children:e.jsx("div",{className:"p-5",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(Te,{className:"h-6 w-6 text-green-400"})}),e.jsx("div",{className:"ml-5 w-0 flex-1",children:e.jsxs("dl",{children:[e.jsx("dt",{className:`text-sm font-medium ${t==="dark"?"text-gray-400":"text-gray-500"} truncate`,children:"Resolved"}),e.jsx("dd",{className:`text-lg font-medium ${t==="dark"?"text-white":"text-gray-900"}`,children:f.resolved})]})})]})})})]}),e.jsx("div",{className:`${t==="dark"?"bg-gray-800":"bg-white"} shadow rounded-lg mb-6`,children:e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium ${t==="dark"?"text-gray-300":"text-gray-700"} mb-2`,children:"Status Filter"}),e.jsxs("select",{value:i,onChange:S=>l(S.target.value),className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500 ${t==="dark"?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"}`,children:[e.jsx("option",{value:"all",children:"All Alerts"}),e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"resolved",children:"Resolved"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium ${t==="dark"?"text-gray-300":"text-gray-700"} mb-2`,children:"Priority Filter"}),e.jsxs("select",{value:c,onChange:S=>o(S.target.value),className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500 ${t==="dark"?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"}`,children:[e.jsx("option",{value:"all",children:"All Priorities"}),e.jsx("option",{value:"critical",children:"Critical"}),e.jsx("option",{value:"high",children:"High"}),e.jsx("option",{value:"medium",children:"Medium"}),e.jsx("option",{value:"low",children:"Low"}),e.jsx("option",{value:"info",children:"Info"})]})]}),e.jsx("div",{className:"flex items-end",children:e.jsx("button",{onClick:()=>{l("all"),o("all")},className:`px-4 py-2 border rounded-md text-sm font-medium ${t==="dark"?"border-gray-600 text-gray-300 hover:bg-gray-700":"border-gray-300 text-gray-700 hover:bg-gray-50"}`,children:"Clear Filters"})})]})})}),e.jsxs("div",{className:`${t==="dark"?"bg-gray-800":"bg-white"} shadow rounded-lg overflow-hidden`,children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsx("h3",{className:`text-lg font-medium ${t==="dark"?"text-white":"text-gray-900"}`,children:"Recent Alerts"})}),r?e.jsx("div",{className:"flex justify-center items-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600"})}):s.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[e.jsx(Te,{className:"h-12 w-12 text-green-400 mb-4"}),e.jsx("h3",{className:`text-lg font-medium ${t==="dark"?"text-white":"text-gray-900"} mb-2`,children:"No alerts found"}),e.jsx("p",{className:`text-sm ${t==="dark"?"text-gray-400":"text-gray-500"}`,children:"All systems are running smoothly"})]}):e.jsx("div",{className:"divide-y divide-gray-200",children:s.map(S=>{const F=b(S.type),R=A(S.priority);return e.jsx("div",{className:`p-6 ${t==="dark"?"hover:bg-gray-700":"hover:bg-gray-50"}`,children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx("div",{className:`flex-shrink-0 p-2 rounded-full ${R}`,children:e.jsx(F,{className:"h-5 w-5"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[e.jsx("h4",{className:`text-sm font-medium ${t==="dark"?"text-white":"text-gray-900"}`,children:S.title}),N(S.priority)]}),e.jsx("p",{className:`text-sm ${t==="dark"?"text-gray-300":"text-gray-600"} mb-2`,children:S.message}),e.jsxs("div",{className:"flex items-center space-x-4 text-xs text-gray-500",children:[e.jsxs("span",{className:"flex items-center",children:[e.jsx(Ue,{className:"h-3 w-3 mr-1"}),S.clientName]}),S.amount&&e.jsxs("span",{className:"flex items-center",children:[e.jsx(gt,{className:"h-3 w-3 mr-1"}),C(S.amount)]}),e.jsxs("span",{className:"flex items-center",children:[e.jsx(Be,{className:"h-3 w-3 mr-1"}),k(S.createdAt)]})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2 ml-4",children:[S.actionRequired&&S.status==="active"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>w(S),className:"text-blue-600 hover:text-blue-900",title:"Send Reminder",children:e.jsx(wt,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>j(S.id),className:"text-green-600 hover:text-green-900",title:"Mark as Resolved",children:e.jsx(Te,{className:"h-4 w-4"})})]}),e.jsx("button",{onClick:()=>v(S.id),className:"text-gray-400 hover:text-gray-600",title:"Dismiss",children:e.jsx(Qe,{className:"h-4 w-4"})})]})]})},S.id)})})]})]})})},Ku=()=>{Je();const{user:t}=Rt(),[s,a]=y.useState(!0),[r,n]=y.useState([]),[i,l]=y.useState(!1),[c,o]=y.useState(null),[d,x]=y.useState({name:"",code:"",startTime:"09:00",endTime:"18:00",breakDuration:60,breakStartTime:"13:00",isNightShift:!1,applicableDays:[1,2,3,4,5],location:"",department:"",description:""}),u=[{value:0,label:"Sunday"},{value:1,label:"Monday"},{value:2,label:"Tuesday"},{value:3,label:"Wednesday"},{value:4,label:"Thursday"},{value:5,label:"Friday"},{value:6,label:"Saturday"}];y.useEffect(()=>{m()},[]);const m=async()=>{try{a(!0);const v=await J.get("/work-schedule/shifts");n(v.data.data||[])}catch{_.error("Failed to fetch shift templates")}finally{a(!1)}},f=v=>{const{name:w,value:b,type:A,checked:N}=v.target;x(C=>({...C,[w]:A==="checkbox"?N:b}))},g=v=>{x(w=>{const b=[...w.applicableDays];return b.includes(v)?{...w,applicableDays:b.filter(A=>A!==v)}:{...w,applicableDays:[...b,v]}})},h=async v=>{var w,b;v.preventDefault();try{c?(await J.put(`/work-schedule/shifts/${c._id}`,d),_.success("Shift template updated successfully")):(await J.post("/work-schedule/shifts",d),_.success("Shift template created successfully")),l(!1),o(null),x({name:"",code:"",startTime:"09:00",endTime:"18:00",breakDuration:60,breakStartTime:"13:00",isNightShift:!1,applicableDays:[1,2,3,4,5],location:"",department:"",description:""}),m()}catch(A){_.error(((b=(w=A.response)==null?void 0:w.data)==null?void 0:b.message)||"Failed to save shift template")}},p=v=>{var w;o(v),x({name:v.name,code:v.code,startTime:v.startTime,endTime:v.endTime,breakDuration:v.breakDuration||60,breakStartTime:v.breakStartTime||"13:00",isNightShift:v.isNightShift||!1,applicableDays:v.applicableDays||[1,2,3,4,5],location:v.location||"",department:((w=v.department)==null?void 0:w._id)||"",description:v.description||""}),l(!0)},j=async v=>{var w,b;if(window.confirm("Are you sure you want to delete this shift template?"))try{await J.delete(`/work-schedule/shifts/${v}`),_.success("Shift template deleted successfully"),m()}catch(A){_.error(((b=(w=A.response)==null?void 0:w.data)==null?void 0:b.message)||"Failed to delete shift template")}};return s?e.jsx("div",{className:"flex items-center justify-center h-96",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 border-4 border-primary-600 border-t-transparent rounded-full animate-spin mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-400",children:"Loading shift templates..."})]})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-white",children:"Shift Templates"}),e.jsx("p",{className:"text-gray-400 mt-1",children:"Manage work shift patterns"})]}),(t.role==="admin"||t.role==="hr")&&e.jsxs("button",{onClick:()=>{o(null),l(!0)},className:"btn-primary flex items-center space-x-2",children:[e.jsx(qe,{size:20}),e.jsx("span",{children:"Add Shift Template"})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:r.map(v=>e.jsxs("div",{className:"card p-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-white",children:v.name}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Code: ",v.code]})]}),(t.role==="admin"||t.role==="hr")&&e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>p(v),className:"p-1 hover:bg-dark-800 rounded",children:e.jsx(ya,{size:16,className:"text-blue-400"})}),e.jsx("button",{onClick:()=>j(v._id),className:"p-1 hover:bg-dark-800 rounded",children:e.jsx(kt,{size:16,className:"text-red-400"})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[e.jsx(Be,{size:16,className:"text-gray-400"}),e.jsxs("span",{className:"text-gray-300",children:[v.startTime," - ",v.endTime]})]}),v.location&&e.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[e.jsx(Ra,{size:16,className:"text-gray-400"}),e.jsx("span",{className:"text-gray-300",children:v.location})]}),e.jsxs("div",{className:"text-sm text-gray-400",children:["Break: ",v.breakDuration," min"]}),v.isNightShift&&e.jsx("span",{className:"inline-block px-2 py-1 text-xs bg-purple-500/20 text-purple-400 rounded",children:"Night Shift"})]})]},v._id))}),i&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-dark-800 rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsx("div",{className:"p-6 border-b border-dark-700",children:e.jsx("h2",{className:"text-xl font-bold text-white",children:c?"Edit Shift Template":"Add Shift Template"})}),e.jsxs("form",{onSubmit:h,className:"p-6 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Name *"}),e.jsx("input",{type:"text",name:"name",value:d.name,onChange:f,className:"input-field",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Code *"}),e.jsx("input",{type:"text",name:"code",value:d.code,onChange:f,className:"input-field",required:!0,style:{textTransform:"uppercase"}})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Start Time *"}),e.jsx("input",{type:"time",name:"startTime",value:d.startTime,onChange:f,className:"input-field",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"End Time *"}),e.jsx("input",{type:"time",name:"endTime",value:d.endTime,onChange:f,className:"input-field",required:!0})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Break Duration (minutes)"}),e.jsx("input",{type:"number",name:"breakDuration",value:d.breakDuration,onChange:f,className:"input-field",min:"0"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Break Start Time"}),e.jsx("input",{type:"time",name:"breakStartTime",value:d.breakStartTime,onChange:f,className:"input-field"})]})]}),e.jsx("div",{children:e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",name:"isNightShift",checked:d.isNightShift,onChange:f,className:"rounded"}),e.jsx("span",{className:"text-sm text-gray-300",children:"Night Shift"})]})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Applicable Days"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:u.map(v=>e.jsx("button",{type:"button",onClick:()=>g(v.value),className:`px-3 py-1 rounded text-sm ${d.applicableDays.includes(v.value)?"bg-primary-600 text-white":"bg-dark-700 text-gray-300 hover:bg-dark-600"}`,children:v.label},v.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Location"}),e.jsx("input",{type:"text",name:"location",value:d.location,onChange:f,className:"input-field"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Description"}),e.jsx("textarea",{name:"description",value:d.description,onChange:f,className:"input-field",rows:"3"})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t border-dark-700",children:[e.jsx("button",{type:"button",onClick:()=>{l(!1),o(null)},className:"btn-secondary",children:"Cancel"}),e.jsx("button",{type:"submit",className:"btn-primary",children:c?"Update":"Create"})]})]})]})})]})},zA=({onClose:t,onSuccess:s})=>{const[a,r]=y.useState(null),[n,i]=y.useState(!1),[l,c]=y.useState(null),o=x=>{const u=x.target.files[0];if(u){if(!["application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.ms-excel","text/csv"].includes(u.type)){_.error("Please select an Excel (.xlsx, .xls) or CSV file");return}r(u)}},d=async()=>{var x,u;if(!a){_.error("Please select a file");return}try{i(!0);const m=new FormData;m.append("file",a);const f=await J.post("/work-schedule/rosters/upload",m,{headers:{"Content-Type":"multipart/form-data"}});c(f.data.data),_.success(f.data.message),s&&s()}catch(m){_.error(((u=(x=m.response)==null?void 0:x.data)==null?void 0:u.message)||"Failed to upload file")}finally{i(!1)}};return e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-dark-800 rounded-lg max-w-2xl w-full",children:[e.jsxs("div",{className:"p-6 border-b border-dark-700 flex items-center justify-between",children:[e.jsx("h2",{className:"text-xl font-bold text-white",children:"Bulk Upload Roster"}),e.jsx("button",{onClick:t,className:"p-1 hover:bg-dark-700 rounded",children:e.jsx(Le,{size:20,className:"text-gray-400"})})]}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Select Excel/CSV File"}),e.jsxs("div",{className:"border-2 border-dashed border-dark-700 rounded-lg p-6 text-center",children:[e.jsx("input",{type:"file",accept:".xlsx,.xls,.csv",onChange:o,className:"hidden",id:"file-upload"}),e.jsxs("label",{htmlFor:"file-upload",className:"cursor-pointer flex flex-col items-center space-y-2",children:[e.jsx(Nr,{size:48,className:"text-gray-400"}),e.jsx("span",{className:"text-gray-300",children:a?a.name:"Click to select file"}),e.jsx("span",{className:"text-sm text-gray-400",children:"Excel (.xlsx, .xls) or CSV files only"})]})]})]}),e.jsxs("div",{className:"bg-dark-900 p-4 rounded-lg",children:[e.jsx("p",{className:"text-sm text-gray-400 mb-2",children:"Expected columns:"}),e.jsxs("ul",{className:"text-xs text-gray-500 space-y-1 list-disc list-inside",children:[e.jsx("li",{children:"Employee Email (required)"}),e.jsx("li",{children:"Shift Code (required)"}),e.jsx("li",{children:"Effective Date (required)"}),e.jsx("li",{children:"Location (required)"}),e.jsx("li",{children:"End Date (optional)"})]})]}),l&&e.jsxs("div",{className:"bg-dark-900 p-4 rounded-lg",children:[e.jsxs("p",{className:"text-sm font-medium text-gray-300 mb-2",children:["Upload Results: ",l.success.length," successful, ",l.errors.length," errors"]}),l.errors.length>0&&e.jsx("div",{className:"mt-2 max-h-40 overflow-y-auto",children:l.errors.map((x,u)=>e.jsxs("div",{className:"text-xs text-red-400",children:["Row ",x.row,": ",x.error]},u))})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[e.jsx("button",{onClick:t,className:"btn-secondary",children:"Cancel"}),e.jsxs("button",{onClick:d,disabled:!a||n,className:"btn-primary flex items-center space-x-2",children:[e.jsx(js,{size:20}),e.jsx("span",{children:n?"Uploading...":"Upload"})]})]})]})]})})},Qu=()=>{const{user:t}=Rt(),[s,a]=y.useState(!0),[r,n]=y.useState([]),[i,l]=y.useState(!1),[c,o]=y.useState({startDate:"",endDate:"",location:"",status:"active"});y.useEffect(()=>{d()},[c]);const d=async()=>{try{a(!0);const x=new URLSearchParams;c.startDate&&x.append("startDate",c.startDate),c.endDate&&x.append("endDate",c.endDate),c.location&&x.append("location",c.location),c.status&&x.append("status",c.status);const u=await J.get(`/work-schedule/rosters?${x.toString()}`);n(u.data.data||[])}catch{_.error("Failed to fetch roster assignments")}finally{a(!1)}};return s?e.jsx("div",{className:"flex items-center justify-center h-96",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 border-4 border-primary-600 border-t-transparent rounded-full animate-spin mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-400",children:"Loading roster assignments..."})]})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-white",children:"Roster Management"}),e.jsx("p",{className:"text-gray-400 mt-1",children:"Manage employee work schedules"})]}),(t.role==="admin"||t.role==="hr")&&e.jsxs("div",{className:"flex space-x-3",children:[e.jsxs("button",{onClick:()=>l(!0),className:"btn-secondary flex items-center space-x-2",children:[e.jsx(js,{size:20}),e.jsx("span",{children:"Bulk Upload"})]}),e.jsxs("button",{className:"btn-primary flex items-center space-x-2",children:[e.jsx(qe,{size:20}),e.jsx("span",{children:"Add Assignment"})]})]})]}),e.jsx("div",{className:"card p-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Start Date"}),e.jsx("input",{type:"date",value:c.startDate,onChange:x=>o({...c,startDate:x.target.value}),className:"input-field"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"End Date"}),e.jsx("input",{type:"date",value:c.endDate,onChange:x=>o({...c,endDate:x.target.value}),className:"input-field"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Location"}),e.jsx("input",{type:"text",value:c.location,onChange:x=>o({...c,location:x.target.value}),className:"input-field",placeholder:"Filter by location"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Status"}),e.jsxs("select",{value:c.status,onChange:x=>o({...c,status:x.target.value}),className:"input-field",children:[e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"inactive",children:"Inactive"}),e.jsx("option",{value:"cancelled",children:"Cancelled"})]})]})]})}),e.jsxs("div",{className:"card overflow-x-auto",children:[e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-dark-700",children:[e.jsx("th",{className:"text-left p-4 text-sm font-medium text-gray-300",children:"Employee"}),e.jsx("th",{className:"text-left p-4 text-sm font-medium text-gray-300",children:"Shift"}),e.jsx("th",{className:"text-left p-4 text-sm font-medium text-gray-300",children:"Location"}),e.jsx("th",{className:"text-left p-4 text-sm font-medium text-gray-300",children:"Effective Date"}),e.jsx("th",{className:"text-left p-4 text-sm font-medium text-gray-300",children:"End Date"}),e.jsx("th",{className:"text-left p-4 text-sm font-medium text-gray-300",children:"Status"})]})}),e.jsx("tbody",{children:r.map(x=>{var u,m;return e.jsxs("tr",{className:"border-b border-dark-700 hover:bg-dark-800",children:[e.jsx("td",{className:"p-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_t,{size:16,className:"text-gray-400"}),e.jsx("span",{className:"text-white",children:x.employeeName||`${(u=x.employeeId)==null?void 0:u.firstName} ${(m=x.employeeId)==null?void 0:m.lastName}`})]})}),e.jsx("td",{className:"p-4",children:x.shiftTemplateId?e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{size:16,className:"text-gray-400"}),e.jsxs("span",{className:"text-gray-300",children:[x.shiftTemplateId.name," (",x.shiftTemplateId.code,")"]})]}):e.jsx("span",{className:"text-gray-400",children:"-"})}),e.jsx("td",{className:"p-4 text-gray-300",children:x.location}),e.jsx("td",{className:"p-4 text-gray-300",children:new Date(x.effectiveDate).toLocaleDateString()}),e.jsx("td",{className:"p-4 text-gray-300",children:x.endDate?new Date(x.endDate).toLocaleDateString():"-"}),e.jsx("td",{className:"p-4",children:e.jsx("span",{className:`px-2 py-1 text-xs rounded ${x.status==="active"?"bg-green-500/20 text-green-400":x.status==="inactive"?"bg-gray-500/20 text-gray-400":"bg-red-500/20 text-red-400"}`,children:x.status})})]},x._id)})})]}),r.length===0&&e.jsx("div",{className:"p-8 text-center text-gray-400",children:"No roster assignments found"})]}),i&&e.jsx(zA,{onClose:()=>l(!1),onSuccess:()=>{l(!1),d()}})]})},em=()=>{const[t,s]=y.useState(new Date),[a,r]=y.useState([]),[n,i]=y.useState(!0),[l,c]=y.useState(null);y.useEffect(()=>{o()},[t]);const o=async()=>{try{i(!0);const h=new Date(t.getFullYear(),t.getMonth(),1),p=new Date(t.getFullYear(),t.getMonth()+1,0),j=await J.get(`/work-schedule/calendar?startDate=${h.toISOString()}&endDate=${p.toISOString()}`);r(j.data.data||[])}catch{_.error("Failed to fetch roster calendar")}finally{i(!1)}},d=()=>{const h=t.getFullYear(),p=t.getMonth(),j=new Date(h,p,1),w=new Date(h,p+1,0).getDate(),b=j.getDay(),A=[];for(let N=0;N<b;N++)A.push(null);for(let N=1;N<=w;N++)A.push(new Date(h,p,N));return A},x=h=>h?a.filter(p=>{const j=new Date(p.effectiveDate),v=p.endDate?new Date(p.endDate):new Date("2099-12-31");return h>=j&&h<=v}):[],u=h=>{s(p=>{const j=new Date(p);return j.setMonth(p.getMonth()+h),j})},m=d(),f=["January","February","March","April","May","June","July","August","September","October","November","December"],g=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-white",children:"Roster Calendar"}),e.jsx("p",{className:"text-gray-400 mt-1",children:"View work schedules by date"})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("button",{onClick:()=>u(-1),className:"p-2 hover:bg-dark-800 rounded-lg",children:e.jsx(Bl,{size:20,className:"text-gray-400"})}),e.jsxs("h2",{className:"text-lg font-semibold text-white min-w-[200px] text-center",children:[f[t.getMonth()]," ",t.getFullYear()]}),e.jsx("button",{onClick:()=>u(1),className:"p-2 hover:bg-dark-800 rounded-lg",children:e.jsx(Nn,{size:20,className:"text-gray-400"})})]})]}),e.jsx("div",{className:"card overflow-x-auto",children:e.jsxs("div",{className:"min-w-full",children:[e.jsx("div",{className:"grid grid-cols-7 gap-1 mb-2",children:g.map(h=>e.jsx("div",{className:"p-2 text-center text-sm font-medium text-gray-400",children:h},h))}),e.jsx("div",{className:"grid grid-cols-7 gap-1",children:m.map((h,p)=>{const j=x(h),v=h&&h.toDateString()===new Date().toDateString(),w=h&&l&&h.toDateString()===l.toDateString();return e.jsx("div",{onClick:()=>h&&c(h),className:`min-h-[100px] p-2 border border-dark-700 rounded ${h?v?"bg-primary-500/10 border-primary-500":w?"bg-blue-500/10 border-blue-500":"bg-dark-800 hover:bg-dark-700 cursor-pointer":"bg-dark-900"}`,children:h&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:`text-sm font-medium mb-1 ${v?"text-primary-400":"text-gray-300"}`,children:h.getDate()}),e.jsxs("div",{className:"space-y-1",children:[j.slice(0,2).map(b=>{var A,N,C;return e.jsxs("div",{className:"text-xs bg-dark-700 p-1 rounded truncate",title:`${b.employeeName} - ${(A=b.shiftTemplateId)==null?void 0:A.name}`,children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(_t,{size:10,className:"text-gray-400"}),e.jsx("span",{className:"text-gray-300 truncate",children:(N=b.employeeName)==null?void 0:N.split(" ")[0]})]}),e.jsxs("div",{className:"flex items-center space-x-1 mt-0.5",children:[e.jsx(Be,{size:10,className:"text-gray-400"}),e.jsx("span",{className:"text-gray-400 text-[10px]",children:(C=b.shiftTemplateId)==null?void 0:C.code})]})]},b._id)}),j.length>2&&e.jsxs("div",{className:"text-xs text-gray-500",children:["+",j.length-2," more"]})]})]})},p)})})]})}),l&&e.jsxs("div",{className:"card",children:[e.jsxs("h3",{className:"text-lg font-semibold text-white mb-4",children:["Assignments for ",l.toLocaleDateString()]}),e.jsx("div",{className:"space-y-2",children:x(l).map(h=>{var p,j,v,w;return e.jsx("div",{className:"p-3 bg-dark-900 rounded-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-white font-medium",children:h.employeeName}),e.jsxs("p",{className:"text-sm text-gray-400",children:[(p=h.shiftTemplateId)==null?void 0:p.name," (",(j=h.shiftTemplateId)==null?void 0:j.code,")"]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm text-gray-300",children:h.location}),e.jsxs("p",{className:"text-xs text-gray-400",children:[(v=h.shiftTemplateId)==null?void 0:v.startTime," - ",(w=h.shiftTemplateId)==null?void 0:w.endTime]})]})]})},h._id)})})]})]})},tm=()=>{const t=Je(),{user:s}=Rt(),[a,r]=y.useState(!1),[n,i]=y.useState([]),[l,c]=y.useState({requestedShiftTemplateId:"",requestedDate:"",reason:""});y.useEffect(()=>{o()},[]);const o=async()=>{try{const u=await J.get("/work-schedule/shifts?isActive=true");i(u.data.data||[])}catch{_.error("Failed to fetch shift templates")}},d=u=>{c({...l,[u.target.name]:u.target.value})},x=async u=>{var m,f;if(u.preventDefault(),!l.requestedShiftTemplateId||!l.requestedDate||!l.reason){_.error("Please fill all required fields");return}try{r(!0),await J.post("/work-schedule/change-requests",l),_.success("Roster change request submitted successfully"),t("/work-schedule/change-requests")}catch(g){_.error(((f=(m=g.response)==null?void 0:m.data)==null?void 0:f.message)||"Failed to submit request")}finally{r(!1)}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("button",{onClick:()=>t("/work-schedule"),className:"p-2 hover:bg-dark-800 rounded-lg",children:e.jsx(xt,{size:20,className:"text-gray-400"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-white",children:"Request Roster Change"}),e.jsx("p",{className:"text-gray-400 mt-1",children:"Submit a request to change your work schedule"})]})]}),e.jsx("form",{onSubmit:x,className:"max-w-2xl",children:e.jsxs("div",{className:"card space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Requested Shift Template *"}),e.jsxs("select",{name:"requestedShiftTemplateId",value:l.requestedShiftTemplateId,onChange:d,className:"input-field",required:!0,children:[e.jsx("option",{value:"",children:"Select shift template"}),n.map(u=>e.jsxs("option",{value:u._id,children:[u.name," (",u.code,") - ",u.startTime," to ",u.endTime]},u._id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Requested Date *"}),e.jsx("input",{type:"date",name:"requestedDate",value:l.requestedDate,onChange:d,className:"input-field",min:new Date().toISOString().split("T")[0],required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Reason *"}),e.jsx("textarea",{name:"reason",value:l.reason,onChange:d,className:"input-field",rows:"4",placeholder:"Please provide a reason for the roster change request...",required:!0})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t border-dark-700",children:[e.jsx("button",{type:"button",onClick:()=>t("/work-schedule"),className:"btn-secondary",children:"Cancel"}),e.jsxs("button",{type:"submit",disabled:a,className:"btn-primary flex items-center space-x-2",children:[e.jsx(Be,{size:20}),e.jsx("span",{children:a?"Submitting...":"Submit Request"})]})]})]})})]})},sm=()=>{const[t,s]=y.useState(!0),[a,r]=y.useState([]),[n,i]=y.useState(!1),[l,c]=y.useState(null),[o,d]=y.useState({leaveType:"",minBalance:0,maxDaysPerRequest:0,maxDaysPerYear:0,calculationMethod:"daily_rate",calculationRate:0,isActive:!0,eligibilityCriteria:{minServiceMonths:0,allowedDepartments:[],allowedDesignations:[]}});y.useEffect(()=>{x()},[]);const x=async()=>{try{s(!0);const p=await J.get("/leave-encashment/rules");r(p.data.data||[])}catch{_.error("Failed to fetch encashment rules")}finally{s(!1)}},u=p=>{const{name:j,value:v,type:w,checked:b}=p.target;if(j.startsWith("eligibilityCriteria.")){const A=j.split(".")[1];d(N=>({...N,eligibilityCriteria:{...N.eligibilityCriteria,[A]:w==="number"?parseFloat(v)||0:v}}))}else d(A=>({...A,[j]:w==="checkbox"?b:w==="number"?parseFloat(v)||0:v}))},m=async p=>{var j,v;p.preventDefault();try{l?(await J.put(`/leave-encashment/rules/${l._id}`,o),_.success("Encashment rule updated successfully")):(await J.post("/leave-encashment/rules",o),_.success("Encashment rule created successfully")),i(!1),c(null),h(),x()}catch(w){_.error(((v=(j=w.response)==null?void 0:j.data)==null?void 0:v.message)||"Failed to save encashment rule")}},f=p=>{c(p),d({leaveType:p.leaveType||"",minBalance:p.minBalance||0,maxDaysPerRequest:p.maxDaysPerRequest||0,maxDaysPerYear:p.maxDaysPerYear||0,calculationMethod:p.calculationMethod||"daily_rate",calculationRate:p.calculationRate||0,isActive:p.isActive!==void 0?p.isActive:!0,eligibilityCriteria:p.eligibilityCriteria||{minServiceMonths:0,allowedDepartments:[],allowedDesignations:[]}}),i(!0)},g=async p=>{if(window.confirm("Are you sure you want to delete this rule?"))try{await J.delete(`/leave-encashment/rules/${p}`),_.success("Encashment rule deleted successfully"),x()}catch{_.error("Failed to delete encashment rule")}},h=()=>{d({leaveType:"",minBalance:0,maxDaysPerRequest:0,maxDaysPerYear:0,calculationMethod:"daily_rate",calculationRate:0,isActive:!0,eligibilityCriteria:{minServiceMonths:0,allowedDepartments:[],allowedDesignations:[]}})};return t?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"text-gray-400",children:"Loading..."})}):e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-white",children:"Leave Encashment Rules"}),e.jsxs("button",{onClick:()=>{h(),c(null),i(!0)},className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:[e.jsx(qe,{size:20}),"Add Rule"]})]}),e.jsx("div",{className:"bg-gray-800 rounded-lg overflow-hidden",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-300",children:"Leave Type"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-300",children:"Min Balance"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-300",children:"Max Days/Request"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-300",children:"Calculation Method"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-300",children:"Status"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-300",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-700",children:a.map(p=>e.jsxs("tr",{className:"hover:bg-gray-750",children:[e.jsx("td",{className:"px-4 py-3 text-sm text-gray-300",children:p.leaveType}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-300",children:p.minBalance}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-300",children:p.maxDaysPerRequest}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-300",children:p.calculationMethod}),e.jsx("td",{className:"px-4 py-3",children:p.isActive?e.jsxs("span",{className:"flex items-center gap-1 text-green-400",children:[e.jsx(Te,{size:16}),"Active"]}):e.jsxs("span",{className:"flex items-center gap-1 text-red-400",children:[e.jsx(Qe,{size:16}),"Inactive"]})}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>f(p),className:"p-1 text-blue-400 hover:text-blue-300",children:e.jsx(ya,{size:16})}),e.jsx("button",{onClick:()=>g(p._id),className:"p-1 text-red-400 hover:text-red-300",children:e.jsx(kt,{size:16})})]})})]},p._id))})]})}),n&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:l?"Edit Encashment Rule":"Create Encashment Rule"}),e.jsxs("form",{onSubmit:m,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Leave Type"}),e.jsx("input",{type:"text",name:"leaveType",value:o.leaveType,onChange:u,required:!0,className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Min Balance"}),e.jsx("input",{type:"number",name:"minBalance",value:o.minBalance,onChange:u,required:!0,className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Max Days/Request"}),e.jsx("input",{type:"number",name:"maxDaysPerRequest",value:o.maxDaysPerRequest,onChange:u,required:!0,className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Max Days/Year"}),e.jsx("input",{type:"number",name:"maxDaysPerYear",value:o.maxDaysPerYear,onChange:u,required:!0,className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Calculation Method"}),e.jsxs("select",{name:"calculationMethod",value:o.calculationMethod,onChange:u,className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white",children:[e.jsx("option",{value:"daily_rate",children:"Daily Rate"}),e.jsx("option",{value:"monthly_salary",children:"Monthly Salary"}),e.jsx("option",{value:"fixed_amount",children:"Fixed Amount"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Calculation Rate"}),e.jsx("input",{type:"number",name:"calculationRate",value:o.calculationRate,onChange:u,required:!0,className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Min Service Months"}),e.jsx("input",{type:"number",name:"eligibilityCriteria.minServiceMonths",value:o.eligibilityCriteria.minServiceMonths,onChange:u,className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",name:"isActive",checked:o.isActive,onChange:u,className:"w-4 h-4"}),e.jsx("label",{className:"text-sm font-medium text-gray-300",children:"Active"})]}),e.jsxs("div",{className:"flex gap-3 justify-end",children:[e.jsx("button",{type:"button",onClick:()=>{i(!1),c(null),h()},className:"px-4 py-2 bg-gray-700 text-white rounded-lg hover:bg-gray-600",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:l?"Update":"Create"})]})]})]})})]})},am=()=>{const[t,s]=y.useState(!0),[a,r]=y.useState([]),{user:n}=Rt();y.useEffect(()=>{i()},[]);const i=async()=>{try{s(!0);const c=await J.get("/leave-encashment/requests");r(c.data.data||[])}catch{_.error("Failed to fetch encashment requests")}finally{s(!1)}},l=c=>{const o={pending:{color:"yellow",icon:Be},approved:{color:"green",icon:Te},rejected:{color:"red",icon:Qe},processed:{color:"blue",icon:gt}},d=o[c]||o.pending,x=d.icon;return e.jsxs("span",{className:`flex items-center gap-1 text-${d.color}-400`,children:[e.jsx(x,{size:16}),c.charAt(0).toUpperCase()+c.slice(1)]})};return t?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"text-gray-400",children:"Loading..."})}):e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"flex justify-between items-center mb-6",children:e.jsx("h1",{className:"text-2xl font-bold text-white",children:"Leave Encashment History"})}),e.jsx("div",{className:"bg-blue-900/30 border border-blue-700 rounded-lg p-4 mb-6",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(y0,{size:20,className:"text-blue-400 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-white font-medium mb-1",children:"Automatic Leave Encashment"}),e.jsx("p",{className:"text-gray-300 text-sm",children:"Leave encashment is processed automatically as per company policy. You will be notified when encashment is processed based on your leave balance and eligibility."})]})]})}),e.jsxs("div",{className:"bg-gray-800 rounded-lg overflow-hidden",children:[e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-300",children:"Leave Type"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-300",children:"Days"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-300",children:"Amount"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-300",children:"Status"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-300",children:"Type"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-300",children:"Request Date"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-700",children:a.map(c=>{var o;return e.jsxs("tr",{className:"hover:bg-gray-750",children:[e.jsx("td",{className:"px-4 py-3 text-sm text-gray-300",children:c.leaveType}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-300",children:c.numberOfDays}),e.jsxs("td",{className:"px-4 py-3 text-sm text-gray-300",children:["â‚¹",((o=c.totalAmount)==null?void 0:o.toLocaleString())||"0"]}),e.jsx("td",{className:"px-4 py-3",children:l(c.status)}),e.jsx("td",{className:"px-4 py-3",children:c.isAutomatic?e.jsx("span",{className:"text-xs px-2 py-1 bg-blue-900/50 text-blue-300 rounded-full",children:"Automatic"}):e.jsx("span",{className:"text-xs px-2 py-1 bg-gray-600 text-gray-300 rounded-full",children:"Manual"})}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-300",children:new Date(c.createdAt).toLocaleDateString()})]},c._id)})})]}),a.length===0&&e.jsx("div",{className:"text-center py-8 text-gray-400",children:"No encashment requests found"})]})]})},rm=()=>{const[t,s]=y.useState(!0),[a,r]=y.useState([]),[n,i]=y.useState({status:"",leaveType:"",startDate:"",endDate:""});y.useEffect(()=>{l()},[n]);const l=async()=>{try{s(!0);const x={};n.status&&(x.status=n.status),n.leaveType&&(x.leaveType=n.leaveType),n.startDate&&(x.startDate=n.startDate),n.endDate&&(x.endDate=n.endDate);const u=await J.get("/leave-encashment/requests",{params:x});r(u.data.data||[])}catch{_.error("Failed to fetch encashment history")}finally{s(!1)}},c=x=>{const{name:u,value:m}=x.target;i(f=>({...f,[u]:m}))},o=x=>{const u={pending:{color:"yellow",icon:Be},approved:{color:"green",icon:Te},rejected:{color:"red",icon:Qe},processed:{color:"blue",icon:gt}},m=u[x]||u.pending,f=m.icon;return e.jsxs("span",{className:`flex items-center gap-1 text-${m.color}-400`,children:[e.jsx(f,{size:16}),x.charAt(0).toUpperCase()+x.slice(1)]})},d=a.filter(x=>x.status==="processed").reduce((x,u)=>x+(u.encashmentAmount||0),0);return t?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"text-gray-400",children:"Loading..."})}):e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-white",children:"Encashment History"}),e.jsxs("div",{className:"flex items-center gap-2 text-gray-400",children:[e.jsx(gt,{size:20}),e.jsxs("span",{className:"text-lg font-semibold",children:["Total Processed: â‚¹",d.toLocaleString()]})]})]}),e.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 mb-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(Vs,{size:20,className:"text-gray-400"}),e.jsx("h2",{className:"text-lg font-semibold text-white",children:"Filters"})]}),e.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Status"}),e.jsxs("select",{name:"status",value:n.status,onChange:c,className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white",children:[e.jsx("option",{value:"",children:"All"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"approved",children:"Approved"}),e.jsx("option",{value:"rejected",children:"Rejected"}),e.jsx("option",{value:"processed",children:"Processed"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Leave Type"}),e.jsx("input",{type:"text",name:"leaveType",value:n.leaveType,onChange:c,placeholder:"Filter by leave type",className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Start Date"}),e.jsx("input",{type:"date",name:"startDate",value:n.startDate,onChange:c,className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"End Date"}),e.jsx("input",{type:"date",name:"endDate",value:n.endDate,onChange:c,className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white"})]})]})]}),e.jsxs("div",{className:"bg-gray-800 rounded-lg overflow-hidden",children:[e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-300",children:"Leave Type"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-300",children:"Days"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-300",children:"Amount"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-300",children:"Status"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-300",children:"Request Date"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-300",children:"Processed Date"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-700",children:a.map(x=>{var u;return e.jsxs("tr",{className:"hover:bg-gray-750",children:[e.jsx("td",{className:"px-4 py-3 text-sm text-gray-300",children:x.leaveType}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-300",children:x.numberOfDays}),e.jsxs("td",{className:"px-4 py-3 text-sm text-gray-300",children:["â‚¹",((u=x.encashmentAmount)==null?void 0:u.toLocaleString())||"0"]}),e.jsx("td",{className:"px-4 py-3",children:o(x.status)}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-300",children:new Date(x.createdAt).toLocaleDateString()}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-300",children:x.processedDate?new Date(x.processedDate).toLocaleDateString():"-"})]},x._id)})})]}),a.length===0&&e.jsx("div",{className:"text-center py-8 text-gray-400",children:"No encashment requests found"})]})]})},UA=()=>{const[t,s]=y.useState(!0),[a,r]=y.useState([]),[n,i]=y.useState(!1),[l,c]=y.useState(!1),{user:o}=Rt(),[d,x]=y.useState({leaveType:"",isAutomatic:!0,automaticTrigger:"year_end",automaticTriggerDate:"",automaticTriggerThreshold:0,automaticEncashmentPercentage:100,requiresApproval:!0,approvalLevels:1,calculationMethod:"basic_salary",ratePerDay:0,minBalance:0,maxEncashable:0,maxEncashablePercentage:100});y.useEffect(()=>{u()},[]);const u=async()=>{var j,v,w,b;try{s(!0);const A=await J.get("/leave-encashment/rules");r(A.data.data||[])}catch(A){console.error("Error fetching encashment rules:",A),((j=A.response)==null?void 0:j.status)===403?_.error("Access denied. You need admin or HR role to access this page."):((v=A.response)==null?void 0:v.status)===401?_.error("Please log in to access this page."):_.error(((b=(w=A.response)==null?void 0:w.data)==null?void 0:b.message)||"Failed to fetch encashment rules")}finally{s(!1)}},m=j=>{const{name:v,value:w,type:b,checked:A}=j.target;x(N=>({...N,[v]:b==="checkbox"?A:b==="number"?parseFloat(w)||0:w}))},f=async j=>{var v,w;j.preventDefault();try{await J.post("/leave-encashment/rules",d),_.success("Automatic encashment rule created successfully"),i(!1),x({leaveType:"",isAutomatic:!0,automaticTrigger:"year_end",automaticTriggerDate:"",automaticTriggerThreshold:0,automaticEncashmentPercentage:100,requiresApproval:!0,approvalLevels:1,calculationMethod:"basic_salary",ratePerDay:0,minBalance:0,maxEncashable:0,maxEncashablePercentage:100}),u()}catch(b){_.error(((w=(v=b.response)==null?void 0:v.data)==null?void 0:w.message)||"Failed to create rule")}},g=async(j="year_end")=>{var v,w;try{c(!0);const b=await J.post("/leave-encashment/automatic/process",{triggerType:j});_.success(b.data.message||`Processed ${b.data.processed} encashments`),u()}catch(b){_.error(((w=(v=b.response)==null?void 0:v.data)==null?void 0:w.message)||"Failed to process automatic encashment")}finally{c(!1)}},h=j=>({year_end:Oe,employment_end:Xo,specific_date:Oe,leave_balance_threshold:Ks})[j]||Oe,p=j=>({year_end:"Year End",employment_end:"Employment End",specific_date:"Specific Date",leave_balance_threshold:"Balance Threshold"})[j]||j;return t?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"text-gray-400",children:"Loading..."})}):!o||o.role!=="admin"&&o.role!=="hr"&&o.role!=="company_admin"?e.jsx("div",{className:"p-6",children:e.jsx("div",{className:"bg-red-900/30 border border-red-700 rounded-lg p-6",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(mt,{size:24,className:"text-red-400 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-white font-semibold text-lg mb-2",children:"Access Denied"}),e.jsx("p",{className:"text-gray-300",children:"You don't have permission to access automatic encashment settings. This page is only available to administrators and HR personnel."}),e.jsxs("p",{className:"text-gray-400 text-sm mt-2",children:["Current role: ",e.jsx("span",{className:"font-medium",children:(o==null?void 0:o.role)||"Unknown"})]})]})]})})}):e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-white",children:"Automatic Leave Encashment Settings"}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{onClick:()=>g("year_end"),disabled:l,className:"flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50",children:[e.jsx(zl,{size:20}),"Process Year-End"]}),e.jsxs("button",{onClick:()=>i(!0),className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:[e.jsx(qe,{size:20}),"New Rule"]})]})]}),e.jsxs("div",{className:"grid gap-4 mb-6",children:[a.filter(j=>j.isAutomatic).map(j=>{const v=h(j.automaticTrigger);return e.jsx("div",{className:"bg-gray-800 rounded-lg p-4 border border-gray-700",children:e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("h3",{className:"text-lg font-semibold text-white",children:j.leaveType}),e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${j.isActive?"bg-green-900/50 text-green-300":"bg-red-900/50 text-red-300"}`,children:j.isActive?"Active":"Inactive"}),e.jsx("span",{className:"px-2 py-1 text-xs bg-blue-900/50 text-blue-300 rounded-full",children:"Automatic"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-300",children:[e.jsx(v,{size:16}),e.jsxs("span",{children:["Trigger: ",p(j.automaticTrigger)]})]}),e.jsxs("div",{className:"text-gray-300",children:["Encashment: ",j.automaticEncashmentPercentage,"%"]}),j.automaticTriggerDate&&e.jsxs("div",{className:"text-gray-300",children:["Date: ",new Date(j.automaticTriggerDate).toLocaleDateString()]}),j.automaticTriggerThreshold>0&&e.jsxs("div",{className:"text-gray-300",children:["Threshold: ",j.automaticTriggerThreshold," days"]}),e.jsxs("div",{className:"text-gray-300",children:["Approval: ",j.requiresApproval?"Required":"Auto-approved"]}),e.jsxs("div",{className:"text-gray-300",children:["Max Days: ",j.maxEncashable||"Unlimited"]})]})]})})},j._id)}),a.filter(j=>j.isAutomatic).length===0&&e.jsx("div",{className:"text-center py-8 text-gray-400 bg-gray-800 rounded-lg",children:"No automatic encashment rules configured"})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-white mb-4",children:"Manual Encashment Rules"}),e.jsxs("div",{className:"grid gap-4",children:[a.filter(j=>!j.isAutomatic).map(j=>e.jsx("div",{className:"bg-gray-800 rounded-lg p-4 border border-gray-700 opacity-75",children:e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("h3",{className:"text-lg font-semibold text-white",children:j.leaveType}),e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${j.isActive?"bg-green-900/50 text-green-300":"bg-red-900/50 text-red-300"}`,children:j.isActive?"Active":"Inactive"}),e.jsx("span",{className:"px-2 py-1 text-xs bg-gray-600 text-gray-300 rounded-full",children:"Manual"})]})},j._id)),a.filter(j=>!j.isAutomatic).length===0&&e.jsx("div",{className:"text-center py-8 text-gray-400 bg-gray-800 rounded-lg",children:"No manual encashment rules configured"})]})]}),n&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:"Create Automatic Encashment Rule"}),e.jsxs("form",{onSubmit:f,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Leave Type"}),e.jsxs("select",{name:"leaveType",value:d.leaveType,onChange:m,required:!0,className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white",children:[e.jsx("option",{value:"",children:"Select Leave Type"}),e.jsx("option",{value:"Personal Leave",children:"Personal Leave"}),e.jsx("option",{value:"Sick Leave",children:"Sick Leave"}),e.jsx("option",{value:"Comp Offs",children:"Comp Offs"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Calculation Method"}),e.jsxs("select",{name:"calculationMethod",value:d.calculationMethod,onChange:m,className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white",children:[e.jsx("option",{value:"basic_salary",children:"Basic Salary"}),e.jsx("option",{value:"gross_salary",children:"Gross Salary"}),e.jsx("option",{value:"fixed_rate",children:"Fixed Rate"}),e.jsx("option",{value:"custom",children:"Custom"})]})]}),d.calculationMethod==="fixed_rate"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Rate Per Day (â‚¹)"}),e.jsx("input",{type:"number",name:"ratePerDay",value:d.ratePerDay,onChange:m,min:"0",step:"0.01",className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Minimum Balance (days)"}),e.jsx("input",{type:"number",name:"minBalance",value:d.minBalance,onChange:m,min:"0",className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Maximum Encashable (days, 0 = unlimited)"}),e.jsx("input",{type:"number",name:"maxEncashable",value:d.maxEncashable,onChange:m,min:"0",className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Automatic Trigger"}),e.jsxs("select",{name:"automaticTrigger",value:d.automaticTrigger,onChange:m,className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white",children:[e.jsx("option",{value:"year_end",children:"Year End"}),e.jsx("option",{value:"employment_end",children:"Employment End"}),e.jsx("option",{value:"specific_date",children:"Specific Date"}),e.jsx("option",{value:"leave_balance_threshold",children:"Leave Balance Threshold"})]})]}),d.automaticTrigger==="specific_date"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Trigger Date"}),e.jsx("input",{type:"date",name:"automaticTriggerDate",value:d.automaticTriggerDate,onChange:m,className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white"})]}),d.automaticTrigger==="leave_balance_threshold"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Balance Threshold (days)"}),e.jsx("input",{type:"number",name:"automaticTriggerThreshold",value:d.automaticTriggerThreshold,onChange:m,min:"1",className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:["Encashment Percentage (",d.automaticEncashmentPercentage,"%)"]}),e.jsx("input",{type:"range",name:"automaticEncashmentPercentage",value:d.automaticEncashmentPercentage,onChange:m,min:"1",max:"100",className:"w-full"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"checkbox",name:"requiresApproval",id:"requiresApproval",checked:d.requiresApproval,onChange:m,className:"rounded"}),e.jsx("label",{htmlFor:"requiresApproval",className:"text-sm text-gray-300",children:"Requires Approval"})]}),e.jsxs("div",{className:"flex gap-3 justify-end",children:[e.jsx("button",{type:"button",onClick:()=>i(!1),className:"px-4 py-2 bg-gray-700 text-white rounded-lg hover:bg-gray-600",children:"Cancel"}),e.jsxs("button",{type:"submit",className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:[e.jsx(Rs,{size:20}),"Create Rule"]})]})]})]})})]})},VA=()=>{const[t,s]=y.useState(!1),[a,r]=y.useState("entitlement"),[n,i]=y.useState({year:new Date().getFullYear(),department:"",employee:"",leaveType:""}),[l,c]=y.useState(null),o=u=>{const{name:m,value:f}=u.target;i(g=>({...g,[m]:f}))},d=async()=>{try{s(!0);const u={...n};let m="";switch(a){case"entitlement":m="/reports/leave/entitlement";break;case"balance":m="/reports/leave/balance";break;case"utilization":m="/reports/leave/utilization";break;default:m="/reports/leave/entitlement"}const f=await J.get(m,{params:u});c(f.data),_.success("Report generated successfully")}catch{_.error("Failed to generate report")}finally{s(!1)}},x=async u=>{try{const m={...n,export:u};let f="";switch(a){case"entitlement":f="/reports/leave/entitlement";break;case"balance":f="/reports/leave/balance";break;case"utilization":f="/reports/leave/utilization";break;default:f="/reports/leave/entitlement"}const g=await J.get(f,{params:m,responseType:"blob"}),h=window.URL.createObjectURL(new Blob([g.data])),p=document.createElement("a");p.href=h,p.setAttribute("download",`leave-report-${a}-${Date.now()}.${u}`),document.body.appendChild(p),p.click(),p.remove(),_.success(`Report exported as ${u.toUpperCase()}`)}catch{_.error("Failed to export report")}};return y.useEffect(()=>{l===null&&d()},[a]),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-white",children:"Leave Reports"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>x("excel"),className:"flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:[e.jsx(Mt,{size:20}),"Export Excel"]}),e.jsxs("button",{onClick:()=>x("pdf"),className:"flex items-center gap-2 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700",children:[e.jsx(Mt,{size:20}),"Export PDF"]})]})]}),e.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 mb-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(Vs,{size:20,className:"text-gray-400"}),e.jsx("h2",{className:"text-lg font-semibold text-white",children:"Report Configuration"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Report Type"}),e.jsxs("select",{value:a,onChange:u=>{r(u.target.value),c(null)},className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white",children:[e.jsx("option",{value:"entitlement",children:"Leave Entitlement"}),e.jsx("option",{value:"balance",children:"Leave Balance"}),e.jsx("option",{value:"utilization",children:"Leave Utilization"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Year"}),e.jsx("input",{type:"number",name:"year",value:n.year,onChange:o,className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Department"}),e.jsx("input",{type:"text",name:"department",value:n.department,onChange:o,placeholder:"Filter by department",className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Leave Type"}),e.jsx("input",{type:"text",name:"leaveType",value:n.leaveType,onChange:o,placeholder:"Filter by leave type",className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white"})]})]}),e.jsx("button",{onClick:d,disabled:t,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50",children:t?"Generating...":"Generate Report"})]}),l&&e.jsxs("div",{className:"bg-gray-800 rounded-lg overflow-hidden",children:[e.jsx("div",{className:"p-4 border-b border-gray-700",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(st,{size:20,className:"text-gray-400"}),e.jsx("h2",{className:"text-lg font-semibold text-white",children:"Report Results"})]})}),e.jsx("div",{className:"p-4",children:l.data&&Array.isArray(l.data)?e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-300",children:"Employee"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-300",children:"Leave Type"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-300",children:"Entitled"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-300",children:"Used"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-300",children:"Balance"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-700",children:l.data.map((u,m)=>{var f;return e.jsxs("tr",{className:"hover:bg-gray-750",children:[e.jsx("td",{className:"px-4 py-3 text-sm text-gray-300",children:u.employeeName||((f=u.employee)==null?void 0:f.name)||"-"}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-300",children:u.leaveType||"-"}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-300",children:u.entitled||u.total||"-"}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-300",children:u.used||u.consumed||"-"}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-300",children:u.balance||u.available||"-"})]},m)})})]}):e.jsx("div",{className:"text-center py-8 text-gray-400",children:"No data available"})})]})]})},nm=()=>{const[t,s]=y.useState(!1),[a,r]=y.useState("summary"),[n,i]=y.useState({startDate:new Date(new Date().getFullYear(),0,1).toISOString().split("T")[0],endDate:new Date().toISOString().split("T")[0],department:"",employee:""}),[l,c]=y.useState(null),o=u=>{const{name:m,value:f}=u.target;i(g=>({...g,[m]:f}))},d=async()=>{try{s(!0);const u={...n};let m="";switch(a){case"summary":m="/reports/attendance/summary";break;case"exception":m="/reports/attendance/exception";break;default:m="/reports/attendance/summary"}const f=await J.get(m,{params:u});c(f.data),_.success("Report generated successfully")}catch{_.error("Failed to generate report")}finally{s(!1)}},x=async u=>{try{const m={...n,export:u};let f="";switch(a){case"summary":f="/reports/attendance/summary";break;case"exception":f="/reports/attendance/exception";break;default:f="/reports/attendance/summary"}const g=await J.get(f,{params:m,responseType:"blob"}),h=window.URL.createObjectURL(new Blob([g.data])),p=document.createElement("a");p.href=h,p.setAttribute("download",`attendance-report-${a}-${Date.now()}.${u}`),document.body.appendChild(p),p.click(),p.remove(),_.success(`Report exported as ${u.toUpperCase()}`)}catch{_.error("Failed to export report")}};return y.useEffect(()=>{l===null&&d()},[a]),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-white",children:"Attendance Reports"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>x("excel"),className:"flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:[e.jsx(Mt,{size:20}),"Export Excel"]}),e.jsxs("button",{onClick:()=>x("pdf"),className:"flex items-center gap-2 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700",children:[e.jsx(Mt,{size:20}),"Export PDF"]})]})]}),e.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 mb-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(Vs,{size:20,className:"text-gray-400"}),e.jsx("h2",{className:"text-lg font-semibold text-white",children:"Report Configuration"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Report Type"}),e.jsxs("select",{value:a,onChange:u=>{r(u.target.value),c(null)},className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white",children:[e.jsx("option",{value:"summary",children:"Attendance Summary"}),e.jsx("option",{value:"exception",children:"Exception Report"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Start Date"}),e.jsx("input",{type:"date",name:"startDate",value:n.startDate,onChange:o,className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"End Date"}),e.jsx("input",{type:"date",name:"endDate",value:n.endDate,onChange:o,className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Department"}),e.jsx("input",{type:"text",name:"department",value:n.department,onChange:o,placeholder:"Filter by department",className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white"})]})]}),e.jsx("button",{onClick:d,disabled:t,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50",children:t?"Generating...":"Generate Report"})]}),l&&e.jsxs("div",{className:"bg-gray-800 rounded-lg overflow-hidden",children:[e.jsx("div",{className:"p-4 border-b border-gray-700",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(st,{size:20,className:"text-gray-400"}),e.jsx("h2",{className:"text-lg font-semibold text-white",children:"Report Results"})]})}),e.jsx("div",{className:"p-4",children:l.data&&Array.isArray(l.data)?e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-300",children:"Employee"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-300",children:"Date"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-300",children:"Check In"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-300",children:"Check Out"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-300",children:"Hours"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-300",children:"Status"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-700",children:l.data.map((u,m)=>{var f;return e.jsxs("tr",{className:"hover:bg-gray-750",children:[e.jsx("td",{className:"px-4 py-3 text-sm text-gray-300",children:u.employeeName||((f=u.employee)==null?void 0:f.name)||"-"}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-300",children:u.date?new Date(u.date).toLocaleDateString():"-"}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-300",children:u.checkIn||"-"}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-300",children:u.checkOut||"-"}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-300",children:u.hours||u.workingHours||"-"}),e.jsx("td",{className:"px-4 py-3",children:u.status==="exception"?e.jsxs("span",{className:"flex items-center gap-1 text-yellow-400",children:[e.jsx(mt,{size:16}),"Exception"]}):e.jsx("span",{className:"text-green-400",children:"Normal"})})]},m)})})]}):e.jsx("div",{className:"text-center py-8 text-gray-400",children:"No data available"})})]})]})},HA=()=>{const[t,s]=y.useState(!1),[a,r]=y.useState({year:new Date().getFullYear(),department:"",complianceType:""}),[n,i]=y.useState(null),l=d=>{const{name:x,value:u}=d.target;r(m=>({...m,[x]:u}))},c=async()=>{try{s(!0);const d=await J.get("/reports/compliance/status",{params:a});i(d.data),_.success("Report generated successfully")}catch{_.error("Failed to generate report")}finally{s(!1)}},o=async d=>{try{const x={...a,export:d},u=await J.get("/reports/compliance/status",{params:x,responseType:"blob"}),m=window.URL.createObjectURL(new Blob([u.data])),f=document.createElement("a");f.href=m,f.setAttribute("download",`compliance-report-${Date.now()}.${d}`),document.body.appendChild(f),f.click(),f.remove(),_.success(`Report exported as ${d.toUpperCase()}`)}catch{_.error("Failed to export report")}};return y.useEffect(()=>{c()},[]),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-white",children:"Compliance Reports"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>o("excel"),className:"flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:[e.jsx(Mt,{size:20}),"Export Excel"]}),e.jsxs("button",{onClick:()=>o("pdf"),className:"flex items-center gap-2 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700",children:[e.jsx(Mt,{size:20}),"Export PDF"]})]})]}),e.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 mb-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(Vs,{size:20,className:"text-gray-400"}),e.jsx("h2",{className:"text-lg font-semibold text-white",children:"Report Configuration"})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Year"}),e.jsx("input",{type:"number",name:"year",value:a.year,onChange:l,className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Department"}),e.jsx("input",{type:"text",name:"department",value:a.department,onChange:l,placeholder:"Filter by department",className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Compliance Type"}),e.jsx("input",{type:"text",name:"complianceType",value:a.complianceType,onChange:l,placeholder:"Filter by type",className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white"})]})]}),e.jsx("button",{onClick:c,disabled:t,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50",children:t?"Generating...":"Generate Report"})]}),n&&e.jsxs("div",{className:"bg-gray-800 rounded-lg overflow-hidden",children:[e.jsx("div",{className:"p-4 border-b border-gray-700",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Lt,{size:20,className:"text-gray-400"}),e.jsx("h2",{className:"text-lg font-semibold text-white",children:"Compliance Status"})]})}),e.jsx("div",{className:"p-4",children:n.data&&Array.isArray(n.data)?e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-300",children:"Employee"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-300",children:"Compliance Type"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-300",children:"Status"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-300",children:"Due Date"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-300",children:"Completion Date"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-700",children:n.data.map((d,x)=>{var u;return e.jsxs("tr",{className:"hover:bg-gray-750",children:[e.jsx("td",{className:"px-4 py-3 text-sm text-gray-300",children:d.employeeName||((u=d.employee)==null?void 0:u.name)||"-"}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-300",children:d.complianceType||"-"}),e.jsx("td",{className:"px-4 py-3",children:d.status==="compliant"?e.jsx("span",{className:"text-green-400",children:"Compliant"}):e.jsx("span",{className:"text-red-400",children:"Non-Compliant"})}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-300",children:d.dueDate?new Date(d.dueDate).toLocaleDateString():"-"}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-300",children:d.completionDate?new Date(d.completionDate).toLocaleDateString():"-"})]},x)})})]}):e.jsx("div",{className:"text-center py-8 text-gray-400",children:"No data available"})})]})]})},qA=()=>{const[t,s]=y.useState(!0),[a,r]=y.useState([]),[n,i]=y.useState(!1),[l,c]=y.useState(null),[o,d]=y.useState({reportType:"",frequency:"daily",recipients:[],format:"excel",isActive:!0});y.useEffect(()=>{x()},[]);const x=async()=>{try{s(!0);const h=await J.get("/reports/scheduled");r(h.data.data||[])}catch{_.error("Failed to fetch scheduled reports")}finally{s(!1)}},u=h=>{const{name:p,value:j,type:v,checked:w}=h.target;d(b=>({...b,[p]:v==="checkbox"?w:j}))},m=async h=>{var p,j;h.preventDefault();try{l?(await J.put(`/reports/scheduled/${l._id}`,o),_.success("Scheduled report updated successfully")):(await J.post("/reports/scheduled",o),_.success("Scheduled report created successfully")),i(!1),c(null),g(),x()}catch(v){_.error(((j=(p=v.response)==null?void 0:p.data)==null?void 0:j.message)||"Failed to save scheduled report")}},f=async h=>{if(window.confirm("Are you sure you want to delete this scheduled report?"))try{await J.delete(`/reports/scheduled/${h}`),_.success("Scheduled report deleted successfully"),x()}catch{_.error("Failed to delete scheduled report")}},g=()=>{d({reportType:"",frequency:"daily",recipients:[],format:"excel",isActive:!0})};return t?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"text-gray-400",children:"Loading..."})}):e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-white",children:"Scheduled Reports"}),e.jsxs("button",{onClick:()=>{g(),c(null),i(!0)},className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:[e.jsx(qe,{size:20}),"Schedule Report"]})]}),e.jsx("div",{className:"bg-gray-800 rounded-lg overflow-hidden",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-300",children:"Report Type"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-300",children:"Frequency"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-300",children:"Format"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-300",children:"Recipients"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-300",children:"Status"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-300",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-700",children:a.map(h=>{var p;return e.jsxs("tr",{className:"hover:bg-gray-750",children:[e.jsx("td",{className:"px-4 py-3 text-sm text-gray-300",children:h.reportType}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-300",children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Be,{size:16}),h.frequency]})}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-300",children:h.format}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-300",children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(wt,{size:16}),((p=h.recipients)==null?void 0:p.length)||0," recipients"]})}),e.jsx("td",{className:"px-4 py-3",children:h.isActive?e.jsx("span",{className:"text-green-400",children:"Active"}):e.jsx("span",{className:"text-red-400",children:"Inactive"})}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>{c(h),d({reportType:h.reportType||"",frequency:h.frequency||"daily",recipients:h.recipients||[],format:h.format||"excel",isActive:h.isActive!==void 0?h.isActive:!0}),i(!0)},className:"p-1 text-blue-400 hover:text-blue-300",children:e.jsx(ya,{size:16})}),e.jsx("button",{onClick:()=>f(h._id),className:"p-1 text-red-400 hover:text-red-300",children:e.jsx(kt,{size:16})})]})})]},h._id)})})]})}),n&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 w-full max-w-2xl",children:[e.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:l?"Edit Scheduled Report":"Schedule Report"}),e.jsxs("form",{onSubmit:m,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Report Type"}),e.jsxs("select",{name:"reportType",value:o.reportType,onChange:u,required:!0,className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white",children:[e.jsx("option",{value:"",children:"Select report type"}),e.jsx("option",{value:"leave_entitlement",children:"Leave Entitlement"}),e.jsx("option",{value:"leave_balance",children:"Leave Balance"}),e.jsx("option",{value:"attendance_summary",children:"Attendance Summary"}),e.jsx("option",{value:"compliance_status",children:"Compliance Status"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Frequency"}),e.jsxs("select",{name:"frequency",value:o.frequency,onChange:u,className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white",children:[e.jsx("option",{value:"daily",children:"Daily"}),e.jsx("option",{value:"weekly",children:"Weekly"}),e.jsx("option",{value:"monthly",children:"Monthly"}),e.jsx("option",{value:"yearly",children:"Yearly"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Format"}),e.jsxs("select",{name:"format",value:o.format,onChange:u,className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white",children:[e.jsx("option",{value:"excel",children:"Excel"}),e.jsx("option",{value:"pdf",children:"PDF"}),e.jsx("option",{value:"csv",children:"CSV"})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",name:"isActive",checked:o.isActive,onChange:u,className:"w-4 h-4"}),e.jsx("label",{className:"text-sm font-medium text-gray-300",children:"Active"})]}),e.jsxs("div",{className:"flex gap-3 justify-end",children:[e.jsx("button",{type:"button",onClick:()=>{i(!1),c(null),g()},className:"px-4 py-2 bg-gray-700 text-white rounded-lg hover:bg-gray-600",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:l?"Update":"Create"})]})]})]})})]})},im=()=>{var x,u,m,f;const[t,s]=y.useState(!0),[a,r]=y.useState("attendance"),[n,i]=y.useState({startDate:new Date(new Date().getFullYear(),0,1).toISOString().split("T")[0],endDate:new Date().toISOString().split("T")[0],groupBy:"month"}),[l,c]=y.useState(null),o=g=>{const{name:h,value:p}=g.target;i(j=>({...j,[h]:p}))},d=y.useCallback(async()=>{var g,h,p,j,v,w,b,A,N,C;try{s(!0);const k={...n};let S="";switch(a){case"attendance":S="/reports/analytics/attendance";break;case"leave":S="/reports/analytics/leave";break;case"compliance":S="/reports/analytics/compliance";break;default:S="/reports/analytics/attendance"}const R=(await J.get(S,{params:k})).data;let T={totalRecords:0,average:0,maximum:0,minimum:0},M=[];if(a==="attendance"&&(R!=null&&R.trends)){const H=R.trends,U=H.byPeriod||{},W=Object.entries(U),se=H.overall||{},X=W.map(([,de])=>de.present||0),D=se.totalDays||W.reduce((de,[,E])=>de+(E.recordCount||0),0),le=se.present??X.reduce((de,E)=>de+E,0);T={totalRecords:D,average:D?(le/D*100).toFixed(1):0,maximum:X.length?Math.max(...X):0,minimum:X.length?Math.min(...X):0},M=W.map(([de,E])=>({label:de,value:E.present||0,description:`Present: ${E.present||0} â€¢ Absent: ${E.absent||0} â€¢ Avg Hours: ${(E.averageWorkingHours||0).toFixed(2)}`,change:E.presentPercentage?E.presentPercentage.toFixed(1):null}))}else if(a==="leave"&&(R!=null&&R.patterns)){const H=R.patterns,U=Object.entries(H.byLeaveType||{}),W=R.totalRequests||0,se=H.averageDuration||0,X=U.reduce((le,[,de])=>le+(de.totalDays||0),0),D=U.map(([le,de])=>de.totalDays||0);T={totalRecords:W,average:se.toFixed(2),maximum:D.length?Math.max(...D):0,minimum:D.length?Math.min(...D):0},M=U.map(([le,de])=>({label:le,value:de.count||0,description:`Total days: ${de.totalDays||0} â€¢ Avg duration: ${(de.averageDays||0).toFixed(2)}`}))}else if(a==="compliance"&&(R!=null&&R.metrics)){const H=R.metrics;T={totalRecords:((g=H.documents)==null?void 0:g.total)||0,average:((h=H.documents)==null?void 0:h.expiring)||0,maximum:((p=H.compliances)==null?void 0:p.overdue)||0,minimum:((j=H.compliances)==null?void 0:j.completed)||0},M=[{label:"Documents",value:((v=H.documents)==null?void 0:v.total)||0,description:`Expiring: ${((w=H.documents)==null?void 0:w.expiring)||0} â€¢ Expired: ${((b=H.documents)==null?void 0:b.expired)||0}`},{label:"Compliance Tasks",value:((A=H.compliances)==null?void 0:A.total)||0,description:`Pending: ${((N=H.compliances)==null?void 0:N.pending)||0} â€¢ Overdue: ${((C=H.compliances)==null?void 0:C.overdue)||0}`}]}else T=(R==null?void 0:R.summary)||T,M=(R==null?void 0:R.trends)||[];c({summary:T,trends:M})}catch{_.error("Failed to fetch analytics")}finally{s(!1)}},[a,n]);return y.useEffect(()=>{d()},[d]),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-white",children:"Analytics Dashboard"}),e.jsx("div",{className:"flex items-center gap-2 text-gray-400",children:e.jsx(lr,{size:24})})]}),e.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 mb-6",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Analytics Type"}),e.jsxs("select",{value:a,onChange:g=>r(g.target.value),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white",children:[e.jsx("option",{value:"attendance",children:"Attendance Trends"}),e.jsx("option",{value:"leave",children:"Leave Patterns"}),e.jsx("option",{value:"compliance",children:"Compliance Metrics"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Start Date"}),e.jsx("input",{type:"date",name:"startDate",value:n.startDate,onChange:o,className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"End Date"}),e.jsx("input",{type:"date",name:"endDate",value:n.endDate,onChange:o,className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white"})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Group By"}),e.jsxs("select",{name:"groupBy",value:n.groupBy,onChange:o,className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white",children:[e.jsx("option",{value:"day",children:"Day"}),e.jsx("option",{value:"week",children:"Week"}),e.jsx("option",{value:"month",children:"Month"}),e.jsx("option",{value:"year",children:"Year"})]})]})]}),l&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6",children:[e.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-gray-400 text-sm",children:"Total Records"}),e.jsx(Ks,{size:20,className:"text-blue-400"})]}),e.jsx("div",{className:"text-2xl font-bold text-white",children:((x=l.summary)==null?void 0:x.totalRecords)||0})]}),e.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-gray-400 text-sm",children:"Average"}),e.jsx(lr,{size:20,className:"text-green-400"})]}),e.jsx("div",{className:"text-2xl font-bold text-white",children:((u=l.summary)==null?void 0:u.average)||0})]}),e.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-gray-400 text-sm",children:"Maximum"}),e.jsx(Oe,{size:20,className:"text-yellow-400"})]}),e.jsx("div",{className:"text-2xl font-bold text-white",children:((m=l.summary)==null?void 0:m.maximum)||0})]}),e.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-gray-400 text-sm",children:"Minimum"}),e.jsx(Ue,{size:20,className:"text-red-400"})]}),e.jsx("div",{className:"text-2xl font-bold text-white",children:((f=l.summary)==null?void 0:f.minimum)||0})]})]}),l&&Array.isArray(l.trends)&&l.trends.length>0&&e.jsxs("div",{className:"bg-gray-800 rounded-lg p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-white mb-4",children:"Trend Analysis"}),e.jsx("div",{className:"space-y-4",children:l.trends.map((g,h)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-700 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-white font-medium",children:g.period||g.label}),e.jsx("div",{className:"text-gray-400 text-sm",children:g.description})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-lg font-bold text-white",children:g.value}),g.change&&e.jsxs("div",{className:`text-sm ${g.change>0?"text-green-400":"text-red-400"}`,children:[g.change>0?"+":"",g.change,"%"]})]})]},h))})]}),t&&e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"text-gray-400",children:"Loading analytics..."})})]})},lm=()=>{const[t,s]=y.useState(!0),[a,r]=y.useState([]),[n,i]=y.useState(!1),[l,c]=y.useState(null),[o,d]=y.useState({leaveType:"",accrualFrequency:"monthly",accrualAmount:0,yearlyAllocation:0,maxAccumulation:0,carryForwardEnabled:!1,maxCarryForward:0,proRataEnabled:!0,proRataCalculation:"calendar-days",isActive:!0});y.useEffect(()=>{x()},[]);const x=async()=>{try{s(!0);const h=await J.get("/leave-accrual/policies");r(h.data.data||[])}catch{_.error("Failed to fetch accrual policies")}finally{s(!1)}},u=h=>{const{name:p,value:j,type:v,checked:w}=h.target;d(b=>({...b,[p]:v==="checkbox"?w:v==="number"?parseFloat(j)||0:j}))},m=async h=>{var p,j;h.preventDefault();try{l?(await J.put(`/leave-accrual/policies/${l._id}`,o),_.success("Accrual policy updated successfully")):(await J.post("/leave-accrual/policies",o),_.success("Accrual policy created successfully")),i(!1),c(null),g(),x()}catch(v){_.error(((j=(p=v.response)==null?void 0:p.data)==null?void 0:j.message)||"Failed to save accrual policy")}},f=async h=>{if(window.confirm("Are you sure you want to delete this policy?"))try{await J.delete(`/leave-accrual/policies/${h}`),_.success("Accrual policy deleted successfully"),x()}catch{_.error("Failed to delete accrual policy")}},g=()=>{d({leaveType:"",accrualFrequency:"monthly",accrualAmount:0,yearlyAllocation:0,maxAccumulation:0,carryForwardEnabled:!1,maxCarryForward:0,proRataEnabled:!0,proRataCalculation:"calendar-days",isActive:!0})};return t?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"text-gray-400",children:"Loading..."})}):e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-white",children:"Leave Accrual Policies"}),e.jsxs("button",{onClick:()=>{g(),c(null),i(!0)},className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:[e.jsx(qe,{size:20}),"Add Policy"]})]}),e.jsx("div",{className:"bg-gray-800 rounded-lg overflow-hidden",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-300",children:"Leave Type"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-300",children:"Frequency"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-300",children:"Accrual Rate"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-300",children:"Max Accrual"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-300",children:"Carry Forward"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-300",children:"Status"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-300",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-700",children:a.map(h=>e.jsxs("tr",{className:"hover:bg-gray-750",children:[e.jsx("td",{className:"px-4 py-3 text-sm text-gray-300",children:h.leaveType}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-300 capitalize",children:h.accrualFrequency}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-300",children:h.accrualAmount||0}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-300",children:h.maxAccumulation||"Unlimited"}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-300",children:h.carryForwardEnabled?`Yes (Max: ${h.maxCarryForward||0})`:"No"}),e.jsx("td",{className:"px-4 py-3",children:h.isActive?e.jsxs("span",{className:"flex items-center gap-1 text-green-400",children:[e.jsx(Te,{size:16}),"Active"]}):e.jsxs("span",{className:"flex items-center gap-1 text-red-400",children:[e.jsx(Qe,{size:16}),"Inactive"]})}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>{c(h),d({leaveType:h.leaveType||"",accrualFrequency:h.accrualFrequency||"monthly",accrualAmount:h.accrualAmount||0,yearlyAllocation:h.yearlyAllocation||0,maxAccumulation:h.maxAccumulation||0,carryForwardEnabled:h.carryForwardEnabled||!1,maxCarryForward:h.maxCarryForward||0,proRataEnabled:h.proRataEnabled!==void 0?h.proRataEnabled:!0,proRataCalculation:h.proRataCalculation||"calendar-days",isActive:h.isActive!==void 0?h.isActive:!0}),i(!0)},className:"p-1 text-blue-400 hover:text-blue-300",children:e.jsx(ya,{size:16})}),e.jsx("button",{onClick:()=>f(h._id),className:"p-1 text-red-400 hover:text-red-300",children:e.jsx(kt,{size:16})})]})})]},h._id))})]})}),n&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:l?"Edit Accrual Policy":"Create Accrual Policy"}),e.jsxs("form",{onSubmit:m,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Leave Type"}),e.jsxs("select",{name:"leaveType",value:o.leaveType,onChange:u,required:!0,className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white",children:[e.jsx("option",{value:"",children:"Select Leave Type"}),e.jsx("option",{value:"Personal Leave",children:"Personal Leave"}),e.jsx("option",{value:"Sick Leave",children:"Sick Leave"}),e.jsx("option",{value:"Comp Offs",children:"Comp Offs"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Accrual Frequency"}),e.jsxs("select",{name:"accrualFrequency",value:o.accrualFrequency,onChange:u,className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white",children:[e.jsx("option",{value:"monthly",children:"Monthly"}),e.jsx("option",{value:"yearly",children:"Yearly"}),e.jsx("option",{value:"quarterly",children:"Quarterly"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Accrual Amount (days)"}),e.jsx("input",{type:"number",name:"accrualAmount",value:o.accrualAmount,onChange:u,required:!0,step:"0.1",min:"0",className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Yearly Allocation (optional)"}),e.jsx("input",{type:"number",name:"yearlyAllocation",value:o.yearlyAllocation,onChange:u,step:"0.1",min:"0",className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Max Accumulation (0 = unlimited)"}),e.jsx("input",{type:"number",name:"maxAccumulation",value:o.maxAccumulation,onChange:u,min:"0",className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Max Carry Forward"}),e.jsx("input",{type:"number",name:"maxCarryForward",value:o.maxCarryForward,onChange:u,className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",name:"carryForwardEnabled",checked:o.carryForwardEnabled,onChange:u,className:"w-4 h-4"}),e.jsx("label",{className:"text-sm font-medium text-gray-300",children:"Enable Carry Forward"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",name:"proRataEnabled",checked:o.proRataEnabled,onChange:u,className:"w-4 h-4"}),e.jsx("label",{className:"text-sm font-medium text-gray-300",children:"Enable Pro-Rata Calculation"})]}),o.proRataEnabled&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Pro-Rata Calculation Method"}),e.jsxs("select",{name:"proRataCalculation",value:o.proRataCalculation,onChange:u,className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white",children:[e.jsx("option",{value:"calendar-days",children:"Calendar Days"}),e.jsx("option",{value:"working-days",children:"Working Days"}),e.jsx("option",{value:"months",children:"Months"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",name:"isActive",checked:o.isActive,onChange:u,className:"w-4 h-4"}),e.jsx("label",{className:"text-sm font-medium text-gray-300",children:"Active"})]})]}),e.jsxs("div",{className:"flex gap-3 justify-end",children:[e.jsx("button",{type:"button",onClick:()=>{i(!1),c(null),g()},className:"px-4 py-2 bg-gray-700 text-white rounded-lg hover:bg-gray-600",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:l?"Update":"Create"})]})]})]})})]})},WA=()=>{const[t,s]=y.useState(!0),[a,r]=y.useState([]),[n,i]=y.useState({leaveType:"",year:new Date().getFullYear(),employee:""});y.useEffect(()=>{l()},[n]);const l=async()=>{try{s(!0);const o={};n.leaveType&&(o.leaveType=n.leaveType),n.year&&(o.year=n.year),n.employee&&(o.employee=n.employee);const d=await J.get("/leave-accrual/history",{params:o});r(d.data.data||[])}catch{_.error("Failed to fetch accrual history")}finally{s(!1)}},c=o=>{const{name:d,value:x}=o.target;i(u=>({...u,[d]:x}))};return t?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"text-gray-400",children:"Loading..."})}):e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-white",children:"Accrual History"}),e.jsx("div",{className:"flex items-center gap-2 text-gray-400",children:e.jsx(Be,{size:24})})]}),e.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 mb-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(Vs,{size:20,className:"text-gray-400"}),e.jsx("h2",{className:"text-lg font-semibold text-white",children:"Filters"})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Leave Type"}),e.jsx("input",{type:"text",name:"leaveType",value:n.leaveType,onChange:c,placeholder:"Filter by leave type",className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Year"}),e.jsx("input",{type:"number",name:"year",value:n.year,onChange:c,className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Employee"}),e.jsx("input",{type:"text",name:"employee",value:n.employee,onChange:c,placeholder:"Filter by employee",className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white"})]})]})]}),e.jsxs("div",{className:"bg-gray-800 rounded-lg overflow-hidden",children:[e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-300",children:"Employee"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-300",children:"Leave Type"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-300",children:"Accrued"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-300",children:"Carried Forward"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-300",children:"Total"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-300",children:"Accrual Date"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-700",children:a.map((o,d)=>{var x;return e.jsxs("tr",{className:"hover:bg-gray-750",children:[e.jsx("td",{className:"px-4 py-3 text-sm text-gray-300",children:o.employeeName||((x=o.employee)==null?void 0:x.name)||"-"}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-300",children:o.leaveType||"-"}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-300",children:o.accrued||0}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-300",children:o.carriedForward||0}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-300",children:o.total||0}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-300",children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Oe,{size:16}),o.accrualDate?new Date(o.accrualDate).toLocaleDateString():"-"]})})]},d)})})]}),a.length===0&&e.jsx("div",{className:"text-center py-8 text-gray-400",children:"No accrual history found"})]})]})},GA=()=>{const[t,s]=y.useState(!1),[a,r]=y.useState({accrualType:"monthly",year:new Date().getFullYear(),month:new Date().getMonth()+1}),n=o=>{const{name:d,value:x}=o.target;r(u=>({...u,[d]:x}))},i=async()=>{var o,d;try{s(!0);const x=await J.post("/leave-accrual/trigger/monthly",{year:a.year,month:a.month});_.success(x.data.message||"Monthly accrual triggered successfully")}catch(x){_.error(((d=(o=x.response)==null?void 0:o.data)==null?void 0:d.message)||"Failed to trigger monthly accrual")}finally{s(!1)}},l=async()=>{var o,d;try{s(!0);const x=await J.post("/leave-accrual/trigger/yearly",{year:a.year});_.success(x.data.message||"Yearly accrual triggered successfully")}catch(x){_.error(((d=(o=x.response)==null?void 0:o.data)==null?void 0:d.message)||"Failed to trigger yearly accrual")}finally{s(!1)}},c=async()=>{var o,d;try{s(!0);const x=a.year-1,u=a.year,m=await J.post("/leave-accrual/trigger/carry-forward",{fromYear:x,toYear:u});_.success(m.data.message||"Carry forward processed successfully")}catch(x){_.error(((d=(o=x.response)==null?void 0:o.data)==null?void 0:d.message)||"Failed to process carry forward")}finally{s(!1)}};return e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-white",children:"Manual Accrual Processing"}),e.jsx("p",{className:"text-gray-400 mt-2",children:"Trigger leave accrual processes manually"})]}),e.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 mb-6",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Accrual Type"}),e.jsxs("select",{name:"accrualType",value:a.accrualType,onChange:n,className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white",children:[e.jsx("option",{value:"monthly",children:"Monthly Accrual"}),e.jsx("option",{value:"yearly",children:"Yearly Accrual"}),e.jsx("option",{value:"carry-forward",children:"Carry Forward"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Year"}),e.jsx("input",{type:"number",name:"year",value:a.year,onChange:n,className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white"})]}),a.accrualType==="monthly"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Month"}),e.jsx("input",{type:"number",name:"month",value:a.month,onChange:n,min:"1",max:"12",className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white"})]})]}),e.jsxs("div",{className:"flex gap-4",children:[a.accrualType==="monthly"&&e.jsxs("button",{onClick:i,disabled:t,className:"flex items-center gap-2 px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50",children:[e.jsx(zl,{size:20}),"Trigger Monthly Accrual"]}),a.accrualType==="yearly"&&e.jsxs("button",{onClick:l,disabled:t,className:"flex items-center gap-2 px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50",children:[e.jsx(Oe,{size:20}),"Trigger Yearly Accrual"]}),a.accrualType==="carry-forward"&&e.jsxs("button",{onClick:c,disabled:t,className:"flex items-center gap-2 px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50",children:[e.jsx(Xt,{size:20}),"Process Carry Forward"]})]})]}),e.jsxs("div",{className:"bg-gray-800 rounded-lg p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-white mb-4",children:"Instructions"}),e.jsxs("ul",{className:"space-y-2 text-gray-300",children:[e.jsx("li",{children:"â€¢ Monthly Accrual: Processes accrual for a specific month and year"}),e.jsx("li",{children:"â€¢ Yearly Accrual: Processes accrual for the entire year"}),e.jsx("li",{children:"â€¢ Carry Forward: Transfers unused leave balance from previous year to current year"}),e.jsx("li",{children:"â€¢ Ensure all accrual policies are configured before triggering"}),e.jsx("li",{children:"â€¢ Processing may take a few minutes depending on the number of employees"})]})]})]})};/**
   * table-core
   *
   * Copyright (c) TanStack
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE.md file in the root directory of this source tree.
   *
   * @license MIT
   */function nr(t,s){return typeof t=="function"?t(s):t}function Xs(t,s){return a=>{s.setState(r=>({...r,[t]:nr(a,r[t])}))}}function Kl(t){return t instanceof Function}function YA(t){return Array.isArray(t)&&t.every(s=>typeof s=="number")}function ZA(t,s){const a=[],r=n=>{n.forEach(i=>{a.push(i);const l=s(i);l!=null&&l.length&&r(l)})};return r(t),a}function We(t,s,a){let r=[],n;return i=>{let l;a.key&&a.debug&&(l=Date.now());const c=t(i);if(!(c.length!==r.length||c.some((x,u)=>r[u]!==x)))return n;r=c;let d;if(a.key&&a.debug&&(d=Date.now()),n=s(...c),a==null||a.onChange==null||a.onChange(n),a.key&&a.debug&&a!=null&&a.debug()){const x=Math.round((Date.now()-l)*100)/100,u=Math.round((Date.now()-d)*100)/100,m=u/16,f=(g,h)=>{for(g=String(g);g.length<h;)g=" "+g;return g};console.info(`%câ± ${f(u,5)} /${f(x,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*m,120))}deg 100% 31%);`,a==null?void 0:a.key)}return n}}function Ge(t,s,a,r){return{debug:()=>{var n;return(n=t==null?void 0:t.debugAll)!=null?n:t[s]},key:!1,onChange:r}}function JA(t,s,a,r){const n=()=>{var l;return(l=i.getValue())!=null?l:t.options.renderFallbackValue},i={id:`${s.id}_${a.id}`,row:s,column:a,getValue:()=>s.getValue(r),renderValue:n,getContext:We(()=>[t,a,s,i],(l,c,o,d)=>({table:l,column:c,row:o,cell:d,getValue:d.getValue,renderValue:d.renderValue}),Ge(t.options,"debugCells"))};return t._features.forEach(l=>{l.createCell==null||l.createCell(i,a,s,t)},{}),i}function XA(t,s,a,r){var n,i;const c={...t._getDefaultColumnDef(),...s},o=c.accessorKey;let d=(n=(i=c.id)!=null?i:o?typeof String.prototype.replaceAll=="function"?o.replaceAll(".","_"):o.replace(/\./g,"_"):void 0)!=null?n:typeof c.header=="string"?c.header:void 0,x;if(c.accessorFn?x=c.accessorFn:o&&(o.includes(".")?x=m=>{let f=m;for(const h of o.split(".")){var g;f=(g=f)==null?void 0:g[h]}return f}:x=m=>m[c.accessorKey]),!d)throw new Error;let u={id:`${String(d)}`,accessorFn:x,parent:r,depth:a,columnDef:c,columns:[],getFlatColumns:We(()=>[!0],()=>{var m;return[u,...(m=u.columns)==null?void 0:m.flatMap(f=>f.getFlatColumns())]},Ge(t.options,"debugColumns")),getLeafColumns:We(()=>[t._getOrderColumnsFn()],m=>{var f;if((f=u.columns)!=null&&f.length){let g=u.columns.flatMap(h=>h.getLeafColumns());return m(g)}return[u]},Ge(t.options,"debugColumns"))};for(const m of t._features)m.createColumn==null||m.createColumn(u,t);return u}const fs="debugHeaders";function cm(t,s,a){var r;let i={id:(r=a.id)!=null?r:s.id,column:s,index:a.index,isPlaceholder:!!a.isPlaceholder,placeholderId:a.placeholderId,depth:a.depth,subHeaders:[],colSpan:0,rowSpan:0,headerGroup:null,getLeafHeaders:()=>{const l=[],c=o=>{o.subHeaders&&o.subHeaders.length&&o.subHeaders.map(c),l.push(o)};return c(i),l},getContext:()=>({table:t,header:i,column:s})};return t._features.forEach(l=>{l.createHeader==null||l.createHeader(i,t)}),i}const KA={createTable:t=>{t.getHeaderGroups=We(()=>[t.getAllColumns(),t.getVisibleLeafColumns(),t.getState().columnPinning.left,t.getState().columnPinning.right],(s,a,r,n)=>{var i,l;const c=(i=r==null?void 0:r.map(u=>a.find(m=>m.id===u)).filter(Boolean))!=null?i:[],o=(l=n==null?void 0:n.map(u=>a.find(m=>m.id===u)).filter(Boolean))!=null?l:[],d=a.filter(u=>!(r!=null&&r.includes(u.id))&&!(n!=null&&n.includes(u.id)));return Ki(s,[...c,...d,...o],t)},Ge(t.options,fs)),t.getCenterHeaderGroups=We(()=>[t.getAllColumns(),t.getVisibleLeafColumns(),t.getState().columnPinning.left,t.getState().columnPinning.right],(s,a,r,n)=>(a=a.filter(i=>!(r!=null&&r.includes(i.id))&&!(n!=null&&n.includes(i.id))),Ki(s,a,t,"center")),Ge(t.options,fs)),t.getLeftHeaderGroups=We(()=>[t.getAllColumns(),t.getVisibleLeafColumns(),t.getState().columnPinning.left],(s,a,r)=>{var n;const i=(n=r==null?void 0:r.map(l=>a.find(c=>c.id===l)).filter(Boolean))!=null?n:[];return Ki(s,i,t,"left")},Ge(t.options,fs)),t.getRightHeaderGroups=We(()=>[t.getAllColumns(),t.getVisibleLeafColumns(),t.getState().columnPinning.right],(s,a,r)=>{var n;const i=(n=r==null?void 0:r.map(l=>a.find(c=>c.id===l)).filter(Boolean))!=null?n:[];return Ki(s,i,t,"right")},Ge(t.options,fs)),t.getFooterGroups=We(()=>[t.getHeaderGroups()],s=>[...s].reverse(),Ge(t.options,fs)),t.getLeftFooterGroups=We(()=>[t.getLeftHeaderGroups()],s=>[...s].reverse(),Ge(t.options,fs)),t.getCenterFooterGroups=We(()=>[t.getCenterHeaderGroups()],s=>[...s].reverse(),Ge(t.options,fs)),t.getRightFooterGroups=We(()=>[t.getRightHeaderGroups()],s=>[...s].reverse(),Ge(t.options,fs)),t.getFlatHeaders=We(()=>[t.getHeaderGroups()],s=>s.map(a=>a.headers).flat(),Ge(t.options,fs)),t.getLeftFlatHeaders=We(()=>[t.getLeftHeaderGroups()],s=>s.map(a=>a.headers).flat(),Ge(t.options,fs)),t.getCenterFlatHeaders=We(()=>[t.getCenterHeaderGroups()],s=>s.map(a=>a.headers).flat(),Ge(t.options,fs)),t.getRightFlatHeaders=We(()=>[t.getRightHeaderGroups()],s=>s.map(a=>a.headers).flat(),Ge(t.options,fs)),t.getCenterLeafHeaders=We(()=>[t.getCenterFlatHeaders()],s=>s.filter(a=>{var r;return!((r=a.subHeaders)!=null&&r.length)}),Ge(t.options,fs)),t.getLeftLeafHeaders=We(()=>[t.getLeftFlatHeaders()],s=>s.filter(a=>{var r;return!((r=a.subHeaders)!=null&&r.length)}),Ge(t.options,fs)),t.getRightLeafHeaders=We(()=>[t.getRightFlatHeaders()],s=>s.filter(a=>{var r;return!((r=a.subHeaders)!=null&&r.length)}),Ge(t.options,fs)),t.getLeafHeaders=We(()=>[t.getLeftHeaderGroups(),t.getCenterHeaderGroups(),t.getRightHeaderGroups()],(s,a,r)=>{var n,i,l,c,o,d;return[...(n=(i=s[0])==null?void 0:i.headers)!=null?n:[],...(l=(c=a[0])==null?void 0:c.headers)!=null?l:[],...(o=(d=r[0])==null?void 0:d.headers)!=null?o:[]].map(x=>x.getLeafHeaders()).flat()},Ge(t.options,fs))}};function Ki(t,s,a,r){var n,i;let l=0;const c=function(m,f){f===void 0&&(f=1),l=Math.max(l,f),m.filter(g=>g.getIsVisible()).forEach(g=>{var h;(h=g.columns)!=null&&h.length&&c(g.columns,f+1)},0)};c(t);let o=[];const d=(m,f)=>{const g={depth:f,id:[r,`${f}`].filter(Boolean).join("_"),headers:[]},h=[];m.forEach(p=>{const j=[...h].reverse()[0],v=p.column.depth===g.depth;let w,b=!1;if(v&&p.column.parent?w=p.column.parent:(w=p.column,b=!0),j&&(j==null?void 0:j.column)===w)j.subHeaders.push(p);else{const A=cm(a,w,{id:[r,f,w.id,p==null?void 0:p.id].filter(Boolean).join("_"),isPlaceholder:b,placeholderId:b?`${h.filter(N=>N.column===w).length}`:void 0,depth:f,index:h.length});A.subHeaders.push(p),h.push(A)}g.headers.push(p),p.headerGroup=g}),o.push(g),f>0&&d(h,f-1)},x=s.map((m,f)=>cm(a,m,{depth:l,index:f}));d(x,l-1),o.reverse();const u=m=>m.filter(g=>g.column.getIsVisible()).map(g=>{let h=0,p=0,j=[0];g.subHeaders&&g.subHeaders.length?(j=[],u(g.subHeaders).forEach(w=>{let{colSpan:b,rowSpan:A}=w;h+=b,j.push(A)})):h=1;const v=Math.min(...j);return p=p+v,g.colSpan=h,g.rowSpan=p,{colSpan:h,rowSpan:p}});return u((n=(i=o[0])==null?void 0:i.headers)!=null?n:[]),o}const QA=(t,s,a,r,n,i,l)=>{let c={id:s,index:r,original:a,depth:n,parentId:l,_valuesCache:{},_uniqueValuesCache:{},getValue:o=>{if(c._valuesCache.hasOwnProperty(o))return c._valuesCache[o];const d=t.getColumn(o);if(d!=null&&d.accessorFn)return c._valuesCache[o]=d.accessorFn(c.original,r),c._valuesCache[o]},getUniqueValues:o=>{if(c._uniqueValuesCache.hasOwnProperty(o))return c._uniqueValuesCache[o];const d=t.getColumn(o);if(d!=null&&d.accessorFn)return d.columnDef.getUniqueValues?(c._uniqueValuesCache[o]=d.columnDef.getUniqueValues(c.original,r),c._uniqueValuesCache[o]):(c._uniqueValuesCache[o]=[c.getValue(o)],c._uniqueValuesCache[o])},renderValue:o=>{var d;return(d=c.getValue(o))!=null?d:t.options.renderFallbackValue},subRows:[],getLeafRows:()=>ZA(c.subRows,o=>o.subRows),getParentRow:()=>c.parentId?t.getRow(c.parentId,!0):void 0,getParentRows:()=>{let o=[],d=c;for(;;){const x=d.getParentRow();if(!x)break;o.push(x),d=x}return o.reverse()},getAllCells:We(()=>[t.getAllLeafColumns()],o=>o.map(d=>JA(t,c,d,d.id)),Ge(t.options,"debugRows")),_getAllCellsByColumnId:We(()=>[c.getAllCells()],o=>o.reduce((d,x)=>(d[x.column.id]=x,d),{}),Ge(t.options,"debugRows"))};for(let o=0;o<t._features.length;o++){const d=t._features[o];d==null||d.createRow==null||d.createRow(c,t)}return c},eE={createColumn:(t,s)=>{t._getFacetedRowModel=s.options.getFacetedRowModel&&s.options.getFacetedRowModel(s,t.id),t.getFacetedRowModel=()=>t._getFacetedRowModel?t._getFacetedRowModel():s.getPreFilteredRowModel(),t._getFacetedUniqueValues=s.options.getFacetedUniqueValues&&s.options.getFacetedUniqueValues(s,t.id),t.getFacetedUniqueValues=()=>t._getFacetedUniqueValues?t._getFacetedUniqueValues():new Map,t._getFacetedMinMaxValues=s.options.getFacetedMinMaxValues&&s.options.getFacetedMinMaxValues(s,t.id),t.getFacetedMinMaxValues=()=>{if(t._getFacetedMinMaxValues)return t._getFacetedMinMaxValues()}}},Wf=(t,s,a)=>{var r,n;const i=a==null||(r=a.toString())==null?void 0:r.toLowerCase();return!!(!((n=t.getValue(s))==null||(n=n.toString())==null||(n=n.toLowerCase())==null)&&n.includes(i))};Wf.autoRemove=t=>ga(t);const Gf=(t,s,a)=>{var r;return!!(!((r=t.getValue(s))==null||(r=r.toString())==null)&&r.includes(a))};Gf.autoRemove=t=>ga(t);const Yf=(t,s,a)=>{var r;return((r=t.getValue(s))==null||(r=r.toString())==null?void 0:r.toLowerCase())===(a==null?void 0:a.toLowerCase())};Yf.autoRemove=t=>ga(t);const Zf=(t,s,a)=>{var r;return(r=t.getValue(s))==null?void 0:r.includes(a)};Zf.autoRemove=t=>ga(t);const Jf=(t,s,a)=>!a.some(r=>{var n;return!((n=t.getValue(s))!=null&&n.includes(r))});Jf.autoRemove=t=>ga(t)||!(t!=null&&t.length);const Xf=(t,s,a)=>a.some(r=>{var n;return(n=t.getValue(s))==null?void 0:n.includes(r)});Xf.autoRemove=t=>ga(t)||!(t!=null&&t.length);const Kf=(t,s,a)=>t.getValue(s)===a;Kf.autoRemove=t=>ga(t);const Qf=(t,s,a)=>t.getValue(s)==a;Qf.autoRemove=t=>ga(t);const $d=(t,s,a)=>{let[r,n]=a;const i=t.getValue(s);return i>=r&&i<=n};$d.resolveFilterValue=t=>{let[s,a]=t,r=typeof s!="number"?parseFloat(s):s,n=typeof a!="number"?parseFloat(a):a,i=s===null||Number.isNaN(r)?-1/0:r,l=a===null||Number.isNaN(n)?1/0:n;if(i>l){const c=i;i=l,l=c}return[i,l]};$d.autoRemove=t=>ga(t)||ga(t[0])&&ga(t[1]);const za={includesString:Wf,includesStringSensitive:Gf,equalsString:Yf,arrIncludes:Zf,arrIncludesAll:Jf,arrIncludesSome:Xf,equals:Kf,weakEquals:Qf,inNumberRange:$d};function ga(t){return t==null||t===""}const tE={getDefaultColumnDef:()=>({filterFn:"auto"}),getInitialState:t=>({columnFilters:[],...t}),getDefaultOptions:t=>({onColumnFiltersChange:Xs("columnFilters",t),filterFromLeafRows:!1,maxLeafRowFilterDepth:100}),createColumn:(t,s)=>{t.getAutoFilterFn=()=>{const a=s.getCoreRowModel().flatRows[0],r=a==null?void 0:a.getValue(t.id);return typeof r=="string"?za.includesString:typeof r=="number"?za.inNumberRange:typeof r=="boolean"||r!==null&&typeof r=="object"?za.equals:Array.isArray(r)?za.arrIncludes:za.weakEquals},t.getFilterFn=()=>{var a,r;return Kl(t.columnDef.filterFn)?t.columnDef.filterFn:t.columnDef.filterFn==="auto"?t.getAutoFilterFn():(a=(r=s.options.filterFns)==null?void 0:r[t.columnDef.filterFn])!=null?a:za[t.columnDef.filterFn]},t.getCanFilter=()=>{var a,r,n;return((a=t.columnDef.enableColumnFilter)!=null?a:!0)&&((r=s.options.enableColumnFilters)!=null?r:!0)&&((n=s.options.enableFilters)!=null?n:!0)&&!!t.accessorFn},t.getIsFiltered=()=>t.getFilterIndex()>-1,t.getFilterValue=()=>{var a;return(a=s.getState().columnFilters)==null||(a=a.find(r=>r.id===t.id))==null?void 0:a.value},t.getFilterIndex=()=>{var a,r;return(a=(r=s.getState().columnFilters)==null?void 0:r.findIndex(n=>n.id===t.id))!=null?a:-1},t.setFilterValue=a=>{s.setColumnFilters(r=>{const n=t.getFilterFn(),i=r==null?void 0:r.find(x=>x.id===t.id),l=nr(a,i?i.value:void 0);if(om(n,l,t)){var c;return(c=r==null?void 0:r.filter(x=>x.id!==t.id))!=null?c:[]}const o={id:t.id,value:l};if(i){var d;return(d=r==null?void 0:r.map(x=>x.id===t.id?o:x))!=null?d:[]}return r!=null&&r.length?[...r,o]:[o]})}},createRow:(t,s)=>{t.columnFilters={},t.columnFiltersMeta={}},createTable:t=>{t.setColumnFilters=s=>{const a=t.getAllLeafColumns(),r=n=>{var i;return(i=nr(s,n))==null?void 0:i.filter(l=>{const c=a.find(o=>o.id===l.id);if(c){const o=c.getFilterFn();if(om(o,l.value,c))return!1}return!0})};t.options.onColumnFiltersChange==null||t.options.onColumnFiltersChange(r)},t.resetColumnFilters=s=>{var a,r;t.setColumnFilters(s?[]:(a=(r=t.initialState)==null?void 0:r.columnFilters)!=null?a:[])},t.getPreFilteredRowModel=()=>t.getCoreRowModel(),t.getFilteredRowModel=()=>(!t._getFilteredRowModel&&t.options.getFilteredRowModel&&(t._getFilteredRowModel=t.options.getFilteredRowModel(t)),t.options.manualFiltering||!t._getFilteredRowModel?t.getPreFilteredRowModel():t._getFilteredRowModel())}};function om(t,s,a){return(t&&t.autoRemove?t.autoRemove(s,a):!1)||typeof s>"u"||typeof s=="string"&&!s}const sE=(t,s,a)=>a.reduce((r,n)=>{const i=n.getValue(t);return r+(typeof i=="number"?i:0)},0),aE=(t,s,a)=>{let r;return a.forEach(n=>{const i=n.getValue(t);i!=null&&(r>i||r===void 0&&i>=i)&&(r=i)}),r},rE=(t,s,a)=>{let r;return a.forEach(n=>{const i=n.getValue(t);i!=null&&(r<i||r===void 0&&i>=i)&&(r=i)}),r},nE=(t,s,a)=>{let r,n;return a.forEach(i=>{const l=i.getValue(t);l!=null&&(r===void 0?l>=l&&(r=n=l):(r>l&&(r=l),n<l&&(n=l)))}),[r,n]},iE=(t,s)=>{let a=0,r=0;if(s.forEach(n=>{let i=n.getValue(t);i!=null&&(i=+i)>=i&&(++a,r+=i)}),a)return r/a},lE=(t,s)=>{if(!s.length)return;const a=s.map(i=>i.getValue(t));if(!YA(a))return;if(a.length===1)return a[0];const r=Math.floor(a.length/2),n=a.sort((i,l)=>i-l);return a.length%2!==0?n[r]:(n[r-1]+n[r])/2},cE=(t,s)=>Array.from(new Set(s.map(a=>a.getValue(t))).values()),oE=(t,s)=>new Set(s.map(a=>a.getValue(t))).size,dE=(t,s)=>s.length,Tc={sum:sE,min:aE,max:rE,extent:nE,mean:iE,median:lE,unique:cE,uniqueCount:oE,count:dE},xE={getDefaultColumnDef:()=>({aggregatedCell:t=>{var s,a;return(s=(a=t.getValue())==null||a.toString==null?void 0:a.toString())!=null?s:null},aggregationFn:"auto"}),getInitialState:t=>({grouping:[],...t}),getDefaultOptions:t=>({onGroupingChange:Xs("grouping",t),groupedColumnMode:"reorder"}),createColumn:(t,s)=>{t.toggleGrouping=()=>{s.setGrouping(a=>a!=null&&a.includes(t.id)?a.filter(r=>r!==t.id):[...a??[],t.id])},t.getCanGroup=()=>{var a,r;return((a=t.columnDef.enableGrouping)!=null?a:!0)&&((r=s.options.enableGrouping)!=null?r:!0)&&(!!t.accessorFn||!!t.columnDef.getGroupingValue)},t.getIsGrouped=()=>{var a;return(a=s.getState().grouping)==null?void 0:a.includes(t.id)},t.getGroupedIndex=()=>{var a;return(a=s.getState().grouping)==null?void 0:a.indexOf(t.id)},t.getToggleGroupingHandler=()=>{const a=t.getCanGroup();return()=>{a&&t.toggleGrouping()}},t.getAutoAggregationFn=()=>{const a=s.getCoreRowModel().flatRows[0],r=a==null?void 0:a.getValue(t.id);if(typeof r=="number")return Tc.sum;if(Object.prototype.toString.call(r)==="[object Date]")return Tc.extent},t.getAggregationFn=()=>{var a,r;if(!t)throw new Error;return Kl(t.columnDef.aggregationFn)?t.columnDef.aggregationFn:t.columnDef.aggregationFn==="auto"?t.getAutoAggregationFn():(a=(r=s.options.aggregationFns)==null?void 0:r[t.columnDef.aggregationFn])!=null?a:Tc[t.columnDef.aggregationFn]}},createTable:t=>{t.setGrouping=s=>t.options.onGroupingChange==null?void 0:t.options.onGroupingChange(s),t.resetGrouping=s=>{var a,r;t.setGrouping(s?[]:(a=(r=t.initialState)==null?void 0:r.grouping)!=null?a:[])},t.getPreGroupedRowModel=()=>t.getFilteredRowModel(),t.getGroupedRowModel=()=>(!t._getGroupedRowModel&&t.options.getGroupedRowModel&&(t._getGroupedRowModel=t.options.getGroupedRowModel(t)),t.options.manualGrouping||!t._getGroupedRowModel?t.getPreGroupedRowModel():t._getGroupedRowModel())},createRow:(t,s)=>{t.getIsGrouped=()=>!!t.groupingColumnId,t.getGroupingValue=a=>{if(t._groupingValuesCache.hasOwnProperty(a))return t._groupingValuesCache[a];const r=s.getColumn(a);return r!=null&&r.columnDef.getGroupingValue?(t._groupingValuesCache[a]=r.columnDef.getGroupingValue(t.original),t._groupingValuesCache[a]):t.getValue(a)},t._groupingValuesCache={}},createCell:(t,s,a,r)=>{t.getIsGrouped=()=>s.getIsGrouped()&&s.id===a.groupingColumnId,t.getIsPlaceholder=()=>!t.getIsGrouped()&&s.getIsGrouped(),t.getIsAggregated=()=>{var n;return!t.getIsGrouped()&&!t.getIsPlaceholder()&&!!((n=a.subRows)!=null&&n.length)}}};function uE(t,s,a){if(!(s!=null&&s.length)||!a)return t;const r=t.filter(i=>!s.includes(i.id));return a==="remove"?r:[...s.map(i=>t.find(l=>l.id===i)).filter(Boolean),...r]}const mE={getInitialState:t=>({columnOrder:[],...t}),getDefaultOptions:t=>({onColumnOrderChange:Xs("columnOrder",t)}),createColumn:(t,s)=>{t.getIndex=We(a=>[ai(s,a)],a=>a.findIndex(r=>r.id===t.id),Ge(s.options,"debugColumns")),t.getIsFirstColumn=a=>{var r;return((r=ai(s,a)[0])==null?void 0:r.id)===t.id},t.getIsLastColumn=a=>{var r;const n=ai(s,a);return((r=n[n.length-1])==null?void 0:r.id)===t.id}},createTable:t=>{t.setColumnOrder=s=>t.options.onColumnOrderChange==null?void 0:t.options.onColumnOrderChange(s),t.resetColumnOrder=s=>{var a;t.setColumnOrder(s?[]:(a=t.initialState.columnOrder)!=null?a:[])},t._getOrderColumnsFn=We(()=>[t.getState().columnOrder,t.getState().grouping,t.options.groupedColumnMode],(s,a,r)=>n=>{let i=[];if(!(s!=null&&s.length))i=n;else{const l=[...s],c=[...n];for(;c.length&&l.length;){const o=l.shift(),d=c.findIndex(x=>x.id===o);d>-1&&i.push(c.splice(d,1)[0])}i=[...i,...c]}return uE(i,a,r)},Ge(t.options,"debugTable"))}},Dc=()=>({left:[],right:[]}),hE={getInitialState:t=>({columnPinning:Dc(),...t}),getDefaultOptions:t=>({onColumnPinningChange:Xs("columnPinning",t)}),createColumn:(t,s)=>{t.pin=a=>{const r=t.getLeafColumns().map(n=>n.id).filter(Boolean);s.setColumnPinning(n=>{var i,l;if(a==="right"){var c,o;return{left:((c=n==null?void 0:n.left)!=null?c:[]).filter(u=>!(r!=null&&r.includes(u))),right:[...((o=n==null?void 0:n.right)!=null?o:[]).filter(u=>!(r!=null&&r.includes(u))),...r]}}if(a==="left"){var d,x;return{left:[...((d=n==null?void 0:n.left)!=null?d:[]).filter(u=>!(r!=null&&r.includes(u))),...r],right:((x=n==null?void 0:n.right)!=null?x:[]).filter(u=>!(r!=null&&r.includes(u)))}}return{left:((i=n==null?void 0:n.left)!=null?i:[]).filter(u=>!(r!=null&&r.includes(u))),right:((l=n==null?void 0:n.right)!=null?l:[]).filter(u=>!(r!=null&&r.includes(u)))}})},t.getCanPin=()=>t.getLeafColumns().some(r=>{var n,i,l;return((n=r.columnDef.enablePinning)!=null?n:!0)&&((i=(l=s.options.enableColumnPinning)!=null?l:s.options.enablePinning)!=null?i:!0)}),t.getIsPinned=()=>{const a=t.getLeafColumns().map(c=>c.id),{left:r,right:n}=s.getState().columnPinning,i=a.some(c=>r==null?void 0:r.includes(c)),l=a.some(c=>n==null?void 0:n.includes(c));return i?"left":l?"right":!1},t.getPinnedIndex=()=>{var a,r;const n=t.getIsPinned();return n?(a=(r=s.getState().columnPinning)==null||(r=r[n])==null?void 0:r.indexOf(t.id))!=null?a:-1:0}},createRow:(t,s)=>{t.getCenterVisibleCells=We(()=>[t._getAllVisibleCells(),s.getState().columnPinning.left,s.getState().columnPinning.right],(a,r,n)=>{const i=[...r??[],...n??[]];return a.filter(l=>!i.includes(l.column.id))},Ge(s.options,"debugRows")),t.getLeftVisibleCells=We(()=>[t._getAllVisibleCells(),s.getState().columnPinning.left],(a,r)=>(r??[]).map(i=>a.find(l=>l.column.id===i)).filter(Boolean).map(i=>({...i,position:"left"})),Ge(s.options,"debugRows")),t.getRightVisibleCells=We(()=>[t._getAllVisibleCells(),s.getState().columnPinning.right],(a,r)=>(r??[]).map(i=>a.find(l=>l.column.id===i)).filter(Boolean).map(i=>({...i,position:"right"})),Ge(s.options,"debugRows"))},createTable:t=>{t.setColumnPinning=s=>t.options.onColumnPinningChange==null?void 0:t.options.onColumnPinningChange(s),t.resetColumnPinning=s=>{var a,r;return t.setColumnPinning(s?Dc():(a=(r=t.initialState)==null?void 0:r.columnPinning)!=null?a:Dc())},t.getIsSomeColumnsPinned=s=>{var a;const r=t.getState().columnPinning;if(!s){var n,i;return!!((n=r.left)!=null&&n.length||(i=r.right)!=null&&i.length)}return!!((a=r[s])!=null&&a.length)},t.getLeftLeafColumns=We(()=>[t.getAllLeafColumns(),t.getState().columnPinning.left],(s,a)=>(a??[]).map(r=>s.find(n=>n.id===r)).filter(Boolean),Ge(t.options,"debugColumns")),t.getRightLeafColumns=We(()=>[t.getAllLeafColumns(),t.getState().columnPinning.right],(s,a)=>(a??[]).map(r=>s.find(n=>n.id===r)).filter(Boolean),Ge(t.options,"debugColumns")),t.getCenterLeafColumns=We(()=>[t.getAllLeafColumns(),t.getState().columnPinning.left,t.getState().columnPinning.right],(s,a,r)=>{const n=[...a??[],...r??[]];return s.filter(i=>!n.includes(i.id))},Ge(t.options,"debugColumns"))}};function fE(t){return t||(typeof document<"u"?document:null)}const Qi={size:150,minSize:20,maxSize:Number.MAX_SAFE_INTEGER},Rc=()=>({startOffset:null,startSize:null,deltaOffset:null,deltaPercentage:null,isResizingColumn:!1,columnSizingStart:[]}),pE={getDefaultColumnDef:()=>Qi,getInitialState:t=>({columnSizing:{},columnSizingInfo:Rc(),...t}),getDefaultOptions:t=>({columnResizeMode:"onEnd",columnResizeDirection:"ltr",onColumnSizingChange:Xs("columnSizing",t),onColumnSizingInfoChange:Xs("columnSizingInfo",t)}),createColumn:(t,s)=>{t.getSize=()=>{var a,r,n;const i=s.getState().columnSizing[t.id];return Math.min(Math.max((a=t.columnDef.minSize)!=null?a:Qi.minSize,(r=i??t.columnDef.size)!=null?r:Qi.size),(n=t.columnDef.maxSize)!=null?n:Qi.maxSize)},t.getStart=We(a=>[a,ai(s,a),s.getState().columnSizing],(a,r)=>r.slice(0,t.getIndex(a)).reduce((n,i)=>n+i.getSize(),0),Ge(s.options,"debugColumns")),t.getAfter=We(a=>[a,ai(s,a),s.getState().columnSizing],(a,r)=>r.slice(t.getIndex(a)+1).reduce((n,i)=>n+i.getSize(),0),Ge(s.options,"debugColumns")),t.resetSize=()=>{s.setColumnSizing(a=>{let{[t.id]:r,...n}=a;return n})},t.getCanResize=()=>{var a,r;return((a=t.columnDef.enableResizing)!=null?a:!0)&&((r=s.options.enableColumnResizing)!=null?r:!0)},t.getIsResizing=()=>s.getState().columnSizingInfo.isResizingColumn===t.id},createHeader:(t,s)=>{t.getSize=()=>{let a=0;const r=n=>{if(n.subHeaders.length)n.subHeaders.forEach(r);else{var i;a+=(i=n.column.getSize())!=null?i:0}};return r(t),a},t.getStart=()=>{if(t.index>0){const a=t.headerGroup.headers[t.index-1];return a.getStart()+a.getSize()}return 0},t.getResizeHandler=a=>{const r=s.getColumn(t.column.id),n=r==null?void 0:r.getCanResize();return i=>{if(!r||!n||(i.persist==null||i.persist(),Pc(i)&&i.touches&&i.touches.length>1))return;const l=t.getSize(),c=t?t.getLeafHeaders().map(j=>[j.column.id,j.column.getSize()]):[[r.id,r.getSize()]],o=Pc(i)?Math.round(i.touches[0].clientX):i.clientX,d={},x=(j,v)=>{typeof v=="number"&&(s.setColumnSizingInfo(w=>{var b,A;const N=s.options.columnResizeDirection==="rtl"?-1:1,C=(v-((b=w==null?void 0:w.startOffset)!=null?b:0))*N,k=Math.max(C/((A=w==null?void 0:w.startSize)!=null?A:0),-.999999);return w.columnSizingStart.forEach(S=>{let[F,R]=S;d[F]=Math.round(Math.max(R+R*k,0)*100)/100}),{...w,deltaOffset:C,deltaPercentage:k}}),(s.options.columnResizeMode==="onChange"||j==="end")&&s.setColumnSizing(w=>({...w,...d})))},u=j=>x("move",j),m=j=>{x("end",j),s.setColumnSizingInfo(v=>({...v,isResizingColumn:!1,startOffset:null,startSize:null,deltaOffset:null,deltaPercentage:null,columnSizingStart:[]}))},f=fE(a),g={moveHandler:j=>u(j.clientX),upHandler:j=>{f==null||f.removeEventListener("mousemove",g.moveHandler),f==null||f.removeEventListener("mouseup",g.upHandler),m(j.clientX)}},h={moveHandler:j=>(j.cancelable&&(j.preventDefault(),j.stopPropagation()),u(j.touches[0].clientX),!1),upHandler:j=>{var v;f==null||f.removeEventListener("touchmove",h.moveHandler),f==null||f.removeEventListener("touchend",h.upHandler),j.cancelable&&(j.preventDefault(),j.stopPropagation()),m((v=j.touches[0])==null?void 0:v.clientX)}},p=gE()?{passive:!1}:!1;Pc(i)?(f==null||f.addEventListener("touchmove",h.moveHandler,p),f==null||f.addEventListener("touchend",h.upHandler,p)):(f==null||f.addEventListener("mousemove",g.moveHandler,p),f==null||f.addEventListener("mouseup",g.upHandler,p)),s.setColumnSizingInfo(j=>({...j,startOffset:o,startSize:l,deltaOffset:0,deltaPercentage:0,columnSizingStart:c,isResizingColumn:r.id}))}}},createTable:t=>{t.setColumnSizing=s=>t.options.onColumnSizingChange==null?void 0:t.options.onColumnSizingChange(s),t.setColumnSizingInfo=s=>t.options.onColumnSizingInfoChange==null?void 0:t.options.onColumnSizingInfoChange(s),t.resetColumnSizing=s=>{var a;t.setColumnSizing(s?{}:(a=t.initialState.columnSizing)!=null?a:{})},t.resetHeaderSizeInfo=s=>{var a;t.setColumnSizingInfo(s?Rc():(a=t.initialState.columnSizingInfo)!=null?a:Rc())},t.getTotalSize=()=>{var s,a;return(s=(a=t.getHeaderGroups()[0])==null?void 0:a.headers.reduce((r,n)=>r+n.getSize(),0))!=null?s:0},t.getLeftTotalSize=()=>{var s,a;return(s=(a=t.getLeftHeaderGroups()[0])==null?void 0:a.headers.reduce((r,n)=>r+n.getSize(),0))!=null?s:0},t.getCenterTotalSize=()=>{var s,a;return(s=(a=t.getCenterHeaderGroups()[0])==null?void 0:a.headers.reduce((r,n)=>r+n.getSize(),0))!=null?s:0},t.getRightTotalSize=()=>{var s,a;return(s=(a=t.getRightHeaderGroups()[0])==null?void 0:a.headers.reduce((r,n)=>r+n.getSize(),0))!=null?s:0}}};let el=null;function gE(){if(typeof el=="boolean")return el;let t=!1;try{const s={get passive(){return t=!0,!1}},a=()=>{};window.addEventListener("test",a,s),window.removeEventListener("test",a)}catch{t=!1}return el=t,el}function Pc(t){return t.type==="touchstart"}const yE={getInitialState:t=>({columnVisibility:{},...t}),getDefaultOptions:t=>({onColumnVisibilityChange:Xs("columnVisibility",t)}),createColumn:(t,s)=>{t.toggleVisibility=a=>{t.getCanHide()&&s.setColumnVisibility(r=>({...r,[t.id]:a??!t.getIsVisible()}))},t.getIsVisible=()=>{var a,r;const n=t.columns;return(a=n.length?n.some(i=>i.getIsVisible()):(r=s.getState().columnVisibility)==null?void 0:r[t.id])!=null?a:!0},t.getCanHide=()=>{var a,r;return((a=t.columnDef.enableHiding)!=null?a:!0)&&((r=s.options.enableHiding)!=null?r:!0)},t.getToggleVisibilityHandler=()=>a=>{t.toggleVisibility==null||t.toggleVisibility(a.target.checked)}},createRow:(t,s)=>{t._getAllVisibleCells=We(()=>[t.getAllCells(),s.getState().columnVisibility],a=>a.filter(r=>r.column.getIsVisible()),Ge(s.options,"debugRows")),t.getVisibleCells=We(()=>[t.getLeftVisibleCells(),t.getCenterVisibleCells(),t.getRightVisibleCells()],(a,r,n)=>[...a,...r,...n],Ge(s.options,"debugRows"))},createTable:t=>{const s=(a,r)=>We(()=>[r(),r().filter(n=>n.getIsVisible()).map(n=>n.id).join("_")],n=>n.filter(i=>i.getIsVisible==null?void 0:i.getIsVisible()),Ge(t.options,"debugColumns"));t.getVisibleFlatColumns=s("getVisibleFlatColumns",()=>t.getAllFlatColumns()),t.getVisibleLeafColumns=s("getVisibleLeafColumns",()=>t.getAllLeafColumns()),t.getLeftVisibleLeafColumns=s("getLeftVisibleLeafColumns",()=>t.getLeftLeafColumns()),t.getRightVisibleLeafColumns=s("getRightVisibleLeafColumns",()=>t.getRightLeafColumns()),t.getCenterVisibleLeafColumns=s("getCenterVisibleLeafColumns",()=>t.getCenterLeafColumns()),t.setColumnVisibility=a=>t.options.onColumnVisibilityChange==null?void 0:t.options.onColumnVisibilityChange(a),t.resetColumnVisibility=a=>{var r;t.setColumnVisibility(a?{}:(r=t.initialState.columnVisibility)!=null?r:{})},t.toggleAllColumnsVisible=a=>{var r;a=(r=a)!=null?r:!t.getIsAllColumnsVisible(),t.setColumnVisibility(t.getAllLeafColumns().reduce((n,i)=>({...n,[i.id]:a||!(i.getCanHide!=null&&i.getCanHide())}),{}))},t.getIsAllColumnsVisible=()=>!t.getAllLeafColumns().some(a=>!(a.getIsVisible!=null&&a.getIsVisible())),t.getIsSomeColumnsVisible=()=>t.getAllLeafColumns().some(a=>a.getIsVisible==null?void 0:a.getIsVisible()),t.getToggleAllColumnsVisibilityHandler=()=>a=>{var r;t.toggleAllColumnsVisible((r=a.target)==null?void 0:r.checked)}}};function ai(t,s){return s?s==="center"?t.getCenterVisibleLeafColumns():s==="left"?t.getLeftVisibleLeafColumns():t.getRightVisibleLeafColumns():t.getVisibleLeafColumns()}const bE={createTable:t=>{t._getGlobalFacetedRowModel=t.options.getFacetedRowModel&&t.options.getFacetedRowModel(t,"__global__"),t.getGlobalFacetedRowModel=()=>t.options.manualFiltering||!t._getGlobalFacetedRowModel?t.getPreFilteredRowModel():t._getGlobalFacetedRowModel(),t._getGlobalFacetedUniqueValues=t.options.getFacetedUniqueValues&&t.options.getFacetedUniqueValues(t,"__global__"),t.getGlobalFacetedUniqueValues=()=>t._getGlobalFacetedUniqueValues?t._getGlobalFacetedUniqueValues():new Map,t._getGlobalFacetedMinMaxValues=t.options.getFacetedMinMaxValues&&t.options.getFacetedMinMaxValues(t,"__global__"),t.getGlobalFacetedMinMaxValues=()=>{if(t._getGlobalFacetedMinMaxValues)return t._getGlobalFacetedMinMaxValues()}}},vE={getInitialState:t=>({globalFilter:void 0,...t}),getDefaultOptions:t=>({onGlobalFilterChange:Xs("globalFilter",t),globalFilterFn:"auto",getColumnCanGlobalFilter:s=>{var a;const r=(a=t.getCoreRowModel().flatRows[0])==null||(a=a._getAllCellsByColumnId()[s.id])==null?void 0:a.getValue();return typeof r=="string"||typeof r=="number"}}),createColumn:(t,s)=>{t.getCanGlobalFilter=()=>{var a,r,n,i;return((a=t.columnDef.enableGlobalFilter)!=null?a:!0)&&((r=s.options.enableGlobalFilter)!=null?r:!0)&&((n=s.options.enableFilters)!=null?n:!0)&&((i=s.options.getColumnCanGlobalFilter==null?void 0:s.options.getColumnCanGlobalFilter(t))!=null?i:!0)&&!!t.accessorFn}},createTable:t=>{t.getGlobalAutoFilterFn=()=>za.includesString,t.getGlobalFilterFn=()=>{var s,a;const{globalFilterFn:r}=t.options;return Kl(r)?r:r==="auto"?t.getGlobalAutoFilterFn():(s=(a=t.options.filterFns)==null?void 0:a[r])!=null?s:za[r]},t.setGlobalFilter=s=>{t.options.onGlobalFilterChange==null||t.options.onGlobalFilterChange(s)},t.resetGlobalFilter=s=>{t.setGlobalFilter(s?void 0:t.initialState.globalFilter)}}},jE={getInitialState:t=>({expanded:{},...t}),getDefaultOptions:t=>({onExpandedChange:Xs("expanded",t),paginateExpandedRows:!0}),createTable:t=>{let s=!1,a=!1;t._autoResetExpanded=()=>{var r,n;if(!s){t._queue(()=>{s=!0});return}if((r=(n=t.options.autoResetAll)!=null?n:t.options.autoResetExpanded)!=null?r:!t.options.manualExpanding){if(a)return;a=!0,t._queue(()=>{t.resetExpanded(),a=!1})}},t.setExpanded=r=>t.options.onExpandedChange==null?void 0:t.options.onExpandedChange(r),t.toggleAllRowsExpanded=r=>{r??!t.getIsAllRowsExpanded()?t.setExpanded(!0):t.setExpanded({})},t.resetExpanded=r=>{var n,i;t.setExpanded(r?{}:(n=(i=t.initialState)==null?void 0:i.expanded)!=null?n:{})},t.getCanSomeRowsExpand=()=>t.getPrePaginationRowModel().flatRows.some(r=>r.getCanExpand()),t.getToggleAllRowsExpandedHandler=()=>r=>{r.persist==null||r.persist(),t.toggleAllRowsExpanded()},t.getIsSomeRowsExpanded=()=>{const r=t.getState().expanded;return r===!0||Object.values(r).some(Boolean)},t.getIsAllRowsExpanded=()=>{const r=t.getState().expanded;return typeof r=="boolean"?r===!0:!(!Object.keys(r).length||t.getRowModel().flatRows.some(n=>!n.getIsExpanded()))},t.getExpandedDepth=()=>{let r=0;return(t.getState().expanded===!0?Object.keys(t.getRowModel().rowsById):Object.keys(t.getState().expanded)).forEach(i=>{const l=i.split(".");r=Math.max(r,l.length)}),r},t.getPreExpandedRowModel=()=>t.getSortedRowModel(),t.getExpandedRowModel=()=>(!t._getExpandedRowModel&&t.options.getExpandedRowModel&&(t._getExpandedRowModel=t.options.getExpandedRowModel(t)),t.options.manualExpanding||!t._getExpandedRowModel?t.getPreExpandedRowModel():t._getExpandedRowModel())},createRow:(t,s)=>{t.toggleExpanded=a=>{s.setExpanded(r=>{var n;const i=r===!0?!0:!!(r!=null&&r[t.id]);let l={};if(r===!0?Object.keys(s.getRowModel().rowsById).forEach(c=>{l[c]=!0}):l=r,a=(n=a)!=null?n:!i,!i&&a)return{...l,[t.id]:!0};if(i&&!a){const{[t.id]:c,...o}=l;return o}return r})},t.getIsExpanded=()=>{var a;const r=s.getState().expanded;return!!((a=s.options.getIsRowExpanded==null?void 0:s.options.getIsRowExpanded(t))!=null?a:r===!0||r!=null&&r[t.id])},t.getCanExpand=()=>{var a,r,n;return(a=s.options.getRowCanExpand==null?void 0:s.options.getRowCanExpand(t))!=null?a:((r=s.options.enableExpanding)!=null?r:!0)&&!!((n=t.subRows)!=null&&n.length)},t.getIsAllParentsExpanded=()=>{let a=!0,r=t;for(;a&&r.parentId;)r=s.getRow(r.parentId,!0),a=r.getIsExpanded();return a},t.getToggleExpandedHandler=()=>{const a=t.getCanExpand();return()=>{a&&t.toggleExpanded()}}}},_o=0,Fo=10,Ic=()=>({pageIndex:_o,pageSize:Fo}),NE={getInitialState:t=>({...t,pagination:{...Ic(),...t==null?void 0:t.pagination}}),getDefaultOptions:t=>({onPaginationChange:Xs("pagination",t)}),createTable:t=>{let s=!1,a=!1;t._autoResetPageIndex=()=>{var r,n;if(!s){t._queue(()=>{s=!0});return}if((r=(n=t.options.autoResetAll)!=null?n:t.options.autoResetPageIndex)!=null?r:!t.options.manualPagination){if(a)return;a=!0,t._queue(()=>{t.resetPageIndex(),a=!1})}},t.setPagination=r=>{const n=i=>nr(r,i);return t.options.onPaginationChange==null?void 0:t.options.onPaginationChange(n)},t.resetPagination=r=>{var n;t.setPagination(r?Ic():(n=t.initialState.pagination)!=null?n:Ic())},t.setPageIndex=r=>{t.setPagination(n=>{let i=nr(r,n.pageIndex);const l=typeof t.options.pageCount>"u"||t.options.pageCount===-1?Number.MAX_SAFE_INTEGER:t.options.pageCount-1;return i=Math.max(0,Math.min(i,l)),{...n,pageIndex:i}})},t.resetPageIndex=r=>{var n,i;t.setPageIndex(r?_o:(n=(i=t.initialState)==null||(i=i.pagination)==null?void 0:i.pageIndex)!=null?n:_o)},t.resetPageSize=r=>{var n,i;t.setPageSize(r?Fo:(n=(i=t.initialState)==null||(i=i.pagination)==null?void 0:i.pageSize)!=null?n:Fo)},t.setPageSize=r=>{t.setPagination(n=>{const i=Math.max(1,nr(r,n.pageSize)),l=n.pageSize*n.pageIndex,c=Math.floor(l/i);return{...n,pageIndex:c,pageSize:i}})},t.setPageCount=r=>t.setPagination(n=>{var i;let l=nr(r,(i=t.options.pageCount)!=null?i:-1);return typeof l=="number"&&(l=Math.max(-1,l)),{...n,pageCount:l}}),t.getPageOptions=We(()=>[t.getPageCount()],r=>{let n=[];return r&&r>0&&(n=[...new Array(r)].fill(null).map((i,l)=>l)),n},Ge(t.options,"debugTable")),t.getCanPreviousPage=()=>t.getState().pagination.pageIndex>0,t.getCanNextPage=()=>{const{pageIndex:r}=t.getState().pagination,n=t.getPageCount();return n===-1?!0:n===0?!1:r<n-1},t.previousPage=()=>t.setPageIndex(r=>r-1),t.nextPage=()=>t.setPageIndex(r=>r+1),t.firstPage=()=>t.setPageIndex(0),t.lastPage=()=>t.setPageIndex(t.getPageCount()-1),t.getPrePaginationRowModel=()=>t.getExpandedRowModel(),t.getPaginationRowModel=()=>(!t._getPaginationRowModel&&t.options.getPaginationRowModel&&(t._getPaginationRowModel=t.options.getPaginationRowModel(t)),t.options.manualPagination||!t._getPaginationRowModel?t.getPrePaginationRowModel():t._getPaginationRowModel()),t.getPageCount=()=>{var r;return(r=t.options.pageCount)!=null?r:Math.ceil(t.getRowCount()/t.getState().pagination.pageSize)},t.getRowCount=()=>{var r;return(r=t.options.rowCount)!=null?r:t.getPrePaginationRowModel().rows.length}}},$c=()=>({top:[],bottom:[]}),wE={getInitialState:t=>({rowPinning:$c(),...t}),getDefaultOptions:t=>({onRowPinningChange:Xs("rowPinning",t)}),createRow:(t,s)=>{t.pin=(a,r,n)=>{const i=r?t.getLeafRows().map(o=>{let{id:d}=o;return d}):[],l=n?t.getParentRows().map(o=>{let{id:d}=o;return d}):[],c=new Set([...l,t.id,...i]);s.setRowPinning(o=>{var d,x;if(a==="bottom"){var u,m;return{top:((u=o==null?void 0:o.top)!=null?u:[]).filter(h=>!(c!=null&&c.has(h))),bottom:[...((m=o==null?void 0:o.bottom)!=null?m:[]).filter(h=>!(c!=null&&c.has(h))),...Array.from(c)]}}if(a==="top"){var f,g;return{top:[...((f=o==null?void 0:o.top)!=null?f:[]).filter(h=>!(c!=null&&c.has(h))),...Array.from(c)],bottom:((g=o==null?void 0:o.bottom)!=null?g:[]).filter(h=>!(c!=null&&c.has(h)))}}return{top:((d=o==null?void 0:o.top)!=null?d:[]).filter(h=>!(c!=null&&c.has(h))),bottom:((x=o==null?void 0:o.bottom)!=null?x:[]).filter(h=>!(c!=null&&c.has(h)))}})},t.getCanPin=()=>{var a;const{enableRowPinning:r,enablePinning:n}=s.options;return typeof r=="function"?r(t):(a=r??n)!=null?a:!0},t.getIsPinned=()=>{const a=[t.id],{top:r,bottom:n}=s.getState().rowPinning,i=a.some(c=>r==null?void 0:r.includes(c)),l=a.some(c=>n==null?void 0:n.includes(c));return i?"top":l?"bottom":!1},t.getPinnedIndex=()=>{var a,r;const n=t.getIsPinned();if(!n)return-1;const i=(a=n==="top"?s.getTopRows():s.getBottomRows())==null?void 0:a.map(l=>{let{id:c}=l;return c});return(r=i==null?void 0:i.indexOf(t.id))!=null?r:-1}},createTable:t=>{t.setRowPinning=s=>t.options.onRowPinningChange==null?void 0:t.options.onRowPinningChange(s),t.resetRowPinning=s=>{var a,r;return t.setRowPinning(s?$c():(a=(r=t.initialState)==null?void 0:r.rowPinning)!=null?a:$c())},t.getIsSomeRowsPinned=s=>{var a;const r=t.getState().rowPinning;if(!s){var n,i;return!!((n=r.top)!=null&&n.length||(i=r.bottom)!=null&&i.length)}return!!((a=r[s])!=null&&a.length)},t._getPinnedRows=(s,a,r)=>{var n;return((n=t.options.keepPinnedRows)==null||n?(a??[]).map(l=>{const c=t.getRow(l,!0);return c.getIsAllParentsExpanded()?c:null}):(a??[]).map(l=>s.find(c=>c.id===l))).filter(Boolean).map(l=>({...l,position:r}))},t.getTopRows=We(()=>[t.getRowModel().rows,t.getState().rowPinning.top],(s,a)=>t._getPinnedRows(s,a,"top"),Ge(t.options,"debugRows")),t.getBottomRows=We(()=>[t.getRowModel().rows,t.getState().rowPinning.bottom],(s,a)=>t._getPinnedRows(s,a,"bottom"),Ge(t.options,"debugRows")),t.getCenterRows=We(()=>[t.getRowModel().rows,t.getState().rowPinning.top,t.getState().rowPinning.bottom],(s,a,r)=>{const n=new Set([...a??[],...r??[]]);return s.filter(i=>!n.has(i.id))},Ge(t.options,"debugRows"))}},kE={getInitialState:t=>({rowSelection:{},...t}),getDefaultOptions:t=>({onRowSelectionChange:Xs("rowSelection",t),enableRowSelection:!0,enableMultiRowSelection:!0,enableSubRowSelection:!0}),createTable:t=>{t.setRowSelection=s=>t.options.onRowSelectionChange==null?void 0:t.options.onRowSelectionChange(s),t.resetRowSelection=s=>{var a;return t.setRowSelection(s?{}:(a=t.initialState.rowSelection)!=null?a:{})},t.toggleAllRowsSelected=s=>{t.setRowSelection(a=>{s=typeof s<"u"?s:!t.getIsAllRowsSelected();const r={...a},n=t.getPreGroupedRowModel().flatRows;return s?n.forEach(i=>{i.getCanSelect()&&(r[i.id]=!0)}):n.forEach(i=>{delete r[i.id]}),r})},t.toggleAllPageRowsSelected=s=>t.setRowSelection(a=>{const r=typeof s<"u"?s:!t.getIsAllPageRowsSelected(),n={...a};return t.getRowModel().rows.forEach(i=>{To(n,i.id,r,!0,t)}),n}),t.getPreSelectedRowModel=()=>t.getCoreRowModel(),t.getSelectedRowModel=We(()=>[t.getState().rowSelection,t.getCoreRowModel()],(s,a)=>Object.keys(s).length?Oc(t,a):{rows:[],flatRows:[],rowsById:{}},Ge(t.options,"debugTable")),t.getFilteredSelectedRowModel=We(()=>[t.getState().rowSelection,t.getFilteredRowModel()],(s,a)=>Object.keys(s).length?Oc(t,a):{rows:[],flatRows:[],rowsById:{}},Ge(t.options,"debugTable")),t.getGroupedSelectedRowModel=We(()=>[t.getState().rowSelection,t.getSortedRowModel()],(s,a)=>Object.keys(s).length?Oc(t,a):{rows:[],flatRows:[],rowsById:{}},Ge(t.options,"debugTable")),t.getIsAllRowsSelected=()=>{const s=t.getFilteredRowModel().flatRows,{rowSelection:a}=t.getState();let r=!!(s.length&&Object.keys(a).length);return r&&s.some(n=>n.getCanSelect()&&!a[n.id])&&(r=!1),r},t.getIsAllPageRowsSelected=()=>{const s=t.getPaginationRowModel().flatRows.filter(n=>n.getCanSelect()),{rowSelection:a}=t.getState();let r=!!s.length;return r&&s.some(n=>!a[n.id])&&(r=!1),r},t.getIsSomeRowsSelected=()=>{var s;const a=Object.keys((s=t.getState().rowSelection)!=null?s:{}).length;return a>0&&a<t.getFilteredRowModel().flatRows.length},t.getIsSomePageRowsSelected=()=>{const s=t.getPaginationRowModel().flatRows;return t.getIsAllPageRowsSelected()?!1:s.filter(a=>a.getCanSelect()).some(a=>a.getIsSelected()||a.getIsSomeSelected())},t.getToggleAllRowsSelectedHandler=()=>s=>{t.toggleAllRowsSelected(s.target.checked)},t.getToggleAllPageRowsSelectedHandler=()=>s=>{t.toggleAllPageRowsSelected(s.target.checked)}},createRow:(t,s)=>{t.toggleSelected=(a,r)=>{const n=t.getIsSelected();s.setRowSelection(i=>{var l;if(a=typeof a<"u"?a:!n,t.getCanSelect()&&n===a)return i;const c={...i};return To(c,t.id,a,(l=r==null?void 0:r.selectChildren)!=null?l:!0,s),c})},t.getIsSelected=()=>{const{rowSelection:a}=s.getState();return Od(t,a)},t.getIsSomeSelected=()=>{const{rowSelection:a}=s.getState();return Do(t,a)==="some"},t.getIsAllSubRowsSelected=()=>{const{rowSelection:a}=s.getState();return Do(t,a)==="all"},t.getCanSelect=()=>{var a;return typeof s.options.enableRowSelection=="function"?s.options.enableRowSelection(t):(a=s.options.enableRowSelection)!=null?a:!0},t.getCanSelectSubRows=()=>{var a;return typeof s.options.enableSubRowSelection=="function"?s.options.enableSubRowSelection(t):(a=s.options.enableSubRowSelection)!=null?a:!0},t.getCanMultiSelect=()=>{var a;return typeof s.options.enableMultiRowSelection=="function"?s.options.enableMultiRowSelection(t):(a=s.options.enableMultiRowSelection)!=null?a:!0},t.getToggleSelectedHandler=()=>{const a=t.getCanSelect();return r=>{var n;a&&t.toggleSelected((n=r.target)==null?void 0:n.checked)}}}},To=(t,s,a,r,n)=>{var i;const l=n.getRow(s,!0);a?(l.getCanMultiSelect()||Object.keys(t).forEach(c=>delete t[c]),l.getCanSelect()&&(t[s]=!0)):delete t[s],r&&(i=l.subRows)!=null&&i.length&&l.getCanSelectSubRows()&&l.subRows.forEach(c=>To(t,c.id,a,r,n))};function Oc(t,s){const a=t.getState().rowSelection,r=[],n={},i=function(l,c){return l.map(o=>{var d;const x=Od(o,a);if(x&&(r.push(o),n[o.id]=o),(d=o.subRows)!=null&&d.length&&(o={...o,subRows:i(o.subRows)}),x)return o}).filter(Boolean)};return{rows:i(s.rows),flatRows:r,rowsById:n}}function Od(t,s){var a;return(a=s[t.id])!=null?a:!1}function Do(t,s,a){var r;if(!((r=t.subRows)!=null&&r.length))return!1;let n=!0,i=!1;return t.subRows.forEach(l=>{if(!(i&&!n)&&(l.getCanSelect()&&(Od(l,s)?i=!0:n=!1),l.subRows&&l.subRows.length)){const c=Do(l,s);c==="all"?i=!0:(c==="some"&&(i=!0),n=!1)}}),n?"all":i?"some":!1}const Ro=/([0-9]+)/gm,SE=(t,s,a)=>ep(dr(t.getValue(a)).toLowerCase(),dr(s.getValue(a)).toLowerCase()),CE=(t,s,a)=>ep(dr(t.getValue(a)),dr(s.getValue(a))),AE=(t,s,a)=>Ld(dr(t.getValue(a)).toLowerCase(),dr(s.getValue(a)).toLowerCase()),EE=(t,s,a)=>Ld(dr(t.getValue(a)),dr(s.getValue(a))),_E=(t,s,a)=>{const r=t.getValue(a),n=s.getValue(a);return r>n?1:r<n?-1:0},FE=(t,s,a)=>Ld(t.getValue(a),s.getValue(a));function Ld(t,s){return t===s?0:t>s?1:-1}function dr(t){return typeof t=="number"?isNaN(t)||t===1/0||t===-1/0?"":String(t):typeof t=="string"?t:""}function ep(t,s){const a=t.split(Ro).filter(Boolean),r=s.split(Ro).filter(Boolean);for(;a.length&&r.length;){const n=a.shift(),i=r.shift(),l=parseInt(n,10),c=parseInt(i,10),o=[l,c].sort();if(isNaN(o[0])){if(n>i)return 1;if(i>n)return-1;continue}if(isNaN(o[1]))return isNaN(l)?-1:1;if(l>c)return 1;if(c>l)return-1}return a.length-r.length}const Mn={alphanumeric:SE,alphanumericCaseSensitive:CE,text:AE,textCaseSensitive:EE,datetime:_E,basic:FE},TE={getInitialState:t=>({sorting:[],...t}),getDefaultColumnDef:()=>({sortingFn:"auto",sortUndefined:1}),getDefaultOptions:t=>({onSortingChange:Xs("sorting",t),isMultiSortEvent:s=>s.shiftKey}),createColumn:(t,s)=>{t.getAutoSortingFn=()=>{const a=s.getFilteredRowModel().flatRows.slice(10);let r=!1;for(const n of a){const i=n==null?void 0:n.getValue(t.id);if(Object.prototype.toString.call(i)==="[object Date]")return Mn.datetime;if(typeof i=="string"&&(r=!0,i.split(Ro).length>1))return Mn.alphanumeric}return r?Mn.text:Mn.basic},t.getAutoSortDir=()=>{const a=s.getFilteredRowModel().flatRows[0];return typeof(a==null?void 0:a.getValue(t.id))=="string"?"asc":"desc"},t.getSortingFn=()=>{var a,r;if(!t)throw new Error;return Kl(t.columnDef.sortingFn)?t.columnDef.sortingFn:t.columnDef.sortingFn==="auto"?t.getAutoSortingFn():(a=(r=s.options.sortingFns)==null?void 0:r[t.columnDef.sortingFn])!=null?a:Mn[t.columnDef.sortingFn]},t.toggleSorting=(a,r)=>{const n=t.getNextSortingOrder(),i=typeof a<"u"&&a!==null;s.setSorting(l=>{const c=l==null?void 0:l.find(f=>f.id===t.id),o=l==null?void 0:l.findIndex(f=>f.id===t.id);let d=[],x,u=i?a:n==="desc";if(l!=null&&l.length&&t.getCanMultiSort()&&r?c?x="toggle":x="add":l!=null&&l.length&&o!==l.length-1?x="replace":c?x="toggle":x="replace",x==="toggle"&&(i||n||(x="remove")),x==="add"){var m;d=[...l,{id:t.id,desc:u}],d.splice(0,d.length-((m=s.options.maxMultiSortColCount)!=null?m:Number.MAX_SAFE_INTEGER))}else x==="toggle"?d=l.map(f=>f.id===t.id?{...f,desc:u}:f):x==="remove"?d=l.filter(f=>f.id!==t.id):d=[{id:t.id,desc:u}];return d})},t.getFirstSortDir=()=>{var a,r;return((a=(r=t.columnDef.sortDescFirst)!=null?r:s.options.sortDescFirst)!=null?a:t.getAutoSortDir()==="desc")?"desc":"asc"},t.getNextSortingOrder=a=>{var r,n;const i=t.getFirstSortDir(),l=t.getIsSorted();return l?l!==i&&((r=s.options.enableSortingRemoval)==null||r)&&(!(a&&(n=s.options.enableMultiRemove)!=null)||n)?!1:l==="desc"?"asc":"desc":i},t.getCanSort=()=>{var a,r;return((a=t.columnDef.enableSorting)!=null?a:!0)&&((r=s.options.enableSorting)!=null?r:!0)&&!!t.accessorFn},t.getCanMultiSort=()=>{var a,r;return(a=(r=t.columnDef.enableMultiSort)!=null?r:s.options.enableMultiSort)!=null?a:!!t.accessorFn},t.getIsSorted=()=>{var a;const r=(a=s.getState().sorting)==null?void 0:a.find(n=>n.id===t.id);return r?r.desc?"desc":"asc":!1},t.getSortIndex=()=>{var a,r;return(a=(r=s.getState().sorting)==null?void 0:r.findIndex(n=>n.id===t.id))!=null?a:-1},t.clearSorting=()=>{s.setSorting(a=>a!=null&&a.length?a.filter(r=>r.id!==t.id):[])},t.getToggleSortingHandler=()=>{const a=t.getCanSort();return r=>{a&&(r.persist==null||r.persist(),t.toggleSorting==null||t.toggleSorting(void 0,t.getCanMultiSort()?s.options.isMultiSortEvent==null?void 0:s.options.isMultiSortEvent(r):!1))}}},createTable:t=>{t.setSorting=s=>t.options.onSortingChange==null?void 0:t.options.onSortingChange(s),t.resetSorting=s=>{var a,r;t.setSorting(s?[]:(a=(r=t.initialState)==null?void 0:r.sorting)!=null?a:[])},t.getPreSortedRowModel=()=>t.getGroupedRowModel(),t.getSortedRowModel=()=>(!t._getSortedRowModel&&t.options.getSortedRowModel&&(t._getSortedRowModel=t.options.getSortedRowModel(t)),t.options.manualSorting||!t._getSortedRowModel?t.getPreSortedRowModel():t._getSortedRowModel())}},DE=[KA,yE,mE,hE,eE,tE,bE,vE,TE,xE,jE,NE,wE,kE,pE];function RE(t){var s,a;const r=[...DE,...(s=t._features)!=null?s:[]];let n={_features:r};const i=n._features.reduce((m,f)=>Object.assign(m,f.getDefaultOptions==null?void 0:f.getDefaultOptions(n)),{}),l=m=>n.options.mergeOptions?n.options.mergeOptions(i,m):{...i,...m};let o={...{},...(a=t.initialState)!=null?a:{}};n._features.forEach(m=>{var f;o=(f=m.getInitialState==null?void 0:m.getInitialState(o))!=null?f:o});const d=[];let x=!1;const u={_features:r,options:{...i,...t},initialState:o,_queue:m=>{d.push(m),x||(x=!0,Promise.resolve().then(()=>{for(;d.length;)d.shift()();x=!1}).catch(f=>setTimeout(()=>{throw f})))},reset:()=>{n.setState(n.initialState)},setOptions:m=>{const f=nr(m,n.options);n.options=l(f)},getState:()=>n.options.state,setState:m=>{n.options.onStateChange==null||n.options.onStateChange(m)},_getRowId:(m,f,g)=>{var h;return(h=n.options.getRowId==null?void 0:n.options.getRowId(m,f,g))!=null?h:`${g?[g.id,f].join("."):f}`},getCoreRowModel:()=>(n._getCoreRowModel||(n._getCoreRowModel=n.options.getCoreRowModel(n)),n._getCoreRowModel()),getRowModel:()=>n.getPaginationRowModel(),getRow:(m,f)=>{let g=(f?n.getPrePaginationRowModel():n.getRowModel()).rowsById[m];if(!g&&(g=n.getCoreRowModel().rowsById[m],!g))throw new Error;return g},_getDefaultColumnDef:We(()=>[n.options.defaultColumn],m=>{var f;return m=(f=m)!=null?f:{},{header:g=>{const h=g.header.column.columnDef;return h.accessorKey?h.accessorKey:h.accessorFn?h.id:null},cell:g=>{var h,p;return(h=(p=g.renderValue())==null||p.toString==null?void 0:p.toString())!=null?h:null},...n._features.reduce((g,h)=>Object.assign(g,h.getDefaultColumnDef==null?void 0:h.getDefaultColumnDef()),{}),...m}},Ge(t,"debugColumns")),_getColumnDefs:()=>n.options.columns,getAllColumns:We(()=>[n._getColumnDefs()],m=>{const f=function(g,h,p){return p===void 0&&(p=0),g.map(j=>{const v=XA(n,j,p,h),w=j;return v.columns=w.columns?f(w.columns,v,p+1):[],v})};return f(m)},Ge(t,"debugColumns")),getAllFlatColumns:We(()=>[n.getAllColumns()],m=>m.flatMap(f=>f.getFlatColumns()),Ge(t,"debugColumns")),_getAllFlatColumnsById:We(()=>[n.getAllFlatColumns()],m=>m.reduce((f,g)=>(f[g.id]=g,f),{}),Ge(t,"debugColumns")),getAllLeafColumns:We(()=>[n.getAllColumns(),n._getOrderColumnsFn()],(m,f)=>{let g=m.flatMap(h=>h.getLeafColumns());return f(g)},Ge(t,"debugColumns")),getColumn:m=>n._getAllFlatColumnsById()[m]};Object.assign(n,u);for(let m=0;m<n._features.length;m++){const f=n._features[m];f==null||f.createTable==null||f.createTable(n)}return n}function PE(){return t=>We(()=>[t.options.data],s=>{const a={rows:[],flatRows:[],rowsById:{}},r=function(n,i,l){i===void 0&&(i=0);const c=[];for(let d=0;d<n.length;d++){const x=QA(t,t._getRowId(n[d],d,l),n[d],d,i,void 0,l==null?void 0:l.id);if(a.flatRows.push(x),a.rowsById[x.id]=x,c.push(x),t.options.getSubRows){var o;x.originalSubRows=t.options.getSubRows(n[d],d),(o=x.originalSubRows)!=null&&o.length&&(x.subRows=r(x.originalSubRows,i+1,x))}}return c};return a.rows=r(s),a},Ge(t.options,"debugTable","getRowModel",()=>t._autoResetPageIndex()))}function IE(t){const s=[],a=r=>{var n;s.push(r),(n=r.subRows)!=null&&n.length&&r.getIsExpanded()&&r.subRows.forEach(a)};return t.rows.forEach(a),{rows:s,flatRows:t.flatRows,rowsById:t.rowsById}}function $E(t){return s=>We(()=>[s.getState().pagination,s.getPrePaginationRowModel(),s.options.paginateExpandedRows?void 0:s.getState().expanded],(a,r)=>{if(!r.rows.length)return r;const{pageSize:n,pageIndex:i}=a;let{rows:l,flatRows:c,rowsById:o}=r;const d=n*i,x=d+n;l=l.slice(d,x);let u;s.options.paginateExpandedRows?u={rows:l,flatRows:c,rowsById:o}:u=IE({rows:l,flatRows:c,rowsById:o}),u.flatRows=[];const m=f=>{u.flatRows.push(f),f.subRows.length&&f.subRows.forEach(m)};return u.rows.forEach(m),u},Ge(s.options,"debugTable"))}function OE(){return t=>We(()=>[t.getState().sorting,t.getPreSortedRowModel()],(s,a)=>{if(!a.rows.length||!(s!=null&&s.length))return a;const r=t.getState().sorting,n=[],i=r.filter(o=>{var d;return(d=t.getColumn(o.id))==null?void 0:d.getCanSort()}),l={};i.forEach(o=>{const d=t.getColumn(o.id);d&&(l[o.id]={sortUndefined:d.columnDef.sortUndefined,invertSorting:d.columnDef.invertSorting,sortingFn:d.getSortingFn()})});const c=o=>{const d=o.map(x=>({...x}));return d.sort((x,u)=>{for(let f=0;f<i.length;f+=1){var m;const g=i[f],h=l[g.id],p=h.sortUndefined,j=(m=g==null?void 0:g.desc)!=null?m:!1;let v=0;if(p){const w=x.getValue(g.id),b=u.getValue(g.id),A=w===void 0,N=b===void 0;if(A||N){if(p==="first")return A?-1:1;if(p==="last")return A?1:-1;v=A&&N?0:A?p:-p}}if(v===0&&(v=h.sortingFn(x,u,g.id)),v!==0)return j&&(v*=-1),h.invertSorting&&(v*=-1),v}return x.index-u.index}),d.forEach(x=>{var u;n.push(x),(u=x.subRows)!=null&&u.length&&(x.subRows=c(x.subRows))}),d};return{rows:c(a.rows),flatRows:n,rowsById:a.rowsById}},Ge(t.options,"debugTable","getSortedRowModel",()=>t._autoResetPageIndex()))}/**
   * react-table
   *
   * Copyright (c) TanStack
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE.md file in the root directory of this source tree.
   *
   * @license MIT
   */function dm(t,s){return t?LE(t)?y.createElement(t,s):t:null}function LE(t){return ME(t)||typeof t=="function"||BE(t)}function ME(t){return typeof t=="function"&&(()=>{const s=Object.getPrototypeOf(t);return s.prototype&&s.prototype.isReactComponent})()}function BE(t){return typeof t=="object"&&typeof t.$$typeof=="symbol"&&["react.memo","react.forward_ref"].includes(t.$$typeof.description)}function zE(t){const s={state:{},onStateChange:()=>{},renderFallbackValue:null,...t},[a]=y.useState(()=>({current:RE(s)})),[r,n]=y.useState(()=>a.current.initialState);return a.current.setOptions(i=>({...i,...t,state:{...r,...t.state},onStateChange:l=>{n(l),t.onStateChange==null||t.onStateChange(l)}})),a.current}const Gt={list:t=>J.get("/approval-workflow/workflows",{params:t}),stats:()=>J.get("/approval-workflow/workflows/stats"),get:t=>J.get(`/approval-workflow/workflows/${t}`),create:t=>J.post("/approval-workflow/workflows",t),update:(t,s)=>J.put(`/approval-workflow/workflows/${t}`,s),duplicate:t=>J.post(`/approval-workflow/workflows/${t}/duplicate`),archive:t=>J.post(`/approval-workflow/workflows/${t}/archive`),history:t=>J.get(`/approval-workflow/workflows/${t}/history`),validate:t=>J.post("/approval-workflow/workflows/validate",t),exportCSV:()=>J.get("/approval-workflow/workflows/export",{responseType:"blob"}),exportJSON:t=>J.get(`/approval-workflow/workflows/${t}/export`,{responseType:"blob"}),importJSON:t=>J.post("/approval-workflow/workflows/import",t)},vr=t=>({id:`tpl_${Math.random().toString(16).slice(2)}_${Date.now()}`,role:"hr",mode:"sequential",permissions:{canReject:!0,canSendBack:!0,canDelegate:!0,canAddComments:!0},slaHours:24,escalationRole:"manager",autoApproveAfterTimeout:!1,notifications:{email:!0,inApp:!0,sms:!1},conditional:{enabled:!1,skipIfEnabled:!1,routeRulesEnabled:!1},...t}),UE=[{id:"leave_standard",name:"Leave Request â€” Standard",description:"Employee submits â†’ HR review â†’ Manager approval â†’ Admin final approval.",appliesTo:"leave",requesterRole:"employee",status:"draft",steps:[vr({role:"hr",escalationRole:"manager"}),vr({role:"manager",escalationRole:"admin"}),vr({role:"admin",escalationRole:null})]},{id:"project_approval",name:"Project Approval â€” Manager â†’ Admin",description:"Fast-track project approvals with escalation to Admin.",appliesTo:"project",requesterRole:"employee",status:"draft",steps:[vr({role:"manager",escalationRole:"admin"}),vr({role:"admin",escalationRole:null,slaHours:48})]},{id:"equipment_request",name:"Equipment Request â€” HR â†’ Admin",description:"HR validates request, Admin approves budget/procurement.",appliesTo:"asset",requesterRole:"employee",status:"draft",steps:[vr({role:"hr",escalationRole:"admin"}),vr({role:"admin",escalationRole:null})]}],tl=[{value:"leave",label:"Leave Request",badgeClass:"badge-info"},{value:"payroll",label:"Payslip Approval",badgeClass:"badge-info"},{value:"onboarding_approval",label:"Employee Onboarding",badgeClass:"badge-info"},{value:"offboarding",label:"Employee Offboarding",badgeClass:"badge-info"},{value:"project",label:"Project Approval",badgeClass:"badge-info"},{value:"expense",label:"Budget/Expense Approval",badgeClass:"badge-info"},{value:"asset",label:"Equipment Request",badgeClass:"badge-info"},{value:"document",label:"Document Approval",badgeClass:"badge-info"},{value:"other",label:"Other",badgeClass:"badge-default"}];function VE(t){if(!t)return"-";try{return new Date(t).toLocaleString()}catch{return"-"}}function HE(t){var i,l,c;const s=((i=t==null?void 0:t.firstName)==null?void 0:i[0])||"",a=((l=t==null?void 0:t.lastName)==null?void 0:l[0])||"",r=`${s}${a}`.trim();if(r)return r.toUpperCase();const n=((c=t==null?void 0:t.email)==null?void 0:c[0])||"";return String(n).toUpperCase()}function xm(t,s){const a=window.URL.createObjectURL(t),r=document.createElement("a");r.href=a,r.download=s,document.body.appendChild(r),r.click(),r.remove(),window.URL.revokeObjectURL(a)}const um=()=>{const t=Je(),s=y.useRef(null),[a,r]=y.useState(!1),[n,i]=y.useState(!0),[l,c]=y.useState(null),[o,d]=y.useState(!0),[x,u]=y.useState([]),[m,f]=y.useState(0),[g,h]=y.useState(0),[p,j]=y.useState(25),[v,w]=y.useState([{id:"updatedAt",desc:!0}]),[b,A]=y.useState(!1),[N,C]=y.useState(""),[k,S]=y.useState(""),[F,R]=y.useState(""),[T,M]=y.useState(""),[H,U]=y.useState(""),[W,se]=y.useState(""),[X,D]=y.useState(null),le=async()=>{try{i(!0);const I=await Gt.stats();c(I.data.data)}catch{c(null)}finally{i(!1)}},de=async()=>{var I,ce;try{d(!0);const L=(v==null?void 0:v[0])||{id:"updatedAt",desc:!0},V={page:g+1,limit:p,sortBy:L.id,sortDir:L.desc?"desc":"asc",...N?{q:N}:{},...k?{status:k}:{},...F?{appliesTo:F}:{},...T==="valid"?{isValid:!0}:{},...T==="invalid"?{isValid:!1}:{}},te=await Gt.list(V);u(te.data.data||[]),f(te.data.total||0)}catch(L){_.error(((ce=(I=L==null?void 0:L.response)==null?void 0:I.data)==null?void 0:ce.message)||"Failed to load workflows")}finally{d(!1)}};y.useEffect(()=>{le()},[]),y.useEffect(()=>{de()},[g,p,v,k,F,T]);const E=y.useMemo(()=>{if(!H&&!W)return x;const I=H?new Date(H).getTime():null,ce=W?new Date(W).getTime():null;return x.filter(L=>{const V=L!=null&&L.updatedAt?new Date(L.updatedAt).getTime():null;return!(!V||I&&V<I||ce&&V>ce)})},[x,H,W]),z=y.useMemo(()=>[{id:"select",header:({table:I})=>e.jsx("input",{"aria-label":"Select all workflows on this page",type:"checkbox",className:"h-4 w-4",checked:I.getIsAllPageRowsSelected(),onChange:I.getToggleAllPageRowsSelectedHandler()}),cell:({row:I})=>{var ce,L;return e.jsx("input",{"aria-label":`Select workflow ${((ce=I.original)==null?void 0:ce.workflowName)||((L=I.original)==null?void 0:L.name)||""}`,type:"checkbox",className:"h-4 w-4",checked:I.getIsSelected(),disabled:!I.getCanSelect(),onChange:I.getToggleSelectedHandler()})},enableSorting:!1,size:40},{accessorKey:"workflowName",id:"workflowName",header:"Workflow Name",cell:({row:I})=>{const ce=I.original,L=ce.workflowName||ce.name||"(Untitled)";return e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"h-8 w-8 rounded-lg theme-surface border theme-border flex items-center justify-center text-sm",children:"W"}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("div",{className:"font-medium theme-text truncate",children:L}),e.jsx("div",{className:"text-xs theme-text-secondary truncate",children:ce.appliesTo||ce.requestType||ce.entityType||"â€”"})]})]})}},{accessorKey:"appliesTo",id:"appliesTo",header:"Applies To",cell:({row:I})=>{const ce=I.original,L=ce.appliesTo||ce.requestType||ce.entityType||"other",V=tl.find(te=>te.value===L)||tl[tl.length-1];return e.jsx("span",{className:`badge ${V.badgeClass}`,children:V.label})}},{accessorKey:"status",id:"status",header:"Status",cell:({row:I})=>{var V;const ce=I.original;return((V=ce==null?void 0:ce.validation)==null?void 0:V.isValid)!==!1?ce.status==="active"?e.jsx("span",{className:"badge badge-success",children:"Active"}):ce.status==="archived"?e.jsx("span",{className:"badge badge-default",children:"Archived"}):e.jsx("span",{className:"badge badge-warning",children:"Draft"}):e.jsx("span",{className:"badge badge-danger",children:"Invalid"})}},{accessorKey:"versionLabel",id:"versionLabel",header:"Version",cell:({row:I})=>{const ce=I.original,L=ce.versionLabel||`v${ce.versionMajor||1}.${ce.versionMinor||0}`;return e.jsx("span",{className:"font-mono text-sm theme-text-secondary",children:L})}},{id:"totalSteps",header:"Total Steps",accessorFn:I=>{var ce,L,V;return((ce=I.steps)==null?void 0:ce.length)||((L=I.approvalSteps)==null?void 0:L.length)||((V=I.levels)==null?void 0:V.length)||0},cell:({getValue:I})=>e.jsx("span",{className:"theme-text",children:I()})},{id:"activeRequests",header:"Active Requests",accessorFn:()=>0,cell:({getValue:I})=>e.jsx("span",{className:"theme-text-secondary",children:I()}),enableSorting:!1},{accessorKey:"updatedAt",id:"updatedAt",header:"Last Modified",cell:({row:I})=>{const ce=I.original,L=ce.lastModifiedBy||ce.createdBy;return e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"h-7 w-7 rounded-full bg-blue-600/20 text-blue-400 flex items-center justify-center text-xs font-semibold",children:HE(L)}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("div",{className:"text-sm theme-text truncate",children:VE(ce.updatedAt)}),e.jsx("div",{className:"text-xs theme-text-secondary truncate",children:(L==null?void 0:L.email)||""})]})]})}},{id:"actions",header:"",enableSorting:!1,cell:({row:I})=>{var V;const ce=I.original,L=X===ce._id;return e.jsxs("div",{className:"relative",children:[e.jsx("button",{"aria-label":"Workflow actions",className:"p-2 rounded-lg hover:theme-surface",onClick:()=>D(te=>te===ce._id?null:ce._id),children:e.jsx(Qo,{size:16,className:"theme-text-secondary"})}),L&&e.jsxs("div",{className:"absolute right-0 mt-2 w-48 rounded-lg border theme-border theme-surface shadow-lg z-20",role:"menu",children:[e.jsx("button",{className:"w-full text-left px-3 py-2 text-sm hover:bg-black/10",onClick:()=>{D(null),t(`/approval-workflow/workflows/${ce._id}/edit`)},children:"Edit"}),e.jsx("button",{className:"w-full text-left px-3 py-2 text-sm hover:bg-black/10",onClick:async()=>{var te,ne;D(null);try{const xe=await Gt.duplicate(ce._id);_.success("Workflow duplicated"),u(he=>[xe.data.data,...he]),le()}catch(xe){_.error(((ne=(te=xe==null?void 0:xe.response)==null?void 0:te.data)==null?void 0:ne.message)||"Failed to duplicate workflow")}},children:"Duplicate"}),e.jsx("button",{className:"w-full text-left px-3 py-2 text-sm hover:bg-black/10",onClick:()=>{D(null),t(`/approval-workflow/workflows/${ce._id}/analytics`)},children:"View Analytics"}),e.jsx("button",{className:"w-full text-left px-3 py-2 text-sm hover:bg-black/10",onClick:()=>{D(null),t(`/approval-workflow/workflows/${ce._id}/history`)},children:"View History"}),ce.status!=="active"&&((V=ce==null?void 0:ce.validation)==null?void 0:V.isValid)!==!1&&e.jsx("button",{className:"w-full text-left px-3 py-2 text-sm hover:bg-black/10",onClick:async()=>{var te,ne;D(null);try{await Gt.update(ce._id,{status:"active"}),_.success("Workflow activated"),u(xe=>xe.map(he=>he._id===ce._id?{...he,status:"active",isActive:!0}:he)),le()}catch(xe){_.error(((ne=(te=xe==null?void 0:xe.response)==null?void 0:te.data)==null?void 0:ne.message)||"Failed to activate workflow")}},children:"Activate"}),e.jsx("button",{className:"w-full text-left px-3 py-2 text-sm hover:bg-black/10",onClick:async()=>{D(null);try{const te=await Gt.exportJSON(ce._id);xm(te.data,`workflow_${ce._id}.json`)}catch{_.error("Failed to export workflow JSON")}},children:"Export JSON"}),e.jsx("div",{className:"h-px theme-border my-1"}),e.jsx("button",{className:"w-full text-left px-3 py-2 text-sm text-red-400 hover:bg-black/10",onClick:async()=>{var te,ne;if(D(null),!!window.confirm("Archive this workflow?"))try{await Gt.archive(ce._id),_.success("Workflow archived"),u(xe=>xe.map(he=>he._id===ce._id?{...he,status:"archived",isActive:!1}:he)),le()}catch(xe){_.error(((ne=(te=xe==null?void 0:xe.response)==null?void 0:te.data)==null?void 0:ne.message)||"Failed to archive workflow")}},children:"Archive"})]})]})}}],[t,X]),O=zE({data:E,columns:z,state:{sorting:v},onSortingChange:w,getCoreRowModel:PE(),getSortedRowModel:OE(),getPaginationRowModel:$E(),manualPagination:!0,pageCount:Math.ceil(m/p),enableRowSelection:!0}),P=O.getSelectedRowModel().rows.map(I=>{var ce;return(ce=I.original)==null?void 0:ce._id}).filter(Boolean),Z=async()=>{if(P.length===0||!window.confirm(`Archive ${P.length} workflow(s)?`))return;const I=x;u(ce=>ce.map(L=>P.includes(L._id)?{...L,status:"archived",isActive:!1}:L));try{await Promise.all(P.map(ce=>Gt.archive(ce))),_.success("Archived selected workflows"),le()}catch{u(I),_.error("Failed to archive one or more workflows")}},re=async()=>{if(P.length===0||!window.confirm(`Activate ${P.length} workflow(s)?`))return;const I=x;u(ce=>ce.map(L=>P.includes(L._id)?{...L,status:"active",isActive:!0}:L));try{await Promise.all(P.map(ce=>Gt.update(ce,{status:"active"}))),_.success("Activated selected workflows"),le()}catch{u(I),_.error("Failed to activate one or more workflows")}},ie=async()=>{try{const I=await Gt.exportCSV();xm(I.data,"workflows.csv")}catch{_.error("Failed to export CSV")}},oe=async I=>{var ce,L;try{const V=await I.text(),te=JSON.parse(V),ne=await Gt.importJSON(te);_.success("Workflow imported"),u(xe=>[ne.data.data,...xe]),le()}catch(V){_.error(((L=(ce=V==null?void 0:V.response)==null?void 0:ce.data)==null?void 0:L.message)||"Failed to import workflow JSON")}},ue=I=>{try{const ce={workflowName:I.name,description:I.description||"",appliesTo:I.appliesTo,requesterRole:I.requesterRole||"employee",status:I.status||"draft",effectiveDate:"",autoArchiveAfterDays:"",steps:I.steps};sessionStorage.setItem("workflowTemplateDraft",JSON.stringify(ce)),r(!1),t("/approval-workflow/workflows/new")}catch{_.error("Failed to apply template")}},Ne=(I,ce,L)=>e.jsx("div",{className:"card",children:e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm theme-text-secondary",children:I}),e.jsx("div",{className:"text-2xl font-semibold theme-text",children:n?"â€”":ce})]}),L?e.jsx("div",{className:"text-xs theme-text-secondary text-right",children:L}):null]})});return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-semibold theme-text",children:"Approval Workflow Management"}),e.jsx("p",{className:"theme-text-secondary text-sm",children:"Design, validate, and govern approval flows across HRMS modules."})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsxs("button",{className:"btn-secondary flex items-center gap-2",onClick:()=>r(!0),children:[e.jsx(js,{size:16}),"Import Template"]}),e.jsx("input",{ref:s,type:"file",accept:"application/json",className:"hidden",onChange:I=>{var L;const ce=(L=I.target.files)==null?void 0:L[0];ce&&oe(ce),I.target.value=""}}),e.jsxs("button",{className:"btn-primary flex items-center gap-2",onClick:()=>t("/approval-workflow/workflows/new"),children:[e.jsx(qe,{size:16}),"Create New Workflow"]})]})]}),e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"flex flex-col gap-3 lg:flex-row lg:items-center lg:justify-between",children:[e.jsxs("div",{className:"flex-1 flex items-center gap-2",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(yt,{size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 theme-text-secondary"}),e.jsx("input",{"aria-label":"Search workflows by name",className:"input-field pl-9",placeholder:"Search workflowsâ€¦",value:N,onChange:I=>C(I.target.value),onKeyDown:I=>{I.key==="Enter"&&(h(0),de())}})]}),e.jsxs("button",{className:"btn-outline flex items-center gap-2",onClick:()=>A(I=>!I),"aria-expanded":b,"aria-controls":"workflow-filters",children:[e.jsx(Vs,{size:16}),"Filters",e.jsx(wi,{size:16,className:b?"rotate-180 transition-transform":"transition-transform"})]}),e.jsxs("button",{className:"btn-outline flex items-center gap-2",onClick:ie,children:[e.jsx(Mt,{size:16}),"Export CSV"]})]}),P.length>0?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-sm theme-text-secondary",children:[P.length," selected"]}),e.jsx("button",{className:"btn-outline",onClick:re,children:"Activate Selected"}),e.jsx("button",{className:"btn-outline text-red-400 border-red-800",onClick:Z,children:"Archive Selected"})]}):e.jsxs("div",{className:"flex items-center gap-2 theme-text-secondary text-sm",children:[e.jsx(Bg,{size:16}),e.jsx("span",{children:"Advanced sorting, bulk actions, and exports"})]})]}),b&&e.jsxs("div",{id:"workflow-filters",className:"mt-4 pt-4 border-t theme-border",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs theme-text-secondary mb-1",children:"Status"}),e.jsxs("select",{className:"input-field",value:k,onChange:I=>{S(I.target.value),h(0)},children:[e.jsx("option",{value:"",children:"All"}),e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"draft",children:"Draft"}),e.jsx("option",{value:"archived",children:"Archived"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs theme-text-secondary mb-1",children:"Applies To"}),e.jsxs("select",{className:"input-field",value:F,onChange:I=>{R(I.target.value),h(0)},children:[e.jsx("option",{value:"",children:"All"}),tl.map(I=>e.jsx("option",{value:I.value,children:I.label},I.value))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs theme-text-secondary mb-1",children:"Validity"}),e.jsxs("select",{className:"input-field",value:T,onChange:I=>{M(I.target.value),h(0)},children:[e.jsx("option",{value:"",children:"All"}),e.jsx("option",{value:"valid",children:"Valid"}),e.jsx("option",{value:"invalid",children:"Invalid"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs theme-text-secondary mb-1",children:"Modified From"}),e.jsx("input",{className:"input-field",type:"date",value:H,onChange:I=>U(I.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs theme-text-secondary mb-1",children:"Modified To"}),e.jsx("input",{className:"input-field",type:"date",value:W,onChange:I=>se(I.target.value)})]})]}),e.jsxs("div",{className:"mt-3 flex items-center gap-2",children:[e.jsx("button",{className:"btn-secondary",onClick:()=>{C(""),S(""),R(""),M(""),U(""),se(""),h(0),w([{id:"updatedAt",desc:!0}]),de()},children:"Reset"}),e.jsx("button",{className:"btn-primary",onClick:()=>{h(0),de()},children:"Apply"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-4",children:[Ne("Total Active Workflows",(l==null?void 0:l.totalActiveWorkflows)??0),Ne("Pending Approvals",(l==null?void 0:l.pendingApprovals)??0,"Based on current backend support"),Ne("Average Approval Time",`${(l==null?void 0:l.averageApprovalTimeHours)??0}h`,"Initial rollout"),Ne("Workflows Requiring Attention",(l==null?void 0:l.workflowsRequiringAttention)??0)]}),e.jsxs("div",{className:"card p-0",children:[e.jsx("div",{className:"table-container",children:e.jsxs("table",{className:"table",children:[e.jsx("thead",{children:O.getHeaderGroups().map(I=>e.jsx("tr",{children:I.headers.map(ce=>{const L=ce.column.getCanSort(),V=ce.column.getIsSorted();return e.jsx("th",{onClick:L?ce.column.getToggleSortingHandler():void 0,className:L?"cursor-pointer select-none":"","aria-sort":V==="asc"?"ascending":V==="desc"?"descending":"none",children:e.jsxs("div",{className:"flex items-center gap-2",children:[dm(ce.column.columnDef.header,ce.getContext()),L&&e.jsx("span",{className:"text-xs theme-text-secondary",children:V==="asc"?"â–²":V==="desc"?"â–¼":""})]})},ce.id)})},I.id))}),e.jsx("tbody",{children:o?[...Array(Math.min(p,10))].map((I,ce)=>e.jsx("tr",{children:e.jsx("td",{colSpan:z.length,className:"py-6",children:e.jsx("div",{className:"animate-pulse h-4 bg-white/10 rounded w-3/4"})})},ce)):O.getRowModel().rows.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:z.length,className:"py-10 text-center theme-text-secondary",children:e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsx("div",{className:"text-sm",children:"No workflows found."}),e.jsx("button",{className:"btn-primary",onClick:()=>t("/approval-workflow/workflows/new"),children:"Create your first workflow"})]})})}):O.getRowModel().rows.map(I=>e.jsx("tr",{children:I.getVisibleCells().map(ce=>e.jsx("td",{children:dm(ce.column.columnDef.cell,ce.getContext())},ce.id))},I.id))})]})}),e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-3 p-4 border-t theme-border",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{className:"btn-outline flex items-center gap-2",onClick:()=>h(I=>Math.max(I-1,0)),disabled:g===0,children:[e.jsx(Bl,{size:16}),"Prev"]}),e.jsxs("button",{className:"btn-outline flex items-center gap-2",onClick:()=>h(I=>I+1),disabled:(g+1)*p>=m,children:["Next",e.jsx(Nn,{size:16})]}),e.jsxs("span",{className:"text-sm theme-text-secondary",children:["Page ",g+1," of ",Math.max(1,Math.ceil(m/p))]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm theme-text-secondary",children:"Rows"}),e.jsx("select",{className:"input-field w-28",value:p,onChange:I=>{j(Number(I.target.value)),h(0)},children:[10,25,50,100].map(I=>e.jsx("option",{value:I,children:I},I))}),e.jsxs("span",{className:"text-sm theme-text-secondary",children:[m," total"]})]})]})]}),a&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 p-4",role:"dialog","aria-modal":"true",children:e.jsxs("div",{className:"w-full max-w-3xl rounded-xl border theme-border theme-surface shadow-lg",children:[e.jsxs("div",{className:"p-5 border-b theme-border flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-lg font-semibold theme-text",children:"Import Template"}),e.jsx("div",{className:"text-sm theme-text-secondary",children:"Start from a vetted template or import a JSON workflow configuration."})]}),e.jsx("button",{className:"btn-outline",onClick:()=>r(!1),"aria-label":"Close",children:"Close"})]}),e.jsxs("div",{className:"p-5 grid grid-cols-1 lg:grid-cols-2 gap-5",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold theme-text mb-3",children:"Built-in Templates"}),e.jsx("div",{className:"space-y-3",children:UE.map(I=>e.jsx("button",{className:"w-full text-left rounded-lg border theme-border theme-surface hover:bg-black/10 p-4",onClick:()=>ue(I),children:e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsxs("div",{className:"min-w-0",children:[e.jsx("div",{className:"font-medium theme-text truncate",children:I.name}),e.jsx("div",{className:"text-sm theme-text-secondary mt-1",children:I.description})]}),e.jsx("span",{className:"badge badge-info",children:I.appliesTo})]})},I.id))})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold theme-text mb-3",children:"Import from JSON"}),e.jsxs("div",{className:"rounded-lg border theme-border p-4",children:[e.jsxs("p",{className:"text-sm theme-text-secondary",children:["Upload a workflow JSON exported from another tenant/environment. Imported workflows are saved as ",e.jsx("strong",{children:"Draft"}),"."]}),e.jsxs("div",{className:"mt-4 flex items-center gap-2",children:[e.jsxs("button",{className:"btn-primary flex items-center gap-2",onClick:()=>{var I;return(I=s.current)==null?void 0:I.click()},children:[e.jsx(js,{size:16}),"Choose JSON File"]}),e.jsxs("button",{className:"btn-outline",onClick:ie,children:[e.jsx(Mt,{size:16}),"Export CSV"]})]})]})]})]}),e.jsx("div",{className:"p-5 border-t theme-border flex items-center justify-end gap-2",children:e.jsx("button",{className:"btn-secondary",onClick:()=>r(!1),children:"Done"})})]})})]})};var Pi=t=>t.type==="checkbox",Sr=t=>t instanceof Date,Ls=t=>t==null;const tp=t=>typeof t=="object";var Vt=t=>!Ls(t)&&!Array.isArray(t)&&tp(t)&&!Sr(t),qE=t=>Vt(t)&&t.target?Pi(t.target)?t.target.checked:t.target.value:t,WE=t=>t.substring(0,t.search(/\.\d+(\.|$)/))||t,GE=(t,s)=>t.has(WE(s)),YE=t=>{const s=t.constructor&&t.constructor.prototype;return Vt(s)&&s.hasOwnProperty("isPrototypeOf")},Md=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function jt(t){if(t instanceof Date)return new Date(t);const s=typeof FileList<"u"&&t instanceof FileList;if(Md&&(t instanceof Blob||s))return t;const a=Array.isArray(t);if(!a&&!(Vt(t)&&YE(t)))return t;const r=a?[]:Object.create(Object.getPrototypeOf(t));for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=jt(t[n]));return r}var Ql=t=>/^\w*$/.test(t),bt=t=>t===void 0,ec=t=>Array.isArray(t)?t.filter(Boolean):[],Bd=t=>ec(t.replace(/["|']|\]/g,"").split(/\.|\[/)),$e=(t,s,a)=>{if(!s||!Vt(t))return a;const r=(Ql(s)?[s]:Bd(s)).reduce((n,i)=>Ls(n)?n:n[i],t);return bt(r)||r===t?bt(t[s])?a:t[s]:r},Aa=t=>typeof t=="boolean",ma=t=>typeof t=="function",ft=(t,s,a)=>{let r=-1;const n=Ql(s)?[s]:Bd(s),i=n.length,l=i-1;for(;++r<i;){const c=n[r];let o=a;if(r!==l){const d=t[c];o=Vt(d)||Array.isArray(d)?d:isNaN(+n[r+1])?{}:[]}if(c==="__proto__"||c==="constructor"||c==="prototype")return;t[c]=o,t=t[c]}};const mm={BLUR:"blur",FOCUS_OUT:"focusout"},ra={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},Ba={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},sp=Ve.createContext(null);sp.displayName="HookFormControlContext";const ZE=()=>Ve.useContext(sp);var JE=(t,s,a,r=!0)=>{const n={defaultValues:s._defaultValues};for(const i in t)Object.defineProperty(n,i,{get:()=>{const l=i;return s._proxyFormState[l]!==ra.all&&(s._proxyFormState[l]=!r||ra.all),t[l]}});return n};const ap=typeof window<"u"?Ve.useLayoutEffect:Ve.useEffect;var Ys=t=>typeof t=="string",XE=(t,s,a,r,n)=>Ys(t)?(r&&s.watch.add(t),$e(a,t,n)):Array.isArray(t)?t.map(i=>(r&&s.watch.add(i),$e(a,i))):(r&&(s.watchAll=!0),a),Po=t=>Ls(t)||!tp(t);function sr(t,s,a=new WeakSet){if(Po(t)||Po(s))return Object.is(t,s);if(Sr(t)&&Sr(s))return Object.is(t.getTime(),s.getTime());const r=Object.keys(t),n=Object.keys(s);if(r.length!==n.length)return!1;if(a.has(t)||a.has(s))return!0;a.add(t),a.add(s);for(const i of r){const l=t[i];if(!n.includes(i))return!1;if(i!=="ref"){const c=s[i];if(Sr(l)&&Sr(c)||Vt(l)&&Vt(c)||Array.isArray(l)&&Array.isArray(c)?!sr(l,c,a):!Object.is(l,c))return!1}}return!0}const KE=Ve.createContext(null);KE.displayName="HookFormContext";var zd=(t,s,a,r,n)=>s?{...a[t],types:{...a[t]&&a[t].types?a[t].types:{},[r]:n||!0}}:{},Ms=t=>Array.isArray(t)?t:[t],hm=()=>{let t=[];return{get observers(){return t},next:n=>{for(const i of t)i.next&&i.next(n)},subscribe:n=>(t.push(n),{unsubscribe:()=>{t=t.filter(i=>i!==n)}}),unsubscribe:()=>{t=[]}}};function rp(t,s){const a={};for(const r in t)if(t.hasOwnProperty(r)){const n=t[r],i=s[r];if(n&&Vt(n)&&i){const l=rp(n,i);Vt(l)&&(a[r]=l)}else t[r]&&(a[r]=i)}return a}var ps=t=>Vt(t)&&!Object.keys(t).length,Ud=t=>t.type==="file",Al=t=>{if(!Md)return!1;const s=t?t.ownerDocument:0;return t instanceof(s&&s.defaultView?s.defaultView.HTMLElement:HTMLElement)},np=t=>t.type==="select-multiple",Vd=t=>t.type==="radio",QE=t=>Vd(t)||Pi(t),Lc=t=>Al(t)&&t.isConnected;function e_(t,s){const a=s.slice(0,-1).length;let r=0;for(;r<a;)t=bt(t)?r++:t[s[r++]];return t}function t_(t){for(const s in t)if(t.hasOwnProperty(s)&&!bt(t[s]))return!1;return!0}function Ot(t,s){const a=Array.isArray(s)?s:Ql(s)?[s]:Bd(s),r=a.length===1?t:e_(t,a),n=a.length-1,i=a[n];return r&&delete r[i],n!==0&&(Vt(r)&&ps(r)||Array.isArray(r)&&t_(r))&&Ot(t,a.slice(0,-1)),t}var s_=t=>{for(const s in t)if(ma(t[s]))return!0;return!1};function ip(t){return Array.isArray(t)||Vt(t)&&!s_(t)}function Io(t,s={}){for(const a in t){const r=t[a];ip(r)?(s[a]=Array.isArray(r)?[]:{},Io(r,s[a])):bt(r)||(s[a]=!0)}return s}function tn(t,s,a){a||(a=Io(s));for(const r in t){const n=t[r];if(ip(n))bt(s)||Po(a[r])?a[r]=Io(n,Array.isArray(n)?[]:{}):tn(n,Ls(s)?{}:s[r],a[r]);else{const i=s[r];a[r]=!sr(n,i)}}return a}const fm={value:!1,isValid:!1},pm={value:!0,isValid:!0};var lp=t=>{if(Array.isArray(t)){if(t.length>1){const s=t.filter(a=>a&&a.checked&&!a.disabled).map(a=>a.value);return{value:s,isValid:!!s.length}}return t[0].checked&&!t[0].disabled?t[0].attributes&&!bt(t[0].attributes.value)?bt(t[0].value)||t[0].value===""?pm:{value:t[0].value,isValid:!0}:pm:fm}return fm},cp=(t,{valueAsNumber:s,valueAsDate:a,setValueAs:r})=>bt(t)?t:s?t===""?NaN:t&&+t:a&&Ys(t)?new Date(t):r?r(t):t;const gm={isValid:!1,value:null};var op=t=>Array.isArray(t)?t.reduce((s,a)=>a&&a.checked&&!a.disabled?{isValid:!0,value:a.value}:s,gm):gm;function ym(t){const s=t.ref;return Ud(s)?s.files:Vd(s)?op(t.refs).value:np(s)?[...s.selectedOptions].map(({value:a})=>a):Pi(s)?lp(t.refs).value:cp(bt(s.value)?t.ref.value:s.value,t)}var a_=(t,s,a,r)=>{const n={};for(const i of t){const l=$e(s,i);l&&ft(n,i,l._f)}return{criteriaMode:a,names:[...t],fields:n,shouldUseNativeValidation:r}},El=t=>t instanceof RegExp,Bn=t=>bt(t)?t:El(t)?t.source:Vt(t)?El(t.value)?t.value.source:t.value:t,nn=t=>({isOnSubmit:!t||t===ra.onSubmit,isOnBlur:t===ra.onBlur,isOnChange:t===ra.onChange,isOnAll:t===ra.all,isOnTouch:t===ra.onTouched});const bm="AsyncFunction";var r_=t=>!!t&&!!t.validate&&!!(ma(t.validate)&&t.validate.constructor.name===bm||Vt(t.validate)&&Object.values(t.validate).find(s=>s.constructor.name===bm)),n_=t=>t.mount&&(t.required||t.min||t.max||t.maxLength||t.minLength||t.pattern||t.validate),$o=(t,s,a)=>!a&&(s.watchAll||s.watch.has(t)||[...s.watch].some(r=>t.startsWith(r)&&/^\.\w+/.test(t.slice(r.length))));const xn=(t,s,a,r)=>{for(const n of a||Object.keys(t)){const i=$e(t,n);if(i){const{_f:l,...c}=i;if(l){if(l.refs&&l.refs[0]&&s(l.refs[0],n)&&!r)return!0;if(l.ref&&s(l.ref,l.name)&&!r)return!0;if(xn(c,s))break}else if(Vt(c)&&xn(c,s))break}}};function vm(t,s,a){const r=$e(t,a);if(r||Ql(a))return{error:r,name:a};const n=a.split(".");for(;n.length;){const i=n.join("."),l=$e(s,i),c=$e(t,i);if(l&&!Array.isArray(l)&&a!==i)return{name:a};if(c&&c.type)return{name:i,error:c};if(c&&c.root&&c.root.type)return{name:`${i}.root`,error:c.root};n.pop()}return{name:a}}var i_=(t,s,a,r)=>{a(t);const{name:n,...i}=t;return ps(i)||Object.keys(i).length>=Object.keys(s).length||Object.keys(i).find(l=>s[l]===(!r||ra.all))},l_=(t,s,a)=>!t||!s||t===s||Ms(t).some(r=>r&&(a?r===s:r.startsWith(s)||s.startsWith(r))),c_=(t,s,a,r,n)=>n.isOnAll?!1:!a&&n.isOnTouch?!(s||t):(a?r.isOnBlur:n.isOnBlur)?!t:(a?r.isOnChange:n.isOnChange)?t:!0,o_=(t,s)=>!ec($e(t,s)).length&&Ot(t,s),dp=(t,s,a)=>{const r=Ms($e(t,a));return ft(r,"root",s[a]),ft(t,a,r),t};function jm(t,s,a="validate"){if(Ys(t)||Array.isArray(t)&&t.every(Ys)||Aa(t)&&!t)return{type:a,message:Ys(t)?t:"",ref:s}}var Kr=t=>Vt(t)&&!El(t)?t:{value:t,message:""},Oo=async(t,s,a,r,n,i)=>{const{ref:l,refs:c,required:o,maxLength:d,minLength:x,min:u,max:m,pattern:f,validate:g,name:h,valueAsNumber:p,mount:j}=t._f,v=$e(a,h);if(!j||s.has(h))return{};const w=c?c[0]:l,b=T=>{n&&w.reportValidity&&(w.setCustomValidity(Aa(T)?"":T||""),w.reportValidity())},A={},N=Vd(l),C=Pi(l),k=N||C,S=(p||Ud(l))&&bt(l.value)&&bt(v)||Al(l)&&l.value===""||v===""||Array.isArray(v)&&!v.length,F=zd.bind(null,h,r,A),R=(T,M,H,U=Ba.maxLength,W=Ba.minLength)=>{const se=T?M:H;A[h]={type:T?U:W,message:se,ref:l,...F(T?U:W,se)}};if(i?!Array.isArray(v)||!v.length:o&&(!k&&(S||Ls(v))||Aa(v)&&!v||C&&!lp(c).isValid||N&&!op(c).isValid)){const{value:T,message:M}=Ys(o)?{value:!!o,message:o}:Kr(o);if(T&&(A[h]={type:Ba.required,message:M,ref:w,...F(Ba.required,M)},!r))return b(M),A}if(!S&&(!Ls(u)||!Ls(m))){let T,M;const H=Kr(m),U=Kr(u);if(!Ls(v)&&!isNaN(v)){const W=l.valueAsNumber||v&&+v;Ls(H.value)||(T=W>H.value),Ls(U.value)||(M=W<U.value)}else{const W=l.valueAsDate||new Date(v),se=le=>new Date(new Date().toDateString()+" "+le),X=l.type=="time",D=l.type=="week";Ys(H.value)&&v&&(T=X?se(v)>se(H.value):D?v>H.value:W>new Date(H.value)),Ys(U.value)&&v&&(M=X?se(v)<se(U.value):D?v<U.value:W<new Date(U.value))}if((T||M)&&(R(!!T,H.message,U.message,Ba.max,Ba.min),!r))return b(A[h].message),A}if((d||x)&&!S&&(Ys(v)||i&&Array.isArray(v))){const T=Kr(d),M=Kr(x),H=!Ls(T.value)&&v.length>+T.value,U=!Ls(M.value)&&v.length<+M.value;if((H||U)&&(R(H,T.message,M.message),!r))return b(A[h].message),A}if(f&&!S&&Ys(v)){const{value:T,message:M}=Kr(f);if(El(T)&&!v.match(T)&&(A[h]={type:Ba.pattern,message:M,ref:l,...F(Ba.pattern,M)},!r))return b(M),A}if(g){if(ma(g)){const T=await g(v,a),M=jm(T,w);if(M&&(A[h]={...M,...F(Ba.validate,M.message)},!r))return b(M.message),A}else if(Vt(g)){let T={};for(const M in g){if(!ps(T)&&!r)break;const H=jm(await g[M](v,a),w,M);H&&(T={...H,...F(M,H.message)},b(H.message),r&&(A[h]=T))}if(!ps(T)&&(A[h]={ref:w,...T},!r))return A}}return b(!0),A};const d_={mode:ra.onSubmit,reValidateMode:ra.onChange,shouldFocusError:!0};function x_(t={}){let s={...d_,...t},a={submitCount:0,isDirty:!1,isReady:!1,isLoading:ma(s.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:s.errors||{},disabled:s.disabled||!1},r={},n=Vt(s.defaultValues)||Vt(s.values)?jt(s.defaultValues||s.values)||{}:{},i=s.shouldUnregister?{}:jt(n),l={action:!1,mount:!1,watch:!1,keepIsValid:!1},c={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},o,d=0;const x={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},u={...x};let m={...u};const f={array:hm(),state:hm()},g=s.criteriaMode===ra.all,h=G=>Q=>{clearTimeout(d),d=setTimeout(G,Q)},p=async G=>{if(!l.keepIsValid&&!s.disabled&&(u.isValid||m.isValid||G)){let Q;s.resolver?(Q=ps((await k()).errors),j()):Q=await F(r,!0),Q!==a.isValid&&f.state.next({isValid:Q})}},j=(G,Q)=>{!s.disabled&&(u.isValidating||u.validatingFields||m.isValidating||m.validatingFields)&&((G||Array.from(c.mount)).forEach(me=>{me&&(Q?ft(a.validatingFields,me,Q):Ot(a.validatingFields,me))}),f.state.next({validatingFields:a.validatingFields,isValidating:!ps(a.validatingFields)}))},v=(G,Q=[],me,je,Ae=!0,we=!0)=>{if(je&&me&&!s.disabled){if(l.action=!0,we&&Array.isArray($e(r,G))){const _e=me($e(r,G),je.argA,je.argB);Ae&&ft(r,G,_e)}if(we&&Array.isArray($e(a.errors,G))){const _e=me($e(a.errors,G),je.argA,je.argB);Ae&&ft(a.errors,G,_e),o_(a.errors,G)}if((u.touchedFields||m.touchedFields)&&we&&Array.isArray($e(a.touchedFields,G))){const _e=me($e(a.touchedFields,G),je.argA,je.argB);Ae&&ft(a.touchedFields,G,_e)}(u.dirtyFields||m.dirtyFields)&&(a.dirtyFields=tn(n,i)),f.state.next({name:G,isDirty:T(G,Q),dirtyFields:a.dirtyFields,errors:a.errors,isValid:a.isValid})}else ft(i,G,Q)},w=(G,Q)=>{ft(a.errors,G,Q),f.state.next({errors:a.errors})},b=G=>{a.errors=G,f.state.next({errors:a.errors,isValid:!1})},A=(G,Q,me,je)=>{const Ae=$e(r,G);if(Ae){const we=$e(i,G,bt(me)?$e(n,G):me);bt(we)||je&&je.defaultChecked||Q?ft(i,G,Q?we:ym(Ae._f)):U(G,we),l.mount&&!l.action&&p()}},N=(G,Q,me,je,Ae)=>{let we=!1,_e=!1;const Re={name:G};if(!s.disabled){if(!me||je){(u.isDirty||m.isDirty)&&(_e=a.isDirty,a.isDirty=Re.isDirty=T(),we=_e!==Re.isDirty);const Pe=sr($e(n,G),Q);_e=!!$e(a.dirtyFields,G),Pe?Ot(a.dirtyFields,G):ft(a.dirtyFields,G,!0),Re.dirtyFields=a.dirtyFields,we=we||(u.dirtyFields||m.dirtyFields)&&_e!==!Pe}if(me){const Pe=$e(a.touchedFields,G);Pe||(ft(a.touchedFields,G,me),Re.touchedFields=a.touchedFields,we=we||(u.touchedFields||m.touchedFields)&&Pe!==me)}we&&Ae&&f.state.next(Re)}return we?Re:{}},C=(G,Q,me,je)=>{const Ae=$e(a.errors,G),we=(u.isValid||m.isValid)&&Aa(Q)&&a.isValid!==Q;if(s.delayError&&me?(o=h(()=>w(G,me)),o(s.delayError)):(clearTimeout(d),o=null,me?ft(a.errors,G,me):Ot(a.errors,G)),(me?!sr(Ae,me):Ae)||!ps(je)||we){const _e={...je,...we&&Aa(Q)?{isValid:Q}:{},errors:a.errors,name:G};a={...a,..._e},f.state.next(_e)}},k=async G=>(j(G,!0),await s.resolver(i,s.context,a_(G||c.mount,r,s.criteriaMode,s.shouldUseNativeValidation))),S=async G=>{const{errors:Q}=await k(G);if(j(G),G)for(const me of G){const je=$e(Q,me);je?ft(a.errors,me,je):Ot(a.errors,me)}else a.errors=Q;return Q},F=async(G,Q,me={valid:!0})=>{for(const je in G){const Ae=G[je];if(Ae){const{_f:we,..._e}=Ae;if(we){const Re=c.array.has(we.name),Pe=Ae._f&&r_(Ae._f);Pe&&u.validatingFields&&j([we.name],!0);const ze=await Oo(Ae,c.disabled,i,g,s.shouldUseNativeValidation&&!Q,Re);if(Pe&&u.validatingFields&&j([we.name]),ze[we.name]&&(me.valid=!1,Q||t.shouldUseNativeValidation))break;!Q&&($e(ze,we.name)?Re?dp(a.errors,ze,we.name):ft(a.errors,we.name,ze[we.name]):Ot(a.errors,we.name))}!ps(_e)&&await F(_e,Q,me)}}return me.valid},R=()=>{for(const G of c.unMount){const Q=$e(r,G);Q&&(Q._f.refs?Q._f.refs.every(me=>!Lc(me)):!Lc(Q._f.ref))&&ie(G)}c.unMount=new Set},T=(G,Q)=>!s.disabled&&(G&&Q&&ft(i,G,Q),!sr(de(),n)),M=(G,Q,me)=>XE(G,c,{...l.mount?i:bt(Q)?n:Ys(G)?{[G]:Q}:Q},me,Q),H=G=>ec($e(l.mount?i:n,G,s.shouldUnregister?$e(n,G,[]):[])),U=(G,Q,me={})=>{const je=$e(r,G);let Ae=Q;if(je){const we=je._f;we&&(!we.disabled&&ft(i,G,cp(Q,we)),Ae=Al(we.ref)&&Ls(Q)?"":Q,np(we.ref)?[...we.ref.options].forEach(_e=>_e.selected=Ae.includes(_e.value)):we.refs?Pi(we.ref)?we.refs.forEach(_e=>{(!_e.defaultChecked||!_e.disabled)&&(Array.isArray(Ae)?_e.checked=!!Ae.find(Re=>Re===_e.value):_e.checked=Ae===_e.value||!!Ae)}):we.refs.forEach(_e=>_e.checked=_e.value===Ae):Ud(we.ref)?we.ref.value="":(we.ref.value=Ae,we.ref.type||f.state.next({name:G,values:jt(i)})))}(me.shouldDirty||me.shouldTouch)&&N(G,Ae,me.shouldTouch,me.shouldDirty,!0),me.shouldValidate&&le(G)},W=(G,Q,me)=>{for(const je in Q){if(!Q.hasOwnProperty(je))return;const Ae=Q[je],we=G+"."+je,_e=$e(r,we);(c.array.has(G)||Vt(Ae)||_e&&!_e._f)&&!Sr(Ae)?W(we,Ae,me):U(we,Ae,me)}},se=(G,Q,me={})=>{const je=$e(r,G),Ae=c.array.has(G),we=jt(Q);ft(i,G,we),Ae?(f.array.next({name:G,values:jt(i)}),(u.isDirty||u.dirtyFields||m.isDirty||m.dirtyFields)&&me.shouldDirty&&f.state.next({name:G,dirtyFields:tn(n,i),isDirty:T(G,we)})):je&&!je._f&&!Ls(we)?W(G,we,me):U(G,we,me),$o(G,c)?f.state.next({...a,name:G,values:jt(i)}):f.state.next({name:l.mount?G:void 0,values:jt(i)})},X=async G=>{l.mount=!0;const Q=G.target;let me=Q.name,je=!0;const Ae=$e(r,me),we=Pe=>{je=Number.isNaN(Pe)||Sr(Pe)&&isNaN(Pe.getTime())||sr(Pe,$e(i,me,Pe))},_e=nn(s.mode),Re=nn(s.reValidateMode);if(Ae){let Pe,ze;const Ye=Q.type?ym(Ae._f):qE(G),at=G.type===mm.BLUR||G.type===mm.FOCUS_OUT,ut=!n_(Ae._f)&&!s.resolver&&!$e(a.errors,me)&&!Ae._f.deps||c_(at,$e(a.touchedFields,me),a.isSubmitted,Re,_e),us=$o(me,c,at);ft(i,me,Ye),at?(!Q||!Q.readOnly)&&(Ae._f.onBlur&&Ae._f.onBlur(G),o&&o(0)):Ae._f.onChange&&Ae._f.onChange(G);const ja=N(me,Ye,at),Gr=!ps(ja)||us;if(!at&&f.state.next({name:me,type:G.type,values:jt(i)}),ut)return(u.isValid||m.isValid)&&(s.mode==="onBlur"?at&&p():at||p()),Gr&&f.state.next({name:me,...us?{}:ja});if(!at&&us&&f.state.next({...a}),s.resolver){const{errors:Yr}=await k([me]);if(j([me]),we(Ye),je){const fr=vm(a.errors,r,me),pr=vm(Yr,r,fr.name||me);Pe=pr.error,me=pr.name,ze=ps(Yr)}}else j([me],!0),Pe=(await Oo(Ae,c.disabled,i,g,s.shouldUseNativeValidation))[me],j([me]),we(Ye),je&&(Pe?ze=!1:(u.isValid||m.isValid)&&(ze=await F(r,!0)));je&&(Ae._f.deps&&(!Array.isArray(Ae._f.deps)||Ae._f.deps.length>0)&&le(Ae._f.deps),C(me,ze,Pe,ja))}},D=(G,Q)=>{if($e(a.errors,Q)&&G.focus)return G.focus(),1},le=async(G,Q={})=>{let me,je;const Ae=Ms(G);if(s.resolver){const we=await S(bt(G)?G:Ae);me=ps(we),je=G?!Ae.some(_e=>$e(we,_e)):me}else G?(je=(await Promise.all(Ae.map(async we=>{const _e=$e(r,we);return await F(_e&&_e._f?{[we]:_e}:_e)}))).every(Boolean),!(!je&&!a.isValid)&&p()):je=me=await F(r);return f.state.next({...!Ys(G)||(u.isValid||m.isValid)&&me!==a.isValid?{}:{name:G},...s.resolver||!G?{isValid:me}:{},errors:a.errors}),Q.shouldFocus&&!je&&xn(r,D,G?Ae:c.mount),je},de=(G,Q)=>{let me={...l.mount?i:n};return Q&&(me=rp(Q.dirtyFields?a.dirtyFields:a.touchedFields,me)),bt(G)?me:Ys(G)?$e(me,G):G.map(je=>$e(me,je))},E=(G,Q)=>({invalid:!!$e((Q||a).errors,G),isDirty:!!$e((Q||a).dirtyFields,G),error:$e((Q||a).errors,G),isValidating:!!$e(a.validatingFields,G),isTouched:!!$e((Q||a).touchedFields,G)}),z=G=>{G&&Ms(G).forEach(Q=>Ot(a.errors,Q)),f.state.next({errors:G?a.errors:{}})},O=(G,Q,me)=>{const je=($e(r,G,{_f:{}})._f||{}).ref,Ae=$e(a.errors,G)||{},{ref:we,message:_e,type:Re,...Pe}=Ae;ft(a.errors,G,{...Pe,...Q,ref:je}),f.state.next({name:G,errors:a.errors,isValid:!1}),me&&me.shouldFocus&&je&&je.focus&&je.focus()},P=(G,Q)=>ma(G)?f.state.subscribe({next:me=>"values"in me&&G(M(void 0,Q),me)}):M(G,Q,!0),Z=G=>f.state.subscribe({next:Q=>{l_(G.name,Q.name,G.exact)&&i_(Q,G.formState||u,xe,G.reRenderRoot)&&G.callback({values:{...i},...a,...Q,defaultValues:n})}}).unsubscribe,re=G=>(l.mount=!0,m={...m,...G.formState},Z({...G,formState:{...x,...G.formState}})),ie=(G,Q={})=>{for(const me of G?Ms(G):c.mount)c.mount.delete(me),c.array.delete(me),Q.keepValue||(Ot(r,me),Ot(i,me)),!Q.keepError&&Ot(a.errors,me),!Q.keepDirty&&Ot(a.dirtyFields,me),!Q.keepTouched&&Ot(a.touchedFields,me),!Q.keepIsValidating&&Ot(a.validatingFields,me),!s.shouldUnregister&&!Q.keepDefaultValue&&Ot(n,me);f.state.next({values:jt(i)}),f.state.next({...a,...Q.keepDirty?{isDirty:T()}:{}}),!Q.keepIsValid&&p()},oe=({disabled:G,name:Q})=>{if(Aa(G)&&l.mount||G||c.disabled.has(Q)){const Ae=c.disabled.has(Q)!==!!G;G?c.disabled.add(Q):c.disabled.delete(Q),Ae&&l.mount&&!l.action&&p()}},ue=(G,Q={})=>{let me=$e(r,G);const je=Aa(Q.disabled)||Aa(s.disabled);return ft(r,G,{...me||{},_f:{...me&&me._f?me._f:{ref:{name:G}},name:G,mount:!0,...Q}}),c.mount.add(G),me?oe({disabled:Aa(Q.disabled)?Q.disabled:s.disabled,name:G}):A(G,!0,Q.value),{...je?{disabled:Q.disabled||s.disabled}:{},...s.progressive?{required:!!Q.required,min:Bn(Q.min),max:Bn(Q.max),minLength:Bn(Q.minLength),maxLength:Bn(Q.maxLength),pattern:Bn(Q.pattern)}:{},name:G,onChange:X,onBlur:X,ref:Ae=>{if(Ae){ue(G,Q),me=$e(r,G);const we=bt(Ae.value)&&Ae.querySelectorAll&&Ae.querySelectorAll("input,select,textarea")[0]||Ae,_e=QE(we),Re=me._f.refs||[];if(_e?Re.find(Pe=>Pe===we):we===me._f.ref)return;ft(r,G,{_f:{...me._f,..._e?{refs:[...Re.filter(Lc),we,...Array.isArray($e(n,G))?[{}]:[]],ref:{type:we.type,name:G}}:{ref:we}}}),A(G,!1,void 0,we)}else me=$e(r,G,{}),me._f&&(me._f.mount=!1),(s.shouldUnregister||Q.shouldUnregister)&&!(GE(c.array,G)&&l.action)&&c.unMount.add(G)}}},Ne=()=>s.shouldFocusError&&xn(r,D,c.mount),I=G=>{Aa(G)&&(f.state.next({disabled:G}),xn(r,(Q,me)=>{const je=$e(r,me);je&&(Q.disabled=je._f.disabled||G,Array.isArray(je._f.refs)&&je._f.refs.forEach(Ae=>{Ae.disabled=je._f.disabled||G}))},0,!1))},ce=(G,Q)=>async me=>{let je;me&&(me.preventDefault&&me.preventDefault(),me.persist&&me.persist());let Ae=jt(i);if(f.state.next({isSubmitting:!0}),s.resolver){const{errors:we,values:_e}=await k();j(),a.errors=we,Ae=jt(_e)}else await F(r);if(c.disabled.size)for(const we of c.disabled)Ot(Ae,we);if(Ot(a.errors,"root"),ps(a.errors)){f.state.next({errors:{}});try{await G(Ae,me)}catch(we){je=we}}else Q&&await Q({...a.errors},me),Ne(),setTimeout(Ne);if(f.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:ps(a.errors)&&!je,submitCount:a.submitCount+1,errors:a.errors}),je)throw je},L=(G,Q={})=>{$e(r,G)&&(bt(Q.defaultValue)?se(G,jt($e(n,G))):(se(G,Q.defaultValue),ft(n,G,jt(Q.defaultValue))),Q.keepTouched||Ot(a.touchedFields,G),Q.keepDirty||(Ot(a.dirtyFields,G),a.isDirty=Q.defaultValue?T(G,jt($e(n,G))):T()),Q.keepError||(Ot(a.errors,G),u.isValid&&p()),f.state.next({...a}))},V=(G,Q={})=>{const me=G?jt(G):n,je=jt(me),Ae=ps(G),we=Ae?n:je;if(Q.keepDefaultValues||(n=me),!Q.keepValues){if(Q.keepDirtyValues){const _e=new Set([...c.mount,...Object.keys(tn(n,i))]);for(const Re of Array.from(_e)){const Pe=$e(a.dirtyFields,Re),ze=$e(i,Re),Ye=$e(we,Re);Pe&&!bt(ze)?ft(we,Re,ze):!Pe&&!bt(Ye)&&se(Re,Ye)}}else{if(Md&&bt(G))for(const _e of c.mount){const Re=$e(r,_e);if(Re&&Re._f){const Pe=Array.isArray(Re._f.refs)?Re._f.refs[0]:Re._f.ref;if(Al(Pe)){const ze=Pe.closest("form");if(ze){ze.reset();break}}}}if(Q.keepFieldsRef)for(const _e of c.mount)se(_e,$e(we,_e));else r={}}i=s.shouldUnregister?Q.keepDefaultValues?jt(n):{}:jt(we),f.array.next({values:{...we}}),f.state.next({values:{...we}})}c={mount:Q.keepDirtyValues?c.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},l.mount=!u.isValid||!!Q.keepIsValid||!!Q.keepDirtyValues||!s.shouldUnregister&&!ps(we),l.watch=!!s.shouldUnregister,l.keepIsValid=!!Q.keepIsValid,l.action=!1,Q.keepErrors||(a.errors={}),f.state.next({submitCount:Q.keepSubmitCount?a.submitCount:0,isDirty:Ae?!1:Q.keepDirty?a.isDirty:!!(Q.keepDefaultValues&&!sr(G,n)),isSubmitted:Q.keepIsSubmitted?a.isSubmitted:!1,dirtyFields:Ae?{}:Q.keepDirtyValues?Q.keepDefaultValues&&i?tn(n,i):a.dirtyFields:Q.keepDefaultValues&&G?tn(n,G):Q.keepDirty?a.dirtyFields:{},touchedFields:Q.keepTouched?a.touchedFields:{},errors:Q.keepErrors?a.errors:{},isSubmitSuccessful:Q.keepIsSubmitSuccessful?a.isSubmitSuccessful:!1,isSubmitting:!1,defaultValues:n})},te=(G,Q)=>V(ma(G)?G(i):G,{...s.resetOptions,...Q}),ne=(G,Q={})=>{const me=$e(r,G),je=me&&me._f;if(je){const Ae=je.refs?je.refs[0]:je.ref;Ae.focus&&setTimeout(()=>{Ae.focus(),Q.shouldSelect&&ma(Ae.select)&&Ae.select()})}},xe=G=>{a={...a,...G}},Se={control:{register:ue,unregister:ie,getFieldState:E,handleSubmit:ce,setError:O,_subscribe:Z,_runSchema:k,_updateIsValidating:j,_focusError:Ne,_getWatch:M,_getDirty:T,_setValid:p,_setFieldArray:v,_setDisabledField:oe,_setErrors:b,_getFieldArray:H,_reset:V,_resetDefaultValues:()=>ma(s.defaultValues)&&s.defaultValues().then(G=>{te(G,s.resetOptions),f.state.next({isLoading:!1})}),_removeUnmounted:R,_disableForm:I,_subjects:f,_proxyFormState:u,get _fields(){return r},get _formValues(){return i},get _state(){return l},set _state(G){l=G},get _defaultValues(){return n},get _names(){return c},set _names(G){c=G},get _formState(){return a},get _options(){return s},set _options(G){s={...s,...G}}},subscribe:re,trigger:le,register:ue,handleSubmit:ce,watch:P,setValue:se,getValues:de,reset:te,resetField:L,clearErrors:z,unregister:ie,setError:O,setFocus:ne,getFieldState:E};return{...Se,formControl:Se}}var Ka=()=>{if(typeof crypto<"u"&&crypto.randomUUID)return crypto.randomUUID();const t=typeof performance>"u"?Date.now():performance.now()*1e3;return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,s=>{const a=(Math.random()*16+t)%16|0;return(s=="x"?a:a&3|8).toString(16)})},Mc=(t,s,a={})=>a.shouldFocus||bt(a.shouldFocus)?a.focusName||`${t}.${bt(a.focusIndex)?s:a.focusIndex}.`:"",Bc=(t,s)=>[...t,...Ms(s)],zc=t=>Array.isArray(t)?t.map(()=>{}):void 0;function Uc(t,s,a){return[...t.slice(0,s),...Ms(a),...t.slice(s)]}var Vc=(t,s,a)=>Array.isArray(t)?(bt(t[a])&&(t[a]=void 0),t.splice(a,0,t.splice(s,1)[0]),t):[],Hc=(t,s)=>[...Ms(s),...Ms(t)];function u_(t,s){let a=0;const r=[...t];for(const n of s)r.splice(n-a,1),a++;return ec(r).length?r:[]}var qc=(t,s)=>bt(s)?[]:u_(t,Ms(s).sort((a,r)=>a-r)),Wc=(t,s,a)=>{[t[s],t[a]]=[t[a],t[s]]},Nm=(t,s,a)=>(t[s]=a,t);function m_(t){const s=ZE(),{control:a=s,name:r,keyName:n="id",shouldUnregister:i,rules:l}=t,[c,o]=Ve.useState(a._getFieldArray(r)),d=Ve.useRef(a._getFieldArray(r).map(Ka)),x=Ve.useRef(!1);a._names.array.add(r),Ve.useMemo(()=>l&&c.length>=0&&a.register(r,l),[a,r,c.length,l]),ap(()=>a._subjects.array.subscribe({next:({values:b,name:A})=>{if(A===r||!A){const N=$e(b,r);Array.isArray(N)&&(o(N),d.current=N.map(Ka))}}}).unsubscribe,[a,r]);const u=Ve.useCallback(b=>{x.current=!0,a._setFieldArray(r,b)},[a,r]),m=(b,A)=>{const N=Ms(jt(b)),C=Bc(a._getFieldArray(r),N);a._names.focus=Mc(r,C.length-1,A),d.current=Bc(d.current,N.map(Ka)),u(C),o(C),a._setFieldArray(r,C,Bc,{argA:zc(b)})},f=(b,A)=>{const N=Ms(jt(b)),C=Hc(a._getFieldArray(r),N);a._names.focus=Mc(r,0,A),d.current=Hc(d.current,N.map(Ka)),u(C),o(C),a._setFieldArray(r,C,Hc,{argA:zc(b)})},g=b=>{const A=qc(a._getFieldArray(r),b);d.current=qc(d.current,b),u(A),o(A),!Array.isArray($e(a._fields,r))&&ft(a._fields,r,void 0),a._setFieldArray(r,A,qc,{argA:b})},h=(b,A,N)=>{const C=Ms(jt(A)),k=Uc(a._getFieldArray(r),b,C);a._names.focus=Mc(r,b,N),d.current=Uc(d.current,b,C.map(Ka)),u(k),o(k),a._setFieldArray(r,k,Uc,{argA:b,argB:zc(A)})},p=(b,A)=>{const N=a._getFieldArray(r);Wc(N,b,A),Wc(d.current,b,A),u(N),o(N),a._setFieldArray(r,N,Wc,{argA:b,argB:A},!1)},j=(b,A)=>{const N=a._getFieldArray(r);Vc(N,b,A),Vc(d.current,b,A),u(N),o(N),a._setFieldArray(r,N,Vc,{argA:b,argB:A},!1)},v=(b,A)=>{const N=jt(A),C=Nm(a._getFieldArray(r),b,N);d.current=[...C].map((k,S)=>!k||S===b?Ka():d.current[S]),u(C),o([...C]),a._setFieldArray(r,C,Nm,{argA:b,argB:N},!0,!1)},w=b=>{const A=Ms(jt(b));d.current=A.map(Ka),u([...A]),o([...A]),a._setFieldArray(r,[...A],N=>N,{},!0,!1)};return Ve.useEffect(()=>{if(a._state.action=!1,$o(r,a._names)&&a._subjects.state.next({...a._formState}),x.current&&(!nn(a._options.mode).isOnSubmit||a._formState.isSubmitted)&&!nn(a._options.reValidateMode).isOnSubmit)if(a._options.resolver)a._runSchema([r]).then(b=>{a._updateIsValidating([r]);const A=$e(b.errors,r),N=$e(a._formState.errors,r);(N?!A&&N.type||A&&(N.type!==A.type||N.message!==A.message):A&&A.type)&&(A?ft(a._formState.errors,r,A):Ot(a._formState.errors,r),a._subjects.state.next({errors:a._formState.errors}))});else{const b=$e(a._fields,r);b&&b._f&&!(nn(a._options.reValidateMode).isOnSubmit&&nn(a._options.mode).isOnSubmit)&&Oo(b,a._names.disabled,a._formValues,a._options.criteriaMode===ra.all,a._options.shouldUseNativeValidation,!0).then(A=>!ps(A)&&a._subjects.state.next({errors:dp(a._formState.errors,A,r)}))}a._subjects.state.next({name:r,values:jt(a._formValues)}),a._names.focus&&xn(a._fields,(b,A)=>{if(a._names.focus&&A.startsWith(a._names.focus)&&b.focus)return b.focus(),1}),a._names.focus="",a._setValid(),x.current=!1},[c,r,a]),Ve.useEffect(()=>(!$e(a._formValues,r)&&a._setFieldArray(r),()=>{const b=(A,N)=>{const C=$e(a._fields,A);C&&C._f&&(C._f.mount=N)};a._options.shouldUnregister||i?a.unregister(r):b(r,!1)}),[r,a,n,i]),{swap:Ve.useCallback(p,[u,r,a]),move:Ve.useCallback(j,[u,r,a]),prepend:Ve.useCallback(f,[u,r,a]),append:Ve.useCallback(m,[u,r,a]),remove:Ve.useCallback(g,[u,r,a]),insert:Ve.useCallback(h,[u,r,a]),update:Ve.useCallback(v,[u,r,a]),replace:Ve.useCallback(w,[u,r,a]),fields:Ve.useMemo(()=>c.map((b,A)=>({...b,[n]:d.current[A]||Ka()})),[c,n])}}function h_(t={}){const s=Ve.useRef(void 0),a=Ve.useRef(void 0),[r,n]=Ve.useState({isDirty:!1,isValidating:!1,isLoading:ma(t.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1,isReady:!1,defaultValues:ma(t.defaultValues)?void 0:t.defaultValues});if(!s.current)if(t.formControl)s.current={...t.formControl,formState:r},t.defaultValues&&!ma(t.defaultValues)&&t.formControl.reset(t.defaultValues,t.resetOptions);else{const{formControl:l,...c}=x_(t);s.current={...c,formState:r}}const i=s.current.control;return i._options=t,ap(()=>{const l=i._subscribe({formState:i._proxyFormState,callback:()=>n({...i._formState}),reRenderRoot:!0});return n(c=>({...c,isReady:!0})),i._formState.isReady=!0,l},[i]),Ve.useEffect(()=>i._disableForm(t.disabled),[i,t.disabled]),Ve.useEffect(()=>{t.mode&&(i._options.mode=t.mode),t.reValidateMode&&(i._options.reValidateMode=t.reValidateMode)},[i,t.mode,t.reValidateMode]),Ve.useEffect(()=>{t.errors&&(i._setErrors(t.errors),i._focusError())},[i,t.errors]),Ve.useEffect(()=>{t.shouldUnregister&&i._subjects.state.next({values:i._getWatch()})},[i,t.shouldUnregister]),Ve.useEffect(()=>{if(i._proxyFormState.isDirty){const l=i._getDirty();l!==r.isDirty&&i._subjects.state.next({isDirty:l})}},[i,r.isDirty]),Ve.useEffect(()=>{var l;t.values&&!sr(t.values,a.current)?(i._reset(t.values,{keepFieldsRef:!0,...i._options.resetOptions}),!((l=i._options.resetOptions)===null||l===void 0)&&l.keepIsValid||i._setValid(),a.current=t.values,n(c=>({...c}))):i._resetDefaultValues()},[i,t.values]),Ve.useEffect(()=>{i._state.mount||(i._setValid(),i._state.mount=!0),i._state.watch&&(i._state.watch=!1,i._subjects.state.next({...i._formState})),i._removeUnmounted()}),s.current.formState=Ve.useMemo(()=>JE(r,i),[i,r]),s.current}function Ce(t,s,a){function r(c,o){if(c._zod||Object.defineProperty(c,"_zod",{value:{def:o,constr:l,traits:new Set},enumerable:!1}),c._zod.traits.has(t))return;c._zod.traits.add(t),s(c,o);const d=l.prototype,x=Object.keys(d);for(let u=0;u<x.length;u++){const m=x[u];m in c||(c[m]=d[m].bind(c))}}const n=(a==null?void 0:a.Parent)??Object;class i extends n{}Object.defineProperty(i,"name",{value:t});function l(c){var o;const d=a!=null&&a.Parent?new i:this;r(d,c),(o=d._zod).deferred??(o.deferred=[]);for(const x of d._zod.deferred)x();return d}return Object.defineProperty(l,"init",{value:r}),Object.defineProperty(l,Symbol.hasInstance,{value:c=>{var o,d;return a!=null&&a.Parent&&c instanceof a.Parent?!0:(d=(o=c==null?void 0:c._zod)==null?void 0:o.traits)==null?void 0:d.has(t)}}),Object.defineProperty(l,"name",{value:t}),l}class un extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}class xp extends Error{constructor(s){super(`Encountered unidirectional transform during encode: ${s}`),this.name="ZodEncodeError"}}const up={};function Or(t){return up}function mp(t){const s=Object.values(t).filter(r=>typeof r=="number");return Object.entries(t).filter(([r,n])=>s.indexOf(+r)===-1).map(([r,n])=>n)}function Lo(t,s){return typeof s=="bigint"?s.toString():s}function Hd(t){return{get value(){{const s=t();return Object.defineProperty(this,"value",{value:s}),s}}}}function qd(t){return t==null}function Wd(t){const s=t.startsWith("^")?1:0,a=t.endsWith("$")?t.length-1:t.length;return t.slice(s,a)}function f_(t,s){const a=(t.toString().split(".")[1]||"").length,r=s.toString();let n=(r.split(".")[1]||"").length;if(n===0&&/\d?e-\d?/.test(r)){const o=r.match(/\d?e-(\d?)/);o!=null&&o[1]&&(n=Number.parseInt(o[1]))}const i=a>n?a:n,l=Number.parseInt(t.toFixed(i).replace(".","")),c=Number.parseInt(s.toFixed(i).replace(".",""));return l%c/10**i}const wm=Symbol("evaluating");function pt(t,s,a){let r;Object.defineProperty(t,s,{get(){if(r!==wm)return r===void 0&&(r=wm,r=a()),r},set(n){Object.defineProperty(t,s,{value:n})},configurable:!0})}function Wr(t,s,a){Object.defineProperty(t,s,{value:a,writable:!0,enumerable:!0,configurable:!0})}function mr(...t){const s={};for(const a of t){const r=Object.getOwnPropertyDescriptors(a);Object.assign(s,r)}return Object.defineProperties({},s)}function km(t){return JSON.stringify(t)}function p_(t){return t.toLowerCase().trim().replace(/[^\w\s-]/g,"").replace(/[\s_-]+/g,"-").replace(/^-+|-+$/g,"")}const hp="captureStackTrace"in Error?Error.captureStackTrace:(...t)=>{};function _l(t){return typeof t=="object"&&t!==null&&!Array.isArray(t)}const g_=Hd(()=>{var t;if(typeof navigator<"u"&&((t=navigator==null?void 0:navigator.userAgent)!=null&&t.includes("Cloudflare")))return!1;try{const s=Function;return new s(""),!0}catch{return!1}});function gi(t){if(_l(t)===!1)return!1;const s=t.constructor;if(s===void 0||typeof s!="function")return!0;const a=s.prototype;return!(_l(a)===!1||Object.prototype.hasOwnProperty.call(a,"isPrototypeOf")===!1)}function fp(t){return gi(t)?{...t}:Array.isArray(t)?[...t]:t}const y_=new Set(["string","number","symbol"]);function jn(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function hr(t,s,a){const r=new t._zod.constr(s??t._zod.def);return(!s||a!=null&&a.parent)&&(r._zod.parent=t),r}function He(t){const s=t;if(!s)return{};if(typeof s=="string")return{error:()=>s};if((s==null?void 0:s.message)!==void 0){if((s==null?void 0:s.error)!==void 0)throw new Error("Cannot specify both `message` and `error` params");s.error=s.message}return delete s.message,typeof s.error=="string"?{...s,error:()=>s.error}:s}function b_(t){return Object.keys(t).filter(s=>t[s]._zod.optin==="optional"&&t[s]._zod.optout==="optional")}const v_={safeint:[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],int32:[-2147483648,2147483647],uint32:[0,4294967295],float32:[-34028234663852886e22,34028234663852886e22],float64:[-Number.MAX_VALUE,Number.MAX_VALUE]};function j_(t,s){const a=t._zod.def,r=a.checks;if(r&&r.length>0)throw new Error(".pick() cannot be used on object schemas containing refinements");const i=mr(t._zod.def,{get shape(){const l={};for(const c in s){if(!(c in a.shape))throw new Error(`Unrecognized key: "${c}"`);s[c]&&(l[c]=a.shape[c])}return Wr(this,"shape",l),l},checks:[]});return hr(t,i)}function N_(t,s){const a=t._zod.def,r=a.checks;if(r&&r.length>0)throw new Error(".omit() cannot be used on object schemas containing refinements");const i=mr(t._zod.def,{get shape(){const l={...t._zod.def.shape};for(const c in s){if(!(c in a.shape))throw new Error(`Unrecognized key: "${c}"`);s[c]&&delete l[c]}return Wr(this,"shape",l),l},checks:[]});return hr(t,i)}function w_(t,s){if(!gi(s))throw new Error("Invalid input to extend: expected a plain object");const a=t._zod.def.checks;if(a&&a.length>0){const i=t._zod.def.shape;for(const l in s)if(Object.getOwnPropertyDescriptor(i,l)!==void 0)throw new Error("Cannot overwrite keys on object schemas containing refinements. Use `.safeExtend()` instead.")}const n=mr(t._zod.def,{get shape(){const i={...t._zod.def.shape,...s};return Wr(this,"shape",i),i}});return hr(t,n)}function k_(t,s){if(!gi(s))throw new Error("Invalid input to safeExtend: expected a plain object");const a=mr(t._zod.def,{get shape(){const r={...t._zod.def.shape,...s};return Wr(this,"shape",r),r}});return hr(t,a)}function S_(t,s){const a=mr(t._zod.def,{get shape(){const r={...t._zod.def.shape,...s._zod.def.shape};return Wr(this,"shape",r),r},get catchall(){return s._zod.def.catchall},checks:[]});return hr(t,a)}function C_(t,s,a){const n=s._zod.def.checks;if(n&&n.length>0)throw new Error(".partial() cannot be used on object schemas containing refinements");const l=mr(s._zod.def,{get shape(){const c=s._zod.def.shape,o={...c};if(a)for(const d in a){if(!(d in c))throw new Error(`Unrecognized key: "${d}"`);a[d]&&(o[d]=t?new t({type:"optional",innerType:c[d]}):c[d])}else for(const d in c)o[d]=t?new t({type:"optional",innerType:c[d]}):c[d];return Wr(this,"shape",o),o},checks:[]});return hr(s,l)}function A_(t,s,a){const r=mr(s._zod.def,{get shape(){const n=s._zod.def.shape,i={...n};if(a)for(const l in a){if(!(l in i))throw new Error(`Unrecognized key: "${l}"`);a[l]&&(i[l]=new t({type:"nonoptional",innerType:n[l]}))}else for(const l in n)i[l]=new t({type:"nonoptional",innerType:n[l]});return Wr(this,"shape",i),i}});return hr(s,r)}function ln(t,s=0){var a;if(t.aborted===!0)return!0;for(let r=s;r<t.issues.length;r++)if(((a=t.issues[r])==null?void 0:a.continue)!==!0)return!0;return!1}function pp(t,s){return s.map(a=>{var r;return(r=a).path??(r.path=[]),a.path.unshift(t),a})}function sl(t){return typeof t=="string"?t:t==null?void 0:t.message}function Lr(t,s,a){var n,i,l,c,o,d;const r={...t,path:t.path??[]};if(!t.message){const x=sl((l=(i=(n=t.inst)==null?void 0:n._zod.def)==null?void 0:i.error)==null?void 0:l.call(i,t))??sl((c=s==null?void 0:s.error)==null?void 0:c.call(s,t))??sl((o=a.customError)==null?void 0:o.call(a,t))??sl((d=a.localeError)==null?void 0:d.call(a,t))??"Invalid input";r.message=x}return delete r.inst,delete r.continue,s!=null&&s.reportInput||delete r.input,r}function Gd(t){return Array.isArray(t)?"array":typeof t=="string"?"string":"unknown"}function yi(...t){const[s,a,r]=t;return typeof s=="string"?{message:s,code:"custom",input:a,inst:r}:{...s}}const gp=(t,s)=>{t.name="$ZodError",Object.defineProperty(t,"_zod",{value:t._zod,enumerable:!1}),Object.defineProperty(t,"issues",{value:s,enumerable:!1}),t.message=JSON.stringify(s,Lo,2),Object.defineProperty(t,"toString",{value:()=>t.message,enumerable:!1})},Yd=Ce("$ZodError",gp),tc=Ce("$ZodError",gp,{Parent:Error});function E_(t,s=a=>a.message){const a={},r=[];for(const n of t.issues)n.path.length>0?(a[n.path[0]]=a[n.path[0]]||[],a[n.path[0]].push(s(n))):r.push(s(n));return{formErrors:r,fieldErrors:a}}function __(t,s=a=>a.message){const a={_errors:[]},r=n=>{for(const i of n.issues)if(i.code==="invalid_union"&&i.errors.length)i.errors.map(l=>r({issues:l}));else if(i.code==="invalid_key")r({issues:i.issues});else if(i.code==="invalid_element")r({issues:i.issues});else if(i.path.length===0)a._errors.push(s(i));else{let l=a,c=0;for(;c<i.path.length;){const o=i.path[c];c===i.path.length-1?(l[o]=l[o]||{_errors:[]},l[o]._errors.push(s(i))):l[o]=l[o]||{_errors:[]},l=l[o],c++}}};return r(t),a}const sc=t=>(s,a,r,n)=>{const i=r?Object.assign(r,{async:!1}):{async:!1},l=s._zod.run({value:a,issues:[]},i);if(l instanceof Promise)throw new un;if(l.issues.length){const c=new((n==null?void 0:n.Err)??t)(l.issues.map(o=>Lr(o,i,Or())));throw hp(c,n==null?void 0:n.callee),c}return l.value},F_=sc(tc),ac=t=>async(s,a,r,n)=>{const i=r?Object.assign(r,{async:!0}):{async:!0};let l=s._zod.run({value:a,issues:[]},i);if(l instanceof Promise&&(l=await l),l.issues.length){const c=new((n==null?void 0:n.Err)??t)(l.issues.map(o=>Lr(o,i,Or())));throw hp(c,n==null?void 0:n.callee),c}return l.value},T_=ac(tc),rc=t=>(s,a,r)=>{const n=r?{...r,async:!1}:{async:!1},i=s._zod.run({value:a,issues:[]},n);if(i instanceof Promise)throw new un;return i.issues.length?{success:!1,error:new(t??Yd)(i.issues.map(l=>Lr(l,n,Or())))}:{success:!0,data:i.value}},D_=rc(tc),nc=t=>async(s,a,r)=>{const n=r?Object.assign(r,{async:!0}):{async:!0};let i=s._zod.run({value:a,issues:[]},n);return i instanceof Promise&&(i=await i),i.issues.length?{success:!1,error:new t(i.issues.map(l=>Lr(l,n,Or())))}:{success:!0,data:i.value}},R_=nc(tc),P_=t=>(s,a,r)=>{const n=r?Object.assign(r,{direction:"backward"}):{direction:"backward"};return sc(t)(s,a,n)},I_=t=>(s,a,r)=>sc(t)(s,a,r),$_=t=>async(s,a,r)=>{const n=r?Object.assign(r,{direction:"backward"}):{direction:"backward"};return ac(t)(s,a,n)},O_=t=>async(s,a,r)=>ac(t)(s,a,r),L_=t=>(s,a,r)=>{const n=r?Object.assign(r,{direction:"backward"}):{direction:"backward"};return rc(t)(s,a,n)},M_=t=>(s,a,r)=>rc(t)(s,a,r),B_=t=>async(s,a,r)=>{const n=r?Object.assign(r,{direction:"backward"}):{direction:"backward"};return nc(t)(s,a,n)},z_=t=>async(s,a,r)=>nc(t)(s,a,r),U_=/^[cC][^\s-]{8,}$/,V_=/^[0-9a-z]+$/,H_=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,q_=/^[0-9a-vA-V]{20}$/,W_=/^[A-Za-z0-9]{27}$/,G_=/^[a-zA-Z0-9_-]{21}$/,Y_=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,Z_=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,Sm=t=>t?new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${t}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/,J_=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,X_="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";function K_(){return new RegExp(X_,"u")}const Q_=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,eF=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:))$/,tF=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,sF=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,aF=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,yp=/^[A-Za-z0-9_-]*$/,rF=/^\+[1-9]\d{6,14}$/,bp="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",nF=new RegExp(`^${bp}$`);function vp(t){const s="(?:[01]\\d|2[0-3]):[0-5]\\d";return typeof t.precision=="number"?t.precision===-1?`${s}`:t.precision===0?`${s}:[0-5]\\d`:`${s}:[0-5]\\d\\.\\d{${t.precision}}`:`${s}(?::[0-5]\\d(?:\\.\\d+)?)?`}function iF(t){return new RegExp(`^${vp(t)}$`)}function lF(t){const s=vp({precision:t.precision}),a=["Z"];t.local&&a.push(""),t.offset&&a.push("([+-](?:[01]\\d|2[0-3]):[0-5]\\d)");const r=`${s}(?:${a.join("|")})`;return new RegExp(`^${bp}T(?:${r})$`)}const cF=t=>{const s=t?`[\\s\\S]{${(t==null?void 0:t.minimum)??0},${(t==null?void 0:t.maximum)??""}}`:"[\\s\\S]*";return new RegExp(`^${s}$`)},oF=/^-?\d+$/,dF=/^-?\d+(?:\.\d+)?$/,xF=/^(?:true|false)$/i,uF=/^[^A-Z]*$/,mF=/^[^a-z]*$/,Hs=Ce("$ZodCheck",(t,s)=>{var a;t._zod??(t._zod={}),t._zod.def=s,(a=t._zod).onattach??(a.onattach=[])}),jp={number:"number",bigint:"bigint",object:"date"},Np=Ce("$ZodCheckLessThan",(t,s)=>{Hs.init(t,s);const a=jp[typeof s.value];t._zod.onattach.push(r=>{const n=r._zod.bag,i=(s.inclusive?n.maximum:n.exclusiveMaximum)??Number.POSITIVE_INFINITY;s.value<i&&(s.inclusive?n.maximum=s.value:n.exclusiveMaximum=s.value)}),t._zod.check=r=>{(s.inclusive?r.value<=s.value:r.value<s.value)||r.issues.push({origin:a,code:"too_big",maximum:typeof s.value=="object"?s.value.getTime():s.value,input:r.value,inclusive:s.inclusive,inst:t,continue:!s.abort})}}),wp=Ce("$ZodCheckGreaterThan",(t,s)=>{Hs.init(t,s);const a=jp[typeof s.value];t._zod.onattach.push(r=>{const n=r._zod.bag,i=(s.inclusive?n.minimum:n.exclusiveMinimum)??Number.NEGATIVE_INFINITY;s.value>i&&(s.inclusive?n.minimum=s.value:n.exclusiveMinimum=s.value)}),t._zod.check=r=>{(s.inclusive?r.value>=s.value:r.value>s.value)||r.issues.push({origin:a,code:"too_small",minimum:typeof s.value=="object"?s.value.getTime():s.value,input:r.value,inclusive:s.inclusive,inst:t,continue:!s.abort})}}),hF=Ce("$ZodCheckMultipleOf",(t,s)=>{Hs.init(t,s),t._zod.onattach.push(a=>{var r;(r=a._zod.bag).multipleOf??(r.multipleOf=s.value)}),t._zod.check=a=>{if(typeof a.value!=typeof s.value)throw new Error("Cannot mix number and bigint in multiple_of check.");(typeof a.value=="bigint"?a.value%s.value===BigInt(0):f_(a.value,s.value)===0)||a.issues.push({origin:typeof a.value,code:"not_multiple_of",divisor:s.value,input:a.value,inst:t,continue:!s.abort})}}),fF=Ce("$ZodCheckNumberFormat",(t,s)=>{var l;Hs.init(t,s),s.format=s.format||"float64";const a=(l=s.format)==null?void 0:l.includes("int"),r=a?"int":"number",[n,i]=v_[s.format];t._zod.onattach.push(c=>{const o=c._zod.bag;o.format=s.format,o.minimum=n,o.maximum=i,a&&(o.pattern=oF)}),t._zod.check=c=>{const o=c.value;if(a){if(!Number.isInteger(o)){c.issues.push({expected:r,format:s.format,code:"invalid_type",continue:!1,input:o,inst:t});return}if(!Number.isSafeInteger(o)){o>0?c.issues.push({input:o,code:"too_big",maximum:Number.MAX_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:t,origin:r,inclusive:!0,continue:!s.abort}):c.issues.push({input:o,code:"too_small",minimum:Number.MIN_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:t,origin:r,inclusive:!0,continue:!s.abort});return}}o<n&&c.issues.push({origin:"number",input:o,code:"too_small",minimum:n,inclusive:!0,inst:t,continue:!s.abort}),o>i&&c.issues.push({origin:"number",input:o,code:"too_big",maximum:i,inclusive:!0,inst:t,continue:!s.abort})}}),pF=Ce("$ZodCheckMaxLength",(t,s)=>{var a;Hs.init(t,s),(a=t._zod.def).when??(a.when=r=>{const n=r.value;return!qd(n)&&n.length!==void 0}),t._zod.onattach.push(r=>{const n=r._zod.bag.maximum??Number.POSITIVE_INFINITY;s.maximum<n&&(r._zod.bag.maximum=s.maximum)}),t._zod.check=r=>{const n=r.value;if(n.length<=s.maximum)return;const l=Gd(n);r.issues.push({origin:l,code:"too_big",maximum:s.maximum,inclusive:!0,input:n,inst:t,continue:!s.abort})}}),gF=Ce("$ZodCheckMinLength",(t,s)=>{var a;Hs.init(t,s),(a=t._zod.def).when??(a.when=r=>{const n=r.value;return!qd(n)&&n.length!==void 0}),t._zod.onattach.push(r=>{const n=r._zod.bag.minimum??Number.NEGATIVE_INFINITY;s.minimum>n&&(r._zod.bag.minimum=s.minimum)}),t._zod.check=r=>{const n=r.value;if(n.length>=s.minimum)return;const l=Gd(n);r.issues.push({origin:l,code:"too_small",minimum:s.minimum,inclusive:!0,input:n,inst:t,continue:!s.abort})}}),yF=Ce("$ZodCheckLengthEquals",(t,s)=>{var a;Hs.init(t,s),(a=t._zod.def).when??(a.when=r=>{const n=r.value;return!qd(n)&&n.length!==void 0}),t._zod.onattach.push(r=>{const n=r._zod.bag;n.minimum=s.length,n.maximum=s.length,n.length=s.length}),t._zod.check=r=>{const n=r.value,i=n.length;if(i===s.length)return;const l=Gd(n),c=i>s.length;r.issues.push({origin:l,...c?{code:"too_big",maximum:s.length}:{code:"too_small",minimum:s.length},inclusive:!0,exact:!0,input:r.value,inst:t,continue:!s.abort})}}),ic=Ce("$ZodCheckStringFormat",(t,s)=>{var a,r;Hs.init(t,s),t._zod.onattach.push(n=>{const i=n._zod.bag;i.format=s.format,s.pattern&&(i.patterns??(i.patterns=new Set),i.patterns.add(s.pattern))}),s.pattern?(a=t._zod).check??(a.check=n=>{s.pattern.lastIndex=0,!s.pattern.test(n.value)&&n.issues.push({origin:"string",code:"invalid_format",format:s.format,input:n.value,...s.pattern?{pattern:s.pattern.toString()}:{},inst:t,continue:!s.abort})}):(r=t._zod).check??(r.check=()=>{})}),bF=Ce("$ZodCheckRegex",(t,s)=>{ic.init(t,s),t._zod.check=a=>{s.pattern.lastIndex=0,!s.pattern.test(a.value)&&a.issues.push({origin:"string",code:"invalid_format",format:"regex",input:a.value,pattern:s.pattern.toString(),inst:t,continue:!s.abort})}}),vF=Ce("$ZodCheckLowerCase",(t,s)=>{s.pattern??(s.pattern=uF),ic.init(t,s)}),jF=Ce("$ZodCheckUpperCase",(t,s)=>{s.pattern??(s.pattern=mF),ic.init(t,s)}),NF=Ce("$ZodCheckIncludes",(t,s)=>{Hs.init(t,s);const a=jn(s.includes),r=new RegExp(typeof s.position=="number"?`^.{${s.position}}${a}`:a);s.pattern=r,t._zod.onattach.push(n=>{const i=n._zod.bag;i.patterns??(i.patterns=new Set),i.patterns.add(r)}),t._zod.check=n=>{n.value.includes(s.includes,s.position)||n.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:s.includes,input:n.value,inst:t,continue:!s.abort})}}),wF=Ce("$ZodCheckStartsWith",(t,s)=>{Hs.init(t,s);const a=new RegExp(`^${jn(s.prefix)}.*`);s.pattern??(s.pattern=a),t._zod.onattach.push(r=>{const n=r._zod.bag;n.patterns??(n.patterns=new Set),n.patterns.add(a)}),t._zod.check=r=>{r.value.startsWith(s.prefix)||r.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:s.prefix,input:r.value,inst:t,continue:!s.abort})}}),kF=Ce("$ZodCheckEndsWith",(t,s)=>{Hs.init(t,s);const a=new RegExp(`.*${jn(s.suffix)}$`);s.pattern??(s.pattern=a),t._zod.onattach.push(r=>{const n=r._zod.bag;n.patterns??(n.patterns=new Set),n.patterns.add(a)}),t._zod.check=r=>{r.value.endsWith(s.suffix)||r.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:s.suffix,input:r.value,inst:t,continue:!s.abort})}}),SF=Ce("$ZodCheckOverwrite",(t,s)=>{Hs.init(t,s),t._zod.check=a=>{a.value=s.tx(a.value)}});class CF{constructor(s=[]){this.content=[],this.indent=0,this&&(this.args=s)}indented(s){this.indent+=1,s(this),this.indent-=1}write(s){if(typeof s=="function"){s(this,{execution:"sync"}),s(this,{execution:"async"});return}const r=s.split(`
`).filter(l=>l),n=Math.min(...r.map(l=>l.length-l.trimStart().length)),i=r.map(l=>l.slice(n)).map(l=>" ".repeat(this.indent*2)+l);for(const l of i)this.content.push(l)}compile(){const s=Function,a=this==null?void 0:this.args,n=[...((this==null?void 0:this.content)??[""]).map(i=>`  ${i}`)];return new s(...a,n.join(`
`))}}const AF={major:4,minor:3,patch:6},Pt=Ce("$ZodType",(t,s)=>{var n;var a;t??(t={}),t._zod.def=s,t._zod.bag=t._zod.bag||{},t._zod.version=AF;const r=[...t._zod.def.checks??[]];t._zod.traits.has("$ZodCheck")&&r.unshift(t);for(const i of r)for(const l of i._zod.onattach)l(t);if(r.length===0)(a=t._zod).deferred??(a.deferred=[]),(n=t._zod.deferred)==null||n.push(()=>{t._zod.run=t._zod.parse});else{const i=(c,o,d)=>{let x=ln(c),u;for(const m of o){if(m._zod.def.when){if(!m._zod.def.when(c))continue}else if(x)continue;const f=c.issues.length,g=m._zod.check(c);if(g instanceof Promise&&(d==null?void 0:d.async)===!1)throw new un;if(u||g instanceof Promise)u=(u??Promise.resolve()).then(async()=>{await g,c.issues.length!==f&&(x||(x=ln(c,f)))});else{if(c.issues.length===f)continue;x||(x=ln(c,f))}}return u?u.then(()=>c):c},l=(c,o,d)=>{if(ln(c))return c.aborted=!0,c;const x=i(o,r,d);if(x instanceof Promise){if(d.async===!1)throw new un;return x.then(u=>t._zod.parse(u,d))}return t._zod.parse(x,d)};t._zod.run=(c,o)=>{if(o.skipChecks)return t._zod.parse(c,o);if(o.direction==="backward"){const x=t._zod.parse({value:c.value,issues:[]},{...o,skipChecks:!0});return x instanceof Promise?x.then(u=>l(u,c,o)):l(x,c,o)}const d=t._zod.parse(c,o);if(d instanceof Promise){if(o.async===!1)throw new un;return d.then(x=>i(x,r,o))}return i(d,r,o)}}pt(t,"~standard",()=>({validate:i=>{var l;try{const c=D_(t,i);return c.success?{value:c.data}:{issues:(l=c.error)==null?void 0:l.issues}}catch{return R_(t,i).then(o=>{var d;return o.success?{value:o.data}:{issues:(d=o.error)==null?void 0:d.issues}})}},vendor:"zod",version:1}))}),Zd=Ce("$ZodString",(t,s)=>{var a;Pt.init(t,s),t._zod.pattern=[...((a=t==null?void 0:t._zod.bag)==null?void 0:a.patterns)??[]].pop()??cF(t._zod.bag),t._zod.parse=(r,n)=>{if(s.coerce)try{r.value=String(r.value)}catch{}return typeof r.value=="string"||r.issues.push({expected:"string",code:"invalid_type",input:r.value,inst:t}),r}}),Ct=Ce("$ZodStringFormat",(t,s)=>{ic.init(t,s),Zd.init(t,s)}),EF=Ce("$ZodGUID",(t,s)=>{s.pattern??(s.pattern=Z_),Ct.init(t,s)}),_F=Ce("$ZodUUID",(t,s)=>{if(s.version){const r={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[s.version];if(r===void 0)throw new Error(`Invalid UUID version: "${s.version}"`);s.pattern??(s.pattern=Sm(r))}else s.pattern??(s.pattern=Sm());Ct.init(t,s)}),FF=Ce("$ZodEmail",(t,s)=>{s.pattern??(s.pattern=J_),Ct.init(t,s)}),TF=Ce("$ZodURL",(t,s)=>{Ct.init(t,s),t._zod.check=a=>{try{const r=a.value.trim(),n=new URL(r);s.hostname&&(s.hostname.lastIndex=0,s.hostname.test(n.hostname)||a.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:s.hostname.source,input:a.value,inst:t,continue:!s.abort})),s.protocol&&(s.protocol.lastIndex=0,s.protocol.test(n.protocol.endsWith(":")?n.protocol.slice(0,-1):n.protocol)||a.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:s.protocol.source,input:a.value,inst:t,continue:!s.abort})),s.normalize?a.value=n.href:a.value=r;return}catch{a.issues.push({code:"invalid_format",format:"url",input:a.value,inst:t,continue:!s.abort})}}}),DF=Ce("$ZodEmoji",(t,s)=>{s.pattern??(s.pattern=K_()),Ct.init(t,s)}),RF=Ce("$ZodNanoID",(t,s)=>{s.pattern??(s.pattern=G_),Ct.init(t,s)}),PF=Ce("$ZodCUID",(t,s)=>{s.pattern??(s.pattern=U_),Ct.init(t,s)}),IF=Ce("$ZodCUID2",(t,s)=>{s.pattern??(s.pattern=V_),Ct.init(t,s)}),$F=Ce("$ZodULID",(t,s)=>{s.pattern??(s.pattern=H_),Ct.init(t,s)}),OF=Ce("$ZodXID",(t,s)=>{s.pattern??(s.pattern=q_),Ct.init(t,s)}),LF=Ce("$ZodKSUID",(t,s)=>{s.pattern??(s.pattern=W_),Ct.init(t,s)}),MF=Ce("$ZodISODateTime",(t,s)=>{s.pattern??(s.pattern=lF(s)),Ct.init(t,s)}),BF=Ce("$ZodISODate",(t,s)=>{s.pattern??(s.pattern=nF),Ct.init(t,s)}),zF=Ce("$ZodISOTime",(t,s)=>{s.pattern??(s.pattern=iF(s)),Ct.init(t,s)}),UF=Ce("$ZodISODuration",(t,s)=>{s.pattern??(s.pattern=Y_),Ct.init(t,s)}),VF=Ce("$ZodIPv4",(t,s)=>{s.pattern??(s.pattern=Q_),Ct.init(t,s),t._zod.bag.format="ipv4"}),HF=Ce("$ZodIPv6",(t,s)=>{s.pattern??(s.pattern=eF),Ct.init(t,s),t._zod.bag.format="ipv6",t._zod.check=a=>{try{new URL(`http://[${a.value}]`)}catch{a.issues.push({code:"invalid_format",format:"ipv6",input:a.value,inst:t,continue:!s.abort})}}}),qF=Ce("$ZodCIDRv4",(t,s)=>{s.pattern??(s.pattern=tF),Ct.init(t,s)}),WF=Ce("$ZodCIDRv6",(t,s)=>{s.pattern??(s.pattern=sF),Ct.init(t,s),t._zod.check=a=>{const r=a.value.split("/");try{if(r.length!==2)throw new Error;const[n,i]=r;if(!i)throw new Error;const l=Number(i);if(`${l}`!==i)throw new Error;if(l<0||l>128)throw new Error;new URL(`http://[${n}]`)}catch{a.issues.push({code:"invalid_format",format:"cidrv6",input:a.value,inst:t,continue:!s.abort})}}});function kp(t){if(t==="")return!0;if(t.length%4!==0)return!1;try{return atob(t),!0}catch{return!1}}const GF=Ce("$ZodBase64",(t,s)=>{s.pattern??(s.pattern=aF),Ct.init(t,s),t._zod.bag.contentEncoding="base64",t._zod.check=a=>{kp(a.value)||a.issues.push({code:"invalid_format",format:"base64",input:a.value,inst:t,continue:!s.abort})}});function YF(t){if(!yp.test(t))return!1;const s=t.replace(/[-_]/g,r=>r==="-"?"+":"/"),a=s.padEnd(Math.ceil(s.length/4)*4,"=");return kp(a)}const ZF=Ce("$ZodBase64URL",(t,s)=>{s.pattern??(s.pattern=yp),Ct.init(t,s),t._zod.bag.contentEncoding="base64url",t._zod.check=a=>{YF(a.value)||a.issues.push({code:"invalid_format",format:"base64url",input:a.value,inst:t,continue:!s.abort})}}),JF=Ce("$ZodE164",(t,s)=>{s.pattern??(s.pattern=rF),Ct.init(t,s)});function XF(t,s=null){try{const a=t.split(".");if(a.length!==3)return!1;const[r]=a;if(!r)return!1;const n=JSON.parse(atob(r));return!("typ"in n&&(n==null?void 0:n.typ)!=="JWT"||!n.alg||s&&(!("alg"in n)||n.alg!==s))}catch{return!1}}const KF=Ce("$ZodJWT",(t,s)=>{Ct.init(t,s),t._zod.check=a=>{XF(a.value,s.alg)||a.issues.push({code:"invalid_format",format:"jwt",input:a.value,inst:t,continue:!s.abort})}}),Sp=Ce("$ZodNumber",(t,s)=>{Pt.init(t,s),t._zod.pattern=t._zod.bag.pattern??dF,t._zod.parse=(a,r)=>{if(s.coerce)try{a.value=Number(a.value)}catch{}const n=a.value;if(typeof n=="number"&&!Number.isNaN(n)&&Number.isFinite(n))return a;const i=typeof n=="number"?Number.isNaN(n)?"NaN":Number.isFinite(n)?void 0:"Infinity":void 0;return a.issues.push({expected:"number",code:"invalid_type",input:n,inst:t,...i?{received:i}:{}}),a}}),QF=Ce("$ZodNumberFormat",(t,s)=>{fF.init(t,s),Sp.init(t,s)}),eT=Ce("$ZodBoolean",(t,s)=>{Pt.init(t,s),t._zod.pattern=xF,t._zod.parse=(a,r)=>{if(s.coerce)try{a.value=!!a.value}catch{}const n=a.value;return typeof n=="boolean"||a.issues.push({expected:"boolean",code:"invalid_type",input:n,inst:t}),a}}),tT=Ce("$ZodUnknown",(t,s)=>{Pt.init(t,s),t._zod.parse=a=>a}),sT=Ce("$ZodNever",(t,s)=>{Pt.init(t,s),t._zod.parse=(a,r)=>(a.issues.push({expected:"never",code:"invalid_type",input:a.value,inst:t}),a)});function Cm(t,s,a){t.issues.length&&s.issues.push(...pp(a,t.issues)),s.value[a]=t.value}const aT=Ce("$ZodArray",(t,s)=>{Pt.init(t,s),t._zod.parse=(a,r)=>{const n=a.value;if(!Array.isArray(n))return a.issues.push({expected:"array",code:"invalid_type",input:n,inst:t}),a;a.value=Array(n.length);const i=[];for(let l=0;l<n.length;l++){const c=n[l],o=s.element._zod.run({value:c,issues:[]},r);o instanceof Promise?i.push(o.then(d=>Cm(d,a,l))):Cm(o,a,l)}return i.length?Promise.all(i).then(()=>a):a}});function Fl(t,s,a,r,n){if(t.issues.length){if(n&&!(a in r))return;s.issues.push(...pp(a,t.issues))}t.value===void 0?a in r&&(s.value[a]=void 0):s.value[a]=t.value}function Cp(t){var r,n,i,l;const s=Object.keys(t.shape);for(const c of s)if(!((l=(i=(n=(r=t.shape)==null?void 0:r[c])==null?void 0:n._zod)==null?void 0:i.traits)!=null&&l.has("$ZodType")))throw new Error(`Invalid element at key "${c}": expected a Zod schema`);const a=b_(t.shape);return{...t,keys:s,keySet:new Set(s),numKeys:s.length,optionalKeys:new Set(a)}}function Ap(t,s,a,r,n,i){const l=[],c=n.keySet,o=n.catchall._zod,d=o.def.type,x=o.optout==="optional";for(const u in s){if(c.has(u))continue;if(d==="never"){l.push(u);continue}const m=o.run({value:s[u],issues:[]},r);m instanceof Promise?t.push(m.then(f=>Fl(f,a,u,s,x))):Fl(m,a,u,s,x)}return l.length&&a.issues.push({code:"unrecognized_keys",keys:l,input:s,inst:i}),t.length?Promise.all(t).then(()=>a):a}const rT=Ce("$ZodObject",(t,s)=>{Pt.init(t,s);const a=Object.getOwnPropertyDescriptor(s,"shape");if(!(a!=null&&a.get)){const c=s.shape;Object.defineProperty(s,"shape",{get:()=>{const o={...c};return Object.defineProperty(s,"shape",{value:o}),o}})}const r=Hd(()=>Cp(s));pt(t._zod,"propValues",()=>{const c=s.shape,o={};for(const d in c){const x=c[d]._zod;if(x.values){o[d]??(o[d]=new Set);for(const u of x.values)o[d].add(u)}}return o});const n=_l,i=s.catchall;let l;t._zod.parse=(c,o)=>{l??(l=r.value);const d=c.value;if(!n(d))return c.issues.push({expected:"object",code:"invalid_type",input:d,inst:t}),c;c.value={};const x=[],u=l.shape;for(const m of l.keys){const f=u[m],g=f._zod.optout==="optional",h=f._zod.run({value:d[m],issues:[]},o);h instanceof Promise?x.push(h.then(p=>Fl(p,c,m,d,g))):Fl(h,c,m,d,g)}return i?Ap(x,d,c,o,r.value,t):x.length?Promise.all(x).then(()=>c):c}}),nT=Ce("$ZodObjectJIT",(t,s)=>{rT.init(t,s);const a=t._zod.parse,r=Hd(()=>Cp(s)),n=m=>{var w;const f=new CF(["shape","payload","ctx"]),g=r.value,h=b=>{const A=km(b);return`shape[${A}]._zod.run({ value: input[${A}], issues: [] }, ctx)`};f.write("const input = payload.value;");const p=Object.create(null);let j=0;for(const b of g.keys)p[b]=`key_${j++}`;f.write("const newResult = {};");for(const b of g.keys){const A=p[b],N=km(b),C=m[b],k=((w=C==null?void 0:C._zod)==null?void 0:w.optout)==="optional";f.write(`const ${A} = ${h(b)};`),k?f.write(`
        if (${A}.issues.length) {
          if (${N} in input) {
            payload.issues = payload.issues.concat(${A}.issues.map(iss => ({
              ...iss,
              path: iss.path ? [${N}, ...iss.path] : [${N}]
            })));
          }
        }
        
        if (${A}.value === undefined) {
          if (${N} in input) {
            newResult[${N}] = undefined;
          }
        } else {
          newResult[${N}] = ${A}.value;
        }
        
      `):f.write(`
        if (${A}.issues.length) {
          payload.issues = payload.issues.concat(${A}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${N}, ...iss.path] : [${N}]
          })));
        }
        
        if (${A}.value === undefined) {
          if (${N} in input) {
            newResult[${N}] = undefined;
          }
        } else {
          newResult[${N}] = ${A}.value;
        }
        
      `)}f.write("payload.value = newResult;"),f.write("return payload;");const v=f.compile();return(b,A)=>v(m,b,A)};let i;const l=_l,c=!up.jitless,d=c&&g_.value,x=s.catchall;let u;t._zod.parse=(m,f)=>{u??(u=r.value);const g=m.value;return l(g)?c&&d&&(f==null?void 0:f.async)===!1&&f.jitless!==!0?(i||(i=n(s.shape)),m=i(m,f),x?Ap([],g,m,f,u,t):m):a(m,f):(m.issues.push({expected:"object",code:"invalid_type",input:g,inst:t}),m)}});function Am(t,s,a,r){for(const i of t)if(i.issues.length===0)return s.value=i.value,s;const n=t.filter(i=>!ln(i));return n.length===1?(s.value=n[0].value,n[0]):(s.issues.push({code:"invalid_union",input:s.value,inst:a,errors:t.map(i=>i.issues.map(l=>Lr(l,r,Or())))}),s)}const iT=Ce("$ZodUnion",(t,s)=>{Pt.init(t,s),pt(t._zod,"optin",()=>s.options.some(n=>n._zod.optin==="optional")?"optional":void 0),pt(t._zod,"optout",()=>s.options.some(n=>n._zod.optout==="optional")?"optional":void 0),pt(t._zod,"values",()=>{if(s.options.every(n=>n._zod.values))return new Set(s.options.flatMap(n=>Array.from(n._zod.values)))}),pt(t._zod,"pattern",()=>{if(s.options.every(n=>n._zod.pattern)){const n=s.options.map(i=>i._zod.pattern);return new RegExp(`^(${n.map(i=>Wd(i.source)).join("|")})$`)}});const a=s.options.length===1,r=s.options[0]._zod.run;t._zod.parse=(n,i)=>{if(a)return r(n,i);let l=!1;const c=[];for(const o of s.options){const d=o._zod.run({value:n.value,issues:[]},i);if(d instanceof Promise)c.push(d),l=!0;else{if(d.issues.length===0)return d;c.push(d)}}return l?Promise.all(c).then(o=>Am(o,n,t,i)):Am(c,n,t,i)}}),lT=Ce("$ZodIntersection",(t,s)=>{Pt.init(t,s),t._zod.parse=(a,r)=>{const n=a.value,i=s.left._zod.run({value:n,issues:[]},r),l=s.right._zod.run({value:n,issues:[]},r);return i instanceof Promise||l instanceof Promise?Promise.all([i,l]).then(([o,d])=>Em(a,o,d)):Em(a,i,l)}});function Mo(t,s){if(t===s)return{valid:!0,data:t};if(t instanceof Date&&s instanceof Date&&+t==+s)return{valid:!0,data:t};if(gi(t)&&gi(s)){const a=Object.keys(s),r=Object.keys(t).filter(i=>a.indexOf(i)!==-1),n={...t,...s};for(const i of r){const l=Mo(t[i],s[i]);if(!l.valid)return{valid:!1,mergeErrorPath:[i,...l.mergeErrorPath]};n[i]=l.data}return{valid:!0,data:n}}if(Array.isArray(t)&&Array.isArray(s)){if(t.length!==s.length)return{valid:!1,mergeErrorPath:[]};const a=[];for(let r=0;r<t.length;r++){const n=t[r],i=s[r],l=Mo(n,i);if(!l.valid)return{valid:!1,mergeErrorPath:[r,...l.mergeErrorPath]};a.push(l.data)}return{valid:!0,data:a}}return{valid:!1,mergeErrorPath:[]}}function Em(t,s,a){const r=new Map;let n;for(const c of s.issues)if(c.code==="unrecognized_keys"){n??(n=c);for(const o of c.keys)r.has(o)||r.set(o,{}),r.get(o).l=!0}else t.issues.push(c);for(const c of a.issues)if(c.code==="unrecognized_keys")for(const o of c.keys)r.has(o)||r.set(o,{}),r.get(o).r=!0;else t.issues.push(c);const i=[...r].filter(([,c])=>c.l&&c.r).map(([c])=>c);if(i.length&&n&&t.issues.push({...n,keys:i}),ln(t))return t;const l=Mo(s.value,a.value);if(!l.valid)throw new Error(`Unmergable intersection. Error path: ${JSON.stringify(l.mergeErrorPath)}`);return t.value=l.data,t}const cT=Ce("$ZodEnum",(t,s)=>{Pt.init(t,s);const a=mp(s.entries),r=new Set(a);t._zod.values=r,t._zod.pattern=new RegExp(`^(${a.filter(n=>y_.has(typeof n)).map(n=>typeof n=="string"?jn(n):n.toString()).join("|")})$`),t._zod.parse=(n,i)=>{const l=n.value;return r.has(l)||n.issues.push({code:"invalid_value",values:a,input:l,inst:t}),n}}),oT=Ce("$ZodLiteral",(t,s)=>{if(Pt.init(t,s),s.values.length===0)throw new Error("Cannot create literal schema with no valid values");const a=new Set(s.values);t._zod.values=a,t._zod.pattern=new RegExp(`^(${s.values.map(r=>typeof r=="string"?jn(r):r?jn(r.toString()):String(r)).join("|")})$`),t._zod.parse=(r,n)=>{const i=r.value;return a.has(i)||r.issues.push({code:"invalid_value",values:s.values,input:i,inst:t}),r}}),dT=Ce("$ZodTransform",(t,s)=>{Pt.init(t,s),t._zod.parse=(a,r)=>{if(r.direction==="backward")throw new xp(t.constructor.name);const n=s.transform(a.value,a);if(r.async)return(n instanceof Promise?n:Promise.resolve(n)).then(l=>(a.value=l,a));if(n instanceof Promise)throw new un;return a.value=n,a}});function _m(t,s){return t.issues.length&&s===void 0?{issues:[],value:void 0}:t}const Ep=Ce("$ZodOptional",(t,s)=>{Pt.init(t,s),t._zod.optin="optional",t._zod.optout="optional",pt(t._zod,"values",()=>s.innerType._zod.values?new Set([...s.innerType._zod.values,void 0]):void 0),pt(t._zod,"pattern",()=>{const a=s.innerType._zod.pattern;return a?new RegExp(`^(${Wd(a.source)})?$`):void 0}),t._zod.parse=(a,r)=>{if(s.innerType._zod.optin==="optional"){const n=s.innerType._zod.run(a,r);return n instanceof Promise?n.then(i=>_m(i,a.value)):_m(n,a.value)}return a.value===void 0?a:s.innerType._zod.run(a,r)}}),xT=Ce("$ZodExactOptional",(t,s)=>{Ep.init(t,s),pt(t._zod,"values",()=>s.innerType._zod.values),pt(t._zod,"pattern",()=>s.innerType._zod.pattern),t._zod.parse=(a,r)=>s.innerType._zod.run(a,r)}),uT=Ce("$ZodNullable",(t,s)=>{Pt.init(t,s),pt(t._zod,"optin",()=>s.innerType._zod.optin),pt(t._zod,"optout",()=>s.innerType._zod.optout),pt(t._zod,"pattern",()=>{const a=s.innerType._zod.pattern;return a?new RegExp(`^(${Wd(a.source)}|null)$`):void 0}),pt(t._zod,"values",()=>s.innerType._zod.values?new Set([...s.innerType._zod.values,null]):void 0),t._zod.parse=(a,r)=>a.value===null?a:s.innerType._zod.run(a,r)}),mT=Ce("$ZodDefault",(t,s)=>{Pt.init(t,s),t._zod.optin="optional",pt(t._zod,"values",()=>s.innerType._zod.values),t._zod.parse=(a,r)=>{if(r.direction==="backward")return s.innerType._zod.run(a,r);if(a.value===void 0)return a.value=s.defaultValue,a;const n=s.innerType._zod.run(a,r);return n instanceof Promise?n.then(i=>Fm(i,s)):Fm(n,s)}});function Fm(t,s){return t.value===void 0&&(t.value=s.defaultValue),t}const hT=Ce("$ZodPrefault",(t,s)=>{Pt.init(t,s),t._zod.optin="optional",pt(t._zod,"values",()=>s.innerType._zod.values),t._zod.parse=(a,r)=>(r.direction==="backward"||a.value===void 0&&(a.value=s.defaultValue),s.innerType._zod.run(a,r))}),fT=Ce("$ZodNonOptional",(t,s)=>{Pt.init(t,s),pt(t._zod,"values",()=>{const a=s.innerType._zod.values;return a?new Set([...a].filter(r=>r!==void 0)):void 0}),t._zod.parse=(a,r)=>{const n=s.innerType._zod.run(a,r);return n instanceof Promise?n.then(i=>Tm(i,t)):Tm(n,t)}});function Tm(t,s){return!t.issues.length&&t.value===void 0&&t.issues.push({code:"invalid_type",expected:"nonoptional",input:t.value,inst:s}),t}const pT=Ce("$ZodCatch",(t,s)=>{Pt.init(t,s),pt(t._zod,"optin",()=>s.innerType._zod.optin),pt(t._zod,"optout",()=>s.innerType._zod.optout),pt(t._zod,"values",()=>s.innerType._zod.values),t._zod.parse=(a,r)=>{if(r.direction==="backward")return s.innerType._zod.run(a,r);const n=s.innerType._zod.run(a,r);return n instanceof Promise?n.then(i=>(a.value=i.value,i.issues.length&&(a.value=s.catchValue({...a,error:{issues:i.issues.map(l=>Lr(l,r,Or()))},input:a.value}),a.issues=[]),a)):(a.value=n.value,n.issues.length&&(a.value=s.catchValue({...a,error:{issues:n.issues.map(i=>Lr(i,r,Or()))},input:a.value}),a.issues=[]),a)}}),gT=Ce("$ZodPipe",(t,s)=>{Pt.init(t,s),pt(t._zod,"values",()=>s.in._zod.values),pt(t._zod,"optin",()=>s.in._zod.optin),pt(t._zod,"optout",()=>s.out._zod.optout),pt(t._zod,"propValues",()=>s.in._zod.propValues),t._zod.parse=(a,r)=>{if(r.direction==="backward"){const i=s.out._zod.run(a,r);return i instanceof Promise?i.then(l=>al(l,s.in,r)):al(i,s.in,r)}const n=s.in._zod.run(a,r);return n instanceof Promise?n.then(i=>al(i,s.out,r)):al(n,s.out,r)}});function al(t,s,a){return t.issues.length?(t.aborted=!0,t):s._zod.run({value:t.value,issues:t.issues},a)}const yT=Ce("$ZodReadonly",(t,s)=>{Pt.init(t,s),pt(t._zod,"propValues",()=>s.innerType._zod.propValues),pt(t._zod,"values",()=>s.innerType._zod.values),pt(t._zod,"optin",()=>{var a,r;return(r=(a=s.innerType)==null?void 0:a._zod)==null?void 0:r.optin}),pt(t._zod,"optout",()=>{var a,r;return(r=(a=s.innerType)==null?void 0:a._zod)==null?void 0:r.optout}),t._zod.parse=(a,r)=>{if(r.direction==="backward")return s.innerType._zod.run(a,r);const n=s.innerType._zod.run(a,r);return n instanceof Promise?n.then(Dm):Dm(n)}});function Dm(t){return t.value=Object.freeze(t.value),t}const bT=Ce("$ZodCustom",(t,s)=>{Hs.init(t,s),Pt.init(t,s),t._zod.parse=(a,r)=>a,t._zod.check=a=>{const r=a.value,n=s.fn(r);if(n instanceof Promise)return n.then(i=>Rm(i,a,r,t));Rm(n,a,r,t)}});function Rm(t,s,a,r){if(!t){const n={code:"custom",input:a,inst:r,path:[...r._zod.def.path??[]],continue:!r._zod.def.abort};r._zod.def.params&&(n.params=r._zod.def.params),s.issues.push(yi(n))}}var Pm;class vT{constructor(){this._map=new WeakMap,this._idmap=new Map}add(s,...a){const r=a[0];return this._map.set(s,r),r&&typeof r=="object"&&"id"in r&&this._idmap.set(r.id,s),this}clear(){return this._map=new WeakMap,this._idmap=new Map,this}remove(s){const a=this._map.get(s);return a&&typeof a=="object"&&"id"in a&&this._idmap.delete(a.id),this._map.delete(s),this}get(s){const a=s._zod.parent;if(a){const r={...this.get(a)??{}};delete r.id;const n={...r,...this._map.get(s)};return Object.keys(n).length?n:void 0}return this._map.get(s)}has(s){return this._map.has(s)}}function jT(){return new vT}(Pm=globalThis).__zod_globalRegistry??(Pm.__zod_globalRegistry=jT());const qn=globalThis.__zod_globalRegistry;function NT(t,s){return new t({type:"string",...He(s)})}function wT(t,s){return new t({type:"string",format:"email",check:"string_format",abort:!1,...He(s)})}function Im(t,s){return new t({type:"string",format:"guid",check:"string_format",abort:!1,...He(s)})}function kT(t,s){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,...He(s)})}function ST(t,s){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...He(s)})}function CT(t,s){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...He(s)})}function AT(t,s){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...He(s)})}function ET(t,s){return new t({type:"string",format:"url",check:"string_format",abort:!1,...He(s)})}function _T(t,s){return new t({type:"string",format:"emoji",check:"string_format",abort:!1,...He(s)})}function FT(t,s){return new t({type:"string",format:"nanoid",check:"string_format",abort:!1,...He(s)})}function TT(t,s){return new t({type:"string",format:"cuid",check:"string_format",abort:!1,...He(s)})}function DT(t,s){return new t({type:"string",format:"cuid2",check:"string_format",abort:!1,...He(s)})}function RT(t,s){return new t({type:"string",format:"ulid",check:"string_format",abort:!1,...He(s)})}function PT(t,s){return new t({type:"string",format:"xid",check:"string_format",abort:!1,...He(s)})}function IT(t,s){return new t({type:"string",format:"ksuid",check:"string_format",abort:!1,...He(s)})}function $T(t,s){return new t({type:"string",format:"ipv4",check:"string_format",abort:!1,...He(s)})}function OT(t,s){return new t({type:"string",format:"ipv6",check:"string_format",abort:!1,...He(s)})}function LT(t,s){return new t({type:"string",format:"cidrv4",check:"string_format",abort:!1,...He(s)})}function MT(t,s){return new t({type:"string",format:"cidrv6",check:"string_format",abort:!1,...He(s)})}function BT(t,s){return new t({type:"string",format:"base64",check:"string_format",abort:!1,...He(s)})}function zT(t,s){return new t({type:"string",format:"base64url",check:"string_format",abort:!1,...He(s)})}function UT(t,s){return new t({type:"string",format:"e164",check:"string_format",abort:!1,...He(s)})}function VT(t,s){return new t({type:"string",format:"jwt",check:"string_format",abort:!1,...He(s)})}function HT(t,s){return new t({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...He(s)})}function qT(t,s){return new t({type:"string",format:"date",check:"string_format",...He(s)})}function WT(t,s){return new t({type:"string",format:"time",check:"string_format",precision:null,...He(s)})}function GT(t,s){return new t({type:"string",format:"duration",check:"string_format",...He(s)})}function YT(t,s){return new t({type:"number",checks:[],...He(s)})}function ZT(t,s){return new t({type:"number",check:"number_format",abort:!1,format:"safeint",...He(s)})}function JT(t,s){return new t({type:"boolean",...He(s)})}function XT(t){return new t({type:"unknown"})}function KT(t,s){return new t({type:"never",...He(s)})}function $m(t,s){return new Np({check:"less_than",...He(s),value:t,inclusive:!1})}function Gc(t,s){return new Np({check:"less_than",...He(s),value:t,inclusive:!0})}function Om(t,s){return new wp({check:"greater_than",...He(s),value:t,inclusive:!1})}function Yc(t,s){return new wp({check:"greater_than",...He(s),value:t,inclusive:!0})}function Lm(t,s){return new hF({check:"multiple_of",...He(s),value:t})}function _p(t,s){return new pF({check:"max_length",...He(s),maximum:t})}function Tl(t,s){return new gF({check:"min_length",...He(s),minimum:t})}function Fp(t,s){return new yF({check:"length_equals",...He(s),length:t})}function QT(t,s){return new bF({check:"string_format",format:"regex",...He(s),pattern:t})}function eD(t){return new vF({check:"string_format",format:"lowercase",...He(t)})}function tD(t){return new jF({check:"string_format",format:"uppercase",...He(t)})}function sD(t,s){return new NF({check:"string_format",format:"includes",...He(s),includes:t})}function aD(t,s){return new wF({check:"string_format",format:"starts_with",...He(s),prefix:t})}function rD(t,s){return new kF({check:"string_format",format:"ends_with",...He(s),suffix:t})}function Fn(t){return new SF({check:"overwrite",tx:t})}function nD(t){return Fn(s=>s.normalize(t))}function iD(){return Fn(t=>t.trim())}function lD(){return Fn(t=>t.toLowerCase())}function cD(){return Fn(t=>t.toUpperCase())}function oD(){return Fn(t=>p_(t))}function dD(t,s,a){return new t({type:"array",element:s,...He(a)})}function xD(t,s,a){return new t({type:"custom",check:"custom",fn:s,...He(a)})}function uD(t){const s=mD(a=>(a.addIssue=r=>{if(typeof r=="string")a.issues.push(yi(r,a.value,s._zod.def));else{const n=r;n.fatal&&(n.continue=!1),n.code??(n.code="custom"),n.input??(n.input=a.value),n.inst??(n.inst=s),n.continue??(n.continue=!s._zod.def.abort),a.issues.push(yi(n))}},t(a.value,a)));return s}function mD(t,s){const a=new Hs({check:"custom",...He(s)});return a._zod.check=t,a}function Tp(t){let s=(t==null?void 0:t.target)??"draft-2020-12";return s==="draft-4"&&(s="draft-04"),s==="draft-7"&&(s="draft-07"),{processors:t.processors??{},metadataRegistry:(t==null?void 0:t.metadata)??qn,target:s,unrepresentable:(t==null?void 0:t.unrepresentable)??"throw",override:(t==null?void 0:t.override)??(()=>{}),io:(t==null?void 0:t.io)??"output",counter:0,seen:new Map,cycles:(t==null?void 0:t.cycles)??"ref",reused:(t==null?void 0:t.reused)??"inline",external:(t==null?void 0:t.external)??void 0}}function xs(t,s,a={path:[],schemaPath:[]}){var x,u;var r;const n=t._zod.def,i=s.seen.get(t);if(i)return i.count++,a.schemaPath.includes(t)&&(i.cycle=a.path),i.schema;const l={schema:{},count:1,cycle:void 0,path:a.path};s.seen.set(t,l);const c=(u=(x=t._zod).toJSONSchema)==null?void 0:u.call(x);if(c)l.schema=c;else{const m={...a,schemaPath:[...a.schemaPath,t],path:a.path};if(t._zod.processJSONSchema)t._zod.processJSONSchema(s,l.schema,m);else{const g=l.schema,h=s.processors[n.type];if(!h)throw new Error(`[toJSONSchema]: Non-representable type encountered: ${n.type}`);h(t,s,g,m)}const f=t._zod.parent;f&&(l.ref||(l.ref=f),xs(f,s,m),s.seen.get(f).isParent=!0)}const o=s.metadataRegistry.get(t);return o&&Object.assign(l.schema,o),s.io==="input"&&As(t)&&(delete l.schema.examples,delete l.schema.default),s.io==="input"&&l.schema._prefault&&((r=l.schema).default??(r.default=l.schema._prefault)),delete l.schema._prefault,s.seen.get(t).schema}function Dp(t,s){var l,c,o,d;const a=t.seen.get(s);if(!a)throw new Error("Unprocessed schema. This is a bug in Zod.");const r=new Map;for(const x of t.seen.entries()){const u=(l=t.metadataRegistry.get(x[0]))==null?void 0:l.id;if(u){const m=r.get(u);if(m&&m!==x[0])throw new Error(`Duplicate schema id "${u}" detected during JSON Schema conversion. Two different schemas cannot share the same id when converted together.`);r.set(u,x[0])}}const n=x=>{var h;const u=t.target==="draft-2020-12"?"$defs":"definitions";if(t.external){const p=(h=t.external.registry.get(x[0]))==null?void 0:h.id,j=t.external.uri??(w=>w);if(p)return{ref:j(p)};const v=x[1].defId??x[1].schema.id??`schema${t.counter++}`;return x[1].defId=v,{defId:v,ref:`${j("__shared")}#/${u}/${v}`}}if(x[1]===a)return{ref:"#"};const f=`#/${u}/`,g=x[1].schema.id??`__schema${t.counter++}`;return{defId:g,ref:f+g}},i=x=>{if(x[1].schema.$ref)return;const u=x[1],{ref:m,defId:f}=n(x);u.def={...u.schema},f&&(u.defId=f);const g=u.schema;for(const h in g)delete g[h];g.$ref=m};if(t.cycles==="throw")for(const x of t.seen.entries()){const u=x[1];if(u.cycle)throw new Error(`Cycle detected: #/${(c=u.cycle)==null?void 0:c.join("/")}/<root>

Set the \`cycles\` parameter to \`"ref"\` to resolve cyclical schemas with defs.`)}for(const x of t.seen.entries()){const u=x[1];if(s===x[0]){i(x);continue}if(t.external){const f=(o=t.external.registry.get(x[0]))==null?void 0:o.id;if(s!==x[0]&&f){i(x);continue}}if((d=t.metadataRegistry.get(x[0]))==null?void 0:d.id){i(x);continue}if(u.cycle){i(x);continue}if(u.count>1&&t.reused==="ref"){i(x);continue}}}function Rp(t,s){var l,c,o;const a=t.seen.get(s);if(!a)throw new Error("Unprocessed schema. This is a bug in Zod.");const r=d=>{const x=t.seen.get(d);if(x.ref===null)return;const u=x.def??x.schema,m={...u},f=x.ref;if(x.ref=null,f){r(f);const h=t.seen.get(f),p=h.schema;if(p.$ref&&(t.target==="draft-07"||t.target==="draft-04"||t.target==="openapi-3.0")?(u.allOf=u.allOf??[],u.allOf.push(p)):Object.assign(u,p),Object.assign(u,m),d._zod.parent===f)for(const v in u)v==="$ref"||v==="allOf"||v in m||delete u[v];if(p.$ref&&h.def)for(const v in u)v==="$ref"||v==="allOf"||v in h.def&&JSON.stringify(u[v])===JSON.stringify(h.def[v])&&delete u[v]}const g=d._zod.parent;if(g&&g!==f){r(g);const h=t.seen.get(g);if(h!=null&&h.schema.$ref&&(u.$ref=h.schema.$ref,h.def))for(const p in u)p==="$ref"||p==="allOf"||p in h.def&&JSON.stringify(u[p])===JSON.stringify(h.def[p])&&delete u[p]}t.override({zodSchema:d,jsonSchema:u,path:x.path??[]})};for(const d of[...t.seen.entries()].reverse())r(d[0]);const n={};if(t.target==="draft-2020-12"?n.$schema="https://json-schema.org/draft/2020-12/schema":t.target==="draft-07"?n.$schema="http://json-schema.org/draft-07/schema#":t.target==="draft-04"?n.$schema="http://json-schema.org/draft-04/schema#":t.target,(l=t.external)!=null&&l.uri){const d=(c=t.external.registry.get(s))==null?void 0:c.id;if(!d)throw new Error("Schema is missing an `id` property");n.$id=t.external.uri(d)}Object.assign(n,a.def??a.schema);const i=((o=t.external)==null?void 0:o.defs)??{};for(const d of t.seen.entries()){const x=d[1];x.def&&x.defId&&(i[x.defId]=x.def)}t.external||Object.keys(i).length>0&&(t.target==="draft-2020-12"?n.$defs=i:n.definitions=i);try{const d=JSON.parse(JSON.stringify(n));return Object.defineProperty(d,"~standard",{value:{...s["~standard"],jsonSchema:{input:Dl(s,"input",t.processors),output:Dl(s,"output",t.processors)}},enumerable:!1,writable:!1}),d}catch{throw new Error("Error converting schema to JSON.")}}function As(t,s){const a=s??{seen:new Set};if(a.seen.has(t))return!1;a.seen.add(t);const r=t._zod.def;if(r.type==="transform")return!0;if(r.type==="array")return As(r.element,a);if(r.type==="set")return As(r.valueType,a);if(r.type==="lazy")return As(r.getter(),a);if(r.type==="promise"||r.type==="optional"||r.type==="nonoptional"||r.type==="nullable"||r.type==="readonly"||r.type==="default"||r.type==="prefault")return As(r.innerType,a);if(r.type==="intersection")return As(r.left,a)||As(r.right,a);if(r.type==="record"||r.type==="map")return As(r.keyType,a)||As(r.valueType,a);if(r.type==="pipe")return As(r.in,a)||As(r.out,a);if(r.type==="object"){for(const n in r.shape)if(As(r.shape[n],a))return!0;return!1}if(r.type==="union"){for(const n of r.options)if(As(n,a))return!0;return!1}if(r.type==="tuple"){for(const n of r.items)if(As(n,a))return!0;return!!(r.rest&&As(r.rest,a))}return!1}const hD=(t,s={})=>a=>{const r=Tp({...a,processors:s});return xs(t,r),Dp(r,t),Rp(r,t)},Dl=(t,s,a={})=>r=>{const{libraryOptions:n,target:i}=r??{},l=Tp({...n??{},target:i,io:s,processors:a});return xs(t,l),Dp(l,t),Rp(l,t)},fD={guid:"uuid",url:"uri",datetime:"date-time",json_string:"json-string",regex:""},pD=(t,s,a,r)=>{const n=a;n.type="string";const{minimum:i,maximum:l,format:c,patterns:o,contentEncoding:d}=t._zod.bag;if(typeof i=="number"&&(n.minLength=i),typeof l=="number"&&(n.maxLength=l),c&&(n.format=fD[c]??c,n.format===""&&delete n.format,c==="time"&&delete n.format),d&&(n.contentEncoding=d),o&&o.size>0){const x=[...o];x.length===1?n.pattern=x[0].source:x.length>1&&(n.allOf=[...x.map(u=>({...s.target==="draft-07"||s.target==="draft-04"||s.target==="openapi-3.0"?{type:"string"}:{},pattern:u.source}))])}},gD=(t,s,a,r)=>{const n=a,{minimum:i,maximum:l,format:c,multipleOf:o,exclusiveMaximum:d,exclusiveMinimum:x}=t._zod.bag;typeof c=="string"&&c.includes("int")?n.type="integer":n.type="number",typeof x=="number"&&(s.target==="draft-04"||s.target==="openapi-3.0"?(n.minimum=x,n.exclusiveMinimum=!0):n.exclusiveMinimum=x),typeof i=="number"&&(n.minimum=i,typeof x=="number"&&s.target!=="draft-04"&&(x>=i?delete n.minimum:delete n.exclusiveMinimum)),typeof d=="number"&&(s.target==="draft-04"||s.target==="openapi-3.0"?(n.maximum=d,n.exclusiveMaximum=!0):n.exclusiveMaximum=d),typeof l=="number"&&(n.maximum=l,typeof d=="number"&&s.target!=="draft-04"&&(d<=l?delete n.maximum:delete n.exclusiveMaximum)),typeof o=="number"&&(n.multipleOf=o)},yD=(t,s,a,r)=>{a.type="boolean"},bD=(t,s,a,r)=>{a.not={}},vD=(t,s,a,r)=>{},jD=(t,s,a,r)=>{const n=t._zod.def,i=mp(n.entries);i.every(l=>typeof l=="number")&&(a.type="number"),i.every(l=>typeof l=="string")&&(a.type="string"),a.enum=i},ND=(t,s,a,r)=>{const n=t._zod.def,i=[];for(const l of n.values)if(l===void 0){if(s.unrepresentable==="throw")throw new Error("Literal `undefined` cannot be represented in JSON Schema")}else if(typeof l=="bigint"){if(s.unrepresentable==="throw")throw new Error("BigInt literals cannot be represented in JSON Schema");i.push(Number(l))}else i.push(l);if(i.length!==0)if(i.length===1){const l=i[0];a.type=l===null?"null":typeof l,s.target==="draft-04"||s.target==="openapi-3.0"?a.enum=[l]:a.const=l}else i.every(l=>typeof l=="number")&&(a.type="number"),i.every(l=>typeof l=="string")&&(a.type="string"),i.every(l=>typeof l=="boolean")&&(a.type="boolean"),i.every(l=>l===null)&&(a.type="null"),a.enum=i},wD=(t,s,a,r)=>{if(s.unrepresentable==="throw")throw new Error("Custom types cannot be represented in JSON Schema")},kD=(t,s,a,r)=>{if(s.unrepresentable==="throw")throw new Error("Transforms cannot be represented in JSON Schema")},SD=(t,s,a,r)=>{const n=a,i=t._zod.def,{minimum:l,maximum:c}=t._zod.bag;typeof l=="number"&&(n.minItems=l),typeof c=="number"&&(n.maxItems=c),n.type="array",n.items=xs(i.element,s,{...r,path:[...r.path,"items"]})},CD=(t,s,a,r)=>{var d;const n=a,i=t._zod.def;n.type="object",n.properties={};const l=i.shape;for(const x in l)n.properties[x]=xs(l[x],s,{...r,path:[...r.path,"properties",x]});const c=new Set(Object.keys(l)),o=new Set([...c].filter(x=>{const u=i.shape[x]._zod;return s.io==="input"?u.optin===void 0:u.optout===void 0}));o.size>0&&(n.required=Array.from(o)),((d=i.catchall)==null?void 0:d._zod.def.type)==="never"?n.additionalProperties=!1:i.catchall?i.catchall&&(n.additionalProperties=xs(i.catchall,s,{...r,path:[...r.path,"additionalProperties"]})):s.io==="output"&&(n.additionalProperties=!1)},AD=(t,s,a,r)=>{const n=t._zod.def,i=n.inclusive===!1,l=n.options.map((c,o)=>xs(c,s,{...r,path:[...r.path,i?"oneOf":"anyOf",o]}));i?a.oneOf=l:a.anyOf=l},ED=(t,s,a,r)=>{const n=t._zod.def,i=xs(n.left,s,{...r,path:[...r.path,"allOf",0]}),l=xs(n.right,s,{...r,path:[...r.path,"allOf",1]}),c=d=>"allOf"in d&&Object.keys(d).length===1,o=[...c(i)?i.allOf:[i],...c(l)?l.allOf:[l]];a.allOf=o},_D=(t,s,a,r)=>{const n=t._zod.def,i=xs(n.innerType,s,r),l=s.seen.get(t);s.target==="openapi-3.0"?(l.ref=n.innerType,a.nullable=!0):a.anyOf=[i,{type:"null"}]},FD=(t,s,a,r)=>{const n=t._zod.def;xs(n.innerType,s,r);const i=s.seen.get(t);i.ref=n.innerType},TD=(t,s,a,r)=>{const n=t._zod.def;xs(n.innerType,s,r);const i=s.seen.get(t);i.ref=n.innerType,a.default=JSON.parse(JSON.stringify(n.defaultValue))},DD=(t,s,a,r)=>{const n=t._zod.def;xs(n.innerType,s,r);const i=s.seen.get(t);i.ref=n.innerType,s.io==="input"&&(a._prefault=JSON.parse(JSON.stringify(n.defaultValue)))},RD=(t,s,a,r)=>{const n=t._zod.def;xs(n.innerType,s,r);const i=s.seen.get(t);i.ref=n.innerType;let l;try{l=n.catchValue(void 0)}catch{throw new Error("Dynamic catch values are not supported in JSON Schema")}a.default=l},PD=(t,s,a,r)=>{const n=t._zod.def,i=s.io==="input"?n.in._zod.def.type==="transform"?n.out:n.in:n.out;xs(i,s,r);const l=s.seen.get(t);l.ref=i},ID=(t,s,a,r)=>{const n=t._zod.def;xs(n.innerType,s,r);const i=s.seen.get(t);i.ref=n.innerType,a.readOnly=!0},Pp=(t,s,a,r)=>{const n=t._zod.def;xs(n.innerType,s,r);const i=s.seen.get(t);i.ref=n.innerType},$D=Ce("ZodISODateTime",(t,s)=>{MF.init(t,s),Ft.init(t,s)});function OD(t){return HT($D,t)}const LD=Ce("ZodISODate",(t,s)=>{BF.init(t,s),Ft.init(t,s)});function MD(t){return qT(LD,t)}const BD=Ce("ZodISOTime",(t,s)=>{zF.init(t,s),Ft.init(t,s)});function zD(t){return WT(BD,t)}const UD=Ce("ZodISODuration",(t,s)=>{UF.init(t,s),Ft.init(t,s)});function VD(t){return GT(UD,t)}const HD=(t,s)=>{Yd.init(t,s),t.name="ZodError",Object.defineProperties(t,{format:{value:a=>__(t,a)},flatten:{value:a=>E_(t,a)},addIssue:{value:a=>{t.issues.push(a),t.message=JSON.stringify(t.issues,Lo,2)}},addIssues:{value:a=>{t.issues.push(...a),t.message=JSON.stringify(t.issues,Lo,2)}},isEmpty:{get(){return t.issues.length===0}}})},la=Ce("ZodError",HD,{Parent:Error}),qD=sc(la),WD=ac(la),GD=rc(la),YD=nc(la),ZD=P_(la),JD=I_(la),XD=$_(la),KD=O_(la),QD=L_(la),e6=M_(la),t6=B_(la),s6=z_(la),It=Ce("ZodType",(t,s)=>(Pt.init(t,s),Object.assign(t["~standard"],{jsonSchema:{input:Dl(t,"input"),output:Dl(t,"output")}}),t.toJSONSchema=hD(t,{}),t.def=s,t.type=s.type,Object.defineProperty(t,"_def",{value:s}),t.check=(...a)=>t.clone(mr(s,{checks:[...s.checks??[],...a.map(r=>typeof r=="function"?{_zod:{check:r,def:{check:"custom"},onattach:[]}}:r)]}),{parent:!0}),t.with=t.check,t.clone=(a,r)=>hr(t,a,r),t.brand=()=>t,t.register=(a,r)=>(a.add(t,r),t),t.parse=(a,r)=>qD(t,a,r,{callee:t.parse}),t.safeParse=(a,r)=>GD(t,a,r),t.parseAsync=async(a,r)=>WD(t,a,r,{callee:t.parseAsync}),t.safeParseAsync=async(a,r)=>YD(t,a,r),t.spa=t.safeParseAsync,t.encode=(a,r)=>ZD(t,a,r),t.decode=(a,r)=>JD(t,a,r),t.encodeAsync=async(a,r)=>XD(t,a,r),t.decodeAsync=async(a,r)=>KD(t,a,r),t.safeEncode=(a,r)=>QD(t,a,r),t.safeDecode=(a,r)=>e6(t,a,r),t.safeEncodeAsync=async(a,r)=>t6(t,a,r),t.safeDecodeAsync=async(a,r)=>s6(t,a,r),t.refine=(a,r)=>t.check(Y6(a,r)),t.superRefine=a=>t.check(Z6(a)),t.overwrite=a=>t.check(Fn(a)),t.optional=()=>Vm(t),t.exactOptional=()=>I6(t),t.nullable=()=>Hm(t),t.nullish=()=>Vm(Hm(t)),t.nonoptional=a=>z6(t,a),t.array=()=>Lp(t),t.or=a=>Mp([t,a]),t.and=a=>F6(t,a),t.transform=a=>qm(t,R6(a)),t.default=a=>L6(t,a),t.prefault=a=>B6(t,a),t.catch=a=>V6(t,a),t.pipe=a=>qm(t,a),t.readonly=()=>W6(t),t.describe=a=>{const r=t.clone();return qn.add(r,{description:a}),r},Object.defineProperty(t,"description",{get(){var a;return(a=qn.get(t))==null?void 0:a.description},configurable:!0}),t.meta=(...a)=>{if(a.length===0)return qn.get(t);const r=t.clone();return qn.add(r,a[0]),r},t.isOptional=()=>t.safeParse(void 0).success,t.isNullable=()=>t.safeParse(null).success,t.apply=a=>a(t),t)),Ip=Ce("_ZodString",(t,s)=>{Zd.init(t,s),It.init(t,s),t._zod.processJSONSchema=(r,n,i)=>pD(t,r,n);const a=t._zod.bag;t.format=a.format??null,t.minLength=a.minimum??null,t.maxLength=a.maximum??null,t.regex=(...r)=>t.check(QT(...r)),t.includes=(...r)=>t.check(sD(...r)),t.startsWith=(...r)=>t.check(aD(...r)),t.endsWith=(...r)=>t.check(rD(...r)),t.min=(...r)=>t.check(Tl(...r)),t.max=(...r)=>t.check(_p(...r)),t.length=(...r)=>t.check(Fp(...r)),t.nonempty=(...r)=>t.check(Tl(1,...r)),t.lowercase=r=>t.check(eD(r)),t.uppercase=r=>t.check(tD(r)),t.trim=()=>t.check(iD()),t.normalize=(...r)=>t.check(nD(...r)),t.toLowerCase=()=>t.check(lD()),t.toUpperCase=()=>t.check(cD()),t.slugify=()=>t.check(oD())}),a6=Ce("ZodString",(t,s)=>{Zd.init(t,s),Ip.init(t,s),t.email=a=>t.check(wT(r6,a)),t.url=a=>t.check(ET(n6,a)),t.jwt=a=>t.check(VT(v6,a)),t.emoji=a=>t.check(_T(i6,a)),t.guid=a=>t.check(Im(Mm,a)),t.uuid=a=>t.check(kT(rl,a)),t.uuidv4=a=>t.check(ST(rl,a)),t.uuidv6=a=>t.check(CT(rl,a)),t.uuidv7=a=>t.check(AT(rl,a)),t.nanoid=a=>t.check(FT(l6,a)),t.guid=a=>t.check(Im(Mm,a)),t.cuid=a=>t.check(TT(c6,a)),t.cuid2=a=>t.check(DT(o6,a)),t.ulid=a=>t.check(RT(d6,a)),t.base64=a=>t.check(BT(g6,a)),t.base64url=a=>t.check(zT(y6,a)),t.xid=a=>t.check(PT(x6,a)),t.ksuid=a=>t.check(IT(u6,a)),t.ipv4=a=>t.check($T(m6,a)),t.ipv6=a=>t.check(OT(h6,a)),t.cidrv4=a=>t.check(LT(f6,a)),t.cidrv6=a=>t.check(MT(p6,a)),t.e164=a=>t.check(UT(b6,a)),t.datetime=a=>t.check(OD(a)),t.date=a=>t.check(MD(a)),t.time=a=>t.check(zD(a)),t.duration=a=>t.check(VD(a))});function sn(t){return NT(a6,t)}const Ft=Ce("ZodStringFormat",(t,s)=>{Ct.init(t,s),Ip.init(t,s)}),r6=Ce("ZodEmail",(t,s)=>{FF.init(t,s),Ft.init(t,s)}),Mm=Ce("ZodGUID",(t,s)=>{EF.init(t,s),Ft.init(t,s)}),rl=Ce("ZodUUID",(t,s)=>{_F.init(t,s),Ft.init(t,s)}),n6=Ce("ZodURL",(t,s)=>{TF.init(t,s),Ft.init(t,s)}),i6=Ce("ZodEmoji",(t,s)=>{DF.init(t,s),Ft.init(t,s)}),l6=Ce("ZodNanoID",(t,s)=>{RF.init(t,s),Ft.init(t,s)}),c6=Ce("ZodCUID",(t,s)=>{PF.init(t,s),Ft.init(t,s)}),o6=Ce("ZodCUID2",(t,s)=>{IF.init(t,s),Ft.init(t,s)}),d6=Ce("ZodULID",(t,s)=>{$F.init(t,s),Ft.init(t,s)}),x6=Ce("ZodXID",(t,s)=>{OF.init(t,s),Ft.init(t,s)}),u6=Ce("ZodKSUID",(t,s)=>{LF.init(t,s),Ft.init(t,s)}),m6=Ce("ZodIPv4",(t,s)=>{VF.init(t,s),Ft.init(t,s)}),h6=Ce("ZodIPv6",(t,s)=>{HF.init(t,s),Ft.init(t,s)}),f6=Ce("ZodCIDRv4",(t,s)=>{qF.init(t,s),Ft.init(t,s)}),p6=Ce("ZodCIDRv6",(t,s)=>{WF.init(t,s),Ft.init(t,s)}),g6=Ce("ZodBase64",(t,s)=>{GF.init(t,s),Ft.init(t,s)}),y6=Ce("ZodBase64URL",(t,s)=>{ZF.init(t,s),Ft.init(t,s)}),b6=Ce("ZodE164",(t,s)=>{JF.init(t,s),Ft.init(t,s)}),v6=Ce("ZodJWT",(t,s)=>{KF.init(t,s),Ft.init(t,s)}),$p=Ce("ZodNumber",(t,s)=>{Sp.init(t,s),It.init(t,s),t._zod.processJSONSchema=(r,n,i)=>gD(t,r,n),t.gt=(r,n)=>t.check(Om(r,n)),t.gte=(r,n)=>t.check(Yc(r,n)),t.min=(r,n)=>t.check(Yc(r,n)),t.lt=(r,n)=>t.check($m(r,n)),t.lte=(r,n)=>t.check(Gc(r,n)),t.max=(r,n)=>t.check(Gc(r,n)),t.int=r=>t.check(Bm(r)),t.safe=r=>t.check(Bm(r)),t.positive=r=>t.check(Om(0,r)),t.nonnegative=r=>t.check(Yc(0,r)),t.negative=r=>t.check($m(0,r)),t.nonpositive=r=>t.check(Gc(0,r)),t.multipleOf=(r,n)=>t.check(Lm(r,n)),t.step=(r,n)=>t.check(Lm(r,n)),t.finite=()=>t;const a=t._zod.bag;t.minValue=Math.max(a.minimum??Number.NEGATIVE_INFINITY,a.exclusiveMinimum??Number.NEGATIVE_INFINITY)??null,t.maxValue=Math.min(a.maximum??Number.POSITIVE_INFINITY,a.exclusiveMaximum??Number.POSITIVE_INFINITY)??null,t.isInt=(a.format??"").includes("int")||Number.isSafeInteger(a.multipleOf??.5),t.isFinite=!0,t.format=a.format??null});function Op(t){return YT($p,t)}const j6=Ce("ZodNumberFormat",(t,s)=>{QF.init(t,s),$p.init(t,s)});function Bm(t){return ZT(j6,t)}const N6=Ce("ZodBoolean",(t,s)=>{eT.init(t,s),It.init(t,s),t._zod.processJSONSchema=(a,r,n)=>yD(t,a,r)});function xa(t){return JT(N6,t)}const w6=Ce("ZodUnknown",(t,s)=>{tT.init(t,s),It.init(t,s),t._zod.processJSONSchema=(a,r,n)=>vD()});function zm(){return XT(w6)}const k6=Ce("ZodNever",(t,s)=>{sT.init(t,s),It.init(t,s),t._zod.processJSONSchema=(a,r,n)=>bD(t,a,r)});function S6(t){return KT(k6,t)}const C6=Ce("ZodArray",(t,s)=>{aT.init(t,s),It.init(t,s),t._zod.processJSONSchema=(a,r,n)=>SD(t,a,r,n),t.element=s.element,t.min=(a,r)=>t.check(Tl(a,r)),t.nonempty=a=>t.check(Tl(1,a)),t.max=(a,r)=>t.check(_p(a,r)),t.length=(a,r)=>t.check(Fp(a,r)),t.unwrap=()=>t.element});function Lp(t,s){return dD(C6,t,s)}const A6=Ce("ZodObject",(t,s)=>{nT.init(t,s),It.init(t,s),t._zod.processJSONSchema=(a,r,n)=>CD(t,a,r,n),pt(t,"shape",()=>s.shape),t.keyof=()=>mn(Object.keys(t._zod.def.shape)),t.catchall=a=>t.clone({...t._zod.def,catchall:a}),t.passthrough=()=>t.clone({...t._zod.def,catchall:zm()}),t.loose=()=>t.clone({...t._zod.def,catchall:zm()}),t.strict=()=>t.clone({...t._zod.def,catchall:S6()}),t.strip=()=>t.clone({...t._zod.def,catchall:void 0}),t.extend=a=>w_(t,a),t.safeExtend=a=>k_(t,a),t.merge=a=>S_(t,a),t.pick=a=>j_(t,a),t.omit=a=>N_(t,a),t.partial=(...a)=>C_(Bp,t,a[0]),t.required=(...a)=>A_(zp,t,a[0])});function Wn(t,s){const a={type:"object",shape:t??{},...He(s)};return new A6(a)}const E6=Ce("ZodUnion",(t,s)=>{iT.init(t,s),It.init(t,s),t._zod.processJSONSchema=(a,r,n)=>AD(t,a,r,n),t.options=s.options});function Mp(t,s){return new E6({type:"union",options:t,...He(s)})}const _6=Ce("ZodIntersection",(t,s)=>{lT.init(t,s),It.init(t,s),t._zod.processJSONSchema=(a,r,n)=>ED(t,a,r,n)});function F6(t,s){return new _6({type:"intersection",left:t,right:s})}const Bo=Ce("ZodEnum",(t,s)=>{cT.init(t,s),It.init(t,s),t._zod.processJSONSchema=(r,n,i)=>jD(t,r,n),t.enum=s.entries,t.options=Object.values(s.entries);const a=new Set(Object.keys(s.entries));t.extract=(r,n)=>{const i={};for(const l of r)if(a.has(l))i[l]=s.entries[l];else throw new Error(`Key ${l} not found in enum`);return new Bo({...s,checks:[],...He(n),entries:i})},t.exclude=(r,n)=>{const i={...s.entries};for(const l of r)if(a.has(l))delete i[l];else throw new Error(`Key ${l} not found in enum`);return new Bo({...s,checks:[],...He(n),entries:i})}});function mn(t,s){const a=Array.isArray(t)?Object.fromEntries(t.map(r=>[r,r])):t;return new Bo({type:"enum",entries:a,...He(s)})}const T6=Ce("ZodLiteral",(t,s)=>{oT.init(t,s),It.init(t,s),t._zod.processJSONSchema=(a,r,n)=>ND(t,a,r),t.values=new Set(s.values),Object.defineProperty(t,"value",{get(){if(s.values.length>1)throw new Error("This schema contains multiple valid literal values. Use `.values` instead.");return s.values[0]}})});function Um(t,s){return new T6({type:"literal",values:Array.isArray(t)?t:[t],...He(s)})}const D6=Ce("ZodTransform",(t,s)=>{dT.init(t,s),It.init(t,s),t._zod.processJSONSchema=(a,r,n)=>kD(t,a),t._zod.parse=(a,r)=>{if(r.direction==="backward")throw new xp(t.constructor.name);a.addIssue=i=>{if(typeof i=="string")a.issues.push(yi(i,a.value,s));else{const l=i;l.fatal&&(l.continue=!1),l.code??(l.code="custom"),l.input??(l.input=a.value),l.inst??(l.inst=t),a.issues.push(yi(l))}};const n=s.transform(a.value,a);return n instanceof Promise?n.then(i=>(a.value=i,a)):(a.value=n,a)}});function R6(t){return new D6({type:"transform",transform:t})}const Bp=Ce("ZodOptional",(t,s)=>{Ep.init(t,s),It.init(t,s),t._zod.processJSONSchema=(a,r,n)=>Pp(t,a,r,n),t.unwrap=()=>t._zod.def.innerType});function Vm(t){return new Bp({type:"optional",innerType:t})}const P6=Ce("ZodExactOptional",(t,s)=>{xT.init(t,s),It.init(t,s),t._zod.processJSONSchema=(a,r,n)=>Pp(t,a,r,n),t.unwrap=()=>t._zod.def.innerType});function I6(t){return new P6({type:"optional",innerType:t})}const $6=Ce("ZodNullable",(t,s)=>{uT.init(t,s),It.init(t,s),t._zod.processJSONSchema=(a,r,n)=>_D(t,a,r,n),t.unwrap=()=>t._zod.def.innerType});function Hm(t){return new $6({type:"nullable",innerType:t})}const O6=Ce("ZodDefault",(t,s)=>{mT.init(t,s),It.init(t,s),t._zod.processJSONSchema=(a,r,n)=>TD(t,a,r,n),t.unwrap=()=>t._zod.def.innerType,t.removeDefault=t.unwrap});function L6(t,s){return new O6({type:"default",innerType:t,get defaultValue(){return typeof s=="function"?s():fp(s)}})}const M6=Ce("ZodPrefault",(t,s)=>{hT.init(t,s),It.init(t,s),t._zod.processJSONSchema=(a,r,n)=>DD(t,a,r,n),t.unwrap=()=>t._zod.def.innerType});function B6(t,s){return new M6({type:"prefault",innerType:t,get defaultValue(){return typeof s=="function"?s():fp(s)}})}const zp=Ce("ZodNonOptional",(t,s)=>{fT.init(t,s),It.init(t,s),t._zod.processJSONSchema=(a,r,n)=>FD(t,a,r,n),t.unwrap=()=>t._zod.def.innerType});function z6(t,s){return new zp({type:"nonoptional",innerType:t,...He(s)})}const U6=Ce("ZodCatch",(t,s)=>{pT.init(t,s),It.init(t,s),t._zod.processJSONSchema=(a,r,n)=>RD(t,a,r,n),t.unwrap=()=>t._zod.def.innerType,t.removeCatch=t.unwrap});function V6(t,s){return new U6({type:"catch",innerType:t,catchValue:typeof s=="function"?s:()=>s})}const H6=Ce("ZodPipe",(t,s)=>{gT.init(t,s),It.init(t,s),t._zod.processJSONSchema=(a,r,n)=>PD(t,a,r,n),t.in=s.in,t.out=s.out});function qm(t,s){return new H6({type:"pipe",in:t,out:s})}const q6=Ce("ZodReadonly",(t,s)=>{yT.init(t,s),It.init(t,s),t._zod.processJSONSchema=(a,r,n)=>ID(t,a,r,n),t.unwrap=()=>t._zod.def.innerType});function W6(t){return new q6({type:"readonly",innerType:t})}const G6=Ce("ZodCustom",(t,s)=>{bT.init(t,s),It.init(t,s),t._zod.processJSONSchema=(a,r,n)=>wD(t,a)});function Y6(t,s={}){return xD(G6,t,s)}function Z6(t){return uD(t)}const Wm=(t,s,a)=>{if(t&&"reportValidity"in t){const r=$e(a,s);t.setCustomValidity(r&&r.message||""),t.reportValidity()}},zo=(t,s)=>{for(const a in s.fields){const r=s.fields[a];r&&r.ref&&"reportValidity"in r.ref?Wm(r.ref,a,t):r&&r.refs&&r.refs.forEach(n=>Wm(n,a,t))}},Gm=(t,s)=>{s.shouldUseNativeValidation&&zo(t,s);const a={};for(const r in t){const n=$e(s.fields,r),i=Object.assign(t[r]||{},{ref:n&&n.ref});if(J6(s.names||Object.keys(t),r)){const l=Object.assign({},$e(a,r));ft(l,"root",i),ft(a,r,l)}else ft(a,r,i)}return a},J6=(t,s)=>{const a=Ym(s);return t.some(r=>Ym(r).match(`^${a}\\.\\d+`))};function Ym(t){return t.replace(/\]|\[/g,"")}function Zm(t,s){try{var a=t()}catch(r){return s(r)}return a&&a.then?a.then(void 0,s):a}function X6(t,s){for(var a={};t.length;){var r=t[0],n=r.code,i=r.message,l=r.path.join(".");if(!a[l])if("unionErrors"in r){var c=r.unionErrors[0].errors[0];a[l]={message:c.message,type:c.code}}else a[l]={message:i,type:n};if("unionErrors"in r&&r.unionErrors.forEach(function(x){return x.errors.forEach(function(u){return t.push(u)})}),s){var o=a[l].types,d=o&&o[r.code];a[l]=zd(l,s,a,n,d?[].concat(d,r.message):r.message)}t.shift()}return a}function K6(t,s){for(var a={};t.length;){var r=t[0],n=r.code,i=r.message,l=r.path.join(".");if(!a[l])if(r.code==="invalid_union"&&r.errors.length>0){var c=r.errors[0][0];a[l]={message:c.message,type:c.code}}else a[l]={message:i,type:n};if(r.code==="invalid_union"&&r.errors.forEach(function(x){return x.forEach(function(u){return t.push(u)})}),s){var o=a[l].types,d=o&&o[r.code];a[l]=zd(l,s,a,n,d?[].concat(d,r.message):r.message)}t.shift()}return a}function Q6(t,s,a){if(a===void 0&&(a={}),function(r){return"_def"in r&&typeof r._def=="object"&&"typeName"in r._def}(t))return function(r,n,i){try{return Promise.resolve(Zm(function(){return Promise.resolve(t[a.mode==="sync"?"parse":"parseAsync"](r,s)).then(function(l){return i.shouldUseNativeValidation&&zo({},i),{errors:{},values:a.raw?Object.assign({},r):l}})},function(l){if(function(c){return Array.isArray(c==null?void 0:c.issues)}(l))return{values:{},errors:Gm(X6(l.errors,!i.shouldUseNativeValidation&&i.criteriaMode==="all"),i)};throw l}))}catch(l){return Promise.reject(l)}};if(function(r){return"_zod"in r&&typeof r._zod=="object"}(t))return function(r,n,i){try{return Promise.resolve(Zm(function(){return Promise.resolve((a.mode==="sync"?F_:T_)(t,r,s)).then(function(l){return i.shouldUseNativeValidation&&zo({},i),{errors:{},values:a.raw?Object.assign({},r):l}})},function(l){if(function(c){return c instanceof Yd}(l))return{values:{},errors:Gm(K6(l.issues,!i.shouldUseNativeValidation&&i.criteriaMode==="all"),i)};throw l}))}catch(l){return Promise.reject(l)}};throw new Error("Invalid input: not a Zod schema")}function e5(){for(var t=arguments.length,s=new Array(t),a=0;a<t;a++)s[a]=arguments[a];return y.useMemo(()=>r=>{s.forEach(n=>n(r))},s)}const lc=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Tn(t){const s=Object.prototype.toString.call(t);return s==="[object Window]"||s==="[object global]"}function Jd(t){return"nodeType"in t}function qs(t){var s,a;return t?Tn(t)?t:Jd(t)&&(s=(a=t.ownerDocument)==null?void 0:a.defaultView)!=null?s:window:window}function Xd(t){const{Document:s}=qs(t);return t instanceof s}function Ii(t){return Tn(t)?!1:t instanceof qs(t).HTMLElement}function Up(t){return t instanceof qs(t).SVGElement}function Dn(t){return t?Tn(t)?t.document:Jd(t)?Xd(t)?t:Ii(t)||Up(t)?t.ownerDocument:document:document:document}const Ia=lc?y.useLayoutEffect:y.useEffect;function Kd(t){const s=y.useRef(t);return Ia(()=>{s.current=t}),y.useCallback(function(){for(var a=arguments.length,r=new Array(a),n=0;n<a;n++)r[n]=arguments[n];return s.current==null?void 0:s.current(...r)},[])}function t5(){const t=y.useRef(null),s=y.useCallback((r,n)=>{t.current=setInterval(r,n)},[]),a=y.useCallback(()=>{t.current!==null&&(clearInterval(t.current),t.current=null)},[]);return[s,a]}function bi(t,s){s===void 0&&(s=[t]);const a=y.useRef(t);return Ia(()=>{a.current!==t&&(a.current=t)},s),a}function $i(t,s){const a=y.useRef();return y.useMemo(()=>{const r=t(a.current);return a.current=r,r},[...s])}function Rl(t){const s=Kd(t),a=y.useRef(null),r=y.useCallback(n=>{n!==a.current&&(s==null||s(n,a.current)),a.current=n},[]);return[a,r]}function Uo(t){const s=y.useRef();return y.useEffect(()=>{s.current=t},[t]),s.current}let Zc={};function Oi(t,s){return y.useMemo(()=>{if(s)return s;const a=Zc[t]==null?0:Zc[t]+1;return Zc[t]=a,t+"-"+a},[t,s])}function Vp(t){return function(s){for(var a=arguments.length,r=new Array(a>1?a-1:0),n=1;n<a;n++)r[n-1]=arguments[n];return r.reduce((i,l)=>{const c=Object.entries(l);for(const[o,d]of c){const x=i[o];x!=null&&(i[o]=x+t*d)}return i},{...s})}}const hn=Vp(1),vi=Vp(-1);function s5(t){return"clientX"in t&&"clientY"in t}function Qd(t){if(!t)return!1;const{KeyboardEvent:s}=qs(t.target);return s&&t instanceof s}function a5(t){if(!t)return!1;const{TouchEvent:s}=qs(t.target);return s&&t instanceof s}function Vo(t){if(a5(t)){if(t.touches&&t.touches.length){const{clientX:s,clientY:a}=t.touches[0];return{x:s,y:a}}else if(t.changedTouches&&t.changedTouches.length){const{clientX:s,clientY:a}=t.changedTouches[0];return{x:s,y:a}}}return s5(t)?{x:t.clientX,y:t.clientY}:null}const ji=Object.freeze({Translate:{toString(t){if(!t)return;const{x:s,y:a}=t;return"translate3d("+(s?Math.round(s):0)+"px, "+(a?Math.round(a):0)+"px, 0)"}},Scale:{toString(t){if(!t)return;const{scaleX:s,scaleY:a}=t;return"scaleX("+s+") scaleY("+a+")"}},Transform:{toString(t){if(t)return[ji.Translate.toString(t),ji.Scale.toString(t)].join(" ")}},Transition:{toString(t){let{property:s,duration:a,easing:r}=t;return s+" "+a+"ms "+r}}}),Jm="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function r5(t){return t.matches(Jm)?t:t.querySelector(Jm)}const n5={display:"none"};function i5(t){let{id:s,value:a}=t;return Ve.createElement("div",{id:s,style:n5},a)}function l5(t){let{id:s,announcement:a,ariaLiveType:r="assertive"}=t;const n={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return Ve.createElement("div",{id:s,style:n,role:"status","aria-live":r,"aria-atomic":!0},a)}function c5(){const[t,s]=y.useState("");return{announce:y.useCallback(r=>{r!=null&&s(r)},[]),announcement:t}}const Hp=y.createContext(null);function o5(t){const s=y.useContext(Hp);y.useEffect(()=>{if(!s)throw new Error("useDndMonitor must be used within a children of <DndContext>");return s(t)},[t,s])}function d5(){const[t]=y.useState(()=>new Set),s=y.useCallback(r=>(t.add(r),()=>t.delete(r)),[t]);return[y.useCallback(r=>{let{type:n,event:i}=r;t.forEach(l=>{var c;return(c=l[n])==null?void 0:c.call(l,i)})},[t]),s]}const x5={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},u5={onDragStart(t){let{active:s}=t;return"Picked up draggable item "+s.id+"."},onDragOver(t){let{active:s,over:a}=t;return a?"Draggable item "+s.id+" was moved over droppable area "+a.id+".":"Draggable item "+s.id+" is no longer over a droppable area."},onDragEnd(t){let{active:s,over:a}=t;return a?"Draggable item "+s.id+" was dropped over droppable area "+a.id:"Draggable item "+s.id+" was dropped."},onDragCancel(t){let{active:s}=t;return"Dragging was cancelled. Draggable item "+s.id+" was dropped."}};function m5(t){let{announcements:s=u5,container:a,hiddenTextDescribedById:r,screenReaderInstructions:n=x5}=t;const{announce:i,announcement:l}=c5(),c=Oi("DndLiveRegion"),[o,d]=y.useState(!1);if(y.useEffect(()=>{d(!0)},[]),o5(y.useMemo(()=>({onDragStart(u){let{active:m}=u;i(s.onDragStart({active:m}))},onDragMove(u){let{active:m,over:f}=u;s.onDragMove&&i(s.onDragMove({active:m,over:f}))},onDragOver(u){let{active:m,over:f}=u;i(s.onDragOver({active:m,over:f}))},onDragEnd(u){let{active:m,over:f}=u;i(s.onDragEnd({active:m,over:f}))},onDragCancel(u){let{active:m,over:f}=u;i(s.onDragCancel({active:m,over:f}))}}),[i,s])),!o)return null;const x=Ve.createElement(Ve.Fragment,null,Ve.createElement(i5,{id:r,value:n.draggable}),Ve.createElement(l5,{id:c,announcement:l}));return a?an.createPortal(x,a):x}var Zt;(function(t){t.DragStart="dragStart",t.DragMove="dragMove",t.DragEnd="dragEnd",t.DragCancel="dragCancel",t.DragOver="dragOver",t.RegisterDroppable="registerDroppable",t.SetDroppableDisabled="setDroppableDisabled",t.UnregisterDroppable="unregisterDroppable"})(Zt||(Zt={}));function Pl(){}function Xm(t,s){return y.useMemo(()=>({sensor:t,options:s??{}}),[t,s])}function h5(){for(var t=arguments.length,s=new Array(t),a=0;a<t;a++)s[a]=arguments[a];return y.useMemo(()=>[...s].filter(r=>r!=null),[...s])}const ba=Object.freeze({x:0,y:0});function qp(t,s){return Math.sqrt(Math.pow(t.x-s.x,2)+Math.pow(t.y-s.y,2))}function Wp(t,s){let{data:{value:a}}=t,{data:{value:r}}=s;return a-r}function f5(t,s){let{data:{value:a}}=t,{data:{value:r}}=s;return r-a}function Km(t){let{left:s,top:a,height:r,width:n}=t;return[{x:s,y:a},{x:s+n,y:a},{x:s,y:a+r},{x:s+n,y:a+r}]}function Gp(t,s){if(!t||t.length===0)return null;const[a]=t;return a[s]}function Qm(t,s,a){return s===void 0&&(s=t.left),a===void 0&&(a=t.top),{x:s+t.width*.5,y:a+t.height*.5}}const p5=t=>{let{collisionRect:s,droppableRects:a,droppableContainers:r}=t;const n=Qm(s,s.left,s.top),i=[];for(const l of r){const{id:c}=l,o=a.get(c);if(o){const d=qp(Qm(o),n);i.push({id:c,data:{droppableContainer:l,value:d}})}}return i.sort(Wp)},g5=t=>{let{collisionRect:s,droppableRects:a,droppableContainers:r}=t;const n=Km(s),i=[];for(const l of r){const{id:c}=l,o=a.get(c);if(o){const d=Km(o),x=n.reduce((m,f,g)=>m+qp(d[g],f),0),u=Number((x/4).toFixed(4));i.push({id:c,data:{droppableContainer:l,value:u}})}}return i.sort(Wp)};function y5(t,s){const a=Math.max(s.top,t.top),r=Math.max(s.left,t.left),n=Math.min(s.left+s.width,t.left+t.width),i=Math.min(s.top+s.height,t.top+t.height),l=n-r,c=i-a;if(r<n&&a<i){const o=s.width*s.height,d=t.width*t.height,x=l*c,u=x/(o+d-x);return Number(u.toFixed(4))}return 0}const b5=t=>{let{collisionRect:s,droppableRects:a,droppableContainers:r}=t;const n=[];for(const i of r){const{id:l}=i,c=a.get(l);if(c){const o=y5(c,s);o>0&&n.push({id:l,data:{droppableContainer:i,value:o}})}}return n.sort(f5)};function v5(t,s,a){return{...t,scaleX:s&&a?s.width/a.width:1,scaleY:s&&a?s.height/a.height:1}}function Yp(t,s){return t&&s?{x:t.left-s.left,y:t.top-s.top}:ba}function j5(t){return function(a){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];return n.reduce((l,c)=>({...l,top:l.top+t*c.y,bottom:l.bottom+t*c.y,left:l.left+t*c.x,right:l.right+t*c.x}),{...a})}}const N5=j5(1);function w5(t){if(t.startsWith("matrix3d(")){const s=t.slice(9,-1).split(/, /);return{x:+s[12],y:+s[13],scaleX:+s[0],scaleY:+s[5]}}else if(t.startsWith("matrix(")){const s=t.slice(7,-1).split(/, /);return{x:+s[4],y:+s[5],scaleX:+s[0],scaleY:+s[3]}}return null}function k5(t,s,a){const r=w5(s);if(!r)return t;const{scaleX:n,scaleY:i,x:l,y:c}=r,o=t.left-l-(1-n)*parseFloat(a),d=t.top-c-(1-i)*parseFloat(a.slice(a.indexOf(" ")+1)),x=n?t.width/n:t.width,u=i?t.height/i:t.height;return{width:x,height:u,top:d,right:o+x,bottom:d+u,left:o}}const S5={ignoreTransform:!1};function Rn(t,s){s===void 0&&(s=S5);let a=t.getBoundingClientRect();if(s.ignoreTransform){const{transform:d,transformOrigin:x}=qs(t).getComputedStyle(t);d&&(a=k5(a,d,x))}const{top:r,left:n,width:i,height:l,bottom:c,right:o}=a;return{top:r,left:n,width:i,height:l,bottom:c,right:o}}function e0(t){return Rn(t,{ignoreTransform:!0})}function C5(t){const s=t.innerWidth,a=t.innerHeight;return{top:0,left:0,right:s,bottom:a,width:s,height:a}}function A5(t,s){return s===void 0&&(s=qs(t).getComputedStyle(t)),s.position==="fixed"}function E5(t,s){s===void 0&&(s=qs(t).getComputedStyle(t));const a=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(n=>{const i=s[n];return typeof i=="string"?a.test(i):!1})}function cc(t,s){const a=[];function r(n){if(s!=null&&a.length>=s||!n)return a;if(Xd(n)&&n.scrollingElement!=null&&!a.includes(n.scrollingElement))return a.push(n.scrollingElement),a;if(!Ii(n)||Up(n)||a.includes(n))return a;const i=qs(t).getComputedStyle(n);return n!==t&&E5(n,i)&&a.push(n),A5(n,i)?a:r(n.parentNode)}return t?r(t):a}function Zp(t){const[s]=cc(t,1);return s??null}function Jc(t){return!lc||!t?null:Tn(t)?t:Jd(t)?Xd(t)||t===Dn(t).scrollingElement?window:Ii(t)?t:null:null}function Jp(t){return Tn(t)?t.scrollX:t.scrollLeft}function Xp(t){return Tn(t)?t.scrollY:t.scrollTop}function Ho(t){return{x:Jp(t),y:Xp(t)}}var rs;(function(t){t[t.Forward=1]="Forward",t[t.Backward=-1]="Backward"})(rs||(rs={}));function Kp(t){return!lc||!t?!1:t===document.scrollingElement}function Qp(t){const s={x:0,y:0},a=Kp(t)?{height:window.innerHeight,width:window.innerWidth}:{height:t.clientHeight,width:t.clientWidth},r={x:t.scrollWidth-a.width,y:t.scrollHeight-a.height},n=t.scrollTop<=s.y,i=t.scrollLeft<=s.x,l=t.scrollTop>=r.y,c=t.scrollLeft>=r.x;return{isTop:n,isLeft:i,isBottom:l,isRight:c,maxScroll:r,minScroll:s}}const _5={x:.2,y:.2};function F5(t,s,a,r,n){let{top:i,left:l,right:c,bottom:o}=a;r===void 0&&(r=10),n===void 0&&(n=_5);const{isTop:d,isBottom:x,isLeft:u,isRight:m}=Qp(t),f={x:0,y:0},g={x:0,y:0},h={height:s.height*n.y,width:s.width*n.x};return!d&&i<=s.top+h.height?(f.y=rs.Backward,g.y=r*Math.abs((s.top+h.height-i)/h.height)):!x&&o>=s.bottom-h.height&&(f.y=rs.Forward,g.y=r*Math.abs((s.bottom-h.height-o)/h.height)),!m&&c>=s.right-h.width?(f.x=rs.Forward,g.x=r*Math.abs((s.right-h.width-c)/h.width)):!u&&l<=s.left+h.width&&(f.x=rs.Backward,g.x=r*Math.abs((s.left+h.width-l)/h.width)),{direction:f,speed:g}}function T5(t){if(t===document.scrollingElement){const{innerWidth:i,innerHeight:l}=window;return{top:0,left:0,right:i,bottom:l,width:i,height:l}}const{top:s,left:a,right:r,bottom:n}=t.getBoundingClientRect();return{top:s,left:a,right:r,bottom:n,width:t.clientWidth,height:t.clientHeight}}function eg(t){return t.reduce((s,a)=>hn(s,Ho(a)),ba)}function D5(t){return t.reduce((s,a)=>s+Jp(a),0)}function R5(t){return t.reduce((s,a)=>s+Xp(a),0)}function P5(t,s){if(s===void 0&&(s=Rn),!t)return;const{top:a,left:r,bottom:n,right:i}=s(t);Zp(t)&&(n<=0||i<=0||a>=window.innerHeight||r>=window.innerWidth)&&t.scrollIntoView({block:"center",inline:"center"})}const I5=[["x",["left","right"],D5],["y",["top","bottom"],R5]];class ex{constructor(s,a){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=cc(a),n=eg(r);this.rect={...s},this.width=s.width,this.height=s.height;for(const[i,l,c]of I5)for(const o of l)Object.defineProperty(this,o,{get:()=>{const d=c(r),x=n[i]-d;return this.rect[o]+x},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class ri{constructor(s){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(a=>{var r;return(r=this.target)==null?void 0:r.removeEventListener(...a)})},this.target=s}add(s,a,r){var n;(n=this.target)==null||n.addEventListener(s,a,r),this.listeners.push([s,a,r])}}function $5(t){const{EventTarget:s}=qs(t);return t instanceof s?t:Dn(t)}function Xc(t,s){const a=Math.abs(t.x),r=Math.abs(t.y);return typeof s=="number"?Math.sqrt(a**2+r**2)>s:"x"in s&&"y"in s?a>s.x&&r>s.y:"x"in s?a>s.x:"y"in s?r>s.y:!1}var aa;(function(t){t.Click="click",t.DragStart="dragstart",t.Keydown="keydown",t.ContextMenu="contextmenu",t.Resize="resize",t.SelectionChange="selectionchange",t.VisibilityChange="visibilitychange"})(aa||(aa={}));function t0(t){t.preventDefault()}function O5(t){t.stopPropagation()}var rt;(function(t){t.Space="Space",t.Down="ArrowDown",t.Right="ArrowRight",t.Left="ArrowLeft",t.Up="ArrowUp",t.Esc="Escape",t.Enter="Enter",t.Tab="Tab"})(rt||(rt={}));const tg={start:[rt.Space,rt.Enter],cancel:[rt.Esc],end:[rt.Space,rt.Enter,rt.Tab]},L5=(t,s)=>{let{currentCoordinates:a}=s;switch(t.code){case rt.Right:return{...a,x:a.x+25};case rt.Left:return{...a,x:a.x-25};case rt.Down:return{...a,y:a.y+25};case rt.Up:return{...a,y:a.y-25}}};class tx{constructor(s){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=s;const{event:{target:a}}=s;this.props=s,this.listeners=new ri(Dn(a)),this.windowListeners=new ri(qs(a)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(aa.Resize,this.handleCancel),this.windowListeners.add(aa.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(aa.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:s,onStart:a}=this.props,r=s.node.current;r&&P5(r),a(ba)}handleKeyDown(s){if(Qd(s)){const{active:a,context:r,options:n}=this.props,{keyboardCodes:i=tg,coordinateGetter:l=L5,scrollBehavior:c="smooth"}=n,{code:o}=s;if(i.end.includes(o)){this.handleEnd(s);return}if(i.cancel.includes(o)){this.handleCancel(s);return}const{collisionRect:d}=r.current,x=d?{x:d.left,y:d.top}:ba;this.referenceCoordinates||(this.referenceCoordinates=x);const u=l(s,{active:a,context:r.current,currentCoordinates:x});if(u){const m=vi(u,x),f={x:0,y:0},{scrollableAncestors:g}=r.current;for(const h of g){const p=s.code,{isTop:j,isRight:v,isLeft:w,isBottom:b,maxScroll:A,minScroll:N}=Qp(h),C=T5(h),k={x:Math.min(p===rt.Right?C.right-C.width/2:C.right,Math.max(p===rt.Right?C.left:C.left+C.width/2,u.x)),y:Math.min(p===rt.Down?C.bottom-C.height/2:C.bottom,Math.max(p===rt.Down?C.top:C.top+C.height/2,u.y))},S=p===rt.Right&&!v||p===rt.Left&&!w,F=p===rt.Down&&!b||p===rt.Up&&!j;if(S&&k.x!==u.x){const R=h.scrollLeft+m.x,T=p===rt.Right&&R<=A.x||p===rt.Left&&R>=N.x;if(T&&!m.y){h.scrollTo({left:R,behavior:c});return}T?f.x=h.scrollLeft-R:f.x=p===rt.Right?h.scrollLeft-A.x:h.scrollLeft-N.x,f.x&&h.scrollBy({left:-f.x,behavior:c});break}else if(F&&k.y!==u.y){const R=h.scrollTop+m.y,T=p===rt.Down&&R<=A.y||p===rt.Up&&R>=N.y;if(T&&!m.x){h.scrollTo({top:R,behavior:c});return}T?f.y=h.scrollTop-R:f.y=p===rt.Down?h.scrollTop-A.y:h.scrollTop-N.y,f.y&&h.scrollBy({top:-f.y,behavior:c});break}}this.handleMove(s,hn(vi(u,this.referenceCoordinates),f))}}}handleMove(s,a){const{onMove:r}=this.props;s.preventDefault(),r(a)}handleEnd(s){const{onEnd:a}=this.props;s.preventDefault(),this.detach(),a()}handleCancel(s){const{onCancel:a}=this.props;s.preventDefault(),this.detach(),a()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}tx.activators=[{eventName:"onKeyDown",handler:(t,s,a)=>{let{keyboardCodes:r=tg,onActivation:n}=s,{active:i}=a;const{code:l}=t.nativeEvent;if(r.start.includes(l)){const c=i.activatorNode.current;return c&&t.target!==c?!1:(t.preventDefault(),n==null||n({event:t.nativeEvent}),!0)}return!1}}];function s0(t){return!!(t&&"distance"in t)}function a0(t){return!!(t&&"delay"in t)}class sx{constructor(s,a,r){var n;r===void 0&&(r=$5(s.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=s,this.events=a;const{event:i}=s,{target:l}=i;this.props=s,this.events=a,this.document=Dn(l),this.documentListeners=new ri(this.document),this.listeners=new ri(r),this.windowListeners=new ri(qs(l)),this.initialCoordinates=(n=Vo(i))!=null?n:ba,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:s,props:{options:{activationConstraint:a,bypassActivationConstraint:r}}}=this;if(this.listeners.add(s.move.name,this.handleMove,{passive:!1}),this.listeners.add(s.end.name,this.handleEnd),s.cancel&&this.listeners.add(s.cancel.name,this.handleCancel),this.windowListeners.add(aa.Resize,this.handleCancel),this.windowListeners.add(aa.DragStart,t0),this.windowListeners.add(aa.VisibilityChange,this.handleCancel),this.windowListeners.add(aa.ContextMenu,t0),this.documentListeners.add(aa.Keydown,this.handleKeydown),a){if(r!=null&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(a0(a)){this.timeoutId=setTimeout(this.handleStart,a.delay),this.handlePending(a);return}if(s0(a)){this.handlePending(a);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(s,a){const{active:r,onPending:n}=this.props;n(r,s,this.initialCoordinates,a)}handleStart(){const{initialCoordinates:s}=this,{onStart:a}=this.props;s&&(this.activated=!0,this.documentListeners.add(aa.Click,O5,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(aa.SelectionChange,this.removeTextSelection),a(s))}handleMove(s){var a;const{activated:r,initialCoordinates:n,props:i}=this,{onMove:l,options:{activationConstraint:c}}=i;if(!n)return;const o=(a=Vo(s))!=null?a:ba,d=vi(n,o);if(!r&&c){if(s0(c)){if(c.tolerance!=null&&Xc(d,c.tolerance))return this.handleCancel();if(Xc(d,c.distance))return this.handleStart()}if(a0(c)&&Xc(d,c.tolerance))return this.handleCancel();this.handlePending(c,d);return}s.cancelable&&s.preventDefault(),l(o)}handleEnd(){const{onAbort:s,onEnd:a}=this.props;this.detach(),this.activated||s(this.props.active),a()}handleCancel(){const{onAbort:s,onCancel:a}=this.props;this.detach(),this.activated||s(this.props.active),a()}handleKeydown(s){s.code===rt.Esc&&this.handleCancel()}removeTextSelection(){var s;(s=this.document.getSelection())==null||s.removeAllRanges()}}const M5={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class ax extends sx{constructor(s){const{event:a}=s,r=Dn(a.target);super(s,M5,r)}}ax.activators=[{eventName:"onPointerDown",handler:(t,s)=>{let{nativeEvent:a}=t,{onActivation:r}=s;return!a.isPrimary||a.button!==0?!1:(r==null||r({event:a}),!0)}}];const B5={move:{name:"mousemove"},end:{name:"mouseup"}};var qo;(function(t){t[t.RightClick=2]="RightClick"})(qo||(qo={}));class z5 extends sx{constructor(s){super(s,B5,Dn(s.event.target))}}z5.activators=[{eventName:"onMouseDown",handler:(t,s)=>{let{nativeEvent:a}=t,{onActivation:r}=s;return a.button===qo.RightClick?!1:(r==null||r({event:a}),!0)}}];const Kc={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class U5 extends sx{constructor(s){super(s,Kc)}static setup(){return window.addEventListener(Kc.move.name,s,{capture:!1,passive:!1}),function(){window.removeEventListener(Kc.move.name,s)};function s(){}}}U5.activators=[{eventName:"onTouchStart",handler:(t,s)=>{let{nativeEvent:a}=t,{onActivation:r}=s;const{touches:n}=a;return n.length>1?!1:(r==null||r({event:a}),!0)}}];var ni;(function(t){t[t.Pointer=0]="Pointer",t[t.DraggableRect=1]="DraggableRect"})(ni||(ni={}));var Il;(function(t){t[t.TreeOrder=0]="TreeOrder",t[t.ReversedTreeOrder=1]="ReversedTreeOrder"})(Il||(Il={}));function V5(t){let{acceleration:s,activator:a=ni.Pointer,canScroll:r,draggingRect:n,enabled:i,interval:l=5,order:c=Il.TreeOrder,pointerCoordinates:o,scrollableAncestors:d,scrollableAncestorRects:x,delta:u,threshold:m}=t;const f=q5({delta:u,disabled:!i}),[g,h]=t5(),p=y.useRef({x:0,y:0}),j=y.useRef({x:0,y:0}),v=y.useMemo(()=>{switch(a){case ni.Pointer:return o?{top:o.y,bottom:o.y,left:o.x,right:o.x}:null;case ni.DraggableRect:return n}},[a,n,o]),w=y.useRef(null),b=y.useCallback(()=>{const N=w.current;if(!N)return;const C=p.current.x*j.current.x,k=p.current.y*j.current.y;N.scrollBy(C,k)},[]),A=y.useMemo(()=>c===Il.TreeOrder?[...d].reverse():d,[c,d]);y.useEffect(()=>{if(!i||!d.length||!v){h();return}for(const N of A){if((r==null?void 0:r(N))===!1)continue;const C=d.indexOf(N),k=x[C];if(!k)continue;const{direction:S,speed:F}=F5(N,k,v,s,m);for(const R of["x","y"])f[R][S[R]]||(F[R]=0,S[R]=0);if(F.x>0||F.y>0){h(),w.current=N,g(b,l),p.current=F,j.current=S;return}}p.current={x:0,y:0},j.current={x:0,y:0},h()},[s,b,r,h,i,l,JSON.stringify(v),JSON.stringify(f),g,d,A,x,JSON.stringify(m)])}const H5={x:{[rs.Backward]:!1,[rs.Forward]:!1},y:{[rs.Backward]:!1,[rs.Forward]:!1}};function q5(t){let{delta:s,disabled:a}=t;const r=Uo(s);return $i(n=>{if(a||!r||!n)return H5;const i={x:Math.sign(s.x-r.x),y:Math.sign(s.y-r.y)};return{x:{[rs.Backward]:n.x[rs.Backward]||i.x===-1,[rs.Forward]:n.x[rs.Forward]||i.x===1},y:{[rs.Backward]:n.y[rs.Backward]||i.y===-1,[rs.Forward]:n.y[rs.Forward]||i.y===1}}},[a,s,r])}function W5(t,s){const a=s!=null?t.get(s):void 0,r=a?a.node.current:null;return $i(n=>{var i;return s==null?null:(i=r??n)!=null?i:null},[r,s])}function G5(t,s){return y.useMemo(()=>t.reduce((a,r)=>{const{sensor:n}=r,i=n.activators.map(l=>({eventName:l.eventName,handler:s(l.handler,r)}));return[...a,...i]},[]),[t,s])}var Ni;(function(t){t[t.Always=0]="Always",t[t.BeforeDragging=1]="BeforeDragging",t[t.WhileDragging=2]="WhileDragging"})(Ni||(Ni={}));var Wo;(function(t){t.Optimized="optimized"})(Wo||(Wo={}));const r0=new Map;function Y5(t,s){let{dragging:a,dependencies:r,config:n}=s;const[i,l]=y.useState(null),{frequency:c,measure:o,strategy:d}=n,x=y.useRef(t),u=p(),m=bi(u),f=y.useCallback(function(j){j===void 0&&(j=[]),!m.current&&l(v=>v===null?j:v.concat(j.filter(w=>!v.includes(w))))},[m]),g=y.useRef(null),h=$i(j=>{if(u&&!a)return r0;if(!j||j===r0||x.current!==t||i!=null){const v=new Map;for(let w of t){if(!w)continue;if(i&&i.length>0&&!i.includes(w.id)&&w.rect.current){v.set(w.id,w.rect.current);continue}const b=w.node.current,A=b?new ex(o(b),b):null;w.rect.current=A,A&&v.set(w.id,A)}return v}return j},[t,i,a,u,o]);return y.useEffect(()=>{x.current=t},[t]),y.useEffect(()=>{u||f()},[a,u]),y.useEffect(()=>{i&&i.length>0&&l(null)},[JSON.stringify(i)]),y.useEffect(()=>{u||typeof c!="number"||g.current!==null||(g.current=setTimeout(()=>{f(),g.current=null},c))},[c,u,f,...r]),{droppableRects:h,measureDroppableContainers:f,measuringScheduled:i!=null};function p(){switch(d){case Ni.Always:return!1;case Ni.BeforeDragging:return a;default:return!a}}}function sg(t,s){return $i(a=>t?a||(typeof s=="function"?s(t):t):null,[s,t])}function Z5(t,s){return sg(t,s)}function J5(t){let{callback:s,disabled:a}=t;const r=Kd(s),n=y.useMemo(()=>{if(a||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:i}=window;return new i(r)},[r,a]);return y.useEffect(()=>()=>n==null?void 0:n.disconnect(),[n]),n}function oc(t){let{callback:s,disabled:a}=t;const r=Kd(s),n=y.useMemo(()=>{if(a||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:i}=window;return new i(r)},[a]);return y.useEffect(()=>()=>n==null?void 0:n.disconnect(),[n]),n}function X5(t){return new ex(Rn(t),t)}function n0(t,s,a){s===void 0&&(s=X5);const[r,n]=y.useState(null);function i(){n(o=>{if(!t)return null;if(t.isConnected===!1){var d;return(d=o??a)!=null?d:null}const x=s(t);return JSON.stringify(o)===JSON.stringify(x)?o:x})}const l=J5({callback(o){if(t)for(const d of o){const{type:x,target:u}=d;if(x==="childList"&&u instanceof HTMLElement&&u.contains(t)){i();break}}}}),c=oc({callback:i});return Ia(()=>{i(),t?(c==null||c.observe(t),l==null||l.observe(document.body,{childList:!0,subtree:!0})):(c==null||c.disconnect(),l==null||l.disconnect())},[t]),r}function K5(t){const s=sg(t);return Yp(t,s)}const i0=[];function Q5(t){const s=y.useRef(t),a=$i(r=>t?r&&r!==i0&&t&&s.current&&t.parentNode===s.current.parentNode?r:cc(t):i0,[t]);return y.useEffect(()=>{s.current=t},[t]),a}function e8(t){const[s,a]=y.useState(null),r=y.useRef(t),n=y.useCallback(i=>{const l=Jc(i.target);l&&a(c=>c?(c.set(l,Ho(l)),new Map(c)):null)},[]);return y.useEffect(()=>{const i=r.current;if(t!==i){l(i);const c=t.map(o=>{const d=Jc(o);return d?(d.addEventListener("scroll",n,{passive:!0}),[d,Ho(d)]):null}).filter(o=>o!=null);a(c.length?new Map(c):null),r.current=t}return()=>{l(t),l(i)};function l(c){c.forEach(o=>{const d=Jc(o);d==null||d.removeEventListener("scroll",n)})}},[n,t]),y.useMemo(()=>t.length?s?Array.from(s.values()).reduce((i,l)=>hn(i,l),ba):eg(t):ba,[t,s])}function l0(t,s){s===void 0&&(s=[]);const a=y.useRef(null);return y.useEffect(()=>{a.current=null},s),y.useEffect(()=>{const r=t!==ba;r&&!a.current&&(a.current=t),!r&&a.current&&(a.current=null)},[t]),a.current?vi(t,a.current):ba}function t8(t){y.useEffect(()=>{if(!lc)return;const s=t.map(a=>{let{sensor:r}=a;return r.setup==null?void 0:r.setup()});return()=>{for(const a of s)a==null||a()}},t.map(s=>{let{sensor:a}=s;return a}))}function s8(t,s){return y.useMemo(()=>t.reduce((a,r)=>{let{eventName:n,handler:i}=r;return a[n]=l=>{i(l,s)},a},{}),[t,s])}function ag(t){return y.useMemo(()=>t?C5(t):null,[t])}const c0=[];function a8(t,s){s===void 0&&(s=Rn);const[a]=t,r=ag(a?qs(a):null),[n,i]=y.useState(c0);function l(){i(()=>t.length?t.map(o=>Kp(o)?r:new ex(s(o),o)):c0)}const c=oc({callback:l});return Ia(()=>{c==null||c.disconnect(),l(),t.forEach(o=>c==null?void 0:c.observe(o))},[t]),n}function r8(t){if(!t)return null;if(t.children.length>1)return t;const s=t.children[0];return Ii(s)?s:t}function n8(t){let{measure:s}=t;const[a,r]=y.useState(null),n=y.useCallback(d=>{for(const{target:x}of d)if(Ii(x)){r(u=>{const m=s(x);return u?{...u,width:m.width,height:m.height}:m});break}},[s]),i=oc({callback:n}),l=y.useCallback(d=>{const x=r8(d);i==null||i.disconnect(),x&&(i==null||i.observe(x)),r(x?s(x):null)},[s,i]),[c,o]=Rl(l);return y.useMemo(()=>({nodeRef:c,rect:a,setRef:o}),[a,c,o])}const i8=[{sensor:ax,options:{}},{sensor:tx,options:{}}],l8={current:{}},xl={draggable:{measure:e0},droppable:{measure:e0,strategy:Ni.WhileDragging,frequency:Wo.Optimized},dragOverlay:{measure:Rn}};class ii extends Map{get(s){var a;return s!=null&&(a=super.get(s))!=null?a:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(s=>{let{disabled:a}=s;return!a})}getNodeFor(s){var a,r;return(a=(r=this.get(s))==null?void 0:r.node.current)!=null?a:void 0}}const c8={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new ii,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:Pl},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:xl,measureDroppableContainers:Pl,windowRect:null,measuringScheduled:!1},o8={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:Pl,draggableNodes:new Map,over:null,measureDroppableContainers:Pl},dc=y.createContext(o8),rg=y.createContext(c8);function d8(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new ii}}}function x8(t,s){switch(s.type){case Zt.DragStart:return{...t,draggable:{...t.draggable,initialCoordinates:s.initialCoordinates,active:s.active}};case Zt.DragMove:return t.draggable.active==null?t:{...t,draggable:{...t.draggable,translate:{x:s.coordinates.x-t.draggable.initialCoordinates.x,y:s.coordinates.y-t.draggable.initialCoordinates.y}}};case Zt.DragEnd:case Zt.DragCancel:return{...t,draggable:{...t.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case Zt.RegisterDroppable:{const{element:a}=s,{id:r}=a,n=new ii(t.droppable.containers);return n.set(r,a),{...t,droppable:{...t.droppable,containers:n}}}case Zt.SetDroppableDisabled:{const{id:a,key:r,disabled:n}=s,i=t.droppable.containers.get(a);if(!i||r!==i.key)return t;const l=new ii(t.droppable.containers);return l.set(a,{...i,disabled:n}),{...t,droppable:{...t.droppable,containers:l}}}case Zt.UnregisterDroppable:{const{id:a,key:r}=s,n=t.droppable.containers.get(a);if(!n||r!==n.key)return t;const i=new ii(t.droppable.containers);return i.delete(a),{...t,droppable:{...t.droppable,containers:i}}}default:return t}}function u8(t){let{disabled:s}=t;const{active:a,activatorEvent:r,draggableNodes:n}=y.useContext(dc),i=Uo(r),l=Uo(a==null?void 0:a.id);return y.useEffect(()=>{if(!s&&!r&&i&&l!=null){if(!Qd(i)||document.activeElement===i.target)return;const c=n.get(l);if(!c)return;const{activatorNode:o,node:d}=c;if(!o.current&&!d.current)return;requestAnimationFrame(()=>{for(const x of[o.current,d.current]){if(!x)continue;const u=r5(x);if(u){u.focus();break}}})}},[r,s,n,l,i]),null}function m8(t,s){let{transform:a,...r}=s;return t!=null&&t.length?t.reduce((n,i)=>i({transform:n,...r}),a):a}function h8(t){return y.useMemo(()=>({draggable:{...xl.draggable,...t==null?void 0:t.draggable},droppable:{...xl.droppable,...t==null?void 0:t.droppable},dragOverlay:{...xl.dragOverlay,...t==null?void 0:t.dragOverlay}}),[t==null?void 0:t.draggable,t==null?void 0:t.droppable,t==null?void 0:t.dragOverlay])}function f8(t){let{activeNode:s,measure:a,initialRect:r,config:n=!0}=t;const i=y.useRef(!1),{x:l,y:c}=typeof n=="boolean"?{x:n,y:n}:n;Ia(()=>{if(!l&&!c||!s){i.current=!1;return}if(i.current||!r)return;const d=s==null?void 0:s.node.current;if(!d||d.isConnected===!1)return;const x=a(d),u=Yp(x,r);if(l||(u.x=0),c||(u.y=0),i.current=!0,Math.abs(u.x)>0||Math.abs(u.y)>0){const m=Zp(d);m&&m.scrollBy({top:u.y,left:u.x})}},[s,l,c,r,a])}const ng=y.createContext({...ba,scaleX:1,scaleY:1});var Qa;(function(t){t[t.Uninitialized=0]="Uninitialized",t[t.Initializing=1]="Initializing",t[t.Initialized=2]="Initialized"})(Qa||(Qa={}));const p8=y.memo(function(s){var a,r,n,i;let{id:l,accessibility:c,autoScroll:o=!0,children:d,sensors:x=i8,collisionDetection:u=b5,measuring:m,modifiers:f,...g}=s;const h=y.useReducer(x8,void 0,d8),[p,j]=h,[v,w]=d5(),[b,A]=y.useState(Qa.Uninitialized),N=b===Qa.Initialized,{draggable:{active:C,nodes:k,translate:S},droppable:{containers:F}}=p,R=C!=null?k.get(C):null,T=y.useRef({initial:null,translated:null}),M=y.useMemo(()=>{var ts;return C!=null?{id:C,data:(ts=R==null?void 0:R.data)!=null?ts:l8,rect:T}:null},[C,R]),H=y.useRef(null),[U,W]=y.useState(null),[se,X]=y.useState(null),D=bi(g,Object.values(g)),le=Oi("DndDescribedBy",l),de=y.useMemo(()=>F.getEnabled(),[F]),E=h8(m),{droppableRects:z,measureDroppableContainers:O,measuringScheduled:P}=Y5(de,{dragging:N,dependencies:[S.x,S.y],config:E.droppable}),Z=W5(k,C),re=y.useMemo(()=>se?Vo(se):null,[se]),ie=xc(),oe=Z5(Z,E.draggable.measure);f8({activeNode:C!=null?k.get(C):null,config:ie.layoutShiftCompensation,initialRect:oe,measure:E.draggable.measure});const ue=n0(Z,E.draggable.measure,oe),Ne=n0(Z?Z.parentElement:null),I=y.useRef({activatorEvent:null,active:null,activeNode:Z,collisionRect:null,collisions:null,droppableRects:z,draggableNodes:k,draggingNode:null,draggingNodeRect:null,droppableContainers:F,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),ce=F.getNodeFor((a=I.current.over)==null?void 0:a.id),L=n8({measure:E.dragOverlay.measure}),V=(r=L.nodeRef.current)!=null?r:Z,te=N?(n=L.rect)!=null?n:ue:null,ne=!!(L.nodeRef.current&&L.rect),xe=K5(ne?null:ue),he=ag(V?qs(V):null),Se=Q5(N?ce??Z:null),G=a8(Se),Q=m8(f,{transform:{x:S.x-xe.x,y:S.y-xe.y,scaleX:1,scaleY:1},activatorEvent:se,active:M,activeNodeRect:ue,containerNodeRect:Ne,draggingNodeRect:te,over:I.current.over,overlayNodeRect:L.rect,scrollableAncestors:Se,scrollableAncestorRects:G,windowRect:he}),me=re?hn(re,S):null,je=e8(Se),Ae=l0(je),we=l0(je,[ue]),_e=hn(Q,Ae),Re=te?N5(te,Q):null,Pe=M&&Re?u({active:M,collisionRect:Re,droppableRects:z,droppableContainers:de,pointerCoordinates:me}):null,ze=Gp(Pe,"id"),[Ye,at]=y.useState(null),ut=ne?Q:hn(Q,we),us=v5(ut,(i=Ye==null?void 0:Ye.rect)!=null?i:null,ue),ja=y.useRef(null),Gr=y.useCallback((ts,ss)=>{let{sensor:Ss,options:Na}=ss;if(H.current==null)return;const Ps=k.get(H.current);if(!Ps)return;const Cs=ts.nativeEvent,Qs=new Ss({active:H.current,activeNode:Ps,event:Cs,options:Na,context:I,onAbort(Wt){if(!k.get(Wt))return;const{onDragAbort:Is}=D.current,ca={id:Wt};Is==null||Is(ca),v({type:"onDragAbort",event:ca})},onPending(Wt,wa,Is,ca){if(!k.get(Wt))return;const{onDragPending:yr}=D.current,B={id:Wt,constraint:wa,initialCoordinates:Is,offset:ca};yr==null||yr(B),v({type:"onDragPending",event:B})},onStart(Wt){const wa=H.current;if(wa==null)return;const Is=k.get(wa);if(!Is)return;const{onDragStart:ca}=D.current,gr={activatorEvent:Cs,active:{id:wa,data:Is.data,rect:T}};an.unstable_batchedUpdates(()=>{ca==null||ca(gr),A(Qa.Initializing),j({type:Zt.DragStart,initialCoordinates:Wt,active:wa}),v({type:"onDragStart",event:gr}),W(ja.current),X(Cs)})},onMove(Wt){j({type:Zt.DragMove,coordinates:Wt})},onEnd:Za(Zt.DragEnd),onCancel:Za(Zt.DragCancel)});ja.current=Qs;function Za(Wt){return async function(){const{active:Is,collisions:ca,over:gr,scrollAdjustedTranslate:yr}=I.current;let B=null;if(Is&&yr){const{cancelDrop:K}=D.current;B={activatorEvent:Cs,active:Is,collisions:ca,delta:yr,over:gr},Wt===Zt.DragEnd&&typeof K=="function"&&await Promise.resolve(K(B))&&(Wt=Zt.DragCancel)}H.current=null,an.unstable_batchedUpdates(()=>{j({type:Wt}),A(Qa.Uninitialized),at(null),W(null),X(null),ja.current=null;const K=Wt===Zt.DragEnd?"onDragEnd":"onDragCancel";if(B){const q=D.current[K];q==null||q(B),v({type:K,event:B})}})}}},[k]),Yr=y.useCallback((ts,ss)=>(Ss,Na)=>{const Ps=Ss.nativeEvent,Cs=k.get(Na);if(H.current!==null||!Cs||Ps.dndKit||Ps.defaultPrevented)return;const Qs={active:Cs};ts(Ss,ss.options,Qs)===!0&&(Ps.dndKit={capturedBy:ss.sensor},H.current=Na,Gr(Ss,ss))},[k,Gr]),fr=G5(x,Yr);t8(x),Ia(()=>{ue&&b===Qa.Initializing&&A(Qa.Initialized)},[ue,b]),y.useEffect(()=>{const{onDragMove:ts}=D.current,{active:ss,activatorEvent:Ss,collisions:Na,over:Ps}=I.current;if(!ss||!Ss)return;const Cs={active:ss,activatorEvent:Ss,collisions:Na,delta:{x:_e.x,y:_e.y},over:Ps};an.unstable_batchedUpdates(()=>{ts==null||ts(Cs),v({type:"onDragMove",event:Cs})})},[_e.x,_e.y]),y.useEffect(()=>{const{active:ts,activatorEvent:ss,collisions:Ss,droppableContainers:Na,scrollAdjustedTranslate:Ps}=I.current;if(!ts||H.current==null||!ss||!Ps)return;const{onDragOver:Cs}=D.current,Qs=Na.get(ze),Za=Qs&&Qs.rect.current?{id:Qs.id,rect:Qs.rect.current,data:Qs.data,disabled:Qs.disabled}:null,Wt={active:ts,activatorEvent:ss,collisions:Ss,delta:{x:Ps.x,y:Ps.y},over:Za};an.unstable_batchedUpdates(()=>{at(Za),Cs==null||Cs(Wt),v({type:"onDragOver",event:Wt})})},[ze]),Ia(()=>{I.current={activatorEvent:se,active:M,activeNode:Z,collisionRect:Re,collisions:Pe,droppableRects:z,draggableNodes:k,draggingNode:V,draggingNodeRect:te,droppableContainers:F,over:Ye,scrollableAncestors:Se,scrollAdjustedTranslate:_e},T.current={initial:te,translated:Re}},[M,Z,Pe,Re,k,V,te,z,F,Ye,Se,_e]),V5({...ie,delta:S,draggingRect:Re,pointerCoordinates:me,scrollableAncestors:Se,scrollableAncestorRects:G});const pr=y.useMemo(()=>({active:M,activeNode:Z,activeNodeRect:ue,activatorEvent:se,collisions:Pe,containerNodeRect:Ne,dragOverlay:L,draggableNodes:k,droppableContainers:F,droppableRects:z,over:Ye,measureDroppableContainers:O,scrollableAncestors:Se,scrollableAncestorRects:G,measuringConfiguration:E,measuringScheduled:P,windowRect:he}),[M,Z,ue,se,Pe,Ne,L,k,F,z,Ye,O,Se,G,E,P,he]),Li=y.useMemo(()=>({activatorEvent:se,activators:fr,active:M,activeNodeRect:ue,ariaDescribedById:{draggable:le},dispatch:j,draggableNodes:k,over:Ye,measureDroppableContainers:O}),[se,fr,M,ue,j,le,k,Ye,O]);return Ve.createElement(Hp.Provider,{value:w},Ve.createElement(dc.Provider,{value:Li},Ve.createElement(rg.Provider,{value:pr},Ve.createElement(ng.Provider,{value:us},d)),Ve.createElement(u8,{disabled:(c==null?void 0:c.restoreFocus)===!1})),Ve.createElement(m5,{...c,hiddenTextDescribedById:le}));function xc(){const ts=(U==null?void 0:U.autoScrollEnabled)===!1,ss=typeof o=="object"?o.enabled===!1:o===!1,Ss=N&&!ts&&!ss;return typeof o=="object"?{...o,enabled:Ss}:{enabled:Ss}}}),g8=y.createContext(null),o0="button",y8="Draggable";function b8(t){let{id:s,data:a,disabled:r=!1,attributes:n}=t;const i=Oi(y8),{activators:l,activatorEvent:c,active:o,activeNodeRect:d,ariaDescribedById:x,draggableNodes:u,over:m}=y.useContext(dc),{role:f=o0,roleDescription:g="draggable",tabIndex:h=0}=n??{},p=(o==null?void 0:o.id)===s,j=y.useContext(p?ng:g8),[v,w]=Rl(),[b,A]=Rl(),N=s8(l,s),C=bi(a);Ia(()=>(u.set(s,{id:s,key:i,node:v,activatorNode:b,data:C}),()=>{const S=u.get(s);S&&S.key===i&&u.delete(s)}),[u,s]);const k=y.useMemo(()=>({role:f,tabIndex:h,"aria-disabled":r,"aria-pressed":p&&f===o0?!0:void 0,"aria-roledescription":g,"aria-describedby":x.draggable}),[r,f,h,p,g,x.draggable]);return{active:o,activatorEvent:c,activeNodeRect:d,attributes:k,isDragging:p,listeners:r?void 0:N,node:v,over:m,setNodeRef:w,setActivatorNodeRef:A,transform:j}}function v8(){return y.useContext(rg)}const j8="Droppable",N8={timeout:25};function w8(t){let{data:s,disabled:a=!1,id:r,resizeObserverConfig:n}=t;const i=Oi(j8),{active:l,dispatch:c,over:o,measureDroppableContainers:d}=y.useContext(dc),x=y.useRef({disabled:a}),u=y.useRef(!1),m=y.useRef(null),f=y.useRef(null),{disabled:g,updateMeasurementsFor:h,timeout:p}={...N8,...n},j=bi(h??r),v=y.useCallback(()=>{if(!u.current){u.current=!0;return}f.current!=null&&clearTimeout(f.current),f.current=setTimeout(()=>{d(Array.isArray(j.current)?j.current:[j.current]),f.current=null},p)},[p]),w=oc({callback:v,disabled:g||!l}),b=y.useCallback((k,S)=>{w&&(S&&(w.unobserve(S),u.current=!1),k&&w.observe(k))},[w]),[A,N]=Rl(b),C=bi(s);return y.useEffect(()=>{!w||!A.current||(w.disconnect(),u.current=!1,w.observe(A.current))},[A,w]),y.useEffect(()=>(c({type:Zt.RegisterDroppable,element:{id:r,key:i,disabled:a,node:A,rect:m,data:C}}),()=>c({type:Zt.UnregisterDroppable,key:i,id:r})),[r]),y.useEffect(()=>{a!==x.current.disabled&&(c({type:Zt.SetDroppableDisabled,id:r,key:i,disabled:a}),x.current.disabled=a)},[r,i,a,c]),{active:l,rect:m,isOver:(o==null?void 0:o.id)===r,node:A,over:o,setNodeRef:N}}function ig(t,s,a){const r=t.slice();return r.splice(a<0?r.length+a:a,0,r.splice(s,1)[0]),r}function k8(t,s){return t.reduce((a,r,n)=>{const i=s.get(r);return i&&(a[n]=i),a},Array(t.length))}function nl(t){return t!==null&&t>=0}function S8(t,s){if(t===s)return!0;if(t.length!==s.length)return!1;for(let a=0;a<t.length;a++)if(t[a]!==s[a])return!1;return!0}function C8(t){return typeof t=="boolean"?{draggable:t,droppable:t}:t}const lg=t=>{let{rects:s,activeIndex:a,overIndex:r,index:n}=t;const i=ig(s,r,a),l=s[n],c=i[n];return!c||!l?null:{x:c.left-l.left,y:c.top-l.top,scaleX:c.width/l.width,scaleY:c.height/l.height}},il={scaleX:1,scaleY:1},A8=t=>{var s;let{activeIndex:a,activeNodeRect:r,index:n,rects:i,overIndex:l}=t;const c=(s=i[a])!=null?s:r;if(!c)return null;if(n===a){const d=i[l];return d?{x:0,y:a<l?d.top+d.height-(c.top+c.height):d.top-c.top,...il}:null}const o=E8(i,n,a);return n>a&&n<=l?{x:0,y:-c.height-o,...il}:n<a&&n>=l?{x:0,y:c.height+o,...il}:{x:0,y:0,...il}};function E8(t,s,a){const r=t[s],n=t[s-1],i=t[s+1];return r?a<s?n?r.top-(n.top+n.height):i?i.top-(r.top+r.height):0:i?i.top-(r.top+r.height):n?r.top-(n.top+n.height):0:0}const cg="Sortable",og=Ve.createContext({activeIndex:-1,containerId:cg,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:lg,disabled:{draggable:!1,droppable:!1}});function _8(t){let{children:s,id:a,items:r,strategy:n=lg,disabled:i=!1}=t;const{active:l,dragOverlay:c,droppableRects:o,over:d,measureDroppableContainers:x}=v8(),u=Oi(cg,a),m=c.rect!==null,f=y.useMemo(()=>r.map(N=>typeof N=="object"&&"id"in N?N.id:N),[r]),g=l!=null,h=l?f.indexOf(l.id):-1,p=d?f.indexOf(d.id):-1,j=y.useRef(f),v=!S8(f,j.current),w=p!==-1&&h===-1||v,b=C8(i);Ia(()=>{v&&g&&x(f)},[v,f,g,x]),y.useEffect(()=>{j.current=f},[f]);const A=y.useMemo(()=>({activeIndex:h,containerId:u,disabled:b,disableTransforms:w,items:f,overIndex:p,useDragOverlay:m,sortedRects:k8(f,o),strategy:n}),[h,u,b.draggable,b.droppable,w,f,p,o,m,n]);return Ve.createElement(og.Provider,{value:A},s)}const F8=t=>{let{id:s,items:a,activeIndex:r,overIndex:n}=t;return ig(a,r,n).indexOf(s)},T8=t=>{let{containerId:s,isSorting:a,wasDragging:r,index:n,items:i,newIndex:l,previousItems:c,previousContainerId:o,transition:d}=t;return!d||!r||c!==i&&n===l?!1:a?!0:l!==n&&s===o},D8={duration:200,easing:"ease"},dg="transform",R8=ji.Transition.toString({property:dg,duration:0,easing:"linear"}),P8={roleDescription:"sortable"};function I8(t){let{disabled:s,index:a,node:r,rect:n}=t;const[i,l]=y.useState(null),c=y.useRef(a);return Ia(()=>{if(!s&&a!==c.current&&r.current){const o=n.current;if(o){const d=Rn(r.current,{ignoreTransform:!0}),x={x:o.left-d.left,y:o.top-d.top,scaleX:o.width/d.width,scaleY:o.height/d.height};(x.x||x.y)&&l(x)}}a!==c.current&&(c.current=a)},[s,a,r,n]),y.useEffect(()=>{i&&l(null)},[i]),i}function $8(t){let{animateLayoutChanges:s=T8,attributes:a,disabled:r,data:n,getNewIndex:i=F8,id:l,strategy:c,resizeObserverConfig:o,transition:d=D8}=t;const{items:x,containerId:u,activeIndex:m,disabled:f,disableTransforms:g,sortedRects:h,overIndex:p,useDragOverlay:j,strategy:v}=y.useContext(og),w=O8(r,f),b=x.indexOf(l),A=y.useMemo(()=>({sortable:{containerId:u,index:b,items:x},...n}),[u,n,b,x]),N=y.useMemo(()=>x.slice(x.indexOf(l)),[x,l]),{rect:C,node:k,isOver:S,setNodeRef:F}=w8({id:l,data:A,disabled:w.droppable,resizeObserverConfig:{updateMeasurementsFor:N,...o}}),{active:R,activatorEvent:T,activeNodeRect:M,attributes:H,setNodeRef:U,listeners:W,isDragging:se,over:X,setActivatorNodeRef:D,transform:le}=b8({id:l,data:A,attributes:{...P8,...a},disabled:w.draggable}),de=e5(F,U),E=!!R,z=E&&!g&&nl(m)&&nl(p),O=!j&&se,P=O&&z?le:null,re=z?P??(c??v)({rects:h,activeNodeRect:M,activeIndex:m,overIndex:p,index:b}):null,ie=nl(m)&&nl(p)?i({id:l,items:x,activeIndex:m,overIndex:p}):b,oe=R==null?void 0:R.id,ue=y.useRef({activeId:oe,items:x,newIndex:ie,containerId:u}),Ne=x!==ue.current.items,I=s({active:R,containerId:u,isDragging:se,isSorting:E,id:l,index:b,items:x,newIndex:ue.current.newIndex,previousItems:ue.current.items,previousContainerId:ue.current.containerId,transition:d,wasDragging:ue.current.activeId!=null}),ce=I8({disabled:!I,index:b,node:k,rect:C});return y.useEffect(()=>{E&&ue.current.newIndex!==ie&&(ue.current.newIndex=ie),u!==ue.current.containerId&&(ue.current.containerId=u),x!==ue.current.items&&(ue.current.items=x)},[E,ie,u,x]),y.useEffect(()=>{if(oe===ue.current.activeId)return;if(oe!=null&&ue.current.activeId==null){ue.current.activeId=oe;return}const V=setTimeout(()=>{ue.current.activeId=oe},50);return()=>clearTimeout(V)},[oe]),{active:R,activeIndex:m,attributes:H,data:A,rect:C,index:b,newIndex:ie,items:x,isOver:S,isSorting:E,isDragging:se,listeners:W,node:k,overIndex:p,over:X,setNodeRef:de,setActivatorNodeRef:D,setDroppableNodeRef:F,setDraggableNodeRef:U,transform:ce??re,transition:L()};function L(){if(ce||Ne&&ue.current.newIndex===b)return R8;if(!(O&&!Qd(T)||!d)&&(E||I))return ji.Transition.toString({...d,property:dg})}}function O8(t,s){var a,r;return typeof t=="boolean"?{draggable:t,droppable:!1}:{draggable:(a=t==null?void 0:t.draggable)!=null?a:s.draggable,droppable:(r=t==null?void 0:t.droppable)!=null?r:s.droppable}}function $l(t){if(!t)return!1;const s=t.data.current;return!!(s&&"sortable"in s&&typeof s.sortable=="object"&&"containerId"in s.sortable&&"items"in s.sortable&&"index"in s.sortable)}const L8=[rt.Down,rt.Right,rt.Up,rt.Left],M8=(t,s)=>{let{context:{active:a,collisionRect:r,droppableRects:n,droppableContainers:i,over:l,scrollableAncestors:c}}=s;if(L8.includes(t.code)){if(t.preventDefault(),!a||!r)return;const o=[];i.getEnabled().forEach(u=>{if(!u||u!=null&&u.disabled)return;const m=n.get(u.id);if(m)switch(t.code){case rt.Down:r.top<m.top&&o.push(u);break;case rt.Up:r.top>m.top&&o.push(u);break;case rt.Left:r.left>m.left&&o.push(u);break;case rt.Right:r.left<m.left&&o.push(u);break}});const d=g5({collisionRect:r,droppableRects:n,droppableContainers:o});let x=Gp(d,"id");if(x===(l==null?void 0:l.id)&&d.length>1&&(x=d[1].id),x!=null){const u=i.get(a.id),m=i.get(x),f=m?n.get(m.id):null,g=m==null?void 0:m.node.current;if(g&&f&&u&&m){const p=cc(g).some((N,C)=>c[C]!==N),j=xg(u,m),v=B8(u,m),w=p||!j?{x:0,y:0}:{x:v?r.width-f.width:0,y:v?r.height-f.height:0},b={x:f.left,y:f.top};return w.x&&w.y?b:vi(b,w)}}}};function xg(t,s){return!$l(t)||!$l(s)?!1:t.data.current.sortable.containerId===s.data.current.sortable.containerId}function B8(t,s){return!$l(t)||!$l(s)||!xg(t,s)?!1:t.data.current.sortable.index<s.data.current.sortable.index}const Ea={employee:1,hr:2,manager:3,admin:4},z8=[{value:"leave",label:"Leave Request",icon:"ðŸ–ï¸"},{value:"payroll",label:"Payslip Approval",icon:"ðŸ’µ"},{value:"onboarding_approval",label:"Employee Onboarding",icon:"ðŸ‘¤"},{value:"offboarding",label:"Employee Offboarding",icon:"ðŸšª"},{value:"project",label:"Project Approval",icon:"ðŸ“‹"},{value:"expense",label:"Budget/Expense Approval",icon:"ðŸ’°"},{value:"asset",label:"Equipment Request",icon:"ðŸ’»"},{value:"document",label:"Document Approval",icon:"ðŸ“„"},{value:"other",label:"Other",icon:"ðŸ“Œ"}],Qc=[{value:"hr",label:"HR",level:Ea.hr},{value:"manager",label:"Manager",level:Ea.manager},{value:"admin",label:"Admin",level:Ea.admin}],d0=[{value:"sequential",label:"Sequential",help:"One approver at a time"},{value:"parallel",label:"Parallel",help:"All approvers must approve"},{value:"any_one",label:"Any One",help:"First approval passes"}],U8=Wn({id:sn().min(1),role:mn(["hr","manager","admin"]),mode:mn(["sequential","parallel","any_one"]).default("sequential"),permissions:Wn({canReject:xa().default(!0),canSendBack:xa().default(!0),canDelegate:xa().default(!0),canAddComments:xa().default(!0)}),slaHours:Op().min(0).max(24*30).default(24),escalationRole:mn(["hr","manager","admin"]).optional().nullable(),autoApproveAfterTimeout:xa().default(!1),notifications:Wn({email:xa().default(!0),inApp:xa().default(!0),sms:xa().default(!1)}),conditional:Wn({enabled:xa().default(!1),skipIfEnabled:xa().default(!1),routeRulesEnabled:xa().default(!1)})}),V8=Wn({workflowName:sn().trim().min(1,"Workflow name is required").max(50,"Max 50 characters"),description:sn().trim().max(200,"Max 200 characters").optional().or(Um("")),appliesTo:sn().min(1,"Applies To is required"),requesterRole:mn(["employee","hr","manager","admin"]).default("employee"),status:mn(["draft","active","archived"]).default("draft"),effectiveDate:sn().optional().or(Um("")),autoArchiveAfterDays:Mp([sn(),Op()]).optional().transform(t=>t===""||t===void 0?void 0:Number(t)).refine(t=>t===void 0||Number.isFinite(t)&&t>=0,"Must be 0 or greater"),steps:Lp(U8).min(1,"Add at least one approval step")});function Qr(){return`step_${Math.random().toString(16).slice(2)}_${Date.now()}`}function H8(t){const s=[],a=[];let r=Ea[t.requesterRole||"employee"]||Ea.employee;const n=new Set;return t.steps.forEach((i,l)=>{const c=Ea[i.role];c<r?s.push(`Step ${l+1} violates hierarchy (cannot go downward).`):r=c,i.mode==="sequential"&&(n.has(i.role)&&s.push(`Sequential flow cannot contain duplicate roles (duplicate: ${i.role}).`),n.add(i.role)),i.escalationRole?Ea[i.escalationRole]<=c&&s.push(`Step ${l+1} escalation target must be higher than the step role.`):a.push(`Step ${l+1} has no escalation target.`)}),{errors:s,warnings:a}}function eo(t){const s=Number(t)||0;return Math.round(s*60)}function q8(t){return t.reduce((s,a)=>s+(Number(a.slaHours)||0),0)}function W8({id:t,children:s,disabled:a}){const r=$8({id:t,disabled:a}),n={transform:ji.Transform.toString(r.transform),transition:r.transition};return e.jsx("div",{ref:r.setNodeRef,style:n,className:a?"opacity-100":"",children:typeof s=="function"?s(r):s})}function x0(){var z;const t=Je(),{id:s}=Ga(),a=!!s,[r,n]=y.useState(a),[i,l]=y.useState(!1),[c,o]=y.useState(!1),[d,x]=y.useState({errors:[],warnings:[]}),[u,m]=y.useState(()=>new Set([0])),f=y.useRef(null),g=h_({resolver:Q6(V8),mode:"onChange",defaultValues:{workflowName:"",description:"",appliesTo:"leave",requesterRole:"employee",status:"draft",effectiveDate:"",autoArchiveAfterDays:"",steps:[{id:Qr(),role:"hr",mode:"sequential",permissions:{canReject:!0,canSendBack:!0,canDelegate:!0,canAddComments:!0},slaHours:24,escalationRole:"manager",autoApproveAfterTimeout:!1,notifications:{email:!0,inApp:!0,sms:!1},conditional:{enabled:!1,skipIfEnabled:!1,routeRulesEnabled:!1}}]}}),{control:h,watch:p,setValue:j,reset:v,handleSubmit:w,formState:b}=g,{fields:A,append:N,remove:C,move:k,update:S}=m_({control:h,name:"steps"}),F=p(),R=y.useMemo(()=>H8(F),[F]),T=h5(Xm(ax,{activationConstraint:{distance:8}}),Xm(tx,{coordinateGetter:M8}));y.useEffect(()=>{const O=P=>{(P.metaKey||P.ctrlKey)&&P.key.toLowerCase()==="s"&&(P.preventDefault(),w(H)())};return window.addEventListener("keydown",O),()=>window.removeEventListener("keydown",O)},[]),y.useEffect(()=>{(async()=>{if(a)try{n(!0);const Z=(await Gt.get(s)).data.data,re=(Z.steps||[]).slice().sort((oe,ue)=>(oe.order||0)-(ue.order||0)).map(oe=>{var ue,Ne,I,ce,L,V,te,ne,xe,he;return{id:Qr(),role:oe.role,mode:oe.mode||"sequential",permissions:{canReject:((ue=oe.permissions)==null?void 0:ue.canReject)??!0,canSendBack:((Ne=oe.permissions)==null?void 0:Ne.canSendBack)??!0,canDelegate:((I=oe.permissions)==null?void 0:I.canDelegate)??!0,canAddComments:((ce=oe.permissions)==null?void 0:ce.canAddComments)??!0},slaHours:Math.round(Number(((L=oe.sla)==null?void 0:L.timeLimitMinutes)||1440)/60*10)/10,escalationRole:((V=oe.escalation)==null?void 0:V.escalateToRole)||null,autoApproveAfterTimeout:!!((te=oe.sla)!=null&&te.autoApproveAfterMinutes),notifications:{email:((ne=oe.notifications)==null?void 0:ne.email)??!0,inApp:((xe=oe.notifications)==null?void 0:xe.inApp)??!0,sms:((he=oe.notifications)==null?void 0:he.sms)??!1},conditional:{enabled:!1,skipIfEnabled:!1,routeRulesEnabled:!1}}})||[],ie=re.length>0?re:(Z.levels||Z.approvalSteps||[]).map(oe=>{const ue=oe.approverType==="reporting_manager"||oe.approverType==="manager"?"manager":oe.approverType==="hr"?"hr":"admin";return{id:Qr(),role:ue,mode:"sequential",permissions:{canReject:!0,canSendBack:!0,canDelegate:!0,canAddComments:!0},slaHours:Math.round(Number(oe.slaMinutes||1440)/60*10)/10,escalationRole:null,autoApproveAfterTimeout:!1,notifications:{email:!0,inApp:!0,sms:!1},conditional:{enabled:!1,skipIfEnabled:!1,routeRulesEnabled:!1}}});v({workflowName:Z.workflowName||Z.name||"",description:Z.description||"",appliesTo:Z.appliesTo||Z.requestType||Z.entityType||"leave",requesterRole:Z.requesterRole||"employee",status:Z.status||(Z.isActive?"active":"draft"),effectiveDate:Z.effectiveDate?new Date(Z.effectiveDate).toISOString().slice(0,10):"",autoArchiveAfterDays:Z.autoArchiveAfterDays??"",steps:ie.length?ie:g.getValues("steps")})}catch{_.error("Failed to load workflow"),t("/approval-workflow/workflows")}finally{n(!1)}})()},[s,a]),y.useEffect(()=>{if(!a)try{const O=sessionStorage.getItem("workflowTemplateDraft");if(!O)return;const P=JSON.parse(O);if(sessionStorage.removeItem("workflowTemplateDraft"),!P||typeof P!="object"||!Array.isArray(P.steps)||P.steps.length===0)return;v({workflowName:P.workflowName||"",description:P.description||"",appliesTo:P.appliesTo||"leave",requesterRole:P.requesterRole||"employee",status:P.status||"draft",effectiveDate:P.effectiveDate||"",autoArchiveAfterDays:P.autoArchiveAfterDays||"",steps:P.steps.map(Z=>({...Z,id:Qr()}))}),_.success("Template applied")}catch{}},[a]),y.useEffect(()=>(f.current&&window.clearTimeout(f.current),f.current=window.setTimeout(async()=>{try{const O=M(F),P=await Gt.validate(O);x({errors:P.data.data.errors||[],warnings:P.data.data.warnings||[]})}catch{}},350),()=>{f.current&&window.clearTimeout(f.current)}),[F]);const M=O=>({workflowName:O.workflowName,description:O.description||"",appliesTo:O.appliesTo,requesterRole:O.requesterRole||"employee",status:O.status,effectiveDate:O.effectiveDate?new Date(O.effectiveDate).toISOString():void 0,autoArchiveAfterDays:O.autoArchiveAfterDays===""?void 0:Number(O.autoArchiveAfterDays),steps:O.steps.map((P,Z)=>({order:Z+1,name:`Step ${Z+1}`,role:P.role,mode:P.mode,permissions:P.permissions,sla:{timeLimitMinutes:eo(P.slaHours),autoApproveAfterMinutes:P.autoApproveAfterTimeout?eo(P.slaHours):void 0},escalation:{enabled:!0,escalateToRole:P.escalationRole||void 0,escalateAfterMinutes:eo(Math.max(Number(P.slaHours)||0,0))},notifications:P.notifications}))}),H=async O=>{var P,Z;if(R.errors.length>0){_.error("Fix validation errors before saving");return}l(!0);try{const re=M(O);if(a)await Gt.update(s,re),_.success("Workflow updated");else{const ie=await Gt.create(re);_.success("Workflow created"),t(`/approval-workflow/workflows/${ie.data.data._id}/edit`,{replace:!0})}}catch(re){const ie=((Z=(P=re==null?void 0:re.response)==null?void 0:P.data)==null?void 0:Z.message)||"Failed to save workflow";_.error(ie)}finally{l(!1)}},U=async()=>{if(R.errors.length>0){_.error("Fix validation errors before testing");return}o(!0);try{const O=M(F);((await Gt.validate(O)).data.data.errors||[]).length>0?_.error("Validation failed. Review the validation panel."):_.success("Dry-run validation passed")}catch{_.error("Dry-run validation failed")}finally{o(!1)}},W=()=>{const O=F.steps[F.steps.length-1],P=Ea[O.role],Z=P<=Ea.hr?"manager":(P<=Ea.manager,"admin");N({id:Qr(),role:Z,mode:"sequential",permissions:{canReject:!0,canSendBack:!0,canDelegate:!0,canAddComments:!0},slaHours:24,escalationRole:Z==="admin"?null:"admin",autoApproveAfterTimeout:!1,notifications:{email:!0,inApp:!0,sms:!1},conditional:{enabled:!1,skipIfEnabled:!1,routeRulesEnabled:!1}}),m(re=>new Set([...re,F.steps.length]))},se=O=>{const P=F.steps[O];N({...P,id:Qr()})},X=({active:O,over:P})=>{if(!P||O.id===P.id)return;const Z=A.findIndex(ie=>ie.id===O.id),re=A.findIndex(ie=>ie.id===P.id);Z===-1||re===-1||k(Z,re)},D=F.steps.length,le=q8(F.steps),de=F.steps.filter(O=>!!O.escalationRole).length,E=F.steps.reduce((O,P)=>{const Z=P.notifications;return O+(Z.email?1:0)+(Z.inApp?1:0)+(Z.sms?1:0)},0);return r?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"theme-text-secondary",children:"Loading workflowâ€¦"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col gap-3 md:flex-row md:items-center md:justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{className:"btn-outline",onClick:()=>t("/approval-workflow/workflows"),"aria-label":"Back",children:e.jsx(xt,{size:16})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-semibold theme-text",children:a?"Edit Workflow":"Create New Workflow"}),e.jsx("p",{className:"text-sm theme-text-secondary",children:"Drag and drop steps, configure SLAs, and validate hierarchy rules in real time."})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{className:"btn-outline flex items-center gap-2",onClick:U,disabled:c,children:[e.jsx(zl,{size:16}),c?"Testingâ€¦":"Dry-run Validate"]}),e.jsxs("button",{className:"btn-primary flex items-center gap-2",onClick:w(H),disabled:i||!b.isValid,children:[e.jsx(Rs,{size:16}),i?"Savingâ€¦":"Save"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-[1fr_360px] gap-6",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-lg font-semibold theme-text",children:"Basic Configuration"}),e.jsx("span",{className:"text-xs theme-text-secondary",children:"Cmd/Ctrl+S to save"})]}),e.jsxs("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium theme-text-secondary mb-1",children:"Workflow Name *"}),e.jsx("input",{className:"input-field",maxLength:50,value:F.workflowName,onChange:O=>j("workflowName",O.target.value,{shouldValidate:!0}),"aria-invalid":!!b.errors.workflowName}),b.errors.workflowName&&e.jsx("p",{className:"text-sm text-red-400 mt-1",children:b.errors.workflowName.message}),e.jsxs("p",{className:"text-xs theme-text-secondary mt-1",children:[(F.workflowName||"").length,"/50"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium theme-text-secondary mb-1",children:"Applies To *"}),e.jsx("select",{className:"input-field",value:F.appliesTo,onChange:O=>j("appliesTo",O.target.value,{shouldValidate:!0}),children:z8.map(O=>e.jsxs("option",{value:O.value,children:[O.icon," ",O.label]},O.value))}),b.errors.appliesTo&&e.jsx("p",{className:"text-sm text-red-400 mt-1",children:b.errors.appliesTo.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium theme-text-secondary mb-1",children:"Requester Role *"}),e.jsxs("select",{className:"input-field",value:F.requesterRole,onChange:O=>j("requesterRole",O.target.value,{shouldValidate:!0}),children:[e.jsx("option",{value:"employee",children:"Employee (Level 1)"}),e.jsx("option",{value:"hr",children:"HR (Level 2)"}),e.jsx("option",{value:"manager",children:"Manager (Level 3)"}),e.jsx("option",{value:"admin",children:"Admin (Level 4)"})]}),e.jsx("p",{className:"text-xs theme-text-secondary mt-1",children:"Use this to create different workflows per requester role."})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium theme-text-secondary mb-1",children:"Description"}),e.jsx("textarea",{className:"input-field",rows:3,maxLength:200,value:F.description||"",onChange:O=>j("description",O.target.value,{shouldValidate:!0})}),b.errors.description&&e.jsx("p",{className:"text-sm text-red-400 mt-1",children:b.errors.description.message}),e.jsxs("p",{className:"text-xs theme-text-secondary mt-1",children:[(F.description||"").length,"/200"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium theme-text-secondary mb-1",children:"Status *"}),e.jsxs("select",{className:"input-field",value:F.status,onChange:O=>j("status",O.target.value),children:[e.jsx("option",{value:"draft",children:"Draft"}),e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"archived",children:"Archived"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium theme-text-secondary mb-1",children:"Effective Date"}),e.jsx("input",{className:"input-field",type:"date",value:F.effectiveDate||"",onChange:O=>j("effectiveDate",O.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium theme-text-secondary mb-1",children:"Auto-Archive After (Days)"}),e.jsx("input",{className:"input-field",type:"number",min:0,value:F.autoArchiveAfterDays??"",onChange:O=>j("autoArchiveAfterDays",O.target.value,{shouldValidate:!0})}),b.errors.autoArchiveAfterDays&&e.jsx("p",{className:"text-sm text-red-400 mt-1",children:b.errors.autoArchiveAfterDays.message})]})]})]}),e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-lg font-semibold theme-text",children:"Approval Flow Builder"}),e.jsxs("button",{className:"btn-primary flex items-center gap-2",onClick:W,children:[e.jsx(qe,{size:16}),"Add Approval Step"]})]}),e.jsx("div",{className:"mt-4",children:e.jsxs("div",{className:"rounded-lg border theme-border theme-surface p-4",children:[e.jsx("div",{className:"text-sm font-semibold theme-text",children:"ðŸ“ Requester"}),e.jsxs("div",{className:"text-xs theme-text-secondary",children:["Role: ",e.jsx("span",{className:"font-medium theme-text",children:F.requesterRole})," (Auto-assigned at runtime)"]})]})}),e.jsx("div",{className:"mt-4 space-y-3",children:e.jsx(p8,{sensors:T,collisionDetection:p5,onDragEnd:X,children:e.jsx(_8,{items:A.map(O=>O.id),strategy:A8,children:A.map((O,P)=>e.jsx(W8,{id:O.id,children:Z=>{var I;const re=F.steps[P],ie=u.has(P),oe=Qc.find(ce=>ce.value===re.role),ue=(oe==null?void 0:oe.level)||0,Ne=Qc.filter(ce=>ce.level>ue);return e.jsxs("div",{className:"rounded-lg border theme-border theme-surface p-4",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("button",{className:"mt-1 cursor-grab theme-text-secondary",...Z.attributes,...Z.listeners,"aria-label":`Drag step ${P+1}`,children:e.jsx(zg,{size:18})}),e.jsxs("div",{className:"min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"font-semibold theme-text",children:["Step ",P+1]}),e.jsx("span",{className:"badge badge-info",children:oe==null?void 0:oe.label}),e.jsx("span",{className:"badge badge-default",children:(I=d0.find(ce=>ce.value===re.mode))==null?void 0:I.label})]}),e.jsxs("div",{className:"text-xs theme-text-secondary",children:["SLA: ",re.slaHours,"h ",re.escalationRole?`â€¢ Escalate to ${re.escalationRole}`:""]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{className:"btn-outline",onClick:()=>m(ce=>{const L=new Set(ce);return L.has(P)?L.delete(P):L.add(P),L}),"aria-label":ie?"Collapse step details":"Expand step details",children:ie?e.jsx(Ug,{size:16}):e.jsx(wi,{size:16})}),e.jsx("button",{className:"btn-outline",onClick:()=>se(P),"aria-label":"Duplicate step",children:e.jsx(Ml,{size:16})}),e.jsx("button",{className:"btn-outline border-red-800 text-red-400",onClick:()=>{A.length!==1&&window.confirm(`Delete Step ${P+1}?`)&&C(P)},"aria-label":"Delete step",disabled:A.length===1,children:e.jsx(kt,{size:16})})]})]}),ie&&e.jsxs("div",{className:"mt-4 pt-4 border-t theme-border grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium theme-text-secondary mb-1",children:"Role *"}),e.jsx("select",{className:"input-field",value:re.role,onChange:ce=>S(P,{...re,role:ce.target.value}),children:Qc.map(ce=>e.jsxs("option",{value:ce.value,children:[ce.label," (Level ",ce.level,")"]},ce.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium theme-text-secondary mb-1",children:"Approval Mode"}),e.jsx("select",{className:"input-field",value:re.mode,onChange:ce=>S(P,{...re,mode:ce.target.value}),children:d0.map(ce=>e.jsxs("option",{value:ce.value,children:[ce.label," â€” ",ce.help]},ce.value))})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium theme-text-secondary mb-2",children:"Permissions"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:[["canReject","Can Reject"],["canSendBack","Can Send Back"],["canDelegate","Can Delegate"],["canAddComments","Can Add Comments"]].map(([ce,L])=>e.jsxs("label",{className:"flex items-center gap-2 text-sm theme-text",children:[e.jsx("input",{type:"checkbox",checked:re.permissions[ce],onChange:V=>S(P,{...re,permissions:{...re.permissions,[ce]:V.target.checked}})}),L]},ce))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium theme-text-secondary mb-1",children:"SLA (Hours)"}),e.jsx("input",{className:"input-field",type:"number",min:0,value:re.slaHours,onChange:ce=>S(P,{...re,slaHours:Number(ce.target.value)||0})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium theme-text-secondary mb-1",children:"Escalate To"}),e.jsxs("select",{className:"input-field",value:re.escalationRole||"",onChange:ce=>S(P,{...re,escalationRole:ce.target.value?ce.target.value:null}),children:[e.jsx("option",{value:"",children:"No escalation"}),Ne.map(ce=>e.jsx("option",{value:ce.value,children:ce.label},ce.value))]})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium theme-text-secondary mb-2",children:"Notifications"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-2",children:[["email","Email"],["inApp","In-app"],["sms","SMS"]].map(([ce,L])=>e.jsxs("label",{className:"flex items-center gap-2 text-sm theme-text",children:[e.jsx("input",{type:"checkbox",checked:re.notifications[ce],onChange:V=>S(P,{...re,notifications:{...re.notifications,[ce]:V.target.checked}})}),L]},ce))})]}),e.jsx("div",{className:"md:col-span-2",children:e.jsxs("div",{className:"rounded-lg border theme-border p-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"text-sm font-medium theme-text",children:"Advanced (Conditional Routing)"}),e.jsxs("label",{className:"flex items-center gap-2 text-sm theme-text-secondary",children:[e.jsx("input",{type:"checkbox",checked:re.conditional.enabled,onChange:ce=>S(P,{...re,conditional:{...re.conditional,enabled:ce.target.checked}})}),"Enable"]})]}),e.jsx("p",{className:"text-xs theme-text-secondary mt-1",children:"Skip steps or route based on request attributes (initial rollout stores configuration; execution routing can be expanded)."})]})})]})]})}},O.id))})})})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"card",children:[e.jsx("h3",{className:"text-sm font-semibold theme-text mb-3",children:"Real-time Validation"}),e.jsxs("div",{className:"space-y-2",children:[R.errors.length===0?e.jsx("div",{className:"text-sm text-green-400",children:"âœ… Client checks passed"}):R.errors.map((O,P)=>e.jsxs("div",{className:"text-sm text-red-400",children:["âŒ ",O]},P)),R.warnings.map((O,P)=>e.jsxs("div",{className:"text-sm text-amber-400",children:["âš ï¸ ",O]},P))]}),e.jsxs("div",{className:"mt-4 pt-4 border-t theme-border",children:[e.jsx("div",{className:"text-xs theme-text-secondary mb-2",children:"Server validations"}),e.jsxs("div",{className:"space-y-2",children:[(d.errors||[]).slice(0,5).map((O,P)=>e.jsxs("div",{className:"text-sm text-red-400",children:["âŒ ",O.message||"Validation error"]},P)),(d.warnings||[]).slice(0,5).map((O,P)=>e.jsxs("div",{className:"text-sm text-amber-400",children:["âš ï¸ ",O.message||"Warning"]},P)),(d.errors||[]).length===0&&(d.warnings||[]).length===0&&e.jsx("div",{className:"text-sm theme-text-secondary",children:"No server messages."})]})]})]}),e.jsxs("div",{className:"card",children:[e.jsx("h3",{className:"text-sm font-semibold theme-text mb-3",children:"Workflow Statistics"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-semibold theme-text",children:D}),e.jsx("div",{className:"text-xs theme-text-secondary",children:"Total Steps"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"text-2xl font-semibold theme-text",children:[le,"h"]}),e.jsx("div",{className:"text-xs theme-text-secondary",children:"Est. Duration"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-semibold theme-text",children:de}),e.jsx("div",{className:"text-xs theme-text-secondary",children:"Escalation Points"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-semibold theme-text",children:E}),e.jsx("div",{className:"text-xs theme-text-secondary",children:"Notification Triggers"})]})]})]}),e.jsxs("div",{className:"card",children:[e.jsx("h3",{className:"text-sm font-semibold theme-text mb-3",children:"Execution Preview"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"theme-text-secondary",children:["Day 1: Requester submits â†’ ",((z=F.steps[0])==null?void 0:z.role)||"HR"," receives"]}),F.steps.slice(0,6).map((O,P)=>{var re;const Z=(re=F.steps[P+1])==null?void 0:re.role;return e.jsxs("div",{className:"theme-text-secondary",children:["Day ",P+2,": ",O.role," approves â†’ ",Z?`${Z} receives`:"Request Complete âœ“"]},O.id)}),F.steps.length>6&&e.jsx("div",{className:"theme-text-secondary",children:"â€¦"})]}),e.jsxs("div",{className:"mt-4 pt-4 border-t theme-border",children:[e.jsx("div",{className:"text-xs theme-text-secondary mb-1",children:"Scenarios"}),e.jsx("div",{className:"text-sm theme-text-secondary",children:"âœ… Happy path â€¢ âŒ Rejection â€¢ â±ï¸ Escalation â€¢ ðŸ”„ Send-back"})]})]})]})]})]})}function G8(t){if(!t)return"-";try{return new Date(t).toLocaleString()}catch{return"-"}}function Y8(t,s){const a=window.URL.createObjectURL(t),r=document.createElement("a");r.href=a,r.download=s,document.body.appendChild(r),r.click(),r.remove(),window.URL.revokeObjectURL(a)}function Z8(){const t=Je(),{id:s}=Ga(),[a,r]=y.useState(!0),[n,i]=y.useState(null),[l,c]=y.useState(null);y.useEffect(()=>{(async()=>{try{r(!0);const[m,f]=await Promise.all([Gt.get(s),Gt.history(s)]);i(m.data.data),c(f.data.data)}catch{_.error("Failed to load workflow history"),t("/approval-workflow/workflows")}finally{r(!1)}})()},[s,t]);const o=async()=>{try{const u=await Gt.exportJSON(s);Y8(u.data,`workflow_${s}.json`)}catch{_.error("Failed to export workflow JSON")}};if(a)return e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"theme-text-secondary",children:"Loading historyâ€¦"})});const d=(n==null?void 0:n.workflowName)||(n==null?void 0:n.name)||"Workflow",x=(n==null?void 0:n.versionLabel)||`v${(n==null?void 0:n.versionMajor)||1}.${(n==null?void 0:n.versionMinor)||0}`;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col gap-3 md:flex-row md:items-center md:justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{className:"btn-outline",onClick:()=>t("/approval-workflow/workflows"),"aria-label":"Back",children:e.jsx(xt,{size:16})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-semibold theme-text",children:"Workflow History"}),e.jsxs("p",{className:"text-sm theme-text-secondary",children:[d," â€¢ ",e.jsx("span",{className:"font-mono",children:x})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{className:"btn-outline flex items-center gap-2",onClick:o,children:[e.jsx(Mt,{size:16}),"Export JSON"]}),e.jsx("button",{className:"btn-primary",onClick:()=>t(`/approval-workflow/workflows/${s}/edit`),children:"Open Builder"})]})]}),e.jsx("div",{className:"card",children:e.jsx("div",{className:"text-sm theme-text-secondary",children:"Versioning entries are recorded in the audit trail. Rollback can be added once snapshot storage is enabled."})}),e.jsxs("div",{className:"card p-0",children:[e.jsxs("div",{className:"p-5 border-b theme-border",children:[e.jsx("div",{className:"text-sm font-semibold theme-text",children:"Audit Trail"}),e.jsxs("div",{className:"text-xs theme-text-secondary",children:[((l==null?void 0:l.auditTrail)||[]).length," event(s)"]})]}),e.jsx("div",{className:"divide-y theme-border",children:((l==null?void 0:l.auditTrail)||[]).length===0?e.jsx("div",{className:"p-6 theme-text-secondary text-sm",children:"No audit entries found."}):(l.auditTrail||[]).slice().reverse().map((u,m)=>{var f;return e.jsxs("div",{className:"p-5",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-start md:justify-between gap-2",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium theme-text",children:u.action}),e.jsxs("div",{className:"text-sm theme-text-secondary",children:[G8(u.timestamp)," â€¢ ",u.performedByEmail||((f=u.performedBy)==null?void 0:f.email)||"Unknown"]})]}),e.jsxs("div",{className:"text-xs theme-text-secondary font-mono",children:["#",(l.auditTrail||[]).length-m]})]}),u.changes?e.jsxs("div",{className:"mt-3 rounded-lg border theme-border p-3",children:[e.jsx("div",{className:"text-xs theme-text-secondary mb-2",children:"Changes"}),e.jsx("pre",{className:"text-xs theme-text whitespace-pre-wrap",children:JSON.stringify(u.changes,null,2)})]}):null]},m)})})]})]})}function J8(){const t=Je(),{id:s}=Ga(),[a,r]=y.useState(!0),[n,i]=y.useState(null);if(y.useEffect(()=>{(async()=>{try{r(!0);const o=await Gt.get(s);i(o.data.data)}catch{_.error("Failed to load workflow analytics"),t("/approval-workflow/workflows")}finally{r(!1)}})()},[s,t]),a)return e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"theme-text-secondary",children:"Loading analyticsâ€¦"})});const l=(n==null?void 0:n.workflowName)||(n==null?void 0:n.name)||"Workflow";return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{className:"btn-outline",onClick:()=>t("/approval-workflow/workflows"),"aria-label":"Back",children:e.jsx(xt,{size:16})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-semibold theme-text",children:"Workflow Analytics"}),e.jsx("p",{className:"text-sm theme-text-secondary",children:l})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"text-sm theme-text-secondary",children:"Approval Rate"}),e.jsx("div",{className:"text-2xl font-semibold theme-text",children:"â€”"}),e.jsx("div",{className:"text-xs theme-text-secondary mt-1",children:"Coming soon"})]}),e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"text-sm theme-text-secondary",children:"Average Time"}),e.jsx("div",{className:"text-2xl font-semibold theme-text",children:"â€”"}),e.jsx("div",{className:"text-xs theme-text-secondary mt-1",children:"Coming soon"})]}),e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"text-sm theme-text-secondary",children:"Bottleneck Step"}),e.jsx("div",{className:"text-2xl font-semibold theme-text",children:"â€”"}),e.jsx("div",{className:"text-xs theme-text-secondary mt-1",children:"Coming soon"})]}),e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"text-sm theme-text-secondary",children:"SLA Breach Rate"}),e.jsx("div",{className:"text-2xl font-semibold theme-text",children:"â€”"}),e.jsx("div",{className:"text-xs theme-text-secondary mt-1",children:"Coming soon"})]})]}),e.jsxs("div",{className:"card",children:[e.jsx("h2",{className:"text-lg font-semibold theme-text",children:"Notes"}),e.jsx("p",{className:"text-sm theme-text-secondary mt-2",children:"This UI is wired for analytics navigation. Once approval instances and timings are unified across entity types, we can surface approval rates, step-level throughput, and SLA breach trends here."})]})]})}const X8=()=>{const[t,s]=y.useState(!0),[a,r]=y.useState([]),[n,i]=y.useState(!1),[l,c]=y.useState(null),[o,d]=y.useState({name:"",entityType:"leave_request",conditions:[],approvers:[]});y.useEffect(()=>{x()},[]);const x=async()=>{try{s(!0);const g=await J.get("/approval-workflow/matrices");r(g.data.data||[])}catch{_.error("Failed to fetch approval matrices")}finally{s(!1)}},u=async g=>{var h,p;g.preventDefault();try{l?(await J.put(`/approval-workflow/matrices/${l._id}`,o),_.success("Approval matrix updated successfully")):(await J.post("/approval-workflow/matrices",o),_.success("Approval matrix created successfully")),i(!1),c(null),f(),x()}catch(j){_.error(((p=(h=j.response)==null?void 0:h.data)==null?void 0:p.message)||"Failed to save approval matrix")}},m=async g=>{if(window.confirm("Are you sure you want to delete this matrix?"))try{await J.delete(`/approval-workflow/matrices/${g}`),_.success("Approval matrix deleted successfully"),x()}catch{_.error("Failed to delete approval matrix")}},f=()=>{d({name:"",entityType:"leave_request",conditions:[],approvers:[]})};return t?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"text-gray-400",children:"Loading..."})}):e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-white",children:"Approval Matrix"}),e.jsxs("button",{onClick:()=>{f(),c(null),i(!0)},className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:[e.jsx(qe,{size:20}),"Add Matrix"]})]}),e.jsx("div",{className:"bg-gray-800 rounded-lg overflow-hidden",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-300",children:"Name"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-300",children:"Entity Type"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-300",children:"Conditions"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-300",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-700",children:a.map(g=>{var h;return e.jsxs("tr",{className:"hover:bg-gray-750",children:[e.jsx("td",{className:"px-4 py-3 text-sm text-gray-300",children:g.name}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-300",children:g.entityType}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-300",children:((h=g.conditions)==null?void 0:h.length)||0}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>{c(g),d({name:g.name||"",entityType:g.entityType||"leave_request",conditions:g.conditions||[],approvers:g.approvers||[]}),i(!0)},className:"p-1 text-blue-400 hover:text-blue-300",children:e.jsx(ya,{size:16})}),e.jsx("button",{onClick:()=>m(g._id),className:"p-1 text-red-400 hover:text-red-300",children:e.jsx(kt,{size:16})})]})})]},g._id)})})]})}),n&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 w-full max-w-2xl",children:[e.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:l?"Edit Approval Matrix":"Create Approval Matrix"}),e.jsxs("form",{onSubmit:u,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Name"}),e.jsx("input",{type:"text",name:"name",value:o.name,onChange:g=>d(h=>({...h,name:g.target.value})),required:!0,className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Entity Type"}),e.jsxs("select",{name:"entityType",value:o.entityType,onChange:g=>d(h=>({...h,entityType:g.target.value})),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white",children:[e.jsx("option",{value:"leave_request",children:"Leave Request"}),e.jsx("option",{value:"leave_encashment",children:"Leave Encashment"})]})]}),e.jsxs("div",{className:"flex gap-3 justify-end",children:[e.jsx("button",{type:"button",onClick:()=>{i(!1),c(null),f()},className:"px-4 py-2 bg-gray-700 text-white rounded-lg hover:bg-gray-600",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:l?"Update":"Create"})]})]})]})})]})},K8=()=>{const[t,s]=y.useState(!0),[a,r]=y.useState([]),[n,i]=y.useState(!1),[l,c]=y.useState(null),[o,d]=y.useState({delegatorId:"",delegateId:"",entityType:"leave_request",startDate:"",endDate:"",isActive:!0});y.useEffect(()=>{x()},[]);const x=async()=>{try{s(!0);const h=await J.get("/approval-workflow/delegations");r(h.data.data||[])}catch{_.error("Failed to fetch delegations")}finally{s(!1)}},u=h=>{const{name:p,value:j,type:v,checked:w}=h.target;d(b=>({...b,[p]:v==="checkbox"?w:j}))},m=async h=>{var p,j;h.preventDefault();try{l?(await J.put(`/approval-workflow/delegations/${l._id}`,o),_.success("Delegation updated successfully")):(await J.post("/approval-workflow/delegations",o),_.success("Delegation created successfully")),i(!1),c(null),g(),x()}catch(v){_.error(((j=(p=v.response)==null?void 0:p.data)==null?void 0:j.message)||"Failed to save delegation")}},f=async h=>{if(window.confirm("Are you sure you want to delete this delegation?"))try{await J.delete(`/approval-workflow/delegations/${h}`),_.success("Delegation deleted successfully"),x()}catch{_.error("Failed to delete delegation")}},g=()=>{d({delegatorId:"",delegateId:"",entityType:"leave_request",startDate:"",endDate:"",isActive:!0})};return t?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"text-gray-400",children:"Loading..."})}):e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-white",children:"Approval Delegations"}),e.jsxs("button",{onClick:()=>{g(),c(null),i(!0)},className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:[e.jsx(qe,{size:20}),"Add Delegation"]})]}),e.jsx("div",{className:"bg-gray-800 rounded-lg overflow-hidden",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-300",children:"Delegator"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-300",children:"Delegate"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-300",children:"Entity Type"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-300",children:"Start Date"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-300",children:"End Date"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-300",children:"Status"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-300",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-700",children:a.map(h=>{var p,j;return e.jsxs("tr",{className:"hover:bg-gray-750",children:[e.jsx("td",{className:"px-4 py-3 text-sm text-gray-300",children:h.delegatorName||((p=h.delegator)==null?void 0:p.name)||"-"}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-300",children:h.delegateName||((j=h.delegate)==null?void 0:j.name)||"-"}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-300",children:h.entityType}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-300",children:h.startDate?new Date(h.startDate).toLocaleDateString():"-"}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-300",children:h.endDate?new Date(h.endDate).toLocaleDateString():"-"}),e.jsx("td",{className:"px-4 py-3",children:h.isActive?e.jsx("span",{className:"text-green-400",children:"Active"}):e.jsx("span",{className:"text-red-400",children:"Inactive"})}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>{c(h),d({delegatorId:h.delegatorId||"",delegateId:h.delegateId||"",entityType:h.entityType||"leave_request",startDate:h.startDate?new Date(h.startDate).toISOString().split("T")[0]:"",endDate:h.endDate?new Date(h.endDate).toISOString().split("T")[0]:"",isActive:h.isActive!==void 0?h.isActive:!0}),i(!0)},className:"p-1 text-blue-400 hover:text-blue-300",children:e.jsx(ya,{size:16})}),e.jsx("button",{onClick:()=>f(h._id),className:"p-1 text-red-400 hover:text-red-300",children:e.jsx(kt,{size:16})})]})})]},h._id)})})]})}),n&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 w-full max-w-2xl",children:[e.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:l?"Edit Delegation":"Create Delegation"}),e.jsxs("form",{onSubmit:m,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Delegator ID"}),e.jsx("input",{type:"text",name:"delegatorId",value:o.delegatorId,onChange:u,required:!0,className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Delegate ID"}),e.jsx("input",{type:"text",name:"delegateId",value:o.delegateId,onChange:u,required:!0,className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Entity Type"}),e.jsxs("select",{name:"entityType",value:o.entityType,onChange:u,className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white",children:[e.jsx("option",{value:"leave_request",children:"Leave Request"}),e.jsx("option",{value:"leave_encashment",children:"Leave Encashment"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Start Date"}),e.jsx("input",{type:"date",name:"startDate",value:o.startDate,onChange:u,required:!0,className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"End Date"}),e.jsx("input",{type:"date",name:"endDate",value:o.endDate,onChange:u,required:!0,className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",name:"isActive",checked:o.isActive,onChange:u,className:"w-4 h-4"}),e.jsx("label",{className:"text-sm font-medium text-gray-300",children:"Active"})]}),e.jsxs("div",{className:"flex gap-3 justify-end",children:[e.jsx("button",{type:"button",onClick:()=>{i(!1),c(null),g()},className:"px-4 py-2 bg-gray-700 text-white rounded-lg hover:bg-gray-600",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:l?"Update":"Create"})]})]})]})})]})},u0=()=>{const[t,s]=y.useState(!0),[a,r]=y.useState([]),[n,i]=y.useState({entityType:"",status:"pending"});y.useEffect(()=>{l()},[n]);const l=async()=>{try{s(!0);const o={};n.entityType&&(o.entityType=n.entityType),n.status&&(o.status=n.status);const d=await J.get("/approval/pending",{params:o});r(d.data.data||[])}catch{_.error("Failed to fetch pending approvals")}finally{s(!1)}},c=async(o,d,x,u="")=>{var m,f;try{o==="leave_request"?await J.post(`/leave/${d}/${x}`,{rejectionReason:u}):await J.post(`/approval-workflow/${o}/${d}/approve`,{action:x,comments:u}),_.success(`Request ${x==="approve"?"approved":"rejected"} successfully`),l()}catch(g){_.error(`Failed to ${x} request: ${((f=(m=g.response)==null?void 0:m.data)==null?void 0:f.message)||g.message}`)}};return t?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"text-gray-400",children:"Loading..."})}):e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-white",children:"Pending Approvals"}),e.jsx("div",{className:"flex items-center gap-2 text-gray-400",children:e.jsx(Be,{size:24})})]}),e.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 mb-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(Vs,{size:20,className:"text-gray-400"}),e.jsx("h2",{className:"text-lg font-semibold text-white",children:"Filters"})]}),e.jsx("div",{className:"grid grid-cols-2 gap-4",children:e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Entity Type"}),e.jsxs("select",{name:"entityType",value:n.entityType,onChange:o=>i(d=>({...d,entityType:o.target.value})),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white",children:[e.jsx("option",{value:"",children:"All"}),e.jsx("option",{value:"leave_request",children:"Leave Request"}),e.jsx("option",{value:"leave_encashment",children:"Leave Encashment"})]})]})})]}),e.jsxs("div",{className:"bg-gray-800 rounded-lg overflow-hidden",children:[e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-300",children:"Type"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-300",children:"Employee"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-300",children:"Details"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-300",children:"Request Date"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-300",children:"SLA Deadline"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-300",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-700",children:a.map(o=>{var d;return e.jsxs("tr",{className:"hover:bg-gray-750",children:[e.jsx("td",{className:"px-4 py-3 text-sm text-gray-300",children:o.entityType}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-300",children:o.employeeName||((d=o.employee)==null?void 0:d.name)||"-"}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-300",children:o.details||o.description||"-"}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-300",children:new Date(o.createdAt).toLocaleDateString()}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-300",children:o.slaDeadline?new Date(o.slaDeadline).toLocaleDateString():"-"}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>c(o.entityType,o.entityId,"approve"),className:"flex items-center gap-1 px-3 py-1 bg-green-600 text-white rounded hover:bg-green-700",children:[e.jsx(Te,{size:16}),"Approve"]}),e.jsxs("button",{onClick:()=>c(o.entityType,o.entityId,"reject"),className:"flex items-center gap-1 px-3 py-1 bg-red-600 text-white rounded hover:bg-red-700",children:[e.jsx(Qe,{size:16}),"Reject"]})]})})]},o._id)})})]}),a.length===0&&e.jsx("div",{className:"text-center py-8 text-gray-400",children:"No pending approvals"})]})]})},Q8=()=>{var i,l,c;const[t,s]=y.useState(!0),[a,r]=y.useState(null);y.useEffect(()=>{n()},[]);const n=async()=>{try{s(!0);const o=await J.get("/approval-workflow/sla");r(o.data)}catch{_.error("Failed to fetch SLA monitoring data")}finally{s(!1)}};return t?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"text-gray-400",children:"Loading..."})}):e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-white",children:"SLA Monitoring"}),e.jsx("div",{className:"flex items-center gap-2 text-gray-400",children:e.jsx(Be,{size:24})})]}),a&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6",children:[e.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-gray-400 text-sm",children:"Total Pending"}),e.jsx(Be,{size:20,className:"text-yellow-400"})]}),e.jsx("div",{className:"text-2xl font-bold text-white",children:((i=a.summary)==null?void 0:i.totalPending)||0})]}),e.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-gray-400 text-sm",children:"At Risk"}),e.jsx(Jt,{size:20,className:"text-red-400"})]}),e.jsx("div",{className:"text-2xl font-bold text-white",children:((l=a.summary)==null?void 0:l.atRisk)||0})]}),e.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-gray-400 text-sm",children:"On Time"}),e.jsx(Te,{size:20,className:"text-green-400"})]}),e.jsx("div",{className:"text-2xl font-bold text-white",children:((c=a.summary)==null?void 0:c.onTime)||0})]})]}),a&&a.items&&e.jsx("div",{className:"bg-gray-800 rounded-lg overflow-hidden",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-300",children:"Entity Type"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-300",children:"Employee"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-300",children:"Request Date"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-300",children:"SLA Deadline"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-300",children:"Status"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-300",children:"Time Remaining"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-700",children:a.items.map((o,d)=>{var x;return e.jsxs("tr",{className:"hover:bg-gray-750",children:[e.jsx("td",{className:"px-4 py-3 text-sm text-gray-300",children:o.entityType}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-300",children:o.employeeName||((x=o.employee)==null?void 0:x.name)||"-"}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-300",children:new Date(o.requestDate).toLocaleDateString()}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-300",children:o.slaDeadline?new Date(o.slaDeadline).toLocaleDateString():"-"}),e.jsx("td",{className:"px-4 py-3",children:o.status==="at_risk"?e.jsxs("span",{className:"flex items-center gap-1 text-red-400",children:[e.jsx(Jt,{size:16}),"At Risk"]}):e.jsxs("span",{className:"flex items-center gap-1 text-green-400",children:[e.jsx(Te,{size:16}),"On Time"]})}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-300",children:o.timeRemaining||"-"})]},d)})})]})})]})},eR=()=>{const[t,s]=y.useState(!0),[a,r]=y.useState([]),[n,i]=y.useState(!1),[l,c]=y.useState(null),[o,d]=y.useState({deviceName:"",deviceType:"zkteco",ipAddress:"",port:4370,location:"",serialNumber:"",isActive:!0});y.useEffect(()=>{x()},[]);const x=async()=>{try{s(!0);const p=await J.get("/biometric/devices");r(p.data.data||[])}catch{_.error("Failed to fetch devices")}finally{s(!1)}},u=p=>{const{name:j,value:v,type:w,checked:b}=p.target;d(A=>({...A,[j]:w==="checkbox"?b:w==="number"?parseInt(v)||0:v}))},m=async p=>{var j,v;p.preventDefault();try{l?(await J.put(`/biometric/devices/${l._id}`,o),_.success("Device updated successfully")):(await J.post("/biometric/devices",o),_.success("Device created successfully")),i(!1),c(null),h(),x()}catch(w){_.error(((v=(j=w.response)==null?void 0:j.data)==null?void 0:v.message)||"Failed to save device")}},f=async p=>{if(window.confirm("Are you sure you want to delete this device?"))try{await J.delete(`/biometric/devices/${p}`),_.success("Device deleted successfully"),x()}catch{_.error("Failed to delete device")}},g=async p=>{try{(await J.post(`/biometric/devices/${p}/test`)).data.success?_.success("Connection test successful"):_.error("Connection test failed"),x()}catch{_.error("Connection test failed")}},h=()=>{d({deviceName:"",deviceType:"zkteco",ipAddress:"",port:4370,location:"",serialNumber:"",isActive:!0})};return t?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"text-gray-400",children:"Loading..."})}):e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-white",children:"Biometric Device Management"}),e.jsxs("button",{onClick:()=>{h(),c(null),i(!0)},className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:[e.jsx(qe,{size:20}),"Add Device"]})]}),e.jsx("div",{className:"bg-gray-800 rounded-lg overflow-hidden",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-300",children:"Device Name"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-300",children:"Type"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-300",children:"IP Address"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-300",children:"Location"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-300",children:"Status"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-300",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-700",children:a.map(p=>e.jsxs("tr",{className:"hover:bg-gray-750",children:[e.jsx("td",{className:"px-4 py-3 text-sm text-gray-300",children:p.deviceName}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-300",children:p.deviceType}),e.jsxs("td",{className:"px-4 py-3 text-sm text-gray-300",children:[p.ipAddress,":",p.port]}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-300",children:p.location}),e.jsx("td",{className:"px-4 py-3",children:p.isConnected?e.jsxs("span",{className:"flex items-center gap-1 text-green-400",children:[e.jsx(Vg,{size:16}),"Connected"]}):e.jsxs("span",{className:"flex items-center gap-1 text-red-400",children:[e.jsx(Hg,{size:16}),"Disconnected"]})}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>g(p._id),className:"p-1 text-yellow-400 hover:text-yellow-300",title:"Test Connection",children:e.jsx(v0,{size:16})}),e.jsx("button",{onClick:()=>{c(p),d({deviceName:p.deviceName||"",deviceType:p.deviceType||"zkteco",ipAddress:p.ipAddress||"",port:p.port||4370,location:p.location||"",serialNumber:p.serialNumber||"",isActive:p.isActive!==void 0?p.isActive:!0}),i(!0)},className:"p-1 text-blue-400 hover:text-blue-300",children:e.jsx(ya,{size:16})}),e.jsx("button",{onClick:()=>f(p._id),className:"p-1 text-red-400 hover:text-red-300",children:e.jsx(kt,{size:16})})]})})]},p._id))})]})}),n&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 w-full max-w-2xl",children:[e.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:l?"Edit Device":"Add Device"}),e.jsxs("form",{onSubmit:m,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Device Name"}),e.jsx("input",{type:"text",name:"deviceName",value:o.deviceName,onChange:u,required:!0,className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Device Type"}),e.jsxs("select",{name:"deviceType",value:o.deviceType,onChange:u,className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white",children:[e.jsx("option",{value:"zkteco",children:"ZKTeco"}),e.jsx("option",{value:"essl",children:"eSSL"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Port"}),e.jsx("input",{type:"number",name:"port",value:o.port,onChange:u,required:!0,className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"IP Address"}),e.jsx("input",{type:"text",name:"ipAddress",value:o.ipAddress,onChange:u,required:!0,className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Location"}),e.jsx("input",{type:"text",name:"location",value:o.location,onChange:u,className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Serial Number"}),e.jsx("input",{type:"text",name:"serialNumber",value:o.serialNumber,onChange:u,className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",name:"isActive",checked:o.isActive,onChange:u,className:"w-4 h-4"}),e.jsx("label",{className:"text-sm font-medium text-gray-300",children:"Active"})]}),e.jsxs("div",{className:"flex gap-3 justify-end",children:[e.jsx("button",{type:"button",onClick:()=>{i(!1),c(null),h()},className:"px-4 py-2 bg-gray-700 text-white rounded-lg hover:bg-gray-600",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:l?"Update":"Create"})]})]})]})})]})},tR=()=>{const[t,s]=y.useState(!0),[a,r]=y.useState([]),[n,i]=y.useState(""),[l,c]=y.useState(!1),[o,d]=y.useState(null);y.useEffect(()=>{x()},[]);const x=async()=>{try{s(!0);const m=await J.get("/biometric/devices");r(m.data.data||[])}catch{_.error("Failed to fetch devices")}finally{s(!1)}},u=async()=>{var m,f;if(!n){_.error("Please select a device");return}try{c(!0);const g=await J.post(`/biometric/devices/${n}/sync-employees`);d(g.data),_.success("Employee sync initiated successfully")}catch(g){_.error(((f=(m=g.response)==null?void 0:m.data)==null?void 0:f.message)||"Failed to sync employees")}finally{c(!1)}};return t?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"text-gray-400",children:"Loading..."})}):e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-white",children:"Employee Sync to Devices"}),e.jsx("p",{className:"text-gray-400 mt-2",children:"Sync employees to biometric devices"})]}),e.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 mb-6",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Select Device"}),e.jsxs("select",{value:n,onChange:m=>i(m.target.value),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white",children:[e.jsx("option",{value:"",children:"Select a device"}),a.map(m=>e.jsxs("option",{value:m._id,children:[m.deviceName," - ",m.location]},m._id))]})]}),e.jsxs("button",{onClick:u,disabled:l||!n,className:"flex items-center gap-2 px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50",children:[e.jsx(Xt,{size:20,className:l?"animate-spin":""}),l?"Syncing...":"Sync Employees"]})]}),o&&e.jsxs("div",{className:"bg-gray-800 rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(Ue,{size:20,className:"text-gray-400"}),e.jsx("h2",{className:"text-lg font-semibold text-white",children:"Sync Status"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-300",children:[e.jsx(Te,{size:16,className:"text-green-400"}),e.jsxs("span",{children:["Total Employees: ",o.totalEmployees||0]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-gray-300",children:[e.jsx(Te,{size:16,className:"text-green-400"}),e.jsxs("span",{children:["Synced: ",o.synced||0]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-gray-300",children:[e.jsx(Te,{size:16,className:"text-yellow-400"}),e.jsxs("span",{children:["Failed: ",o.failed||0]})]})]})]})]})},sR=()=>{const[t,s]=y.useState(!0),[a,r]=y.useState([]),[n,i]=y.useState(""),[l,c]=y.useState(!1),[o,d]=y.useState({startDate:new Date().toISOString().split("T")[0],endDate:new Date().toISOString().split("T")[0]});y.useEffect(()=>{x()},[]);const x=async()=>{try{s(!0);const m=await J.get("/biometric/devices");r(m.data.data||[])}catch{_.error("Failed to fetch devices")}finally{s(!1)}},u=async()=>{var m,f;if(!n){_.error("Please select a device");return}try{c(!0);const g=await J.post(`/biometric/devices/${n}/pull-attendance`,{startDate:o.startDate,endDate:o.endDate});_.success(`Pulled ${g.data.recordsPulled||0} attendance records`)}catch(g){_.error(((f=(m=g.response)==null?void 0:m.data)==null?void 0:f.message)||"Failed to pull attendance")}finally{c(!1)}};return t?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"text-gray-400",children:"Loading..."})}):e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-white",children:"Pull Attendance Data"}),e.jsx("p",{className:"text-gray-400 mt-2",children:"Pull attendance data from biometric devices"})]}),e.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 mb-6",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Select Device"}),e.jsxs("select",{value:n,onChange:m=>i(m.target.value),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white",children:[e.jsx("option",{value:"",children:"Select a device"}),a.map(m=>e.jsxs("option",{value:m._id,children:[m.deviceName," - ",m.location]},m._id))]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Start Date"}),e.jsx("input",{type:"date",value:o.startDate,onChange:m=>d(f=>({...f,startDate:m.target.value})),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"End Date"}),e.jsx("input",{type:"date",value:o.endDate,onChange:m=>d(f=>({...f,endDate:m.target.value})),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white"})]})]}),e.jsxs("button",{onClick:u,disabled:l||!n,className:"flex items-center gap-2 px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50",children:[e.jsx(Mt,{size:20,className:l?"animate-spin":""}),l?"Pulling...":"Pull Attendance"]})]})]})},aR=()=>{const[t,s]=y.useState(!0),[a,r]=y.useState([]),[n,i]=y.useState({deviceId:"",syncType:"",status:""});y.useEffect(()=>{l()},[n]);const l=async()=>{try{s(!0);const o={};n.deviceId&&(o.deviceId=n.deviceId),n.syncType&&(o.syncType=n.syncType),n.status&&(o.status=n.status);const d=await J.get("/biometric/sync-logs",{params:o});r(d.data.data||[])}catch{_.error("Failed to fetch sync logs")}finally{s(!1)}},c=o=>{switch(o){case"success":return e.jsx(Te,{size:16,className:"text-green-400"});case"failed":return e.jsx(Qe,{size:16,className:"text-red-400"});default:return e.jsx(Be,{size:16,className:"text-yellow-400"})}};return t?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"text-gray-400",children:"Loading..."})}):e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-white",children:"Sync Logs"}),e.jsx("div",{className:"flex items-center gap-2 text-gray-400",children:e.jsx(st,{size:24})})]}),e.jsx("div",{className:"bg-gray-800 rounded-lg p-4 mb-6",children:e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Device"}),e.jsx("input",{type:"text",name:"deviceId",value:n.deviceId,onChange:o=>i(d=>({...d,deviceId:o.target.value})),placeholder:"Filter by device",className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Sync Type"}),e.jsxs("select",{name:"syncType",value:n.syncType,onChange:o=>i(d=>({...d,syncType:o.target.value})),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white",children:[e.jsx("option",{value:"",children:"All"}),e.jsx("option",{value:"employee",children:"Employee Sync"}),e.jsx("option",{value:"attendance",children:"Attendance Pull"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Status"}),e.jsxs("select",{name:"status",value:n.status,onChange:o=>i(d=>({...d,status:o.target.value})),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white",children:[e.jsx("option",{value:"",children:"All"}),e.jsx("option",{value:"success",children:"Success"}),e.jsx("option",{value:"failed",children:"Failed"}),e.jsx("option",{value:"pending",children:"Pending"})]})]})]})}),e.jsxs("div",{className:"bg-gray-800 rounded-lg overflow-hidden",children:[e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-300",children:"Device"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-300",children:"Sync Type"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-300",children:"Status"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-300",children:"Records"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-300",children:"Sync Date"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-300",children:"Message"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-700",children:a.map(o=>{var d;return e.jsxs("tr",{className:"hover:bg-gray-750",children:[e.jsx("td",{className:"px-4 py-3 text-sm text-gray-300",children:o.deviceName||((d=o.device)==null?void 0:d.deviceName)||"-"}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-300",children:o.syncType}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-center gap-1",children:[c(o.status),e.jsx("span",{className:"text-sm text-gray-300",children:o.status})]})}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-300",children:o.recordsProcessed||0}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-300",children:new Date(o.syncDate).toLocaleString()}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-300",children:o.message||"-"})]},o._id)})})]}),a.length===0&&e.jsx("div",{className:"text-center py-8 text-gray-400",children:"No sync logs found"})]})]})},rR=()=>{const[t,s]=y.useState(!0),[a,r]=y.useState([]),[n,i]=y.useState(!1),[l,c]=y.useState(null),[o,d]=y.useState({connectionName:"",host:"",port:8e3,client:"",username:"",password:"",systemNumber:"",isActive:!0});y.useEffect(()=>{x()},[]);const x=async()=>{try{s(!0);const p=await J.get("/sap/connections");r(p.data.data||[])}catch{_.error("Failed to fetch SAP connections")}finally{s(!1)}},u=p=>{const{name:j,value:v,type:w,checked:b}=p.target;d(A=>({...A,[j]:w==="checkbox"?b:w==="number"?parseInt(v)||0:v}))},m=async p=>{var j,v;p.preventDefault();try{l?(await J.put(`/sap/connections/${l._id}`,o),_.success("SAP connection updated successfully")):(await J.post("/sap/connections",o),_.success("SAP connection created successfully")),i(!1),c(null),h(),x()}catch(w){_.error(((v=(j=w.response)==null?void 0:j.data)==null?void 0:v.message)||"Failed to save SAP connection")}},f=async p=>{if(window.confirm("Are you sure you want to delete this connection?"))try{await J.delete(`/sap/connections/${p}`),_.success("SAP connection deleted successfully"),x()}catch{_.error("Failed to delete SAP connection")}},g=async p=>{try{(await J.post(`/sap/connections/${p}/test`)).data.success?_.success("Connection test successful"):_.error("Connection test failed"),x()}catch{_.error("Connection test failed")}},h=()=>{d({connectionName:"",host:"",port:8e3,client:"",username:"",password:"",systemNumber:"",isActive:!0})};return t?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"text-gray-400",children:"Loading..."})}):e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-white",children:"SAP Connection Configuration"}),e.jsxs("button",{onClick:()=>{h(),c(null),i(!0)},className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:[e.jsx(qe,{size:20}),"Add Connection"]})]}),e.jsx("div",{className:"bg-gray-800 rounded-lg overflow-hidden",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-300",children:"Connection Name"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-300",children:"Host"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-300",children:"Client"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-300",children:"Status"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-300",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-700",children:a.map(p=>e.jsxs("tr",{className:"hover:bg-gray-750",children:[e.jsx("td",{className:"px-4 py-3 text-sm text-gray-300",children:p.connectionName}),e.jsxs("td",{className:"px-4 py-3 text-sm text-gray-300",children:[p.host,":",p.port]}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-300",children:p.client}),e.jsx("td",{className:"px-4 py-3",children:p.status==="connected"?e.jsxs("span",{className:"flex items-center gap-1 text-green-400",children:[e.jsx(Te,{size:16}),"Connected"]}):e.jsxs("span",{className:"flex items-center gap-1 text-red-400",children:[e.jsx(Qe,{size:16}),"Disconnected"]})}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>g(p._id),className:"p-1 text-yellow-400 hover:text-yellow-300",title:"Test Connection",children:e.jsx(v0,{size:16})}),e.jsx("button",{onClick:()=>{c(p),d({connectionName:p.connectionName||"",host:p.host||"",port:p.port||8e3,client:p.client||"",username:p.username||"",password:"",systemNumber:p.systemNumber||"",isActive:p.isActive!==void 0?p.isActive:!0}),i(!0)},className:"p-1 text-blue-400 hover:text-blue-300",children:e.jsx(ya,{size:16})}),e.jsx("button",{onClick:()=>f(p._id),className:"p-1 text-red-400 hover:text-red-300",children:e.jsx(kt,{size:16})})]})})]},p._id))})]})}),n&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:l?"Edit SAP Connection":"Add SAP Connection"}),e.jsxs("form",{onSubmit:m,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Connection Name"}),e.jsx("input",{type:"text",name:"connectionName",value:o.connectionName,onChange:u,required:!0,className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Host"}),e.jsx("input",{type:"text",name:"host",value:o.host,onChange:u,required:!0,className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Port"}),e.jsx("input",{type:"number",name:"port",value:o.port,onChange:u,required:!0,className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Client"}),e.jsx("input",{type:"text",name:"client",value:o.client,onChange:u,required:!0,className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"System Number"}),e.jsx("input",{type:"text",name:"systemNumber",value:o.systemNumber,onChange:u,className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Username"}),e.jsx("input",{type:"text",name:"username",value:o.username,onChange:u,required:!0,className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Password"}),e.jsx("input",{type:"password",name:"password",value:o.password,onChange:u,required:!l,className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",name:"isActive",checked:o.isActive,onChange:u,className:"w-4 h-4"}),e.jsx("label",{className:"text-sm font-medium text-gray-300",children:"Active"})]}),e.jsxs("div",{className:"flex gap-3 justify-end",children:[e.jsx("button",{type:"button",onClick:()=>{i(!1),c(null),h()},className:"px-4 py-2 bg-gray-700 text-white rounded-lg hover:bg-gray-600",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:l?"Update":"Create"})]})]})]})})]})},nR=()=>{const[t,s]=y.useState(!1),[a,r]=y.useState(null),[n,i]=y.useState(""),l=async()=>{var c,o;if(!n){_.error("Please select a connection");return}try{s(!0);const d=await J.post(`/sap/connections/${n}/sync-employees`);r(d.data),_.success("Employee sync initiated successfully")}catch(d){_.error(((o=(c=d.response)==null?void 0:c.data)==null?void 0:o.message)||"Failed to sync employees")}finally{s(!1)}};return e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-white",children:"Sync Employee Master Data"}),e.jsx("p",{className:"text-gray-400 mt-2",children:"Sync employee master data from SAP"})]}),e.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 mb-6",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Connection ID"}),e.jsx("input",{type:"text",value:n,onChange:c=>i(c.target.value),placeholder:"Enter SAP connection ID",className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white"})]}),e.jsxs("button",{onClick:l,disabled:t||!n,className:"flex items-center gap-2 px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50",children:[e.jsx(Xt,{size:20,className:t?"animate-spin":""}),t?"Syncing...":"Sync Employees"]})]}),a&&e.jsxs("div",{className:"bg-gray-800 rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(Ue,{size:20,className:"text-gray-400"}),e.jsx("h2",{className:"text-lg font-semibold text-white",children:"Sync Status"})]}),e.jsxs("div",{className:"space-y-2 text-gray-300",children:[e.jsxs("div",{children:["Total Records: ",a.totalRecords||0]}),e.jsxs("div",{children:["Synced: ",a.synced||0]}),e.jsxs("div",{children:["Failed: ",a.failed||0]})]})]})]})},iR=()=>{const[t,s]=y.useState(!1),[a,r]=y.useState(null),[n,i]=y.useState(""),l=async()=>{var c,o;if(!n){_.error("Please select a connection");return}try{s(!0);const d=await J.post(`/sap/connections/${n}/sync-leave-balance`);r(d.data),_.success("Leave balance sync initiated successfully")}catch(d){_.error(((o=(c=d.response)==null?void 0:c.data)==null?void 0:o.message)||"Failed to sync leave balances")}finally{s(!1)}};return e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-white",children:"Sync Leave Balances"}),e.jsx("p",{className:"text-gray-400 mt-2",children:"Sync leave balances from SAP"})]}),e.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 mb-6",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Connection ID"}),e.jsx("input",{type:"text",value:n,onChange:c=>i(c.target.value),placeholder:"Enter SAP connection ID",className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white"})]}),e.jsxs("button",{onClick:l,disabled:t||!n,className:"flex items-center gap-2 px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50",children:[e.jsx(Xt,{size:20,className:t?"animate-spin":""}),t?"Syncing...":"Sync Leave Balances"]})]}),a&&e.jsxs("div",{className:"bg-gray-800 rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(Oe,{size:20,className:"text-gray-400"}),e.jsx("h2",{className:"text-lg font-semibold text-white",children:"Sync Status"})]}),e.jsxs("div",{className:"space-y-2 text-gray-300",children:[e.jsxs("div",{children:["Total Records: ",a.totalRecords||0]}),e.jsxs("div",{children:["Synced: ",a.synced||0]}),e.jsxs("div",{children:["Failed: ",a.failed||0]})]})]})]})},lR=()=>{const[t,s]=y.useState(!1),[a,r]=y.useState(null),[n,i]=y.useState(""),[l,c]=y.useState({startDate:new Date().toISOString().split("T")[0],endDate:new Date().toISOString().split("T")[0]}),o=async()=>{var d,x;if(!n){_.error("Please select a connection");return}try{s(!0);const u=await J.post(`/sap/connections/${n}/sync-attendance`,{startDate:l.startDate,endDate:l.endDate});r(u.data),_.success("Attendance sync initiated successfully")}catch(u){_.error(((x=(d=u.response)==null?void 0:d.data)==null?void 0:x.message)||"Failed to sync attendance")}finally{s(!1)}};return e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-white",children:"Sync Attendance Data"}),e.jsx("p",{className:"text-gray-400 mt-2",children:"Sync attendance data from SAP"})]}),e.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 mb-6",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Connection ID"}),e.jsx("input",{type:"text",value:n,onChange:d=>i(d.target.value),placeholder:"Enter SAP connection ID",className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Start Date"}),e.jsx("input",{type:"date",value:l.startDate,onChange:d=>c(x=>({...x,startDate:d.target.value})),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"End Date"}),e.jsx("input",{type:"date",value:l.endDate,onChange:d=>c(x=>({...x,endDate:d.target.value})),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white"})]})]}),e.jsxs("button",{onClick:o,disabled:t||!n,className:"flex items-center gap-2 px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50",children:[e.jsx(Xt,{size:20,className:t?"animate-spin":""}),t?"Syncing...":"Sync Attendance"]})]}),a&&e.jsxs("div",{className:"bg-gray-800 rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(Be,{size:20,className:"text-gray-400"}),e.jsx("h2",{className:"text-lg font-semibold text-white",children:"Sync Status"})]}),e.jsxs("div",{className:"space-y-2 text-gray-300",children:[e.jsxs("div",{children:["Total Records: ",a.totalRecords||0]}),e.jsxs("div",{children:["Synced: ",a.synced||0]}),e.jsxs("div",{children:["Failed: ",a.failed||0]})]})]})]})},cR=()=>{const[t,s]=y.useState(!0),[a,r]=y.useState([]),[n,i]=y.useState({connectionId:"",syncType:"",status:""});y.useEffect(()=>{l()},[n]);const l=async()=>{try{s(!0);const o={};n.connectionId&&(o.connectionId=n.connectionId),n.syncType&&(o.syncType=n.syncType),n.status&&(o.status=n.status);const d=await J.get("/sap/sync-logs",{params:o});r(d.data.data||[])}catch{_.error("Failed to fetch sync logs")}finally{s(!1)}},c=o=>{switch(o){case"success":return e.jsx(Te,{size:16,className:"text-green-400"});case"failed":return e.jsx(Qe,{size:16,className:"text-red-400"});default:return e.jsx(Be,{size:16,className:"text-yellow-400"})}};return t?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"text-gray-400",children:"Loading..."})}):e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-white",children:"SAP Sync Logs"}),e.jsx("div",{className:"flex items-center gap-2 text-gray-400",children:e.jsx(st,{size:24})})]}),e.jsx("div",{className:"bg-gray-800 rounded-lg p-4 mb-6",children:e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Connection"}),e.jsx("input",{type:"text",name:"connectionId",value:n.connectionId,onChange:o=>i(d=>({...d,connectionId:o.target.value})),placeholder:"Filter by connection",className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Sync Type"}),e.jsxs("select",{name:"syncType",value:n.syncType,onChange:o=>i(d=>({...d,syncType:o.target.value})),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white",children:[e.jsx("option",{value:"",children:"All"}),e.jsx("option",{value:"employee",children:"Employee Sync"}),e.jsx("option",{value:"leave",children:"Leave Balance Sync"}),e.jsx("option",{value:"attendance",children:"Attendance Sync"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Status"}),e.jsxs("select",{name:"status",value:n.status,onChange:o=>i(d=>({...d,status:o.target.value})),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white",children:[e.jsx("option",{value:"",children:"All"}),e.jsx("option",{value:"success",children:"Success"}),e.jsx("option",{value:"failed",children:"Failed"}),e.jsx("option",{value:"pending",children:"Pending"})]})]})]})}),e.jsxs("div",{className:"bg-gray-800 rounded-lg overflow-hidden",children:[e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-300",children:"Connection"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-300",children:"Sync Type"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-300",children:"Status"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-300",children:"Records"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-300",children:"Sync Date"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-300",children:"Message"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-700",children:a.map(o=>{var d;return e.jsxs("tr",{className:"hover:bg-gray-750",children:[e.jsx("td",{className:"px-4 py-3 text-sm text-gray-300",children:o.connectionName||((d=o.connection)==null?void 0:d.connectionName)||"-"}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-300",children:o.syncType}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-center gap-1",children:[c(o.status),e.jsx("span",{className:"text-sm text-gray-300",children:o.status})]})}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-300",children:o.recordsProcessed||0}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-300",children:new Date(o.syncDate).toLocaleString()}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-300",children:o.message||"-"})]},o._id)})})]}),a.length===0&&e.jsx("div",{className:"text-center py-8 text-gray-400",children:"No sync logs found"})]})]})};function oR(){return e.jsx(Rb,{children:e.jsx(Fb,{children:e.jsxs(hg,{children:[e.jsx(qg,{position:"top-right",toastOptions:{duration:5e3,style:{background:"#1e293b",color:"#f1f5f9",border:"1px solid #334155"},success:{iconTheme:{primary:"#10b981",secondary:"#f1f5f9"}},error:{iconTheme:{primary:"#ef4444",secondary:"#f1f5f9"}}}}),e.jsxs(fg,{children:[e.jsx(pe,{path:"/login",element:e.jsx(cv,{})}),e.jsx(pe,{path:"/login/company-select",element:e.jsx(ov,{})}),e.jsx(pe,{path:"/login/super-admin",element:e.jsx(xv,{})}),e.jsx(pe,{path:"/login/old",element:e.jsx(lv,{})}),e.jsx(pe,{path:"/login/:companySlug",element:e.jsx(dv,{})}),e.jsx(pe,{path:"/forgot-password",element:e.jsx(uv,{})}),e.jsx(pe,{path:"/reset-password",element:e.jsx(mv,{})}),e.jsx(pe,{path:"/careers",element:e.jsx(Cx,{})}),e.jsx(pe,{path:"/jobs",element:e.jsx(Cx,{})}),e.jsx(pe,{path:"/candidate-documents",element:e.jsx(pv,{})}),e.jsx(pe,{path:"/public/upload-documents/:token",element:e.jsx(Av,{})}),e.jsx(pe,{path:"/",element:e.jsx(Pb,{})}),e.jsxs(pe,{path:"/*",element:e.jsx($s,{children:e.jsx(Ob,{})}),children:[e.jsx(pe,{path:"dashboard",element:e.jsx(Ev,{})}),e.jsx(pe,{path:"job-desk",element:e.jsx(Ax,{})}),e.jsx(pe,{path:"job-desk/:jobId/applicants",element:e.jsx(_x,{})}),e.jsx(pe,{path:"candidates/:candidateId/timeline",element:e.jsx(Fx,{})}),e.jsx(pe,{path:"employees",element:e.jsx(sh,{})}),e.jsx(pe,{path:"employees/add",element:e.jsx(Rv,{})}),e.jsx(pe,{path:"employees/bulk-upload",element:e.jsx(t3,{})}),e.jsx(pe,{path:"employees/:id/edit",element:e.jsx(Pv,{})}),e.jsx(pe,{path:"employees/:id",element:e.jsx(Iv,{})}),e.jsx(pe,{path:"employees/onboarding",element:e.jsx(Tx,{})}),e.jsx(pe,{path:"employees/offboarding",element:e.jsx(Rx,{})}),e.jsx(pe,{path:"leave",element:e.jsx(s3,{})}),e.jsx(pe,{path:"leave/apply",element:e.jsx(a3,{})}),e.jsx(pe,{path:"leave/balance",element:e.jsx(r3,{})}),e.jsx(pe,{path:"leave/calendar",element:e.jsx(n3,{})}),e.jsx(pe,{path:"attendance",element:e.jsx(Lu,{})}),e.jsx(pe,{path:"attendance/mark",element:e.jsx(i3,{})}),e.jsx(pe,{path:"attendance/reports",element:e.jsx(l3,{})}),e.jsx(pe,{path:"work-schedule/shift-templates",element:e.jsx(Ku,{})}),e.jsx(pe,{path:"work-schedule/rosters",element:e.jsx(Qu,{})}),e.jsx(pe,{path:"work-schedule/roster-calendar",element:e.jsx(em,{})}),e.jsx(pe,{path:"work-schedule/roster-change-requests",element:e.jsx(tm,{})}),e.jsx(pe,{path:"payroll",element:e.jsx(Mu,{})}),e.jsx(pe,{path:"payroll/generate",element:e.jsx(c3,{})}),e.jsx(pe,{path:"payroll/slips",element:e.jsx(o3,{})}),e.jsx(pe,{path:"administration/departments",element:e.jsx(d3,{})}),e.jsx(pe,{path:"administration/roles",element:e.jsx(x3,{})}),e.jsx(pe,{path:"administration/policies",element:e.jsx(u3,{})}),e.jsx(pe,{path:"administration/users",element:e.jsx(m3,{})}),e.jsx(pe,{path:"administration/leave-management",element:e.jsx(h3,{})}),e.jsx(pe,{path:"administration/project-approval",element:e.jsx(y3,{})}),e.jsx(pe,{path:"assets",element:e.jsx(b3,{})}),e.jsx(pe,{path:"clients",element:e.jsx(w3,{})}),e.jsx(pe,{path:"projects",element:e.jsx(k3,{})}),e.jsx(pe,{path:"timesheets",element:e.jsx(C3,{})}),e.jsx(pe,{path:"documents",element:e.jsx(E3,{})}),e.jsx(pe,{path:"compliance",element:e.jsx(_3,{})}),e.jsx(pe,{path:"candidates",element:e.jsx(F3,{})}),e.jsx(pe,{path:"document-verification",element:e.jsx(yA,{})}),e.jsx(pe,{path:"talent-pool",element:e.jsx(T3,{})}),e.jsx(pe,{path:"feedback",element:e.jsx(Hu,{})}),e.jsx(pe,{path:"exit-process",element:e.jsx(R3,{})}),e.jsx(pe,{path:"reports/export",element:e.jsx(P3,{})}),e.jsx(pe,{path:"reports/compliance",element:e.jsx(I3,{})}),e.jsx(pe,{path:"reports/leave",element:e.jsx(VA,{})}),e.jsx(pe,{path:"reports/attendance",element:e.jsx(nm,{})}),e.jsx(pe,{path:"reports/compliance-reports",element:e.jsx(HA,{})}),e.jsx(pe,{path:"reports/scheduled",element:e.jsx(qA,{})}),e.jsx(pe,{path:"reports/analytics",element:e.jsx(im,{})}),e.jsx(pe,{path:"leave-encashment/rules",element:e.jsx(sm,{})}),e.jsx(pe,{path:"leave-encashment/requests",element:e.jsx(am,{})}),e.jsx(pe,{path:"leave-encashment/history",element:e.jsx(rm,{})}),e.jsx(pe,{path:"leave-encashment/automatic-settings",element:e.jsx(UA,{})}),e.jsx(pe,{path:"leave-accrual/policies",element:e.jsx(lm,{})}),e.jsx(pe,{path:"leave-accrual/history",element:e.jsx(WA,{})}),e.jsx(pe,{path:"leave-accrual/manual",element:e.jsx(GA,{})}),e.jsx(pe,{path:"approval-workflow/workflows",element:e.jsx($s,{roles:["admin","company_admin"],children:e.jsx(um,{})})}),e.jsx(pe,{path:"approval-workflow/workflows/new",element:e.jsx($s,{roles:["admin","company_admin"],children:e.jsx(x0,{})})}),e.jsx(pe,{path:"approval-workflow/workflows/:id/edit",element:e.jsx($s,{roles:["admin","company_admin"],children:e.jsx(x0,{})})}),e.jsx(pe,{path:"approval-workflow/workflows/:id/history",element:e.jsx($s,{roles:["admin","company_admin"],children:e.jsx(Z8,{})})}),e.jsx(pe,{path:"approval-workflow/workflows/:id/analytics",element:e.jsx($s,{roles:["admin","company_admin"],children:e.jsx(J8,{})})}),e.jsx(pe,{path:"approval-workflow/matrix",element:e.jsx($s,{roles:["admin","company_admin"],children:e.jsx(X8,{})})}),e.jsx(pe,{path:"approval-workflow/delegations",element:e.jsx($s,{roles:["admin","company_admin","hr","manager"],children:e.jsx(K8,{})})}),e.jsx(pe,{path:"approval-workflow/pending",element:e.jsx($s,{roles:["admin","company_admin","hr","manager"],children:e.jsx(u0,{})})}),e.jsx(pe,{path:"approval-workflow/sla",element:e.jsx($s,{roles:["admin","company_admin","hr"],children:e.jsx(Q8,{})})}),e.jsx(pe,{path:"biometric/devices",element:e.jsx(eR,{})}),e.jsx(pe,{path:"biometric/employee-sync",element:e.jsx(tR,{})}),e.jsx(pe,{path:"biometric/attendance-pull",element:e.jsx(sR,{})}),e.jsx(pe,{path:"biometric/sync-logs",element:e.jsx(aR,{})}),e.jsx(pe,{path:"sap/connections",element:e.jsx(rR,{})}),e.jsx(pe,{path:"sap/employee-sync",element:e.jsx(nR,{})}),e.jsx(pe,{path:"sap/leave-sync",element:e.jsx(iR,{})}),e.jsx(pe,{path:"sap/attendance-sync",element:e.jsx(lR,{})}),e.jsx(pe,{path:"sap/sync-logs",element:e.jsx(cR,{})}),e.jsx(pe,{path:"settings/profile",element:e.jsx(v3,{})}),e.jsx(pe,{path:"settings/security",element:e.jsx(j3,{})}),e.jsx(pe,{path:"settings/preferences",element:e.jsx(N3,{})}),e.jsx(pe,{path:"settings/theme",element:e.jsx(Bu,{})})]}),e.jsxs(pe,{path:"/employee/*",element:e.jsx($s,{roles:["employee","manager","hr"],children:e.jsx(Lb,{})}),children:[e.jsx(pe,{path:"dashboard",element:e.jsx(qu,{})}),e.jsx(pe,{path:"home",element:e.jsx(qu,{})}),e.jsx(pe,{path:"leave",element:e.jsx(B3,{})}),e.jsx(pe,{path:"leave/balance",element:e.jsx(U3,{})}),e.jsx(pe,{path:"leave/apply",element:e.jsx(V3,{})}),e.jsx(pe,{path:"attendance",element:e.jsx(H3,{})}),e.jsx(pe,{path:"attendance/request",element:e.jsx(q3,{})}),e.jsx(pe,{path:"attendance/logs",element:e.jsx(W3,{})}),e.jsx(pe,{path:"attendance/history",element:e.jsx(G3,{})}),e.jsx(pe,{path:"attendance/holidays",element:e.jsx(Y3,{})}),e.jsx(pe,{path:"team",element:e.jsx(Z3,{})}),e.jsx(pe,{path:"payslips",element:e.jsx(J3,{})}),e.jsx(pe,{path:"projects",element:e.jsx(X3,{})}),e.jsx(pe,{path:"requests",element:e.jsx(z3,{})}),e.jsx(pe,{path:"profile",element:e.jsx(sA,{})}),e.jsx(pe,{path:"settings/theme",element:e.jsx(Bu,{})}),e.jsx(pe,{path:"work-schedule/shift-templates",element:e.jsx(Ku,{})}),e.jsx(pe,{path:"work-schedule/rosters",element:e.jsx(Qu,{})}),e.jsx(pe,{path:"work-schedule/roster-calendar",element:e.jsx(em,{})}),e.jsx(pe,{path:"work-schedule/roster-change-requests",element:e.jsx(tm,{})}),e.jsx(pe,{path:"manager/home",element:e.jsx(rA,{})}),e.jsx(pe,{path:"manager/leave-approvals",element:e.jsx(iA,{})}),e.jsx(pe,{path:"manager/team-reports",element:e.jsx(xA,{})}),e.jsx(pe,{path:"manager/assign-project",element:e.jsx(lA,{})}),e.jsx(pe,{path:"manager/projects",element:e.jsx(cA,{})}),e.jsx(pe,{path:"manager/schedule-meeting",element:e.jsx(oA,{})}),e.jsx(pe,{path:"manager/announcements",element:e.jsx(dA,{})}),e.jsx(pe,{path:"hr/dashboard",element:e.jsx(hA,{})}),e.jsx(pe,{path:"hr/employees",element:e.jsx(fA,{})}),e.jsx(pe,{path:"hr/attendance",element:e.jsx(Lu,{})}),e.jsx(pe,{path:"hr/payroll",element:e.jsx(Mu,{})}),e.jsx(pe,{path:"hr/recruitment",element:e.jsx(Ax,{})}),e.jsx(pe,{path:"hr/recruitment/:jobId/applicants",element:e.jsx(_x,{})}),e.jsx(pe,{path:"hr/recruitment/candidates/:candidateId/timeline",element:e.jsx(Fx,{})}),e.jsx(pe,{path:"hr/resume-search",element:e.jsx(pA,{})}),e.jsx(pe,{path:"hr/candidate-pool",element:e.jsx(gA,{})}),e.jsx(pe,{path:"hr/performance",element:e.jsx(Hu,{})}),e.jsx(pe,{path:"hr/onboarding",element:e.jsx(Tx,{})}),e.jsx(pe,{path:"hr/offboarding",element:e.jsx(Rx,{})}),e.jsx(pe,{path:"leave-encashment/requests",element:e.jsx(am,{})}),e.jsx(pe,{path:"leave-encashment/history",element:e.jsx(rm,{})}),e.jsx(pe,{path:"hr/leave-encashment-rules",element:e.jsx(sm,{})}),e.jsx(pe,{path:"hr/leave-accrual-policies",element:e.jsx(lm,{})}),e.jsx(pe,{path:"hr/approval-workflows",element:e.jsx($s,{roles:["admin","company_admin"],children:e.jsx(um,{})})}),e.jsx(pe,{path:"hr/pending-approvals",element:e.jsx($s,{roles:["admin","company_admin","hr","manager"],children:e.jsx(u0,{})})}),e.jsx(pe,{path:"hr/reports/analytics",element:e.jsx(im,{})}),e.jsx(pe,{path:"hr/attendance-reports",element:e.jsx(nm,{})})]}),e.jsxs(pe,{path:"/super-admin/*",element:e.jsx($s,{roles:["superadmin"],children:e.jsx(sv,{})}),children:[e.jsx(pe,{path:"dashboard",element:e.jsx(bA,{})}),e.jsx(pe,{path:"clients",element:e.jsx(jA,{})}),e.jsx(pe,{path:"packages",element:e.jsx(wA,{})}),e.jsx(pe,{path:"subscriptions",element:e.jsx(RA,{})}),e.jsx(pe,{path:"invoices",element:e.jsx(PA,{})}),e.jsx(pe,{path:"revenue",element:e.jsx(MA,{})}),e.jsx(pe,{path:"billing-alerts",element:e.jsx(BA,{})}),e.jsx(pe,{path:"roles",element:e.jsx(kA,{})}),e.jsx(pe,{path:"audit",element:e.jsx(SA,{})}),e.jsx(pe,{path:"analytics",element:e.jsx(CA,{})}),e.jsx(pe,{path:"config",element:e.jsx(AA,{})}),e.jsx(pe,{path:"data",element:e.jsx(EA,{})}),e.jsx(pe,{index:!0,element:e.jsx(er,{to:"dashboard",replace:!0})})]})]})]})})})}lo.createRoot(document.getElementById("root")).render(e.jsx(Ve.StrictMode,{children:e.jsx(oR,{})}));export{J as a};
